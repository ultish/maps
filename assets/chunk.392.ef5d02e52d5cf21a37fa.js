/*! For license information please see chunk.392.ef5d02e52d5cf21a37fa.js.LICENSE.txt */
(globalThis.webpackChunk_ember_auto_import_=globalThis.webpackChunk_ember_auto_import_||[]).push([[392],{747:function(t,e,i){"use strict"
var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=n(i(2045)),o=n(i(2165)),s=n(i(3703)),a=i(6303),l=i(2317)
e.default=function(t,e,i){void 0===i&&(i={})
for(var n=l.getGeom(t).coordinates,h=0,u=0;u<n.length&&!(e>=h&&u===n.length-1);u++){if(h>=e){var c=e-h
if(c){var d=r.default(n[u],n[u-1])-180
return o.default(n[u],c,d,i)}return a.point(n[u])}h+=s.default(n[u],n[u+1],i)}return a.point(n[n.length-1])}},1699:function(t,e,i){"use strict"
var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=n(i(2045)),o=i(6303),s=n(i(8975))
e.default=function(t,e,i,n){if(void 0===n&&(n={}),!o.isObject(n))throw new Error("options is invalid")
if(!t)throw new Error("startPoint is required")
if(!e)throw new Error("midPoint is required")
if(!i)throw new Error("endPoint is required")
var a=t,l=e,h=i,u=o.bearingToAzimuth(!0!==n.mercator?r.default(a,l):s.default(a,l)),c=o.bearingToAzimuth(!0!==n.mercator?r.default(h,l):s.default(h,l)),d=Math.abs(u-c)
return!0===n.explementary?360-d:d}},587:(t,e,i)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var n=i(9611),r=6378137
function o(t){var e=0
if(t&&t.length>0){e+=Math.abs(s(t[0]))
for(var i=1;i<t.length;i++)e-=Math.abs(s(t[i]))}return e}function s(t){var e,i,n,o,s,l,h=0,u=t.length
if(u>2){for(l=0;l<u;l++)l===u-2?(n=u-2,o=u-1,s=0):l===u-1?(n=u-1,o=0,s=1):(n=l,o=l+1,s=l+2),e=t[n],i=t[o],h+=(a(t[s][0])-a(e[0]))*Math.sin(a(i[1]))
h=h*r*r/2}return h}function a(t){return t*Math.PI/180}e.default=function(t){return n.geomReduce(t,(function(t,e){return t+function(t){var e,i=0
switch(t.type){case"Polygon":return o(t.coordinates)
case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)i+=o(t.coordinates[e])
return i
case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(e)}),0)}},2733:(t,e,i)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var n=i(6303),r=i(2317),o=i(8805)
function s(t,e){for(var i=[],n=0,r=t;n<r.length;n++){var s=r[n],a=o.polygonclip(s,e)
a.length>0&&(a[0][0]===a[a.length-1][0]&&a[0][1]===a[a.length-1][1]||a.push(a[0]),a.length>=4&&i.push(a))}return i}e.default=function(t,e){var i=r.getGeom(t),a=i.type,l="Feature"===t.type?t.properties:{},h=i.coordinates
switch(a){case"LineString":case"MultiLineString":var u=[]
return"LineString"===a&&(h=[h]),h.forEach((function(t){o.lineclip(t,e,u)})),1===u.length?n.lineString(u[0],l):n.multiLineString(u,l)
case"Polygon":return n.polygon(s(h,e),l)
case"MultiPolygon":return n.multiPolygon(h.map((function(t){return s(t,e)})),l)
default:throw new Error("geometry "+a+" not supported")}}},8805:(t,e)=>{"use strict"
function i(t,e,i,n){return 8&i?[t[0]+(e[0]-t[0])*(n[3]-t[1])/(e[1]-t[1]),n[3]]:4&i?[t[0]+(e[0]-t[0])*(n[1]-t[1])/(e[1]-t[1]),n[1]]:2&i?[n[2],t[1]+(e[1]-t[1])*(n[2]-t[0])/(e[0]-t[0])]:1&i?[n[0],t[1]+(e[1]-t[1])*(n[0]-t[0])/(e[0]-t[0])]:null}function n(t,e){var i=0
return t[0]<e[0]?i|=1:t[0]>e[2]&&(i|=2),t[1]<e[1]?i|=4:t[1]>e[3]&&(i|=8),i}Object.defineProperty(e,"__esModule",{value:!0}),e.lineclip=function(t,e,r){var o,s,a,l,h,u=t.length,c=n(t[0],e),d=[]
for(r||(r=[]),o=1;o<u;o++){for(l=t[o-1],s=a=n(h=t[o],e);;){if(!(c|s)){d.push(l),s!==a?(d.push(h),o<u-1&&(r.push(d),d=[])):o===u-1&&d.push(h)
break}if(c&s)break
c?c=n(l=i(l,h,c,e),e):s=n(h=i(l,h,s,e),e)}c=a}return d.length&&r.push(d),r},e.polygonclip=function(t,e){var r,o,s,a,l,h,u
for(o=1;o<=8;o*=2){for(r=[],a=!(n(s=t[t.length-1],e)&o),l=0;l<t.length;l++)(u=!(n(h=t[l],e)&o))!==a&&r.push(i(s,h,o,e)),u&&r.push(h),s=h,a=u
if(!(t=r).length)break}return r}},3779:(t,e,i)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var n=i(6303)
e.default=function(t,e){void 0===e&&(e={})
var i=Number(t[0]),r=Number(t[1]),o=Number(t[2]),s=Number(t[3])
if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions")
var a=[i,r],l=[i,s],h=[o,s],u=[o,r]
return n.polygon([[a,u,h,l,a]],e.properties,{bbox:t,id:e.id})}},463:(t,e,i)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var n=i(9611)
function r(t){var e=[1/0,1/0,-1/0,-1/0]
return n.coordEach(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}r.default=r,e.default=r},2045:(t,e,i)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var n=i(6303),r=i(2317)
e.default=function t(e,i,o){if(void 0===o&&(o={}),!0===o.final)return function(e,i){return(t(i,e)+180)%360}(e,i)
var s=r.getCoord(e),a=r.getCoord(i),l=n.degreesToRadians(s[0]),h=n.degreesToRadians(a[0]),u=n.degreesToRadians(s[1]),c=n.degreesToRadians(a[1]),d=Math.sin(h-l)*Math.cos(c),f=Math.cos(u)*Math.sin(c)-Math.sin(u)*Math.cos(c)*Math.cos(h-l)
return n.radiansToDegrees(Math.atan2(d,f))}},6571:function(t,e,i){"use strict"
var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=i(6303),o=i(2317),s=n(i(2746))
e.default=function(t,e){void 0===e&&(e={})
for(var i=e.resolution||1e4,n=e.sharpness||.85,a=[],l=o.getGeom(t).coordinates.map((function(t){return{x:t[0],y:t[1]}})),h=new s.default({duration:i,points:l,sharpness:n}),u=function(t){var e=h.pos(t)
Math.floor(t/100)%2==0&&a.push([e.x,e.y])},c=0;c<h.duration;c+=10)u(c)
return u(h.duration),r.lineString(a,e.properties)}},2746:(t,e)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var i=function(){function t(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0
for(var e=0;e<this.length;e++)this.points[e].z=this.points[e].z||0
for(e=0;e<this.length-1;e++){var i=this.points[e],n=this.points[e+1]
this.centers.push({x:(i.x+n.x)/2,y:(i.y+n.y)/2,z:(i.z+n.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),e=0;e<this.centers.length-1;e++){var r=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,o=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,s=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2
this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+r),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+s)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+r),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+s)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}return t.prototype.cacheSteps=function(t){var e=[],i=this.pos(0)
e.push(0)
for(var n=0;n<this.duration;n+=10){var r=this.pos(n)
Math.sqrt((r.x-i.x)*(r.x-i.x)+(r.y-i.y)*(r.y-i.y)+(r.z-i.z)*(r.z-i.z))>t&&(e.push(n),i=r)}return e},t.prototype.vector=function(t){var e=this.pos(t+10),i=this.pos(t-10)
return{angle:180*Math.atan2(e.y-i.y,e.x-i.x)/3.14,speed:Math.sqrt((i.x-e.x)*(i.x-e.x)+(i.y-e.y)*(i.y-e.y)+(i.z-e.z)*(i.z-e.z))}},t.prototype.pos=function(t){var e=t-this.delay
e<0&&(e=0),e>this.duration&&(e=this.duration-1)
var i=e/this.duration
if(i>=1)return this.points[this.length-1]
var n=Math.floor((this.points.length-1)*i)
return function(t,e,i,n,r){var o=function(t){var e=t*t
return[e*t,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]}(t)
return{x:r.x*o[0]+n.x*o[1]+i.x*o[2]+e.x*o[3],y:r.y*o[0]+n.y*o[1]+i.y*o[2]+e.y*o[3],z:r.z*o[0]+n.z*o[1]+i.z*o[2]+e.z*o[3]}}((this.length-1)*i-n,this.points[n],this.controls[n][1],this.controls[n+1][0],this.points[n+1])},t}()
e.default=i},8467:(t,e,i)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var n=i(2317)
e.default=function(t){for(var e,i,r=n.getCoords(t),o=0,s=1;s<r.length;)e=i||r[0],o+=((i=r[s])[0]-e[0])*(i[1]+e[1]),s++
return o>0}},4931:function(t,e,i){"use strict"
var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=n(i(463)),o=n(i(2015)),s=n(i(4537)),a=i(2317)
function l(t,e){var i,n=!1
for(i=0;i<t.coordinates.length;i++)if(_(t.coordinates[i],e.coordinates)){n=!0
break}return n}function h(t,e){for(var i=0,n=e.coordinates;i<n.length;i++){for(var r=n[i],o=!1,s=0,a=t.coordinates;s<a.length;s++)if(_(r,a[s])){o=!0
break}if(!o)return!1}return!0}function u(t,e){for(var i=!1,n=0,r=e.coordinates;n<r.length;n++){var o=r[n]
if(s.default(o,t,{ignoreEndVertices:!0})&&(i=!0),!s.default(o,t))return!1}return!!i}function c(t,e){for(var i=0,n=e.coordinates;i<n.length;i++){var r=n[i]
if(!o.default(r,t,{ignoreBoundary:!0}))return!1}return!0}function d(t,e){for(var i=!1,n=0,r=e.coordinates;n<r.length;n++){var o=r[n]
if(s.default({type:"Point",coordinates:o},t,{ignoreEndVertices:!0})&&(i=!0),!s.default({type:"Point",coordinates:o},t,{ignoreEndVertices:!1}))return!1}return i}function f(t,e){var i=!1,n=0
if(!g(r.default(t),r.default(e)))return!1
for(;n<e.coordinates.length-1;n++){var s=m(e.coordinates[n],e.coordinates[n+1])
if(o.default({type:"Point",coordinates:s},t,{ignoreBoundary:!0})){i=!0
break}}return i}function p(t,e){if("Feature"===t.type&&null===t.geometry)return!1
if("Feature"===e.type&&null===e.geometry)return!1
if(!g(r.default(t),r.default(e)))return!1
for(var i=0,n=a.getGeom(e).coordinates;i<n.length;i++)for(var s=0,l=n[i];s<l.length;s++){var h=l[s]
if(!o.default(h,t))return!1}return!0}function g(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function _(t,e){return t[0]===e[0]&&t[1]===e[1]}function m(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}e.default=function(t,e){var i=a.getGeom(t),n=a.getGeom(e),r=i.type,g=n.type,m=i.coordinates,y=n.coordinates
switch(r){case"Point":if("Point"===g)return _(m,y)
throw new Error("feature2 "+g+" geometry not supported")
case"MultiPoint":switch(g){case"Point":return l(i,n)
case"MultiPoint":return h(i,n)
default:throw new Error("feature2 "+g+" geometry not supported")}case"LineString":switch(g){case"Point":return s.default(n,i,{ignoreEndVertices:!0})
case"LineString":return d(i,n)
case"MultiPoint":return u(i,n)
default:throw new Error("feature2 "+g+" geometry not supported")}case"Polygon":switch(g){case"Point":return o.default(n,i,{ignoreBoundary:!0})
case"LineString":return f(i,n)
case"Polygon":return p(i,n)
case"MultiPoint":return c(i,n)
default:throw new Error("feature2 "+g+" geometry not supported")}default:throw new Error("feature1 "+r+" geometry not supported")}},e.isPointInMultiPoint=l,e.isMultiPointInMultiPoint=h,e.isMultiPointOnLine=u,e.isMultiPointInPoly=c,e.isLineOnLine=d,e.isLineInPoly=f,e.isPolyInPoly=p,e.doBBoxOverlap=g,e.compareCoords=_,e.getMidpoint=m},4303:function(t,e,i){"use strict"
var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=n(i(7315)),o=i(3799),s=n(i(2015)),a=i(2317),l=i(6303)
function h(t,e){for(var i=!1,n=!1,r=t.coordinates.length,o=0;o<r&&!i&&!n;){for(var s=0;s<e.coordinates.length-1;s++){var a=!0
0!==s&&s!==e.coordinates.length-2||(a=!1),d(e.coordinates[s],e.coordinates[s+1],t.coordinates[o],a)?i=!0:n=!0}o++}return i&&n}function u(t,e){var i=o.polygonToLine(e)
return r.default(t,i).features.length>0}function c(t,e){for(var i=!1,n=!1,r=t.coordinates.length,o=0;o<r&&(!i||!n);o++)s.default(l.point(t.coordinates[o]),e)?i=!0:n=!0
return n&&i}function d(t,e,i,n){var r=i[0]-t[0],o=i[1]-t[1],s=e[0]-t[0],a=e[1]-t[1]
return 0==r*a-o*s&&(n?Math.abs(s)>=Math.abs(a)?s>0?t[0]<=i[0]&&i[0]<=e[0]:e[0]<=i[0]&&i[0]<=t[0]:a>0?t[1]<=i[1]&&i[1]<=e[1]:e[1]<=i[1]&&i[1]<=t[1]:Math.abs(s)>=Math.abs(a)?s>0?t[0]<i[0]&&i[0]<e[0]:e[0]<i[0]&&i[0]<t[0]:a>0?t[1]<i[1]&&i[1]<e[1]:e[1]<i[1]&&i[1]<t[1])}e.default=function(t,e){var i=a.getGeom(t),n=a.getGeom(e),o=i.type,s=n.type
switch(o){case"MultiPoint":switch(s){case"LineString":return h(i,n)
case"Polygon":return c(i,n)
default:throw new Error("feature2 "+s+" geometry not supported")}case"LineString":switch(s){case"MultiPoint":return h(n,i)
case"LineString":return function(t,e){if(r.default(t,e).features.length>0)for(var i=0;i<t.coordinates.length-1;i++)for(var n=0;n<e.coordinates.length-1;n++){var o=!0
if(0!==n&&n!==e.coordinates.length-2||(o=!1),d(t.coordinates[i],t.coordinates[i+1],e.coordinates[n],o))return!0}return!1}(i,n)
case"Polygon":return u(i,n)
default:throw new Error("feature2 "+s+" geometry not supported")}case"Polygon":switch(s){case"MultiPoint":return c(n,i)
case"LineString":return u(n,i)
default:throw new Error("feature2 "+s+" geometry not supported")}default:throw new Error("feature1 "+o+" geometry not supported")}}},7899:function(t,e,i){"use strict"
var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=n(i(2015)),o=n(i(7315)),s=i(9611),a=n(i(3799))
function l(t,e){for(var i=0;i<t.coordinates.length-1;i++)if(u(t.coordinates[i],t.coordinates[i+1],e.coordinates))return!0
return!1}function h(t,e){for(var i=0,n=e.coordinates;i<n.length;i++){var s=n[i]
if(r.default(s,t))return!0}return o.default(e,a.default(t)).features.length>0}function u(t,e,i){var n=i[0]-t[0],r=i[1]-t[1],o=e[0]-t[0],s=e[1]-t[1]
return 0==n*s-r*o&&(Math.abs(o)>=Math.abs(s)?o>0?t[0]<=i[0]&&i[0]<=e[0]:e[0]<=i[0]&&i[0]<=t[0]:s>0?t[1]<=i[1]&&i[1]<=e[1]:e[1]<=i[1]&&i[1]<=t[1])}e.default=function(t,e){var i=!0
return s.flattenEach(t,(function(t){s.flattenEach(e,(function(e){if(!1===i)return!1
i=function(t,e){switch(t.type){case"Point":switch(e.type){case"Point":return s=t.coordinates,u=e.coordinates,!(s[0]===u[0]&&s[1]===u[1])
case"LineString":return!l(e,t)
case"Polygon":return!r.default(t,e)}break
case"LineString":switch(e.type){case"Point":return!l(t,e)
case"LineString":return i=t,n=e,!(o.default(i,n).features.length>0)
case"Polygon":return!h(e,t)}break
case"Polygon":switch(e.type){case"Point":return!r.default(e,t)
case"LineString":return!h(t,e)
case"Polygon":return!function(t,e){for(var i=0,n=t.coordinates[0];i<n.length;i++){var s=n[i]
if(r.default(s,e))return!0}for(var l=0,h=e.coordinates[0];l<h.length;l++){var u=h[l]
if(r.default(u,t))return!0}return o.default(a.default(t),a.default(e)).features.length>0}(e,t)}}var i,n,s,u
return!1}(t.geometry,e.geometry)}))})),i}},7567:function(t,e,i){"use strict"
var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=n(i(9362)),o=n(i(2707)),s=i(2317)
e.default=function(t,e){return s.getGeom(t).type===s.getGeom(e).type&&new r.default({precision:6}).compare(o.default(t),o.default(e))}},7323:function(t,e,i){"use strict"
var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=n(i(7899)),o=i(9611)
e.default=function(t,e){var i=!1
return o.flattenEach(t,(function(t){o.flattenEach(e,(function(e){if(!0===i)return!0
i=!r.default(t.geometry,e.geometry)}))})),i}},6669:function(t,e,i){"use strict"
var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=i(9611),o=i(2317),s=n(i(1055)),a=n(i(7315)),l=n(i(9362))
e.default=function(t,e){var i=o.getGeom(t),n=o.getGeom(e),h=i.type,u=n.type
if("MultiPoint"===h&&"MultiPoint"!==u||("LineString"===h||"MultiLineString"===h)&&"LineString"!==u&&"MultiLineString"!==u||("Polygon"===h||"MultiPolygon"===h)&&"Polygon"!==u&&"MultiPolygon"!==u)throw new Error("features must be of the same type")
if("Point"===h)throw new Error("Point geometry not supported")
if(new l.default({precision:6}).compare(t,e))return!1
var c=0
switch(h){case"MultiPoint":for(var d=0;d<i.coordinates.length;d++)for(var f=0;f<n.coordinates.length;f++){var p=i.coordinates[d],g=n.coordinates[f]
if(p[0]===g[0]&&p[1]===g[1])return!0}return!1
case"LineString":case"MultiLineString":r.segmentEach(t,(function(t){r.segmentEach(e,(function(e){s.default(t,e).features.length&&c++}))}))
break
case"Polygon":case"MultiPolygon":r.segmentEach(t,(function(t){r.segmentEach(e,(function(e){a.default(t,e).features.length&&c++}))}))}return c>0}},4003:function(t,e,i){"use strict"
var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=n(i(2707)),o=n(i(8735)),s=n(i(8975)),a=i(6303)
function l(t,e){return a.bearingToAzimuth(s.default(t[0],t[1]))===a.bearingToAzimuth(s.default(e[0],e[1]))}function h(t,e){if(t.geometry&&t.geometry.type)return t.geometry.type
if(t.type)return t.type
throw new Error("Invalid GeoJSON object for "+e)}e.default=function(t,e){if(!t)throw new Error("line1 is required")
if(!e)throw new Error("line2 is required")
if("LineString"!==h(t,"line1"))throw new Error("line1 must be a LineString")
if("LineString"!==h(e,"line2"))throw new Error("line2 must be a LineString")
for(var i=o.default(r.default(t)).features,n=o.default(r.default(e)).features,s=0;s<i.length;s++){var a=i[s].geometry.coordinates
if(!n[s])break
if(!l(a,n[s].geometry.coordinates))return!1}return!0}},2015:(t,e,i)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var n=i(2317)
function r(t,e,i){var n=!1
e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1))
for(var r=0,o=e.length-1;r<e.length;o=r++){var s=e[r][0],a=e[r][1],l=e[o][0],h=e[o][1]
if(t[1]*(s-l)+a*(l-t[0])+h*(t[0]-s)==0&&(s-t[0])*(l-t[0])<=0&&(a-t[1])*(h-t[1])<=0)return!i
a>t[1]!=h>t[1]&&t[0]<(l-s)*(t[1]-a)/(h-a)+s&&(n=!n)}return n}e.default=function(t,e,i){if(void 0===i&&(i={}),!t)throw new Error("point is required")
if(!e)throw new Error("polygon is required")
var o=n.getCoord(t),s=n.getGeom(e),a=s.type,l=e.bbox,h=s.coordinates
if(l&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(o,l))return!1
"Polygon"===a&&(h=[h])
for(var u=!1,c=0;c<h.length&&!u;c++)if(r(o,h[c][0],i.ignoreBoundary)){for(var d=!1,f=1;f<h[c].length&&!d;)r(o,h[c][f],!i.ignoreBoundary)&&(d=!0),f++
d||(u=!0)}return u}},4537:(t,e,i)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var n=i(2317)
function r(t,e,i,n,r){var o=i[0],s=i[1],a=t[0],l=t[1],h=e[0],u=e[1],c=h-a,d=u-l,f=(i[0]-a)*d-(i[1]-l)*c
if(null!==r){if(Math.abs(f)>r)return!1}else if(0!==f)return!1
return n?"start"===n?Math.abs(c)>=Math.abs(d)?c>0?a<o&&o<=h:h<=o&&o<a:d>0?l<s&&s<=u:u<=s&&s<l:"end"===n?Math.abs(c)>=Math.abs(d)?c>0?a<=o&&o<h:h<o&&o<=a:d>0?l<=s&&s<u:u<s&&s<=l:"both"===n&&(Math.abs(c)>=Math.abs(d)?c>0?a<o&&o<h:h<o&&o<a:d>0?l<s&&s<u:u<s&&s<l):Math.abs(c)>=Math.abs(d)?c>0?a<=o&&o<=h:h<=o&&o<=a:d>0?l<=s&&s<=u:u<=s&&s<=l}e.default=function(t,e,i){void 0===i&&(i={})
for(var o=n.getCoord(t),s=n.getCoords(e),a=0;a<s.length-1;a++){var l=!1
if(i.ignoreEndVertices&&(0===a&&(l="start"),a===s.length-2&&(l="end"),0===a&&a+1===s.length-1&&(l="both")),r(s[a],s[a+1],o,l,void 0===i.epsilon?null:i.epsilon))return!0}return!1}},9555:function(t,e,i){"use strict"
var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=n(i(463)),o=n(i(4537)),s=n(i(2015)),a=i(2317)
function l(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function h(t,e){return t[0]===e[0]&&t[1]===e[1]}e.default=function(t,e){var i=a.getGeom(t),n=a.getGeom(e),u=i.type,c=n.type
switch(u){case"Point":switch(c){case"MultiPoint":return function(t,e){var i,n=!1
for(i=0;i<e.coordinates.length;i++)if(h(e.coordinates[i],t.coordinates)){n=!0
break}return n}(i,n)
case"LineString":return o.default(i,n,{ignoreEndVertices:!0})
case"Polygon":case"MultiPolygon":return s.default(i,n,{ignoreBoundary:!0})
default:throw new Error("feature2 "+c+" geometry not supported")}case"MultiPoint":switch(c){case"MultiPoint":return function(t,e){for(var i=0;i<t.coordinates.length;i++){for(var n=!1,r=0;r<e.coordinates.length;r++)h(t.coordinates[i],e.coordinates[r])&&(n=!0)
if(!n)return!1}return!0}(i,n)
case"LineString":return function(t,e){for(var i=!1,n=0;n<t.coordinates.length;n++){if(!o.default(t.coordinates[n],e))return!1
i||(i=o.default(t.coordinates[n],e,{ignoreEndVertices:!0}))}return i}(i,n)
case"Polygon":case"MultiPolygon":return function(t,e){for(var i=!0,n=!1,r=0;r<t.coordinates.length;r++){if(!(n=s.default(t.coordinates[1],e))){i=!1
break}n=s.default(t.coordinates[1],e,{ignoreBoundary:!0})}return i&&n}(i,n)
default:throw new Error("feature2 "+c+" geometry not supported")}case"LineString":switch(c){case"LineString":return function(t,e){for(var i=0;i<t.coordinates.length;i++)if(!o.default(t.coordinates[i],e))return!1
return!0}(i,n)
case"Polygon":case"MultiPolygon":return function(t,e){var i,n
if(!l(r.default(e),r.default(t)))return!1
for(var o=!1,a=0;a<t.coordinates.length-1;a++){if(!s.default(t.coordinates[a],e))return!1
if(o||(o=s.default(t.coordinates[a],e,{ignoreBoundary:!0})),!o){var h=(i=t.coordinates[a],n=t.coordinates[a+1],[(i[0]+n[0])/2,(i[1]+n[1])/2])
o=s.default(h,e,{ignoreBoundary:!0})}}return o}(i,n)
default:throw new Error("feature2 "+c+" geometry not supported")}case"Polygon":switch(c){case"Polygon":case"MultiPolygon":return function(t,e){var i=r.default(t)
if(!l(r.default(e),i))return!1
for(var n=0;n<t.coordinates[0].length;n++)if(!s.default(t.coordinates[0][n],e))return!1
return!0}(i,n)
default:throw new Error("feature2 "+c+" geometry not supported")}default:throw new Error("feature1 "+u+" geometry not supported")}}},2415:(t,e,i)=>{"use strict"
var n=i(6731),r=i(3011),o=i(9611),s=i(4887),a=i(6303)
var l=function(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}(n)
function h(t,e,i){var n=(i=i||{}).units||"kilometers",r=i.steps||8
if(!t)throw new Error("geojson is required")
if("object"!=typeof i)throw new Error("options must be an object")
if("number"!=typeof r)throw new Error("steps must be an number")
if(void 0===e)throw new Error("radius is required")
if(r<=0)throw new Error("steps must be greater than 0")
var s=[]
switch(t.type){case"GeometryCollection":return o.geomEach(t,(function(t){var i=u(t,e,n,r)
i&&s.push(i)})),a.featureCollection(s)
case"FeatureCollection":return o.featureEach(t,(function(t){var i=u(t,e,n,r)
i&&o.featureEach(i,(function(t){t&&s.push(t)}))})),a.featureCollection(s)}return u(t,e,n,r)}function u(t,e,i,n){var h=t.properties||{},p="Feature"===t.type?t.geometry:t
if("GeometryCollection"===p.type){var g=[]
return o.geomEach(t,(function(t){var r=u(t,e,i,n)
r&&g.push(r)})),a.featureCollection(g)}var _=function(t){var e=l.default(t).geometry.coordinates,i=[-e[0],-e[1]]
return s.geoAzimuthalEquidistant().rotate(i).scale(a.earthRadius)}(p),m={type:p.type,coordinates:d(p.coordinates,_)},y=(new r.GeoJSONReader).read(m),v=a.radiansToLength(a.lengthToRadians(e,i),"meters"),x=r.BufferOp.bufferOp(y,v,n)
if(!c((x=(new r.GeoJSONWriter).write(x)).coordinates)){var b={type:x.type,coordinates:f(x.coordinates,_)}
return a.feature(b,h)}}function c(t){return Array.isArray(t[0])?c(t[0]):isNaN(t[0])}function d(t,e){return"object"!=typeof t[0]?e(t):t.map((function(t){return d(t,e)}))}function f(t,e){return"object"!=typeof t[0]?e.invert(t):t.map((function(t){return f(t,e)}))}t.exports=h,t.exports.default=h},3031:(t,e,i)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var n=i(9611),r=i(6303)
e.default=function(t,e){void 0===e&&(e={})
var i=0,o=0,s=0
return n.geomEach(t,(function(t,a,l){var h=e.weight?null==l?void 0:l[e.weight]:void 0
if(h=null==h?1:h,!r.isNumber(h))throw new Error("weight value must be a number for feature index "+a);(h=Number(h))>0&&n.coordEach(t,(function(t){i+=t[0]*h,o+=t[1]*h,s+=h}))})),r.point([i/s,o/s],e.properties,e)}},6577:function(t,e,i){"use strict"
var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=n(i(3031)),o=n(i(3703)),s=n(i(5335)),a=i(6303),l=i(9611)
function h(t,e,i,n,r){var s=n.tolerance||.001,u=0,c=0,d=0,f=0
if(l.featureEach(i,(function(e){var i,n=null===(i=e.properties)||void 0===i?void 0:i.weight,r=null==n?1:n
if(r=Number(r),!a.isNumber(r))throw new Error("weight value must be a number")
if(r>0){f+=1
var s=r*o.default(e,t)
0===s&&(s=1)
var l=r/s
u+=e.geometry.coordinates[0]*l,c+=e.geometry.coordinates[1]*l,d+=l}})),f<1)throw new Error("no features to measure")
var p=u/d,g=c/d
return 1===f||0===r||Math.abs(p-e[0])<s&&Math.abs(g-e[1])<s?a.point([p,g],{medianCandidates:n.medianCandidates}):(n.medianCandidates.push([p,g]),h([p,g],t,i,n,r-1))}e.default=function(t,e){if(void 0===e&&(e={}),e=e||{},!a.isObject(e))throw new Error("options is invalid")
var i=e.counter||10
if(!a.isNumber(i))throw new Error("counter must be a number")
var n=e.weight,o=r.default(t,{weight:e.weight}),u=a.featureCollection([])
l.featureEach(t,(function(t){var e
u.features.push(s.default(t,{properties:{weight:null===(e=t.properties)||void 0===e?void 0:e[n]}}))}))
var c={tolerance:e.tolerance,medianCandidates:[]}
return h(o.geometry.coordinates,[0,0],u,c,i)}},8331:function(t,e,i){"use strict"
var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=n(i(627)),o=n(i(5335)),s=i(6303),a=i(2317),l=i(9611)
e.default=function t(e,i){switch(void 0===i&&(i={}),a.getType(e)){case"Point":return s.point(a.getCoord(e),i.properties)
case"Polygon":var n=[]
l.coordEach(e,(function(t){n.push(t)}))
var h,u,c,d,f,p,g,_,m=o.default(e,{properties:i.properties}),y=m.geometry.coordinates,v=0,x=0,b=0,w=n.map((function(t){return[t[0]-y[0],t[1]-y[1]]}))
for(h=0;h<n.length-1;h++)d=(u=w[h])[0],p=u[1],f=(c=w[h+1])[0],b+=_=d*(g=c[1])-f*p,v+=(d+f)*_,x+=(p+g)*_
if(0===b)return m
var E=1/(.5*b*6)
return s.point([y[0]+E*v,y[1]+E*x],i.properties)
default:var S=r.default(e)
return S?t(S,{properties:i.properties}):o.default(e,{properties:i.properties})}}},6731:function(t,e,i){"use strict"
var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=n(i(463)),o=i(6303)
e.default=function(t,e){void 0===e&&(e={})
var i=r.default(t),n=(i[0]+i[2])/2,s=(i[1]+i[3])/2
return o.point([n,s],e.properties,e)}},5335:(t,e,i)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var n=i(9611),r=i(6303)
e.default=function(t,e){void 0===e&&(e={})
var i=0,o=0,s=0
return n.coordEach(t,(function(t){i+=t[0],o+=t[1],s++}),!0),r.point([i/s,o/s],e.properties)}},7651:function(t,e,i){"use strict"
var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=n(i(2165)),o=i(6303)
e.default=function(t,e,i){void 0===i&&(i={})
for(var n=i.steps||64,s=i.properties?i.properties:!Array.isArray(t)&&"Feature"===t.type&&t.properties?t.properties:{},a=[],l=0;l<n;l++)a.push(r.default(t,e,-360*l/n,i).geometry.coordinates)
return a.push(a[0]),o.polygon([a],s)}},2707:(t,e,i)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var n=i(6303),r=i(2317)
function o(t){var e=r.getCoords(t)
if(2===e.length&&!s(e[0],e[1]))return e
var i=[],n=e.length-1,o=i.length
i.push(e[0])
for(var l=1;l<n;l++){var h=i[i.length-1]
e[l][0]===h[0]&&e[l][1]===h[1]||(i.push(e[l]),(o=i.length)>2&&a(i[o-3],i[o-1],i[o-2])&&i.splice(i.length-2,1))}if(i.push(e[e.length-1]),o=i.length,s(e[0],e[e.length-1])&&o<4)throw new Error("invalid polygon")
return a(i[o-3],i[o-1],i[o-2])&&i.splice(i.length-2,1),i}function s(t,e){return t[0]===e[0]&&t[1]===e[1]}function a(t,e,i){var n=i[0],r=i[1],o=t[0],s=t[1],a=e[0],l=e[1],h=a-o,u=l-s
return 0==(n-o)*u-(r-s)*h&&(Math.abs(h)>=Math.abs(u)?h>0?o<=n&&n<=a:a<=n&&n<=o:u>0?s<=r&&r<=l:l<=r&&r<=s)}e.default=function(t,e){void 0===e&&(e={})
var i="object"==typeof e?e.mutate:e
if(!t)throw new Error("geojson is required")
var s=r.getType(t),a=[]
switch(s){case"LineString":a=o(t)
break
case"MultiLineString":case"Polygon":r.getCoords(t).forEach((function(t){a.push(o(t))}))
break
case"MultiPolygon":r.getCoords(t).forEach((function(t){var e=[]
t.forEach((function(t){e.push(o(t))})),a.push(e)}))
break
case"Point":return t
case"MultiPoint":var l={}
r.getCoords(t).forEach((function(t){var e=t.join("-")
Object.prototype.hasOwnProperty.call(l,e)||(a.push(t),l[e]=!0)}))
break
default:throw new Error(s+" geometry not supported")}return t.coordinates?!0===i?(t.coordinates=a,t):{type:s,coordinates:a}:!0===i?(t.geometry.coordinates=a,t):n.feature({type:s,coordinates:a},t.properties,{bbox:t.bbox,id:t.id})}},7051:(t,e)=>{"use strict"
function i(t){var e={type:"Feature"}
return Object.keys(t).forEach((function(i){switch(i){case"type":case"properties":case"geometry":return
default:e[i]=t[i]}})),e.properties=n(t.properties),e.geometry=r(t.geometry),e}function n(t){var e={}
return t?(Object.keys(t).forEach((function(i){var r=t[i]
"object"==typeof r?null===r?e[i]=null:Array.isArray(r)?e[i]=r.map((function(t){return t})):e[i]=n(r):e[i]=r})),e):e}function r(t){var e={type:t.type}
return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map((function(t){return r(t)})),e):(e.coordinates=o(t.coordinates),e)}function o(t){var e=t
return"object"!=typeof e[0]?e.slice():e.map((function(t){return o(t)}))}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if(!t)throw new Error("geojson is required")
switch(t.type){case"Feature":return i(t)
case"FeatureCollection":return function(t){var e={type:"FeatureCollection"}
return Object.keys(t).forEach((function(i){switch(i){case"type":case"features":return
default:e[i]=t[i]}})),e.features=t.features.map((function(t){return i(t)})),e}(t)
case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return r(t)
default:throw new Error("unknown GeoJSON type")}}},831:function(t,e,i){"use strict"
var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=n(i(7051)),o=n(i(3703)),s=i(9611),a=i(6303),l=n(i(7705))
e.default=function(t,e,i){void 0===i&&(i={}),!0!==i.mutate&&(t=r.default(t)),i.minPoints=i.minPoints||3
var n=new l.default.DBSCAN,h=n.run(s.coordAll(t),a.convertLength(e,i.units),i.minPoints,o.default),u=-1
return h.forEach((function(e){u++,e.forEach((function(e){var i=t.features[e]
i.properties||(i.properties={}),i.properties.cluster=u,i.properties.dbscan="core"}))})),n.noise.forEach((function(e){var i=t.features[e]
i.properties||(i.properties={}),i.properties.cluster?i.properties.dbscan="edge":i.properties.dbscan="noise"})),t}},835:function(t,e,i){"use strict"
var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=n(i(7051)),o=i(9611),s=n(i(2070))
e.default=function(t,e){void 0===e&&(e={})
var i=t.features.length
e.numberOfClusters=e.numberOfClusters||Math.round(Math.sqrt(i/2)),e.numberOfClusters>i&&(e.numberOfClusters=i),!0!==e.mutate&&(t=r.default(t))
var n=o.coordAll(t),a=n.slice(0,e.numberOfClusters),l=s.default(n,e.numberOfClusters,a),h={}
return l.centroids.forEach((function(t,e){h[e]=t})),o.featureEach(t,(function(t,e){var i=l.idxs[e]
t.properties.cluster=i,t.properties.centroid=h[i]})),t}},4523:(t,e,i)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var n=i(9611),r=i(6303)
function o(t,e,i){if(!t)throw new Error("geojson is required")
if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection")
if(null==e)throw new Error("property is required")
for(var n=s(t,e),o=Object.keys(n),a=0;a<o.length;a++){for(var l=o[a],h=n[l],u=[],c=0;c<h.length;c++)u.push(t.features[h[c]])
i(r.featureCollection(u),l,a)}}function s(t,e){var i={}
return n.featureEach(t,(function(t,n){var r=t.properties||{}
if(Object.prototype.hasOwnProperty.call(r,String(e))){var o=r[e]
Object.prototype.hasOwnProperty.call(i,o)?i[o].push(n):i[o]=[n]}})),i}function a(t,e){if(void 0===t)return!1
var i=typeof e
if("number"===i||"string"===i)return Object.prototype.hasOwnProperty.call(t,e)
if(Array.isArray(e)){for(var n=0;n<e.length;n++)if(!a(t,e[n]))return!1
return!0}return l(t,e)}function l(t,e){for(var i=Object.keys(e),n=0;n<i.length;n++){var r=i[n]
if(t[r]!==e[r])return!1}return!0}e.getCluster=function(t,e){if(!t)throw new Error("geojson is required")
if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection")
if(null==e)throw new Error("filter is required")
var i=[]
return n.featureEach(t,(function(t){a(t.properties,e)&&i.push(t)})),r.featureCollection(i)},e.clusterEach=o,e.clusterReduce=function(t,e,i,n){var r=n
return o(t,e,(function(t,e,o){r=0===o&&void 0===n?t:i(r,t,e,o)})),r},e.createBins=s,e.applyFilter=a,e.propertiesContainsFilter=l,e.filterProperties=function(t,e){if(!e)return{}
if(!e.length)return{}
for(var i={},n=0;n<e.length;n++){var r=e[n]
Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i}},3657:function(t,e,i){"use strict"
var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=n(i(463)),o=n(i(2015)),s=n(i(803))
e.default=function(t,e,i,n){var a=s.default(6),l=e.features.map((function(t){var e
return{minX:t.geometry.coordinates[0],minY:t.geometry.coordinates[1],maxX:t.geometry.coordinates[0],maxY:t.geometry.coordinates[1],property:null===(e=t.properties)||void 0===e?void 0:e[i]}}))
return a.load(l),t.features.forEach((function(t){t.properties||(t.properties={})
var e=r.default(t),i=a.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}),s=[]
i.forEach((function(e){o.default([e.minX,e.minY],t)&&s.push(e.property)})),t.properties[n]=s})),t}},2887:(t,e,i)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var n=i(6303),r=i(9611)
e.default=function(t){var e={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}}
return r.featureEach(t,(function(t){var i,n,r,o
switch(null===(o=t.geometry)||void 0===o?void 0:o.type){case"Point":e.MultiPoint.coordinates.push(t.geometry.coordinates),e.MultiPoint.properties.push(t.properties)
break
case"MultiPoint":(i=e.MultiPoint.coordinates).push.apply(i,t.geometry.coordinates),e.MultiPoint.properties.push(t.properties)
break
case"LineString":e.MultiLineString.coordinates.push(t.geometry.coordinates),e.MultiLineString.properties.push(t.properties)
break
case"MultiLineString":(n=e.MultiLineString.coordinates).push.apply(n,t.geometry.coordinates),e.MultiLineString.properties.push(t.properties)
break
case"Polygon":e.MultiPolygon.coordinates.push(t.geometry.coordinates),e.MultiPolygon.properties.push(t.properties)
break
case"MultiPolygon":(r=e.MultiPolygon.coordinates).push.apply(r,t.geometry.coordinates),e.MultiPolygon.properties.push(t.properties)}})),n.featureCollection(Object.keys(e).filter((function(t){return e[t].coordinates.length})).sort().map((function(t){var i={type:t,coordinates:e[t].coordinates},r={collectedProperties:e[t].properties}
return n.feature(i,r)})))}},8771:function(t,e,i){"use strict"
var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=n(i(3703)),o=i(6303),s=i(9611),a=n(i(1291)),l=n(i(4622))
e.default=function(t,e){void 0===e&&(e={})
var i=e.maxEdge||1/0,n=function(t){var e=[],i={}
return s.featureEach(t,(function(t){if(t.geometry){var n=t.geometry.coordinates.join("-")
Object.prototype.hasOwnProperty.call(i,n)||(e.push(t),i[n]=!0)}})),o.featureCollection(e)}(t),h=a.default(n)
if(h.features=h.features.filter((function(t){var n=t.geometry.coordinates[0][0],o=t.geometry.coordinates[0][1],s=t.geometry.coordinates[0][2],a=r.default(n,o,e),l=r.default(o,s,e),h=r.default(n,s,e)
return a<=i&&l<=i&&h<=i})),h.features.length<1)return null
var u=l.default(h)
return 1===u.coordinates.length&&(u.coordinates=u.coordinates[0],u.type="Polygon"),o.feature(u)}},4622:function(t,e,i){"use strict"
var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=n(i(7051)),o=i(6303),s=i(2317),a=i(9611),l=n(i(7247)),h=n(i(1763))
e.default=function(t,e){if(void 0===e&&(e={}),e=e||{},!o.isObject(e))throw new Error("options is invalid")
var i=e.mutate
if("FeatureCollection"!==s.getType(t))throw new Error("geojson must be a FeatureCollection")
if(!t.features.length)throw new Error("geojson is empty")
!1!==i&&void 0!==i||(t=r.default(t))
var n=function(t){var e={}
a.flattenEach(t,(function(t){e[t.geometry.type]=!0}))
var i=Object.keys(e)
return 1===i.length?i[0]:null}(t)
if(!n)throw new Error("geojson must be homogenous")
var u=t
switch(n){case"LineString":return l.default(u,e)
case"Polygon":return h.default(u,e)
default:throw new Error(n+" is not supported")}}},7247:function(t,e,i){"use strict"
var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=n(i(7051)),o=i(6303),s=i(2317),a=i(9611)
function l(t){return t[0].toString()+","+t[1].toString()}e.default=function(t,e){if(void 0===e&&(e={}),e=e||{},!o.isObject(e))throw new Error("options is invalid")
var i=e.mutate
if("FeatureCollection"!==s.getType(t))throw new Error("geojson must be a FeatureCollection")
if(!t.features.length)throw new Error("geojson is empty")
!1!==i&&void 0!==i||(t=r.default(t))
var n=[],h=a.lineReduce(t,(function(t,e){return function(t,e){var i,n=t.geometry.coordinates,r=e.geometry.coordinates,s=l(n[0]),a=l(n[n.length-1]),h=l(r[0]),u=l(r[r.length-1])
if(s===u)i=r.concat(n.slice(1))
else if(h===a)i=n.concat(r.slice(1))
else if(s===h)i=n.slice(1).reverse().concat(r)
else{if(a!==u)return null
i=n.concat(r.reverse().slice(1))}return o.lineString(i)}(t,e)||(n.push(t),e)}))
return h&&n.push(h),n.length?1===n.length?n[0]:o.multiLineString(n.map((function(t){return t.coordinates}))):null}},1763:function(t,e,i){"use strict"
var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=n(i(7051)),o=i(6303),s=i(2317),a=i(9611),l=i(1940),h=i(6698)
e.default=function(t,e){if(void 0===e&&(e={}),"FeatureCollection"!==s.getType(t))throw new Error("geojson must be a FeatureCollection")
if(!t.features.length)throw new Error("geojson is empty")
!1!==e.mutate&&void 0!==e.mutate||(t=r.default(t))
var i=[]
a.flattenEach(t,(function(t){i.push(t.geometry)}))
var n=h.topology({geoms:o.geometryCollection(i).geometry})
return l.merge(n,n.objects.geoms.geometries)}},627:function(t,e,i){"use strict"
var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=i(6303),o=i(9611),s=n(i(7505))
e.default=function(t,e){void 0===e&&(e={}),e.concavity=e.concavity||1/0
var i=[]
if(o.coordEach(t,(function(t){i.push([t[0],t[1]])})),!i.length)return null
var n=s.default(i,e.concavity)
return n.length>3?r.polygon([n]):null}},2165:(t,e,i)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var n=i(6303),r=i(2317)
e.default=function(t,e,i,o){void 0===o&&(o={})
var s=r.getCoord(t),a=n.degreesToRadians(s[0]),l=n.degreesToRadians(s[1]),h=n.degreesToRadians(i),u=n.lengthToRadians(e,o.units),c=Math.asin(Math.sin(l)*Math.cos(u)+Math.cos(l)*Math.sin(u)*Math.cos(h)),d=a+Math.atan2(Math.sin(h)*Math.sin(u)*Math.cos(l),Math.cos(u)-Math.sin(l)*Math.sin(c)),f=n.radiansToDegrees(d),p=n.radiansToDegrees(c)
return n.point([f,p],o.properties)}},9159:(t,e,i)=>{"use strict"
var n=i(6638),r=i(6303),o=i(2317)
var s=function(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}(n)
function a(t,e){var i=o.getGeom(t),n=o.getGeom(e),a=t.properties||{},l=s.default.difference(i.coordinates,n.coordinates)
return 0===l.length?null:1===l.length?r.polygon(l[0],a):r.multiPolygon(l,a)}t.exports=a,t.exports.default=a},1995:(t,e,i)=>{"use strict"
var n=i(6303),r=i(2317),o=i(9611),s=i(7365),a=i(6638)
function l(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var h=l(s),u=l(a)
function c(t,e){if(e=e||{},!n.isObject(e))throw new Error("options is invalid")
var i=e.propertyName
r.collectionOf(t,"Polygon","dissolve")
var s=[]
if(!e.propertyName)return h.default(n.multiPolygon(u.default.union.apply(null,t.features.map((function(t){return t.geometry.coordinates})))))
var a={}
o.featureEach(t,(function(t){Object.prototype.hasOwnProperty.call(a,t.properties[i])||(a[t.properties[i]]=[]),a[t.properties[i]].push(t)}))
for(var l=Object.keys(a),c=0;c<l.length;c++){var d=n.multiPolygon(u.default.union.apply(null,a[l[c]].map((function(t){return t.geometry.coordinates}))))
d.properties[i]=l[c],s.push(d)}return h.default(n.featureCollection(s))}t.exports=c,t.exports.default=c},2753:function(t,e,i){"use strict"
var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=n(i(5335)),o=i(2317),s=i(9611)
function a(t,e,i){void 0===i&&(i=2)
var n=o.getCoord(t),r=o.getCoord(e),s=n[0]-r[0],a=n[1]-r[1]
return 1===i?Math.abs(s)+Math.abs(a):Math.pow(Math.pow(s,i)+Math.pow(a,i),1/i)}e.pNormDistance=a,e.default=function(t,e){var i=(e=e||{}).threshold||1e4,n=e.p||2,o=e.binary||!1,l=e.alpha||-1,h=e.standardization||!1,u=[]
s.featureEach(t,(function(t){u.push(r.default(t))}))
for(var c=[],d=0;d<u.length;d++)c[d]=[]
for(d=0;d<u.length;d++)for(var f=d;f<u.length;f++){d===f&&(c[d][f]=0)
var p=a(u[d],u[f],n)
c[d][f]=p,c[f][d]=p}for(d=0;d<u.length;d++)for(f=0;f<u.length;f++)0!==(p=c[d][f])&&(c[d][f]=o?p<=i?1:0:p<=i?Math.pow(p,l):0)
if(h)for(d=0;d<u.length;d++){var g=c[d].reduce((function(t,e){return t+e}),0)
for(f=0;f<u.length;f++)c[d][f]=c[d][f]/g}return c}},3703:(t,e,i)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var n=i(2317),r=i(6303)
e.default=function(t,e,i){void 0===i&&(i={})
var o=n.getCoord(t),s=n.getCoord(e),a=r.degreesToRadians(s[1]-o[1]),l=r.degreesToRadians(s[0]-o[0]),h=r.degreesToRadians(o[1]),u=r.degreesToRadians(s[1]),c=Math.pow(Math.sin(a/2),2)+Math.pow(Math.sin(l/2),2)*Math.cos(h)*Math.cos(u)
return r.radiansToLength(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),i.units)}},4485:(t,e,i)=>{"use strict"
var n=i(6303),r=i(7099),o=i(9023),s=i(2317)
function a(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var l=a(r),h=a(o)
function u(t,e,i,r){var o=(r=r||{}).steps||64,a=r.units||"kilometers",u=r.angle||0,d=r.pivot||t,f=r.properties||t.properties||{}
if(!t)throw new Error("center is required")
if(!e)throw new Error("xSemiAxis is required")
if(!i)throw new Error("ySemiAxis is required")
if(!n.isObject(r))throw new Error("options must be an object")
if(!n.isNumber(o))throw new Error("steps must be a number")
if(!n.isNumber(u))throw new Error("angle must be a number")
var p=s.getCoord(t)
if("degrees"===a)var g=n.degreesToRadians(u)
else e=l.default(t,e,90,{units:a}),i=l.default(t,i,0,{units:a}),e=s.getCoord(e)[0]-p[0],i=s.getCoord(i)[1]-p[1]
for(var _=[],m=0;m<o;m+=1){var y=-360*m/o,v=e*i/Math.sqrt(Math.pow(i,2)+Math.pow(e,2)*Math.pow(c(y),2)),x=e*i/Math.sqrt(Math.pow(e,2)+Math.pow(i,2)/Math.pow(c(y),2))
if(y<-90&&y>=-270&&(v=-v),y<-180&&y>=-360&&(x=-x),"degrees"===a){var b=v*Math.cos(g)+x*Math.sin(g),w=x*Math.cos(g)-v*Math.sin(g)
v=b,x=w}_.push([v+p[0],x+p[1]])}return _.push(_[0]),"degrees"===a?n.polygon([_],f):h.default(n.polygon([_],f),u,{pivot:d})}function c(t){var e=t*Math.PI/180
return Math.tan(e)}t.exports=u,t.exports.default=u},1167:(t,e,i)=>{"use strict"
var n=i(463),r=i(3779)
function o(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var s=o(n),a=o(r)
function l(t){return a.default(s.default(t))}t.exports=l,t.exports.default=l},2107:(t,e,i)=>{"use strict"
var n=i(9611),r=i(6303)
function o(t){var e=[]
return"FeatureCollection"===t.type?n.featureEach(t,(function(t){n.coordEach(t,(function(i){e.push(r.point(i,t.properties))}))})):n.coordEach(t,(function(i){e.push(r.point(i,t.properties))})),r.featureCollection(e)}t.exports=o,t.exports.default=o},7365:(t,e,i)=>{"use strict"
var n=i(9611),r=i(6303)
function o(t){if(!t)throw new Error("geojson is required")
var e=[]
return n.flattenEach(t,(function(t){e.push(t)})),r.featureCollection(e)}t.exports=o,t.exports.default=o},1111:(t,e,i)=>{"use strict"
var n=i(9611),r=i(6303)
var o=function(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}(i(7051))
function s(t,e){if(e=e||{},!r.isObject(e))throw new Error("options is invalid")
var i=e.mutate
if(!t)throw new Error("geojson is required")
return!1!==i&&void 0!==i||(t=o.default(t)),n.coordEach(t,(function(t){var e=t[0],i=t[1]
t[0]=i,t[1]=e})),t}t.exports=s,t.exports.default=s},7391:(t,e,i)=>{"use strict"
var n=i(2317),r=Math.PI/180,o=180/Math.PI,s=function(t,e){this.lon=t,this.lat=e,this.x=r*t,this.y=r*e}
s.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},s.prototype.antipode=function(){var t=-1*this.lat,e=this.lon<0?180+this.lon:-1*(180-this.lon)
return new s(e,t)}
var a=function(){this.coords=[],this.length=0}
a.prototype.move_to=function(t){this.length++,this.coords.push(t)}
var l=function(t){this.properties=t||{},this.geometries=[]}
l.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties}
if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties}
for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords)
return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},l.prototype.wkt=function(){for(var t="",e="LINESTRING(",i=function(t){e+=t[0]+" "+t[1]+","},n=0;n<this.geometries.length;n++){if(0===this.geometries[n].coords.length)return"LINESTRING(empty)"
this.geometries[n].coords.forEach(i),t+=e.substring(0,e.length-1)+")"}return t}
var h=function(t,e,i){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties")
if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties")
this.start=new s(t.x,t.y),this.end=new s(e.x,e.y),this.properties=i||{}
var n=this.start.x-this.end.x,r=this.start.y-this.end.y,o=Math.pow(Math.sin(r/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(n/2),2)
if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite")
if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)}
function u(t,e,i){if("object"!=typeof(i=i||{}))throw new Error("options is invalid")
var r=i.properties,o=i.npoints,s=i.offset
return t=n.getCoord(t),e=n.getCoord(e),r=r||{},o=o||100,s=s||10,new h({x:t[0],y:t[1]},{x:e[0],y:e[1]},r).Arc(o,{offset:s}).json()}h.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),i=Math.sin(t*this.g)/Math.sin(this.g),n=e*Math.cos(this.start.y)*Math.cos(this.start.x)+i*Math.cos(this.end.y)*Math.cos(this.end.x),r=e*Math.cos(this.start.y)*Math.sin(this.start.x)+i*Math.cos(this.end.y)*Math.sin(this.end.x),s=e*Math.sin(this.start.y)+i*Math.sin(this.end.y),a=o*Math.atan2(s,Math.sqrt(Math.pow(n,2)+Math.pow(r,2)))
return[o*Math.atan2(r,n),a]},h.prototype.Arc=function(t,e){var i=[]
if(!t||t<=2)i.push([this.start.lon,this.start.lat]),i.push([this.end.lon,this.end.lat])
else for(var n=1/(t-1),r=0;r<t;++r){var o=n*r,s=this.interpolate(o)
i.push(s)}for(var h=!1,u=0,c=e&&e.offset?e.offset:10,d=180-c,f=-180+c,p=360-c,g=1;g<i.length;++g){var _=i[g-1][0],m=i[g][0],y=Math.abs(m-_)
y>p&&(m>d&&_<f||_>d&&m<f)?h=!0:y>u&&(u=y)}var v=[]
if(h&&u<c){var x=[]
v.push(x)
for(var b=0;b<i.length;++b){var w=parseFloat(i[b][0])
if(b>0&&Math.abs(w-i[b-1][0])>p){var E=parseFloat(i[b-1][0]),S=parseFloat(i[b-1][1]),C=parseFloat(i[b][0]),P=parseFloat(i[b][1])
if(E>-180&&E<f&&180===C&&b+1<i.length&&i[b-1][0]>-180&&i[b-1][0]<f){x.push([-180,i[b][1]]),b++,x.push([i[b][0],i[b][1]])
continue}if(E>d&&E<180&&-180===C&&b+1<i.length&&i[b-1][0]>d&&i[b-1][0]<180){x.push([180,i[b][1]]),b++,x.push([i[b][0],i[b][1]])
continue}if(E<f&&C>d){var T=E
E=C,C=T
var I=S
S=P,P=I}if(E>d&&C<f&&(C+=360),E<=180&&C>=180&&E<C){var M=(180-E)/(C-E),A=M*P+(1-M)*S
x.push([i[b-1][0]>d?180:-180,A]),(x=[]).push([i[b-1][0]>d?-180:180,A]),v.push(x)}else x=[],v.push(x)
x.push([w,i[b][1]])}else x.push([i[b][0],i[b][1]])}}else{var R=[]
v.push(R)
for(var L=0;L<i.length;++L)R.push([i[L][0],i[L][1]])}for(var O=new l(this.properties),D=0;D<v.length;++D){var N=new a
O.geometries.push(N)
for(var F=v[D],k=0;k<F.length;++k)N.move_to(F[k])}return O},t.exports=u,t.exports.default=u},6303:(t,e)=>{"use strict"
function i(t,e,i){void 0===i&&(i={})
var n={type:"Feature"}
return(0===i.id||i.id)&&(n.id=i.id),i.bbox&&(n.bbox=i.bbox),n.properties=e||{},n.geometry=t,n}function n(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required")
if(!Array.isArray(t))throw new Error("coordinates must be an Array")
if(t.length<2)throw new Error("coordinates must be at least 2 numbers long")
if(!f(t[0])||!f(t[1]))throw new Error("coordinates must contain numbers")
return i({type:"Point",coordinates:t},e,n)}function r(t,e,n){void 0===n&&(n={})
for(var r=0,o=t;r<o.length;r++){var s=o[r]
if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.")
for(var a=0;a<s[s.length-1].length;a++)if(s[s.length-1][a]!==s[0][a])throw new Error("First and last Position are not equivalent.")}return i({type:"Polygon",coordinates:t},e,n)}function o(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions")
return i({type:"LineString",coordinates:t},e,n)}function s(t,e){void 0===e&&(e={})
var i={type:"FeatureCollection"}
return e.id&&(i.id=e.id),e.bbox&&(i.bbox=e.bbox),i.features=t,i}function a(t,e,n){return void 0===n&&(n={}),i({type:"MultiLineString",coordinates:t},e,n)}function l(t,e,n){return void 0===n&&(n={}),i({type:"MultiPoint",coordinates:t},e,n)}function h(t,e,n){return void 0===n&&(n={}),i({type:"MultiPolygon",coordinates:t},e,n)}function u(t,i){void 0===i&&(i="kilometers")
var n=e.factors[i]
if(!n)throw new Error(i+" units is invalid")
return t*n}function c(t,i){void 0===i&&(i="kilometers")
var n=e.factors[i]
if(!n)throw new Error(i+" units is invalid")
return t/n}function d(t){return t%(2*Math.PI)*180/Math.PI}function f(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:1.0936*e.earthRadius},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1.0936133},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=i,e.geometry=function(t,e,i){switch(void 0===i&&(i={}),t){case"Point":return n(e).geometry
case"LineString":return o(e).geometry
case"Polygon":return r(e).geometry
case"MultiPoint":return l(e).geometry
case"MultiLineString":return a(e).geometry
case"MultiPolygon":return h(e).geometry
default:throw new Error(t+" is invalid")}},e.point=n,e.points=function(t,e,i){return void 0===i&&(i={}),s(t.map((function(t){return n(t,e)})),i)},e.polygon=r,e.polygons=function(t,e,i){return void 0===i&&(i={}),s(t.map((function(t){return r(t,e)})),i)},e.lineString=o,e.lineStrings=function(t,e,i){return void 0===i&&(i={}),s(t.map((function(t){return o(t,e)})),i)},e.featureCollection=s,e.multiLineString=a,e.multiPoint=l,e.multiPolygon=h,e.geometryCollection=function(t,e,n){return void 0===n&&(n={}),i({type:"GeometryCollection",geometries:t},e,n)},e.round=function(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number")
var i=Math.pow(10,e||0)
return Math.round(t*i)/i},e.radiansToLength=u,e.lengthToRadians=c,e.lengthToDegrees=function(t,e){return d(c(t,e))},e.bearingToAzimuth=function(t){var e=t%360
return e<0&&(e+=360),e},e.radiansToDegrees=d,e.degreesToRadians=function(t){return t%360*Math.PI/180},e.convertLength=function(t,e,i){if(void 0===e&&(e="kilometers"),void 0===i&&(i="kilometers"),!(t>=0))throw new Error("length must be a positive number")
return u(c(t,e),i)},e.convertArea=function(t,i,n){if(void 0===i&&(i="meters"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("area must be a positive number")
var r=e.areaFactors[i]
if(!r)throw new Error("invalid original units")
var o=e.areaFactors[n]
if(!o)throw new Error("invalid final units")
return t/r*o},e.isNumber=f,e.isObject=function(t){return!!t&&t.constructor===Object},e.validateBBox=function(t){if(!t)throw new Error("bbox is required")
if(!Array.isArray(t))throw new Error("bbox must be an Array")
if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers")
t.forEach((function(t){if(!f(t))throw new Error("bbox must only contain numbers")}))},e.validateId=function(t){if(!t)throw new Error("id is required")
if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}},2255:function(t,e,i){"use strict"
var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=n(i(3703)),o=n(i(5279)),s=i(6303)
function a(t,e,i,n,r,o){for(var a=[],l=0;l<6;l++){var h=t[0]+e*r[l],u=t[1]+i*o[l]
a.push([h,u])}return a.push(a[0].slice()),s.polygon([a],n)}function l(t,e,i,n,r,o){for(var a=[],l=0;l<6;l++){var h=[]
h.push(t),h.push([t[0]+e*r[l],t[1]+i*o[l]]),h.push([t[0]+e*r[(l+1)%6],t[1]+i*o[(l+1)%6]]),h.push(t),a.push(s.polygon([h],n))}return a}e.default=function(t,e,i){void 0===i&&(i={})
var n=JSON.stringify(i.properties||{}),h=t[0],u=t[1],c=t[2],d=t[3],f=(u+d)/2,p=(h+c)/2,g=2*e/r.default([h,f],[c,f],i)*(c-h),_=2*e/r.default([p,u],[p,d],i)*(d-u),m=g/2,y=2*m,v=Math.sqrt(3)/2*_,x=c-h,b=d-u,w=3/4*y,E=v,S=(x-y)/(y-m/2),C=Math.floor(S),P=(C*w-m/2-x)/2-m/2+w/2,T=Math.floor((b-v)/v),I=(b-T*v)/2,M=T*v-b>v/2
M&&(I-=v/4)
for(var A=[],R=[],L=0;L<6;L++){var O=2*Math.PI/6*L
A.push(Math.cos(O)),R.push(Math.sin(O))}for(var D=[],N=0;N<=C;N++)for(var F=0;F<=T;F++){var k=N%2==1
if(!(0===F&&k||0===F&&M)){var z=N*w+h-P,j=F*E+u+I
if(k&&(j-=v/2),!0===i.triangles)l([z,j],g/2,_/2,JSON.parse(n),A,R).forEach((function(t){i.mask?o.default(i.mask,t)&&D.push(t):D.push(t)}))
else{var G=a([z,j],g/2,_/2,JSON.parse(n),A,R)
i.mask?o.default(i.mask,G)&&D.push(G):D.push(G)}}}return s.featureCollection(D)}},3291:(t,e,i)=>{"use strict"
var n=i(463),r=i(2255),o=i(6411),s=i(3703),a=i(5335),l=i(993),h=i(4907),u=i(7051),c=i(6303),d=i(9611),f=i(2317)
function p(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var g=p(n),_=p(r),m=p(o),y=p(s),v=p(a),x=p(l),b=p(h),w=p(u)
function E(t,e,i){if("object"!=typeof(i=i||{}))throw new Error("options is invalid")
var n=i.gridType,r=i.property,o=i.weight
if(!t)throw new Error("points is required")
if(f.collectionOf(t,"Point","input must contain Points"),!e)throw new Error("cellSize is required")
if(void 0!==o&&"number"!=typeof o)throw new Error("weight must be a number")
r=r||"elevation",n=n||"square",o=o||1
var s,a=g.default(t)
switch(n){case"point":case"points":s=m.default(a,e,i)
break
case"square":case"squares":s=x.default(a,e,i)
break
case"hex":case"hexes":s=_.default(a,e,i)
break
case"triangle":case"triangles":s=b.default(a,e,i)
break
default:throw new Error("invalid gridType")}var l=[]
return d.featureEach(s,(function(e){var s=0,a=0
d.featureEach(t,(function(t){var l,h="point"===n?e:v.default(e),u=y.default(h,t,i)
if(void 0!==r&&(l=t.properties[r]),void 0===l&&(l=t.geometry.coordinates[2]),void 0===l)throw new Error("zValue is missing")
0===u&&(s=l)
var c=1/Math.pow(u,o)
a+=c,s+=c*l}))
var h=w.default(e)
h.properties[r]=s/a,l.push(h)})),c.featureCollection(l)}t.exports=E,t.exports.default=E},5279:function(t,e,i){"use strict"
var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=i(6303),o=i(2317),s=n(i(6638))
e.default=function(t,e,i){void 0===i&&(i={})
var n=o.getGeom(t),a=o.getGeom(e),l=s.default.intersection(n.coordinates,a.coordinates)
return 0===l.length?null:1===l.length?r.polygon(l[0],i.properties):r.multiPolygon(l,i.properties)}},2317:(t,e,i)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var n=i(6303)
e.getCoord=function(t){if(!t)throw new Error("coord is required")
if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates
if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t
throw new Error("coord must be GeoJSON Point or an Array of numbers")},e.getCoords=function(t){if(Array.isArray(t))return t
if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates
throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")},e.containsNumber=function t(e){if(e.length>1&&n.isNumber(e[0])&&n.isNumber(e[1]))return!0
if(Array.isArray(e[0])&&e[0].length)return t(e[0])
throw new Error("coordinates must only contain numbers")},e.geojsonType=function(t,e,i){if(!e||!i)throw new Error("type and name required")
if(!t||t.type!==e)throw new Error("Invalid input to "+i+": must be a "+e+", given "+t.type)},e.featureOf=function(t,e,i){if(!t)throw new Error("No feature passed")
if(!i)throw new Error(".featureOf() requires a name")
if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+i+", Feature with geometry required")
if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+i+": must be a "+e+", given "+t.geometry.type)},e.collectionOf=function(t,e,i){if(!t)throw new Error("No featureCollection passed")
if(!i)throw new Error(".collectionOf() requires a name")
if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+i+", FeatureCollection required")
for(var n=0,r=t.features;n<r.length;n++){var o=r[n]
if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+i+", Feature with geometry required")
if(!o.geometry||o.geometry.type!==e)throw new Error("Invalid input to "+i+": must be a "+e+", given "+o.geometry.type)}},e.getGeom=function(t){return"Feature"===t.type?t.geometry:t},e.getType=function(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}},3751:(t,e,i)=>{"use strict"
var n=i(463),r=i(587),o=i(2015),s=i(2107),a=i(2317),l=i(6303),h=i(8017),u=i(9611)
function c(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var d=c(n),f=c(r),p=c(o),g=c(s),_=c(h),m={successCallback:null,verbose:!1,polygons:!1},y={}
function v(t,e,i,n){n=n||{}
for(var r=Object.keys(m),o=0;o<r.length;o++){var s=r[o],a=n[s]
a=null!=a?a:m[s],y[s]=a}y.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+e+":"+(e+i)+"]")
var l,h=function(t,e,i){for(var n=t.length-1,r=t[0].length-1,o={rows:n,cols:r,cells:[]},s=e+Math.abs(i),a=0;a<n;++a){o.cells[a]=[]
for(var l=0;l<r;++l){var h=0,u=t[a+1][l],c=t[a+1][l+1],d=t[a][l+1],f=t[a][l]
if(!(isNaN(u)||isNaN(c)||isNaN(d)||isNaN(f))){h|=u<e?0:u>s?128:64,h|=c<e?0:c>s?32:16,h|=d<e?0:d>s?8:4
var p=+(h|=f<e?0:f>s?2:1),g=0
if(17===h||18===h||33===h||34===h||38===h||68===h||72===h||98===h||102===h||132===h||136===h||137===h||152===h||153===h){var _=(u+c+d+f)/4
g=_>s?2:_<e?0:1,34===h?1===g?h=35:0===g&&(h=136):136===h?1===g?(h=35,g=4):0===g&&(h=34):17===h?1===g?(h=155,g=4):0===g&&(h=153):68===h?1===g?(h=103,g=4):0===g&&(h=102):153===h?1===g&&(h=155):102===h?1===g&&(h=103):152===h?g<2&&(h=156,g=1):137===h?g<2&&(h=139,g=1):98===h?g<2&&(h=99,g=1):38===h?g<2&&(h=39,g=1):18===h?g>0?(h=156,g=4):h=152:33===h?g>0?(h=139,g=4):h=137:72===h?g>0?(h=99,g=4):h=98:132===h&&(g>0?(h=39,g=4):h=38)}if(0!=h&&170!=h){var m,y,v,x,b,w,E,S
m=y=v=x=b=w=E=S=.5
var C=[]
1===h?(v=1-ct(e,d,f),S=1-ct(e,u,f),C.push(ot[h])):169===h?(v=ct(s,f,d),S=ct(s,f,u),C.push(ot[h])):4===h?(w=1-ct(e,c,d),x=ct(e,f,d),C.push(nt[h])):166===h?(w=ct(s,d,c),x=1-ct(s,d,f),C.push(nt[h])):16===h?(b=ct(e,d,c),y=ct(e,u,c),C.push(it[h])):154===h?(b=1-ct(s,c,d),y=1-ct(s,c,u),C.push(it[h])):64===h?(E=ct(e,f,u),m=1-ct(e,c,u),C.push(at[h])):106===h?(E=1-ct(s,u,f),m=ct(s,u,c),C.push(at[h])):168===h?(x=ct(s,f,d),v=ct(e,f,d),S=ct(e,f,u),E=ct(s,f,u),C.push(rt[h]),C.push(ot[h])):2===h?(x=1-ct(e,d,f),v=1-ct(s,d,f),S=1-ct(s,u,f),E=1-ct(e,u,f),C.push(rt[h]),C.push(ot[h])):162===h?(b=ct(s,d,c),w=ct(e,d,c),x=1-ct(e,d,f),v=1-ct(s,d,f),C.push(rt[h]),C.push(ot[h])):8===h?(b=1-ct(e,c,d),w=1-ct(s,c,d),x=ct(s,f,d),v=ct(e,f,d),C.push(it[h]),C.push(nt[h])):138===h?(b=1-ct(e,c,d),w=1-ct(s,c,d),m=1-ct(s,c,u),y=1-ct(e,c,u),C.push(it[h]),C.push(nt[h])):32===h?(b=ct(s,d,c),w=ct(e,d,c),m=ct(e,u,c),y=ct(s,u,c),C.push(it[h]),C.push(nt[h])):42===h?(S=1-ct(s,u,f),E=1-ct(e,u,f),m=ct(e,u,c),y=ct(s,u,c),C.push(st[h]),C.push(at[h])):128===h&&(S=ct(e,f,u),E=ct(s,f,u),m=1-ct(s,c,u),y=1-ct(e,c,u),C.push(st[h]),C.push(at[h])),5===h?(w=1-ct(e,c,d),S=1-ct(e,u,f),C.push(nt[h])):165===h?(w=ct(s,d,c),S=ct(s,f,u),C.push(nt[h])):20===h?(x=ct(e,f,d),y=ct(e,u,c),C.push(rt[h])):150===h?(x=1-ct(s,d,f),y=1-ct(s,c,u),C.push(rt[h])):80===h?(b=ct(e,d,c),E=ct(e,f,u),C.push(it[h])):90===h?(b=1-ct(s,c,d),E=1-ct(s,u,f),C.push(it[h])):65===h?(v=1-ct(e,d,f),m=1-ct(e,c,u),C.push(ot[h])):105===h?(v=ct(s,f,d),m=ct(s,u,c),C.push(ot[h])):160===h?(b=ct(s,d,c),w=ct(e,d,c),S=ct(e,f,u),E=ct(s,f,u),C.push(it[h]),C.push(nt[h])):10===h?(b=1-ct(e,c,d),w=1-ct(s,c,d),S=1-ct(s,u,f),E=1-ct(e,u,f),C.push(it[h]),C.push(nt[h])):130===h?(x=1-ct(e,d,f),v=1-ct(s,d,f),m=1-ct(s,c,u),y=1-ct(e,c,u),C.push(rt[h]),C.push(ot[h])):40===h?(x=ct(s,f,d),v=ct(e,f,d),m=ct(e,u,c),y=ct(s,u,c),C.push(rt[h]),C.push(ot[h])):101===h?(w=ct(s,d,c),m=ct(s,u,c),C.push(nt[h])):69===h?(w=1-ct(e,c,d),m=1-ct(e,c,u),C.push(nt[h])):149===h?(S=ct(s,f,u),y=1-ct(s,c,u),C.push(st[h])):21===h?(S=1-ct(e,u,f),y=ct(e,u,c),C.push(st[h])):86===h?(x=1-ct(s,d,f),E=1-ct(s,u,f),C.push(rt[h])):84===h?(x=ct(e,f,d),E=ct(e,f,u),C.push(rt[h])):89===h?(b=1-ct(s,c,d),v=ct(s,f,d),C.push(ot[h])):81===h?(b=ct(e,d,c),v=1-ct(e,d,f),C.push(ot[h])):96===h?(b=ct(s,d,c),w=ct(e,d,c),E=ct(e,f,u),m=ct(s,u,c),C.push(it[h]),C.push(nt[h])):74===h?(b=1-ct(e,c,d),w=1-ct(s,c,d),E=1-ct(s,u,f),m=1-ct(e,c,u),C.push(it[h]),C.push(nt[h])):24===h?(b=1-ct(s,c,d),x=ct(s,f,d),v=ct(e,f,d),y=ct(e,u,c),C.push(it[h]),C.push(ot[h])):146===h?(b=ct(e,d,c),x=1-ct(e,d,f),v=1-ct(s,d,f),y=1-ct(s,c,u),C.push(it[h]),C.push(ot[h])):6===h?(w=1-ct(e,c,d),x=1-ct(s,d,f),S=1-ct(s,u,f),E=1-ct(e,u,f),C.push(nt[h]),C.push(rt[h])):164===h?(w=ct(s,d,c),x=ct(e,f,d),S=ct(e,f,u),E=ct(s,f,u),C.push(nt[h]),C.push(rt[h])):129===h?(v=1-ct(e,d,f),S=ct(s,f,u),m=1-ct(s,c,u),y=1-ct(e,c,u),C.push(ot[h]),C.push(st[h])):41===h?(v=ct(s,f,d),S=1-ct(e,u,f),m=ct(e,u,c),y=ct(s,u,c),C.push(ot[h]),C.push(st[h])):66===h?(x=1-ct(e,d,f),v=1-ct(s,d,f),E=1-ct(s,u,f),m=1-ct(e,c,u),C.push(rt[h]),C.push(ot[h])):104===h?(x=ct(s,f,d),v=ct(e,f,d),E=ct(e,f,u),m=ct(s,u,c),C.push(ot[h]),C.push(lt[h])):144===h?(b=ct(e,d,c),S=ct(e,f,u),E=ct(s,f,u),y=1-ct(s,c,u),C.push(it[h]),C.push(at[h])):26===h?(b=1-ct(s,c,d),S=1-ct(s,u,f),E=1-ct(e,u,f),y=ct(e,u,c),C.push(it[h]),C.push(at[h])):36===h?(w=ct(s,d,c),x=ct(e,f,d),m=ct(e,u,c),y=ct(s,u,c),C.push(nt[h]),C.push(rt[h])):134===h?(w=1-ct(e,c,d),x=1-ct(s,d,f),m=1-ct(s,c,u),y=1-ct(e,c,u),C.push(nt[h]),C.push(rt[h])):9===h?(b=1-ct(e,c,d),w=1-ct(s,c,d),v=ct(s,f,d),S=1-ct(e,u,f),C.push(it[h]),C.push(nt[h])):161===h?(b=ct(s,d,c),w=ct(e,d,c),v=1-ct(e,d,f),S=ct(s,f,u),C.push(it[h]),C.push(nt[h])):37===h?(w=ct(s,d,c),S=1-ct(e,u,f),m=ct(e,u,c),y=ct(s,u,c),C.push(nt[h]),C.push(st[h])):133===h?(w=1-ct(e,c,d),S=ct(s,f,u),m=1-ct(s,c,u),y=1-ct(e,c,u),C.push(nt[h]),C.push(st[h])):148===h?(x=ct(e,f,d),S=ct(e,f,u),E=ct(s,f,u),y=1-ct(s,c,u),C.push(rt[h]),C.push(at[h])):22===h?(x=1-ct(s,d,f),S=1-ct(s,u,f),E=1-ct(e,u,f),y=ct(e,u,c),C.push(rt[h]),C.push(at[h])):82===h?(b=ct(e,d,c),x=1-ct(e,d,f),v=1-ct(s,d,f),E=1-ct(s,u,f),C.push(it[h]),C.push(ot[h])):88===h?(b=1-ct(s,c,d),x=ct(s,f,d),v=ct(e,f,d),E=ct(e,f,u),C.push(it[h]),C.push(ot[h])):73===h?(b=1-ct(e,c,d),w=1-ct(s,c,d),v=ct(s,f,d),m=1-ct(e,c,u),C.push(it[h]),C.push(nt[h])):97===h?(b=ct(s,d,c),w=ct(e,d,c),v=1-ct(e,d,f),m=ct(s,u,c),C.push(it[h]),C.push(nt[h])):145===h?(b=ct(e,d,c),v=1-ct(e,d,f),S=ct(s,f,u),y=1-ct(s,c,u),C.push(it[h]),C.push(st[h])):25===h?(b=1-ct(s,c,d),v=ct(s,f,d),S=1-ct(e,u,f),y=ct(e,u,c),C.push(it[h]),C.push(st[h])):70===h?(w=1-ct(e,c,d),x=1-ct(s,d,f),E=1-ct(s,u,f),m=1-ct(e,c,u),C.push(nt[h]),C.push(rt[h])):100===h?(w=ct(s,d,c),x=ct(e,f,d),E=ct(e,f,u),m=ct(s,u,c),C.push(nt[h]),C.push(rt[h])):34===h?(0===g?(b=1-ct(e,c,d),w=1-ct(s,c,d),x=ct(s,f,d),v=ct(e,f,d),S=ct(e,f,u),E=ct(s,f,u),m=1-ct(s,c,u),y=1-ct(e,c,u)):(b=ct(s,d,c),w=ct(e,d,c),x=1-ct(e,d,f),v=1-ct(s,d,f),S=1-ct(s,u,f),E=1-ct(e,u,f),m=ct(e,u,c),y=ct(s,u,c)),C.push(it[h]),C.push(nt[h]),C.push(st[h]),C.push(at[h])):35===h?(4===g?(b=1-ct(e,c,d),w=1-ct(s,c,d),x=ct(s,f,d),v=ct(e,f,d),S=ct(e,f,u),E=ct(s,f,u),m=1-ct(s,c,u),y=1-ct(e,c,u)):(b=ct(s,d,c),w=ct(e,d,c),x=1-ct(e,d,f),v=1-ct(s,d,f),S=1-ct(s,u,f),E=1-ct(e,u,f),m=ct(e,u,c),y=ct(s,u,c)),C.push(it[h]),C.push(nt[h]),C.push(ot[h]),C.push(at[h])):136===h?(0===g?(b=ct(s,d,c),w=ct(e,d,c),x=1-ct(e,d,f),v=1-ct(s,d,f),S=1-ct(s,u,f),E=1-ct(e,u,f),m=ct(e,u,c),y=ct(s,u,c)):(b=1-ct(e,c,d),w=1-ct(s,c,d),x=ct(s,f,d),v=ct(e,f,d),S=ct(e,f,u),E=ct(s,f,u),m=1-ct(s,c,u),y=1-ct(e,c,u)),C.push(it[h]),C.push(nt[h]),C.push(st[h]),C.push(at[h])):153===h?(0===g?(b=ct(e,d,c),v=1-ct(e,d,f),S=1-ct(e,u,f),y=ct(e,u,c)):(b=1-ct(s,c,d),v=ct(s,f,d),S=ct(s,f,u),y=1-ct(s,c,u)),C.push(it[h]),C.push(ot[h])):102===h?(0===g?(w=1-ct(e,c,d),x=ct(e,f,d),E=ct(e,f,u),m=1-ct(e,c,u)):(w=ct(s,d,c),x=1-ct(s,d,f),E=1-ct(s,u,f),m=ct(s,u,c)),C.push(nt[h]),C.push(at[h])):155===h?(4===g?(b=ct(e,d,c),v=1-ct(e,d,f),S=1-ct(e,u,f),y=ct(e,u,c)):(b=1-ct(s,c,d),v=ct(s,f,d),S=ct(s,f,u),y=1-ct(s,c,u)),C.push(it[h]),C.push(st[h])):103===h?(4===g?(w=1-ct(e,c,d),x=ct(e,f,d),E=ct(e,f,u),m=1-ct(e,c,u)):(w=ct(s,d,c),x=1-ct(s,d,f),E=1-ct(s,u,f),m=ct(s,u,c)),C.push(nt[h]),C.push(rt[h])):152===h?(0===g?(b=ct(e,d,c),x=1-ct(e,d,f),v=1-ct(s,d,f),S=1-ct(s,u,f),E=1-ct(e,u,f),y=ct(e,u,c)):(b=1-ct(s,c,d),x=ct(s,f,d),v=ct(e,f,d),S=ct(e,f,u),E=ct(s,f,u),y=1-ct(s,c,u)),C.push(it[h]),C.push(rt[h]),C.push(ot[h])):156===h?(4===g?(b=ct(e,d,c),x=1-ct(e,d,f),v=1-ct(s,d,f),S=1-ct(s,u,f),E=1-ct(e,u,f),y=ct(e,u,c)):(b=1-ct(s,c,d),x=ct(s,f,d),v=ct(e,f,d),S=ct(e,f,u),E=ct(s,f,u),y=1-ct(s,c,u)),C.push(it[h]),C.push(ot[h]),C.push(at[h])):137===h?(0===g?(b=ct(s,d,c),w=ct(e,d,c),v=1-ct(e,d,f),S=1-ct(e,u,f),m=ct(e,u,c),y=ct(s,u,c)):(b=1-ct(e,c,d),w=1-ct(s,c,d),v=ct(s,f,d),S=ct(s,f,u),m=1-ct(s,c,u),y=1-ct(e,c,u)),C.push(it[h]),C.push(nt[h]),C.push(ot[h])):139===h?(4===g?(b=ct(s,d,c),w=ct(e,d,c),v=1-ct(e,d,f),S=1-ct(e,u,f),m=ct(e,u,c),y=ct(s,u,c)):(b=1-ct(e,c,d),w=1-ct(s,c,d),v=ct(s,f,d),S=ct(s,f,u),m=1-ct(s,c,u),y=1-ct(e,c,u)),C.push(it[h]),C.push(nt[h]),C.push(st[h])):98===h?(0===g?(b=1-ct(e,c,d),w=1-ct(s,c,d),x=ct(s,f,d),v=ct(e,f,d),E=ct(e,f,u),m=1-ct(e,c,u)):(b=ct(s,d,c),w=ct(e,d,c),x=1-ct(e,d,f),v=1-ct(s,d,f),E=1-ct(s,u,f),m=ct(s,u,c)),C.push(it[h]),C.push(nt[h]),C.push(at[h])):99===h?(4===g?(b=1-ct(e,c,d),w=1-ct(s,c,d),x=ct(s,f,d),v=ct(e,f,d),E=ct(e,f,u),m=1-ct(e,c,u)):(b=ct(s,d,c),w=ct(e,d,c),x=1-ct(e,d,f),v=1-ct(s,d,f),E=1-ct(s,u,f),m=ct(s,u,c)),C.push(it[h]),C.push(nt[h]),C.push(ot[h])):38===h?(0===g?(w=1-ct(e,c,d),x=ct(e,f,d),S=ct(e,f,u),E=ct(s,f,u),m=1-ct(s,c,u),y=1-ct(e,c,u)):(w=ct(s,d,c),x=1-ct(s,d,f),S=1-ct(s,u,f),E=1-ct(e,u,f),m=ct(e,u,c),y=ct(s,u,c)),C.push(nt[h]),C.push(st[h]),C.push(at[h])):39===h?(4===g?(w=1-ct(e,c,d),x=ct(e,f,d),S=ct(e,f,u),E=ct(s,f,u),m=1-ct(s,c,u),y=1-ct(e,c,u)):(w=ct(s,d,c),x=1-ct(s,d,f),S=1-ct(s,u,f),E=1-ct(e,u,f),m=ct(e,u,c),y=ct(s,u,c)),C.push(nt[h]),C.push(rt[h]),C.push(at[h])):85===h&&(b=1,w=0,x=1,v=0,S=0,E=1,m=0,y=1),(m<0||m>1||y<0||y>1||b<0||b>1||x<0||x>1||S<0||S>1||E<0||E>1)&&console.log("MarchingSquaresJS-isoBands: "+h+" "+p+" "+u+","+c+","+d+","+f+" "+g+" "+m+" "+y+" "+b+" "+w+" "+x+" "+v+" "+S+" "+E),o.cells[a][l]={cval:h,cval_real:p,flipped:g,topleft:m,topright:y,righttop:b,rightbottom:w,bottomright:x,bottomleft:v,leftbottom:S,lefttop:E,edges:C}}}}}return o}(t,e,i)
return y.polygons?(y.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),l=function(t){var e=[],i=0
return t.cells.forEach((function(t,n){t.forEach((function(t,r){if(void 0!==t){var o=ut[t.cval](t)
"object"==typeof o&&dt(o)?"object"==typeof o[0]&&dt(o[0])?"object"==typeof o[0][0]&&dt(o[0][0])?o.forEach((function(t){t.forEach((function(t){t[0]+=r,t[1]+=n})),e[i++]=t})):(o.forEach((function(t){t[0]+=r,t[1]+=n})),e[i++]=o):console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates"):console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates")}}))})),e}(h)):(y.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),l=function(t){for(var e=[],i=t.rows,n=t.cols,r=[],o=0;o<i;o++)for(var s=0;s<n;s++)if(void 0!==t.cells[o][s]&&t.cells[o][s].edges.length>0){var a=pt(t.cells[o][s]),l=null,h=s,u=o
null!==a&&r.push([a.p[0]+h,a.p[1]+u])
do{if(null===(l=gt(t.cells[u][h],a.x,a.y,a.o)))break
if(r.push([l.p[0]+h,l.p[1]+u]),h+=l.x,a=l,(u+=l.y)<0||u>=i||h<0||h>=n||void 0===t.cells[u][h]){var c=ft(t,h-=l.x,u-=l.y,l.x,l.y,l.o)
if(null===c)break
c.path.forEach((function(t){r.push(t)})),h=c.i,u=c.j,a=c}}while(void 0!==t.cells[u][h]&&t.cells[u][h].edges.length>0)
e.push(r),r=[],t.cells[o][s].edges.length>0&&s--}return e}(h)),"function"==typeof y.successCallback&&y.successCallback(l),l}var x=64,b=16,w=4,E=1,S=[],C=[],P=[],T=[],I=[],M=[],A=[],R=[],L=[],O=[],D=[],N=[],F=[],k=[],z=[],j=[],G=[],B=[],U=[],q=[],V=[],Z=[],W=[],Y=[]
A[85]=O[85]=-1,R[85]=D[85]=0,L[85]=N[85]=1,U[85]=Z[85]=1,q[85]=W[85]=0,V[85]=Y[85]=1,S[85]=T[85]=0,C[85]=I[85]=-1,P[85]=z[85]=0,j[85]=F[85]=0,G[85]=k[85]=1,M[85]=B[85]=1,Z[1]=Z[169]=0,W[1]=W[169]=-1,Y[1]=Y[169]=0,F[1]=F[169]=-1,k[1]=k[169]=0,z[1]=z[169]=0,O[4]=O[166]=0,D[4]=D[166]=-1,N[4]=N[166]=1,j[4]=j[166]=1,G[4]=G[166]=0,B[4]=B[166]=0,A[16]=A[154]=0,R[16]=R[154]=1,L[16]=L[154]=1,T[16]=T[154]=1,I[16]=I[154]=0,M[16]=M[154]=1,U[64]=U[106]=0,q[64]=q[106]=1,V[64]=V[106]=0,S[64]=S[106]=-1,C[64]=C[106]=0,P[64]=P[106]=1,U[2]=U[168]=0,q[2]=q[168]=-1,V[2]=V[168]=1,Z[2]=Z[168]=0,W[2]=W[168]=-1,Y[2]=Y[168]=0,F[2]=F[168]=-1,k[2]=k[168]=0,z[2]=z[168]=0,j[2]=j[168]=-1,G[2]=G[168]=0,B[2]=B[168]=1,A[8]=A[162]=0,R[8]=R[162]=-1,L[8]=L[162]=0,O[8]=O[162]=0,D[8]=D[162]=-1,N[8]=N[162]=1,F[8]=F[162]=1,k[8]=k[162]=0,z[8]=z[162]=1,j[8]=j[162]=1,G[8]=G[162]=0,B[8]=B[162]=0,A[32]=A[138]=0,R[32]=R[138]=1,L[32]=L[138]=1,O[32]=O[138]=0,D[32]=D[138]=1,N[32]=N[138]=0,S[32]=S[138]=1,C[32]=C[138]=0,P[32]=P[138]=0,T[32]=T[138]=1,I[32]=I[138]=0,M[32]=M[138]=1,Z[128]=Z[42]=0,W[128]=W[42]=1,Y[128]=Y[42]=1,U[128]=U[42]=0,q[128]=q[42]=1,V[128]=V[42]=0,S[128]=S[42]=-1,C[128]=C[42]=0,P[128]=P[42]=1,T[128]=T[42]=-1,I[128]=I[42]=0,M[128]=M[42]=0,O[5]=O[165]=-1,D[5]=D[165]=0,N[5]=N[165]=0,Z[5]=Z[165]=1,W[5]=W[165]=0,Y[5]=Y[165]=0,j[20]=j[150]=0,G[20]=G[150]=1,B[20]=B[150]=1,T[20]=T[150]=0,I[20]=I[150]=-1,M[20]=M[150]=1,A[80]=A[90]=-1,R[80]=R[90]=0,L[80]=L[90]=1,U[80]=U[90]=1,q[80]=q[90]=0,V[80]=V[90]=1,F[65]=F[105]=0,k[65]=k[105]=1,z[65]=z[105]=0,S[65]=S[105]=0,C[65]=C[105]=-1,P[65]=P[105]=0,A[160]=A[10]=-1,R[160]=R[10]=0,L[160]=L[10]=1,O[160]=O[10]=-1,D[160]=D[10]=0,N[160]=N[10]=0,Z[160]=Z[10]=1,W[160]=W[10]=0,Y[160]=Y[10]=0,U[160]=U[10]=1,q[160]=q[10]=0,V[160]=V[10]=1,j[130]=j[40]=0,G[130]=G[40]=1,B[130]=B[40]=1,F[130]=F[40]=0,k[130]=k[40]=1,z[130]=z[40]=0,S[130]=S[40]=0,C[130]=C[40]=-1,P[130]=P[40]=0,T[130]=T[40]=0,I[130]=I[40]=-1,M[130]=M[40]=1,O[37]=O[133]=0,D[37]=D[133]=1,N[37]=N[133]=1,Z[37]=Z[133]=0,W[37]=W[133]=1,Y[37]=Y[133]=0,S[37]=S[133]=-1,C[37]=C[133]=0,P[37]=P[133]=0,T[37]=T[133]=1,I[37]=I[133]=0,M[37]=M[133]=0,j[148]=j[22]=-1,G[148]=G[22]=0,B[148]=B[22]=0,Z[148]=Z[22]=0,W[148]=W[22]=-1,Y[148]=Y[22]=1,U[148]=U[22]=0,q[148]=q[22]=1,V[148]=V[22]=1,T[148]=T[22]=-1,I[148]=I[22]=0,M[148]=M[22]=1,A[82]=A[88]=0,R[82]=R[88]=-1,L[82]=L[88]=1,j[82]=j[88]=1,G[82]=G[88]=0,B[82]=B[88]=1,F[82]=F[88]=-1,k[82]=k[88]=0,z[82]=z[88]=1,U[82]=U[88]=0,q[82]=q[88]=-1,V[82]=V[88]=0,A[73]=A[97]=0,R[73]=R[97]=1,L[73]=L[97]=0,O[73]=O[97]=0,D[73]=D[97]=-1,N[73]=N[97]=0,F[73]=F[97]=1,k[73]=k[97]=0,z[73]=z[97]=0,S[73]=S[97]=1,C[73]=C[97]=0,P[73]=P[97]=1,A[145]=A[25]=0,R[145]=R[25]=-1,L[145]=L[25]=0,F[145]=F[25]=1,k[145]=k[25]=0,z[145]=z[25]=1,Z[145]=Z[25]=0,W[145]=W[25]=1,Y[145]=Y[25]=1,T[145]=T[25]=-1,I[145]=I[25]=0,M[145]=M[25]=0,O[70]=O[100]=0,D[70]=D[100]=1,N[70]=N[100]=0,j[70]=j[100]=-1,G[70]=G[100]=0,B[70]=B[100]=1,U[70]=U[100]=0,q[70]=q[100]=-1,V[70]=V[100]=1,S[70]=S[100]=1,C[70]=C[100]=0,P[70]=P[100]=0,O[101]=O[69]=0,D[101]=D[69]=1,N[101]=N[69]=0,S[101]=S[69]=1,C[101]=C[69]=0,P[101]=P[69]=0,Z[149]=Z[21]=0,W[149]=W[21]=1,Y[149]=Y[21]=1,T[149]=T[21]=-1,I[149]=I[21]=0,M[149]=M[21]=0,j[86]=j[84]=-1,G[86]=G[84]=0,B[86]=B[84]=1,U[86]=U[84]=0,q[86]=q[84]=-1,V[86]=V[84]=1,A[89]=A[81]=0,R[89]=R[81]=-1,L[89]=L[81]=0,F[89]=F[81]=1,k[89]=k[81]=0,z[89]=z[81]=1,A[96]=A[74]=0,R[96]=R[74]=1,L[96]=L[74]=0,O[96]=O[74]=-1,D[96]=D[74]=0,N[96]=N[74]=1,U[96]=U[74]=1,q[96]=q[74]=0,V[96]=V[74]=0,S[96]=S[74]=1,C[96]=C[74]=0,P[96]=P[74]=1,A[24]=A[146]=0,R[24]=R[146]=-1,L[24]=L[146]=1,j[24]=j[146]=1,G[24]=G[146]=0,B[24]=B[146]=1,F[24]=F[146]=0,k[24]=k[146]=1,z[24]=z[146]=1,T[24]=T[146]=0,I[24]=I[146]=-1,M[24]=M[146]=0,O[6]=O[164]=-1,D[6]=D[164]=0,N[6]=N[164]=1,j[6]=j[164]=-1,G[6]=G[164]=0,B[6]=B[164]=0,Z[6]=Z[164]=0,W[6]=W[164]=-1,Y[6]=Y[164]=1,U[6]=U[164]=1,q[6]=q[164]=0,V[6]=V[164]=0,F[129]=F[41]=0,k[129]=k[41]=1,z[129]=z[41]=1,Z[129]=Z[41]=0,W[129]=W[41]=1,Y[129]=Y[41]=0,S[129]=S[41]=-1,C[129]=C[41]=0,P[129]=P[41]=0,T[129]=T[41]=0,I[129]=I[41]=-1,M[129]=M[41]=0,j[66]=j[104]=0,G[66]=G[104]=1,B[66]=B[104]=0,F[66]=F[104]=-1,k[66]=k[104]=0,z[66]=z[104]=1,U[66]=U[104]=0,q[66]=q[104]=-1,V[66]=V[104]=0,S[66]=S[104]=0,C[66]=C[104]=-1,P[66]=P[104]=1,A[144]=A[26]=-1,R[144]=R[26]=0,L[144]=L[26]=0,Z[144]=Z[26]=1,W[144]=W[26]=0,Y[144]=Y[26]=1,U[144]=U[26]=0,q[144]=q[26]=1,V[144]=V[26]=1,T[144]=T[26]=-1,I[144]=I[26]=0,M[144]=M[26]=1,O[36]=O[134]=0,D[36]=D[134]=1,N[36]=N[134]=1,j[36]=j[134]=0,G[36]=G[134]=1,B[36]=B[134]=0,S[36]=S[134]=0,C[36]=C[134]=-1,P[36]=P[134]=1,T[36]=T[134]=1,I[36]=I[134]=0,M[36]=M[134]=0,A[9]=A[161]=-1,R[9]=R[161]=0,L[9]=L[161]=0,O[9]=O[161]=0,D[9]=D[161]=-1,N[9]=N[161]=0,F[9]=F[161]=1,k[9]=k[161]=0,z[9]=z[161]=0,Z[9]=Z[161]=1,W[9]=W[161]=0,Y[9]=Y[161]=1,A[136]=0,R[136]=1,L[136]=1,O[136]=0,D[136]=1,N[136]=0,j[136]=-1,G[136]=0,B[136]=1,F[136]=-1,k[136]=0,z[136]=0,Z[136]=0,W[136]=-1,Y[136]=0,U[136]=0,q[136]=-1,V[136]=1,S[136]=1,C[136]=0,P[136]=0,T[136]=1,I[136]=0,M[136]=1,A[34]=0,R[34]=-1,L[34]=0,O[34]=0,D[34]=-1,N[34]=1,j[34]=1,G[34]=0,B[34]=0,F[34]=1,k[34]=0,z[34]=1,Z[34]=0,W[34]=1,Y[34]=1,U[34]=0,q[34]=1,V[34]=0,S[34]=-1,C[34]=0,P[34]=1,T[34]=-1,I[34]=0,M[34]=0,A[35]=0,R[35]=1,L[35]=1,O[35]=0,D[35]=-1,N[35]=1,j[35]=1,G[35]=0,B[35]=0,F[35]=-1,k[35]=0,z[35]=0,Z[35]=0,W[35]=-1,Y[35]=0,U[35]=0,q[35]=1,V[35]=0,S[35]=-1,C[35]=0,P[35]=1,T[35]=1,I[35]=0,M[35]=1,A[153]=0,R[153]=1,L[153]=1,F[153]=-1,k[153]=0,z[153]=0,Z[153]=0,W[153]=-1,Y[153]=0,T[153]=1,I[153]=0,M[153]=1,O[102]=0,D[102]=-1,N[102]=1,j[102]=1,G[102]=0,B[102]=0,U[102]=0,q[102]=1,V[102]=0,S[102]=-1,C[102]=0,P[102]=1,A[155]=0,R[155]=-1,L[155]=0,F[155]=1,k[155]=0,z[155]=1,Z[155]=0,W[155]=1,Y[155]=1,T[155]=-1,I[155]=0,M[155]=0,O[103]=0,D[103]=1,N[103]=0,j[103]=-1,G[103]=0,B[103]=1,U[103]=0,q[103]=-1,V[103]=1,S[103]=1,C[103]=0,P[103]=0,A[152]=0,R[152]=1,L[152]=1,j[152]=-1,G[152]=0,B[152]=1,F[152]=-1,k[152]=0,z[152]=0,Z[152]=0,W[152]=-1,Y[152]=0,U[152]=0,q[152]=-1,V[152]=1,T[152]=1,I[152]=0,M[152]=1,A[156]=0,R[156]=-1,L[156]=1,j[156]=1,G[156]=0,B[156]=1,F[156]=-1,k[156]=0,z[156]=0,Z[156]=0,W[156]=-1,Y[156]=0,U[156]=0,q[156]=1,V[156]=1,T[156]=-1,I[156]=0,M[156]=1,A[137]=0,R[137]=1,L[137]=1,O[137]=0,D[137]=1,N[137]=0,F[137]=-1,k[137]=0,z[137]=0,Z[137]=0,W[137]=-1,Y[137]=0,S[137]=1,C[137]=0,P[137]=0,T[137]=1,I[137]=0,M[137]=1,A[139]=0,R[139]=1,L[139]=1,O[139]=0,D[139]=-1,N[139]=0,F[139]=1,k[139]=0,z[139]=0,Z[139]=0,W[139]=1,Y[139]=0,S[139]=-1,C[139]=0,P[139]=0,T[139]=1,I[139]=0,M[139]=1,A[98]=0,R[98]=-1,L[98]=0,O[98]=0,D[98]=-1,N[98]=1,j[98]=1,G[98]=0,B[98]=0,F[98]=1,k[98]=0,z[98]=1,U[98]=0,q[98]=1,V[98]=0,S[98]=-1,C[98]=0,P[98]=1,A[99]=0,R[99]=1,L[99]=0,O[99]=0,D[99]=-1,N[99]=1,j[99]=1,G[99]=0,B[99]=0,F[99]=-1,k[99]=0,z[99]=1,U[99]=0,q[99]=-1,V[99]=0,S[99]=1,C[99]=0,P[99]=1,O[38]=0,D[38]=-1,N[38]=1,j[38]=1,G[38]=0,B[38]=0,Z[38]=0,W[38]=1,Y[38]=1,U[38]=0,q[38]=1,V[38]=0,S[38]=-1,C[38]=0,P[38]=1,T[38]=-1,I[38]=0,M[38]=0,O[39]=0,D[39]=1,N[39]=1,j[39]=-1,G[39]=0,B[39]=0,Z[39]=0,W[39]=-1,Y[39]=1,U[39]=0,q[39]=1,V[39]=0,S[39]=-1,C[39]=0,P[39]=1,T[39]=1,I[39]=0,M[39]=0
var X=function(t){return[[t.bottomleft,0],[0,0],[0,t.leftbottom]]},H=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0]]},$=function(t){return[[t.topright,1],[1,1],[1,t.righttop]]},K=function(t){return[[0,t.lefttop],[0,1],[t.topleft,1]]},J=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop]]},Q=function(t){return[[t.bottomright,0],[t.bottomleft,0],[1,t.righttop],[1,t.rightbottom]]},tt=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.topleft,1],[t.topright,1]]},et=function(t){return[[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},it=[],nt=[],rt=[],ot=[],st=[],at=[],lt=[],ht=[]
ot[1]=st[1]=18,ot[169]=st[169]=18,rt[4]=nt[4]=12,rt[166]=nt[166]=12,it[16]=ht[16]=4,it[154]=ht[154]=4,at[64]=lt[64]=22,at[106]=lt[106]=22,rt[2]=at[2]=17,ot[2]=st[2]=18,rt[168]=at[168]=17,ot[168]=st[168]=18,it[8]=ot[8]=9,nt[8]=rt[8]=12,it[162]=ot[162]=9,nt[162]=rt[162]=12,it[32]=ht[32]=4,nt[32]=lt[32]=1,it[138]=ht[138]=4,nt[138]=lt[138]=1,st[128]=ht[128]=21,at[128]=lt[128]=22,st[42]=ht[42]=21,at[42]=lt[42]=22,nt[5]=st[5]=14,nt[165]=st[165]=14,rt[20]=ht[20]=6,rt[150]=ht[150]=6,it[80]=at[80]=11,it[90]=at[90]=11,ot[65]=lt[65]=3,ot[105]=lt[105]=3,it[160]=at[160]=11,nt[160]=st[160]=14,it[10]=at[10]=11,nt[10]=st[10]=14,rt[130]=ht[130]=6,ot[130]=lt[130]=3,rt[40]=ht[40]=6,ot[40]=lt[40]=3,nt[101]=lt[101]=1,nt[69]=lt[69]=1,st[149]=ht[149]=21,st[21]=ht[21]=21,rt[86]=at[86]=17,rt[84]=at[84]=17,it[89]=ot[89]=9,it[81]=ot[81]=9,it[96]=lt[96]=0,nt[96]=at[96]=15,it[74]=lt[74]=0,nt[74]=at[74]=15,it[24]=rt[24]=8,ot[24]=ht[24]=7,it[146]=rt[146]=8,ot[146]=ht[146]=7,nt[6]=at[6]=15,rt[6]=st[6]=16,nt[164]=at[164]=15,rt[164]=st[164]=16,ot[129]=ht[129]=7,st[129]=lt[129]=20,ot[41]=ht[41]=7,st[41]=lt[41]=20,rt[66]=lt[66]=2,ot[66]=at[66]=19,rt[104]=lt[104]=2,ot[104]=at[104]=19,it[144]=st[144]=10,at[144]=ht[144]=23,it[26]=st[26]=10,at[26]=ht[26]=23,nt[36]=ht[36]=5,rt[36]=lt[36]=2,nt[134]=ht[134]=5,rt[134]=lt[134]=2,it[9]=st[9]=10,nt[9]=ot[9]=13,it[161]=st[161]=10,nt[161]=ot[161]=13,nt[37]=ht[37]=5,st[37]=lt[37]=20,nt[133]=ht[133]=5,st[133]=lt[133]=20,rt[148]=st[148]=16,at[148]=ht[148]=23,rt[22]=st[22]=16,at[22]=ht[22]=23,it[82]=rt[82]=8,ot[82]=at[82]=19,it[88]=rt[88]=8,ot[88]=at[88]=19,it[73]=lt[73]=0,nt[73]=ot[73]=13,it[97]=lt[97]=0,nt[97]=ot[97]=13,it[145]=ot[145]=9,st[145]=ht[145]=21,it[25]=ot[25]=9,st[25]=ht[25]=21,nt[70]=lt[70]=1,rt[70]=at[70]=17,nt[100]=lt[100]=1,rt[100]=at[100]=17,it[34]=ot[34]=9,nt[34]=rt[34]=12,st[34]=ht[34]=21,at[34]=lt[34]=22,it[136]=ht[136]=4,nt[136]=lt[136]=1,rt[136]=at[136]=17,ot[136]=st[136]=18,it[35]=ht[35]=4,nt[35]=rt[35]=12,ot[35]=st[35]=18,at[35]=lt[35]=22,it[153]=ht[153]=4,ot[153]=st[153]=18,nt[102]=rt[102]=12,at[102]=lt[102]=22,it[155]=ot[155]=9,st[155]=ht[155]=23,nt[103]=lt[103]=1,rt[103]=at[103]=17,it[152]=ht[152]=4,rt[152]=at[152]=17,ot[152]=st[152]=18,it[156]=rt[156]=8,ot[156]=st[156]=18,at[156]=ht[156]=23,it[137]=ht[137]=4,nt[137]=lt[137]=1,ot[137]=st[137]=18,it[139]=ht[139]=4,nt[139]=ot[139]=13,st[139]=lt[139]=20,it[98]=ot[98]=9,nt[98]=rt[98]=12,at[98]=lt[98]=22,it[99]=lt[99]=0,nt[99]=rt[99]=12,ot[99]=at[99]=19,nt[38]=rt[38]=12,st[38]=ht[38]=21,at[38]=lt[38]=22,nt[39]=ht[39]=5,rt[39]=st[39]=16,at[39]=lt[39]=22
var ut=[]
function ct(t,e,i){return(t-e)/(i-e)}function dt(t){return t.constructor.toString().indexOf("Array")>-1}function ft(t,e,i,n,r,o){for(var s=t.cells[i][e],a=s.cval_real,l=e+n,h=i+r,u=[],c=!1;!c;){if(void 0===t.cells[h]||void 0===t.cells[h][l])if(h-=r,l-=n,a=(s=t.cells[h][l]).cval_real,-1===r)if(0===o)if(a&E)u.push([l,h]),n=-1,r=0,o=0
else{if(!(a&w)){u.push([l+s.bottomright,h]),n=0,r=1,o=1,c=!0
break}u.push([l+1,h]),n=1,r=0,o=0}else{if(!(a&E)){if(a&w){u.push([l+s.bottomright,h]),n=0,r=1,o=1,c=!0
break}u.push([l+s.bottomleft,h]),n=0,r=1,o=0,c=!0
break}u.push([l,h]),n=-1,r=0,o=0}else if(1===r)if(0===o){if(!(a&b)){if(a&x){u.push([l+s.topleft,h+1]),n=0,r=-1,o=0,c=!0
break}u.push([l+s.topright,h+1]),n=0,r=-1,o=1,c=!0
break}u.push([l+1,h+1]),n=1,r=0,o=1}else u.push([l+1,h+1]),n=1,r=0,o=1
else if(-1===n)if(0===o){if(!(a&x)){if(a&E){u.push([l,h+s.leftbottom]),n=1,r=0,o=0,c=!0
break}u.push([l,h+s.lefttop]),n=1,r=0,o=1,c=!0
break}u.push([l,h+1]),n=0,r=1,o=0}else{if(!(a&x)){console.log("MarchingSquaresJS-isoBands: wtf")
break}u.push([l,h+1]),n=0,r=1,o=0}else{if(1!==n){console.log("MarchingSquaresJS-isoBands: we came from nowhere!")
break}if(0===o){if(!(a&w)){u.push([l+1,h+s.rightbottom]),n=-1,r=0,o=0,c=!0
break}u.push([l+1,h]),n=0,r=-1,o=1}else{if(!(a&w)){if(a&b){u.push([l+1,h+s.righttop]),n=-1,r=0,o=1
break}u.push([l+1,h+s.rightbottom]),n=-1,r=0,o=0,c=!0
break}u.push([l+1,h]),n=0,r=-1,o=1}}else if(a=(s=t.cells[h][l]).cval_real,-1===n)if(0===o)if(void 0!==t.cells[h-1]&&void 0!==t.cells[h-1][l])n=0,r=-1,o=1
else{if(!(a&E)){u.push([l+s.bottomright,h]),n=0,r=1,o=1,c=!0
break}u.push([l,h])}else{if(!(a&x)){console.log("MarchingSquaresJS-isoBands: found entry from top at "+l+","+h)
break}console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!")}else if(1===n){if(0===o){console.log("MarchingSquaresJS-isoBands: wtf")
break}if(void 0!==t.cells[h+1]&&void 0!==t.cells[h+1][l])n=0,r=1,o=0
else{if(!(a&b)){u.push([l+s.topleft,h+1]),n=0,r=-1,o=0,c=!0
break}u.push([l+1,h+1]),n=1,r=0,o=1}}else if(-1===r){if(1!==o){console.log("MarchingSquaresJS-isoBands: wtf")
break}if(void 0!==t.cells[h][l+1])n=1,r=0,o=1
else{if(!(a&w)){u.push([l+1,h+s.righttop]),n=-1,r=0,o=1,c=!0
break}u.push([l+1,h]),n=0,r=-1,o=1}}else{if(1!==r){console.log("MarchingSquaresJS-isoBands: where did we came from???")
break}if(0!==o){console.log("MarchingSquaresJS-isoBands: wtf")
break}if(void 0!==t.cells[h][l-1])n=-1,r=0,o=0
else{if(!(a&x)){u.push([l,h+s.leftbottom]),n=1,r=0,o=0,c=!0
break}u.push([l,h+1]),n=0,r=1,o=0}}if(h+=r,(l+=n)===e&&h===i)break}return{path:u,i:l,j:h,x:n,y:r,o:o}}function pt(t){if(t.edges.length>0){var e=t.edges[t.edges.length-1],i=t.cval_real
switch(e){case 0:return i&b?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0}
case 1:return i&w?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0}
case 2:return i&w?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0}
case 3:return i&E?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0}
case 4:return i&b?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1}
case 5:return i&w?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0}
case 6:return i&w?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topright,1],x:0,y:-1,o:1}
case 7:return i&E?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0}
case 8:return i&w?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.righttop],x:-1,y:0,o:1}
case 9:return i&E?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0}
case 10:return i&E?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.righttop],x:-1,y:0,o:1}
case 11:return i&x?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1}
case 12:return i&w?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0}
case 13:return i&E?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0}
case 14:return i&E?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0}
case 15:return i&x?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1}
case 16:return i&w?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.leftbottom],x:1,y:0,o:0}
case 17:return i&x?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1}
case 18:return i&E?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0}
case 19:return i&x?{p:[t.bottomleft,0],x:0,y:1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1}
case 20:return i&x?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.leftbottom],x:1,y:0,o:0}
case 21:return i&b?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.topright,1],x:0,y:-1,o:1}
case 22:return i&x?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1}
case 23:return i&b?{p:[0,t.lefttop],x:1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1}
default:console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t)}}return null}function gt(t,e,i,n){var r,o,s,a,l,h=t.cval
switch(e){case-1:0===n?(r=nt[h],s=O[h],a=D[h],l=N[h]):(r=it[h],s=A[h],a=R[h],l=L[h])
break
case 1:0===n?(r=st[h],s=Z[h],a=W[h],l=Y[h]):(r=at[h],s=U[h],a=q[h],l=V[h])
break
default:switch(i){case-1:0===n?(r=lt[h],s=S[h],a=C[h],l=P[h]):(r=ht[h],s=T[h],a=I[h],l=M[h])
break
case 1:0===n?(r=ot[h],s=F[h],a=k[h],l=z[h]):(r=rt[h],s=j[h],a=G[h],l=B[h])}}if(o=t.edges.indexOf(r),void 0===t.edges[o])return null
switch(function(t,e){delete t.edges[e]
for(var i=e+1;i<t.edges.length;i++)t.edges[i-1]=t.edges[i]
t.edges.pop()}(t,o),h=t.cval_real,r){case 0:h&b?(e=t.topleft,i=1):(e=1,i=t.righttop)
break
case 1:h&w?(e=1,i=t.rightbottom):(e=t.topleft,i=1)
break
case 2:h&w?(e=t.topleft,i=1):(e=t.bottomright,i=0)
break
case 3:h&E?(e=t.bottomleft,i=0):(e=t.topleft,i=1)
break
case 4:h&b?(e=t.topright,i=1):(e=1,i=t.righttop)
break
case 5:h&w?(e=1,i=t.rightbottom):(e=t.topright,i=1)
break
case 6:h&w?(e=t.topright,i=1):(e=t.bottomright,i=0)
break
case 7:h&E?(e=t.bottomleft,i=0):(e=t.topright,i=1)
break
case 8:h&w?(e=1,i=t.righttop):(e=t.bottomright,i=0)
break
case 9:h&E?(e=t.bottomleft,i=0):(e=1,i=t.righttop)
break
case 10:h&E?(e=1,i=t.righttop):(e=0,i=t.leftbottom)
break
case 11:h&x?(e=0,i=t.lefttop):(e=1,i=t.righttop)
break
case 12:h&w?(e=1,i=t.rightbottom):(e=t.bottomright,i=0)
break
case 13:h&E?(e=t.bottomleft,i=0):(e=1,i=t.rightbottom)
break
case 14:h&E?(e=1,i=t.rightbottom):(e=0,i=t.leftbottom)
break
case 15:h&x?(e=0,i=t.lefttop):(e=1,i=t.rightbottom)
break
case 16:h&w?(e=0,i=t.leftbottom):(e=t.bottomright,i=0)
break
case 17:h&x?(e=0,i=t.lefttop):(e=t.bottomright,i=0)
break
case 18:h&E?(e=t.bottomleft,i=0):(e=0,i=t.leftbottom)
break
case 19:h&x?(e=0,i=t.lefttop):(e=t.bottomleft,i=0)
break
case 20:h&x?(e=0,i=t.leftbottom):(e=t.topleft,i=1)
break
case 21:h&b?(e=t.topright,i=1):(e=0,i=t.leftbottom)
break
case 22:h&x?(e=0,i=t.lefttop):(e=t.topleft,i=1)
break
case 23:h&b?(e=t.topright,i=1):(e=0,i=t.lefttop)
break
default:return console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t),null}return void 0!==e&&void 0!==i&&void 0!==s&&void 0!==a&&void 0!==l||(console.log("MarchingSquaresJS-isoBands: undefined value!"),console.log(t),console.log(e+" "+i+" "+s+" "+a+" "+l)),{p:[e,i],x:s,y:a,o:l}}function _t(t,e,i){if(i=i||{},!l.isObject(i))throw new Error("options is invalid")
var n=i.zProperty||"elevation",r=i.commonProperties||{},o=i.breaksProperties||[]
if(a.collectionOf(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required")
if(!Array.isArray(e))throw new Error("breaks is not an Array")
if(!l.isObject(r))throw new Error("commonProperties is not an Object")
if(!Array.isArray(o))throw new Error("breaksProperties is not an Array")
var s=function(t,e){if(e=e||{},!l.isObject(e))throw new Error("options is invalid")
var i=e.zProperty||"elevation",n=e.flip,r=e.flags
a.collectionOf(t,"Point","input must contain Points")
for(var o=function(t,e){var i={}
return u.featureEach(t,(function(t){var e=a.getCoords(t)[1]
i[e]||(i[e]=[]),i[e].push(t)})),Object.keys(i).map((function(t){return i[t].sort((function(t,e){return a.getCoords(t)[0]-a.getCoords(e)[0]}))})).sort((function(t,i){return e?a.getCoords(t[0])[1]-a.getCoords(i[0])[1]:a.getCoords(i[0])[1]-a.getCoords(t[0])[1]}))}(t,n),s=[],h=0;h<o.length;h++){for(var c=o[h],d=[],f=0;f<c.length;f++){var p=c[f]
p.properties[i]?d.push(p.properties[i]):d.push(0),!0===r&&(p.properties.matrixPosition=[h,f])}s.push(d)}return s}(t,{zProperty:n,flip:!0}),h=function(t,e,i){for(var n=[],r=1;r<e.length;r++){var o=+e[r-1],s=+e[r],a=yt(mt(v(t,o,s-o))),l={}
l.groupedRings=a,l[i]=o+"-"+s,n.push(l)}return n}(s,e,n)
h=function(t,e,i){var n=d.default(i),r=n[2]-n[0],o=n[3]-n[1],s=n[0],a=n[1],l=e[0].length-1,h=e.length-1,u=r/l,c=o/h,f=function(t){t[0]=t[0]*u+s,t[1]=t[1]*c+a}
return t.forEach((function(t){t.groupedRings.forEach((function(t){t.forEach((function(t){t.forEach(f)}))}))})),t}(h,s,t)
var c=h.map((function(t,e){if(o[e]&&!l.isObject(o[e]))throw new Error("Each mappedProperty is required to be an Object")
var i=_.default({},r,o[e])
return i[n]=t[n],l.multiPolygon(t.groupedRings,i)}))
return l.featureCollection(c)}function mt(t){var e=[],i=[]
t.forEach((function(t){var n=f.default(l.polygon([t]))
i.push(n),e.push({ring:t,area:n})})),i.sort((function(t,e){return e-t}))
var n=[]
return i.forEach((function(t){for(var i=0;i<e.length;i++)if(e[i].area===t){n.push(e[i].ring),e.splice(i,1)
break}})),n}function yt(t){for(var e=t.map((function(t){return{lrCoordinates:t,grouped:!1}})),i=[];!xt(e);)for(var n=0;n<e.length;n++)if(!e[n].grouped){var r=[]
r.push(e[n].lrCoordinates),e[n].grouped=!0
for(var o=l.polygon([e[n].lrCoordinates]),s=n+1;s<e.length;s++)e[s].grouped||vt(l.polygon([e[s].lrCoordinates]),o)&&(r.push(e[s].lrCoordinates),e[s].grouped=!0)
i.push(r)}return i}function vt(t,e){for(var i=g.default(t),n=0;n<i.features.length;n++)if(!p.default(i.features[n],e))return!1
return!0}function xt(t){for(var e=0;e<t.length;e++)if(!1===t[e].grouped)return!1
return!0}ut[1]=ut[169]=X,ut[4]=ut[166]=H,ut[16]=ut[154]=$,ut[64]=ut[106]=K,ut[168]=ut[2]=J,ut[162]=ut[8]=Q,ut[138]=ut[32]=tt,ut[42]=ut[128]=et,ut[5]=ut[165]=function(t){return[[0,0],[0,t.leftbottom],[1,t.rightbottom],[1,0]]},ut[20]=ut[150]=function(t){return[[1,0],[t.bottomright,0],[t.topright,1],[1,1]]},ut[80]=ut[90]=function(t){return[[1,1],[1,t.righttop],[0,t.lefttop],[0,1]]},ut[65]=ut[105]=function(t){return[[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},ut[160]=ut[10]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.leftbottom],[0,t.lefttop]]},ut[130]=ut[40]=function(t){return[[t.topleft,1],[t.topright,1],[t.bottomright,0],[t.bottomleft,0]]},ut[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},ut[101]=ut[69]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,1],[t.topleft,1]]},ut[149]=ut[21]=function(t){return[[t.topright,1],[1,1],[1,0],[0,0],[0,t.leftbottom]]},ut[86]=ut[84]=function(t){return[[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[1,1]]},ut[89]=ut[81]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,1]]},ut[96]=ut[74]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.lefttop],[0,1],[t.topleft,1]]},ut[24]=ut[146]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[t.topright,1]]},ut[6]=ut[164]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop]]},ut[129]=ut[41]=function(t){return[[t.topright,1],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1]]},ut[66]=ut[104]=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},ut[144]=ut[26]=function(t){return[[1,1],[1,t.righttop],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},ut[36]=ut[134]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[t.topleft,1],[t.topright,1]]},ut[9]=ut[161]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom]]},ut[37]=ut[133]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},ut[148]=ut[22]=function(t){return[[1,1],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},ut[82]=ut[88]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1]]},ut[73]=ut[97]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},ut[145]=ut[25]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},ut[70]=ut[100]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},ut[34]=function(t){return[et(t),Q(t)]},ut[35]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},ut[136]=function(t){return[tt(t),J(t)]},ut[153]=function(t){return[$(t),X(t)]},ut[102]=function(t){return[H(t),K(t)]},ut[155]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},ut[103]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},ut[152]=function(t){return[$(t),J(t)]},ut[156]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},ut[137]=function(t){return[tt(t),X(t)]},ut[139]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},ut[98]=function(t){return[Q(t),K(t)]},ut[99]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},ut[38]=function(t){return[H(t),et(t)]},ut[39]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},t.exports=_t,t.exports.default=_t},3183:(t,e,i)=>{"use strict"
var n=i(463),r=i(9611),o=i(2317),s=i(6303),a=i(8017)
function l(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var h=l(n),u=l(a),c={successCallback:null,verbose:!1},d={}
function f(t,e,i){i=i||{}
for(var n=Object.keys(c),r=0;r<n.length;r++){var o=n[r],s=i[o]
s=null!=s?s:c[o],d[o]=s}d.verbose&&console.log("MarchingSquaresJS-isoContours: computing isocontour for "+e)
var a,l,h,u=(a=function(t,e){for(var i=t.length-1,n=t[0].length-1,r={rows:i,cols:n,cells:[]},o=0;o<i;++o){r.cells[o]=[]
for(var s=0;s<n;++s){var a=0,l=t[o+1][s],h=t[o+1][s+1],u=t[o][s+1],c=t[o][s]
if(!(isNaN(l)||isNaN(h)||isNaN(u)||isNaN(c))){a|=l>=e?8:0,a|=h>=e?4:0,a|=u>=e?2:0
var d,f,g,_,m=!1
if(5==(a|=c>=e?1:0)||10===a){var y=(l+h+u+c)/4
5===a&&y<e?(a=10,m=!0):10===a&&y<e&&(a=5,m=!0)}0!==a&&15!==a&&(d=f=g=_=.5,1===a?(g=1-p(e,l,c),f=1-p(e,u,c)):2===a?(f=p(e,c,u),_=1-p(e,h,u)):3===a?(g=1-p(e,l,c),_=1-p(e,h,u)):4===a?(d=p(e,l,h),_=p(e,u,h)):5===a?(d=p(e,l,h),_=p(e,u,h),f=1-p(e,u,c),g=1-p(e,l,c)):6===a?(f=p(e,c,u),d=p(e,l,h)):7===a?(g=1-p(e,l,c),d=p(e,l,h)):8===a?(g=p(e,c,l),d=1-p(e,h,l)):9===a?(f=1-p(e,u,c),d=1-p(e,h,l)):10===a?(d=1-p(e,h,l),_=1-p(e,h,u),f=p(e,c,u),g=p(e,c,l)):11===a?(d=1-p(e,h,l),_=1-p(e,h,u)):12===a?(g=p(e,c,l),_=p(e,u,h)):13===a?(f=1-p(e,u,c),_=p(e,u,h)):14===a?(g=p(e,c,l),f=p(e,c,u)):console.log("MarchingSquaresJS-isoContours: Illegal cval detected: "+a),r.cells[o][s]={cval:a,flipped:m,top:d,right:_,bottom:f,left:g})}}}return r}(t,e),l=[],h=0,a.cells.forEach((function(t,e){t.forEach((function(t,i){if(void 0!==t&&5!==(d=t).cval&&10!==d.cval&&!g(t)){var n=function(t,e,i){var n,r,o=t.length,s=[],a=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],l=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],h=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],u=t[e][i],c=u.cval,d=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"][c],f=m(u,d)
s.push([i+f[0],e+f[1]]),f=m(u,d=h[c]),s.push([i+f[0],e+f[1]]),_(u)
for(var p=i+a[c],g=e+l[c],y=c;p>=0&&g>=0&&g<o&&(p!=i||g!=e)&&void 0!==(u=t[g][p]);){if(0===(c=u.cval)||15===c)return{path:s,info:"mergeable"}
d=h[c],n=a[c],r=l[c],5!==c&&10!==c||(5===c?u.flipped?-1===l[y]?(d="left",n=-1,r=0):(d="right",n=1,r=0):-1===a[y]&&(d="bottom",n=0,r=-1):10===c&&(u.flipped?-1===a[y]?(d="top",n=0,r=1):(d="bottom",n=0,r=-1):1===l[y]&&(d="left",n=-1,r=0))),f=m(u,d),s.push([p+f[0],g+f[1]]),_(u),p+=n,g+=r,y=c}return{path:s,info:"closed"}}(a.cells,e,i),r=!1
if("mergeable"===n.info)for(var o=n.path[n.path.length-1][0],s=n.path[n.path.length-1][1],u=h-1;u>=0;u--)if(Math.abs(l[u][0][0]-o)<=1e-7&&Math.abs(l[u][0][1]-s)<=1e-7){for(var c=n.path.length-2;c>=0;--c)l[u].unshift(n.path[c])
r=!0
break}r||(l[h++]=n.path)}var d}))})),l)
return"function"==typeof d.successCallback&&d.successCallback(u),u}function p(t,e,i){return(t-e)/(i-e)}function g(t){return 0===t.cval||15===t.cval}function _(t){g(t)||5===t.cval||10===t.cval||(t.cval=15)}function m(t,e){return"top"===e?[t.top,1]:"bottom"===e?[t.bottom,0]:"right"===e?[1,t.right]:"left"===e?[0,t.left]:void 0}function y(t,e,i){if(i=i||{},!s.isObject(i))throw new Error("options is invalid")
var n=i.zProperty||"elevation",a=i.commonProperties||{},l=i.breaksProperties||[]
if(o.collectionOf(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required")
if(!Array.isArray(e))throw new Error("breaks must be an Array")
if(!s.isObject(a))throw new Error("commonProperties must be an Object")
if(!Array.isArray(l))throw new Error("breaksProperties must be an Array")
var c=function(t,e){if(e=e||{},!s.isObject(e))throw new Error("options is invalid")
var i=e.zProperty||"elevation",n=e.flip,a=e.flags
o.collectionOf(t,"Point","input must contain Points")
for(var l=function(t,e){var i={}
return r.featureEach(t,(function(t){var e=o.getCoords(t)[1]
i[e]||(i[e]=[]),i[e].push(t)})),Object.keys(i).map((function(t){return i[t].sort((function(t,e){return o.getCoords(t)[0]-o.getCoords(e)[0]}))})).sort((function(t,i){return e?o.getCoords(t[0])[1]-o.getCoords(i[0])[1]:o.getCoords(i[0])[1]-o.getCoords(t[0])[1]}))}(t,n),h=[],u=0;u<l.length;u++){for(var c=l[u],d=[],f=0;f<c.length;f++){var p=c[f]
p.properties[i]?d.push(p.properties[i]):d.push(0),!0===a&&(p.properties.matrixPosition=[u,f])}h.push(d)}return h}(t,{zProperty:n,flip:!0}),d=function(t,e,i,n,r){for(var o=[],a=1;a<e.length;a++){var l=+e[a],h=u.default({},n,r[a])
h[i]=l
var c=s.multiLineString(f(t,l),h)
o.push(c)}return o}(c,e,n,a,l),p=function(t,e,i){var n=h.default(i),o=n[2]-n[0],s=n[3]-n[1],a=n[0],l=n[1],u=e[0].length-1,c=e.length-1,d=o/u,f=s/c,p=function(t){t[0]=t[0]*d+a,t[1]=t[1]*f+l}
return t.forEach((function(t){r.coordEach(t,p)})),t}(d,c,t)
return s.featureCollection(p)}t.exports=y,t.exports.default=y},9:(t,e,i)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var n=i(6303)
e.default=function(t){var e,i,r={type:"FeatureCollection",features:[]}
if("LineString"===(i="Feature"===t.type?t.geometry:t).type)e=[i.coordinates]
else if("MultiLineString"===i.type)e=i.coordinates
else if("MultiPolygon"===i.type)e=[].concat.apply([],i.coordinates)
else{if("Polygon"!==i.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry")
e=i.coordinates}return e.forEach((function(t){e.forEach((function(e){for(var i=0;i<t.length-1;i++)for(var o=i;o<e.length-1;o++){if(t===e){if(1===Math.abs(i-o))continue
if(0===i&&o===t.length-2&&t[i][0]===t[t.length-1][0]&&t[i][1]===t[t.length-1][1])continue}var s=(a=t[i][0],l=t[i][1],h=t[i+1][0],u=t[i+1][1],c=e[o][0],d=e[o][1],f=e[o+1][0],void 0,_=void 0,m=void 0,y=void 0,v=void 0,v={x:null,y:null,onLine1:!1,onLine2:!1},0==(g=((p=e[o+1][1])-d)*(h-a)-(f-c)*(u-l))?null!==v.x&&null!==v.y&&v:(y=(h-a)*(_=l-d)-(u-l)*(m=a-c),_=((f-c)*_-(p-d)*m)/g,m=y/g,v.x=a+_*(h-a),v.y=l+_*(u-l),_>=0&&_<=1&&(v.onLine1=!0),m>=0&&m<=1&&(v.onLine2=!0),!(!v.onLine1||!v.onLine2)&&[v.x,v.y]))
s&&r.features.push(n.point([s[0],s[1]]))}var a,l,h,u,c,d,f,p,g,_,m,y,v}))})),r}},111:function(t,e,i){"use strict"
var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=n(i(3703)),o=i(9611)
e.default=function(t,e){return void 0===e&&(e={}),o.segmentReduce(t,(function(t,i){var n=i.geometry.coordinates
return t+r.default(n[0],n[1],e)}),0)}},5559:function(t,e,i){"use strict"
var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=n(i(7651)),o=n(i(2165)),s=i(6303)
function a(t){var e=t%360
return e<0&&(e+=360),e}e.default=function(t,e,i,n,l){void 0===l&&(l={})
var h=l.steps||64,u=a(i),c=a(n),d=Array.isArray(t)||"Feature"!==t.type?{}:t.properties
if(u===c)return s.lineString(r.default(t,e,l).geometry.coordinates[0],d)
for(var f=u,p=u<c?c:c+360,g=f,_=[],m=0;g<p;)_.push(o.default(t,e,g,l).geometry.coordinates),g=f+360*++m/h
return g>p&&_.push(o.default(t,e,p,l).geometry.coordinates),s.lineString(_,d)}},239:(t,e,i)=>{"use strict"
var n=i(111),r=i(3419),o=i(9611),s=i(6303)
function a(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var l=a(n),h=a(r)
function u(t,e,i){if(i=i||{},!s.isObject(i))throw new Error("options is invalid")
var n=i.units,r=i.reverse
if(!t)throw new Error("geojson is required")
if(e<=0)throw new Error("segmentLength must be greater than 0")
var a=[]
return o.flattenEach(t,(function(t){r&&(t.geometry.coordinates=t.geometry.coordinates.reverse()),function(t,e,i,n){var r=l.default(t,{units:i})
if(r<=e)return n(t)
var o=r/e
Number.isInteger(o)||(o=Math.floor(o)+1)
for(var s=0;s<o;s++)n(h.default(t,e*s,e*(s+1),{units:i}))}(t,e,n,(function(t){a.push(t)}))})),s.featureCollection(a)}t.exports=u,t.exports.default=u},7315:function(t,e,i){"use strict"
var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=i(6303),o=i(2317),s=n(i(8735)),a=i(9611),l=n(i(4686))
function h(t,e){var i=o.getCoords(t),n=o.getCoords(e)
if(2!==i.length)throw new Error("<intersects> line1 must only contain 2 coordinates")
if(2!==n.length)throw new Error("<intersects> line2 must only contain 2 coordinates")
var s=i[0][0],a=i[0][1],l=i[1][0],h=i[1][1],u=n[0][0],c=n[0][1],d=n[1][0],f=n[1][1],p=(f-c)*(l-s)-(d-u)*(h-a)
if(0===p)return null
var g=((d-u)*(a-c)-(f-c)*(s-u))/p,_=((l-s)*(a-c)-(h-a)*(s-u))/p
if(g>=0&&g<=1&&_>=0&&_<=1){var m=s+g*(l-s),y=a+g*(h-a)
return r.point([m,y])}return null}e.default=function(t,e){var i={},n=[]
if("LineString"===t.type&&(t=r.feature(t)),"LineString"===e.type&&(e=r.feature(e)),"Feature"===t.type&&"Feature"===e.type&&null!==t.geometry&&null!==e.geometry&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var u=h(t,e)
return u&&n.push(u),r.featureCollection(n)}var c=l.default()
return c.load(s.default(e)),a.featureEach(s.default(t),(function(t){a.featureEach(c.search(t),(function(e){var r=h(t,e)
if(r){var s=o.getCoords(r).join(",")
i[s]||(i[s]=!0,n.push(r))}}))})),r.featureCollection(n)}},3865:(t,e,i)=>{"use strict"
var n=i(9611),r=i(2317),o=i(6303)
function s(t){var e=t[0],i=t[1]
return[i[0]-e[0],i[1]-e[1]]}function a(t,e){return t[0]*e[1]-e[0]*t[1]}function l(t,e,i){if(i=i||{},!o.isObject(i))throw new Error("options is invalid")
var s=i.units
if(!t)throw new Error("geojson is required")
if(null==e||isNaN(e))throw new Error("distance is required")
var a=r.getType(t),l=t.properties
switch(a){case"LineString":return h(t,e,s)
case"MultiLineString":var u=[]
return n.flattenEach(t,(function(t){u.push(h(t,e,s).geometry.coordinates)})),o.multiLineString(u,l)
default:throw new Error("geometry "+a+" is not supported")}}function h(t,e,i){var n=[],l=o.lengthToDegrees(e,i),h=r.getCoords(t),u=[]
return h.forEach((function(t,e){if(e!==h.length-1){var i=function(t,e,i){var n=Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])),r=t[0]+i*(e[1]-t[1])/n,o=e[0]+i*(e[1]-t[1])/n
return[[r,t[1]+i*(t[0]-e[0])/n],[o,e[1]+i*(t[0]-e[0])/n]]}(t,h[e+1],l)
if(n.push(i),e>0){var r=n[e-1],o=!function(t,e){return 0===a(s(t),s(e))}(c=i,d=r)&&function(t,e){var i,n,r=t[0],o=s(t),l=e[0],h=s(e),u=a(o,h),c=function(t,e){return[t[0]+e[0],t[1]+e[1]]}(r,function(t,e){return[t*e[0],t*e[1]]}(a((n=r,[(i=l)[0]-n[0],i[1]-n[1]]),h)/u,o))
return c}(c,d)
!1!==o&&(r[1]=o,i[0]=o),u.push(r[0]),e===h.length-2&&(u.push(i[0]),u.push(i[1]))}2===h.length&&(u.push(i[0]),u.push(i[1]))}var c,d})),o.lineString(u,t.properties)}t.exports=l,t.exports.default=l},1055:function(t,e,i){"use strict"
var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=n(i(4686)),o=n(i(8735)),s=n(i(8357)),a=n(i(4537)),l=i(2317),h=i(9611),u=i(6303),c=n(i(5941))
function d(t,e){var i=l.getCoords(e),n=l.getCoords(t),r=n[0],o=n[n.length-1],s=t.geometry.coordinates
return c.default(i[0],r)?s.unshift(i[1]):c.default(i[0],o)?s.push(i[1]):c.default(i[1],r)?s.unshift(i[0]):c.default(i[1],o)&&s.push(i[0]),t}e.default=function(t,e,i){if(void 0===i&&(i={}),i=i||{},!u.isObject(i))throw new Error("options is invalid")
var n,f=i.tolerance||0,p=[],g=r.default(),_=o.default(t)
return g.load(_),h.segmentEach(e,(function(t){var e=!1
t&&(h.featureEach(g.search(t),(function(i){if(!1===e){var r=l.getCoords(t).sort(),o=l.getCoords(i).sort()
c.default(r,o)||(0===f?a.default(r[0],i)&&a.default(r[1],i):s.default(i,r[0]).properties.dist<=f&&s.default(i,r[1]).properties.dist<=f)?(e=!0,n=n?d(n,t):t):(0===f?a.default(o[0],t)&&a.default(o[1],t):s.default(t,o[0]).properties.dist<=f&&s.default(t,o[1]).properties.dist<=f)&&(n=n?d(n,i):i)}})),!1===e&&n&&(p.push(n),n=void 0))})),n&&p.push(n),u.featureCollection(p)}},8735:(t,e,i)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var n=i(6303),r=i(2317),o=i(9611)
e.default=function(t){if(!t)throw new Error("geojson is required")
var e=[]
return o.flattenEach(t,(function(t){!function(t,e){var i=[],o=t.geometry
if(null!==o){switch(o.type){case"Polygon":i=r.getCoords(o)
break
case"LineString":i=[r.getCoords(o)]}i.forEach((function(i){var r=function(t,e){var i=[]
return t.reduce((function(t,r){var o,s,a,l,h,u,c=n.lineString([t,r],e)
return c.bbox=(s=r,a=(o=t)[0],l=o[1],[a<(h=s[0])?a:h,l<(u=s[1])?l:u,a>h?a:h,l>u?l:u]),i.push(c),r})),i}(i,t.properties)
r.forEach((function(t){t.id=e.length,e.push(t)}))}))}}(t,e)})),n.featureCollection(e)}},3419:(t,e,i)=>{"use strict"
var n=i(2045),r=i(3703),o=i(2165),s=i(6303)
function a(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var l=a(n),h=a(r),u=a(o)
function c(t,e,i,n){if(n=n||{},!s.isObject(n))throw new Error("options is invalid")
var r,o=[]
if("Feature"===t.type)r=t.geometry.coordinates
else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry")
r=t.coordinates}for(var a,c,d,f=r.length,p=0,g=0;g<r.length&&!(e>=p&&g===r.length-1);g++){if(p>e&&0===o.length){if(!(a=e-p))return o.push(r[g]),s.lineString(o)
c=l.default(r[g],r[g-1])-180,d=u.default(r[g],a,c,n),o.push(d.geometry.coordinates)}if(p>=i)return(a=i-p)?(c=l.default(r[g],r[g-1])-180,d=u.default(r[g],a,c,n),o.push(d.geometry.coordinates),s.lineString(o)):(o.push(r[g]),s.lineString(o))
if(p>=e&&o.push(r[g]),g===r.length-1)return s.lineString(o)
p+=h.default(r[g],r[g+1],n)}if(p<e&&r.length===f)throw new Error("Start position is beyond line")
var _=r[r.length-1]
return s.lineString([_,_])}t.exports=c,t.exports.default=c},5499:(t,e,i)=>{"use strict"
var n=i(2317),r=i(6303)
var o=function(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}(i(8357))
function s(t,e,i){var s=n.getCoords(i)
if("LineString"!==n.getType(i))throw new Error("line must be a LineString")
for(var a,l=o.default(i,t),h=o.default(i,e),u=[(a=l.properties.index<=h.properties.index?[l,h]:[h,l])[0].geometry.coordinates],c=a[0].properties.index+1;c<a[1].properties.index+1;c++)u.push(s[c])
return u.push(a[1].geometry.coordinates),r.lineString(u,i.properties)}t.exports=s,t.exports.default=s},5579:(t,e,i)=>{"use strict"
var n=i(4686),r=i(2083),o=i(463),s=i(9399),a=i(8735),l=i(7315),h=i(8357),u=i(2317),c=i(9611),d=i(6303)
function f(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var p=f(n),g=f(r),_=f(o),m=f(s),y=f(a),v=f(l),x=f(h)
function b(t,e){if(!t)throw new Error("line is required")
if(!e)throw new Error("splitter is required")
var i=u.getType(t),n=u.getType(e)
if("LineString"!==i)throw new Error("line must be LineString")
if("FeatureCollection"===n)throw new Error("splitter cannot be a FeatureCollection")
if("GeometryCollection"===n)throw new Error("splitter cannot be a GeometryCollection")
var r=m.default(e,{precision:7})
switch(n){case"Point":return E(t,r)
case"MultiPoint":return w(t,r)
case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return w(t,v.default(t,r))}}function w(t,e){var i=[],n=p.default()
return c.flattenEach(e,(function(e){if(i.forEach((function(t,e){t.id=e})),i.length){var r=n.search(e)
if(r.features.length){var o=S(e,r)
i=i.filter((function(t){return t.id!==o.id})),n.remove(o),c.featureEach(E(o,e),(function(t){i.push(t),n.insert(t)}))}}else(i=E(t,e).features).forEach((function(t){t.bbox||(t.bbox=g.default(_.default(t)))})),n.load(d.featureCollection(i))})),d.featureCollection(i)}function E(t,e){var i=[],n=u.getCoords(t)[0],r=u.getCoords(t)[t.geometry.coordinates.length-1]
if(C(n,u.getCoord(e))||C(r,u.getCoord(e)))return d.featureCollection([t])
var o=p.default(),s=y.default(t)
o.load(s)
var a=o.search(e)
if(!a.features.length)return d.featureCollection([t])
var l=S(e,a),h=[n],f=c.featureReduce(s,(function(t,n,r){var o=u.getCoords(n)[1],s=u.getCoord(e)
return r===l.id?(t.push(s),i.push(d.lineString(t)),C(s,o)?[s]:[s,o]):(t.push(o),t)}),h)
return f.length>1&&i.push(d.lineString(f)),d.featureCollection(i)}function S(t,e){if(!e.features.length)throw new Error("lines must contain features")
if(1===e.features.length)return e.features[0]
var i,n=1/0
return c.featureEach(e,(function(e){var r=x.default(e,t).properties.dist
r<n&&(i=e,n=r)})),i}function C(t,e){return t[0]===e[0]&&t[1]===e[1]}t.exports=b,t.exports.default=b},3643:function(t,e,i){"use strict"
var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=n(i(463)),o=i(2317),s=i(6303),a=n(i(7051))
function l(t,e,i,n){e=e||("Feature"===t.type?t.properties:{})
var a=o.getGeom(t),l=a.coordinates,u=a.type
if(!l.length)throw new Error("line must contain coordinates")
switch(u){case"LineString":return i&&(l=h(l)),s.polygon([l],e)
case"MultiLineString":var c=[],d=0
return l.forEach((function(t){if(i&&(t=h(t)),n){var e=(a=(o=r.default(s.lineString(t)))[0],l=o[1],u=o[2],f=o[3],Math.abs(a-u)*Math.abs(l-f))
e>d?(c.unshift(t),d=e):c.push(t)}else c.push(t)
var o,a,l,u,f})),s.polygon(c,e)
default:throw new Error("geometry type "+u+" is not supported")}}function h(t){var e=t[0],i=e[0],n=e[1],r=t[t.length-1],o=r[0],s=r[1]
return i===o&&n===s||t.push(e),t}e.default=function(t,e){var i,n,r
void 0===e&&(e={})
var h=e.properties,u=null===(i=e.autoComplete)||void 0===i||i,c=null===(n=e.orderCoords)||void 0===n||n
if(null!==(r=e.mutate)&&void 0!==r&&r||(t=a.default(t)),"FeatureCollection"===t.type){var d=[]
return t.features.forEach((function(t){d.push(o.getCoords(l(t,{},u,c)))})),s.multiPolygon(d,h)}return l(t,h,u,c)}},575:(t,e,i)=>{"use strict"
var n=i(6303)
var r=function(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}(i(6638))
function o(t,e){var i,o=function(t){var e=t&&t.geometry.coordinates||[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]
return n.polygon(e)}(e)
return("FeatureCollection"===t.type?s(2===(i=t).features.length?r.default.union(i.features[0].geometry.coordinates,i.features[1].geometry.coordinates):r.default.union.apply(r.default,i.features.map((function(t){return t.geometry.coordinates})))):s(r.default.union(t.geometry.coordinates))).geometry.coordinates.forEach((function(t){o.geometry.coordinates.push(t[0])})),o}function s(t){return n.multiPolygon(t)}t.exports=o,t.exports.default=o},9611:(t,e,i)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var n=i(6303)
function r(t,e,i){if(null!==t)for(var n,o,s,a,l,h,u,c,d=0,f=0,p=t.type,g="FeatureCollection"===p,_="Feature"===p,m=g?t.features.length:1,y=0;y<m;y++){l=(c=!!(u=g?t.features[y].geometry:_?t.geometry:t)&&"GeometryCollection"===u.type)?u.geometries.length:1
for(var v=0;v<l;v++){var x=0,b=0
if(null!==(a=c?u.geometries[v]:u)){h=a.coordinates
var w=a.type
switch(d=!i||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break
case"Point":if(!1===e(h,f,y,x,b))return!1
f++,x++
break
case"LineString":case"MultiPoint":for(n=0;n<h.length;n++){if(!1===e(h[n],f,y,x,b))return!1
f++,"MultiPoint"===w&&x++}"LineString"===w&&x++
break
case"Polygon":case"MultiLineString":for(n=0;n<h.length;n++){for(o=0;o<h[n].length-d;o++){if(!1===e(h[n][o],f,y,x,b))return!1
f++}"MultiLineString"===w&&x++,"Polygon"===w&&b++}"Polygon"===w&&x++
break
case"MultiPolygon":for(n=0;n<h.length;n++){for(b=0,o=0;o<h[n].length;o++){for(s=0;s<h[n][o].length-d;s++){if(!1===e(h[n][o][s],f,y,x,b))return!1
f++}b++}x++}break
case"GeometryCollection":for(n=0;n<a.geometries.length;n++)if(!1===r(a.geometries[n],e,i))return!1
break
default:throw new Error("Unknown Geometry Type")}}}}}function o(t,e){var i
switch(t.type){case"FeatureCollection":for(i=0;i<t.features.length&&!1!==e(t.features[i].properties,i);i++);break
case"Feature":e(t.properties,0)}}function s(t,e){if("Feature"===t.type)e(t,0)
else if("FeatureCollection"===t.type)for(var i=0;i<t.features.length&&!1!==e(t.features[i],i);i++);}function a(t,e){var i,n,r,o,s,a,l,h,u,c,d=0,f="FeatureCollection"===t.type,p="Feature"===t.type,g=f?t.features.length:1
for(i=0;i<g;i++){for(a=f?t.features[i].geometry:p?t.geometry:t,h=f?t.features[i].properties:p?t.properties:{},u=f?t.features[i].bbox:p?t.bbox:void 0,c=f?t.features[i].id:p?t.id:void 0,s=(l=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,r=0;r<s;r++)if(null!==(o=l?a.geometries[r]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,d,h,u,c))return!1
break
case"GeometryCollection":for(n=0;n<o.geometries.length;n++)if(!1===e(o.geometries[n],d,h,u,c))return!1
break
default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,d,h,u,c))return!1
d++}}function l(t,e){a(t,(function(t,i,r,o,s){var a,l=null===t?null:t.type
switch(l){case null:case"Point":case"LineString":case"Polygon":return!1!==e(n.feature(t,r,{bbox:o,id:s}),i,0)&&void 0}switch(l){case"MultiPoint":a="Point"
break
case"MultiLineString":a="LineString"
break
case"MultiPolygon":a="Polygon"}for(var h=0;h<t.coordinates.length;h++){var u={type:a,coordinates:t.coordinates[h]}
if(!1===e(n.feature(u,r),i,h))return!1}}))}function h(t,e){l(t,(function(t,i,o){var s=0
if(t.geometry){var a=t.geometry.type
if("Point"!==a&&"MultiPoint"!==a){var l,h=0,u=0,c=0
return!1!==r(t,(function(r,a,d,f,p){if(void 0===l||i>h||f>u||p>c)return l=r,h=i,u=f,c=p,void(s=0)
var g=n.lineString([l,r],t.properties)
if(!1===e(g,i,o,p,s))return!1
s++,l=r}))&&void 0}}}))}function u(t,e){if(!t)throw new Error("geojson is required")
l(t,(function(t,i,r){if(null!==t.geometry){var o=t.geometry.type,s=t.geometry.coordinates
switch(o){case"LineString":if(!1===e(t,i,r,0,0))return!1
break
case"Polygon":for(var a=0;a<s.length;a++)if(!1===e(n.lineString(s[a],t.properties),i,r,a))return!1}}}))}e.coordAll=function(t){var e=[]
return r(t,(function(t){e.push(t)})),e},e.coordEach=r,e.coordReduce=function(t,e,i,n){var o=i
return r(t,(function(t,n,r,s,a){o=0===n&&void 0===i?t:e(o,t,n,r,s,a)}),n),o},e.featureEach=s,e.featureReduce=function(t,e,i){var n=i
return s(t,(function(t,r){n=0===r&&void 0===i?t:e(n,t,r)})),n},e.findPoint=function(t,e){if(e=e||{},!n.isObject(e))throw new Error("options is invalid")
var i,r=e.featureIndex||0,o=e.multiFeatureIndex||0,s=e.geometryIndex||0,a=e.coordIndex||0,l=e.properties
switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),l=l||t.features[r].properties,i=t.features[r].geometry
break
case"Feature":l=l||t.properties,i=t.geometry
break
case"Point":case"MultiPoint":return null
case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":i=t
break
default:throw new Error("geojson is invalid")}if(null===i)return null
var h=i.coordinates
switch(i.type){case"Point":return n.point(h,l,e)
case"MultiPoint":return o<0&&(o=h.length+o),n.point(h[o],l,e)
case"LineString":return a<0&&(a=h.length+a),n.point(h[a],l,e)
case"Polygon":return s<0&&(s=h.length+s),a<0&&(a=h[s].length+a),n.point(h[s][a],l,e)
case"MultiLineString":return o<0&&(o=h.length+o),a<0&&(a=h[o].length+a),n.point(h[o][a],l,e)
case"MultiPolygon":return o<0&&(o=h.length+o),s<0&&(s=h[o].length+s),a<0&&(a=h[o][s].length-a),n.point(h[o][s][a],l,e)}throw new Error("geojson is invalid")},e.findSegment=function(t,e){if(e=e||{},!n.isObject(e))throw new Error("options is invalid")
var i,r=e.featureIndex||0,o=e.multiFeatureIndex||0,s=e.geometryIndex||0,a=e.segmentIndex||0,l=e.properties
switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),l=l||t.features[r].properties,i=t.features[r].geometry
break
case"Feature":l=l||t.properties,i=t.geometry
break
case"Point":case"MultiPoint":return null
case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":i=t
break
default:throw new Error("geojson is invalid")}if(null===i)return null
var h=i.coordinates
switch(i.type){case"Point":case"MultiPoint":return null
case"LineString":return a<0&&(a=h.length+a-1),n.lineString([h[a],h[a+1]],l,e)
case"Polygon":return s<0&&(s=h.length+s),a<0&&(a=h[s].length+a-1),n.lineString([h[s][a],h[s][a+1]],l,e)
case"MultiLineString":return o<0&&(o=h.length+o),a<0&&(a=h[o].length+a-1),n.lineString([h[o][a],h[o][a+1]],l,e)
case"MultiPolygon":return o<0&&(o=h.length+o),s<0&&(s=h[o].length+s),a<0&&(a=h[o][s].length-a-1),n.lineString([h[o][s][a],h[o][s][a+1]],l,e)}throw new Error("geojson is invalid")},e.flattenEach=l,e.flattenReduce=function(t,e,i){var n=i
return l(t,(function(t,r,o){n=0===r&&0===o&&void 0===i?t:e(n,t,r,o)})),n},e.geomEach=a,e.geomReduce=function(t,e,i){var n=i
return a(t,(function(t,r,o,s,a){n=0===r&&void 0===i?t:e(n,t,r,o,s,a)})),n},e.lineEach=u,e.lineReduce=function(t,e,i){var n=i
return u(t,(function(t,r,o,s){n=0===r&&void 0===i?t:e(n,t,r,o,s)})),n},e.propEach=o,e.propReduce=function(t,e,i){var n=i
return o(t,(function(t,r){n=0===r&&void 0===i?t:e(n,t,r)})),n},e.segmentEach=h,e.segmentReduce=function(t,e,i){var n=i,r=!1
return h(t,(function(t,o,s,a,l){n=!1===r&&void 0===i?t:e(n,t,o,s,a,l),r=!0})),n}},4371:(t,e,i)=>{"use strict"
var n=i(2045),r=i(2165),o=i(3703)
function s(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var a=s(n),l=s(r),h=s(o)
function u(t,e){var i=h.default(t,e),n=a.default(t,e)
return l.default(t,i/2,n)}t.exports=u,t.exports.default=u},5445:function(t,e,i){"use strict"
var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=n(i(2753)),o=i(9611)
function s(t){for(var e=0,i=0,n=t;i<n.length;i++)e+=n[i]
return e/t.length}e.default=function(t,e){var i=e.inputField,n=e.threshold||1e5,a=e.p||2,l=e.binary||!1,h=e.alpha||-1,u=e.standardization||!0,c=r.default(t,{alpha:h,binary:l,p:a,standardization:u,threshold:n}),d=[]
o.featureEach(t,(function(t){var e=t.properties||{}
d.push(e[i])}))
for(var f=s(d),p=function(t){for(var e=s(t),i=0,n=0,r=t;n<r.length;n++){var o=r[n]
i+=Math.pow(o-e,2)}return i/t.length}(d),g=0,_=0,m=0,y=0,v=c.length,x=0;x<v;x++){for(var b=0,w=0;w<v;w++)g+=c[x][w]*(d[x]-f)*(d[w]-f),_+=c[x][w],m+=Math.pow(c[x][w]+c[w][x],2),b+=c[x][w]+c[w][x]
y+=Math.pow(b,2)}var E=g/_/p,S=-1/(v-1),C=(v*v*(m*=.5)-v*y+_*_*3)/((v-1)*(v+1)*(_*_))-S*S,P=Math.sqrt(C)
return{expectedMoranIndex:S,moranIndex:E,stdNorm:P,zNorm:(E-S)/P}}},8357:function(t,e,i){"use strict"
var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=n(i(2045)),o=n(i(3703)),s=n(i(2165)),a=n(i(7315)),l=i(9611),h=i(6303),u=i(2317)
e.default=function(t,e,i){void 0===i&&(i={})
var n=h.point([1/0,1/0],{dist:1/0}),c=0
return l.flattenEach(t,(function(t){for(var l=u.getCoords(t),d=0;d<l.length-1;d++){var f=h.point(l[d])
f.properties.dist=o.default(e,f,i)
var p=h.point(l[d+1])
p.properties.dist=o.default(e,p,i)
var g=o.default(f,p,i),_=Math.max(f.properties.dist,p.properties.dist),m=r.default(f,p),y=s.default(e,_,m+90,i),v=s.default(e,_,m-90,i),x=a.default(h.lineString([y.geometry.coordinates,v.geometry.coordinates]),h.lineString([f.geometry.coordinates,p.geometry.coordinates])),b=null
x.features.length>0&&((b=x.features[0]).properties.dist=o.default(e,b,i),b.properties.location=c+o.default(f,b,i)),f.properties.dist<n.properties.dist&&((n=f).properties.index=d,n.properties.location=c),p.properties.dist<n.properties.dist&&((n=p).properties.index=d+1,n.properties.location=c+g),b&&b.properties.dist<n.properties.dist&&((n=b).properties.index=d),c+=g}})),n}},3697:function(t,e,i){"use strict"
var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=i(2317),o=i(9611),s=n(i(6287)),a=n(i(8017))
e.default=function(t,e,i){void 0===i&&(i={})
var n=i.units,l=i.properties||{},h=function(t){var e=[]
switch(t.geometry?t.geometry.type:t.type){case"GeometryCollection":return o.geomEach(t,(function(t){"Point"===t.type&&e.push({type:"Feature",properties:{},geometry:t})})),{type:"FeatureCollection",features:e}
case"FeatureCollection":return t.features=t.features.filter((function(t){return"Point"===t.geometry.type})),t
default:throw new Error("points must be a Point Collection")}}(t)
if(!h.features.length)throw new Error("points must contain features")
if(!e)throw new Error("line is required")
if("LineString"!==r.getType(e))throw new Error("line must be a LineString")
var u=1/0,c=null
return o.featureEach(h,(function(t){var i=s.default(t,e,{units:n})
i<u&&(u=i,c=t)})),c&&(c.properties=a.default({dist:u},c.properties,l)),c}},1891:function(t,e,i){"use strict"
var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=n(i(7051)),o=n(i(3703)),s=i(9611)
e.default=function(t,e){if(!t)throw new Error("targetPoint is required")
if(!e)throw new Error("points is required")
var i,n=1/0,a=0
return s.featureEach(e,(function(e,i){var r=o.default(t,e)
r<n&&(a=i,n=r)})),(i=r.default(e.features[a])).properties.featureIndex=a,i.properties.distanceToPoint=n,i}},4875:(t,e,i)=>{"use strict"
var n=i(2317)
function r(t,e){var i=n.getCoord(t),r=n.getGeom(e).coordinates[0]
if(r.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.")
var o=e.properties||{},s=o.a,a=o.b,l=o.c,h=i[0],u=i[1],c=r[0][0],d=r[0][1],f=void 0!==s?s:r[0][2],p=r[1][0],g=r[1][1],_=void 0!==a?a:r[1][2],m=r[2][0],y=r[2][1],v=void 0!==l?l:r[2][2]
return(v*(h-c)*(u-g)+f*(h-p)*(u-y)+_*(h-m)*(u-d)-_*(h-c)*(u-y)-v*(h-p)*(u-d)-f*(h-m)*(u-g))/((h-c)*(u-g)+(h-p)*(u-y)+(h-m)*(u-d)-(h-c)*(u-y)-(h-p)*(u-d)-(h-m)*(u-g))}t.exports=r,t.exports.default=r},6411:function(t,e,i){"use strict"
var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=n(i(9555)),o=n(i(3703)),s=i(6303)
e.default=function(t,e,i){void 0===i&&(i={}),i.mask&&!i.units&&(i.units="kilometers")
for(var n=[],a=t[0],l=t[1],h=t[2],u=t[3],c=e/o.default([a,l],[h,l],i)*(h-a),d=e/o.default([a,l],[a,u],i)*(u-l),f=h-a,p=u-l,g=Math.floor(f/c),_=(p-Math.floor(p/d)*d)/2,m=a+(f-g*c)/2;m<=h;){for(var y=l+_;y<=u;){var v=s.point([m,y],i.properties)
i.mask?r.default(v,i.mask)&&n.push(v):n.push(v),y+=d}m+=c}return s.featureCollection(n)}},2099:(t,e,i)=>{"use strict"
var n=i(2107),r=i(6731),o=i(1891),s=i(2015),a=i(6303)
function l(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var h=l(n),u=l(r),c=l(o),d=l(s)
function f(t){for(var e=function(t){return"FeatureCollection"!==t.type?"Feature"!==t.type?a.featureCollection([a.feature(t)]):a.featureCollection([t]):t}(t),i=u.default(e),n=!1,r=0;!n&&r<e.features.length;){var o,s=e.features[r].geometry,l=!1
if("Point"===s.type)i.geometry.coordinates[0]===s.coordinates[0]&&i.geometry.coordinates[1]===s.coordinates[1]&&(n=!0)
else if("MultiPoint"===s.type){var f=!1
for(o=0;!f&&o<s.coordinates.length;)i.geometry.coordinates[0]===s.coordinates[o][0]&&i.geometry.coordinates[1]===s.coordinates[o][1]&&(n=!0,f=!0),o++}else if("LineString"===s.type)for(o=0;!l&&o<s.coordinates.length-1;)p(i.geometry.coordinates[0],i.geometry.coordinates[1],s.coordinates[o][0],s.coordinates[o][1],s.coordinates[o+1][0],s.coordinates[o+1][1])&&(l=!0,n=!0),o++
else if("MultiLineString"===s.type)for(var g=0;g<s.coordinates.length;){l=!1,o=0
for(var _=s.coordinates[g];!l&&o<_.length-1;)p(i.geometry.coordinates[0],i.geometry.coordinates[1],_[o][0],_[o][1],_[o+1][0],_[o+1][1])&&(l=!0,n=!0),o++
g++}else"Polygon"!==s.type&&"MultiPolygon"!==s.type||d.default(i,s)&&(n=!0)
r++}if(n)return i
var m=a.featureCollection([])
for(r=0;r<e.features.length;r++)m.features=m.features.concat(h.default(e.features[r]).features)
return a.point(c.default(i,m).geometry.coordinates)}function p(t,e,i,n,r,o){return Math.sqrt((r-i)*(r-i)+(o-n)*(o-n))===Math.sqrt((t-i)*(t-i)+(e-n)*(e-n))+Math.sqrt((r-t)*(r-t)+(o-e)*(o-e))}t.exports=f,t.exports.default=f},6287:function(t,e,i){"use strict"
var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=n(i(3703)),o=i(6303),s=i(2317),a=i(9611),l=n(i(4611))
function h(t,e){return t[0]*e[0]+t[1]*e[1]}function u(t,e,i){return"planar"===i.method?l.default(t,e,i):r.default(t,e,i)}e.default=function(t,e,i){if(void 0===i&&(i={}),i.method||(i.method="geodesic"),i.units||(i.units="kilometers"),!t)throw new Error("pt is required")
if(Array.isArray(t)?t=o.point(t):"Point"===t.type?t=o.feature(t):s.featureOf(t,"Point","point"),!e)throw new Error("line is required")
Array.isArray(e)?e=o.lineString(e):"LineString"===e.type?e=o.feature(e):s.featureOf(e,"LineString","line")
var n=1/0,r=t.geometry.coordinates
return a.segmentEach(e,(function(t){var e=t.geometry.coordinates[0],o=t.geometry.coordinates[1],s=function(t,e,i,n){var r=[i[0]-e[0],i[1]-e[1]],o=h([t[0]-e[0],t[1]-e[1]],r)
if(o<=0)return u(t,e,{method:n.method,units:"degrees"})
var s=h(r,r)
if(s<=o)return u(t,i,{method:n.method,units:"degrees"})
var a=o/s
return u(t,[e[0]+a*r[0],e[1]+a*r[1]],{method:n.method,units:"degrees"})}(r,e,o,i)
s<n&&(n=s)})),o.convertLength(n,"degrees",i.units)}},4457:(t,e,i)=>{"use strict"
var n=i(2015),r=i(6303),o=i(9611)
var s=function(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}(n)
function a(t,e){var i=[]
return o.featureEach(t,(function(t){var n=!1
if("Point"===t.geometry.type)o.geomEach(e,(function(e){s.default(t,e)&&(n=!0)})),n&&i.push(t)
else{if("MultiPoint"!==t.geometry.type)throw new Error("Input geometry must be a Point or MultiPoint")
var a=[]
o.geomEach(e,(function(e){o.coordEach(t,(function(t){s.default(t,e)&&(n=!0,a.push(t))}))})),n&&i.push(r.multiPoint(a))}})),r.featureCollection(i)}t.exports=a,t.exports.default=a},7431:(t,e,i)=>{"use strict"
var n=i(9611),r=i(6303)
function o(t,e){var i=[],o=e.iterations||1
if(!t)throw new Error("inputPolys is required")
return n.geomEach(t,(function(t,e,n){var l,h,u
switch(t.type){case"Polygon":l=[[]]
for(var c=0;c<o;c++)u=[[]],h=t,c>0&&(h=r.polygon(l).geometry),s(h,u),l=u.slice(0)
i.push(r.polygon(l,n))
break
case"MultiPolygon":l=[[[]]]
for(var d=0;d<o;d++)u=[[[]]],h=t,d>0&&(h=r.multiPolygon(l).geometry),a(h,u),l=u.slice(0)
i.push(r.multiPolygon(l,n))
break
default:throw new Error("geometry is invalid, must be Polygon or MultiPolygon")}})),r.featureCollection(i)}function s(t,e){var i=0,r=0
n.coordEach(t,(function(n,o,s,a,l){l>i&&(i=l,r=o,e.push([]))
var h=o-r,u=t.coordinates[l][h+1],c=n[0],d=n[1],f=u[0],p=u[1]
e[l].push([.75*c+.25*f,.75*d+.25*p]),e[l].push([.25*c+.75*f,.25*d+.75*p])}),!0),e.forEach((function(t){t.push(t[0])}))}function a(t,e){var i=0,r=0,o=0
n.coordEach(t,(function(n,s,a,l,h){l>o&&(o=l,r=s,e.push([[]])),h>i&&(i=h,r=s,e[l].push([]))
var u=s-r,c=t.coordinates[l][h][u+1],d=n[0],f=n[1],p=c[0],g=c[1]
e[l][h].push([.75*d+.25*p,.75*f+.25*g]),e[l][h].push([.25*d+.75*p,.25*f+.75*g])}),!0),e.forEach((function(t){t.forEach((function(t){t.push(t[0])}))}))}t.exports=o,t.exports.default=o},3083:(t,e,i)=>{"use strict"
var n=i(2317),r=i(6303),o=i(463),s=i(2107),a=i(1891)
function l(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var h=l(o),u=l(s),c=l(a)
function d(t,e){var i,o,s,a,l=n.getCoords(t),d=n.getCoords(e),g=h.default(e),_=0,m=null
switch(l[0]>g[0]&&l[0]<g[2]&&l[1]>g[1]&&l[1]<g[3]&&(_=(m=c.default(t,u.default(e))).properties.featureIndex),n.getType(e)){case"Polygon":i=d[0][_],o=d[0][0],null!==m&&m.geometry.coordinates[1]<l[1]&&(o=d[0][_]),a=p(d[0][0],d[0][d[0].length-1],l)
var y=f(d[0],l,a,s,i,o)
i=y[0],o=y[1]
break
case"MultiPolygon":for(var v=0,x=0,b=0,w=0;w<d[0].length;w++){v=w
for(var E=!1,S=0;S<d[0][w].length;S++){if(x=S,b===_){E=!0
break}b++}if(E)break}i=d[0][v][x],o=d[0][v][x],a=p(d[0][0][0],d[0][0][d[0][0].length-1],l),d.forEach((function(t){var e=f(t[0],l,a,s,i,o)
i=e[0],o=e[1]}))}return r.featureCollection([r.point(i),r.point(o)])}function f(t,e,i,n,r,o){for(var s=0;s<t.length;s++){var a=t[s],l=t[s+1]
s===t.length-1&&(l=t[0]),n=p(a,l,e),i<=0&&n>0?p(e,a,r)<0||(r=a):i>0&&n<=0&&(p(e,a,o)>0||(o=a)),i=n}return[r,o]}function p(t,e,i){return(e[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(e[1]-t[1])}t.exports=d,t.exports.default=d},3799:(t,e,i)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var n=i(6303),r=i(2317)
function o(t,e){return void 0===e&&(e={}),a(r.getGeom(t).coordinates,e.properties?e.properties:"Feature"===t.type?t.properties:{})}function s(t,e){void 0===e&&(e={})
var i=r.getGeom(t).coordinates,o=e.properties?e.properties:"Feature"===t.type?t.properties:{},s=[]
return i.forEach((function(t){s.push(a(t,o))})),n.featureCollection(s)}function a(t,e){return t.length>1?n.multiLineString(t,e):n.lineString(t[0],e)}e.default=function(t,e){void 0===e&&(e={})
var i=r.getGeom(t)
switch(e.properties||"Feature"!==t.type||(e.properties=t.properties),i.type){case"Polygon":return o(i,e)
case"MultiPolygon":return s(i,e)
default:throw new Error("invalid poly")}},e.polygonToLine=o,e.multiPolygonToLine=s,e.coordsToLine=a},2599:function(t,e,i){"use strict"
var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=i(6303),o=n(i(8463)),s=n(i(7060))
e.default=function(t){var e=o.default.fromGeoJson(t)
e.deleteDangles(),e.deleteCutEdges()
var i=[],n=[]
return e.getEdgeRings().filter((function(t){return t.isValid()})).forEach((function(t){t.isHole()?i.push(t):n.push(t)})),i.forEach((function(t){s.default.findEdgeRingContaining(t,n)&&n.push(t)})),r.featureCollection(n.map((function(t){return t.toPolygon()})))}},5946:(t,e,i)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var n=i(6303),r=i(9319),o=function(){function t(t,e){this.from=t,this.to=e,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return t.prototype.getSymetric=function(){return this.symetric||(this.symetric=new t(this.to,this.from),this.symetric.symetric=this),this.symetric},t.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},t.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},t.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},t.prototype.toLineString=function(){return n.lineString([this.from.coordinates,this.to.coordinates])},t.prototype.compareTo=function(t){return r.orientationIndex(t.from.coordinates,t.to.coordinates,this.to.coordinates)},t}()
e.default=o},7060:function(t,e,i){"use strict"
var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=i(9319),o=i(6303),s=n(i(1167)),a=n(i(2015)),l=function(){function t(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return t.prototype.push=function(t){this.edges.push(t),this.polygon=this.envelope=void 0},t.prototype.get=function(t){return this.edges[t]},Object.defineProperty(t.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.edges.forEach(t)},t.prototype.map=function(t){return this.edges.map(t)},t.prototype.some=function(t){return this.edges.some(t)},t.prototype.isValid=function(){return!0},t.prototype.isHole=function(){var t=this,e=this.edges.reduce((function(e,i,n){return i.from.coordinates[1]>t.edges[e].from.coordinates[1]&&(e=n),e}),0),i=(0===e?this.length:e)-1,n=(e+1)%this.length,o=r.orientationIndex(this.edges[i].from.coordinates,this.edges[e].from.coordinates,this.edges[n].from.coordinates)
return 0===o?this.edges[i].from.coordinates[0]>this.edges[n].from.coordinates[0]:o>0},t.prototype.toMultiPoint=function(){return o.multiPoint(this.edges.map((function(t){return t.from.coordinates})))},t.prototype.toPolygon=function(){if(this.polygon)return this.polygon
var t=this.edges.map((function(t){return t.from.coordinates}))
return t.push(this.edges[0].from.coordinates),this.polygon=o.polygon([t])},t.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=s.default(this.toPolygon())},t.findEdgeRingContaining=function(t,e){var i,n,s=t.getEnvelope()
return e.forEach((function(e){var a=e.getEnvelope()
if(n&&(i=n.getEnvelope()),!r.envelopeIsEqual(a,s)&&r.envelopeContains(a,s)){for(var l=t.map((function(t){return t.from.coordinates})),h=void 0,u=function(t){e.some((function(e){return r.coordinatesEqual(t,e.from.coordinates)}))||(h=t)},c=0,d=l;c<d.length;c++)u(d[c])
h&&e.inside(o.point(h))&&(n&&!r.envelopeContains(i,a)||(n=e))}})),n},t.prototype.inside=function(t){return a.default(t,this.toPolygon())},t}()
e.default=l},8463:function(t,e,i){"use strict"
var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=n(i(7495)),o=n(i(5946)),s=n(i(7060)),a=i(9611),l=i(2317),h=function(){function t(){this.edges=[],this.nodes={}}return t.fromGeoJson=function(e){!function(t){if(!t)throw new Error("No geojson passed")
if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw new Error("Invalid input type '"+t.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(e)
var i=new t
return a.flattenEach(e,(function(t){l.featureOf(t,"LineString","Graph::fromGeoJson"),a.coordReduce(t,(function(t,e){if(t){var n=i.getNode(t),r=i.getNode(e)
i.addEdge(n,r)}return e}))})),i},t.prototype.getNode=function(t){var e=r.default.buildId(t),i=this.nodes[e]
return i||(i=this.nodes[e]=new r.default(t)),i},t.prototype.addEdge=function(t,e){var i=new o.default(t,e),n=i.getSymetric()
this.edges.push(i),this.edges.push(n)},t.prototype.deleteDangles=function(){var t=this
Object.keys(this.nodes).map((function(e){return t.nodes[e]})).forEach((function(e){return t._removeIfDangle(e)}))},t.prototype._removeIfDangle=function(t){var e=this
if(t.innerEdges.length<=1){var i=t.getOuterEdges().map((function(t){return t.to}))
this.removeNode(t),i.forEach((function(t){return e._removeIfDangle(t)}))}},t.prototype.deleteCutEdges=function(){var t=this
this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach((function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))}))},t.prototype._computeNextCWEdges=function(t){var e=this
void 0===t?Object.keys(this.nodes).forEach((function(t){return e._computeNextCWEdges(e.nodes[t])})):t.getOuterEdges().forEach((function(e,i){t.getOuterEdge((0===i?t.getOuterEdges().length:i)-1).symetric.next=e}))},t.prototype._computeNextCCWEdges=function(t,e){for(var i,n,r=t.getOuterEdges(),o=r.length-1;o>=0;--o){var s=r[o],a=s.symetric,l=void 0,h=void 0
s.label===e&&(l=s),a.label===e&&(h=a),l&&h&&(h&&(n=h),l&&(n&&(n.next=l,n=void 0),i||(i=l)))}n&&(n.next=i)},t.prototype._findLabeledEdgeRings=function(){var t=[],e=0
return this.edges.forEach((function(i){if(!(i.label>=0)){t.push(i)
var n=i
do{n.label=e,n=n.next}while(!i.isEqual(n))
e++}})),t},t.prototype.getEdgeRings=function(){var t=this
this._computeNextCWEdges(),this.edges.forEach((function(t){t.label=void 0})),this._findLabeledEdgeRings().forEach((function(e){t._findIntersectionNodes(e).forEach((function(i){t._computeNextCCWEdges(i,e.label)}))}))
var e=[]
return this.edges.forEach((function(i){i.ring||e.push(t._findEdgeRing(i))})),e},t.prototype._findIntersectionNodes=function(t){var e=[],i=t,n=function(){var n=0
i.from.getOuterEdges().forEach((function(e){e.label===t.label&&++n})),n>1&&e.push(i.from),i=i.next}
do{n()}while(!t.isEqual(i))
return e},t.prototype._findEdgeRing=function(t){var e=t,i=new s.default
do{i.push(e),e.ring=i,e=e.next}while(!t.isEqual(e))
return i},t.prototype.removeNode=function(t){var e=this
t.getOuterEdges().forEach((function(t){return e.removeEdge(t)})),t.innerEdges.forEach((function(t){return e.removeEdge(t)})),delete this.nodes[t.id]},t.prototype.removeEdge=function(t){this.edges=this.edges.filter((function(e){return!e.isEqual(t)})),t.deleteEdge()},t}()
e.default=h},7495:(t,e,i)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var n=i(9319),r=function(){function t(e){this.id=t.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return t.buildId=function(t){return t.join(",")},t.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter((function(e){return e.from.id!==t.from.id}))},t.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter((function(e){return e.to.id!==t.to.id}))},t.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},t.prototype.sortOuterEdges=function(){var t=this
this.outerEdgesSorted||(this.outerEdges.sort((function(e,i){var r=e.to,o=i.to
if(r.coordinates[0]-t.coordinates[0]>=0&&o.coordinates[0]-t.coordinates[0]<0)return 1
if(r.coordinates[0]-t.coordinates[0]<0&&o.coordinates[0]-t.coordinates[0]>=0)return-1
if(r.coordinates[0]-t.coordinates[0]==0&&o.coordinates[0]-t.coordinates[0]==0)return r.coordinates[1]-t.coordinates[1]>=0||o.coordinates[1]-t.coordinates[1]>=0?r.coordinates[1]-o.coordinates[1]:o.coordinates[1]-r.coordinates[1]
var s=n.orientationIndex(t.coordinates,r.coordinates,o.coordinates)
return s<0?1:s>0?-1:Math.pow(r.coordinates[0]-t.coordinates[0],2)+Math.pow(r.coordinates[1]-t.coordinates[1],2)-(Math.pow(o.coordinates[0]-t.coordinates[0],2)+Math.pow(o.coordinates[1]-t.coordinates[1],2))})),this.outerEdgesSorted=!0)},t.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},t.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},t.prototype.addInnerEdge=function(t){this.innerEdges.push(t)},t}()
e.default=r},9319:function(t,e,i){"use strict"
var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=n(i(2015)),o=i(6303)
e.orientationIndex=function(t,e,i){var n,r=e[0]-t[0],o=e[1]-t[1],s=i[0]-e[0]
return((n=r*(i[1]-e[1])-s*o)>0)-(n<0)||+n},e.envelopeIsEqual=function(t,e){var i=t.geometry.coordinates[0].map((function(t){return t[0]})),n=t.geometry.coordinates[0].map((function(t){return t[1]})),r=e.geometry.coordinates[0].map((function(t){return t[0]})),o=e.geometry.coordinates[0].map((function(t){return t[1]}))
return Math.max.apply(null,i)===Math.max.apply(null,r)&&Math.max.apply(null,n)===Math.max.apply(null,o)&&Math.min.apply(null,i)===Math.min.apply(null,r)&&Math.min.apply(null,n)===Math.min.apply(null,o)},e.envelopeContains=function(t,e){return e.geometry.coordinates[0].every((function(e){return r.default(o.point(e),t)}))},e.coordinatesEqual=function(t,e){return t[0]===e[0]&&t[1]===e[1]}},4939:function(t,e,i){"use strict"
var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=i(9611),o=i(6303),s=n(i(7051))
function a(t,e,i){void 0===i&&(i={})
var n=(i=i||{}).mutate
if(!t)throw new Error("geojson is required")
return Array.isArray(t)&&o.isNumber(t[0])?t="mercator"===e?l(t):h(t):(!0!==n&&(t=s.default(t)),r.coordEach(t,(function(t){var i="mercator"===e?l(t):h(t)
t[0]=i[0],t[1]=i[1]}))),t}function l(t){var e,i=Math.PI/180,n=6378137,r=20037508.342789244,o=[n*(Math.abs(t[0])<=180?t[0]:t[0]-360*((e=t[0])<0?-1:e>0?1:0))*i,n*Math.log(Math.tan(.25*Math.PI+.5*t[1]*i))]
return o[0]>r&&(o[0]=r),o[0]<-r&&(o[0]=-r),o[1]>r&&(o[1]=r),o[1]<-r&&(o[1]=-r),o}function h(t){var e=180/Math.PI,i=6378137
return[t[0]*e/i,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/i)))*e]}e.toMercator=function(t,e){return void 0===e&&(e={}),a(t,"mercator",e)},e.toWgs84=function(t,e){return void 0===e&&(e={}),a(t,"wgs84",e)}},6543:function(t,e,i){"use strict"
var n=this&&this.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length
var n=Array(t),r=0
for(e=0;e<i;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,r++)n[r]=o[s]
return n}
Object.defineProperty(e,"__esModule",{value:!0})
var r=i(6303)
function o(t){return Array.isArray(t)?a(t):t&&t.bbox?a(t.bbox):[360*s(),180*s()]}function s(){return Math.random()-.5}function a(t){return[Math.random()*(t[2]-t[0])+t[0],Math.random()*(t[3]-t[1])+t[1]]}e.randomPosition=o,e.randomPoint=function(t,e){void 0===e&&(e={}),null==t&&(t=1)
for(var i=[],n=0;n<t;n++)i.push(r.point(o(e.bbox)))
return r.featureCollection(i)},e.randomPolygon=function(t,e){void 0===e&&(e={}),null==t&&(t=1),r.isNumber(e.num_vertices)&&void 0!==e.num_vertices||(e.num_vertices=10),r.isNumber(e.max_radial_length)&&void 0!==e.max_radial_length||(e.max_radial_length=10)
for(var i=[],s=function(t){var s,a=[],l=n(Array(e.num_vertices+1)).map(Math.random)
l.forEach((function(t,e,i){i[e]=e>0?t+i[e-1]:t})),l.forEach((function(t){t=2*t*Math.PI/l[l.length-1]
var i=Math.random()
a.push([i*(e.max_radial_length||10)*Math.sin(t),i*(e.max_radial_length||10)*Math.cos(t)])})),a[a.length-1]=a[0],a=a.map((s=o(e.bbox),function(t){return[t[0]+s[0],t[1]+s[1]]})),i.push(r.polygon([a]))},a=0;a<t;a++)s()
return r.featureCollection(i)},e.randomLineString=function(t,e){if(void 0===e&&(e={}),e=e||{},!r.isObject(e))throw new Error("options is invalid")
var i=e.bbox,n=e.num_vertices,s=e.max_length,a=e.max_rotation
null==t&&(t=1),(!r.isNumber(n)||void 0===n||n<2)&&(n=10),r.isNumber(s)&&void 0!==s||(s=1e-4),r.isNumber(a)&&void 0!==a||(a=Math.PI/8)
for(var l=[],h=0;h<t;h++){for(var u=[o(i)],c=0;c<n-1;c++){var d=(0===c?2*Math.random()*Math.PI:Math.tan((u[c][1]-u[c-1][1])/(u[c][0]-u[c-1][0])))+(Math.random()-.5)*a*2,f=Math.random()*s
u.push([u[c][0]+f*Math.cos(d),u[c][1]+f*Math.sin(d)])}l.push(r.lineString(u))}return r.featureCollection(l)}},5851:function(t,e,i){"use strict"
var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=n(i(7323)),o=n(i(3703)),s=i(6303)
e.default=function(t,e,i,n){void 0===n&&(n={})
for(var a=[],l=t[0],h=t[1],u=t[2],c=t[3],d=e/o.default([l,h],[u,h],n)*(u-l),f=i/o.default([l,h],[l,c],n)*(c-h),p=u-l,g=c-h,_=Math.floor(p/d),m=Math.floor(g/f),y=(g-m*f)/2,v=l+(p-_*d)/2,x=0;x<_;x++){for(var b=h+y,w=0;w<m;w++){var E=s.polygon([[[v,b],[v,b+f],[v+d,b+f],[v+d,b],[v,b]]],n.properties)
n.mask?r.default(n.mask,E)&&a.push(E):a.push(E),b+=f}v+=d}return s.featureCollection(a)}},6127:(t,e,i)=>{"use strict"
var n=i(7051),r=i(8467),o=i(9611),s=i(2317),a=i(6303)
function l(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var h=l(n),u=l(r)
function c(t,e){if(e=e||{},!a.isObject(e))throw new Error("options is invalid")
var i=e.reverse||!1,n=e.mutate||!1
if(!t)throw new Error("<geojson> is required")
if("boolean"!=typeof i)throw new Error("<reverse> must be a boolean")
if("boolean"!=typeof n)throw new Error("<mutate> must be a boolean")
!1===n&&(t=h.default(t))
var r=[]
switch(t.type){case"GeometryCollection":return o.geomEach(t,(function(t){d(t,i)})),t
case"FeatureCollection":return o.featureEach(t,(function(t){o.featureEach(d(t,i),(function(t){r.push(t)}))})),a.featureCollection(r)}return d(t,i)}function d(t,e){switch("Feature"===t.type?t.geometry.type:t.type){case"GeometryCollection":return o.geomEach(t,(function(t){d(t,e)})),t
case"LineString":return f(s.getCoords(t),e),t
case"Polygon":return p(s.getCoords(t),e),t
case"MultiLineString":return s.getCoords(t).forEach((function(t){f(t,e)})),t
case"MultiPolygon":return s.getCoords(t).forEach((function(t){p(t,e)})),t
case"Point":case"MultiPoint":return t}}function f(t,e){u.default(t)===e&&t.reverse()}function p(t,e){u.default(t[0])!==e&&t[0].reverse()
for(var i=1;i<t.length;i++)u.default(t[i])===e&&t[i].reverse()}t.exports=c,t.exports.default=c},8975:(t,e,i)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var n=i(6303),r=i(2317)
function o(t,e){var i=n.degreesToRadians(t[1]),r=n.degreesToRadians(e[1]),o=n.degreesToRadians(e[0]-t[0])
o>Math.PI&&(o-=2*Math.PI),o<-Math.PI&&(o+=2*Math.PI)
var s=Math.log(Math.tan(r/2+Math.PI/4)/Math.tan(i/2+Math.PI/4)),a=Math.atan2(o,s)
return(n.radiansToDegrees(a)+360)%360}e.default=function(t,e,i){var n
return void 0===i&&(i={}),(n=i.final?o(r.getCoord(e),r.getCoord(t)):o(r.getCoord(t),r.getCoord(e)))>180?-(360-n):n}},7099:(t,e,i)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var n=i(6303),r=i(2317)
e.default=function(t,e,i,o){void 0===o&&(o={})
var s=e<0,a=n.convertLength(Math.abs(e),o.units,"meters")
s&&(a=-Math.abs(a))
var l=r.getCoord(t),h=function(t,e,i,r){var o=e/(r=void 0===r?n.earthRadius:Number(r)),s=t[0]*Math.PI/180,a=n.degreesToRadians(t[1]),l=n.degreesToRadians(i),h=o*Math.cos(l),u=a+h
Math.abs(u)>Math.PI/2&&(u=u>0?Math.PI-u:-Math.PI-u)
var c=Math.log(Math.tan(u/2+Math.PI/4)/Math.tan(a/2+Math.PI/4)),d=Math.abs(c)>1e-11?h/c:Math.cos(a)
return[(180*(s+o*Math.sin(l)/d)/Math.PI+540)%360-180,180*u/Math.PI]}(l,a,i)
return h[0]+=h[0]-l[0]>180?-360:l[0]-h[0]>180?360:0,n.point(h,o.properties)}},4611:(t,e,i)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var n=i(6303),r=i(2317)
e.default=function(t,e,i){void 0===i&&(i={})
var o=r.getCoord(t),s=r.getCoord(e)
s[0]+=s[0]-o[0]>180?-360:o[0]-s[0]>180?360:0
var a=function(t,e,i){var r=i=void 0===i?n.earthRadius:Number(i),o=t[1]*Math.PI/180,s=e[1]*Math.PI/180,a=s-o,l=Math.abs(e[0]-t[0])*Math.PI/180
l>Math.PI&&(l-=2*Math.PI)
var h=Math.log(Math.tan(s/2+Math.PI/4)/Math.tan(o/2+Math.PI/4)),u=Math.abs(h)>1e-11?a/h:Math.cos(o)
return Math.sqrt(a*a+u*u*l*l)*r}(o,s)
return n.convertLength(a,"meters",i.units)}},3175:(t,e,i)=>{"use strict"
var n=i(6303)
function r(t,e){if(!t)throw new Error("featurecollection is required")
if(null==e)throw new Error("num is required")
if("number"!=typeof e)throw new Error("num must be a number")
return n.featureCollection(function(t,e){for(var i,n,r=t.slice(0),o=t.length,s=o-e;o-- >s;)i=r[n=Math.floor((o+1)*Math.random())],r[n]=r[o],r[o]=i
return r.slice(s)}(t.features,e))}t.exports=r,t.exports.default=r},6819:(t,e,i)=>{"use strict"
var n=i(7651),r=i(5559),o=i(9611),s=i(6303),a=i(2317)
function l(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var h=l(n),u=l(r)
function c(t,e,i,n,r){if(r=r||{},!s.isObject(r))throw new Error("options is invalid")
var l=r.properties
if(!t)throw new Error("center is required")
if(null==i)throw new Error("bearing1 is required")
if(null==n)throw new Error("bearing2 is required")
if(!e)throw new Error("radius is required")
if("object"!=typeof r)throw new Error("options must be an object")
if(d(i)===d(n))return h.default(t,e,r)
var c=a.getCoords(t),f=u.default(t,e,i,n,r),p=[[c]]
return o.coordEach(f,(function(t){p[0].push(t)})),p[0].push(c),s.polygon(p,l)}function d(t){var e=t%360
return e<0&&(e+=360),e}t.exports=c,t.exports.default=c},4217:(t,e,i)=>{"use strict"
var n=i(463),r=i(2015),o=i(3703),s=i(4067),a=i(2707),l=i(3779),h=i(2317),u=i(6303)
function c(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var d=c(n),f=c(r),p=c(o),g=c(s),_=c(a),m=c(l)
function y(t){for(var e=t,i=[];e.parent;)i.unshift(e),e=e.parent
return i}var v={search:function(t,e,i,n){t.cleanDirty()
var r=(n=n||{}).heuristic||v.heuristics.manhattan,o=n.closest||!1,s=new w((function(t){return t.f})),a=e
for(e.h=r(e,i),s.push(e);s.size()>0;){var l=s.pop()
if(l===i)return y(l)
l.closed=!0
for(var h=t.neighbors(l),u=0,c=h.length;u<c;++u){var d=h[u]
if(!d.closed&&!d.isWall()){var f=l.g+d.getCost(l),p=d.visited;(!p||f<d.g)&&(d.visited=!0,d.parent=l,d.h=d.h||r(d,i),d.g=f,d.f=d.g+d.h,t.markDirty(d),o&&(d.h<a.h||d.h===a.h&&d.g<a.g)&&(a=d),p?s.rescoreElement(d):s.push(d))}}}return o?y(a):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var i=Math.sqrt(2),n=Math.abs(e.x-t.x),r=Math.abs(e.y-t.y)
return 1*(n+r)+(i-2)*Math.min(n,r)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}}
function x(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[]
for(var i=0;i<t.length;i++){this.grid[i]=[]
for(var n=0,r=t[i];n<r.length;n++){var o=new b(i,n,r[n])
this.grid[i][n]=o,this.nodes.push(o)}}this.init()}function b(t,e,i){this.x=t,this.y=e,this.weight=i}function w(t){this.content=[],this.scoreFunction=t}function E(t,e,i){if(i=i||{},!u.isObject(i))throw new Error("options is invalid")
var n=i.resolution,r=i.minDistance,o=i.obstacles||u.featureCollection([])
if(!t)throw new Error("start is required")
if(!e)throw new Error("end is required")
if(n&&!u.isNumber(n)||n<=0)throw new Error("options.resolution must be a number, greater than 0")
if(r)throw new Error("options.minDistance is not yet implemented")
var s=h.getCoord(t),a=h.getCoord(e)
switch(t=u.point(s),e=u.point(a),h.getType(o)){case"FeatureCollection":if(0===o.features.length)return u.lineString([s,a])
break
case"Polygon":o=u.featureCollection([u.feature(h.getGeom(o))])
break
default:throw new Error("invalid obstacles")}var l=o
l.features.push(t),l.features.push(e)
var c=d.default(g.default(m.default(d.default(l)),1.15))
n||(n=p.default([c[0],c[1]],[c[2],c[1]],i)/100),l.features.pop(),l.features.pop()
for(var f=c[0],y=c[1],b=c[2],w=c[3],E=n/p.default([f,y],[b,y],i)*(b-f),C=n/p.default([f,y],[f,w],i)*(w-y),P=b-f,T=w-y,I=Math.floor(P/E),M=Math.floor(T/C),A=(P-I*E)/2,R=[],L=[],O=[],D=[],N=1/0,F=1/0,k=w-(T-M*C)/2,z=0;k>=y;){for(var j=[],G=[],B=f+A,U=0;B<=b;){var q=u.point([B,k]),V=S(q,o)
j.push(V?0:1),G.push(B+"|"+k)
var Z=p.default(q,t)
!V&&Z<N&&(N=Z,O={x:U,y:z})
var W=p.default(q,e)
!V&&W<F&&(F=W,D={x:U,y:z}),B+=E,U++}L.push(j),R.push(G),k-=C,z++}var Y=new x(L,{diagonal:!0}),X=Y.grid[O.y][O.x],H=Y.grid[D.y][D.x],$=v.search(Y,X,H),K=[s]
return $.forEach((function(t){var e=R[t.x][t.y].split("|")
K.push([+e[0],+e[1]])})),K.push(a),_.default(u.lineString(K))}function S(t,e){for(var i=0;i<e.features.length;i++)if(f.default(t,e.features[i]))return!0
return!1}x.prototype.init=function(){this.dirtyNodes=[]
for(var t=0;t<this.nodes.length;t++)v.cleanNode(this.nodes[t])},x.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)v.cleanNode(this.dirtyNodes[t])
this.dirtyNodes=[]},x.prototype.markDirty=function(t){this.dirtyNodes.push(t)},x.prototype.neighbors=function(t){var e=[],i=t.x,n=t.y,r=this.grid
return r[i-1]&&r[i-1][n]&&e.push(r[i-1][n]),r[i+1]&&r[i+1][n]&&e.push(r[i+1][n]),r[i]&&r[i][n-1]&&e.push(r[i][n-1]),r[i]&&r[i][n+1]&&e.push(r[i][n+1]),this.diagonal&&(r[i-1]&&r[i-1][n-1]&&e.push(r[i-1][n-1]),r[i+1]&&r[i+1][n-1]&&e.push(r[i+1][n-1]),r[i-1]&&r[i-1][n+1]&&e.push(r[i-1][n+1]),r[i+1]&&r[i+1][n+1]&&e.push(r[i+1][n+1])),e},x.prototype.toString=function(){for(var t,e,i,n,r=[],o=this.grid,s=0,a=o.length;s<a;s++){for(t=[],i=0,n=(e=o[s]).length;i<n;i++)t.push(e[i].weight)
r.push(t.join(" "))}return r.join("\n")},b.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},b.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},b.prototype.isWall=function(){return 0===this.weight},w.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop()
return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),i=this.content.pop()
e!==this.content.length-1&&(this.content[e]=i,this.scoreFunction(i)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var i=(t+1>>1)-1,n=this.content[i]
if(!(this.scoreFunction(e)<this.scoreFunction(n)))break
this.content[i]=e,this.content[t]=n,t=i}},bubbleUp:function(t){for(var e=this.content.length,i=this.content[t],n=this.scoreFunction(i);;){var r,o=t+1<<1,s=o-1,a=null
if(s<e){var l=this.content[s];(r=this.scoreFunction(l))<n&&(a=s)}if(o<e){var h=this.content[o]
this.scoreFunction(h)<(null===a?n:r)&&(a=o)}if(null===a)break
this.content[t]=this.content[a],this.content[a]=i,t=a}}},t.exports=E,t.exports.default=E},9467:(t,e,i)=>{"use strict"
var n=i(2707),r=i(7051),o=i(9611),s=i(6303)
function a(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var l=a(n),h=a(r)
function u(t,e,i){var n=e.x,r=e.y,o=i.x-n,s=i.y-r
if(0!==o||0!==s){var a=((t.x-n)*o+(t.y-r)*s)/(o*o+s*s)
a>1?(n=i.x,r=i.y):a>0&&(n+=o*a,r+=s*a)}return(o=t.x-n)*o+(s=t.y-r)*s}function c(t,e,i,n,r){for(var o,s=n,a=e+1;a<i;a++){var l=u(t[a],t[e],t[i])
l>s&&(o=a,s=l)}s>n&&(o-e>1&&c(t,e,o,n,r),r.push(t[o]),i-o>1&&c(t,o,i,n,r))}function d(t,e){var i=t.length-1,n=[t[0]]
return c(t,0,i,e,n),n.push(t[i]),n}function f(t,e,i){if(t.length<=2)return t
var n=void 0!==e?e*e:1
return t=i?t:function(t,e){for(var i,n,r,o,s,a=t[0],l=[a],h=1,u=t.length;h<u;h++)r=a,(o=(n=i=t[h]).x-r.x)*o+(s=n.y-r.y)*s>e&&(l.push(i),a=i)
return a!==i&&l.push(i),l}(t,n),d(t,n)}function p(t,e){if(e=e||{},!s.isObject(e))throw new Error("options is invalid")
var i=void 0!==e.tolerance?e.tolerance:1,n=e.highQuality||!1,r=e.mutate||!1
if(!t)throw new Error("geojson is required")
if(i&&i<0)throw new Error("invalid tolerance")
return!0!==r&&(t=h.default(t)),o.geomEach(t,(function(t){!function(t,e,i){var n=t.type
if("Point"===n||"MultiPoint"===n)return t
l.default(t,!0)
var r=t.coordinates
switch(n){case"LineString":t.coordinates=g(r,e,i)
break
case"MultiLineString":t.coordinates=r.map((function(t){return g(t,e,i)}))
break
case"Polygon":t.coordinates=_(r,e,i)
break
case"MultiPolygon":t.coordinates=r.map((function(t){return _(t,e,i)}))}}(t,i,n)})),t}function g(t,e,i){return f(t.map((function(t){return{x:t[0],y:t[1],z:t[2]}})),e,i).map((function(t){return t.z?[t.x,t.y,t.z]:[t.x,t.y]}))}function _(t,e,i){return t.map((function(t){var n=t.map((function(t){return{x:t[0],y:t[1]}}))
if(n.length<4)throw new Error("invalid polygon")
for(var r=f(n,e,i).map((function(t){return[t.x,t.y]}));!m(r);)r=f(n,e-=.01*e,i).map((function(t){return[t.x,t.y]}))
return r[r.length-1][0]===r[0][0]&&r[r.length-1][1]===r[0][1]||r.push(r[0]),r}))}function m(t){return!(t.length<3||3===t.length&&t[2][0]===t[0][0]&&t[2][1]===t[0][1])}t.exports=p,t.exports.default=p},993:function(t,e,i){"use strict"
var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=n(i(5851))
e.default=function(t,e,i){return void 0===i&&(i={}),r.default(t,e,e,i)}},2083:(t,e,i)=>{"use strict"
var n=function(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}(i(3703))
function r(t){var e=t[0],i=t[1],r=t[2],o=t[3]
if(n.default(t.slice(0,2),[r,i])>=n.default(t.slice(0,2),[e,o])){var s=(i+o)/2
return[e,s-(r-e)/2,r,s+(r-e)/2]}var a=(e+r)/2
return[a-(o-i)/2,i,a+(o-i)/2,o]}t.exports=r,t.exports.default=r},5379:(t,e,i)=>{"use strict"
var n=i(9611),r=i(2317),o=i(6303),s=i(3031),a=i(4457),l=i(4485)
function h(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var u=h(s),c=h(a),d=h(l)
function f(t,e){if(e=e||{},!o.isObject(e))throw new Error("options is invalid")
var i=e.steps||64,s=e.weight,a=e.properties||{}
if(!o.isNumber(i))throw new Error("steps must be a number")
if(!o.isObject(a))throw new Error("properties must be a number")
var l=n.coordAll(t).length,h=u.default(t,{weight:s}),f=0,g=0,_=0
n.featureEach(t,(function(t){var e=t.properties[s]||1,i=p(r.getCoords(t),r.getCoords(h))
f+=Math.pow(i.x,2)*e,g+=Math.pow(i.y,2)*e,_+=i.x*i.y*e}))
var m=f-g,y=Math.sqrt(Math.pow(m,2)+4*Math.pow(_,2)),v=2*_,x=Math.atan((m+y)/v),b=180*x/Math.PI,w=0,E=0,S=0
n.featureEach(t,(function(t){var e=t.properties[s]||1,i=p(r.getCoords(t),r.getCoords(h))
w+=Math.pow(i.x*Math.cos(x)-i.y*Math.sin(x),2)*e,E+=Math.pow(i.x*Math.sin(x)+i.y*Math.cos(x),2)*e,S+=e}))
var C=Math.sqrt(2*w/S),P=Math.sqrt(2*E/S),T=d.default(h,C,P,{units:"degrees",angle:b,steps:i,properties:a}),I=c.default(t,o.featureCollection([T])),M={meanCenterCoordinates:r.getCoords(h),semiMajorAxis:C,semiMinorAxis:P,numberOfFeatures:l,angle:b,percentageWithinEllipse:100*n.coordAll(I).length/l}
return T.properties.standardDeviationalEllipse=M,T}function p(t,e){return{x:t[0]-e[0],y:t[1]-e[1]}}t.exports=f,t.exports.default=f},877:(t,e,i)=>{"use strict"
var n=i(2015),r=i(7051),o=i(9611)
function s(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var a=s(n),l=s(r)
function h(t,e,i,n){return t=l.default(t),e=l.default(e),o.featureEach(t,(function(t){t.properties||(t.properties={}),o.featureEach(e,(function(e){void 0===t.properties[n]&&a.default(t,e)&&(t.properties[n]=e.properties[i])}))})),t}t.exports=h,t.exports.default=h},7817:(t,e,i)=>{"use strict"
var n=i(8992),r=i(6303)
var o=function(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}(n)
function s(t){if(!t.geometry||"Polygon"!==t.geometry.type&&"MultiPolygon"!==t.geometry.type)throw new Error("input must be a Polygon or MultiPolygon")
var e={type:"FeatureCollection",features:[]}
return"Polygon"===t.geometry.type?e.features=a(t.geometry.coordinates):t.geometry.coordinates.forEach((function(t){e.features=e.features.concat(a(t))})),e}function a(t){var e=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},n=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var s=0;s<e;s++)i.vertices.push(t[r][o][s])
r>0&&(n+=t[r-1].length,i.holes.push(n))}return i}(t),i=o.default(e.vertices,e.holes,2),n=[],s=[]
i.forEach((function(t,n){var r=i[n]
s.push([e.vertices[2*r],e.vertices[2*r+1]])}))
for(var a=0;a<s.length;a+=3){var l=s.slice(a,a+3)
l.push(s[a]),n.push(r.polygon([l]))}return n}t.exports=s,t.exports.default=s},1291:(t,e,i)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var n=i(6303)
e.default=function(t,e){var i=!1
return n.featureCollection(function(t){if(t.length<3)return[]
t.sort(o)
for(var e,i,n,a,l,h,u=t.length-1,c=t[u].x,d=t[0].x,f=t[u].y,p=f;u--;)t[u].y<f&&(f=t[u].y),t[u].y>p&&(p=t[u].y)
var g,_=d-c,m=p-f,y=_>m?_:m,v=.5*(d+c),x=.5*(p+f),b=[new r({__sentinel:!0,x:v-20*y,y:x-y},{__sentinel:!0,x:v,y:x+20*y},{__sentinel:!0,x:v+20*y,y:x-y})],w=[],E=[]
for(u=t.length;u--;){for(E.length=0,g=b.length;g--;)(_=t[u].x-b[g].x)>0&&_*_>b[g].r?(w.push(b[g]),b.splice(g,1)):_*_+(m=t[u].y-b[g].y)*m>b[g].r||(E.push(b[g].a,b[g].b,b[g].b,b[g].c,b[g].c,b[g].a),b.splice(g,1))
for(s(E),g=E.length;g;)i=E[--g],e=E[--g],n=t[u],a=i.x-e.x,l=i.y-e.y,h=2*(a*(n.y-i.y)-l*(n.x-i.x)),Math.abs(h)>1e-12&&b.push(new r(e,i,n))}for(Array.prototype.push.apply(w,b),u=w.length;u--;)(w[u].a.__sentinel||w[u].b.__sentinel||w[u].c.__sentinel)&&w.splice(u,1)
return w}(t.features.map((function(t){var n={x:t.geometry.coordinates[0],y:t.geometry.coordinates[1]}
return e?n.z=t.properties[e]:3===t.geometry.coordinates.length&&(i=!0,n.z=t.geometry.coordinates[2]),n}))).map((function(t){var e=[t.a.x,t.a.y],r=[t.b.x,t.b.y],o=[t.c.x,t.c.y],s={}
return i?(e.push(t.a.z),r.push(t.b.z),o.push(t.c.z)):s={a:t.a.z,b:t.b.z,c:t.c.z},n.polygon([[e,r,o,e]],s)})))}
var r=function(t,e,i){this.a=t,this.b=e,this.c=i
var n,r,o=e.x-t.x,s=e.y-t.y,a=i.x-t.x,l=i.y-t.y,h=o*(t.x+e.x)+s*(t.y+e.y),u=a*(t.x+i.x)+l*(t.y+i.y),c=2*(o*(i.y-e.y)-s*(i.x-e.x))
this.x=(l*h-s*u)/c,this.y=(o*u-a*h)/c,n=this.x-t.x,r=this.y-t.y,this.r=n*n+r*r}
function o(t,e){return e.x-t.x}function s(t){var e,i,n,r,o,s=t.length
t:for(;s;)for(i=t[--s],e=t[--s],n=s;n;)if(o=t[--n],e===(r=t[--n])&&i===o||e===o&&i===r){t.splice(s,2),t.splice(n,2),s-=2
continue t}}},9023:(t,e,i)=>{"use strict"
var n=i(5335),r=i(8975),o=i(4611),s=i(7099),a=i(7051),l=i(9611),h=i(2317),u=i(6303)
function c(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var d=c(n),f=c(r),p=c(o),g=c(s),_=c(a)
function m(t,e,i){if(i=i||{},!u.isObject(i))throw new Error("options is invalid")
var n=i.pivot,r=i.mutate
if(!t)throw new Error("geojson is required")
if(null==e||isNaN(e))throw new Error("angle is required")
return 0===e||(n||(n=d.default(t)),!1!==r&&void 0!==r||(t=_.default(t)),l.coordEach(t,(function(t){var i=f.default(n,t)+e,r=p.default(n,t),o=h.getCoords(g.default(n,r,i))
t[0]=o[0],t[1]=o[1]}))),t}t.exports=m,t.exports.default=m},4067:(t,e,i)=>{"use strict"
var n=i(7051),r=i(6731),o=i(5335),s=i(463),a=i(8975),l=i(4611),h=i(7099),u=i(9611),c=i(6303),d=i(2317)
function f(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var p=f(n),g=f(r),_=f(o),m=f(s),y=f(a),v=f(l),x=f(h)
function b(t,e,i){if(i=i||{},!c.isObject(i))throw new Error("options is invalid")
var n=i.origin,r=i.mutate
if(!t)throw new Error("geojson required")
if("number"!=typeof e||0===e)throw new Error("invalid factor")
var o=Array.isArray(n)||"object"==typeof n
return!0!==r&&(t=p.default(t)),"FeatureCollection"!==t.type||o?w(t,e,n):(u.featureEach(t,(function(i,r){t.features[r]=w(i,e,n)})),t)}function w(t,e,i){var n="Point"===d.getType(t)
return i=function(t,e){if(null==e&&(e="centroid"),Array.isArray(e)||"object"==typeof e)return d.getCoord(e)
var i=t.bbox?t.bbox:m.default(t),n=i[0],r=i[1],o=i[2],s=i[3]
switch(e){case"sw":case"southwest":case"westsouth":case"bottomleft":return c.point([n,r])
case"se":case"southeast":case"eastsouth":case"bottomright":return c.point([o,r])
case"nw":case"northwest":case"westnorth":case"topleft":return c.point([n,s])
case"ne":case"northeast":case"eastnorth":case"topright":return c.point([o,s])
case"center":return g.default(t)
case void 0:case null:case"centroid":return _.default(t)
default:throw new Error("invalid origin")}}(t,i),1===e||n||u.coordEach(t,(function(t){var n=v.default(i,t),r=y.default(i,t),o=n*e,s=d.getCoords(x.default(i,o,r))
t[0]=s[0],t[1]=s[1],3===t.length&&(t[2]*=e)})),t}t.exports=b,t.exports.default=b},8171:(t,e,i)=>{"use strict"
var n=i(9611),r=i(6303),o=i(2317),s=i(7051),a=i(7099)
function l(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var h=l(s),u=l(a)
function c(t,e,i,s){if(s=s||{},!r.isObject(s))throw new Error("options is invalid")
var a=s.units,l=s.zTranslation,c=s.mutate
if(!t)throw new Error("geojson is required")
if(null==e||isNaN(e))throw new Error("distance is required")
if(l&&"number"!=typeof l&&isNaN(l))throw new Error("zTranslation is not a number")
if(l=void 0!==l?l:0,0===e&&0===l)return t
if(null==i||isNaN(i))throw new Error("direction is required")
return e<0&&(e=-e,i+=180),!1!==c&&void 0!==c||(t=h.default(t)),n.coordEach(t,(function(t){var n=o.getCoords(u.default(t,e,i,{units:a}))
t[0]=n[0],t[1]=n[1],l&&3===t.length&&(t[2]+=l)})),t}t.exports=c,t.exports.default=c},4907:function(t,e,i){"use strict"
var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=n(i(3703)),o=n(i(5279)),s=i(6303)
e.default=function(t,e,i){void 0===i&&(i={})
for(var n=[],a=e/r.default([t[0],t[1]],[t[2],t[1]],i)*(t[2]-t[0]),l=e/r.default([t[0],t[1]],[t[0],t[3]],i)*(t[3]-t[1]),h=0,u=t[0];u<=t[2];){for(var c=0,d=t[1];d<=t[3];){var f=null,p=null
h%2==0&&c%2==0?(f=s.polygon([[[u,d],[u,d+l],[u+a,d],[u,d]]],i.properties),p=s.polygon([[[u,d+l],[u+a,d+l],[u+a,d],[u,d+l]]],i.properties)):h%2==0&&c%2==1?(f=s.polygon([[[u,d],[u+a,d+l],[u+a,d],[u,d]]],i.properties),p=s.polygon([[[u,d],[u,d+l],[u+a,d+l],[u,d]]],i.properties)):c%2==0&&h%2==1?(f=s.polygon([[[u,d],[u,d+l],[u+a,d+l],[u,d]]],i.properties),p=s.polygon([[[u,d],[u+a,d+l],[u+a,d],[u,d]]],i.properties)):c%2==1&&h%2==1&&(f=s.polygon([[[u,d],[u,d+l],[u+a,d],[u,d]]],i.properties),p=s.polygon([[[u,d+l],[u+a,d+l],[u+a,d],[u,d+l]]],i.properties)),i.mask?(o.default(i.mask,f)&&n.push(f),o.default(i.mask,p)&&n.push(p)):(n.push(f),n.push(p)),d+=l,c++}h++,u+=a}return s.featureCollection(n)}},9399:(t,e,i)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var n=i(9611)
e.default=function(t,e){void 0===e&&(e={})
var i=e.precision,r=e.coordinates,o=e.mutate
if(i=null==i||isNaN(i)?6:i,r=null==r||isNaN(r)?3:r,!t)throw new Error("<geojson> is required")
if("number"!=typeof i)throw new Error("<precision> must be a number")
if("number"!=typeof r)throw new Error("<coordinates> must be a number")
!1!==o&&void 0!==o||(t=JSON.parse(JSON.stringify(t)))
var s=Math.pow(10,i)
return n.coordEach(t,(function(t){!function(t,e,i){t.length>i&&t.splice(i,t.length)
for(var n=0;n<t.length;n++)t[n]=Math.round(t[n]*e)/e}(t,s,r)})),t}},4435:(t,e,i)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var n=i(3183),r=i(627),o=i(4457),s=i(8771),a=i(3657),l=i(1111),h=i(9467),u=i(6571),c=i(877),d=i(3175),f=i(1167),p=i(2083),g=i(7651),_=i(4371),m=i(6731),y=i(8331),v=i(5335),x=i(2887),b=i(3703),w=i(2107),E=i(463),S=i(7817),C=i(3779),P=i(2015),T=i(1891),I=i(8357),M=i(3697),A=i(4875),R=i(1291),L=i(2045),O=i(2165),D=i(9),N=i(2099),F=i(587),k=i(747),z=i(111),j=i(5499),G=i(3419),B=i(6411),U=i(9399),q=i(7365),V=i(7315),Z=i(239),W=i(9979),Y=i(7391),X=i(8735),H=i(5579),$=i(5559),K=i(3799),J=i(3643),Q=i(2733),tt=i(1055),et=i(6819),it=i(8975),nt=i(4611),rt=i(7099),ot=i(3083),st=i(6127),at=i(3751),lt=i(9023),ht=i(4067),ut=i(8171),ct=i(3865),dt=i(2599),ft=i(7899),pt=i(4931),gt=i(4303),_t=i(8467),mt=i(6669),yt=i(4537),vt=i(7567),xt=i(9555),bt=i(7323),wt=i(7051),Et=i(2707),St=i(831),Ct=i(835),Pt=i(6287),Tt=i(4003),It=i(4217),Mt=i(6246),At=i(4485),Rt=i(3031),Lt=i(6577),Ot=i(5379),Dt=i(1699),Nt=i(7431),Ft=i(5445),kt=i(2753),zt=i(4939),jt=i(6543),Gt=i(4523),Bt=i(6303),Ut=i(2317),qt=i(9611),Vt=i(9159),Zt=i(2415),Wt=i(1603),Yt=i(5279),Xt=i(1995),Ht=i(2255),$t=i(575),Kt=i(993),Jt=i(4907),Qt=i(3291)
function te(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}function ee(t){if(t&&t.__esModule)return t
var e=Object.create(null)
return t&&Object.keys(t).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(t,i)
Object.defineProperty(e,i,n.get?n:{enumerable:!0,get:function(){return t[i]}})}})),e.default=t,Object.freeze(e)}var ie=te(n),ne=te(r),re=te(o),oe=te(s),se=te(a),ae=te(l),le=te(h),he=te(u),ue=te(c),ce=te(d),de=te(f),fe=te(p),pe=te(g),ge=te(_),_e=te(m),me=te(y),ye=te(v),ve=te(x),xe=te(b),be=te(w),we=te(E),Ee=te(S),Se=te(C),Ce=te(P),Pe=te(T),Te=te(I),Ie=te(M),Me=te(A),Ae=te(R),Re=te(L),Le=te(O),Oe=te(D),De=te(N),Ne=te(F),Fe=te(k),ke=te(z),ze=te(j),je=te(G),Ge=te(B),Be=te(U),Ue=te(q),qe=te(V),Ve=te(Z),Ze=te(W),We=te(Y),Ye=te(X),Xe=te(H),He=te($),$e=te(K),Ke=te(J),Je=te(Q),Qe=te(tt),ti=te(et),ei=te(it),ii=te(nt),ni=te(rt),ri=te(ot),oi=te(st),si=te(at),ai=te(lt),li=te(ht),hi=te(ut),ui=te(ct),ci=te(dt),di=te(ft),fi=te(pt),pi=te(gt),gi=te(_t),_i=te(mt),mi=te(yt),yi=te(vt),vi=te(xt),xi=te(bt),bi=te(wt),wi=te(Et),Ei=te(St),Si=te(Ct),Ci=te(Pt),Pi=te(Tt),Ti=te(It),Ii=te(Mt),Mi=te(At),Ai=te(Rt),Ri=te(Lt),Li=te(Ot),Oi=te(Dt),Di=te(Nt),Ni=te(Ft),Fi=te(kt),ki=ee(zt),zi=ee(jt),ji=ee(Gt),Gi=ee(Bt),Bi=ee(Ut),Ui=ee(qt),qi=te(Vt),Vi=te(Zt),Zi=te(Wt),Wi=te(Yt),Yi=te(Xt),Xi=te(Ht),Hi=te($t),$i=te(Kt),Ki=te(Jt),Ji=te(Qt)
Object.keys(zt).forEach((function(t){"default"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return zt[t]}})})),Object.keys(jt).forEach((function(t){"default"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return jt[t]}})})),Object.keys(Gt).forEach((function(t){"default"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return Gt[t]}})})),Object.keys(Bt).forEach((function(t){"default"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return Bt[t]}})})),Object.keys(Ut).forEach((function(t){"default"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return Ut[t]}})})),Object.keys(qt).forEach((function(t){"default"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return qt[t]}})})),Object.defineProperty(e,"isolines",{enumerable:!0,get:function(){return ie.default}}),Object.defineProperty(e,"convex",{enumerable:!0,get:function(){return ne.default}}),Object.defineProperty(e,"pointsWithinPolygon",{enumerable:!0,get:function(){return re.default}}),Object.defineProperty(e,"within",{enumerable:!0,get:function(){return re.default}}),Object.defineProperty(e,"concave",{enumerable:!0,get:function(){return oe.default}}),Object.defineProperty(e,"collect",{enumerable:!0,get:function(){return se.default}}),Object.defineProperty(e,"flip",{enumerable:!0,get:function(){return ae.default}}),Object.defineProperty(e,"simplify",{enumerable:!0,get:function(){return le.default}}),Object.defineProperty(e,"bezier",{enumerable:!0,get:function(){return he.default}}),Object.defineProperty(e,"bezierSpline",{enumerable:!0,get:function(){return he.default}}),Object.defineProperty(e,"tag",{enumerable:!0,get:function(){return ue.default}}),Object.defineProperty(e,"sample",{enumerable:!0,get:function(){return ce.default}}),Object.defineProperty(e,"envelope",{enumerable:!0,get:function(){return de.default}}),Object.defineProperty(e,"square",{enumerable:!0,get:function(){return fe.default}}),Object.defineProperty(e,"circle",{enumerable:!0,get:function(){return pe.default}}),Object.defineProperty(e,"midpoint",{enumerable:!0,get:function(){return ge.default}}),Object.defineProperty(e,"center",{enumerable:!0,get:function(){return _e.default}}),Object.defineProperty(e,"centerOfMass",{enumerable:!0,get:function(){return me.default}}),Object.defineProperty(e,"centroid",{enumerable:!0,get:function(){return ye.default}}),Object.defineProperty(e,"combine",{enumerable:!0,get:function(){return ve.default}}),Object.defineProperty(e,"distance",{enumerable:!0,get:function(){return xe.default}}),Object.defineProperty(e,"explode",{enumerable:!0,get:function(){return be.default}}),Object.defineProperty(e,"bbox",{enumerable:!0,get:function(){return we.default}}),Object.defineProperty(e,"tesselate",{enumerable:!0,get:function(){return Ee.default}}),Object.defineProperty(e,"bboxPolygon",{enumerable:!0,get:function(){return Se.default}}),Object.defineProperty(e,"booleanPointInPolygon",{enumerable:!0,get:function(){return Ce.default}}),Object.defineProperty(e,"inside",{enumerable:!0,get:function(){return Ce.default}}),Object.defineProperty(e,"nearest",{enumerable:!0,get:function(){return Pe.default}}),Object.defineProperty(e,"nearestPoint",{enumerable:!0,get:function(){return Pe.default}}),Object.defineProperty(e,"nearestPointOnLine",{enumerable:!0,get:function(){return Te.default}}),Object.defineProperty(e,"pointOnLine",{enumerable:!0,get:function(){return Te.default}}),Object.defineProperty(e,"nearestPointToLine",{enumerable:!0,get:function(){return Ie.default}}),Object.defineProperty(e,"planepoint",{enumerable:!0,get:function(){return Me.default}}),Object.defineProperty(e,"tin",{enumerable:!0,get:function(){return Ae.default}}),Object.defineProperty(e,"bearing",{enumerable:!0,get:function(){return Re.default}}),Object.defineProperty(e,"destination",{enumerable:!0,get:function(){return Le.default}}),Object.defineProperty(e,"kinks",{enumerable:!0,get:function(){return Oe.default}}),Object.defineProperty(e,"pointOnFeature",{enumerable:!0,get:function(){return De.default}}),Object.defineProperty(e,"pointOnSurface",{enumerable:!0,get:function(){return De.default}}),Object.defineProperty(e,"area",{enumerable:!0,get:function(){return Ne.default}}),Object.defineProperty(e,"along",{enumerable:!0,get:function(){return Fe.default}}),Object.defineProperty(e,"length",{enumerable:!0,get:function(){return ke.default}}),Object.defineProperty(e,"lineDistance",{enumerable:!0,get:function(){return ke.default}}),Object.defineProperty(e,"lineSlice",{enumerable:!0,get:function(){return ze.default}}),Object.defineProperty(e,"lineSliceAlong",{enumerable:!0,get:function(){return je.default}}),Object.defineProperty(e,"pointGrid",{enumerable:!0,get:function(){return Ge.default}}),Object.defineProperty(e,"truncate",{enumerable:!0,get:function(){return Be.default}}),Object.defineProperty(e,"flatten",{enumerable:!0,get:function(){return Ue.default}}),Object.defineProperty(e,"lineIntersect",{enumerable:!0,get:function(){return qe.default}}),Object.defineProperty(e,"lineChunk",{enumerable:!0,get:function(){return Ve.default}}),Object.defineProperty(e,"unkinkPolygon",{enumerable:!0,get:function(){return Ze.default}}),Object.defineProperty(e,"greatCircle",{enumerable:!0,get:function(){return We.default}}),Object.defineProperty(e,"lineSegment",{enumerable:!0,get:function(){return Ye.default}}),Object.defineProperty(e,"lineSplit",{enumerable:!0,get:function(){return Xe.default}}),Object.defineProperty(e,"lineArc",{enumerable:!0,get:function(){return He.default}}),Object.defineProperty(e,"polygonToLine",{enumerable:!0,get:function(){return $e.default}}),Object.defineProperty(e,"polygonToLineString",{enumerable:!0,get:function(){return $e.default}}),Object.defineProperty(e,"lineStringToPolygon",{enumerable:!0,get:function(){return Ke.default}}),Object.defineProperty(e,"lineToPolygon",{enumerable:!0,get:function(){return Ke.default}}),Object.defineProperty(e,"bboxClip",{enumerable:!0,get:function(){return Je.default}}),Object.defineProperty(e,"lineOverlap",{enumerable:!0,get:function(){return Qe.default}}),Object.defineProperty(e,"sector",{enumerable:!0,get:function(){return ti.default}}),Object.defineProperty(e,"rhumbBearing",{enumerable:!0,get:function(){return ei.default}}),Object.defineProperty(e,"rhumbDistance",{enumerable:!0,get:function(){return ii.default}}),Object.defineProperty(e,"rhumbDestination",{enumerable:!0,get:function(){return ni.default}}),Object.defineProperty(e,"polygonTangents",{enumerable:!0,get:function(){return ri.default}}),Object.defineProperty(e,"rewind",{enumerable:!0,get:function(){return oi.default}}),Object.defineProperty(e,"isobands",{enumerable:!0,get:function(){return si.default}}),Object.defineProperty(e,"transformRotate",{enumerable:!0,get:function(){return ai.default}}),Object.defineProperty(e,"transformScale",{enumerable:!0,get:function(){return li.default}}),Object.defineProperty(e,"transformTranslate",{enumerable:!0,get:function(){return hi.default}}),Object.defineProperty(e,"lineOffset",{enumerable:!0,get:function(){return ui.default}}),Object.defineProperty(e,"polygonize",{enumerable:!0,get:function(){return ci.default}}),Object.defineProperty(e,"booleanDisjoint",{enumerable:!0,get:function(){return di.default}}),Object.defineProperty(e,"booleanContains",{enumerable:!0,get:function(){return fi.default}}),Object.defineProperty(e,"booleanCrosses",{enumerable:!0,get:function(){return pi.default}}),Object.defineProperty(e,"booleanClockwise",{enumerable:!0,get:function(){return gi.default}}),Object.defineProperty(e,"booleanOverlap",{enumerable:!0,get:function(){return _i.default}}),Object.defineProperty(e,"booleanPointOnLine",{enumerable:!0,get:function(){return mi.default}}),Object.defineProperty(e,"booleanEqual",{enumerable:!0,get:function(){return yi.default}}),Object.defineProperty(e,"booleanWithin",{enumerable:!0,get:function(){return vi.default}}),Object.defineProperty(e,"booleanIntersects",{enumerable:!0,get:function(){return xi.default}}),Object.defineProperty(e,"clone",{enumerable:!0,get:function(){return bi.default}}),Object.defineProperty(e,"cleanCoords",{enumerable:!0,get:function(){return wi.default}}),Object.defineProperty(e,"clustersDbscan",{enumerable:!0,get:function(){return Ei.default}}),Object.defineProperty(e,"clustersKmeans",{enumerable:!0,get:function(){return Si.default}}),Object.defineProperty(e,"pointToLineDistance",{enumerable:!0,get:function(){return Ci.default}}),Object.defineProperty(e,"booleanParallel",{enumerable:!0,get:function(){return Pi.default}}),Object.defineProperty(e,"shortestPath",{enumerable:!0,get:function(){return Ti.default}}),Object.defineProperty(e,"voronoi",{enumerable:!0,get:function(){return Ii.default}}),Object.defineProperty(e,"ellipse",{enumerable:!0,get:function(){return Mi.default}}),Object.defineProperty(e,"centerMean",{enumerable:!0,get:function(){return Ai.default}}),Object.defineProperty(e,"centerMedian",{enumerable:!0,get:function(){return Ri.default}}),Object.defineProperty(e,"standardDeviationalEllipse",{enumerable:!0,get:function(){return Li.default}}),Object.defineProperty(e,"angle",{enumerable:!0,get:function(){return Oi.default}}),Object.defineProperty(e,"polygonSmooth",{enumerable:!0,get:function(){return Di.default}}),Object.defineProperty(e,"moranIndex",{enumerable:!0,get:function(){return Ni.default}}),Object.defineProperty(e,"distanceWeight",{enumerable:!0,get:function(){return Fi.default}}),e.projection=ki,e.random=zi,e.clusters=ji,Object.defineProperty(e,"bearingToAngle",{enumerable:!0,get:function(){return Bt.bearingToAzimuth}}),Object.defineProperty(e,"convertDistance",{enumerable:!0,get:function(){return Bt.convertLength}}),Object.defineProperty(e,"degrees2radians",{enumerable:!0,get:function(){return Bt.degreesToRadians}}),Object.defineProperty(e,"distanceToDegrees",{enumerable:!0,get:function(){return Bt.lengthToDegrees}}),Object.defineProperty(e,"distanceToRadians",{enumerable:!0,get:function(){return Bt.lengthToRadians}}),e.helpers=Gi,Object.defineProperty(e,"radians2degrees",{enumerable:!0,get:function(){return Bt.radiansToDegrees}}),Object.defineProperty(e,"radiansToDistance",{enumerable:!0,get:function(){return Bt.radiansToLength}}),e.invariant=Bi,e.meta=Ui,Object.defineProperty(e,"difference",{enumerable:!0,get:function(){return qi.default}}),Object.defineProperty(e,"buffer",{enumerable:!0,get:function(){return Vi.default}}),Object.defineProperty(e,"union",{enumerable:!0,get:function(){return Zi.default}}),Object.defineProperty(e,"intersect",{enumerable:!0,get:function(){return Wi.default}}),Object.defineProperty(e,"dissolve",{enumerable:!0,get:function(){return Yi.default}}),Object.defineProperty(e,"hexGrid",{enumerable:!0,get:function(){return Xi.default}}),Object.defineProperty(e,"mask",{enumerable:!0,get:function(){return Hi.default}}),Object.defineProperty(e,"squareGrid",{enumerable:!0,get:function(){return $i.default}}),Object.defineProperty(e,"triangleGrid",{enumerable:!0,get:function(){return Ki.default}}),Object.defineProperty(e,"interpolate",{enumerable:!0,get:function(){return Ji.default}})},1603:function(t,e,i){"use strict"
var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=n(i(6638)),o=i(2317),s=i(6303)
e.default=function(t,e,i){void 0===i&&(i={})
var n=o.getGeom(t),a=o.getGeom(e),l=r.default.union(n.coordinates,a.coordinates)
return 0===l.length?null:1===l.length?s.polygon(l[0],i.properties):s.multiPolygon(l,i.properties)}},9979:(t,e,i)=>{"use strict"
var n=i(9611),r=i(6303),o=i(803),s=i(587),a=i(2015)
function l(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var h=l(o),u=l(s),c=l(a)
function d(t,e){if(!t||!e)return!1
if(t.length!==e.length)return!1
for(var i=0,n=t.length;i<n;i++)if(t[i]instanceof Array&&e[i]instanceof Array){if(!d(t[i],e[i]))return!1}else if(t[i]!==e[i])return!1
return!0}var f=function(t,e,i,n,r){this.coord=t,this.param=e,this.ringAndEdgeIn=i,this.ringAndEdgeOut=n,this.nxtIsectAlongEdgeIn=r},p=function(t,e,i,n,r,o,s){this.coord=t,this.ringAndEdge1=e,this.ringAndEdge2=i,this.nxtIsectAlongRingAndEdge1=n,this.nxtIsectAlongRingAndEdge2=r,this.ringAndEdge1Walkable=o,this.ringAndEdge2Walkable=s}
function g(t,e){if(void 0===e&&(e=!0),3!=t.length)throw new Error("This function requires an array of three points [x,y]")
return(t[1][0]-t[0][0])*(t[2][1]-t[0][1])-(t[1][1]-t[0][1])*(t[2][0]-t[0][0])>=0==e}function _(t){for(var e=0,i=0;i<t.length-1;i++)t[i][0]<t[e][0]&&(e=i)
if(g([t[y(e-1,t.length-1)],t[e],t[y(e+1,t.length-1)]],!0))var n=1
else n=-1
return n}function m(t,e){if(!t||!e)return!1
if(t.length!=e.length)return!1
for(var i=0,n=t.length;i<n;i++)if(t[i]instanceof Array&&e[i]instanceof Array){if(!m(t[i],e[i]))return!1}else if(t[i]!=e[i])return!1
return!0}function y(t,e){return(t%e+e)%e}function v(t){var e=[]
return n.flattenEach(t,(function(t){"Polygon"===t.geometry.type&&n.featureEach(function(t){if("Feature"!=t.type)throw new Error("The input must a geojson object of type Feature")
if(void 0===t.geometry||null==t.geometry)throw new Error("The input must a geojson object with a non-empty geometry")
if("Polygon"!=t.geometry.type)throw new Error("The input must be a geojson Polygon")
for(var e=t.geometry.coordinates.length,i=[],n=0;n<e;n++){var o=t.geometry.coordinates[n]
m(o[0],o[o.length-1])||o.push(o[0]),i.push.apply(i,o.slice(0,o.length-1))}if(!function(t){for(var e={},i=1,n=0,r=t.length;n<r;++n){if(Object.prototype.hasOwnProperty.call(e,t[n])){i=0
break}e[t[n]]=1}return i}(i))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)")
var s=i.length,a=function(t,e,i){if("Polygon"!==t.geometry.type)throw new Error("The input feature must be a Polygon")
void 0===i&&(i=1)
var n=t.geometry.coordinates,r=[],o={}
if(i){for(var s=[],a=0;a<n.length;a++)for(var l=0;l<n[a].length-1;l++)s.push(m(a,l))
var u=h.default()
u.load(s)}for(var c=0;c<n.length;c++)for(var f=0;f<n[c].length-1;f++)if(i)u.search(m(c,f)).forEach((function(t){var e=t.ring,i=t.edge
_(c,f,e,i)}))
else for(var p=0;p<n.length;p++)for(var g=0;g<n[p].length-1;g++)_(c,f,p,g)
return e||(r={type:"Feature",geometry:{type:"MultiPoint",coordinates:r}}),r
function _(t,i,s,a){var l,h,u=n[t][i],c=n[t][i+1],f=n[s][a],p=n[s][a+1],g=function(t,e,i,n){if(d(t,i)||d(t,n)||d(e,i)||d(n,i))return null
var r=t[0],o=t[1],s=e[0],a=e[1],l=i[0],h=i[1],u=n[0],c=n[1],f=(r-s)*(h-c)-(o-a)*(l-u)
return 0===f?null:[((r*a-o*s)*(l-u)-(r-s)*(l*c-h*u))/f,((r*a-o*s)*(h-c)-(o-a)*(l*c-h*u))/f]}(u,c,f,p)
if(null!==g&&(l=c[0]!==u[0]?(g[0]-u[0])/(c[0]-u[0]):(g[1]-u[1])/(c[1]-u[1]),h=p[0]!==f[0]?(g[0]-f[0])/(p[0]-f[0]):(g[1]-f[1])/(p[1]-f[1]),!(l>=1||l<=0||h>=1||h<=0))){var _=g,m=!o[_]
m&&(o[_]=!0),e?r.push(e(g,t,i,u,c,l,s,a,f,p,h,m)):r.push(g)}}function m(t,e){var i,r,o,s,a=n[t][e],l=n[t][e+1]
return a[0]<l[0]?(i=a[0],r=l[0]):(i=l[0],r=a[0]),a[1]<l[1]?(o=a[1],s=l[1]):(o=l[1],s=a[1]),{minX:i,minY:o,maxX:r,maxY:s,ring:t,edge:e}}}(t,(function(t,e,i,n,r,o,s,a,l,h,u,c){return[t,e,i,n,r,o,s,a,l,h,u,c]})),l=a.length
if(0==l){var v=[]
for(n=0;n<e;n++)v.push(r.polygon([t.geometry.coordinates[n]],{parent:-1,winding:_(t.geometry.coordinates[n])}))
var x=r.featureCollection(v)
return Y(),X(),x}var b=[],w=[]
for(n=0;n<e;n++){b.push([])
for(var E=0;E<t.geometry.coordinates[n].length-1;E++)b[n].push([new f(t.geometry.coordinates[n][y(E+1,t.geometry.coordinates[n].length-1)],1,[n,E],[n,y(E+1,t.geometry.coordinates[n].length-1)],void 0)]),w.push(new p(t.geometry.coordinates[n][E],[n,y(E-1,t.geometry.coordinates[n].length-1)],[n,E],void 0,void 0,!1,!0))}for(n=0;n<l;n++)b[a[n][1]][a[n][2]].push(new f(a[n][0],a[n][5],[a[n][1],a[n][2]],[a[n][6],a[n][7]],void 0)),a[n][11]&&w.push(new p(a[n][0],[a[n][1],a[n][2]],[a[n][6],a[n][7]],void 0,void 0,!0,!0))
var S=w.length
for(n=0;n<b.length;n++)for(E=0;E<b[n].length;E++)b[n][E].sort((function(t,e){return t.param<e.param?-1:1}))
var C=[]
for(n=0;n<S;n++)C.push({minX:w[n].coord[0],minY:w[n].coord[1],maxX:w[n].coord[0],maxY:w[n].coord[1],index:n})
var P=h.default()
for(P.load(C),n=0;n<b.length;n++)for(E=0;E<b[n].length;E++)for(var T=0;T<b[n][E].length;T++){M=T==b[n][E].length-1?b[n][y(E+1,t.geometry.coordinates[n].length-1)][0].coord:b[n][E][T+1].coord
var I=P.search({minX:M[0],minY:M[1],maxX:M[0],maxY:M[1]})[0]
b[n][E][T].nxtIsectAlongEdgeIn=I.index}for(n=0;n<b.length;n++)for(E=0;E<b[n].length;E++)for(T=0;T<b[n][E].length;T++){var M=b[n][E][T].coord,A=(I=P.search({minX:M[0],minY:M[1],maxX:M[0],maxY:M[1]})[0]).index
A<s?w[A].nxtIsectAlongRingAndEdge2=b[n][E][T].nxtIsectAlongEdgeIn:m(w[A].ringAndEdge1,b[n][E][T].ringAndEdgeIn)?w[A].nxtIsectAlongRingAndEdge1=b[n][E][T].nxtIsectAlongEdgeIn:w[A].nxtIsectAlongRingAndEdge2=b[n][E][T].nxtIsectAlongEdgeIn}var R=[]
for(n=0,E=0;E<e;E++){var L=n
for(T=0;T<t.geometry.coordinates[E].length-1;T++)w[n].coord[0]<w[L].coord[0]&&(L=n),n++
var O=w[L].nxtIsectAlongRingAndEdge2
for(T=0;T<w.length;T++)if(w[T].nxtIsectAlongRingAndEdge1==L||w[T].nxtIsectAlongRingAndEdge2==L){var D=T
break}var N=g([w[D].coord,w[L].coord,w[O].coord],!0)?1:-1
R.push({isect:L,parent:-1,winding:N})}for(R.sort((function(t,e){return w[t.isect].coord>w[e.isect].coord?-1:1})),v=[];R.length>0;){var F=R.pop(),k=F.isect,z=F.parent,j=F.winding,G=v.length,B=[w[k].coord],U=k
if(w[k].ringAndEdge1Walkable)var q=w[k].ringAndEdge1,V=w[k].nxtIsectAlongRingAndEdge1
else q=w[k].ringAndEdge2,V=w[k].nxtIsectAlongRingAndEdge2
for(;!m(w[k].coord,w[V].coord);){B.push(w[V].coord)
var Z=void 0
for(n=0;n<R.length;n++)if(R[n].isect==V){Z=n
break}if(null!=Z&&R.splice(Z,1),m(q,w[V].ringAndEdge1)){if(q=w[V].ringAndEdge2,w[V].ringAndEdge2Walkable=!1,w[V].ringAndEdge1Walkable){var W={isect:V}
g([w[U].coord,w[V].coord,w[w[V].nxtIsectAlongRingAndEdge2].coord],1==j)?(W.parent=z,W.winding=-j):(W.parent=G,W.winding=j),R.push(W)}U=V,V=w[V].nxtIsectAlongRingAndEdge2}else q=w[V].ringAndEdge1,w[V].ringAndEdge1Walkable=!1,w[V].ringAndEdge2Walkable&&(W={isect:V},g([w[U].coord,w[V].coord,w[w[V].nxtIsectAlongRingAndEdge1].coord],1==j)?(W.parent=z,W.winding=-j):(W.parent=G,W.winding=j),R.push(W)),U=V,V=w[V].nxtIsectAlongRingAndEdge1}B.push(w[V].coord),v.push(r.polygon([B],{index:G,parent:z,winding:j,netWinding:void 0}))}function Y(){for(var t=[],e=0;e<x.features.length;e++)-1==x.features[e].properties.parent&&t.push(e)
if(t.length>1)for(e=0;e<t.length;e++){for(var i=-1,n=1/0,r=0;r<x.features.length;r++)t[e]!=r&&c.default(x.features[t[e]].geometry.coordinates[0][0],x.features[r],{ignoreBoundary:!0})&&u.default(x.features[r])<n&&(i=r)
x.features[t[e]].properties.parent=i}}function X(){for(var t=0;t<x.features.length;t++)if(-1==x.features[t].properties.parent){var e=x.features[t].properties.winding
x.features[t].properties.netWinding=e,H(t,e)}}function H(t,e){for(var i=0;i<x.features.length;i++)if(x.features[i].properties.parent==t){var n=e+x.features[i].properties.winding
x.features[i].properties.netWinding=n,H(i,n)}}return x=r.featureCollection(v),Y(),X(),x}(t),(function(i){e.push(r.polygon(i.geometry.coordinates,t.properties))}))})),r.featureCollection(e)}t.exports=v,t.exports.default=v},6246:(t,e,i)=>{"use strict"
var n=i(6303),r=i(2317),o=i(8496)
function s(t){return(t=t.slice()).push(t[0]),n.polygon([t])}function a(t,e){if(e=e||{},!n.isObject(e))throw new Error("options is invalid")
var i=e.bbox||[-180,-85,180,85]
if(!t)throw new Error("points is required")
if(!Array.isArray(i))throw new Error("bbox is invalid")
return r.collectionOf(t,"Point","points"),n.featureCollection(o.voronoi().x((function(t){return t.geometry.coordinates[0]})).y((function(t){return t.geometry.coordinates[1]})).extent([[i[0],i[1]],[i[2],i[3]]]).polygons(t.features).map(s))}t.exports=a,t.exports.default=a},8185:(t,e,i)=>{"use strict"
var n=i(8824),r=i(4649),o=r(n("String.prototype.indexOf"))
t.exports=function(t,e){var i=n(t,!!e)
return"function"==typeof i&&o(t,".prototype.")>-1?r(i):i}},4649:(t,e,i)=>{"use strict"
var n=i(9913),r=i(8824),o=i(3674),s=i(6933),a=r("%Function.prototype.apply%"),l=r("%Function.prototype.call%"),h=r("%Reflect.apply%",!0)||n.call(l,a),u=i(9836),c=r("%Math.max%")
t.exports=function(t){if("function"!=typeof t)throw new s("a function is required")
var e=h(n,l,arguments)
return o(e,1+c(0,t.length-(arguments.length-1)),!0)}
var d=function(){return h(n,a,arguments)}
u?u(t.exports,"apply",{value:d}):t.exports.apply=d},7505:(t,e,i)=>{"use strict"
var n=i(7179),r=i(3804),o=i(7267),s=i(3815).orient2d
function a(t,e,i){e=Math.max(0,void 0===e?2:e),i=i||0
var r=function(t){for(var e=t[0],i=t[0],n=t[0],r=t[0],s=0;s<t.length;s++){var a=t[s]
a[0]<e[0]&&(e=a),a[0]>n[0]&&(n=a),a[1]<i[1]&&(i=a),a[1]>r[1]&&(r=a)}var l=[e,i,n,r],h=l.slice()
for(s=0;s<t.length;s++)o(t[s],l)||h.push(t[s])
return function(t){t.sort(v)
for(var e=[],i=0;i<t.length;i++){for(;e.length>=2&&f(e[e.length-2],e[e.length-1],t[i])<=0;)e.pop()
e.push(t[i])}for(var n=[],r=t.length-1;r>=0;r--){for(;n.length>=2&&f(n[n.length-2],n[n.length-1],t[r])<=0;)n.pop()
n.push(t[r])}return n.pop(),e.pop(),e.concat(n)}(h)}(t),s=new n(16)
s.toBBox=function(t){return{minX:t[0],minY:t[1],maxX:t[0],maxY:t[1]}},s.compareMinX=function(t,e){return t[0]-e[0]},s.compareMinY=function(t,e){return t[1]-e[1]},s.load(t)
for(var a,h=[],u=0;u<r.length;u++){var c=r[u]
s.remove(c),a=g(c,a),h.push(a)}var d=new n(16)
for(u=0;u<h.length;u++)d.insert(p(h[u]))
for(var m=e*e,y=i*i;h.length;){var x=h.shift(),b=x.p,w=x.next.p,E=_(b,w)
if(!(E<y)){var S=E/m;(c=l(s,x.prev.p,b,w,x.next.next.p,S,d))&&Math.min(_(c,b),_(c,w))<=S&&(h.push(x),h.push(g(c,x)),s.remove(c),d.remove(x),d.insert(p(x)),d.insert(p(x.next)))}}x=a
var C=[]
do{C.push(x.p),x=x.next}while(x!==a)
return C.push(x.p),C}function l(t,e,i,n,o,s,a){for(var l=new r([],h),c=t.data;c;){for(var f=0;f<c.children.length;f++){var p=c.children[f],g=c.leaf?m(p,i,n):u(i,n,p)
g>s||l.push({node:p,dist:g})}for(;l.length&&!l.peek().node.children;){var _=l.pop(),y=_.node,v=m(y,e,i),x=m(y,n,o)
if(_.dist<v&&_.dist<x&&d(i,y,a)&&d(n,y,a))return y}(c=l.pop())&&(c=c.node)}return null}function h(t,e){return t.dist-e.dist}function u(t,e,i){if(c(t,i)||c(e,i))return 0
var n=y(t[0],t[1],e[0],e[1],i.minX,i.minY,i.maxX,i.minY)
if(0===n)return 0
var r=y(t[0],t[1],e[0],e[1],i.minX,i.minY,i.minX,i.maxY)
if(0===r)return 0
var o=y(t[0],t[1],e[0],e[1],i.maxX,i.minY,i.maxX,i.maxY)
if(0===o)return 0
var s=y(t[0],t[1],e[0],e[1],i.minX,i.maxY,i.maxX,i.maxY)
return 0===s?0:Math.min(n,r,o,s)}function c(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function d(t,e,i){for(var n,r,o,s,a=Math.min(t[0],e[0]),l=Math.min(t[1],e[1]),h=Math.max(t[0],e[0]),u=Math.max(t[1],e[1]),c=i.search({minX:a,minY:l,maxX:h,maxY:u}),d=0;d<c.length;d++)if(n=c[d].p,r=c[d].next.p,o=t,n!==(s=e)&&r!==o&&f(n,r,o)>0!=f(n,r,s)>0&&f(o,s,n)>0!=f(o,s,r)>0)return!1
return!0}function f(t,e,i){return s(t[0],t[1],e[0],e[1],i[0],i[1])}function p(t){var e=t.p,i=t.next.p
return t.minX=Math.min(e[0],i[0]),t.minY=Math.min(e[1],i[1]),t.maxX=Math.max(e[0],i[0]),t.maxY=Math.max(e[1],i[1]),t}function g(t,e){var i={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0}
return e?(i.next=e.next,i.prev=e,e.next.prev=i,e.next=i):(i.prev=i,i.next=i),i}function _(t,e){var i=t[0]-e[0],n=t[1]-e[1]
return i*i+n*n}function m(t,e,i){var n=e[0],r=e[1],o=i[0]-n,s=i[1]-r
if(0!==o||0!==s){var a=((t[0]-n)*o+(t[1]-r)*s)/(o*o+s*s)
a>1?(n=i[0],r=i[1]):a>0&&(n+=o*a,r+=s*a)}return(o=t[0]-n)*o+(s=t[1]-r)*s}function y(t,e,i,n,r,o,s,a){var l,h,u,c,d=i-t,f=n-e,p=s-r,g=a-o,_=t-r,m=e-o,y=d*d+f*f,v=d*p+f*g,x=p*p+g*g,b=d*_+f*m,w=p*_+g*m,E=y*x-v*v,S=E,C=E
0===E?(h=0,S=1,c=w,C=x):(c=y*w-v*b,(h=v*w-x*b)<0?(h=0,c=w,C=x):h>S&&(h=S,c=w+v,C=x)),c<0?(c=0,-b<0?h=0:-b>y?h=S:(h=-b,S=y)):c>C&&(c=C,-b+v<0?h=0:-b+v>y?h=S:(h=-b+v,S=y))
var P=(1-(u=0===c?0:c/C))*r+u*s-((1-(l=0===h?0:h/S))*t+l*i),T=(1-u)*o+u*a-((1-l)*e+l*n)
return P*P+T*T}function v(t,e){return t[0]===e[0]?t[1]-e[1]:t[0]-e[0]}r.default&&(r=r.default),t.exports=a,t.exports.default=a},4887:(t,e,i)=>{"use strict"
function n(){return new r}function r(){this.reset()}i.r(e),i.d(e,{geoAlbers:()=>wn,geoAlbersUsa:()=>En,geoArea:()=>H,geoAzimuthalEqualArea:()=>Tn,geoAzimuthalEqualAreaRaw:()=>Pn,geoAzimuthalEquidistant:()=>Mn,geoAzimuthalEquidistantRaw:()=>In,geoBounds:()=>Bt,geoCentroid:()=>ee,geoCircle:()=>de,geoClipExtent:()=>Ce,geoConicConformal:()=>Nn,geoConicConformalRaw:()=>Dn,geoConicEqualArea:()=>bn,geoConicEqualAreaRaw:()=>xn,geoConicEquidistant:()=>jn,geoConicEquidistantRaw:()=>zn,geoContains:()=>Xe,geoDistance:()=>je,geoEquirectangular:()=>kn,geoEquirectangularRaw:()=>Fn,geoGnomonic:()=>Bn,geoGnomonicRaw:()=>Gn,geoGraticule:()=>Ke,geoGraticule10:()=>Je,geoIdentity:()=>qn,geoInterpolate:()=>Qe,geoLength:()=>Fe,geoMercator:()=>Rn,geoMercatorRaw:()=>An,geoNaturalEarth1:()=>Zn,geoNaturalEarth1Raw:()=>Vn,geoOrthographic:()=>Yn,geoOrthographicRaw:()=>Wn,geoPath:()=>nn,geoProjection:()=>mn,geoProjectionMutator:()=>yn,geoRotation:()=>he,geoStereographic:()=>Hn,geoStereographicRaw:()=>Xn,geoStream:()=>F,geoTransform:()=>ln,geoTransverseMercator:()=>Kn,geoTransverseMercatorRaw:()=>$n}),r.prototype={constructor:r,reset:function(){this.s=this.t=0},add:function(t){s(o,t,this.t),s(this,o.s,this.s),this.s?this.t+=o.t:this.s=o.t},valueOf:function(){return this.s}}
var o=new r
function s(t,e,i){var n=t.s=e+i,r=n-e,o=n-r
t.t=e-o+(i-r)}var a=1e-6,l=1e-12,h=Math.PI,u=h/2,c=h/4,d=2*h,f=180/h,p=h/180,g=Math.abs,_=Math.atan,m=Math.atan2,y=Math.cos,v=Math.ceil,x=Math.exp,b=(Math.floor,Math.log),w=Math.pow,E=Math.sin,S=Math.sign||function(t){return t>0?1:t<0?-1:0},C=Math.sqrt,P=Math.tan
function T(t){return t>1?0:t<-1?h:Math.acos(t)}function I(t){return t>1?u:t<-1?-u:Math.asin(t)}function M(t){return(t=E(t/2))*t}function A(){}function R(t,e){t&&O.hasOwnProperty(t.type)&&O[t.type](t,e)}var L={Feature:function(t,e){R(t.geometry,e)},FeatureCollection:function(t,e){for(var i=t.features,n=-1,r=i.length;++n<r;)R(i[n].geometry,e)}},O={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var i=t.coordinates,n=-1,r=i.length;++n<r;)t=i[n],e.point(t[0],t[1],t[2])},LineString:function(t,e){D(t.coordinates,e,0)},MultiLineString:function(t,e){for(var i=t.coordinates,n=-1,r=i.length;++n<r;)D(i[n],e,0)},Polygon:function(t,e){N(t.coordinates,e)},MultiPolygon:function(t,e){for(var i=t.coordinates,n=-1,r=i.length;++n<r;)N(i[n],e)},GeometryCollection:function(t,e){for(var i=t.geometries,n=-1,r=i.length;++n<r;)R(i[n],e)}}
function D(t,e,i){var n,r=-1,o=t.length-i
for(e.lineStart();++r<o;)n=t[r],e.point(n[0],n[1],n[2])
e.lineEnd()}function N(t,e){var i=-1,n=t.length
for(e.polygonStart();++i<n;)D(t[i],e,1)
e.polygonEnd()}function F(t,e){t&&L.hasOwnProperty(t.type)?L[t.type](t,e):R(t,e)}var k,z,j,G,B,U=n(),q=n(),V={point:A,lineStart:A,lineEnd:A,polygonStart:function(){U.reset(),V.lineStart=Z,V.lineEnd=W},polygonEnd:function(){var t=+U
q.add(t<0?d+t:t),this.lineStart=this.lineEnd=this.point=A},sphere:function(){q.add(d)}}
function Z(){V.point=Y}function W(){X(k,z)}function Y(t,e){V.point=X,k=t,z=e,j=t*=p,G=y(e=(e*=p)/2+c),B=E(e)}function X(t,e){var i=(t*=p)-j,n=i>=0?1:-1,r=n*i,o=y(e=(e*=p)/2+c),s=E(e),a=B*s,l=G*o+a*y(r),h=a*n*E(r)
U.add(m(h,l)),j=t,G=o,B=s}function H(t){return q.reset(),F(t,V),2*q}function $(t){return[m(t[1],t[0]),I(t[2])]}function K(t){var e=t[0],i=t[1],n=y(i)
return[n*y(e),n*E(e),E(i)]}function J(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Q(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function tt(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function et(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function it(t){var e=C(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])
t[0]/=e,t[1]/=e,t[2]/=e}var nt,rt,ot,st,at,lt,ht,ut,ct,dt,ft,pt,gt,_t,mt,yt,vt,xt,bt,wt,Et,St,Ct,Pt,Tt,It,Mt=n(),At={point:Rt,lineStart:Ot,lineEnd:Dt,polygonStart:function(){At.point=Nt,At.lineStart=Ft,At.lineEnd=kt,Mt.reset(),V.polygonStart()},polygonEnd:function(){V.polygonEnd(),At.point=Rt,At.lineStart=Ot,At.lineEnd=Dt,U<0?(nt=-(ot=180),rt=-(st=90)):Mt>a?st=90:Mt<-a&&(rt=-90),dt[0]=nt,dt[1]=ot}}
function Rt(t,e){ct.push(dt=[nt=t,ot=t]),e<rt&&(rt=e),e>st&&(st=e)}function Lt(t,e){var i=K([t*p,e*p])
if(ut){var n=Q(ut,i),r=Q([n[1],-n[0],0],n)
it(r),r=$(r)
var o,s=t-at,a=s>0?1:-1,l=r[0]*f*a,h=g(s)>180
h^(a*at<l&&l<a*t)?(o=r[1]*f)>st&&(st=o):h^(a*at<(l=(l+360)%360-180)&&l<a*t)?(o=-r[1]*f)<rt&&(rt=o):(e<rt&&(rt=e),e>st&&(st=e)),h?t<at?zt(nt,t)>zt(nt,ot)&&(ot=t):zt(t,ot)>zt(nt,ot)&&(nt=t):ot>=nt?(t<nt&&(nt=t),t>ot&&(ot=t)):t>at?zt(nt,t)>zt(nt,ot)&&(ot=t):zt(t,ot)>zt(nt,ot)&&(nt=t)}else ct.push(dt=[nt=t,ot=t])
e<rt&&(rt=e),e>st&&(st=e),ut=i,at=t}function Ot(){At.point=Lt}function Dt(){dt[0]=nt,dt[1]=ot,At.point=Rt,ut=null}function Nt(t,e){if(ut){var i=t-at
Mt.add(g(i)>180?i+(i>0?360:-360):i)}else lt=t,ht=e
V.point(t,e),Lt(t,e)}function Ft(){V.lineStart()}function kt(){Nt(lt,ht),V.lineEnd(),g(Mt)>a&&(nt=-(ot=180)),dt[0]=nt,dt[1]=ot,ut=null}function zt(t,e){return(e-=t)<0?e+360:e}function jt(t,e){return t[0]-e[0]}function Gt(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}function Bt(t){var e,i,n,r,o,s,a
if(st=ot=-(nt=rt=1/0),ct=[],F(t,At),i=ct.length){for(ct.sort(jt),e=1,o=[n=ct[0]];e<i;++e)Gt(n,(r=ct[e])[0])||Gt(n,r[1])?(zt(n[0],r[1])>zt(n[0],n[1])&&(n[1]=r[1]),zt(r[0],n[1])>zt(n[0],n[1])&&(n[0]=r[0])):o.push(n=r)
for(s=-1/0,e=0,n=o[i=o.length-1];e<=i;n=r,++e)r=o[e],(a=zt(n[1],r[0]))>s&&(s=a,nt=r[0],ot=n[1])}return ct=dt=null,nt===1/0||rt===1/0?[[NaN,NaN],[NaN,NaN]]:[[nt,rt],[ot,st]]}var Ut,qt,Vt={sphere:A,point:Zt,lineStart:Yt,lineEnd:$t,polygonStart:function(){Vt.lineStart=Kt,Vt.lineEnd=Jt},polygonEnd:function(){Vt.lineStart=Yt,Vt.lineEnd=$t}}
function Zt(t,e){t*=p
var i=y(e*=p)
Wt(i*y(t),i*E(t),E(e))}function Wt(t,e,i){++ft,gt+=(t-gt)/ft,_t+=(e-_t)/ft,mt+=(i-mt)/ft}function Yt(){Vt.point=Xt}function Xt(t,e){t*=p
var i=y(e*=p)
Pt=i*y(t),Tt=i*E(t),It=E(e),Vt.point=Ht,Wt(Pt,Tt,It)}function Ht(t,e){t*=p
var i=y(e*=p),n=i*y(t),r=i*E(t),o=E(e),s=m(C((s=Tt*o-It*r)*s+(s=It*n-Pt*o)*s+(s=Pt*r-Tt*n)*s),Pt*n+Tt*r+It*o)
pt+=s,yt+=s*(Pt+(Pt=n)),vt+=s*(Tt+(Tt=r)),xt+=s*(It+(It=o)),Wt(Pt,Tt,It)}function $t(){Vt.point=Zt}function Kt(){Vt.point=Qt}function Jt(){te(St,Ct),Vt.point=Zt}function Qt(t,e){St=t,Ct=e,t*=p,e*=p,Vt.point=te
var i=y(e)
Pt=i*y(t),Tt=i*E(t),It=E(e),Wt(Pt,Tt,It)}function te(t,e){t*=p
var i=y(e*=p),n=i*y(t),r=i*E(t),o=E(e),s=Tt*o-It*r,a=It*n-Pt*o,l=Pt*r-Tt*n,h=C(s*s+a*a+l*l),u=I(h),c=h&&-u/h
bt+=c*s,wt+=c*a,Et+=c*l,pt+=u,yt+=u*(Pt+(Pt=n)),vt+=u*(Tt+(Tt=r)),xt+=u*(It+(It=o)),Wt(Pt,Tt,It)}function ee(t){ft=pt=gt=_t=mt=yt=vt=xt=bt=wt=Et=0,F(t,Vt)
var e=bt,i=wt,n=Et,r=e*e+i*i+n*n
return r<l&&(e=yt,i=vt,n=xt,pt<a&&(e=gt,i=_t,n=mt),(r=e*e+i*i+n*n)<l)?[NaN,NaN]:[m(i,e)*f,I(n/C(r))*f]}function ie(t){return function(){return t}}function ne(t,e){function i(i,n){return i=t(i,n),e(i[0],i[1])}return t.invert&&e.invert&&(i.invert=function(i,n){return(i=e.invert(i,n))&&t.invert(i[0],i[1])}),i}function re(t,e){return[t>h?t-d:t<-h?t+d:t,e]}function oe(t,e,i){return(t%=d)?e||i?ne(ae(t),le(e,i)):ae(t):e||i?le(e,i):re}function se(t){return function(e,i){return[(e+=t)>h?e-d:e<-h?e+d:e,i]}}function ae(t){var e=se(t)
return e.invert=se(-t),e}function le(t,e){var i=y(t),n=E(t),r=y(e),o=E(e)
function s(t,e){var s=y(e),a=y(t)*s,l=E(t)*s,h=E(e),u=h*i+a*n
return[m(l*r-u*o,a*i-h*n),I(u*r+l*o)]}return s.invert=function(t,e){var s=y(e),a=y(t)*s,l=E(t)*s,h=E(e),u=h*r-l*o
return[m(l*r+h*o,a*i+u*n),I(u*i-a*n)]},s}function he(t){function e(e){return(e=t(e[0]*p,e[1]*p))[0]*=f,e[1]*=f,e}return t=oe(t[0]*p,t[1]*p,t.length>2?t[2]*p:0),e.invert=function(e){return(e=t.invert(e[0]*p,e[1]*p))[0]*=f,e[1]*=f,e},e}function ue(t,e,i,n,r,o){if(i){var s=y(e),a=E(e),l=n*i
null==r?(r=e+n*d,o=e-l/2):(r=ce(s,r),o=ce(s,o),(n>0?r<o:r>o)&&(r+=n*d))
for(var h,u=r;n>0?u>o:u<o;u-=l)h=$([s,-a*y(u),-a*E(u)]),t.point(h[0],h[1])}}function ce(t,e){(e=K(e))[0]-=t,it(e)
var i=T(-e[1])
return((-e[2]<0?-i:i)+d-a)%d}function de(){var t,e,i=ie([0,0]),n=ie(90),r=ie(6),o={point:function(i,n){t.push(i=e(i,n)),i[0]*=f,i[1]*=f}}
function s(){var s=i.apply(this,arguments),a=n.apply(this,arguments)*p,l=r.apply(this,arguments)*p
return t=[],e=oe(-s[0]*p,-s[1]*p,0).invert,ue(o,a,l,1),s={type:"Polygon",coordinates:[t]},t=e=null,s}return s.center=function(t){return arguments.length?(i="function"==typeof t?t:ie([+t[0],+t[1]]),s):i},s.radius=function(t){return arguments.length?(n="function"==typeof t?t:ie(+t),s):n},s.precision=function(t){return arguments.length?(r="function"==typeof t?t:ie(+t),s):r},s}function fe(){var t,e=[]
return{point:function(e,i){t.push([e,i])},lineStart:function(){e.push(t=[])},lineEnd:A,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var i=e
return e=[],t=null,i}}}function pe(t,e){return g(t[0]-e[0])<a&&g(t[1]-e[1])<a}function ge(t,e,i,n){this.x=t,this.z=e,this.o=i,this.e=n,this.v=!1,this.n=this.p=null}function _e(t,e,i,n,r){var o,s,a=[],l=[]
if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,i,n=t[0],s=t[e]
if(pe(n,s)){for(r.lineStart(),o=0;o<e;++o)r.point((n=t[o])[0],n[1])
r.lineEnd()}else a.push(i=new ge(n,t,null,!0)),l.push(i.o=new ge(n,null,i,!1)),a.push(i=new ge(s,t,null,!1)),l.push(i.o=new ge(s,null,i,!0))}})),a.length){for(l.sort(e),me(a),me(l),o=0,s=l.length;o<s;++o)l[o].e=i=!i
for(var h,u,c=a[0];;){for(var d=c,f=!0;d.v;)if((d=d.n)===c)return
h=d.z,r.lineStart()
do{if(d.v=d.o.v=!0,d.e){if(f)for(o=0,s=h.length;o<s;++o)r.point((u=h[o])[0],u[1])
else n(d.x,d.n.x,1,r)
d=d.n}else{if(f)for(h=d.p.z,o=h.length-1;o>=0;--o)r.point((u=h[o])[0],u[1])
else n(d.x,d.p.x,-1,r)
d=d.p}h=(d=d.o).z,f=!f}while(!d.v)
r.lineEnd()}}}function me(t){if(e=t.length){for(var e,i,n=0,r=t[0];++n<e;)r.n=i=t[n],i.p=r,r=i
r.n=i=t[0],i.p=r}}function ye(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}re.invert=re,1===(Ut=ye).length&&(qt=Ut,Ut=function(t,e){return ye(qt(t),e)})
var ve=Array.prototype
function xe(t){for(var e,i,n,r=t.length,o=-1,s=0;++o<r;)s+=t[o].length
for(i=new Array(s);--r>=0;)for(e=(n=t[r]).length;--e>=0;)i[--s]=n[e]
return i}function be(t,e,i){t=+t,e=+e,i=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+i
for(var n=-1,r=0|Math.max(0,Math.ceil((e-t)/i)),o=new Array(r);++n<r;)o[n]=t+n*i
return o}ve.slice,ve.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2)
var we=1e9,Ee=-we
function Se(t,e,i,n){function r(r,o){return t<=r&&r<=i&&e<=o&&o<=n}function o(r,o,a,l){var u=0,c=0
if(null==r||(u=s(r,a))!==(c=s(o,a))||h(r,o)<0^a>0)do{l.point(0===u||3===u?t:i,u>1?n:e)}while((u=(u+a+4)%4)!==c)
else l.point(o[0],o[1])}function s(n,r){return g(n[0]-t)<a?r>0?0:3:g(n[0]-i)<a?r>0?2:1:g(n[1]-e)<a?r>0?1:0:r>0?3:2}function l(t,e){return h(t.x,e.x)}function h(t,e){var i=s(t,1),n=s(e,1)
return i!==n?i-n:0===i?e[1]-t[1]:1===i?t[0]-e[0]:2===i?t[1]-e[1]:e[0]-t[0]}return function(s){var a,h,u,c,d,f,p,g,_,m,y,v=s,x=fe(),b={point:w,lineStart:function(){b.point=E,h&&h.push(u=[]),m=!0,_=!1,p=g=NaN},lineEnd:function(){a&&(E(c,d),f&&_&&x.rejoin(),a.push(x.result())),b.point=w,_&&v.lineEnd()},polygonStart:function(){v=x,a=[],h=[],y=!0},polygonEnd:function(){var e=function(){for(var e=0,i=0,r=h.length;i<r;++i)for(var o,s,a=h[i],l=1,u=a.length,c=a[0],d=c[0],f=c[1];l<u;++l)o=d,s=f,d=(c=a[l])[0],f=c[1],s<=n?f>n&&(d-o)*(n-s)>(f-s)*(t-o)&&++e:f<=n&&(d-o)*(n-s)<(f-s)*(t-o)&&--e
return e}(),i=y&&e,r=(a=xe(a)).length;(i||r)&&(s.polygonStart(),i&&(s.lineStart(),o(null,null,1,s),s.lineEnd()),r&&_e(a,l,e,o,s),s.polygonEnd()),v=s,a=h=u=null}}
function w(t,e){r(t,e)&&v.point(t,e)}function E(o,s){var a=r(o,s)
if(h&&u.push([o,s]),m)c=o,d=s,f=a,m=!1,a&&(v.lineStart(),v.point(o,s))
else if(a&&_)v.point(o,s)
else{var l=[p=Math.max(Ee,Math.min(we,p)),g=Math.max(Ee,Math.min(we,g))],x=[o=Math.max(Ee,Math.min(we,o)),s=Math.max(Ee,Math.min(we,s))]
!function(t,e,i,n,r,o){var s,a=t[0],l=t[1],h=0,u=1,c=e[0]-a,d=e[1]-l
if(s=i-a,c||!(s>0)){if(s/=c,c<0){if(s<h)return
s<u&&(u=s)}else if(c>0){if(s>u)return
s>h&&(h=s)}if(s=r-a,c||!(s<0)){if(s/=c,c<0){if(s>u)return
s>h&&(h=s)}else if(c>0){if(s<h)return
s<u&&(u=s)}if(s=n-l,d||!(s>0)){if(s/=d,d<0){if(s<h)return
s<u&&(u=s)}else if(d>0){if(s>u)return
s>h&&(h=s)}if(s=o-l,d||!(s<0)){if(s/=d,d<0){if(s>u)return
s>h&&(h=s)}else if(d>0){if(s<h)return
s<u&&(u=s)}return h>0&&(t[0]=a+h*c,t[1]=l+h*d),u<1&&(e[0]=a+u*c,e[1]=l+u*d),!0}}}}}(l,x,t,e,i,n)?a&&(v.lineStart(),v.point(o,s),y=!1):(_||(v.lineStart(),v.point(l[0],l[1])),v.point(x[0],x[1]),a||v.lineEnd(),y=!1)}p=o,g=s,_=a}return b}}function Ce(){var t,e,i,n=0,r=0,o=960,s=500
return i={stream:function(i){return t&&e===i?t:t=Se(n,r,o,s)(e=i)},extent:function(a){return arguments.length?(n=+a[0][0],r=+a[0][1],o=+a[1][0],s=+a[1][1],t=e=null,i):[[n,r],[o,s]]}}}var Pe=n()
function Te(t,e){var i=e[0],n=e[1],r=[E(i),-y(i),0],o=0,s=0
Pe.reset()
for(var l=0,u=t.length;l<u;++l)if(p=(f=t[l]).length)for(var f,p,g=f[p-1],_=g[0],v=g[1]/2+c,x=E(v),b=y(v),w=0;w<p;++w,_=C,x=T,b=M,g=S){var S=f[w],C=S[0],P=S[1]/2+c,T=E(P),M=y(P),A=C-_,R=A>=0?1:-1,L=R*A,O=L>h,D=x*T
if(Pe.add(m(D*R*E(L),b*M+D*y(L))),o+=O?A+R*d:A,O^_>=i^C>=i){var N=Q(K(g),K(S))
it(N)
var F=Q(r,N)
it(F)
var k=(O^A>=0?-1:1)*I(F[2]);(n>k||n===k&&(N[0]||N[1]))&&(s+=O^A>=0?1:-1)}}return(o<-a||o<a&&Pe<-a)^1&s}var Ie,Me,Ae,Re=n(),Le={sphere:A,point:A,lineStart:function(){Le.point=De,Le.lineEnd=Oe},lineEnd:A,polygonStart:A,polygonEnd:A}
function Oe(){Le.point=Le.lineEnd=A}function De(t,e){Ie=t*=p,Me=E(e*=p),Ae=y(e),Le.point=Ne}function Ne(t,e){t*=p
var i=E(e*=p),n=y(e),r=g(t-Ie),o=y(r),s=n*E(r),a=Ae*i-Me*n*o,l=Me*i+Ae*n*o
Re.add(m(C(s*s+a*a),l)),Ie=t,Me=i,Ae=n}function Fe(t){return Re.reset(),F(t,Le),+Re}var ke=[null,null],ze={type:"LineString",coordinates:ke}
function je(t,e){return ke[0]=t,ke[1]=e,Fe(ze)}var Ge={Feature:function(t,e){return Ue(t.geometry,e)},FeatureCollection:function(t,e){for(var i=t.features,n=-1,r=i.length;++n<r;)if(Ue(i[n].geometry,e))return!0
return!1}},Be={Sphere:function(){return!0},Point:function(t,e){return qe(t.coordinates,e)},MultiPoint:function(t,e){for(var i=t.coordinates,n=-1,r=i.length;++n<r;)if(qe(i[n],e))return!0
return!1},LineString:function(t,e){return Ve(t.coordinates,e)},MultiLineString:function(t,e){for(var i=t.coordinates,n=-1,r=i.length;++n<r;)if(Ve(i[n],e))return!0
return!1},Polygon:function(t,e){return Ze(t.coordinates,e)},MultiPolygon:function(t,e){for(var i=t.coordinates,n=-1,r=i.length;++n<r;)if(Ze(i[n],e))return!0
return!1},GeometryCollection:function(t,e){for(var i=t.geometries,n=-1,r=i.length;++n<r;)if(Ue(i[n],e))return!0
return!1}}
function Ue(t,e){return!(!t||!Be.hasOwnProperty(t.type))&&Be[t.type](t,e)}function qe(t,e){return 0===je(t,e)}function Ve(t,e){var i=je(t[0],t[1])
return je(t[0],e)+je(e,t[1])<=i+a}function Ze(t,e){return!!Te(t.map(We),Ye(e))}function We(t){return(t=t.map(Ye)).pop(),t}function Ye(t){return[t[0]*p,t[1]*p]}function Xe(t,e){return(t&&Ge.hasOwnProperty(t.type)?Ge[t.type]:Ue)(t,e)}function He(t,e,i){var n=be(t,e-a,i).concat(e)
return function(t){return n.map((function(e){return[t,e]}))}}function $e(t,e,i){var n=be(t,e-a,i).concat(e)
return function(t){return n.map((function(e){return[e,t]}))}}function Ke(){var t,e,i,n,r,o,s,l,h,u,c,d,f=10,p=f,_=90,m=360,y=2.5
function x(){return{type:"MultiLineString",coordinates:b()}}function b(){return be(v(n/_)*_,i,_).map(c).concat(be(v(l/m)*m,s,m).map(d)).concat(be(v(e/f)*f,t,f).filter((function(t){return g(t%_)>a})).map(h)).concat(be(v(o/p)*p,r,p).filter((function(t){return g(t%m)>a})).map(u))}return x.lines=function(){return b().map((function(t){return{type:"LineString",coordinates:t}}))},x.outline=function(){return{type:"Polygon",coordinates:[c(n).concat(d(s).slice(1),c(i).reverse().slice(1),d(l).reverse().slice(1))]}},x.extent=function(t){return arguments.length?x.extentMajor(t).extentMinor(t):x.extentMinor()},x.extentMajor=function(t){return arguments.length?(n=+t[0][0],i=+t[1][0],l=+t[0][1],s=+t[1][1],n>i&&(t=n,n=i,i=t),l>s&&(t=l,l=s,s=t),x.precision(y)):[[n,l],[i,s]]},x.extentMinor=function(i){return arguments.length?(e=+i[0][0],t=+i[1][0],o=+i[0][1],r=+i[1][1],e>t&&(i=e,e=t,t=i),o>r&&(i=o,o=r,r=i),x.precision(y)):[[e,o],[t,r]]},x.step=function(t){return arguments.length?x.stepMajor(t).stepMinor(t):x.stepMinor()},x.stepMajor=function(t){return arguments.length?(_=+t[0],m=+t[1],x):[_,m]},x.stepMinor=function(t){return arguments.length?(f=+t[0],p=+t[1],x):[f,p]},x.precision=function(a){return arguments.length?(y=+a,h=He(o,r,90),u=$e(e,t,y),c=He(l,s,90),d=$e(n,i,y),x):y},x.extentMajor([[-180,-90+a],[180,90-a]]).extentMinor([[-180,-80-a],[180,80+a]])}function Je(){return Ke()()}function Qe(t,e){var i=t[0]*p,n=t[1]*p,r=e[0]*p,o=e[1]*p,s=y(n),a=E(n),l=y(o),h=E(o),u=s*y(i),c=s*E(i),d=l*y(r),g=l*E(r),_=2*I(C(M(o-n)+s*l*M(r-i))),v=E(_),x=_?function(t){var e=E(t*=_)/v,i=E(_-t)/v,n=i*u+e*d,r=i*c+e*g,o=i*a+e*h
return[m(r,n)*f,m(o,C(n*n+r*r))*f]}:function(){return[i*f,n*f]}
return x.distance=_,x}function ti(t){return t}var ei,ii,ni,ri,oi=n(),si=n(),ai={point:A,lineStart:A,lineEnd:A,polygonStart:function(){ai.lineStart=li,ai.lineEnd=ci},polygonEnd:function(){ai.lineStart=ai.lineEnd=ai.point=A,oi.add(g(si)),si.reset()},result:function(){var t=oi/2
return oi.reset(),t}}
function li(){ai.point=hi}function hi(t,e){ai.point=ui,ei=ni=t,ii=ri=e}function ui(t,e){si.add(ri*t-ni*e),ni=t,ri=e}function ci(){ui(ei,ii)}const di=ai
var fi=1/0,pi=fi,gi=-fi,_i=gi,mi={point:function(t,e){t<fi&&(fi=t),t>gi&&(gi=t),e<pi&&(pi=e),e>_i&&(_i=e)},lineStart:A,lineEnd:A,polygonStart:A,polygonEnd:A,result:function(){var t=[[fi,pi],[gi,_i]]
return gi=_i=-(pi=fi=1/0),t}}
const yi=mi
var vi,xi,bi,wi,Ei=0,Si=0,Ci=0,Pi=0,Ti=0,Ii=0,Mi=0,Ai=0,Ri=0,Li={point:Oi,lineStart:Di,lineEnd:ki,polygonStart:function(){Li.lineStart=zi,Li.lineEnd=ji},polygonEnd:function(){Li.point=Oi,Li.lineStart=Di,Li.lineEnd=ki},result:function(){var t=Ri?[Mi/Ri,Ai/Ri]:Ii?[Pi/Ii,Ti/Ii]:Ci?[Ei/Ci,Si/Ci]:[NaN,NaN]
return Ei=Si=Ci=Pi=Ti=Ii=Mi=Ai=Ri=0,t}}
function Oi(t,e){Ei+=t,Si+=e,++Ci}function Di(){Li.point=Ni}function Ni(t,e){Li.point=Fi,Oi(bi=t,wi=e)}function Fi(t,e){var i=t-bi,n=e-wi,r=C(i*i+n*n)
Pi+=r*(bi+t)/2,Ti+=r*(wi+e)/2,Ii+=r,Oi(bi=t,wi=e)}function ki(){Li.point=Oi}function zi(){Li.point=Gi}function ji(){Bi(vi,xi)}function Gi(t,e){Li.point=Bi,Oi(vi=bi=t,xi=wi=e)}function Bi(t,e){var i=t-bi,n=e-wi,r=C(i*i+n*n)
Pi+=r*(bi+t)/2,Ti+=r*(wi+e)/2,Ii+=r,Mi+=(r=wi*t-bi*e)*(bi+t),Ai+=r*(wi+e),Ri+=3*r,Oi(bi=t,wi=e)}const Ui=Li
function qi(t){this._context=t}qi.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1
break
case 1:this._context.lineTo(t,e)
break
default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,d)}},result:A}
var Vi,Zi,Wi,Yi,Xi,Hi=n(),$i={point:A,lineStart:function(){$i.point=Ki},lineEnd:function(){Vi&&Ji(Zi,Wi),$i.point=A},polygonStart:function(){Vi=!0},polygonEnd:function(){Vi=null},result:function(){var t=+Hi
return Hi.reset(),t}}
function Ki(t,e){$i.point=Ji,Zi=Yi=t,Wi=Xi=e}function Ji(t,e){Yi-=t,Xi-=e,Hi.add(C(Yi*Yi+Xi*Xi)),Yi=t,Xi=e}const Qi=$i
function tn(){this._string=[]}function en(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function nn(t,e){var i,n,r=4.5
function o(t){return t&&("function"==typeof r&&n.pointRadius(+r.apply(this,arguments)),F(t,i(n))),n.result()}return o.area=function(t){return F(t,i(di)),di.result()},o.measure=function(t){return F(t,i(Qi)),Qi.result()},o.bounds=function(t){return F(t,i(yi)),yi.result()},o.centroid=function(t){return F(t,i(Ui)),Ui.result()},o.projection=function(e){return arguments.length?(i=null==e?(t=null,ti):(t=e).stream,o):t},o.context=function(t){return arguments.length?(n=null==t?(e=null,new tn):new qi(e=t),"function"!=typeof r&&n.pointRadius(r),o):e},o.pointRadius=function(t){return arguments.length?(r="function"==typeof t?t:(n.pointRadius(+t),+t),o):r},o.projection(t).context(e)}function rn(t,e,i,n){return function(r,o){var s,a,l,h=e(o),u=r.invert(n[0],n[1]),c=fe(),d=e(c),f=!1,p={point:g,lineStart:m,lineEnd:y,polygonStart:function(){p.point=v,p.lineStart=x,p.lineEnd=b,a=[],s=[]},polygonEnd:function(){p.point=g,p.lineStart=m,p.lineEnd=y,a=xe(a)
var t=Te(s,u)
a.length?(f||(o.polygonStart(),f=!0),_e(a,sn,t,i,o)):t&&(f||(o.polygonStart(),f=!0),o.lineStart(),i(null,null,1,o),o.lineEnd()),f&&(o.polygonEnd(),f=!1),a=s=null},sphere:function(){o.polygonStart(),o.lineStart(),i(null,null,1,o),o.lineEnd(),o.polygonEnd()}}
function g(e,i){var n=r(e,i)
t(e=n[0],i=n[1])&&o.point(e,i)}function _(t,e){var i=r(t,e)
h.point(i[0],i[1])}function m(){p.point=_,h.lineStart()}function y(){p.point=g,h.lineEnd()}function v(t,e){l.push([t,e])
var i=r(t,e)
d.point(i[0],i[1])}function x(){d.lineStart(),l=[]}function b(){v(l[0][0],l[0][1]),d.lineEnd()
var t,e,i,n,r=d.clean(),h=c.result(),u=h.length
if(l.pop(),s.push(l),l=null,u)if(1&r){if((e=(i=h[0]).length-1)>0){for(f||(o.polygonStart(),f=!0),o.lineStart(),t=0;t<e;++t)o.point((n=i[t])[0],n[1])
o.lineEnd()}}else u>1&&2&r&&h.push(h.pop().concat(h.shift())),a.push(h.filter(on))}return p}}function on(t){return t.length>1}function sn(t,e){return((t=t.x)[0]<0?t[1]-u-a:u-t[1])-((e=e.x)[0]<0?e[1]-u-a:u-e[1])}tn.prototype={_radius:4.5,_circle:en(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1
break
case 1:this._string.push("L",t,",",e)
break
default:null==this._circle&&(this._circle=en(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("")
return this._string=[],t}return null}}
const an=rn((function(){return!0}),(function(t){var e,i=NaN,n=NaN,r=NaN
return{lineStart:function(){t.lineStart(),e=1},point:function(o,s){var l=o>0?h:-h,c=g(o-i)
g(c-h)<a?(t.point(i,n=(n+s)/2>0?u:-u),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(l,n),t.point(o,n),e=0):r!==l&&c>=h&&(g(i-r)<a&&(i-=r*a),g(o-l)<a&&(o-=l*a),n=function(t,e,i,n){var r,o,s=E(t-i)
return g(s)>a?_((E(e)*(o=y(n))*E(i)-E(n)*(r=y(e))*E(t))/(r*o*s)):(e+n)/2}(i,n,o,s),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(l,n),e=0),t.point(i=o,n=s),r=l},lineEnd:function(){t.lineEnd(),i=n=NaN},clean:function(){return 2-e}}}),(function(t,e,i,n){var r
if(null==t)r=i*u,n.point(-h,r),n.point(0,r),n.point(h,r),n.point(h,0),n.point(h,-r),n.point(0,-r),n.point(-h,-r),n.point(-h,0),n.point(-h,r)
else if(g(t[0]-e[0])>a){var o=t[0]<e[0]?h:-h
r=i*o/2,n.point(-o,r),n.point(0,r),n.point(o,r)}else n.point(e[0],e[1])}),[-h,-u])
function ln(t){return{stream:hn(t)}}function hn(t){return function(e){var i=new un
for(var n in t)i[n]=t[n]
return i.stream=e,i}}function un(){}function cn(t,e,i){var n=e[1][0]-e[0][0],r=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent()
t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),F(i,t.stream(yi))
var s=yi.result(),a=Math.min(n/(s[1][0]-s[0][0]),r/(s[1][1]-s[0][1])),l=+e[0][0]+(n-a*(s[1][0]+s[0][0]))/2,h=+e[0][1]+(r-a*(s[1][1]+s[0][1]))/2
return null!=o&&t.clipExtent(o),t.scale(150*a).translate([l,h])}function dn(t,e,i){return cn(t,[[0,0],e],i)}un.prototype={constructor:un,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}
var fn=16,pn=y(30*p)
function gn(t,e){return+e?function(t,e){function i(n,r,o,s,l,h,u,c,d,f,p,_,y,v){var x=u-n,b=c-r,w=x*x+b*b
if(w>4*e&&y--){var E=s+f,S=l+p,P=h+_,T=C(E*E+S*S+P*P),M=I(P/=T),A=g(g(P)-1)<a||g(o-d)<a?(o+d)/2:m(S,E),R=t(A,M),L=R[0],O=R[1],D=L-n,N=O-r,F=b*D-x*N;(F*F/w>e||g((x*D+b*N)/w-.5)>.3||s*f+l*p+h*_<pn)&&(i(n,r,o,s,l,h,L,O,A,E/=T,S/=T,P,y,v),v.point(L,O),i(L,O,A,E,S,P,u,c,d,f,p,_,y,v))}}return function(e){var n,r,o,s,a,l,h,u,c,d,f,p,g={point:_,lineStart:m,lineEnd:v,polygonStart:function(){e.polygonStart(),g.lineStart=x},polygonEnd:function(){e.polygonEnd(),g.lineStart=m}}
function _(i,n){i=t(i,n),e.point(i[0],i[1])}function m(){u=NaN,g.point=y,e.lineStart()}function y(n,r){var o=K([n,r]),s=t(n,r)
i(u,c,h,d,f,p,u=s[0],c=s[1],h=n,d=o[0],f=o[1],p=o[2],fn,e),e.point(u,c)}function v(){g.point=_,e.lineEnd()}function x(){m(),g.point=b,g.lineEnd=w}function b(t,e){y(n=t,e),r=u,o=c,s=d,a=f,l=p,g.point=y}function w(){i(u,c,h,d,f,p,r,o,n,s,a,l,fn,e),g.lineEnd=v,v()}return g}}(t,e):function(t){return hn({point:function(e,i){e=t(e,i),this.stream.point(e[0],e[1])}})}(t)}var _n=hn({point:function(t,e){this.stream.point(t*p,e*p)}})
function mn(t){return yn((function(){return t}))()}function yn(t){var e,i,n,r,o,s,l,u,c,d,_=150,m=480,v=250,x=0,b=0,w=0,E=0,S=0,P=null,T=an,I=null,M=ti,A=.5,R=gn(D,A)
function L(t){return[(t=o(t[0]*p,t[1]*p))[0]*_+i,n-t[1]*_]}function O(t){return(t=o.invert((t[0]-i)/_,(n-t[1])/_))&&[t[0]*f,t[1]*f]}function D(t,r){return[(t=e(t,r))[0]*_+i,n-t[1]*_]}function N(){o=ne(r=oe(w,E,S),e)
var t=e(x,b)
return i=m-t[0]*_,n=v+t[1]*_,F()}function F(){return c=d=null,L}return L.stream=function(t){return c&&d===t?c:c=_n(T(r,R(M(d=t))))},L.clipAngle=function(t){return arguments.length?(T=+t?function(t,e){var i=y(t),n=i>0,r=g(i)>a
function o(t,e){return y(t)*y(e)>i}function s(t,e,n){var r=[1,0,0],o=Q(K(t),K(e)),s=J(o,o),l=o[0],u=s-l*l
if(!u)return!n&&t
var c=i*s/u,d=-i*l/u,f=Q(r,o),p=et(r,c)
tt(p,et(o,d))
var _=f,m=J(p,_),y=J(_,_),v=m*m-y*(J(p,p)-1)
if(!(v<0)){var x=C(v),b=et(_,(-m-x)/y)
if(tt(b,p),b=$(b),!n)return b
var w,E=t[0],S=e[0],P=t[1],T=e[1]
S<E&&(w=E,E=S,S=w)
var I=S-E,M=g(I-h)<a
if(!M&&T<P&&(w=P,P=T,T=w),M||I<a?M?P+T>0^b[1]<(g(b[0]-E)<a?P:T):P<=b[1]&&b[1]<=T:I>h^(E<=b[0]&&b[0]<=S)){var A=et(_,(-m+x)/y)
return tt(A,p),[b,$(A)]}}}function l(e,i){var r=n?t:h-t,o=0
return e<-r?o|=1:e>r&&(o|=2),i<-r?o|=4:i>r&&(o|=8),o}return rn(o,(function(t){var e,i,u,c,d
return{lineStart:function(){c=u=!1,d=1},point:function(f,p){var g,_=[f,p],m=o(f,p),y=n?m?0:l(f,p):m?l(f+(f<0?h:-h),p):0
if(!e&&(c=u=m)&&t.lineStart(),m!==u&&(!(g=s(e,_))||pe(e,g)||pe(_,g))&&(_[0]+=a,_[1]+=a,m=o(_[0],_[1])),m!==u)d=0,m?(t.lineStart(),g=s(_,e),t.point(g[0],g[1])):(g=s(e,_),t.point(g[0],g[1]),t.lineEnd()),e=g
else if(r&&e&&n^m){var v
y&i||!(v=s(_,e,!0))||(d=0,n?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!m||e&&pe(e,_)||t.point(_[0],_[1]),e=_,u=m,i=y},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return d|(c&&u)<<1}}}),(function(i,n,r,o){ue(o,t,e,r,i,n)}),n?[0,-t]:[-h,t-h])}(P=t*p,6*p):(P=null,an),F()):P*f},L.clipExtent=function(t){return arguments.length?(M=null==t?(I=s=l=u=null,ti):Se(I=+t[0][0],s=+t[0][1],l=+t[1][0],u=+t[1][1]),F()):null==I?null:[[I,s],[l,u]]},L.scale=function(t){return arguments.length?(_=+t,N()):_},L.translate=function(t){return arguments.length?(m=+t[0],v=+t[1],N()):[m,v]},L.center=function(t){return arguments.length?(x=t[0]%360*p,b=t[1]%360*p,N()):[x*f,b*f]},L.rotate=function(t){return arguments.length?(w=t[0]%360*p,E=t[1]%360*p,S=t.length>2?t[2]%360*p:0,N()):[w*f,E*f,S*f]},L.precision=function(t){return arguments.length?(R=gn(D,A=t*t),F()):C(A)},L.fitExtent=function(t,e){return cn(L,t,e)},L.fitSize=function(t,e){return dn(L,t,e)},function(){return e=t.apply(this,arguments),L.invert=e.invert&&O,N()}}function vn(t){var e=0,i=h/3,n=yn(t),r=n(e,i)
return r.parallels=function(t){return arguments.length?n(e=t[0]*p,i=t[1]*p):[e*f,i*f]},r}function xn(t,e){var i=E(t),n=(i+E(e))/2
if(g(n)<a)return function(t){var e=y(t)
function i(t,i){return[t*e,E(i)/e]}return i.invert=function(t,i){return[t/e,I(i*e)]},i}(t)
var r=1+i*(2*n-i),o=C(r)/n
function s(t,e){var i=C(r-2*n*E(e))/n
return[i*E(t*=n),o-i*y(t)]}return s.invert=function(t,e){var i=o-e
return[m(t,g(i))/n*S(i),I((r-(t*t+i*i)*n*n)/(2*n))]},s}function bn(){return vn(xn).scale(155.424).center([0,33.6442])}function wn(){return bn().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function En(){var t,e,i,n,r,o,s=wn(),l=bn().rotate([154,0]).center([-2,58.5]).parallels([55,65]),h=bn().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(t,e){o=[t,e]}}
function c(t){var e=t[0],s=t[1]
return o=null,i.point(e,s),o||(n.point(e,s),o)||(r.point(e,s),o)}function d(){return t=e=null,c}return c.invert=function(t){var e=s.scale(),i=s.translate(),n=(t[0]-i[0])/e,r=(t[1]-i[1])/e
return(r>=.12&&r<.234&&n>=-.425&&n<-.214?l:r>=.166&&r<.234&&n>=-.214&&n<-.115?h:s).invert(t)},c.stream=function(i){return t&&e===i?t:(n=[s.stream(e=i),l.stream(i),h.stream(i)],r=n.length,t={point:function(t,e){for(var i=-1;++i<r;)n[i].point(t,e)},sphere:function(){for(var t=-1;++t<r;)n[t].sphere()},lineStart:function(){for(var t=-1;++t<r;)n[t].lineStart()},lineEnd:function(){for(var t=-1;++t<r;)n[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<r;)n[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<r;)n[t].polygonEnd()}})
var n,r},c.precision=function(t){return arguments.length?(s.precision(t),l.precision(t),h.precision(t),d()):s.precision()},c.scale=function(t){return arguments.length?(s.scale(t),l.scale(.35*t),h.scale(t),c.translate(s.translate())):s.scale()},c.translate=function(t){if(!arguments.length)return s.translate()
var e=s.scale(),o=+t[0],c=+t[1]
return i=s.translate(t).clipExtent([[o-.455*e,c-.238*e],[o+.455*e,c+.238*e]]).stream(u),n=l.translate([o-.307*e,c+.201*e]).clipExtent([[o-.425*e+a,c+.12*e+a],[o-.214*e-a,c+.234*e-a]]).stream(u),r=h.translate([o-.205*e,c+.212*e]).clipExtent([[o-.214*e+a,c+.166*e+a],[o-.115*e-a,c+.234*e-a]]).stream(u),d()},c.fitExtent=function(t,e){return cn(c,t,e)},c.fitSize=function(t,e){return dn(c,t,e)},c.scale(1070)}function Sn(t){return function(e,i){var n=y(e),r=y(i),o=t(n*r)
return[o*r*E(e),o*E(i)]}}function Cn(t){return function(e,i){var n=C(e*e+i*i),r=t(n),o=E(r),s=y(r)
return[m(e*o,n*s),I(n&&i*o/n)]}}var Pn=Sn((function(t){return C(2/(1+t))}))
function Tn(){return mn(Pn).scale(124.75).clipAngle(179.999)}Pn.invert=Cn((function(t){return 2*I(t/2)}))
var In=Sn((function(t){return(t=T(t))&&t/E(t)}))
function Mn(){return mn(In).scale(79.4188).clipAngle(179.999)}function An(t,e){return[t,b(P((u+e)/2))]}function Rn(){return Ln(An).scale(961/d)}function Ln(t){var e,i,n,r=mn(t),o=r.center,s=r.scale,a=r.translate,l=r.clipExtent,u=null
function c(){var o=h*s(),a=r(he(r.rotate()).invert([0,0]))
return l(null==u?[[a[0]-o,a[1]-o],[a[0]+o,a[1]+o]]:t===An?[[Math.max(a[0]-o,u),e],[Math.min(a[0]+o,i),n]]:[[u,Math.max(a[1]-o,e)],[i,Math.min(a[1]+o,n)]])}return r.scale=function(t){return arguments.length?(s(t),c()):s()},r.translate=function(t){return arguments.length?(a(t),c()):a()},r.center=function(t){return arguments.length?(o(t),c()):o()},r.clipExtent=function(t){return arguments.length?(null==t?u=e=i=n=null:(u=+t[0][0],e=+t[0][1],i=+t[1][0],n=+t[1][1]),c()):null==u?null:[[u,e],[i,n]]},c()}function On(t){return P((u+t)/2)}function Dn(t,e){var i=y(t),n=t===e?E(t):b(i/y(e))/b(On(e)/On(t)),r=i*w(On(t),n)/n
if(!n)return An
function o(t,e){r>0?e<-u+a&&(e=-u+a):e>u-a&&(e=u-a)
var i=r/w(On(e),n)
return[i*E(n*t),r-i*y(n*t)]}return o.invert=function(t,e){var i=r-e,o=S(n)*C(t*t+i*i)
return[m(t,g(i))/n*S(i),2*_(w(r/o,1/n))-u]},o}function Nn(){return vn(Dn).scale(109.5).parallels([30,30])}function Fn(t,e){return[t,e]}function kn(){return mn(Fn).scale(152.63)}function zn(t,e){var i=y(t),n=t===e?E(t):(i-y(e))/(e-t),r=i/n+t
if(g(n)<a)return Fn
function o(t,e){var i=r-e,o=n*t
return[i*E(o),r-i*y(o)]}return o.invert=function(t,e){var i=r-e
return[m(t,g(i))/n*S(i),r-S(n)*C(t*t+i*i)]},o}function jn(){return vn(zn).scale(131.154).center([0,13.9389])}function Gn(t,e){var i=y(e),n=y(t)*i
return[i*E(t)/n,E(e)/n]}function Bn(){return mn(Gn).scale(144.049).clipAngle(60)}function Un(t,e,i,n){return 1===t&&1===e&&0===i&&0===n?ti:hn({point:function(r,o){this.stream.point(r*t+i,o*e+n)}})}function qn(){var t,e,i,n,r,o,s=1,a=0,l=0,h=1,u=1,c=ti,d=null,f=ti
function p(){return n=r=null,o}return o={stream:function(t){return n&&r===t?n:n=c(f(r=t))},clipExtent:function(n){return arguments.length?(f=null==n?(d=t=e=i=null,ti):Se(d=+n[0][0],t=+n[0][1],e=+n[1][0],i=+n[1][1]),p()):null==d?null:[[d,t],[e,i]]},scale:function(t){return arguments.length?(c=Un((s=+t)*h,s*u,a,l),p()):s},translate:function(t){return arguments.length?(c=Un(s*h,s*u,a=+t[0],l=+t[1]),p()):[a,l]},reflectX:function(t){return arguments.length?(c=Un(s*(h=t?-1:1),s*u,a,l),p()):h<0},reflectY:function(t){return arguments.length?(c=Un(s*h,s*(u=t?-1:1),a,l),p()):u<0},fitExtent:function(t,e){return cn(o,t,e)},fitSize:function(t,e){return dn(o,t,e)}}}function Vn(t,e){var i=e*e,n=i*i
return[t*(.8707-.131979*i+n*(n*(.003971*i-.001529*n)-.013791)),e*(1.007226+i*(.015085+n*(.028874*i-.044475-.005916*n)))]}function Zn(){return mn(Vn).scale(175.295)}function Wn(t,e){return[y(e)*E(t),E(e)]}function Yn(){return mn(Wn).scale(249.5).clipAngle(90+a)}function Xn(t,e){var i=y(e),n=1+y(t)*i
return[i*E(t)/n,E(e)/n]}function Hn(){return mn(Xn).scale(250).clipAngle(142)}function $n(t,e){return[b(P((u+e)/2)),-t]}function Kn(){var t=Ln($n),e=t.center,i=t.rotate
return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?i([t[0],t[1],t.length>2?t[2]+90:90]):[(t=i())[0],t[1],t[2]-90]},i([0,0,90]).scale(159.155)}In.invert=Cn((function(t){return t})),An.invert=function(t,e){return[t,2*_(x(e))-u]},Fn.invert=Fn,Gn.invert=Cn(_),Vn.invert=function(t,e){var i,n=e,r=25
do{var o=n*n,s=o*o
n-=i=(n*(1.007226+o*(.015085+s*(.028874*o-.044475-.005916*s)))-e)/(1.007226+o*(.045255+s*(.259866*o-.311325-.005916*11*s)))}while(g(i)>a&&--r>0)
return[t/(.8707+(o=n*n)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),n]},Wn.invert=Cn(I),Xn.invert=Cn((function(t){return 2*_(t)})),$n.invert=function(t,e){return[-e,2*_(x(t))-u]}},8496:(t,e,i)=>{"use strict"
function n(t){return function(){return t}}function r(t){return t[0]}function o(t){return t[1]}function s(){this._=null}function a(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function l(t,e){var i=e,n=e.R,r=i.U
r?r.L===i?r.L=n:r.R=n:t._=n,n.U=r,i.U=n,i.R=n.L,i.R&&(i.R.U=i),n.L=i}function h(t,e){var i=e,n=e.L,r=i.U
r?r.L===i?r.L=n:r.R=n:t._=n,n.U=r,i.U=n,i.L=n.R,i.L&&(i.L.U=i),n.R=i}function u(t){for(;t.L;)t=t.L
return t}i.r(e),i.d(e,{voronoi:()=>B}),s.prototype={constructor:s,insert:function(t,e){var i,n,r
if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L
t.L=e}else t.R=e
i=t}else this._?(t=u(this._),e.P=null,e.N=t,t.P=t.L=e,i=t):(e.P=e.N=null,this._=e,i=null)
for(e.L=e.R=null,e.U=i,e.C=!0,t=e;i&&i.C;)i===(n=i.U).L?(r=n.R)&&r.C?(i.C=r.C=!1,n.C=!0,t=n):(t===i.R&&(l(this,i),i=(t=i).U),i.C=!1,n.C=!0,h(this,n)):(r=n.L)&&r.C?(i.C=r.C=!1,n.C=!0,t=n):(t===i.L&&(h(this,i),i=(t=i).U),i.C=!1,n.C=!0,l(this,n)),i=t.U
this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null
var e,i,n,r=t.U,o=t.L,s=t.R
if(i=o?s?u(s):o:s,r?r.L===t?r.L=i:r.R=i:this._=i,o&&s?(n=i.C,i.C=t.C,i.L=o,o.U=i,i!==s?(r=i.U,i.U=t.U,t=i.R,r.L=t,i.R=s,s.U=i):(i.U=r,r=i,t=i.R)):(n=t.C,t=i),t&&(t.U=r),!n)if(t&&t.C)t.C=!1
else{do{if(t===this._)break
if(t===r.L){if((e=r.R).C&&(e.C=!1,r.C=!0,l(this,r),e=r.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,h(this,e),e=r.R),e.C=r.C,r.C=e.R.C=!1,l(this,r),t=this._
break}}else if((e=r.L).C&&(e.C=!1,r.C=!0,h(this,r),e=r.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,l(this,e),e=r.L),e.C=r.C,r.C=e.L.C=!1,h(this,r),t=this._
break}e.C=!0,t=r,r=r.U}while(!t.C)
t&&(t.C=!1)}}}
const c=s
function d(t,e,i,n){var r=[null,null],o=F.push(r)-1
return r.left=t,r.right=e,i&&p(r,t,e,i),n&&p(r,e,t,n),D[t.index].halfedges.push(o),D[e.index].halfedges.push(o),r}function f(t,e,i){var n=[e,i]
return n.left=t,n}function p(t,e,i,n){t[0]||t[1]?t.left===i?t[1]=n:t[0]=n:(t[0]=n,t.left=e,t.right=i)}function g(t,e,i,n,r){var o,s=t[0],a=t[1],l=s[0],h=s[1],u=0,c=1,d=a[0]-l,f=a[1]-h
if(o=e-l,d||!(o>0)){if(o/=d,d<0){if(o<u)return
o<c&&(c=o)}else if(d>0){if(o>c)return
o>u&&(u=o)}if(o=n-l,d||!(o<0)){if(o/=d,d<0){if(o>c)return
o>u&&(u=o)}else if(d>0){if(o<u)return
o<c&&(c=o)}if(o=i-h,f||!(o>0)){if(o/=f,f<0){if(o<u)return
o<c&&(c=o)}else if(f>0){if(o>c)return
o>u&&(u=o)}if(o=r-h,f||!(o<0)){if(o/=f,f<0){if(o>c)return
o>u&&(u=o)}else if(f>0){if(o<u)return
o<c&&(c=o)}return!(u>0||c<1)||(u>0&&(t[0]=[l+u*d,h+u*f]),c<1&&(t[1]=[l+c*d,h+c*f]),!0)}}}}}function _(t,e,i,n,r){var o=t[1]
if(o)return!0
var s,a,l=t[0],h=t.left,u=t.right,c=h[0],d=h[1],f=u[0],p=u[1],g=(c+f)/2,_=(d+p)/2
if(p===d){if(g<e||g>=n)return
if(c>f){if(l){if(l[1]>=r)return}else l=[g,i]
o=[g,r]}else{if(l){if(l[1]<i)return}else l=[g,r]
o=[g,i]}}else if(a=_-(s=(c-f)/(p-d))*g,s<-1||s>1)if(c>f){if(l){if(l[1]>=r)return}else l=[(i-a)/s,i]
o=[(r-a)/s,r]}else{if(l){if(l[1]<i)return}else l=[(r-a)/s,r]
o=[(i-a)/s,i]}else if(d<p){if(l){if(l[0]>=n)return}else l=[e,s*e+a]
o=[n,s*n+a]}else{if(l){if(l[0]<e)return}else l=[n,s*n+a]
o=[e,s*e+a]}return t[0]=l,t[1]=o,!0}function m(t,e){var i=t.site,n=e.left,r=e.right
return i===r&&(r=n,n=i),r?Math.atan2(r[1]-n[1],r[0]-n[0]):(i===n?(n=e[1],r=e[0]):(n=e[0],r=e[1]),Math.atan2(n[0]-r[0],r[1]-n[1]))}function y(t,e){return e[+(e.left!==t.site)]}function v(t,e){return e[+(e.left===t.site)]}var x,b=[]
function w(){a(this),this.x=this.y=this.arc=this.site=this.cy=null}function E(t){var e=t.P,i=t.N
if(e&&i){var n=e.site,r=t.site,o=i.site
if(n!==o){var s=r[0],a=r[1],l=n[0]-s,h=n[1]-a,u=o[0]-s,c=o[1]-a,d=2*(l*c-h*u)
if(!(d>=-z)){var f=l*l+h*h,p=u*u+c*c,g=(c*f-h*p)/d,_=(l*p-u*f)/d,m=b.pop()||new w
m.arc=t,m.site=r,m.x=g+s,m.y=(m.cy=_+a)+Math.sqrt(g*g+_*_),t.circle=m
for(var y=null,v=N._;v;)if(m.y<v.y||m.y===v.y&&m.x<=v.x){if(!v.L){y=v.P
break}v=v.L}else{if(!v.R){y=v
break}v=v.R}N.insert(y,m),y||(x=m)}}}}function S(t){var e=t.circle
e&&(e.P||(x=e.N),N.remove(e),b.push(e),a(e),t.circle=null)}var C=[]
function P(){a(this),this.edge=this.site=this.circle=null}function T(t){var e=C.pop()||new P
return e.site=t,e}function I(t){S(t),O.remove(t),C.push(t),a(t)}function M(t){var e=t.circle,i=e.x,n=e.cy,r=[i,n],o=t.P,s=t.N,a=[t]
I(t)
for(var l=o;l.circle&&Math.abs(i-l.circle.x)<k&&Math.abs(n-l.circle.cy)<k;)o=l.P,a.unshift(l),I(l),l=o
a.unshift(l),S(l)
for(var h=s;h.circle&&Math.abs(i-h.circle.x)<k&&Math.abs(n-h.circle.cy)<k;)s=h.N,a.push(h),I(h),h=s
a.push(h),S(h)
var u,c=a.length
for(u=1;u<c;++u)h=a[u],l=a[u-1],p(h.edge,l.site,h.site,r)
l=a[0],(h=a[c-1]).edge=d(l.site,h.site,null,r),E(l),E(h)}function A(t){for(var e,i,n,r,o=t[0],s=t[1],a=O._;a;)if((n=R(a,s)-o)>k)a=a.L
else{if(!((r=o-L(a,s))>k)){n>-k?(e=a.P,i=a):r>-k?(e=a,i=a.N):e=i=a
break}if(!a.R){e=a
break}a=a.R}!function(t){D[t.index]={site:t,halfedges:[]}}(t)
var l=T(t)
if(O.insert(e,l),e||i){if(e===i)return S(e),i=T(e.site),O.insert(l,i),l.edge=i.edge=d(e.site,l.site),E(e),void E(i)
if(i){S(e),S(i)
var h=e.site,u=h[0],c=h[1],f=t[0]-u,g=t[1]-c,_=i.site,m=_[0]-u,y=_[1]-c,v=2*(f*y-g*m),x=f*f+g*g,b=m*m+y*y,w=[(y*x-g*b)/v+u,(f*b-m*x)/v+c]
p(i.edge,h,_,w),l.edge=d(h,t,null,w),i.edge=d(t,_,null,w),E(e),E(i)}else l.edge=d(e.site,l.site)}}function R(t,e){var i=t.site,n=i[0],r=i[1],o=r-e
if(!o)return n
var s=t.P
if(!s)return-1/0
var a=(i=s.site)[0],l=i[1],h=l-e
if(!h)return a
var u=a-n,c=1/o-1/h,d=u/h
return c?(-d+Math.sqrt(d*d-2*c*(u*u/(-2*h)-l+h/2+r-o/2)))/c+n:(n+a)/2}function L(t,e){var i=t.N
if(i)return R(i,e)
var n=t.site
return n[1]===e?n[0]:1/0}var O,D,N,F,k=1e-6,z=1e-12
function j(t,e){return e[1]-t[1]||e[0]-t[0]}function G(t,e){var i,n,r,o=t.sort(j).pop()
for(F=[],D=new Array(t.length),O=new c,N=new c;;)if(r=x,o&&(!r||o[1]<r.y||o[1]===r.y&&o[0]<r.x))o[0]===i&&o[1]===n||(A(o),i=o[0],n=o[1]),o=t.pop()
else{if(!r)break
M(r.arc)}if(function(){for(var t,e,i,n,r=0,o=D.length;r<o;++r)if((t=D[r])&&(n=(e=t.halfedges).length)){var s=new Array(n),a=new Array(n)
for(i=0;i<n;++i)s[i]=i,a[i]=m(t,F[e[i]])
for(s.sort((function(t,e){return a[e]-a[t]})),i=0;i<n;++i)a[i]=e[s[i]]
for(i=0;i<n;++i)e[i]=a[i]}}(),e){var s=+e[0][0],a=+e[0][1],l=+e[1][0],h=+e[1][1]
!function(t,e,i,n){for(var r,o=F.length;o--;)_(r=F[o],t,e,i,n)&&g(r,t,e,i,n)&&(Math.abs(r[0][0]-r[1][0])>k||Math.abs(r[0][1]-r[1][1])>k)||delete F[o]}(s,a,l,h),function(t,e,i,n){var r,o,s,a,l,h,u,c,d,p,g,_,m=D.length,x=!0
for(r=0;r<m;++r)if(o=D[r]){for(s=o.site,a=(l=o.halfedges).length;a--;)F[l[a]]||l.splice(a,1)
for(a=0,h=l.length;a<h;)g=(p=v(o,F[l[a]]))[0],_=p[1],c=(u=y(o,F[l[++a%h]]))[0],d=u[1],(Math.abs(g-c)>k||Math.abs(_-d)>k)&&(l.splice(a,0,F.push(f(s,p,Math.abs(g-t)<k&&n-_>k?[t,Math.abs(c-t)<k?d:n]:Math.abs(_-n)<k&&i-g>k?[Math.abs(d-n)<k?c:i,n]:Math.abs(g-i)<k&&_-e>k?[i,Math.abs(c-i)<k?d:e]:Math.abs(_-e)<k&&g-t>k?[Math.abs(d-e)<k?c:t,e]:null))-1),++h)
h&&(x=!1)}if(x){var b,w,E,S=1/0
for(r=0,x=null;r<m;++r)(o=D[r])&&(E=(b=(s=o.site)[0]-t)*b+(w=s[1]-e)*w)<S&&(S=E,x=o)
if(x){var C=[t,e],P=[t,n],T=[i,n],I=[i,e]
x.halfedges.push(F.push(f(s=x.site,C,P))-1,F.push(f(s,P,T))-1,F.push(f(s,T,I))-1,F.push(f(s,I,C))-1)}}for(r=0;r<m;++r)(o=D[r])&&(o.halfedges.length||delete D[r])}(s,a,l,h)}this.edges=F,this.cells=D,O=N=F=D=null}function B(){var t=r,e=o,i=null
function s(n){return new G(n.map((function(i,r){var o=[Math.round(t(i,r,n)/k)*k,Math.round(e(i,r,n)/k)*k]
return o.index=r,o.data=i,o})),i)}return s.polygons=function(t){return s(t).polygons()},s.links=function(t){return s(t).links()},s.triangles=function(t){return s(t).triangles()},s.x=function(e){return arguments.length?(t="function"==typeof e?e:n(+e),s):t},s.y=function(t){return arguments.length?(e="function"==typeof t?t:n(+t),s):e},s.extent=function(t){return arguments.length?(i=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],s):i&&[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},s.size=function(t){return arguments.length?(i=null==t?null:[[0,0],[+t[0],+t[1]]],s):i&&[i[1][0]-i[0][0],i[1][1]-i[0][1]]},s}G.prototype={constructor:G,polygons:function(){var t=this.edges
return this.cells.map((function(e){var i=e.halfedges.map((function(i){return y(e,t[i])}))
return i.data=e.site.data,i}))},triangles:function(){var t=[],e=this.edges
return this.cells.forEach((function(i,n){if(o=(r=i.halfedges).length)for(var r,o,s,a,l,h,u=i.site,c=-1,d=e[r[o-1]],f=d.left===u?d.right:d.left;++c<o;)s=f,f=(d=e[r[c]]).left===u?d.right:d.left,s&&f&&n<s.index&&n<f.index&&(l=s,h=f,((a=u)[0]-h[0])*(l[1]-a[1])-(a[0]-l[0])*(h[1]-a[1])<0)&&t.push([u.data,s.data,f.data])})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,e,i){for(var n,r,o=this,s=o._found||0,a=o.cells.length;!(r=o.cells[s]);)if(++s>=a)return null
var l=t-r.site[0],h=e-r.site[1],u=l*l+h*h
do{r=o.cells[n=s],s=null,r.halfedges.forEach((function(i){var n=o.edges[i],a=n.left
if(a!==r.site&&a||(a=n.right)){var l=t-a[0],h=e-a[1],c=l*l+h*h
c<u&&(u=c,s=a.index)}}))}while(null!==s)
return o._found=n,null==i||u<=i*i?r.site:null}}},5941:(t,e,i)=>{var n=i(1802),r=i(9364),o=i(473),s=i(7191),a=i(5401),l=i(9967),h=Date.prototype.getTime
function u(t){return null==t}function c(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||t.length>0&&"number"!=typeof t[0])}t.exports=function t(e,i,d){var f=d||{}
return!!(f.strict?o(e,i):e===i)||(!e||!i||"object"!=typeof e&&"object"!=typeof i?f.strict?o(e,i):e==i:function(e,i,o){var d,f
if(typeof e!=typeof i)return!1
if(u(e)||u(i))return!1
if(e.prototype!==i.prototype)return!1
if(r(e)!==r(i))return!1
var p=s(e),g=s(i)
if(p!==g)return!1
if(p||g)return e.source===i.source&&a(e)===a(i)
if(l(e)&&l(i))return h.call(e)===h.call(i)
var _=c(e),m=c(i)
if(_!==m)return!1
if(_||m){if(e.length!==i.length)return!1
for(d=0;d<e.length;d++)if(e[d]!==i[d])return!1
return!0}if(typeof e!=typeof i)return!1
try{var y=n(e),v=n(i)}catch(t){return!1}if(y.length!==v.length)return!1
for(y.sort(),v.sort(),d=y.length-1;d>=0;d--)if(y[d]!=v[d])return!1
for(d=y.length-1;d>=0;d--)if(!t(e[f=y[d]],i[f],o))return!1
return!0}(e,i,f))}},2451:(t,e,i)=>{"use strict"
var n=i(9836),r=i(462),o=i(6933),s=i(6627)
t.exports=function(t,e,i){if(!t||"object"!=typeof t&&"function"!=typeof t)throw new o("`obj` must be an object or a function`")
if("string"!=typeof e&&"symbol"!=typeof e)throw new o("`property` must be a string or a symbol`")
if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new o("`nonEnumerable`, if provided, must be a boolean or null")
if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new o("`nonWritable`, if provided, must be a boolean or null")
if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new o("`nonConfigurable`, if provided, must be a boolean or null")
if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new o("`loose`, if provided, must be a boolean")
var a=arguments.length>3?arguments[3]:null,l=arguments.length>4?arguments[4]:null,h=arguments.length>5?arguments[5]:null,u=arguments.length>6&&arguments[6],c=!!s&&s(t,e)
if(n)n(t,e,{configurable:null===h&&c?c.configurable:!h,enumerable:null===a&&c?c.enumerable:!a,value:i,writable:null===l&&c?c.writable:!l})
else{if(!u&&(a||l||h))throw new r("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")
t[e]=i}}},5967:(t,e,i)=>{"use strict"
var n=i(1802),r="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),o=Object.prototype.toString,s=Array.prototype.concat,a=i(2451),l=i(7214)(),h=function(t,e,i,n){if(e in t)if(!0===n){if(t[e]===i)return}else if("function"!=typeof(r=n)||"[object Function]"!==o.call(r)||!n())return
var r
l?a(t,e,i,!0):a(t,e,i)},u=function(t,e){var i=arguments.length>2?arguments[2]:{},o=n(e)
r&&(o=s.call(o,Object.getOwnPropertySymbols(e)))
for(var a=0;a<o.length;a+=1)h(t,o[a],e[o[a]],i[o[a]])}
u.supportsDescriptors=!!l,t.exports=u},9194:t=>{function e(t,e,i,n){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,e,i,n)}e.prototype.run=function(t,e,i,n){this._init(t,e,i,n)
for(var r=0;r<this._datasetLength;r++)if(1!==this._visited[r]){this._visited[r]=1
var o=this._regionQuery(r)
if(o.length<this.minPts)this.noise.push(r)
else{var s=this.clusters.length
this.clusters.push([]),this._addToCluster(r,s),this._expandCluster(s,o)}}return this.clusters},e.prototype._init=function(t,e,i,n){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given")
this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}e&&(this.epsilon=e),i&&(this.minPts=i),n&&(this.distance=n)},e.prototype._expandCluster=function(t,e){for(var i=0;i<e.length;i++){var n=e[i]
if(1!==this._visited[n]){this._visited[n]=1
var r=this._regionQuery(n)
r.length>=this.minPts&&(e=this._mergeArrays(e,r))}1!==this._assigned[n]&&this._addToCluster(n,t)}},e.prototype._addToCluster=function(t,e){this.clusters[e].push(t),this._assigned[t]=1},e.prototype._regionQuery=function(t){for(var e=[],i=0;i<this._datasetLength;i++)this.distance(this.dataset[t],this.dataset[i])<this.epsilon&&e.push(i)
return e},e.prototype._mergeArrays=function(t,e){for(var i=e.length,n=0;n<i;n++){var r=e[n]
t.indexOf(r)<0&&t.push(r)}return t},e.prototype._euclideanDistance=function(t,e){for(var i=0,n=Math.min(t.length,e.length);n--;)i+=(t[n]-e[n])*(t[n]-e[n])
return Math.sqrt(i)},t.exports&&(t.exports=e)},7020:t=>{function e(t,e,i){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,e,i)}e.prototype.init=function(t,e,i){this.assignments=[],this.centroids=[],void 0!==t&&(this.dataset=t),void 0!==e&&(this.k=e),void 0!==i&&(this.distance=i)},e.prototype.run=function(t,e){this.init(t,e)
for(var i=this.dataset.length,n=0;n<this.k;n++)this.centroids[n]=this.randomCentroid()
for(var r=!0;r;){r=this.assign()
for(var o=0;o<this.k;o++){for(var s=new Array(u),a=0,l=0;l<u;l++)s[l]=0
for(var h=0;h<i;h++){var u=this.dataset[h].length
if(o===this.assignments[h]){for(l=0;l<u;l++)s[l]+=this.dataset[h][l]
a++}}if(a>0){for(l=0;l<u;l++)s[l]/=a
this.centroids[o]=s}else this.centroids[o]=this.randomCentroid(),r=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var t,e,i=this.dataset.length-1
do{e=Math.round(Math.random()*i),t=this.dataset[e]}while(this.centroids.indexOf(t)>=0)
return t},e.prototype.assign=function(){for(var t,e=!1,i=this.dataset.length,n=0;n<i;n++)(t=this.argmin(this.dataset[n],this.centroids,this.distance))!=this.assignments[n]&&(this.assignments[n]=t,e=!0)
return e},e.prototype.getClusters=function(){for(var t,e=new Array(this.k),i=0;i<this.assignments.length;i++)void 0===e[t=this.assignments[i]]&&(e[t]=[]),e[t].push(i)
return e},e.prototype.argmin=function(t,e,i){for(var n,r=Number.MAX_VALUE,o=0,s=e.length,a=0;a<s;a++)(n=i(t,e[a]))<r&&(r=n,o=a)
return o},e.prototype.distance=function(t,e){for(var i=0,n=Math.min(t.length,e.length);n--;){var r=t[n]-e[n]
i+=r*r}return Math.sqrt(i)},t.exports&&(t.exports=e)},5915:(t,e,i)=>{if(t.exports)var n=i(3914)
function r(t,e,i,n){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,e,i,n)}r.prototype.run=function(t,e,i,r){this._init(t,e,i,r)
for(var o=0,s=this.dataset.length;o<s;o++)if(1!==this._processed[o]){this._processed[o]=1,this.clusters.push([o])
var a=this.clusters.length-1
this._orderedList.push(o)
var l=new n(null,null,"asc"),h=this._regionQuery(o)
void 0!==this._distanceToCore(o)&&(this._updateQueue(o,h,l),this._expandCluster(a,l))}return this.clusters},r.prototype.getReachabilityPlot=function(){for(var t=[],e=0,i=this._orderedList.length;e<i;e++){var n=this._orderedList[e],r=this._reachability[n]
t.push([n,r])}return t},r.prototype._init=function(t,e,i,n){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given")
this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}e&&(this.epsilon=e),i&&(this.minPts=i),n&&(this.distance=n)},r.prototype._updateQueue=function(t,e,i){var n=this
this._coreDistance=this._distanceToCore(t),e.forEach((function(e){if(void 0===n._processed[e]){var r=n.distance(n.dataset[t],n.dataset[e]),o=Math.max(n._coreDistance,r)
void 0===n._reachability[e]?(n._reachability[e]=o,i.insert(e,o)):o<n._reachability[e]&&(n._reachability[e]=o,i.remove(e),i.insert(e,o))}}))},r.prototype._expandCluster=function(t,e){for(var i=e.getElements(),n=0,r=i.length;n<r;n++){var o=i[n]
if(void 0===this._processed[o]){var s=this._regionQuery(o)
this._processed[o]=1,this.clusters[t].push(o),this._orderedList.push(o),void 0!==this._distanceToCore(o)&&(this._updateQueue(o,s,e),this._expandCluster(t,e))}}},r.prototype._distanceToCore=function(t){for(var e=this.epsilon,i=0;i<e;i++)if(this._regionQuery(t,i).length>=this.minPts)return i},r.prototype._regionQuery=function(t,e){e=e||this.epsilon
for(var i=[],n=0,r=this.dataset.length;n<r;n++)this.distance(this.dataset[t],this.dataset[n])<e&&i.push(n)
return i},r.prototype._euclideanDistance=function(t,e){for(var i=0,n=Math.min(t.length,e.length);n--;)i+=(t[n]-e[n])*(t[n]-e[n])
return Math.sqrt(i)},t.exports&&(t.exports=r)},3914:t=>{function e(t,e,i){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,e,i)}e.prototype.insert=function(t,e){for(var i=this._queue.length,n=i;n--;){var r=this._priorities[n]
"desc"===this._sorting?e>r&&(i=n):e<r&&(i=n)}this._insertAt(t,e,i)},e.prototype.remove=function(t){for(var e=this._queue.length;e--;)if(t===this._queue[e]){this._queue.splice(e,1),this._priorities.splice(e,1)
break}},e.prototype.forEach=function(t){this._queue.forEach(t)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(t){return this._priorities[t]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var t=[],e=0,i=this._queue.length;e<i;e++)t.push([this._queue[e],this._priorities[e]])
return t},e.prototype._init=function(t,e,i){if(t&&e){if(this._queue=[],this._priorities=[],t.length!==e.length)throw new Error("Arrays must have the same length")
for(var n=0;n<t.length;n++)this.insert(t[n],e[n])}i&&(this._sorting=i)},e.prototype._insertAt=function(t,e,i){this._queue.length===i?(this._queue.push(t),this._priorities.push(e)):(this._queue.splice(i,0,t),this._priorities.splice(i,0,e))},t.exports&&(t.exports=e)},7705:(t,e,i)=>{t.exports&&(t.exports={DBSCAN:i(9194),KMEANS:i(7020),OPTICS:i(5915),PriorityQueue:i(3914)})},8992:t=>{"use strict"
function e(t,e,n){n=n||2
var o,s,a,l,c,d,p,g=e&&e.length,_=g?e[0]*n:t.length,m=i(t,0,_,n,!0),y=[]
if(!m||m.next===m.prev)return y
if(g&&(m=function(t,e,n,r){var o,s,a,l=[]
for(o=0,s=e.length;o<s;o++)(a=i(t,e[o]*r,o<s-1?e[o+1]*r:t.length,r,!1))===a.next&&(a.steiner=!0),l.push(f(a))
for(l.sort(h),o=0;o<l.length;o++)n=u(l[o],n)
return n}(t,e,m,n)),t.length>80*n){o=a=t[0],s=l=t[1]
for(var v=n;v<_;v+=n)(c=t[v])<o&&(o=c),(d=t[v+1])<s&&(s=d),c>a&&(a=c),d>l&&(l=d)
p=0!==(p=Math.max(a-o,l-s))?32767/p:0}return r(m,y,n,o,s,p,0),y}function i(t,e,i,n,r){var o,s
if(r===P(t,e,i,n)>0)for(o=e;o<i;o+=n)s=E(o,t[o],t[o+1],s)
else for(o=i-n;o>=e;o-=n)s=E(o,t[o],t[o+1],s)
return s&&m(s,s.next)&&(S(s),s=s.next),s}function n(t,e){if(!t)return t
e||(e=t)
var i,n=t
do{if(i=!1,n.steiner||!m(n,n.next)&&0!==_(n.prev,n,n.next))n=n.next
else{if(S(n),(n=e=n.prev)===n.next)break
i=!0}}while(i||n!==e)
return e}function r(t,e,i,h,u,c,f){if(t){!f&&c&&function(t,e,i,n){var r=t
do{0===r.z&&(r.z=d(r.x,r.y,e,i,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t)
r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,i,n,r,o,s,a,l,h=1
do{for(i=t,t=null,o=null,s=0;i;){for(s++,n=i,a=0,e=0;e<h&&(a++,n=n.nextZ);e++);for(l=h;a>0||l>0&&n;)0!==a&&(0===l||!n||i.z<=n.z)?(r=i,i=i.nextZ,a--):(r=n,n=n.nextZ,l--),o?o.nextZ=r:t=r,r.prevZ=o,o=r
i=n}o.nextZ=null,h*=2}while(s>1)}(r)}(t,h,u,c)
for(var p,g,_=t;t.prev!==t.next;)if(p=t.prev,g=t.next,c?s(t,h,u,c):o(t))e.push(p.i/i|0),e.push(t.i/i|0),e.push(g.i/i|0),S(t),t=g.next,_=g.next
else if((t=g)===_){f?1===f?r(t=a(n(t),e,i),e,i,h,u,c,2):2===f&&l(t,e,i,h,u,c):r(n(t),e,i,h,u,c,1)
break}}}function o(t){var e=t.prev,i=t,n=t.next
if(_(e,i,n)>=0)return!1
for(var r=e.x,o=i.x,s=n.x,a=e.y,l=i.y,h=n.y,u=r<o?r<s?r:s:o<s?o:s,c=a<l?a<h?a:h:l<h?l:h,d=r>o?r>s?r:s:o>s?o:s,f=a>l?a>h?a:h:l>h?l:h,g=n.next;g!==e;){if(g.x>=u&&g.x<=d&&g.y>=c&&g.y<=f&&p(r,a,o,l,s,h,g.x,g.y)&&_(g.prev,g,g.next)>=0)return!1
g=g.next}return!0}function s(t,e,i,n){var r=t.prev,o=t,s=t.next
if(_(r,o,s)>=0)return!1
for(var a=r.x,l=o.x,h=s.x,u=r.y,c=o.y,f=s.y,g=a<l?a<h?a:h:l<h?l:h,m=u<c?u<f?u:f:c<f?c:f,y=a>l?a>h?a:h:l>h?l:h,v=u>c?u>f?u:f:c>f?c:f,x=d(g,m,e,i,n),b=d(y,v,e,i,n),w=t.prevZ,E=t.nextZ;w&&w.z>=x&&E&&E.z<=b;){if(w.x>=g&&w.x<=y&&w.y>=m&&w.y<=v&&w!==r&&w!==s&&p(a,u,l,c,h,f,w.x,w.y)&&_(w.prev,w,w.next)>=0)return!1
if(w=w.prevZ,E.x>=g&&E.x<=y&&E.y>=m&&E.y<=v&&E!==r&&E!==s&&p(a,u,l,c,h,f,E.x,E.y)&&_(E.prev,E,E.next)>=0)return!1
E=E.nextZ}for(;w&&w.z>=x;){if(w.x>=g&&w.x<=y&&w.y>=m&&w.y<=v&&w!==r&&w!==s&&p(a,u,l,c,h,f,w.x,w.y)&&_(w.prev,w,w.next)>=0)return!1
w=w.prevZ}for(;E&&E.z<=b;){if(E.x>=g&&E.x<=y&&E.y>=m&&E.y<=v&&E!==r&&E!==s&&p(a,u,l,c,h,f,E.x,E.y)&&_(E.prev,E,E.next)>=0)return!1
E=E.nextZ}return!0}function a(t,e,i){var r=t
do{var o=r.prev,s=r.next.next
!m(o,s)&&y(o,r,r.next,s)&&b(o,s)&&b(s,o)&&(e.push(o.i/i|0),e.push(r.i/i|0),e.push(s.i/i|0),S(r),S(r.next),r=t=s),r=r.next}while(r!==t)
return n(r)}function l(t,e,i,o,s,a){var l=t
do{for(var h=l.next.next;h!==l.prev;){if(l.i!==h.i&&g(l,h)){var u=w(l,h)
return l=n(l,l.next),u=n(u,u.next),r(l,e,i,o,s,a,0),void r(u,e,i,o,s,a,0)}h=h.next}l=l.next}while(l!==t)}function h(t,e){return t.x-e.x}function u(t,e){var i=function(t,e){var i,n=e,r=t.x,o=t.y,s=-1/0
do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var a=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y)
if(a<=r&&a>s&&(s=a,i=n.x<n.next.x?n:n.next,a===r))return i}n=n.next}while(n!==e)
if(!i)return null
var l,h=i,u=i.x,d=i.y,f=1/0
n=i
do{r>=n.x&&n.x>=u&&r!==n.x&&p(o<d?r:s,o,u,d,o<d?s:r,o,n.x,n.y)&&(l=Math.abs(o-n.y)/(r-n.x),b(n,t)&&(l<f||l===f&&(n.x>i.x||n.x===i.x&&c(i,n)))&&(i=n,f=l)),n=n.next}while(n!==h)
return i}(t,e)
if(!i)return e
var r=w(i,t)
return n(r,r.next),n(i,i.next)}function c(t,e){return _(t.prev,t,e.prev)<0&&_(e.next,t,t.next)<0}function d(t,e,i,n,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-i)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function f(t){var e=t,i=t
do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t)
return i}function p(t,e,i,n,r,o,s,a){return(r-s)*(e-a)>=(t-s)*(o-a)&&(t-s)*(n-a)>=(i-s)*(e-a)&&(i-s)*(o-a)>=(r-s)*(n-a)}function g(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t
do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&y(i,i.next,t,e))return!0
i=i.next}while(i!==t)
return!1}(t,e)&&(b(t,e)&&b(e,t)&&function(t,e){var i=t,n=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2
do{i.y>o!=i.next.y>o&&i.next.y!==i.y&&r<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==t)
return n}(t,e)&&(_(t.prev,t,e.prev)||_(t,e.prev,e))||m(t,e)&&_(t.prev,t,t.next)>0&&_(e.prev,e,e.next)>0)}function _(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function m(t,e){return t.x===e.x&&t.y===e.y}function y(t,e,i,n){var r=x(_(t,e,i)),o=x(_(t,e,n)),s=x(_(i,n,t)),a=x(_(i,n,e))
return r!==o&&s!==a||!(0!==r||!v(t,i,e))||!(0!==o||!v(t,n,e))||!(0!==s||!v(i,t,n))||!(0!==a||!v(i,e,n))}function v(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function x(t){return t>0?1:t<0?-1:0}function b(t,e){return _(t.prev,t,t.next)<0?_(t,e,t.next)>=0&&_(t,t.prev,e)>=0:_(t,e,t.prev)<0||_(t,t.next,e)<0}function w(t,e){var i=new C(t.i,t.x,t.y),n=new C(e.i,e.x,e.y),r=t.next,o=e.prev
return t.next=e,e.prev=t,i.next=r,r.prev=i,n.next=i,i.prev=n,o.next=n,n.prev=o,n}function E(t,e,i,n){var r=new C(t,e,i)
return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function S(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function C(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function P(t,e,i,n){for(var r=0,o=e,s=i-n;o<i;o+=n)r+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o
return r}t.exports=e,t.exports.default=e,e.deviation=function(t,e,i,n){var r=e&&e.length,o=r?e[0]*i:t.length,s=Math.abs(P(t,0,o,i))
if(r)for(var a=0,l=e.length;a<l;a++){var h=e[a]*i,u=a<l-1?e[a+1]*i:t.length
s-=Math.abs(P(t,h,u,i))}var c=0
for(a=0;a<n.length;a+=3){var d=n[a]*i,f=n[a+1]*i,p=n[a+2]*i
c+=Math.abs((t[d]-t[p])*(t[f+1]-t[d+1])-(t[d]-t[f])*(t[p+1]-t[d+1]))}return 0===s&&0===c?0:Math.abs((c-s)/s)},e.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},n=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var s=0;s<e;s++)i.vertices.push(t[r][o][s])
r>0&&(n+=t[r-1].length,i.holes.push(n))}return i}},4606:(t,e,i)=>{"use strict"
i.r(e),i.d(e,{default:()=>l,modifier:()=>u})
var n=i(2294),r=i(2377),o=i(1130)
function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class a{constructor(t){this.owner=t,s(this,"capabilities",(0,r.capabilities)("3.22"))}createModifier(t,e){return{instance:new t(this.owner,e),element:null}}installModifier(t,e,i){const n=function(t,e){const i=t
return i.element=e,i}(t,e)
n.instance.modify(e,i.positional,i.named)}updateModifier(t,e){t.instance.modify(t.element,e.positional,e.named)}destroyModifier({instance:t}){(0,o.destroy)(t)}}class l{constructor(t,e){(0,n.setOwner)(this,t)}modify(t,e,i){}}(0,r.setModifierManager)((t=>new a(t)),l)
const h=new class{constructor(){s(this,"capabilities",(0,r.capabilities)("3.22"))}createModifier(t){return{element:null,instance:t}}installModifier(t,e,i){const n=function(t,e){const i=t
return i.element=e,i}(t,e),{positional:r,named:o}=i,s=t.instance(e,r,o)
"function"==typeof s&&(n.teardown=s)}updateModifier(t,e){"function"==typeof t.teardown&&t.teardown()
const i=t.instance(t.element,e.positional,e.named)
"function"==typeof i&&(t.teardown=i)}destroyModifier(t){"function"==typeof t.teardown&&t.teardown()}}
function u(t){return(0,r.setModifierManager)((()=>h),t)}},2945:(t,e,i)=>{"use strict"
function n(t,e,i){return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t
var i=t[Symbol.toPrimitive]
if(void 0!==i){var n=i.call(t,"string")
if("object"!=typeof n)return n
throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e))?n:String(n))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t
var n}function r(t,e,i,n){i&&Object.defineProperty(t,e,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}function o(t,e,i,n,r){var o={}
return Object.keys(n).forEach((function(t){o[t]=n[t]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=i.slice().reverse().reduce((function(i,n){return n(t,e,i)||i}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}i.d(e,{_:()=>o,a:()=>r,b:()=>n})},7842:(t,e,i)=>{"use strict"
i.r(e),i.d(e,{default:()=>c})
var n,r,o,s=i(2945),a=i(2735),l=i(336),h=i.n(l),u=i(4666)
let c=(n=(0,a.inject)("page-title"),r=class extends(h()){constructor(t){super(t),(0,s.a)(this,"tokens",o,this),(0,s.b)(this,"tokenId",(0,u.guidFor)(this)),this.tokens.push({id:this.tokenId})}compute(t,e){const i={...e,id:this.tokenId,title:t.join("")}
return this.tokens.push(i),this.tokens.scheduleTitleUpdate(),""}willDestroy(){super.willDestroy(),this.tokens.remove(this.tokenId),this.tokens.scheduleTitleUpdate()}},o=(0,s._)(r.prototype,"tokens",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),r)},5283:(t,e,i)=>{"use strict"
i.r(e),i.d(e,{default:()=>m})
var n,r,o,s,a,l=i(2945),h=i(1223),u=i(2735),c=i.n(u),d=i(9553),f=i(3984)
const p="undefined"!=typeof FastBoot,g="routeDidChange",_=["separator","prepend","replace"]
let m=(n=(0,u.inject)("router"),r=(0,u.inject)("-document"),o=class extends(c()){constructor(t){if(super(t),(0,l.a)(this,"router",s,this),(0,l.a)(this,"document",a,this),(0,l.b)(this,"tokens",[]),(0,l.b)(this,"_defaultConfig",{separator:" | ",prepend:!0,replace:null}),(0,l.b)(this,"scheduleTitleUpdate",(()=>{(0,h.scheduleOnce)("afterRender",this,this._updateTitle)})),this._validateExistingTitleElement(),function(t){return"resolveRegistration"in t}(t)){const i=t.resolveRegistration("config:environment")
"object"==typeof(e=i)&&null!==e&&"pageTitle"in e&&_.forEach((t=>{if(!(0,d.isEmpty)(i.pageTitle[t])){const e=i.pageTitle[t]
this._defaultConfig[t]=e}}))}var e
this.router.on(g,this.scheduleTitleUpdate)}applyTokenDefaults(t){const e=this._defaultConfig.separator,i=this._defaultConfig.prepend,n=this._defaultConfig.replace
t.previous??=null,t.next??=null,null==t.separator&&(t.separator=e),null==t.prepend&&null!=i&&(t.prepend=i),null==t.replace&&null!=n&&(t.replace=n)}inheritFromPrevious(t){const e=t.previous
e&&(null==t.separator&&(t.separator=e.separator),null==t.prepend&&(t.prepend=e.prepend))}push(t){const e=this._findTokenById(t.id)
if(e){const i=this.tokens.indexOf(e),n=[...this.tokens],r=e.previous
return t.previous=r,t.next=e.next,this.inheritFromPrevious(t),this.applyTokenDefaults(t),n.splice(i,1,t),void(this.tokens=n)}const i=this.tokens.slice(-1)[0]
i&&(t.previous=i??null,i.next=t,this.inheritFromPrevious(t)),this.applyTokenDefaults(t),this.tokens=[...this.tokens,t]}remove(t){const e=this._findTokenById(t)
if(!e)return
const{next:i,previous:n}=e
i&&(i.previous=n),n&&(n.next=i),e.previous=e.next=null
const r=[...this.tokens]
r.splice(r.indexOf(e),1),this.tokens=r}get visibleTokens(){const t=this.tokens
let e=t?t.length:0
const i=[]
for(;e--;){const n=t[e]
if(n){if(n.replace){i.unshift(n)
break}i.unshift(n)}}return i}get sortedTokens(){const t=this.visibleTokens
if(!t)return[]
let e=!0,i=[]
const n=[i],r=[]
return t.forEach((t=>{if(t.front)r.unshift(t)
else if(t.prepend){e&&(e=!1,i=[],n.push(i))
const r=i[0]
r&&((t={...t}).separator=r.separator),i.unshift(t)}else e||(e=!0,i=[],n.push(i)),i.push(t)})),r.concat(n.reduce(((t,e)=>t.concat(e)),[]))}toString(){const t=this.sortedTokens,e=[]
for(let i=0,n=t.length;i<n;i++){const r=t[i]
r&&r.title&&(e.push(r.title),i+1<n&&e.push(r.separator))}return e.join("")}willDestroy(){super.willDestroy(),this.router.off(g,this.scheduleTitleUpdate)}_updateTitle(){const t=this.toString()
p?this.updateFastbootTitle(t):this.document.title=t,this.titleDidUpdate(t)}_validateExistingTitleElement(){p||(0,f.assert)("[ember-page-title]: Multiple title elements found. Check for other addons like ember-cli-head updating <title> as well.",document.head.querySelectorAll("title").length<=1)}_findTokenById(t){return this.tokens.find((e=>e.id===t))}updateFastbootTitle(t){if(!p)return
const e=this.document.head,i=e.childNodes
for(let o=0;o<i.length;o++){const t=i[o]
t&&"title"===t.nodeName.toLowerCase()&&e.removeChild(t)}const n=this.document.createElement("title"),r=this.document.createTextNode(t)
n.appendChild(r),e.appendChild(n)}titleDidUpdate(t){}},s=(0,l._)(o.prototype,"router",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a=(0,l._)(o.prototype,"document",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o)},9836:(t,e,i)=>{"use strict"
var n=i(8824)("%Object.defineProperty%",!0)||!1
if(n)try{n({},"a",{value:1})}catch(t){n=!1}t.exports=n},6939:t=>{"use strict"
t.exports=EvalError},769:t=>{"use strict"
t.exports=Error},2876:t=>{"use strict"
t.exports=RangeError},9480:t=>{"use strict"
t.exports=ReferenceError},462:t=>{"use strict"
t.exports=SyntaxError},6933:t=>{"use strict"
t.exports=TypeError},27:t=>{"use strict"
t.exports=URIError},2799:t=>{"use strict"
var e=Object.prototype.toString,i=Math.max,n=function(t,e){for(var i=[],n=0;n<t.length;n+=1)i[n]=t[n]
for(var r=0;r<e.length;r+=1)i[r+t.length]=e[r]
return i}
t.exports=function(t){var r=this
if("function"!=typeof r||"[object Function]"!==e.apply(r))throw new TypeError("Function.prototype.bind called on incompatible "+r)
for(var o,s=function(t,e){for(var i=[],n=1,r=0;n<t.length;n+=1,r+=1)i[r]=t[n]
return i}(arguments),a=i(0,r.length-s.length),l=[],h=0;h<a;h++)l[h]="$"+h
if(o=Function("binder","return function ("+function(t,e){for(var i="",n=0;n<t.length;n+=1)i+=t[n],n+1<t.length&&(i+=",")
return i}(l)+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof o){var e=r.apply(this,n(s,arguments))
return Object(e)===e?e:this}return r.apply(t,n(s,arguments))})),r.prototype){var u=function(){}
u.prototype=r.prototype,o.prototype=new u,u.prototype=null}return o}},9913:(t,e,i)=>{"use strict"
var n=i(2799)
t.exports=Function.prototype.bind||n},2275:t=>{"use strict"
var e=function(){return"string"==typeof function(){}.name},i=Object.getOwnPropertyDescriptor
if(i)try{i([],"length")}catch(t){i=null}e.functionsHaveConfigurableNames=function(){if(!e()||!i)return!1
var t=i((function(){}),"name")
return!!t&&!!t.configurable}
var n=Function.prototype.bind
e.boundFunctionsHaveNames=function(){return e()&&"function"==typeof n&&""!==function(){}.bind().name},t.exports=e},9362:(t,e,i)=>{var n=i(5941),r=function(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:a}
function o(t){return t.coordinates.map((function(e){return{type:t.type.replace("Multi",""),coordinates:e}}))}function s(t,e){return t.hasOwnProperty("coordinates")?t.coordinates.length===e.coordinates.length:t.length===e.length}function a(t,e){return n(t,e,{strict:!0})}r.prototype.compare=function(t,e){if(t.type!==e.type||!s(t,e))return!1
switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates)
case"LineString":return this.compareLine(t.coordinates,e.coordinates,0,!1)
case"Polygon":return this.comparePolygon(t,e)
case"Feature":return this.compareFeature(t,e)
default:if(0===t.type.indexOf("Multi")){var i=this,n=o(t),r=o(e)
return n.every((function(t){return this.some((function(e){return i.compare(t,e)}))}),r)}}return!1},r.prototype.compareCoord=function(t,e){if(t.length!==e.length)return!1
for(var i=0;i<t.length;i++)if(t[i].toFixed(this.precision)!==e[i].toFixed(this.precision))return!1
return!0},r.prototype.compareLine=function(t,e,i,n){if(!s(t,e))return!1
var r=this.pseudoNode?t:this.removePseudo(t),o=this.pseudoNode?e:this.removePseudo(e)
if(!n||this.compareCoord(r[0],o[0])||(o=this.fixStartIndex(o,r))){var a=this.compareCoord(r[i],o[i])
return this.direction||a?this.comparePath(r,o):!!this.compareCoord(r[i],o[o.length-(1+i)])&&this.comparePath(r.slice().reverse(),o)}},r.prototype.fixStartIndex=function(t,e){for(var i,n=-1,r=0;r<t.length;r++)if(this.compareCoord(t[r],e[0])){n=r
break}return n>=0&&(i=[].concat(t.slice(n,t.length),t.slice(1,n+1))),i},r.prototype.comparePath=function(t,e){var i=this
return t.every((function(t,e){return i.compareCoord(t,this[e])}),e)},r.prototype.comparePolygon=function(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var i=t.coordinates.slice(1,t.coordinates.length),n=e.coordinates.slice(1,e.coordinates.length),r=this
return i.every((function(t){return this.some((function(e){return r.compareLine(t,e,1,!0)}))}),n)}return!1},r.prototype.compareFeature=function(t,e){return!(t.id!==e.id||!this.objectComparator(t.properties,e.properties)||!this.compareBBox(t,e))&&this.compare(t.geometry,e.geometry)},r.prototype.compareBBox=function(t,e){return!!(!t.bbox&&!e.bbox||t.bbox&&e.bbox&&this.compareCoord(t.bbox,e.bbox))},r.prototype.removePseudo=function(t){return t},t.exports=r},4686:(t,e,i)=>{var n=i(7179),r=i(6303),o=i(9611),s=i(463).default,a=o.featureEach,l=(o.coordEach,r.polygon,r.featureCollection)
function h(t){var e=new n(t)
return e.insert=function(t){if("Feature"!==t.type)throw new Error("invalid feature")
return t.bbox=t.bbox?t.bbox:s(t),n.prototype.insert.call(this,t)},e.load=function(t){var e=[]
return Array.isArray(t)?t.forEach((function(t){if("Feature"!==t.type)throw new Error("invalid features")
t.bbox=t.bbox?t.bbox:s(t),e.push(t)})):a(t,(function(t){if("Feature"!==t.type)throw new Error("invalid features")
t.bbox=t.bbox?t.bbox:s(t),e.push(t)})),n.prototype.load.call(this,e)},e.remove=function(t,e){if("Feature"!==t.type)throw new Error("invalid feature")
return t.bbox=t.bbox?t.bbox:s(t),n.prototype.remove.call(this,t,e)},e.clear=function(){return n.prototype.clear.call(this)},e.search=function(t){var e=n.prototype.search.call(this,this.toBBox(t))
return l(e)},e.collides=function(t){return n.prototype.collides.call(this,this.toBBox(t))},e.all=function(){var t=n.prototype.all.call(this)
return l(t)},e.toJSON=function(){return n.prototype.toJSON.call(this)},e.fromJSON=function(t){return n.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e
if(t.bbox)e=t.bbox
else if(Array.isArray(t)&&4===t.length)e=t
else if(Array.isArray(t)&&6===t.length)e=[t[0],t[1],t[3],t[4]]
else if("Feature"===t.type)e=s(t)
else{if("FeatureCollection"!==t.type)throw new Error("invalid geojson")
e=s(t)}return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}t.exports=h,t.exports.default=h},8824:(t,e,i)=>{"use strict"
var n,r=i(769),o=i(6939),s=i(2876),a=i(9480),l=i(462),h=i(6933),u=i(27),c=Function,d=function(t){try{return c('"use strict"; return ('+t+").constructor;")()}catch(t){}},f=Object.getOwnPropertyDescriptor
if(f)try{f({},"")}catch(t){f=null}var p=function(){throw new h},g=f?function(){try{return p}catch(t){try{return f(arguments,"callee").get}catch(t){return p}}}():p,_=i(4589)(),m=i(2423)(),y=Object.getPrototypeOf||(m?function(t){return t.__proto__}:null),v={},x="undefined"!=typeof Uint8Array&&y?y(Uint8Array):n,b={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":_&&y?y([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":v,"%AsyncGenerator%":v,"%AsyncGeneratorFunction%":v,"%AsyncIteratorPrototype%":v,"%Atomics%":"undefined"==typeof Atomics?n:Atomics,"%BigInt%":"undefined"==typeof BigInt?n:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?n:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":r,"%eval%":eval,"%EvalError%":o,"%Float32Array%":"undefined"==typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":c,"%GeneratorFunction%":v,"%Int8Array%":"undefined"==typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":_&&y?y(y([][Symbol.iterator]())):n,"%JSON%":"object"==typeof JSON?JSON:n,"%Map%":"undefined"==typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&_&&y?y((new Map)[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?n:Promise,"%Proxy%":"undefined"==typeof Proxy?n:Proxy,"%RangeError%":s,"%ReferenceError%":a,"%Reflect%":"undefined"==typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&_&&y?y((new Set)[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":_&&y?y(""[Symbol.iterator]()):n,"%Symbol%":_?Symbol:n,"%SyntaxError%":l,"%ThrowTypeError%":g,"%TypedArray%":x,"%TypeError%":h,"%Uint8Array%":"undefined"==typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?n:Uint32Array,"%URIError%":u,"%WeakMap%":"undefined"==typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?n:WeakSet}
if(y)try{null.error}catch(t){var w=y(y(t))
b["%Error.prototype%"]=w}var E=function t(e){var i
if("%AsyncFunction%"===e)i=d("async function () {}")
else if("%GeneratorFunction%"===e)i=d("function* () {}")
else if("%AsyncGeneratorFunction%"===e)i=d("async function* () {}")
else if("%AsyncGenerator%"===e){var n=t("%AsyncGeneratorFunction%")
n&&(i=n.prototype)}else if("%AsyncIteratorPrototype%"===e){var r=t("%AsyncGenerator%")
r&&y&&(i=y(r.prototype))}return b[e]=i,i},S={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},C=i(9913),P=i(8907),T=C.call(Function.call,Array.prototype.concat),I=C.call(Function.apply,Array.prototype.splice),M=C.call(Function.call,String.prototype.replace),A=C.call(Function.call,String.prototype.slice),R=C.call(Function.call,RegExp.prototype.exec),L=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,O=/\\(\\)?/g,D=function(t,e){var i,n=t
if(P(S,n)&&(n="%"+(i=S[n])[0]+"%"),P(b,n)){var r=b[n]
if(r===v&&(r=E(n)),void 0===r&&!e)throw new h("intrinsic "+t+" exists, but is not available. Please file an issue!")
return{alias:i,name:n,value:r}}throw new l("intrinsic "+t+" does not exist!")}
t.exports=function(t,e){if("string"!=typeof t||0===t.length)throw new h("intrinsic name must be a non-empty string")
if(arguments.length>1&&"boolean"!=typeof e)throw new h('"allowMissing" argument must be a boolean')
if(null===R(/^%?[^%]*%?$/,t))throw new l("`%` may not be present anywhere but at the beginning and end of the intrinsic name")
var i=function(t){var e=A(t,0,1),i=A(t,-1)
if("%"===e&&"%"!==i)throw new l("invalid intrinsic syntax, expected closing `%`")
if("%"===i&&"%"!==e)throw new l("invalid intrinsic syntax, expected opening `%`")
var n=[]
return M(t,L,(function(t,e,i,r){n[n.length]=i?M(r,O,"$1"):e||t})),n}(t),n=i.length>0?i[0]:"",r=D("%"+n+"%",e),o=r.name,s=r.value,a=!1,u=r.alias
u&&(n=u[0],I(i,T([0,1],u)))
for(var c=1,d=!0;c<i.length;c+=1){var p=i[c],g=A(p,0,1),_=A(p,-1)
if(('"'===g||"'"===g||"`"===g||'"'===_||"'"===_||"`"===_)&&g!==_)throw new l("property names with quotes must have matching quotes")
if("constructor"!==p&&d||(a=!0),P(b,o="%"+(n+="."+p)+"%"))s=b[o]
else if(null!=s){if(!(p in s)){if(!e)throw new h("base intrinsic for "+t+" exists, but the property is not available.")
return}if(f&&c+1>=i.length){var m=f(s,p)
s=(d=!!m)&&"get"in m&&!("originalValue"in m.get)?m.get:s[p]}else d=P(s,p),s=s[p]
d&&!a&&(b[o]=s)}}return s}},6627:(t,e,i)=>{"use strict"
var n=i(8824)("%Object.getOwnPropertyDescriptor%",!0)
if(n)try{n([],"length")}catch(t){n=null}t.exports=n},7214:(t,e,i)=>{"use strict"
var n=i(9836),r=function(){return!!n}
r.hasArrayLengthDefineBug=function(){if(!n)return null
try{return 1!==n([],"length",{value:1}).length}catch(t){return!0}},t.exports=r},2423:t=>{"use strict"
var e={__proto__:null,foo:{}},i=Object
t.exports=function(){return{__proto__:e}.foo===e.foo&&!(e instanceof i)}},4589:(t,e,i)=>{"use strict"
var n="undefined"!=typeof Symbol&&Symbol,r=i(9199)
t.exports=function(){return"function"==typeof n&&"function"==typeof Symbol&&"symbol"==typeof n("foo")&&"symbol"==typeof Symbol("bar")&&r()}},9199:t=>{"use strict"
t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1
if("symbol"==typeof Symbol.iterator)return!0
var t={},e=Symbol("test"),i=Object(e)
if("string"==typeof e)return!1
if("[object Symbol]"!==Object.prototype.toString.call(e))return!1
if("[object Symbol]"!==Object.prototype.toString.call(i))return!1
for(e in t[e]=42,t)return!1
if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1
if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1
var n=Object.getOwnPropertySymbols(t)
if(1!==n.length||n[0]!==e)return!1
if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1
if("function"==typeof Object.getOwnPropertyDescriptor){var r=Object.getOwnPropertyDescriptor(t,e)
if(42!==r.value||!0!==r.enumerable)return!1}return!0}},584:(t,e,i)=>{"use strict"
var n=i(9199)
t.exports=function(){return n()&&!!Symbol.toStringTag}},8907:(t,e,i)=>{"use strict"
var n=Function.prototype.call,r=Object.prototype.hasOwnProperty,o=i(9913)
t.exports=o.call(n,r)},437:(t,e)=>{e.read=function(t,e,i,n,r){var o,s,a=8*r-n-1,l=(1<<a)-1,h=l>>1,u=-7,c=i?r-1:0,d=i?-1:1,f=t[e+c]
for(c+=d,o=f&(1<<-u)-1,f>>=-u,u+=a;u>0;o=256*o+t[e+c],c+=d,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=n;u>0;s=256*s+t[e+c],c+=d,u-=8);if(0===o)o=1-h
else{if(o===l)return s?NaN:1/0*(f?-1:1)
s+=Math.pow(2,n),o-=h}return(f?-1:1)*s*Math.pow(2,o-n)},e.write=function(t,e,i,n,r,o){var s,a,l,h=8*o-r-1,u=(1<<h)-1,c=u>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:o-1,p=n?1:-1,g=e<0||0===e&&1/e<0?1:0
for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),(e+=s+c>=1?d/l:d*Math.pow(2,1-c))*l>=2&&(s++,l/=2),s+c>=u?(a=0,s=u):s+c>=1?(a=(e*l-1)*Math.pow(2,r),s+=c):(a=e*Math.pow(2,c-1)*Math.pow(2,r),s=0));r>=8;t[i+f]=255&a,f+=p,a/=256,r-=8);for(s=s<<r|a,h+=r;h>0;t[i+f]=255&s,f+=p,s/=256,h-=8);t[i+f-p]|=128*g}},9364:(t,e,i)=>{"use strict"
var n=i(584)(),r=i(8185)("Object.prototype.toString"),o=function(t){return!(n&&t&&"object"==typeof t&&Symbol.toStringTag in t)&&"[object Arguments]"===r(t)},s=function(t){return!!o(t)||null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Array]"!==r(t)&&"[object Function]"===r(t.callee)},a=function(){return o(arguments)}()
o.isLegacyArguments=s,t.exports=a?o:s},9967:(t,e,i)=>{"use strict"
var n=Date.prototype.getDay,r=Object.prototype.toString,o=i(584)()
t.exports=function(t){return"object"==typeof t&&null!==t&&(o?function(t){try{return n.call(t),!0}catch(t){return!1}}(t):"[object Date]"===r.call(t))}},7191:(t,e,i)=>{"use strict"
var n,r,o,s,a=i(8185),l=i(584)()
if(l){n=a("Object.prototype.hasOwnProperty"),r=a("RegExp.prototype.exec"),o={}
var h=function(){throw o}
s={toString:h,valueOf:h},"symbol"==typeof Symbol.toPrimitive&&(s[Symbol.toPrimitive]=h)}var u=a("Object.prototype.toString"),c=Object.getOwnPropertyDescriptor
t.exports=l?function(t){if(!t||"object"!=typeof t)return!1
var e=c(t,"lastIndex")
if(!e||!n(e,"value"))return!1
try{r(t,s)}catch(t){return t===o}}:function(t){return!(!t||"object"!=typeof t&&"function"!=typeof t)&&"[object RegExp]"===u(t)}},8984:function(t,e){!function(t){"use strict"
function e(t){var e,i,n,r
for(i=1,n=arguments.length;i<n;i++)for(e in r=arguments[i])t[e]=r[e]
return t}var i=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}()
function n(t,e){var i=Array.prototype.slice
if(t.bind)return t.bind.apply(t,i.call(arguments,1))
var n=i.call(arguments,2)
return function(){return t.apply(e,n.length?n.concat(i.call(arguments)):arguments)}}var r=0
function o(t){return"_leaflet_id"in t||(t._leaflet_id=++r),t._leaflet_id}function s(t,e,i){var n,r,o,s
return s=function(){n=!1,r&&(o.apply(i,r),r=!1)},o=function(){n?r=arguments:(t.apply(i,arguments),setTimeout(s,e),n=!0)},o}function a(t,e,i){var n=e[1],r=e[0],o=n-r
return t===n&&i?t:((t-r)%o+o)%o+r}function l(){return!1}function h(t,e){if(!1===e)return t
var i=Math.pow(10,void 0===e?6:e)
return Math.round(t*i)/i}function u(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function c(t){return u(t).split(/\s+/)}function d(t,e){for(var n in Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?i(t.options):{}),e)t.options[n]=e[n]
return t.options}function f(t,e,i){var n=[]
for(var r in t)n.push(encodeURIComponent(i?r.toUpperCase():r)+"="+encodeURIComponent(t[r]))
return(e&&-1!==e.indexOf("?")?"&":"?")+n.join("&")}var p=/\{ *([\w_ -]+) *\}/g
function g(t,e){return t.replace(p,(function(t,i){var n=e[i]
if(void 0===n)throw new Error("No value provided for variable "+t)
return"function"==typeof n&&(n=n(e)),n}))}var _=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}
function m(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return i
return-1}var y="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="
function v(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var x=0
function b(t){var e=+new Date,i=Math.max(0,16-(e-x))
return x=e+i,window.setTimeout(t,i)}var w=window.requestAnimationFrame||v("RequestAnimationFrame")||b,E=window.cancelAnimationFrame||v("CancelAnimationFrame")||v("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)}
function S(t,e,i){if(!i||w!==b)return w.call(window,n(t,e))
t.call(e)}function C(t){t&&E.call(window,t)}var P={__proto__:null,extend:e,create:i,bind:n,get lastId(){return r},stamp:o,throttle:s,wrapNum:a,falseFn:l,formatNum:h,trim:u,splitWords:c,setOptions:d,getParamString:f,template:g,isArray:_,indexOf:m,emptyImageUrl:y,requestFn:w,cancelFn:E,requestAnimFrame:S,cancelAnimFrame:C}
function T(){}T.extend=function(t){var n=function(){d(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},r=n.__super__=this.prototype,o=i(r)
for(var s in o.constructor=n,n.prototype=o,this)Object.prototype.hasOwnProperty.call(this,s)&&"prototype"!==s&&"__super__"!==s&&(n[s]=this[s])
return t.statics&&e(n,t.statics),t.includes&&(function(t){if("undefined"!=typeof L&&L&&L.Mixin){t=_(t)?t:[t]
for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(t.includes),e.apply(null,[o].concat(t.includes))),e(o,t),delete o.statics,delete o.includes,o.options&&(o.options=r.options?i(r.options):{},e(o.options,t.options)),o._initHooks=[],o.callInitHooks=function(){if(!this._initHooksCalled){r.callInitHooks&&r.callInitHooks.call(this),this._initHooksCalled=!0
for(var t=0,e=o._initHooks.length;t<e;t++)o._initHooks[t].call(this)}},n},T.include=function(t){var i=this.prototype.options
return e(this.prototype,t),t.options&&(this.prototype.options=i,this.mergeOptions(t.options)),this},T.mergeOptions=function(t){return e(this.prototype.options,t),this},T.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),i="function"==typeof t?t:function(){this[t].apply(this,e)}
return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i),this}
var I={on:function(t,e,i){if("object"==typeof t)for(var n in t)this._on(n,t[n],e)
else for(var r=0,o=(t=c(t)).length;r<o;r++)this._on(t[r],e,i)
return this},off:function(t,e,i){if(arguments.length)if("object"==typeof t)for(var n in t)this._off(n,t[n],e)
else{t=c(t)
for(var r=1===arguments.length,o=0,s=t.length;o<s;o++)r?this._off(t[o]):this._off(t[o],e,i)}else delete this._events
return this},_on:function(t,e,i,n){if("function"==typeof e){if(!1===this._listens(t,e,i)){i===this&&(i=void 0)
var r={fn:e,ctx:i}
n&&(r.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(r)}}else console.warn("wrong listener type: "+typeof e)},_off:function(t,e,i){var n,r,o
if(this._events&&(n=this._events[t]))if(1!==arguments.length)if("function"==typeof e){var s=this._listens(t,e,i)
if(!1!==s){var a=n[s]
this._firingCount&&(a.fn=l,this._events[t]=n=n.slice()),n.splice(s,1)}}else console.warn("wrong listener type: "+typeof e)
else{if(this._firingCount)for(r=0,o=n.length;r<o;r++)n[r].fn=l
delete this._events[t]}},fire:function(t,i,n){if(!this.listens(t,n))return this
var r=e({},i,{type:t,target:this,sourceTarget:i&&i.sourceTarget||this})
if(this._events){var o=this._events[t]
if(o){this._firingCount=this._firingCount+1||1
for(var s=0,a=o.length;s<a;s++){var l=o[s],h=l.fn
l.once&&this.off(t,h,l.ctx),h.call(l.ctx||this,r)}this._firingCount--}}return n&&this._propagateEvent(r),this},listens:function(t,e,i,n){"string"!=typeof t&&console.warn('"string" type argument expected')
var r=e
"function"!=typeof e&&(n=!!e,r=void 0,i=void 0)
var o=this._events&&this._events[t]
if(o&&o.length&&!1!==this._listens(t,r,i))return!0
if(n)for(var s in this._eventParents)if(this._eventParents[s].listens(t,e,i,n))return!0
return!1},_listens:function(t,e,i){if(!this._events)return!1
var n=this._events[t]||[]
if(!e)return!!n.length
i===this&&(i=void 0)
for(var r=0,o=n.length;r<o;r++)if(n[r].fn===e&&n[r].ctx===i)return r
return!1},once:function(t,e,i){if("object"==typeof t)for(var n in t)this._on(n,t[n],e,!0)
else for(var r=0,o=(t=c(t)).length;r<o;r++)this._on(t[r],e,i,!0)
return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[o(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[o(t)],this},_propagateEvent:function(t){for(var i in this._eventParents)this._eventParents[i].fire(t.type,e({layer:t.target,propagatedFrom:t.target},t),!0)}}
I.addEventListener=I.on,I.removeEventListener=I.clearAllEventListeners=I.off,I.addOneTimeEventListener=I.once,I.fireEvent=I.fire,I.hasEventListeners=I.listens
var M=T.extend(I)
function A(t,e,i){this.x=i?Math.round(t):t,this.y=i?Math.round(e):e}var R=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)}
function O(t,e,i){return t instanceof A?t:_(t)?new A(t[0],t[1]):null==t?t:"object"==typeof t&&"x"in t&&"y"in t?new A(t.x,t.y):new A(t,e,i)}function D(t,e){if(t)for(var i=e?[t,e]:t,n=0,r=i.length;n<r;n++)this.extend(i[n])}function N(t,e){return!t||t instanceof D?t:new D(t,e)}function F(t,e){if(t)for(var i=e?[t,e]:t,n=0,r=i.length;n<r;n++)this.extend(i[n])}function k(t,e){return t instanceof F?t:new F(t,e)}function z(t,e,i){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")")
this.lat=+t,this.lng=+e,void 0!==i&&(this.alt=+i)}function j(t,e,i){return t instanceof z?t:_(t)&&"object"!=typeof t[0]?3===t.length?new z(t[0],t[1],t[2]):2===t.length?new z(t[0],t[1]):null:null==t?t:"object"==typeof t&&"lat"in t?new z(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new z(t,e,i)}A.prototype={clone:function(){return new A(this.x,this.y)},add:function(t){return this.clone()._add(O(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(O(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new A(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new A(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=R(this.x),this.y=R(this.y),this},distanceTo:function(t){var e=(t=O(t)).x-this.x,i=t.y-this.y
return Math.sqrt(e*e+i*i)},equals:function(t){return(t=O(t)).x===this.x&&t.y===this.y},contains:function(t){return t=O(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+h(this.x)+", "+h(this.y)+")"}},D.prototype={extend:function(t){var e,i
if(!t)return this
if(t instanceof A||"number"==typeof t[0]||"x"in t)e=i=O(t)
else if(e=(t=N(t)).min,i=t.max,!e||!i)return this
return this.min||this.max?(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(i.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(i.y,this.max.y)):(this.min=e.clone(),this.max=i.clone()),this},getCenter:function(t){return O((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return O(this.min.x,this.max.y)},getTopRight:function(){return O(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,i
return(t="number"==typeof t[0]||t instanceof A?O(t):N(t))instanceof D?(e=t.min,i=t.max):e=i=t,e.x>=this.min.x&&i.x<=this.max.x&&e.y>=this.min.y&&i.y<=this.max.y},intersects:function(t){t=N(t)
var e=this.min,i=this.max,n=t.min,r=t.max,o=r.x>=e.x&&n.x<=i.x,s=r.y>=e.y&&n.y<=i.y
return o&&s},overlaps:function(t){t=N(t)
var e=this.min,i=this.max,n=t.min,r=t.max,o=r.x>e.x&&n.x<i.x,s=r.y>e.y&&n.y<i.y
return o&&s},isValid:function(){return!(!this.min||!this.max)},pad:function(t){var e=this.min,i=this.max,n=Math.abs(e.x-i.x)*t,r=Math.abs(e.y-i.y)*t
return N(O(e.x-n,e.y-r),O(i.x+n,i.y+r))},equals:function(t){return!!t&&(t=N(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight()))}},F.prototype={extend:function(t){var e,i,n=this._southWest,r=this._northEast
if(t instanceof z)e=t,i=t
else{if(!(t instanceof F))return t?this.extend(j(t)||k(t)):this
if(e=t._southWest,i=t._northEast,!e||!i)return this}return n||r?(n.lat=Math.min(e.lat,n.lat),n.lng=Math.min(e.lng,n.lng),r.lat=Math.max(i.lat,r.lat),r.lng=Math.max(i.lng,r.lng)):(this._southWest=new z(e.lat,e.lng),this._northEast=new z(i.lat,i.lng)),this},pad:function(t){var e=this._southWest,i=this._northEast,n=Math.abs(e.lat-i.lat)*t,r=Math.abs(e.lng-i.lng)*t
return new F(new z(e.lat-n,e.lng-r),new z(i.lat+n,i.lng+r))},getCenter:function(){return new z((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new z(this.getNorth(),this.getWest())},getSouthEast:function(){return new z(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof z||"lat"in t?j(t):k(t)
var e,i,n=this._southWest,r=this._northEast
return t instanceof F?(e=t.getSouthWest(),i=t.getNorthEast()):e=i=t,e.lat>=n.lat&&i.lat<=r.lat&&e.lng>=n.lng&&i.lng<=r.lng},intersects:function(t){t=k(t)
var e=this._southWest,i=this._northEast,n=t.getSouthWest(),r=t.getNorthEast(),o=r.lat>=e.lat&&n.lat<=i.lat,s=r.lng>=e.lng&&n.lng<=i.lng
return o&&s},overlaps:function(t){t=k(t)
var e=this._southWest,i=this._northEast,n=t.getSouthWest(),r=t.getNorthEast(),o=r.lat>e.lat&&n.lat<i.lat,s=r.lng>e.lng&&n.lng<i.lng
return o&&s},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=k(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}},z.prototype={equals:function(t,e){return!!t&&(t=j(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+h(this.lat,t)+", "+h(this.lng,t)+")"},distanceTo:function(t){return U.distance(this,j(t))},wrap:function(){return U.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,i=e/Math.cos(Math.PI/180*this.lat)
return k([this.lat-e,this.lng-i],[this.lat+e,this.lng+i])},clone:function(){return new z(this.lat,this.lng,this.alt)}}
var G,B={latLngToPoint:function(t,e){var i=this.projection.project(t),n=this.scale(e)
return this.transformation._transform(i,n)},pointToLatLng:function(t,e){var i=this.scale(e),n=this.transformation.untransform(t,i)
return this.projection.unproject(n)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null
var e=this.projection.bounds,i=this.scale(t)
return new D(this.transformation.transform(e.min,i),this.transformation.transform(e.max,i))},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?a(t.lng,this.wrapLng,!0):t.lng
return new z(this.wrapLat?a(t.lat,this.wrapLat,!0):t.lat,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),i=this.wrapLatLng(e),n=e.lat-i.lat,r=e.lng-i.lng
if(0===n&&0===r)return t
var o=t.getSouthWest(),s=t.getNorthEast()
return new F(new z(o.lat-n,o.lng-r),new z(s.lat-n,s.lng-r))}},U=e({},B,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var i=Math.PI/180,n=t.lat*i,r=e.lat*i,o=Math.sin((e.lat-t.lat)*i/2),s=Math.sin((e.lng-t.lng)*i/2),a=o*o+Math.cos(n)*Math.cos(r)*s*s,l=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))
return this.R*l}}),q=6378137,V={R:q,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,i=this.MAX_LATITUDE,n=Math.max(Math.min(i,t.lat),-i),r=Math.sin(n*e)
return new A(this.R*t.lng*e,this.R*Math.log((1+r)/(1-r))/2)},unproject:function(t){var e=180/Math.PI
return new z((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:(G=q*Math.PI,new D([-G,-G],[G,G]))}
function Z(t,e,i,n){if(_(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3])
this._a=t,this._b=e,this._c=i,this._d=n}function W(t,e,i,n){return new Z(t,e,i,n)}Z.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new A((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}}
var Y=e({},U,{code:"EPSG:3857",projection:V,transformation:function(){var t=.5/(Math.PI*V.R)
return W(t,.5,-t,.5)}()}),X=e({},Y,{code:"EPSG:900913"})
function H(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function $(t,e){var i,n,r,o,s,a,l=""
for(i=0,r=t.length;i<r;i++){for(n=0,o=(s=t[i]).length;n<o;n++)l+=(n?"L":"M")+(a=s[n]).x+" "+a.y
l+=e?Dt.svg?"z":"x":""}return l||"M0 0"}var K,J=document.documentElement.style,Q="ActiveXObject"in window,tt=Q&&!document.addEventListener,et="msLaunchUri"in navigator&&!("documentMode"in document),it=Ot("webkit"),nt=Ot("android"),rt=Ot("android 2")||Ot("android 3"),ot=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),st=nt&&Ot("Google")&&ot<537&&!("AudioNode"in window),at=!!window.opera,lt=!et&&Ot("chrome"),ht=Ot("gecko")&&!it&&!at&&!Q,ut=!lt&&Ot("safari"),ct=Ot("phantom"),dt="OTransition"in J,ft=0===navigator.platform.indexOf("Win"),pt=Q&&"transition"in J,gt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!rt,_t="MozPerspective"in J,mt=!window.L_DISABLE_3D&&(pt||gt||_t)&&!dt&&!ct,yt="undefined"!=typeof orientation||Ot("mobile"),vt=yt&&it,xt=yt&&gt,bt=!window.PointerEvent&&window.MSPointerEvent,wt=!(!window.PointerEvent&&!bt),Et="ontouchstart"in window||!!window.TouchEvent,St=!window.L_NO_TOUCH&&(Et||wt),Ct=yt&&at,Pt=yt&&ht,Tt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,It=function(){var t=!1
try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}})
window.addEventListener("testPassiveEventSupport",l,e),window.removeEventListener("testPassiveEventSupport",l,e)}catch(t){}return t}(),Mt=!!document.createElement("canvas").getContext,At=!(!document.createElementNS||!H("svg").createSVGRect),Rt=!!At&&((K=document.createElement("div")).innerHTML="<svg/>","http://www.w3.org/2000/svg"===(K.firstChild&&K.firstChild.namespaceURI)),Lt=!At&&function(){try{var t=document.createElement("div")
t.innerHTML='<v:shape adj="1"/>'
var e=t.firstChild
return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(t){return!1}}()
function Ot(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var Dt={ie:Q,ielt9:tt,edge:et,webkit:it,android:nt,android23:rt,androidStock:st,opera:at,chrome:lt,gecko:ht,safari:ut,phantom:ct,opera12:dt,win:ft,ie3d:pt,webkit3d:gt,gecko3d:_t,any3d:mt,mobile:yt,mobileWebkit:vt,mobileWebkit3d:xt,msPointer:bt,pointer:wt,touch:St,touchNative:Et,mobileOpera:Ct,mobileGecko:Pt,retina:Tt,passiveEvents:It,canvas:Mt,svg:At,vml:Lt,inlineSvg:Rt,mac:0===navigator.platform.indexOf("Mac"),linux:0===navigator.platform.indexOf("Linux")},Nt=Dt.msPointer?"MSPointerDown":"pointerdown",Ft=Dt.msPointer?"MSPointerMove":"pointermove",kt=Dt.msPointer?"MSPointerUp":"pointerup",zt=Dt.msPointer?"MSPointerCancel":"pointercancel",jt={touchstart:Nt,touchmove:Ft,touchend:kt,touchcancel:zt},Gt={touchstart:function(t,e){e.MSPOINTER_TYPE_TOUCH&&e.pointerType===e.MSPOINTER_TYPE_TOUCH&&ke(e),Wt(t,e)},touchmove:Wt,touchend:Wt,touchcancel:Wt},Bt={},Ut=!1
function qt(t){Bt[t.pointerId]=t}function Vt(t){Bt[t.pointerId]&&(Bt[t.pointerId]=t)}function Zt(t){delete Bt[t.pointerId]}function Wt(t,e){if(e.pointerType!==(e.MSPOINTER_TYPE_MOUSE||"mouse")){for(var i in e.touches=[],Bt)e.touches.push(Bt[i])
e.changedTouches=[e],t(e)}}var Yt,Xt,Ht,$t,Kt,Jt=200,Qt=ge(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),te=ge(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ee="webkitTransition"===te||"OTransition"===te?te+"End":"transitionend"
function ie(t){return"string"==typeof t?document.getElementById(t):t}function ne(t,e){var i=t.style[e]||t.currentStyle&&t.currentStyle[e]
if((!i||"auto"===i)&&document.defaultView){var n=document.defaultView.getComputedStyle(t,null)
i=n?n[e]:null}return"auto"===i?null:i}function re(t,e,i){var n=document.createElement(t)
return n.className=e||"",i&&i.appendChild(n),n}function oe(t){var e=t.parentNode
e&&e.removeChild(t)}function se(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function ae(t){var e=t.parentNode
e&&e.lastChild!==t&&e.appendChild(t)}function le(t){var e=t.parentNode
e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function he(t,e){if(void 0!==t.classList)return t.classList.contains(e)
var i=fe(t)
return i.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(i)}function ue(t,e){if(void 0!==t.classList)for(var i=c(e),n=0,r=i.length;n<r;n++)t.classList.add(i[n])
else if(!he(t,e)){var o=fe(t)
de(t,(o?o+" ":"")+e)}}function ce(t,e){void 0!==t.classList?t.classList.remove(e):de(t,u((" "+fe(t)+" ").replace(" "+e+" "," ")))}function de(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function fe(t){return t.correspondingElement&&(t=t.correspondingElement),void 0===t.className.baseVal?t.className:t.className.baseVal}function pe(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&function(t,e){var i=!1,n="DXImageTransform.Microsoft.Alpha"
try{i=t.filters.item(n)}catch(t){if(1===e)return}e=Math.round(100*e),i?(i.Enabled=100!==e,i.Opacity=e):t.style.filter+=" progid:"+n+"(opacity="+e+")"}(t,e)}function ge(t){for(var e=document.documentElement.style,i=0;i<t.length;i++)if(t[i]in e)return t[i]
return!1}function _e(t,e,i){var n=e||new A(0,0)
t.style[Qt]=(Dt.ie3d?"translate("+n.x+"px,"+n.y+"px)":"translate3d("+n.x+"px,"+n.y+"px,0)")+(i?" scale("+i+")":"")}function me(t,e){t._leaflet_pos=e,Dt.any3d?_e(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function ye(t){return t._leaflet_pos||new A(0,0)}if("onselectstart"in document)Yt=function(){Te(window,"selectstart",ke)},Xt=function(){Me(window,"selectstart",ke)}
else{var ve=ge(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"])
Yt=function(){if(ve){var t=document.documentElement.style
Ht=t[ve],t[ve]="none"}},Xt=function(){ve&&(document.documentElement.style[ve]=Ht,Ht=void 0)}}function xe(){Te(window,"dragstart",ke)}function be(){Me(window,"dragstart",ke)}function we(t){for(;-1===t.tabIndex;)t=t.parentNode
t.style&&(Ee(),$t=t,Kt=t.style.outlineStyle,t.style.outlineStyle="none",Te(window,"keydown",Ee))}function Ee(){$t&&($t.style.outlineStyle=Kt,$t=void 0,Kt=void 0,Me(window,"keydown",Ee))}function Se(t){do{t=t.parentNode}while(!(t.offsetWidth&&t.offsetHeight||t===document.body))
return t}function Ce(t){var e=t.getBoundingClientRect()
return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var Pe={__proto__:null,TRANSFORM:Qt,TRANSITION:te,TRANSITION_END:ee,get:ie,getStyle:ne,create:re,remove:oe,empty:se,toFront:ae,toBack:le,hasClass:he,addClass:ue,removeClass:ce,setClass:de,getClass:fe,setOpacity:pe,testProp:ge,setTransform:_e,setPosition:me,getPosition:ye,get disableTextSelection(){return Yt},get enableTextSelection(){return Xt},disableImageDrag:xe,enableImageDrag:be,preventOutline:we,restoreOutline:Ee,getSizedParentNode:Se,getScale:Ce}
function Te(t,e,i,n){if(e&&"object"==typeof e)for(var r in e)Le(t,r,e[r],i)
else for(var o=0,s=(e=c(e)).length;o<s;o++)Le(t,e[o],i,n)
return this}var Ie="_leaflet_events"
function Me(t,e,i,n){if(1===arguments.length)Ae(t),delete t[Ie]
else if(e&&"object"==typeof e)for(var r in e)Oe(t,r,e[r],i)
else if(e=c(e),2===arguments.length)Ae(t,(function(t){return-1!==m(e,t)}))
else for(var o=0,s=e.length;o<s;o++)Oe(t,e[o],i,n)
return this}function Ae(t,e){for(var i in t[Ie]){var n=i.split(/\d/)[0]
e&&!e(n)||Oe(t,n,null,null,i)}}var Re={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"}
function Le(t,e,i,n){var r=e+o(i)+(n?"_"+o(n):"")
if(t[Ie]&&t[Ie][r])return this
var s=function(e){return i.call(n||t,e||window.event)},a=s
!Dt.touchNative&&Dt.pointer&&0===e.indexOf("touch")?s=function(t,e,i){return"touchstart"===e&&(Ut||(document.addEventListener(Nt,qt,!0),document.addEventListener(Ft,Vt,!0),document.addEventListener(kt,Zt,!0),document.addEventListener(zt,Zt,!0),Ut=!0)),Gt[e]?(i=Gt[e].bind(this,i),t.addEventListener(jt[e],i,!1),i):(console.warn("wrong event specified:",e),l)}(t,e,s):Dt.touch&&"dblclick"===e?s=function(t,e){t.addEventListener("dblclick",e)
var i,n=0
function r(t){if(1===t.detail){if("mouse"!==t.pointerType&&(!t.sourceCapabilities||t.sourceCapabilities.firesTouchEvents)){var r=je(t)
if(!r.some((function(t){return t instanceof HTMLLabelElement&&t.attributes.for}))||r.some((function(t){return t instanceof HTMLInputElement||t instanceof HTMLSelectElement}))){var o=Date.now()
o-n<=Jt?2==++i&&e(function(t){var e,i,n={}
for(i in t)e=t[i],n[i]=e&&e.bind?e.bind(t):e
return t=n,n.type="dblclick",n.detail=2,n.isTrusted=!1,n._simulated=!0,n}(t)):i=1,n=o}}}else i=t.detail}return t.addEventListener("click",r),{dblclick:e,simDblclick:r}}(t,s):"addEventListener"in t?"touchstart"===e||"touchmove"===e||"wheel"===e||"mousewheel"===e?t.addEventListener(Re[e]||e,s,!!Dt.passiveEvents&&{passive:!1}):"mouseenter"===e||"mouseleave"===e?(s=function(e){e=e||window.event,qe(t,e)&&a(e)},t.addEventListener(Re[e],s,!1)):t.addEventListener(e,a,!1):t.attachEvent("on"+e,s),t[Ie]=t[Ie]||{},t[Ie][r]=s}function Oe(t,e,i,n,r){r=r||e+o(i)+(n?"_"+o(n):"")
var s=t[Ie]&&t[Ie][r]
if(!s)return this
!Dt.touchNative&&Dt.pointer&&0===e.indexOf("touch")?function(t,e,i){jt[e]?t.removeEventListener(jt[e],i,!1):console.warn("wrong event specified:",e)}(t,e,s):Dt.touch&&"dblclick"===e?function(t,e){t.removeEventListener("dblclick",e.dblclick),t.removeEventListener("click",e.simDblclick)}(t,s):"removeEventListener"in t?t.removeEventListener(Re[e]||e,s,!1):t.detachEvent("on"+e,s),t[Ie][r]=null}function De(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function Ne(t){return Le(t,"wheel",De),this}function Fe(t){return Te(t,"mousedown touchstart dblclick contextmenu",De),t._leaflet_disable_click=!0,this}function ke(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function ze(t){return ke(t),De(t),this}function je(t){if(t.composedPath)return t.composedPath()
for(var e=[],i=t.target;i;)e.push(i),i=i.parentNode
return e}function Ge(t,e){if(!e)return new A(t.clientX,t.clientY)
var i=Ce(e),n=i.boundingClientRect
return new A((t.clientX-n.left)/i.x-e.clientLeft,(t.clientY-n.top)/i.y-e.clientTop)}var Be=Dt.linux&&Dt.chrome?window.devicePixelRatio:Dt.mac?3*window.devicePixelRatio:window.devicePixelRatio>0?2*window.devicePixelRatio:1
function Ue(t){return Dt.edge?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/Be:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}function qe(t,e){var i=e.relatedTarget
if(!i)return!0
try{for(;i&&i!==t;)i=i.parentNode}catch(t){return!1}return i!==t}var Ve={__proto__:null,on:Te,off:Me,stopPropagation:De,disableScrollPropagation:Ne,disableClickPropagation:Fe,preventDefault:ke,stop:ze,getPropagationPath:je,getMousePosition:Ge,getWheelDelta:Ue,isExternalTarget:qe,addListener:Te,removeListener:Me},Ze=M.extend({run:function(t,e,i,n){this.stop(),this._el=t,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(n||.5,.2),this._startPos=ye(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=S(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,i=1e3*this._duration
e<i?this._runFrame(this._easeOut(e/i),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var i=this._startPos.add(this._offset.multiplyBy(t))
e&&i._round(),me(this._el,i),this.fire("step")},_complete:function(){C(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),We=M.extend({options:{crs:Y,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=d(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=n(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(j(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=te&&Dt.any3d&&!Dt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Te(this._proxy,ee,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,i,n){return i=void 0===i?this._zoom:this._limitZoom(i),t=this._limitCenter(j(t),i,this.options.maxBounds),n=n||{},this._stop(),this._loaded&&!n.reset&&!0!==n&&(void 0!==n.animate&&(n.zoom=e({animate:n.animate},n.zoom),n.pan=e({animate:n.animate,duration:n.duration},n.pan)),this._zoom!==i?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,i,n.zoom):this._tryAnimatedPan(t,n.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(t,i,n.pan&&n.pan.noMoveStart),this)},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(Dt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(Dt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,i){var n=this.getZoomScale(e),r=this.getSize().divideBy(2),o=(t instanceof A?t:this.latLngToContainerPoint(t)).subtract(r).multiplyBy(1-1/n),s=this.containerPointToLatLng(r.add(o))
return this.setView(s,e,{zoom:i})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():k(t)
var i=O(e.paddingTopLeft||e.padding||[0,0]),n=O(e.paddingBottomRight||e.padding||[0,0]),r=this.getBoundsZoom(t,!1,i.add(n))
if((r="number"==typeof e.maxZoom?Math.min(e.maxZoom,r):r)===1/0)return{center:t.getCenter(),zoom:r}
var o=n.subtract(i).divideBy(2),s=this.project(t.getSouthWest(),r),a=this.project(t.getNorthEast(),r)
return{center:this.unproject(s.add(a).divideBy(2).add(o),r),zoom:r}},fitBounds:function(t,e){if(!(t=k(t)).isValid())throw new Error("Bounds are not valid.")
var i=this._getBoundsCenterZoom(t,e)
return this.setView(i.center,i.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(e=e||{},!(t=O(t).round()).x&&!t.y)return this.fire("moveend")
if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this
if(this._panAnim||(this._panAnim=new Ze,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){ue(this._mapPane,"leaflet-pan-anim")
var i=this._getMapPanePos().subtract(t).round()
this._panAnim.run(this._mapPane,i,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend")
return this},flyTo:function(t,e,i){if(!1===(i=i||{}).animate||!Dt.any3d)return this.setView(t,e,i)
this._stop()
var n=this.project(this.getCenter()),r=this.project(t),o=this.getSize(),s=this._zoom
t=j(t),e=void 0===e?s:e
var a=Math.max(o.x,o.y),l=a*this.getZoomScale(s,e),h=r.distanceTo(n)||1,u=1.42,c=u*u
function d(t){var e=(l*l-a*a+(t?-1:1)*c*c*h*h)/(2*(t?l:a)*c*h),i=Math.sqrt(e*e+1)-e
return i<1e-9?-18:Math.log(i)}function f(t){return(Math.exp(t)-Math.exp(-t))/2}function p(t){return(Math.exp(t)+Math.exp(-t))/2}var g=d(0)
var _=Date.now(),m=(d(1)-g)/u,y=i.duration?1e3*i.duration:1e3*m*.8
return this._moveStart(!0,i.noMoveStart),function i(){var o=(Date.now()-_)/y,l=function(t){return 1-Math.pow(1-t,1.5)}(o)*m
o<=1?(this._flyToFrame=S(i,this),this._move(this.unproject(n.add(r.subtract(n).multiplyBy(function(t){return a*(p(g)*(f(e=g+u*t)/p(e))-f(g))/c
var e}(l)/h)),s),this.getScaleZoom(a/function(t){return a*(p(g)/p(g+u*t))}(l),s),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}.call(this),this},flyToBounds:function(t,e){var i=this._getBoundsCenterZoom(t,e)
return this.flyTo(i.center,i.zoom,e)},setMaxBounds:function(t){return t=k(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var e=this.options.minZoom
return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom
return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0
var i=this.getCenter(),n=this._limitCenter(i,this._zoom,k(t))
return i.equals(n)||this.panTo(n,e),this._enforcingBounds=!1,this},panInside:function(t,e){var i=O((e=e||{}).paddingTopLeft||e.padding||[0,0]),n=O(e.paddingBottomRight||e.padding||[0,0]),r=this.project(this.getCenter()),o=this.project(t),s=this.getPixelBounds(),a=N([s.min.add(i),s.max.subtract(n)]),l=a.getSize()
if(!a.contains(o)){this._enforcingBounds=!0
var h=o.subtract(a.getCenter()),u=a.extend(o).getSize().subtract(l)
r.x+=h.x<0?-u.x:u.x,r.y+=h.y<0?-u.y:u.y,this.panTo(this.unproject(r),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this
t=e({animate:!1,pan:!0},!0===t?{animate:!0}:t)
var i=this.getSize()
this._sizeChanged=!0,this._lastCenter=null
var r=this.getSize(),o=i.divideBy(2).round(),s=r.divideBy(2).round(),a=o.subtract(s)
return a.x||a.y?(t.animate&&t.pan?this.panBy(a):(t.pan&&this._rawPanBy(a),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(n(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:i,newSize:r})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=e({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this
var i=n(this._handleGeolocationResponse,this),r=n(this._handleGeolocationError,this)
return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(i,r,t):navigator.geolocation.getCurrentPosition(i,r,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var e=t.code,i=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout")
this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+i+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var e=new z(t.coords.latitude,t.coords.longitude),i=e.toBounds(2*t.coords.accuracy),n=this._locateOptions
if(n.setView){var r=this.getBoundsZoom(i)
this.setView(e,n.maxZoom?Math.min(r,n.maxZoom):r)}var o={latlng:e,bounds:i,timestamp:t.timestamp}
for(var s in t.coords)"number"==typeof t.coords[s]&&(o[s]=t.coords[s])
this.fire("locationfound",o)}},addHandler:function(t,e){if(!e)return this
var i=this[t]=new e(this)
return this._handlers.push(i),this.options[t]&&i.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance")
try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}var t
for(t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),oe(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(C(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove()
for(t in this._panes)oe(this._panes[t])
return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var i=re("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),e||this._mapPane)
return t&&(this._panes[t]=i),i},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds()
return new F(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,i){t=k(t),i=O(i||[0,0])
var n=this.getZoom()||0,r=this.getMinZoom(),o=this.getMaxZoom(),s=t.getNorthWest(),a=t.getSouthEast(),l=this.getSize().subtract(i),h=N(this.project(a,n),this.project(s,n)).getSize(),u=Dt.any3d?this.options.zoomSnap:1,c=l.x/h.x,d=l.y/h.y,f=e?Math.max(c,d):Math.min(c,d)
return n=this.getScaleZoom(f,n),u&&(n=Math.round(n/(u/100))*(u/100),n=e?Math.ceil(n/u)*u:Math.floor(n/u)*u),Math.max(r,Math.min(o,n))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new A(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var i=this._getTopLeftPoint(t,e)
return new D(i,i.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var i=this.options.crs
return e=void 0===e?this._zoom:e,i.scale(t)/i.scale(e)},getScaleZoom:function(t,e){var i=this.options.crs
e=void 0===e?this._zoom:e
var n=i.zoom(t*i.scale(e))
return isNaN(n)?1/0:n},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(j(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(O(t),e)},layerPointToLatLng:function(t){var e=O(t).add(this.getPixelOrigin())
return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(j(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(j(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(k(t))},distance:function(t,e){return this.options.crs.distance(j(t),j(e))},containerPointToLayerPoint:function(t){return O(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return O(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(O(t))
return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(j(t)))},mouseEventToContainerPoint:function(t){return Ge(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=ie(t)
if(!e)throw new Error("Map container not found.")
if(e._leaflet_id)throw new Error("Map container is already initialized.")
Te(e,"scroll",this._onScroll,this),this._containerId=o(e)},_initLayout:function(){var t=this._container
this._fadeAnimated=this.options.fadeAnimation&&Dt.any3d,ue(t,"leaflet-container"+(Dt.touch?" leaflet-touch":"")+(Dt.retina?" leaflet-retina":"")+(Dt.ielt9?" leaflet-oldie":"")+(Dt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""))
var e=ne(t,"position")
"absolute"!==e&&"relative"!==e&&"fixed"!==e&&"sticky"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={}
this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),me(this._mapPane,new A(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ue(t.markerPane,"leaflet-zoom-hide"),ue(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e,i){me(this._mapPane,new A(0,0))
var n=!this._loaded
this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset")
var r=this._zoom!==e
this._moveStart(r,i)._move(t,e)._moveEnd(r),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,i,n){void 0===e&&(e=this._zoom)
var r=this._zoom!==e
return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),n?i&&i.pinch&&this.fire("zoom",i):((r||i&&i.pinch)&&this.fire("zoom",i),this.fire("move",i)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return C(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){me(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[o(this._container)]=this
var e=t?Me:Te
e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),Dt.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){C(this._resizeRequest),this._resizeRequest=S((function(){this.invalidateSize({debounceMoveend:!0})}),this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos()
Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var i,n=[],r="mouseout"===e||"mouseover"===e,s=t.target||t.srcElement,a=!1;s;){if((i=this._targets[o(s)])&&("click"===e||"preclick"===e)&&this._draggableMoved(i)){a=!0
break}if(i&&i.listens(e,!0)){if(r&&!qe(s,t))break
if(n.push(i),r)break}if(s===this._container)break
s=s.parentNode}return n.length||a||r||!this.listens(e,!0)||(n=[this]),n},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0
t=t.parentNode}},_handleDOMEvent:function(t){var e=t.target||t.srcElement
if(!(!this._loaded||e._leaflet_disable_events||"click"===t.type&&this._isClickDisabled(e))){var i=t.type
"mousedown"===i&&we(e),this._fireDOMEvent(t,i)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,i,n){if("click"===t.type){var r=e({},t)
r.type="preclick",this._fireDOMEvent(r,r.type,n)}var o=this._findEventTargets(t,i)
if(n){for(var s=[],a=0;a<n.length;a++)n[a].listens(i,!0)&&s.push(n[a])
o=s.concat(o)}if(o.length){"contextmenu"===i&&ke(t)
var l=o[0],h={originalEvent:t}
if("keypress"!==t.type&&"keydown"!==t.type&&"keyup"!==t.type){var u=l.getLatLng&&(!l._radius||l._radius<=10)
h.containerPoint=u?this.latLngToContainerPoint(l.getLatLng()):this.mouseEventToContainerPoint(t),h.layerPoint=this.containerPointToLayerPoint(h.containerPoint),h.latlng=u?l.getLatLng():this.layerPointToLatLng(h.layerPoint)}for(a=0;a<o.length;a++)if(o[a].fire(i,h,!0),h.originalEvent._stopped||!1===o[a].options.bubblingMouseEvents&&-1!==m(this._mouseEvents,i))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return ye(this._mapPane)||new A(0,0)},_moved:function(){var t=this._getMapPanePos()
return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var i=this.getSize()._divideBy(2)
return this.project(t,e)._subtract(i)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,i){var n=this._getNewPixelOrigin(i,e)
return this.project(t,e)._subtract(n)},_latLngBoundsToNewLayerBounds:function(t,e,i){var n=this._getNewPixelOrigin(i,e)
return N([this.project(t.getSouthWest(),e)._subtract(n),this.project(t.getNorthWest(),e)._subtract(n),this.project(t.getSouthEast(),e)._subtract(n),this.project(t.getNorthEast(),e)._subtract(n)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,i){if(!i)return t
var n=this.project(t,e),r=this.getSize().divideBy(2),o=new D(n.subtract(r),n.add(r)),s=this._getBoundsOffset(o,i,e)
return Math.abs(s.x)<=1&&Math.abs(s.y)<=1?t:this.unproject(n.add(s),e)},_limitOffset:function(t,e){if(!e)return t
var i=this.getPixelBounds(),n=new D(i.min.add(t),i.max.add(t))
return t.add(this._getBoundsOffset(n,e))},_getBoundsOffset:function(t,e,i){var n=N(this.project(e.getNorthEast(),i),this.project(e.getSouthWest(),i)),r=n.min.subtract(t.min),o=n.max.subtract(t.max)
return new A(this._rebound(r.x,-o.x),this._rebound(r.y,-o.y))},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),i=this.getMaxZoom(),n=Dt.any3d?this.options.zoomSnap:1
return n&&(t=Math.round(t/n)*n),Math.max(e,Math.min(i,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ce(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var i=this._getCenterOffset(t)._trunc()
return!(!0!==(e&&e.animate)&&!this.getSize().contains(i)||(this.panBy(i,e),0))},_createAnimProxy:function(){var t=this._proxy=re("div","leaflet-proxy leaflet-zoom-animated")
this._panes.mapPane.appendChild(t),this.on("zoomanim",(function(t){var e=Qt,i=this._proxy.style[e]
_e(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),i===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()}),this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){oe(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom()
_e(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,i){if(this._animatingZoom)return!0
if(i=i||{},!this._zoomAnimated||!1===i.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1
var n=this.getZoomScale(e),r=this._getCenterOffset(t)._divideBy(1-1/n)
return!(!0!==i.animate&&!this.getSize().contains(r)||(S((function(){this._moveStart(!0,i.noMoveStart||!1)._animateZoom(t,e,!0)}),this),0))},_animateZoom:function(t,e,i,r){this._mapPane&&(i&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,ue(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:r}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(n(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ce(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}}),Ye=T.extend({options:{position:"topright"},initialize:function(t){d(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map
return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t
var e=this._container=this.onAdd(t),i=this.getPosition(),n=t._controlCorners[i]
return ue(e,"leaflet-control"),-1!==i.indexOf("bottom")?n.insertBefore(e,n.firstChild):n.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(oe(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Xe=function(t){return new Ye(t)}
We.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",i=this._controlContainer=re("div",e+"control-container",this._container)
function n(n,r){var o=e+n+" "+e+r
t[n+r]=re("div",o,i)}n("top","left"),n("top","right"),n("bottom","left"),n("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)oe(this._controlCorners[t])
oe(this._controlContainer),delete this._controlCorners,delete this._controlContainer}})
var He=Ye.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,i,n){return i<n?-1:n<i?1:0}},initialize:function(t,e,i){for(var n in d(this,i),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1,t)this._addLayer(t[n],n)
for(n in e)this._addLayer(e[n],n,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this)
for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this)
return this._container},addTo:function(t){return Ye.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this)
for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this)
var e=this._getLayer(o(t))
return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){ue(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null
var t=this._map.getSize().y-(this._container.offsetTop+50)
return t<this._section.clientHeight?(ue(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):ce(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ce(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=re("div",t),i=this.options.collapsed
e.setAttribute("aria-haspopup",!0),Fe(e),Ne(e)
var n=this._section=re("section",t+"-list")
i&&(this._map.on("click",this.collapse,this),Te(e,{mouseenter:this._expandSafely,mouseleave:this.collapse},this))
var r=this._layersLink=re("a",t+"-toggle",e)
r.href="#",r.title="Layers",r.setAttribute("role","button"),Te(r,{keydown:function(t){13===t.keyCode&&this._expandSafely()},click:function(t){ke(t),this._expandSafely()}},this),i||this.expand(),this._baseLayersList=re("div",t+"-base",n),this._separator=re("div",t+"-separator",n),this._overlaysList=re("div",t+"-overlays",n),e.appendChild(n)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&o(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,i){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:i}),this.options.sortLayers&&this._layers.sort(n((function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)}),this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this
se(this._baseLayersList),se(this._overlaysList),this._layerControlInputs=[]
var t,e,i,n,r=0
for(i=0;i<this._layers.length;i++)n=this._layers[i],this._addItem(n),e=e||n.overlay,t=t||!n.overlay,r+=n.overlay?0:1
return this.options.hideSingleBase&&(t=t&&r>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update()
var e=this._getLayer(o(t.target)),i=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null
i&&this._map.fire(i,e)},_createRadioElement:function(t,e){var i='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",n=document.createElement("div")
return n.innerHTML=i,n.firstChild},_addItem:function(t){var e,i=document.createElement("label"),n=this._map.hasLayer(t.layer)
t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=n):e=this._createRadioElement("leaflet-base-layers_"+o(this),n),this._layerControlInputs.push(e),e.layerId=o(t.layer),Te(e,"click",this._onInputClick,this)
var r=document.createElement("span")
r.innerHTML=" "+t.name
var s=document.createElement("span")
return i.appendChild(s),s.appendChild(e),s.appendChild(r),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(i),this._checkDisabledLayers(),i},_onInputClick:function(){if(!this._preventClick){var t,e,i=this._layerControlInputs,n=[],r=[]
this._handlingClick=!0
for(var o=i.length-1;o>=0;o--)t=i[o],e=this._getLayer(t.layerId).layer,t.checked?n.push(e):t.checked||r.push(e)
for(o=0;o<r.length;o++)this._map.hasLayer(r[o])&&this._map.removeLayer(r[o])
for(o=0;o<n.length;o++)this._map.hasLayer(n[o])||this._map.addLayer(n[o])
this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t,e,i=this._layerControlInputs,n=this._map.getZoom(),r=i.length-1;r>=0;r--)t=i[r],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&n<e.options.minZoom||void 0!==e.options.maxZoom&&n>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section
this._preventClick=!0,Te(t,"click",ke),this.expand()
var e=this
setTimeout((function(){Me(t,"click",ke),e._preventClick=!1}))}}),$e=Ye.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",i=re("div",e+" leaflet-bar"),n=this.options
return this._zoomInButton=this._createButton(n.zoomInText,n.zoomInTitle,e+"-in",i,this._zoomIn),this._zoomOutButton=this._createButton(n.zoomOutText,n.zoomOutTitle,e+"-out",i,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),i},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,i,n,r){var o=re("a",i,n)
return o.innerHTML=t,o.href="#",o.title=e,o.setAttribute("role","button"),o.setAttribute("aria-label",e),Fe(o),Te(o,"click",ze),Te(o,"click",r,this),Te(o,"click",this._refocusOnMap,this),o},_updateDisabled:function(){var t=this._map,e="leaflet-disabled"
ce(this._zoomInButton,e),ce(this._zoomOutButton,e),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(ue(this._zoomOutButton,e),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(ue(this._zoomInButton,e),this._zoomInButton.setAttribute("aria-disabled","true"))}})
We.mergeOptions({zoomControl:!0}),We.addInitHook((function(){this.options.zoomControl&&(this.zoomControl=new $e,this.addControl(this.zoomControl))}))
var Ke=Ye.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",i=re("div",e),n=this.options
return this._addScales(n,e+"-line",i),t.on(n.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),i},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,i){t.metric&&(this._mScale=re("div",e,i)),t.imperial&&(this._iScale=re("div",e,i))},_update:function(){var t=this._map,e=t.getSize().y/2,i=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]))
this._updateScales(i)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),i=e<1e3?e+" m":e/1e3+" km"
this._updateScale(this._mScale,i,e/t)},_updateImperial:function(t){var e,i,n,r=3.2808399*t
r>5280?(e=r/5280,i=this._getRoundNum(e),this._updateScale(this._iScale,i+" mi",i/e)):(n=this._getRoundNum(r),this._updateScale(this._iScale,n+" ft",n/r))},_updateScale:function(t,e,i){t.style.width=Math.round(this.options.maxWidth*i)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),i=t/e
return e*(i>=10?10:i>=5?5:i>=3?3:i>=2?2:1)}}),Je=Ye.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Dt.inlineSvg?'<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg> ':"")+"Leaflet</a>"},initialize:function(t){d(this,t),this._attributions={}},onAdd:function(t){for(var e in t.attributionControl=this,this._container=re("div","leaflet-control-attribution"),Fe(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution())
return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",(function(){this.removeAttribution(t.layer.getAttribution())}),this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[]
for(var e in this._attributions)this._attributions[e]&&t.push(e)
var i=[]
this.options.prefix&&i.push(this.options.prefix),t.length&&i.push(t.join(", ")),this._container.innerHTML=i.join(' <span aria-hidden="true">|</span> ')}}})
We.mergeOptions({attributionControl:!0}),We.addInitHook((function(){this.options.attributionControl&&(new Je).addTo(this)})),Ye.Layers=He,Ye.Zoom=$e,Ye.Scale=Ke,Ye.Attribution=Je,Xe.layers=function(t,e,i){return new He(t,e,i)},Xe.zoom=function(t){return new $e(t)},Xe.scale=function(t){return new Ke(t)},Xe.attribution=function(t){return new Je(t)}
var Qe=T.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}})
Qe.addTo=function(t,e){return t.addHandler(e,this),this}
var ti={Events:I},ei=Dt.touch?"touchstart mousedown":"mousedown",ii=M.extend({options:{clickTolerance:3},initialize:function(t,e,i,n){d(this,n),this._element=t,this._dragStartTarget=e||t,this._preventOutline=i},enable:function(){this._enabled||(Te(this._dragStartTarget,ei,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ii._dragging===this&&this.finishDrag(!0),Me(this._dragStartTarget,ei,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!he(this._element,"leaflet-zoom-anim")))if(t.touches&&1!==t.touches.length)ii._dragging===this&&this.finishDrag()
else if(!(ii._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(ii._dragging=this,this._preventOutline&&we(this._element),xe(),Yt(),this._moving))){this.fire("down")
var e=t.touches?t.touches[0]:t,i=Se(this._element)
this._startPoint=new A(e.clientX,e.clientY),this._startPos=ye(this._element),this._parentScale=Ce(i)
var n="mousedown"===t.type
Te(document,n?"mousemove":"touchmove",this._onMove,this),Te(document,n?"mouseup":"touchend touchcancel",this._onUp,this)}},_onMove:function(t){if(this._enabled)if(t.touches&&t.touches.length>1)this._moved=!0
else{var e=t.touches&&1===t.touches.length?t.touches[0]:t,i=new A(e.clientX,e.clientY)._subtract(this._startPoint);(i.x||i.y)&&(Math.abs(i.x)+Math.abs(i.y)<this.options.clickTolerance||(i.x/=this._parentScale.x,i.y/=this._parentScale.y,ke(t),this._moved||(this.fire("dragstart"),this._moved=!0,ue(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ue(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(i),this._moving=!0,this._lastEvent=t,this._updatePosition()))}},_updatePosition:function(){var t={originalEvent:this._lastEvent}
this.fire("predrag",t),me(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){ce(document.body,"leaflet-dragging"),this._lastTarget&&(ce(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Me(document,"mousemove touchmove",this._onMove,this),Me(document,"mouseup touchend touchcancel",this._onUp,this),be(),Xt()
var e=this._moved&&this._moving
this._moving=!1,ii._dragging=!1,e&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}})
function ni(t,e,i){var n,r,o,s,a,l,h,u,c,d=[1,4,2,8]
for(r=0,h=t.length;r<h;r++)t[r]._code=fi(t[r],e)
for(s=0;s<4;s++){for(u=d[s],n=[],r=0,o=(h=t.length)-1;r<h;o=r++)a=t[r],l=t[o],a._code&u?l._code&u||((c=di(l,a,u,e,i))._code=fi(c,e),n.push(c)):(l._code&u&&((c=di(l,a,u,e,i))._code=fi(c,e),n.push(c)),n.push(a))
t=n}return t}function ri(t,e){var i,n,r,o,s,a,l,h,u
if(!t||0===t.length)throw new Error("latlngs not passed")
_i(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0])
var c=j([0,0]),d=k(t)
d.getNorthWest().distanceTo(d.getSouthWest())*d.getNorthEast().distanceTo(d.getNorthWest())<1700&&(c=oi(t))
var f=t.length,p=[]
for(i=0;i<f;i++){var g=j(t[i])
p.push(e.project(j([g.lat-c.lat,g.lng-c.lng])))}for(a=l=h=0,i=0,n=f-1;i<f;n=i++)r=p[i],o=p[n],s=r.y*o.x-o.y*r.x,l+=(r.x+o.x)*s,h+=(r.y+o.y)*s,a+=3*s
u=0===a?p[0]:[l/a,h/a]
var _=e.unproject(O(u))
return j([_.lat+c.lat,_.lng+c.lng])}function oi(t){for(var e=0,i=0,n=0,r=0;r<t.length;r++){var o=j(t[r])
e+=o.lat,i+=o.lng,n++}return j([e/n,i/n])}var si,ai={__proto__:null,clipPolygon:ni,polygonCenter:ri,centroid:oi}
function li(t,e){if(!e||!t.length)return t.slice()
var i=e*e
return function(t,e){var i=t.length,n=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(i)
n[0]=n[i-1]=1,ui(t,n,e,0,i-1)
var r,o=[]
for(r=0;r<i;r++)n[r]&&o.push(t[r])
return o}(t=function(t,e){for(var i=[t[0]],n=1,r=0,o=t.length;n<o;n++)pi(t[n],t[r])>e&&(i.push(t[n]),r=n)
return r<o-1&&i.push(t[o-1]),i}(t,i),i)}function hi(t,e,i){return Math.sqrt(gi(t,e,i,!0))}function ui(t,e,i,n,r){var o,s,a,l=0
for(s=n+1;s<=r-1;s++)(a=gi(t[s],t[n],t[r],!0))>l&&(o=s,l=a)
l>i&&(e[o]=1,ui(t,e,i,n,o),ui(t,e,i,o,r))}function ci(t,e,i,n,r){var o,s,a,l=n?si:fi(t,i),h=fi(e,i)
for(si=h;;){if(!(l|h))return[t,e]
if(l&h)return!1
a=fi(s=di(t,e,o=l||h,i,r),i),o===l?(t=s,l=a):(e=s,h=a)}}function di(t,e,i,n,r){var o,s,a=e.x-t.x,l=e.y-t.y,h=n.min,u=n.max
return 8&i?(o=t.x+a*(u.y-t.y)/l,s=u.y):4&i?(o=t.x+a*(h.y-t.y)/l,s=h.y):2&i?(o=u.x,s=t.y+l*(u.x-t.x)/a):1&i&&(o=h.x,s=t.y+l*(h.x-t.x)/a),new A(o,s,r)}function fi(t,e){var i=0
return t.x<e.min.x?i|=1:t.x>e.max.x&&(i|=2),t.y<e.min.y?i|=4:t.y>e.max.y&&(i|=8),i}function pi(t,e){var i=e.x-t.x,n=e.y-t.y
return i*i+n*n}function gi(t,e,i,n){var r,o=e.x,s=e.y,a=i.x-o,l=i.y-s,h=a*a+l*l
return h>0&&((r=((t.x-o)*a+(t.y-s)*l)/h)>1?(o=i.x,s=i.y):r>0&&(o+=a*r,s+=l*r)),a=t.x-o,l=t.y-s,n?a*a+l*l:new A(o,s)}function _i(t){return!_(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]}function mi(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),_i(t)}function yi(t,e){var i,n,r,o,s,a,l,h
if(!t||0===t.length)throw new Error("latlngs not passed")
_i(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0])
var u=j([0,0]),c=k(t)
c.getNorthWest().distanceTo(c.getSouthWest())*c.getNorthEast().distanceTo(c.getNorthWest())<1700&&(u=oi(t))
var d=t.length,f=[]
for(i=0;i<d;i++){var p=j(t[i])
f.push(e.project(j([p.lat-u.lat,p.lng-u.lng])))}for(i=0,n=0;i<d-1;i++)n+=f[i].distanceTo(f[i+1])/2
if(0===n)h=f[0]
else for(i=0,o=0;i<d-1;i++)if(s=f[i],a=f[i+1],(o+=r=s.distanceTo(a))>n){l=(o-n)/r,h=[a.x-l*(a.x-s.x),a.y-l*(a.y-s.y)]
break}var g=e.unproject(O(h))
return j([g.lat+u.lat,g.lng+u.lng])}var vi={__proto__:null,simplify:li,pointToSegmentDistance:hi,closestPointOnSegment:function(t,e,i){return gi(t,e,i)},clipSegment:ci,_getEdgeIntersection:di,_getBitCode:fi,_sqClosestPointOnSegment:gi,isFlat:_i,_flat:mi,polylineCenter:yi},xi={project:function(t){return new A(t.lng,t.lat)},unproject:function(t){return new z(t.y,t.x)},bounds:new D([-180,-90],[180,90])},bi={R:6378137,R_MINOR:6356752.314245179,bounds:new D([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,i=this.R,n=t.lat*e,r=this.R_MINOR/i,o=Math.sqrt(1-r*r),s=o*Math.sin(n),a=Math.tan(Math.PI/4-n/2)/Math.pow((1-s)/(1+s),o/2)
return n=-i*Math.log(Math.max(a,1e-10)),new A(t.lng*e*i,n)},unproject:function(t){for(var e,i=180/Math.PI,n=this.R,r=this.R_MINOR/n,o=Math.sqrt(1-r*r),s=Math.exp(-t.y/n),a=Math.PI/2-2*Math.atan(s),l=0,h=.1;l<15&&Math.abs(h)>1e-7;l++)e=o*Math.sin(a),e=Math.pow((1-e)/(1+e),o/2),a+=h=Math.PI/2-2*Math.atan(s*e)-a
return new z(a*i,t.x*i/n)}},wi={__proto__:null,LonLat:xi,Mercator:bi,SphericalMercator:V},Ei=e({},U,{code:"EPSG:3395",projection:bi,transformation:function(){var t=.5/(Math.PI*bi.R)
return W(t,.5,-t,.5)}()}),Si=e({},U,{code:"EPSG:4326",projection:xi,transformation:W(1/180,1,-1/180,.5)}),Ci=e({},B,{projection:xi,transformation:W(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var i=e.lng-t.lng,n=e.lat-t.lat
return Math.sqrt(i*i+n*n)},infinite:!0})
B.Earth=U,B.EPSG3395=Ei,B.EPSG3857=Y,B.EPSG900913=X,B.EPSG4326=Si,B.Simple=Ci
var Pi=M.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[o(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[o(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target
if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var i=this.getEvents()
e.on(i,this),this.once("remove",(function(){e.off(i,this)}),this)}this.onAdd(e),this.fire("add"),e.fire("layeradd",{layer:this})}}})
We.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.")
var e=o(t)
return this._layers[e]||(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t)),this},removeLayer:function(t){var e=o(t)
return this._layers[e]?(this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return o(t)in this._layers},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i])
return this},_addLayers:function(t){for(var e=0,i=(t=t?_(t)?t:[t]:[]).length;e<i;e++)this.addLayer(t[e])},_addZoomLimit:function(t){isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[o(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=o(t)
this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,i=this._getZoomSpan()
for(var n in this._zoomBoundLayers){var r=this._zoomBoundLayers[n].options
t=void 0===r.minZoom?t:Math.min(t,r.minZoom),e=void 0===r.maxZoom?e:Math.max(e,r.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,i!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}})
var Ti=Pi.extend({initialize:function(t,e){var i,n
if(d(this,e),this._layers={},t)for(i=0,n=t.length;i<n;i++)this.addLayer(t[i])},addLayer:function(t){var e=this.getLayerId(t)
return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t)
return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return("number"==typeof t?t:this.getLayerId(t))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,i,n=Array.prototype.slice.call(arguments,1)
for(e in this._layers)(i=this._layers[e])[t]&&i[t].apply(i,n)
return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i])
return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[]
return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return o(t)}}),Ii=Ti.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Ti.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Ti.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new F
for(var e in this._layers){var i=this._layers[e]
t.extend(i.getBounds?i.getBounds():i.getLatLng())}return t}}),Mi=T.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){d(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var i=this._getIconUrl(t)
if(!i){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).")
return null}var n=this._createImg(i,e&&"IMG"===e.tagName?e:null)
return this._setIconStyles(n,t),(this.options.crossOrigin||""===this.options.crossOrigin)&&(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),n},_setIconStyles:function(t,e){var i=this.options,n=i[e+"Size"]
"number"==typeof n&&(n=[n,n])
var r=O(n),o=O("shadow"===e&&i.shadowAnchor||i.iconAnchor||r&&r.divideBy(2,!0))
t.className="leaflet-marker-"+e+" "+(i.className||""),o&&(t.style.marginLeft=-o.x+"px",t.style.marginTop=-o.y+"px"),r&&(t.style.width=r.x+"px",t.style.height=r.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return Dt.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}}),Ai=Mi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return"string"!=typeof Ai.imagePath&&(Ai.imagePath=this._detectIconPath()),(this.options.imagePath||Ai.imagePath)+Mi.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var e=function(t,e,i){var n=e.exec(t)
return n&&n[i]}
return(t=e(t,/^url\((['"])?(.+)\1\)$/,2))&&e(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=re("div","leaflet-default-icon-path",document.body),e=ne(t,"background-image")||ne(t,"backgroundImage")
if(document.body.removeChild(t),e=this._stripUrl(e))return e
var i=document.querySelector('link[href$="leaflet-821d81876c8bde7940ea781cc212d03b.css"]')
return i?i.href.substring(0,i.href.length-11-1):""}}),Ri=Qe.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon
this._draggable||(this._draggable=new ii(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ue(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ce(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,i=e._map,n=this._marker.options.autoPanSpeed,r=this._marker.options.autoPanPadding,o=ye(e._icon),s=i.getPixelBounds(),a=i.getPixelOrigin(),l=N(s.min._subtract(a).add(r),s.max._subtract(a).subtract(r))
if(!l.contains(o)){var h=O((Math.max(l.max.x,o.x)-l.max.x)/(s.max.x-l.max.x)-(Math.min(l.min.x,o.x)-l.min.x)/(s.min.x-l.min.x),(Math.max(l.max.y,o.y)-l.max.y)/(s.max.y-l.max.y)-(Math.min(l.min.y,o.y)-l.min.y)/(s.min.y-l.min.y)).multiplyBy(n)
i.panBy(h,{animate:!1}),this._draggable._newPos._add(h),this._draggable._startPos._add(h),me(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=S(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(C(this._panRequest),this._panRequest=S(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,i=e._shadow,n=ye(e._icon),r=e._map.layerPointToLatLng(n)
i&&me(i,n),e._latlng=r,t.latlng=r,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){C(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Li=Pi.extend({options:{icon:new Ai,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){d(this,e),this._latlng=j(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng
return this._latlng=j(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round()
this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),i=t.icon.createIcon(this._icon),n=!1
i!==this._icon&&(this._icon&&this._removeIcon(),n=!0,t.title&&(i.title=t.title),"IMG"===i.tagName&&(i.alt=t.alt||"")),ue(i,e),t.keyboard&&(i.tabIndex="0",i.setAttribute("role","button")),this._icon=i,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Te(i,"focus",this._panOnFocus,this)
var r=t.icon.createShadow(this._shadow),o=!1
r!==this._shadow&&(this._removeShadow(),o=!0),r&&(ue(r,e),r.alt=""),this._shadow=r,t.opacity<1&&this._updateOpacity(),n&&this.getPane().appendChild(this._icon),this._initInteraction(),r&&o&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Me(this._icon,"focus",this._panOnFocus,this),oe(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&oe(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&me(this._icon,t),this._shadow&&me(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round()
this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(ue(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ri)){var t=this.options.draggable
this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ri(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity
this._icon&&pe(this._icon,t),this._shadow&&pe(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map
if(t){var e=this.options.icon.options,i=e.iconSize?O(e.iconSize):O(0,0),n=e.iconAnchor?O(e.iconAnchor):O(0,0)
t.panInside(this._latlng,{paddingTopLeft:n,paddingBottomRight:i.subtract(n)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}}),Oi=Pi.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return d(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Di=Oi.extend({options:{fill:!0,radius:10},initialize:function(t,e){d(this,e),this._latlng=j(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng
return this._latlng=j(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius
return Oi.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,i=this._clickTolerance(),n=[t+i,e+i]
this._pxBounds=new D(this._point.subtract(n),this._point.add(n))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}}),Ni=Di.extend({initialize:function(t,i,n){if("number"==typeof i&&(i=e({},n,{radius:i})),d(this,i),this._latlng=j(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN")
this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius]
return new F(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Oi.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,i=this._map,n=i.options.crs
if(n.distance===U.distance){var r=Math.PI/180,o=this._mRadius/U.R/r,s=i.project([e+o,t]),a=i.project([e-o,t]),l=s.add(a).divideBy(2),h=i.unproject(l).lat,u=Math.acos((Math.cos(o*r)-Math.sin(e*r)*Math.sin(h*r))/(Math.cos(e*r)*Math.cos(h*r)))/r;(isNaN(u)||0===u)&&(u=o/Math.cos(Math.PI/180*e)),this._point=l.subtract(i.getPixelOrigin()),this._radius=isNaN(u)?0:l.x-i.project([h,t-u]).x,this._radiusY=l.y-s.y}else{var c=n.unproject(n.project(this._latlng).subtract([this._mRadius,0]))
this._point=i.latLngToLayerPoint(this._latlng),this._radius=this._point.x-i.latLngToLayerPoint(c).x}this._updateBounds()}}),Fi=Oi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){d(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,i,n=1/0,r=null,o=gi,s=0,a=this._parts.length;s<a;s++)for(var l=this._parts[s],h=1,u=l.length;h<u;h++){var c=o(t,e=l[h-1],i=l[h],!0)
c<n&&(n=c,r=o(t,e,i))}return r&&(r.distance=Math.sqrt(n)),r},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()")
return yi(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=j(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new F,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return _i(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],i=_i(t),n=0,r=t.length;n<r;n++)i?(e[n]=j(t[n]),this._bounds.extend(e[n])):e[n]=this._convertLatLngs(t[n])
return e},_project:function(){var t=new D
this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new A(t,t)
this._rawPxBounds&&(this._pxBounds=new D([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)]))},_projectLatlngs:function(t,e,i){var n,r,o=t[0]instanceof z,s=t.length
if(o){for(r=[],n=0;n<s;n++)r[n]=this._map.latLngToLayerPoint(t[n]),i.extend(r[n])
e.push(r)}else for(n=0;n<s;n++)this._projectLatlngs(t[n],e,i)},_clipPoints:function(){var t=this._renderer._bounds
if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings
else{var e,i,n,r,o,s,a,l=this._parts
for(e=0,n=0,r=this._rings.length;e<r;e++)for(i=0,o=(a=this._rings[e]).length;i<o-1;i++)(s=ci(a[i],a[i+1],t,i,!0))&&(l[n]=l[n]||[],l[n].push(s[0]),s[1]===a[i+1]&&i!==o-2||(l[n].push(s[1]),n++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,i=0,n=t.length;i<n;i++)t[i]=li(t[i],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var i,n,r,o,s,a,l=this._clickTolerance()
if(!this._pxBounds||!this._pxBounds.contains(t))return!1
for(i=0,o=this._parts.length;i<o;i++)for(n=0,r=(s=(a=this._parts[i]).length)-1;n<s;r=n++)if((e||0!==n)&&hi(t,a[r],a[n])<=l)return!0
return!1}})
Fi._flat=mi
var ki=Fi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()")
return ri(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var e=Fi.prototype._convertLatLngs.call(this,t),i=e.length
return i>=2&&e[0]instanceof z&&e[0].equals(e[i-1])&&e.pop(),e},_setLatLngs:function(t){Fi.prototype._setLatLngs.call(this,t),_i(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return _i(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,i=new A(e,e)
if(t=new D(t.min.subtract(i),t.max.add(i)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings
else for(var n,r=0,o=this._rings.length;r<o;r++)(n=ni(this._rings[r],t,!0)).length&&this._parts.push(n)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,i,n,r,o,s,a,l,h=!1
if(!this._pxBounds||!this._pxBounds.contains(t))return!1
for(r=0,a=this._parts.length;r<a;r++)for(o=0,s=(l=(e=this._parts[r]).length)-1;o<l;s=o++)i=e[o],n=e[s],i.y>t.y!=n.y>t.y&&t.x<(n.x-i.x)*(t.y-i.y)/(n.y-i.y)+i.x&&(h=!h)
return h||Fi.prototype._containsPoint.call(this,t,!0)}}),zi=Ii.extend({initialize:function(t,e){d(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,i,n,r=_(t)?t:t.features
if(r){for(e=0,i=r.length;e<i;e++)((n=r[e]).geometries||n.geometry||n.features||n.coordinates)&&this.addData(n)
return this}var o=this.options
if(o.filter&&!o.filter(t))return this
var s=ji(t,o)
return s?(s.feature=Wi(t),s.defaultOptions=s.options,this.resetStyle(s),o.onEachFeature&&o.onEachFeature(t,s),this.addLayer(s)):this},resetStyle:function(t){return void 0===t?this.eachLayer(this.resetStyle,this):(t.options=e({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer((function(e){this._setLayerStyle(e,t)}),this)},_setLayerStyle:function(t,e){t.setStyle&&("function"==typeof e&&(e=e(t.feature)),t.setStyle(e))}})
function ji(t,e){var i,n,r,o,s="Feature"===t.type?t.geometry:t,a=s?s.coordinates:null,l=[],h=e&&e.pointToLayer,u=e&&e.coordsToLatLng||Bi
if(!a&&!s)return null
switch(s.type){case"Point":return Gi(h,t,i=u(a),e)
case"MultiPoint":for(r=0,o=a.length;r<o;r++)i=u(a[r]),l.push(Gi(h,t,i,e))
return new Ii(l)
case"LineString":case"MultiLineString":return n=Ui(a,"LineString"===s.type?0:1,u),new Fi(n,e)
case"Polygon":case"MultiPolygon":return n=Ui(a,"Polygon"===s.type?1:2,u),new ki(n,e)
case"GeometryCollection":for(r=0,o=s.geometries.length;r<o;r++){var c=ji({geometry:s.geometries[r],type:"Feature",properties:t.properties},e)
c&&l.push(c)}return new Ii(l)
case"FeatureCollection":for(r=0,o=s.features.length;r<o;r++){var d=ji(s.features[r],e)
d&&l.push(d)}return new Ii(l)
default:throw new Error("Invalid GeoJSON object.")}}function Gi(t,e,i,n){return t?t(e,i):new Li(i,n&&n.markersInheritOptions&&n)}function Bi(t){return new z(t[1],t[0],t[2])}function Ui(t,e,i){for(var n,r=[],o=0,s=t.length;o<s;o++)n=e?Ui(t[o],e-1,i):(i||Bi)(t[o]),r.push(n)
return r}function qi(t,e){return void 0!==(t=j(t)).alt?[h(t.lng,e),h(t.lat,e),h(t.alt,e)]:[h(t.lng,e),h(t.lat,e)]}function Vi(t,e,i,n){for(var r=[],o=0,s=t.length;o<s;o++)r.push(e?Vi(t[o],_i(t[o])?0:e-1,i,n):qi(t[o],n))
return!e&&i&&r.length>0&&r.push(r[0].slice()),r}function Zi(t,i){return t.feature?e({},t.feature,{geometry:i}):Wi(i)}function Wi(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}var Yi={toGeoJSON:function(t){return Zi(this,{type:"Point",coordinates:qi(this.getLatLng(),t)})}}
function Xi(t,e){return new zi(t,e)}Li.include(Yi),Ni.include(Yi),Di.include(Yi),Fi.include({toGeoJSON:function(t){var e=!_i(this._latlngs)
return Zi(this,{type:(e?"Multi":"")+"LineString",coordinates:Vi(this._latlngs,e?1:0,!1,t)})}}),ki.include({toGeoJSON:function(t){var e=!_i(this._latlngs),i=e&&!_i(this._latlngs[0]),n=Vi(this._latlngs,i?2:e?1:0,!0,t)
return e||(n=[n]),Zi(this,{type:(i?"Multi":"")+"Polygon",coordinates:n})}}),Ti.include({toMultiPoint:function(t){var e=[]
return this.eachLayer((function(i){e.push(i.toGeoJSON(t).geometry.coordinates)})),Zi(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type
if("MultiPoint"===e)return this.toMultiPoint(t)
var i="GeometryCollection"===e,n=[]
return this.eachLayer((function(e){if(e.toGeoJSON){var r=e.toGeoJSON(t)
if(i)n.push(r.geometry)
else{var o=Wi(r)
"FeatureCollection"===o.type?n.push.apply(n,o.features):n.push(o)}}})),i?Zi(this,{geometries:n,type:"GeometryCollection"}):{type:"FeatureCollection",features:n}}})
var Hi=Xi,$i=Pi.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,i){this._url=t,this._bounds=k(e),d(this,i)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ue(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){oe(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&ae(this._image),this},bringToBack:function(){return this._map&&le(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=k(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset}
return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:re("img")
ue(e,"leaflet-image-layer"),this._zoomAnimated&&ue(e,"leaflet-zoom-animated"),this.options.className&&ue(e,this.options.className),e.onselectstart=l,e.onmousemove=l,e.onload=n(this.fire,this,"load"),e.onerror=n(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(e.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t?this._url=e.src:(e.src=this._url,e.alt=this.options.alt)},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),i=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min
_e(this._image,i,e)},_reset:function(){var t=this._image,e=new D(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),i=e.getSize()
me(t,e.min),t.style.width=i.x+"px",t.style.height=i.y+"px"},_updateOpacity:function(){pe(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error")
var t=this.options.errorOverlayUrl
t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),Ki=$i.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:re("video")
if(ue(e,"leaflet-image-layer"),this._zoomAnimated&&ue(e,"leaflet-zoom-animated"),this.options.className&&ue(e,this.options.className),e.onselectstart=l,e.onmousemove=l,e.onloadeddata=n(this.fire,this,"load"),t){for(var i=e.getElementsByTagName("source"),r=[],o=0;o<i.length;o++)r.push(i[o].src)
this._url=i.length>0?r:[e.src]}else{_(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted,e.playsInline=!!this.options.playsInline
for(var s=0;s<this._url.length;s++){var a=re("source")
a.src=this._url[s],e.appendChild(a)}}}}),Ji=$i.extend({_initImage:function(){var t=this._image=this._url
ue(t,"leaflet-image-layer"),this._zoomAnimated&&ue(t,"leaflet-zoom-animated"),this.options.className&&ue(t,this.options.className),t.onselectstart=l,t.onmousemove=l}}),Qi=Pi.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,e){t&&(t instanceof z||_(t))?(this._latlng=j(t),d(this,e)):(d(this,t),this._source=e),this.options.content&&(this._content=this.options.content)},openOn:function(t){return(t=arguments.length?t:this._source._map).hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&pe(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&pe(this._container,1),this.bringToFront(),this.options.interactive&&(ue(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(pe(this._container,0),this._removeTimeout=setTimeout(n(oe,void 0,this._container),200)):oe(this._container),this.options.interactive&&(ce(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=j(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition}
return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ae(this._container),this},bringToBack:function(){return this._map&&le(this._container),this},_prepareOpen:function(t){var e=this._source
if(!e._map)return!1
if(e instanceof Ii){e=null
var i=this._source._layers
for(var n in i)if(i[n]._map){e=i[n]
break}if(!e)return!1
this._source=e}if(!t)if(e.getCenter)t=e.getCenter()
else if(e.getLatLng)t=e.getLatLng()
else{if(!e.getBounds)throw new Error("Unable to get source layer LatLng.")
t=e.getBounds().getCenter()}return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content
if("string"==typeof e)t.innerHTML=e
else{for(;t.hasChildNodes();)t.removeChild(t.firstChild)
t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=O(this.options.offset),i=this._getAnchor()
this._zoomAnimated?me(this._container,t.add(i)):e=e.add(t).add(i)
var n=this._containerBottom=-e.y,r=this._containerLeft=-Math.round(this._containerWidth/2)+e.x
this._container.style.bottom=n+"px",this._container.style.left=r+"px"}},_getAnchor:function(){return[0,0]}})
We.include({_initOverlay:function(t,e,i,n){var r=e
return r instanceof t||(r=new t(n).setContent(e)),i&&r.setLatLng(i),r}}),Pi.include({_initOverlay:function(t,e,i,n){var r=i
return r instanceof t?(d(r,n),r._source=this):(r=e&&!n?e:new t(n,this)).setContent(i),r}})
var tn=Qi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return!(t=arguments.length?t:this._source._map).hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,Qi.prototype.openOn.call(this,t)},onAdd:function(t){Qi.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Oi||this._source.on("preclick",De))},onRemove:function(t){Qi.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Oi||this._source.off("preclick",De))},getEvents:function(){var t=Qi.prototype.getEvents.call(this)
return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",e=this._container=re("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),i=this._wrapper=re("div",t+"-content-wrapper",e)
if(this._contentNode=re("div",t+"-content",i),Fe(e),Ne(this._contentNode),Te(e,"contextmenu",De),this._tipContainer=re("div",t+"-tip-container",e),this._tip=re("div",t+"-tip",this._tipContainer),this.options.closeButton){var n=this._closeButton=re("a",t+"-close-button",e)
n.setAttribute("role","button"),n.setAttribute("aria-label","Close popup"),n.href="#close",n.innerHTML='<span aria-hidden="true">&#215;</span>',Te(n,"click",(function(t){ke(t),this.close()}),this)}},_updateLayout:function(){var t=this._contentNode,e=t.style
e.width="",e.whiteSpace="nowrap"
var i=t.offsetWidth
i=Math.min(i,this.options.maxWidth),i=Math.max(i,this.options.minWidth),e.width=i+1+"px",e.whiteSpace="",e.height=""
var n=t.offsetHeight,r=this.options.maxHeight,o="leaflet-popup-scrolled"
r&&n>r?(e.height=r+"px",ue(t,o)):ce(t,o),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),i=this._getAnchor()
me(this._container,e.add(i))},_adjustPan:function(){if(this.options.autoPan)if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning)this._autopanning=!1
else{var t=this._map,e=parseInt(ne(this._container,"marginBottom"),10)||0,i=this._container.offsetHeight+e,n=this._containerWidth,r=new A(this._containerLeft,-i-this._containerBottom)
r._add(ye(this._container))
var o=t.layerPointToContainerPoint(r),s=O(this.options.autoPanPadding),a=O(this.options.autoPanPaddingTopLeft||s),l=O(this.options.autoPanPaddingBottomRight||s),h=t.getSize(),u=0,c=0
o.x+n+l.x>h.x&&(u=o.x+n-h.x+l.x),o.x-u-a.x<0&&(u=o.x-a.x),o.y+i+l.y>h.y&&(c=o.y+i-h.y+l.y),o.y-c-a.y<0&&(c=o.y-a.y),(u||c)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([u,c]))}},_getAnchor:function(){return O(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}})
We.mergeOptions({closePopupOnClick:!0}),We.include({openPopup:function(t,e,i){return this._initOverlay(tn,t,e,i).openOn(this),this},closePopup:function(t){return(t=arguments.length?t:this._popup)&&t.close(),this}}),Pi.include({bindPopup:function(t,e){return this._popup=this._initOverlay(tn,this._popup,t,e),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof Ii||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(this._popup&&this._map){ze(t)
var e=t.layer||t.target
this._popup._source!==e||e instanceof Oi?(this._popup._source=e,this.openPopup(t.latlng)):this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}})
var en=Qi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){Qi.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){Qi.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=Qi.prototype.getEvents.call(this)
return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide")
this._contentNode=this._container=re("div",t),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+o(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,i,n=this._map,r=this._container,o=n.latLngToContainerPoint(n.getCenter()),s=n.layerPointToContainerPoint(t),a=this.options.direction,l=r.offsetWidth,h=r.offsetHeight,u=O(this.options.offset),c=this._getAnchor()
"top"===a?(e=l/2,i=h):"bottom"===a?(e=l/2,i=0):"center"===a?(e=l/2,i=h/2):"right"===a?(e=0,i=h/2):"left"===a?(e=l,i=h/2):s.x<o.x?(a="right",e=0,i=h/2):(a="left",e=l+2*(u.x+c.x),i=h/2),t=t.subtract(O(e,i,!0)).add(u).add(c),ce(r,"leaflet-tooltip-right"),ce(r,"leaflet-tooltip-left"),ce(r,"leaflet-tooltip-top"),ce(r,"leaflet-tooltip-bottom"),ue(r,"leaflet-tooltip-"+a),me(r,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng)
this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&pe(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center)
this._setPosition(e)},_getAnchor:function(){return O(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}})
We.include({openTooltip:function(t,e,i){return this._initOverlay(en,t,e,i).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),Pi.include({bindTooltip:function(t,e){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(en,this._tooltip,t,e),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",i={remove:this.closeTooltip,move:this._moveTooltip}
this._tooltip.options.permanent?i.add=this._openTooltip:(i.mouseover=this._openTooltip,i.mouseout=this.closeTooltip,i.click=this._openTooltip,this._map?this._addFocusListeners():i.add=this._addFocusListeners),this._tooltip.options.sticky&&(i.mousemove=this._moveTooltip),this[e](i),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof Ii||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var e="function"==typeof t.getElement&&t.getElement()
e&&(Te(e,"focus",(function(){this._tooltip._source=t,this.openTooltip()}),this),Te(e,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var e="function"==typeof t.getElement&&t.getElement()
e&&e.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(this._tooltip&&this._map)if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0
var e=this
this._map.once("moveend",(function(){e._openOnceFlag=!1,e._openTooltip(t)}))}else this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e,i,n=t.latlng
this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),i=this._map.containerPointToLayerPoint(e),n=this._map.layerPointToLatLng(i)),this._tooltip.setLatLng(n)}})
var nn=Mi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),i=this.options
if(i.html instanceof Element?(se(e),e.appendChild(i.html)):e.innerHTML=!1!==i.html?i.html:"",i.bgPos){var n=O(i.bgPos)
e.style.backgroundPosition=-n.x+"px "+-n.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}})
Mi.Default=Ai
var rn=Pi.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Dt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){d(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),oe(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ae(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(le(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles()
var t=this._clampZoom(this._map.getZoom())
t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd}
return this.options.updateWhenIdle||(this._onMove||(this._onMove=s(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize
return t instanceof A?t:new A(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,i=this.getPane().children,n=-t(-1/0,1/0),r=0,o=i.length;r<o;r++)e=i[r].style.zIndex,i[r]!==this._container&&e&&(n=t(n,+e))
isFinite(n)&&(this.options.zIndex=n+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Dt.ielt9){pe(this._container,this.options.opacity)
var t=+new Date,e=!1,i=!1
for(var n in this._tiles){var r=this._tiles[n]
if(r.current&&r.loaded){var o=Math.min(1,(t-r.loaded)/200)
pe(r.el,o),o<1?e=!0:(r.active?i=!0:this._onOpaqueTile(r),r.active=!0)}}i&&!this._noPrune&&this._pruneTiles(),e&&(C(this._fadeFrame),this._fadeFrame=S(this._updateOpacity,this))}},_onOpaqueTile:l,_initContainer:function(){this._container||(this._container=re("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom
if(void 0!==t){for(var i in this._levels)i=Number(i),this._levels[i].el.children.length||i===t?(this._levels[i].el.style.zIndex=e-Math.abs(t-i),this._onUpdateLevel(i)):(oe(this._levels[i].el),this._removeTilesAtZoom(i),this._onRemoveLevel(i),delete this._levels[i])
var n=this._levels[t],r=this._map
return n||((n=this._levels[t]={}).el=re("div","leaflet-tile-container leaflet-zoom-animated",this._container),n.el.style.zIndex=e,n.origin=r.project(r.unproject(r.getPixelOrigin()),t).round(),n.zoom=t,this._setZoomTransform(n,r.getCenter(),r.getZoom()),n.el.offsetWidth,this._onCreateLevel(n)),this._level=n,n}},_onUpdateLevel:l,_onRemoveLevel:l,_onCreateLevel:l,_pruneTiles:function(){if(this._map){var t,e,i=this._map.getZoom()
if(i>this.options.maxZoom||i<this.options.minZoom)this._removeAllTiles()
else{for(t in this._tiles)(e=this._tiles[t]).retain=e.current
for(t in this._tiles)if((e=this._tiles[t]).current&&!e.active){var n=e.coords
this._retainParent(n.x,n.y,n.z,n.z-5)||this._retainChildren(n.x,n.y,n.z,n.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)oe(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t]
this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,i,n){var r=Math.floor(t/2),o=Math.floor(e/2),s=i-1,a=new A(+r,+o)
a.z=+s
var l=this._tileCoordsToKey(a),h=this._tiles[l]
return h&&h.active?(h.retain=!0,!0):(h&&h.loaded&&(h.retain=!0),s>n&&this._retainParent(r,o,s,n))},_retainChildren:function(t,e,i,n){for(var r=2*t;r<2*t+2;r++)for(var o=2*e;o<2*e+2;o++){var s=new A(r,o)
s.z=i+1
var a=this._tileCoordsToKey(s),l=this._tiles[a]
l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),i+1<n&&this._retainChildren(r,o,i+1,n))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo)
this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options
return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,i,n){var r=Math.round(e)
r=void 0!==this.options.maxZoom&&r>this.options.maxZoom||void 0!==this.options.minZoom&&r<this.options.minZoom?void 0:this._clampZoom(r)
var o=this.options.updateWhenZooming&&r!==this._tileZoom
n&&!o||(this._tileZoom=r,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==r&&this._update(t),i||this._pruneTiles(),this._noPrune=!!i),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var i in this._levels)this._setZoomTransform(this._levels[i],t,e)},_setZoomTransform:function(t,e,i){var n=this._map.getZoomScale(i,t.zoom),r=t.origin.multiplyBy(n).subtract(this._map._getNewPixelOrigin(e,i)).round()
Dt.any3d?_e(t.el,r,n):me(t.el,r)},_resetGrid:function(){var t=this._map,e=t.options.crs,i=this._tileSize=this.getTileSize(),n=this._tileZoom,r=this._map.getPixelWorldBounds(this._tileZoom)
r&&(this._globalTileRange=this._pxBoundsToTileRange(r)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],n).x/i.x),Math.ceil(t.project([0,e.wrapLng[1]],n).x/i.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],n).y/i.x),Math.ceil(t.project([e.wrapLat[1],0],n).y/i.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,i=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),n=e.getZoomScale(i,this._tileZoom),r=e.project(t,this._tileZoom).floor(),o=e.getSize().divideBy(2*n)
return new D(r.subtract(o),r.add(o))},_update:function(t){var e=this._map
if(e){var i=this._clampZoom(e.getZoom())
if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var n=this._getTiledPixelBounds(t),r=this._pxBoundsToTileRange(n),o=r.getCenter(),s=[],a=this.options.keepBuffer,l=new D(r.getBottomLeft().subtract([a,-a]),r.getTopRight().add([a,-a]))
if(!(isFinite(r.min.x)&&isFinite(r.min.y)&&isFinite(r.max.x)&&isFinite(r.max.y)))throw new Error("Attempted to load an infinite number of tiles")
for(var h in this._tiles){var u=this._tiles[h].coords
u.z===this._tileZoom&&l.contains(new A(u.x,u.y))||(this._tiles[h].current=!1)}if(Math.abs(i-this._tileZoom)>1)this._setView(t,i)
else{for(var c=r.min.y;c<=r.max.y;c++)for(var d=r.min.x;d<=r.max.x;d++){var f=new A(d,c)
if(f.z=this._tileZoom,this._isValidTile(f)){var p=this._tiles[this._tileCoordsToKey(f)]
p?p.current=!0:s.push(f)}}if(s.sort((function(t,e){return t.distanceTo(o)-e.distanceTo(o)})),0!==s.length){this._loading||(this._loading=!0,this.fire("loading"))
var g=document.createDocumentFragment()
for(d=0;d<s.length;d++)this._addTile(s[d],g)
this._level.el.appendChild(g)}}}}},_isValidTile:function(t){var e=this._map.options.crs
if(!e.infinite){var i=this._globalTileRange
if(!e.wrapLng&&(t.x<i.min.x||t.x>i.max.x)||!e.wrapLat&&(t.y<i.min.y||t.y>i.max.y))return!1}if(!this.options.bounds)return!0
var n=this._tileCoordsToBounds(t)
return k(this.options.bounds).overlaps(n)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,i=this.getTileSize(),n=t.scaleBy(i),r=n.add(i)
return[e.unproject(n,t.z),e.unproject(r,t.z)]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),i=new F(e[0],e[1])
return this.options.noWrap||(i=this._map.wrapLatLngBounds(i)),i},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),i=new A(+e[0],+e[1])
return i.z=+e[2],i},_removeTile:function(t){var e=this._tiles[t]
e&&(oe(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){ue(t,"leaflet-tile")
var e=this.getTileSize()
t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=l,t.onmousemove=l,Dt.ielt9&&this.options.opacity<1&&pe(t,this.options.opacity)},_addTile:function(t,e){var i=this._getTilePos(t),r=this._tileCoordsToKey(t),o=this.createTile(this._wrapCoords(t),n(this._tileReady,this,t))
this._initTile(o),this.createTile.length<2&&S(n(this._tileReady,this,t,null,o)),me(o,i),this._tiles[r]={el:o,coords:t,current:!0},e.appendChild(o),this.fire("tileloadstart",{tile:o,coords:t})},_tileReady:function(t,e,i){e&&this.fire("tileerror",{error:e,tile:i,coords:t})
var r=this._tileCoordsToKey(t);(i=this._tiles[r])&&(i.loaded=+new Date,this._map._fadeAnimated?(pe(i.el,0),C(this._fadeFrame),this._fadeFrame=S(this._updateOpacity,this)):(i.active=!0,this._pruneTiles()),e||(ue(i.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:i.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Dt.ielt9||!this._map._fadeAnimated?S(this._pruneTiles,this):setTimeout(n(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new A(this._wrapX?a(t.x,this._wrapX):t.x,this._wrapY?a(t.y,this._wrapY):t.y)
return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize()
return new D(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1
return!0}}),on=rn.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,e){this._url=t,(e=d(this,e)).detectRetina&&Dt.retina&&e.maxZoom>0?(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom=Math.min(e.maxZoom,e.minZoom+1)):(e.zoomOffset++,e.maxZoom=Math.max(e.minZoom,e.maxZoom-1)),e.minZoom=Math.max(0,e.minZoom)):e.zoomReverse?e.minZoom=Math.min(e.maxZoom,e.minZoom):e.maxZoom=Math.max(e.minZoom,e.maxZoom),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&void 0===e&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var i=document.createElement("img")
return Te(i,"load",n(this._tileOnLoad,this,e,i)),Te(i,"error",n(this._tileOnError,this,e,i)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(i.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),"string"==typeof this.options.referrerPolicy&&(i.referrerPolicy=this.options.referrerPolicy),i.alt="",i.src=this.getTileUrl(t),i},getTileUrl:function(t){var i={r:Dt.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()}
if(this._map&&!this._map.options.crs.infinite){var n=this._globalTileRange.max.y-t.y
this.options.tms&&(i.y=n),i["-y"]=n}return g(this._url,e(i,this.options))},_tileOnLoad:function(t,e){Dt.ielt9?setTimeout(n(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,i){var n=this.options.errorTileUrl
n&&e.getAttribute("src")!==n&&(e.src=n),t(i,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom
return this.options.zoomReverse&&(t=e-t),t+this.options.zoomOffset},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length
return this.options.subdomains[e]},_abortLoading:function(){var t,e
for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=l,e.onerror=l,!e.complete)){e.src=y
var i=this._tiles[t].coords
oe(e),delete this._tiles[t],this.fire("tileabort",{tile:e,coords:i})}},_removeTile:function(t){var e=this._tiles[t]
if(e)return e.el.setAttribute("src",y),rn.prototype._removeTile.call(this,t)},_tileReady:function(t,e,i){if(this._map&&(!i||i.getAttribute("src")!==y))return rn.prototype._tileReady.call(this,t,e,i)}})
function sn(t,e){return new on(t,e)}var an=on.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,i){this._url=t
var n=e({},this.defaultWmsParams)
for(var r in i)r in this.options||(n[r]=i[r])
var o=(i=d(this,i)).detectRetina&&Dt.retina?2:1,s=this.getTileSize()
n.width=s.x*o,n.height=s.y*o,this.wmsParams=n},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version)
var e=this._wmsVersion>=1.3?"crs":"srs"
this.wmsParams[e]=this._crs.code,on.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),i=this._crs,n=N(i.project(e[0]),i.project(e[1])),r=n.min,o=n.max,s=(this._wmsVersion>=1.3&&this._crs===Si?[r.y,r.x,o.y,o.x]:[r.x,r.y,o.x,o.y]).join(","),a=on.prototype.getTileUrl.call(this,t)
return a+f(this.wmsParams,a,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+s},setParams:function(t,i){return e(this.wmsParams,t),i||this.redraw(),this}})
on.WMS=an,sn.wms=function(t,e){return new an(t,e)}
var ln=Pi.extend({options:{padding:.1},initialize:function(t){d(this,t),o(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ue(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd}
return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var i=this._map.getZoomScale(e,this._zoom),n=this._map.getSize().multiplyBy(.5+this.options.padding),r=this._map.project(this._center,e),o=n.multiplyBy(-i).add(r).subtract(this._map._getNewPixelOrigin(t,e))
Dt.any3d?_e(this._container,o,i):me(this._container,o)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),i=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round()
this._bounds=new D(i,i.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),hn=ln.extend({options:{tolerance:0},getEvents:function(){var t=ln.prototype.getEvents.call(this)
return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ln.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas")
Te(t,"mousemove",this._onMouseMove,this),Te(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Te(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){C(this._redrawRequest),delete this._ctx,oe(this._container),Me(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update()
this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){ln.prototype._update.call(this)
var t=this._bounds,e=this._container,i=t.getSize(),n=Dt.retina?2:1
me(e,t.min),e.width=n*i.x,e.height=n*i.y,e.style.width=i.x+"px",e.style.height=i.y+"px",Dt.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){ln.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[o(t)]=t
var e=t._order={layer:t,prev:this._drawLast,next:null}
this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,i=e.next,n=e.prev
i?i.prev=n:this._drawLast=n,n?n.next=i:this._drawFirst=i,delete t._order,delete this._layers[o(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if("string"==typeof t.options.dashArray){var e,i,n=t.options.dashArray.split(/[, ]+/),r=[]
for(i=0;i<n.length;i++){if(e=Number(n[i]),isNaN(e))return
r.push(e)}t.options._dashArray=r}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||S(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1
this._redrawBounds=this._redrawBounds||new D,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds
if(t){var e=t.getSize()
this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,e=this._redrawBounds
if(this._ctx.save(),e){var i=e.getSize()
this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,i.x,i.y),this._ctx.clip()}this._drawing=!0
for(var n=this._drawFirst;n;n=n.next)t=n.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath()
this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var i,n,r,o,s=t._parts,a=s.length,l=this._ctx
if(a){for(l.beginPath(),i=0;i<a;i++){for(n=0,r=s[i].length;n<r;n++)o=s[i][n],l[n?"lineTo":"moveTo"](o.x,o.y)
e&&l.closePath()}this._fillStroke(l,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,i=this._ctx,n=Math.max(Math.round(t._radius),1),r=(Math.max(Math.round(t._radiusY),1)||n)/n
1!==r&&(i.save(),i.scale(1,r)),i.beginPath(),i.arc(e.x,e.y/r,n,0,2*Math.PI,!1),1!==r&&i.restore(),this._fillStroke(i,t)}},_fillStroke:function(t,e){var i=e.options
i.fill&&(t.globalAlpha=i.fillOpacity,t.fillStyle=i.fillColor||i.color,t.fill(i.fillRule||"evenodd")),i.stroke&&0!==i.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=i.opacity,t.lineWidth=i.weight,t.strokeStyle=i.color,t.lineCap=i.lineCap,t.lineJoin=i.lineJoin,t.stroke())},_onClick:function(t){for(var e,i,n=this._map.mouseEventToLayerPoint(t),r=this._drawFirst;r;r=r.next)(e=r.layer).options.interactive&&e._containsPoint(n)&&("click"!==t.type&&"preclick"!==t.type||!this._map._draggableMoved(e))&&(i=e)
this._fireEvent(!!i&&[i],t)},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t)
this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer
e&&(ce(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var i,r,o=this._drawFirst;o;o=o.next)(i=o.layer).options.interactive&&i._containsPoint(e)&&(r=i)
r!==this._hoveredLayer&&(this._handleMouseOut(t),r&&(ue(this._container,"leaflet-interactive"),this._fireEvent([r],t,"mouseover"),this._hoveredLayer=r)),this._fireEvent(!!this._hoveredLayer&&[this._hoveredLayer],t),this._mouseHoverThrottled=!0,setTimeout(n((function(){this._mouseHoverThrottled=!1}),this),32)}},_fireEvent:function(t,e,i){this._map._fireDOMEvent(e,i||e.type,t)},_bringToFront:function(t){var e=t._order
if(e){var i=e.next,n=e.prev
i&&(i.prev=n,n?n.next=i:i&&(this._drawFirst=i),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t))}},_bringToBack:function(t){var e=t._order
if(e){var i=e.next,n=e.prev
n&&(n.next=i,i?i.prev=n:n&&(this._drawLast=n),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}}})
function un(t){return Dt.canvas?new hn(t):null}var cn=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),dn={_initContainer:function(){this._container=re("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ln.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=cn("shape")
ue(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=cn("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[o(t)]=t},_addPath:function(t){var e=t._container
this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container
oe(e),t.removeInteractiveTarget(e),delete this._layers[o(t)]},_updateStyle:function(t){var e=t._stroke,i=t._fill,n=t.options,r=t._container
r.stroked=!!n.stroke,r.filled=!!n.fill,n.stroke?(e||(e=t._stroke=cn("stroke")),r.appendChild(e),e.weight=n.weight+"px",e.color=n.color,e.opacity=n.opacity,n.dashArray?e.dashStyle=_(n.dashArray)?n.dashArray.join(" "):n.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=n.lineCap.replace("butt","flat"),e.joinstyle=n.lineJoin):e&&(r.removeChild(e),t._stroke=null),n.fill?(i||(i=t._fill=cn("fill")),r.appendChild(i),i.color=n.fillColor||n.color,i.opacity=n.fillOpacity):i&&(r.removeChild(i),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),i=Math.round(t._radius),n=Math.round(t._radiusY||i)
this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+i+","+n+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){ae(t._container)},_bringToBack:function(t){le(t._container)}},fn=Dt.vml?cn:H,pn=ln.extend({_initContainer:function(){this._container=fn("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=fn("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){oe(this._container),Me(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!this._map._animatingZoom||!this._bounds){ln.prototype._update.call(this)
var t=this._bounds,e=t.getSize(),i=this._container
this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,i.setAttribute("width",e.x),i.setAttribute("height",e.y)),me(i,t.min),i.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=fn("path")
t.options.className&&ue(e,t.options.className),t.options.interactive&&ue(e,"leaflet-interactive"),this._updateStyle(t),this._layers[o(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){oe(t._path),t.removeInteractiveTarget(t._path),delete this._layers[o(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,i=t.options
e&&(i.stroke?(e.setAttribute("stroke",i.color),e.setAttribute("stroke-opacity",i.opacity),e.setAttribute("stroke-width",i.weight),e.setAttribute("stroke-linecap",i.lineCap),e.setAttribute("stroke-linejoin",i.lineJoin),i.dashArray?e.setAttribute("stroke-dasharray",i.dashArray):e.removeAttribute("stroke-dasharray"),i.dashOffset?e.setAttribute("stroke-dashoffset",i.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),i.fill?(e.setAttribute("fill",i.fillColor||i.color),e.setAttribute("fill-opacity",i.fillOpacity),e.setAttribute("fill-rule",i.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,$(t._parts,e))},_updateCircle:function(t){var e=t._point,i=Math.max(Math.round(t._radius),1),n="a"+i+","+(Math.max(Math.round(t._radiusY),1)||i)+" 0 1,0 ",r=t._empty()?"M0 0":"M"+(e.x-i)+","+e.y+n+2*i+",0 "+n+2*-i+",0 "
this._setPath(t,r)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){ae(t._path)},_bringToBack:function(t){le(t._path)}})
function gn(t){return Dt.svg||Dt.vml?new pn(t):null}Dt.vml&&pn.include(dn),We.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer
return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1
var e=this._paneRenderers[t]
return void 0===e&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&un(t)||gn(t)}})
var _n=ki.extend({initialize:function(t,e){ki.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=k(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}})
pn.create=fn,pn.pointsToPath=$,zi.geometryToLayer=ji,zi.coordsToLatLng=Bi,zi.coordsToLatLngs=Ui,zi.latLngToCoords=qi,zi.latLngsToCoords=Vi,zi.getFeature=Zi,zi.asFeature=Wi,We.mergeOptions({boxZoom:!0})
var mn=Qe.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){Te(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Me(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){oe(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1
this._clearDeferredResetState(),this._resetState(),Yt(),xe(),this._startPoint=this._map.mouseEventToContainerPoint(t),Te(document,{contextmenu:ze,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=re("div","leaflet-zoom-box",this._container),ue(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t)
var e=new D(this._point,this._startPoint),i=e.getSize()
me(this._box,e.min),this._box.style.width=i.x+"px",this._box.style.height=i.y+"px"},_finish:function(){this._moved&&(oe(this._box),ce(this._container,"leaflet-crosshair")),Xt(),be(),Me(document,{contextmenu:ze,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(n(this._resetState,this),0)
var e=new F(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point))
this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&(this._finish(),this._clearDeferredResetState(),this._resetState())}})
We.addInitHook("addHandler","boxZoom",mn),We.mergeOptions({doubleClickZoom:!0})
var yn=Qe.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,i=e.getZoom(),n=e.options.zoomDelta,r=t.originalEvent.shiftKey?i-n:i+n
"center"===e.options.doubleClickZoom?e.setZoom(r):e.setZoomAround(t.containerPoint,r)}})
We.addInitHook("addHandler","doubleClickZoom",yn),We.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0})
var vn=Qe.extend({addHooks:function(){if(!this._draggable){var t=this._map
this._draggable=new ii(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}ue(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ce(this._map._container,"leaflet-grab"),ce(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map
if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=k(this._map.options.maxBounds)
this._offsetLimit=N(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null
t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,i=this._lastPos=this._draggable._absPos||this._draggable._newPos
this._positions.push(i),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0])
this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit
t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),i=this._initialWorldOffset,n=this._draggable._newPos.x,r=(n-e+i)%t+e-i,o=(n+e+i)%t-e-i,s=Math.abs(r+i)<Math.abs(o+i)?r:o
this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=s},_onDragEnd:function(t){var e=this._map,i=e.options,n=!i.inertia||t.noInertia||this._times.length<2
if(e.fire("dragend",t),n)e.fire("moveend")
else{this._prunePositions(+new Date)
var r=this._lastPos.subtract(this._positions[0]),o=(this._lastTime-this._times[0])/1e3,s=i.easeLinearity,a=r.multiplyBy(s/o),l=a.distanceTo([0,0]),h=Math.min(i.inertiaMaxSpeed,l),u=a.multiplyBy(h/l),c=h/(i.inertiaDeceleration*s),d=u.multiplyBy(-c/2).round()
d.x||d.y?(d=e._limitOffset(d,e.options.maxBounds),S((function(){e.panBy(d,{duration:c,easeLinearity:s,noMoveStart:!0,animate:!0})}))):e.fire("moveend")}}})
We.addInitHook("addHandler","dragging",vn),We.mergeOptions({keyboard:!0,keyboardPanDelta:80})
var xn=Qe.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container
t.tabIndex<=0&&(t.tabIndex="0"),Te(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Me(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,i=t.scrollTop||e.scrollTop,n=t.scrollLeft||e.scrollLeft
this._map._container.focus(),window.scrollTo(n,i)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,i,n=this._panKeys={},r=this.keyCodes
for(e=0,i=r.left.length;e<i;e++)n[r.left[e]]=[-1*t,0]
for(e=0,i=r.right.length;e<i;e++)n[r.right[e]]=[t,0]
for(e=0,i=r.down.length;e<i;e++)n[r.down[e]]=[0,t]
for(e=0,i=r.up.length;e<i;e++)n[r.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,i,n=this._zoomKeys={},r=this.keyCodes
for(e=0,i=r.zoomIn.length;e<i;e++)n[r.zoomIn[e]]=t
for(e=0,i=r.zoomOut.length;e<i;e++)n[r.zoomOut[e]]=-t},_addHooks:function(){Te(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Me(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,i=t.keyCode,n=this._map
if(i in this._panKeys){if(!n._panAnim||!n._panAnim._inProgress)if(e=this._panKeys[i],t.shiftKey&&(e=O(e).multiplyBy(3)),n.options.maxBounds&&(e=n._limitOffset(O(e),n.options.maxBounds)),n.options.worldCopyJump){var r=n.wrapLatLng(n.unproject(n.project(n.getCenter()).add(e)))
n.panTo(r)}else n.panBy(e)}else if(i in this._zoomKeys)n.setZoom(n.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[i])
else{if(27!==i||!n._popup||!n._popup.options.closeOnEscapeKey)return
n.closePopup()}ze(t)}}})
We.addInitHook("addHandler","keyboard",xn),We.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60})
var bn=Qe.extend({addHooks:function(){Te(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Me(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=Ue(t),i=this._map.options.wheelDebounceTime
this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date)
var r=Math.max(i-(+new Date-this._startTime),0)
clearTimeout(this._timer),this._timer=setTimeout(n(this._performZoom,this),r),ze(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),i=this._map.options.zoomSnap||0
t._stop()
var n=this._delta/(4*this._map.options.wheelPxPerZoomLevel),r=4*Math.log(2/(1+Math.exp(-Math.abs(n))))/Math.LN2,o=i?Math.ceil(r/i)*i:r,s=t._limitZoom(e+(this._delta>0?o:-o))-e
this._delta=0,this._startTime=null,s&&("center"===t.options.scrollWheelZoom?t.setZoom(e+s):t.setZoomAround(this._lastMousePos,e+s))}})
We.addInitHook("addHandler","scrollWheelZoom",bn),We.mergeOptions({tapHold:Dt.touchNative&&Dt.safari&&Dt.mobile,tapTolerance:15})
var wn=Qe.extend({addHooks:function(){Te(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Me(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),1===t.touches.length){var e=t.touches[0]
this._startPos=this._newPos=new A(e.clientX,e.clientY),this._holdTimeout=setTimeout(n((function(){this._cancel(),this._isTapValid()&&(Te(document,"touchend",ke),Te(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",e))}),this),600),Te(document,"touchend touchcancel contextmenu",this._cancel,this),Te(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){Me(document,"touchend",ke),Me(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),Me(document,"touchend touchcancel contextmenu",this._cancel,this),Me(document,"touchmove",this._onMove,this)},_onMove:function(t){var e=t.touches[0]
this._newPos=new A(e.clientX,e.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,e){var i=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY})
i._simulated=!0,e.target.dispatchEvent(i)}})
We.addInitHook("addHandler","tapHold",wn),We.mergeOptions({touchZoom:Dt.touch,bounceAtZoomLimits:!0})
var En=Qe.extend({addHooks:function(){ue(this._map._container,"leaflet-touch-zoom"),Te(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ce(this._map._container,"leaflet-touch-zoom"),Me(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map
if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var i=e.mouseEventToContainerPoint(t.touches[0]),n=e.mouseEventToContainerPoint(t.touches[1])
this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(i.add(n)._divideBy(2))),this._startDist=i.distanceTo(n),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),Te(document,"touchmove",this._onTouchMove,this),Te(document,"touchend touchcancel",this._onTouchEnd,this),ke(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,i=e.mouseEventToContainerPoint(t.touches[0]),r=e.mouseEventToContainerPoint(t.touches[1]),o=i.distanceTo(r)/this._startDist
if(this._zoom=e.getScaleZoom(o,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&o<1||this._zoom>e.getMaxZoom()&&o>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===o)return}else{var s=i._add(r)._divideBy(2)._subtract(this._centerPoint)
if(1===o&&0===s.x&&0===s.y)return
this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(s),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),C(this._animRequest)
var a=n(e._move,e,this._center,this._zoom,{pinch:!0,round:!1},void 0)
this._animRequest=S(a,this,!0),ke(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,C(this._animRequest),Me(document,"touchmove",this._onTouchMove,this),Me(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}})
We.addInitHook("addHandler","touchZoom",En),We.BoxZoom=mn,We.DoubleClickZoom=yn,We.Drag=vn,We.Keyboard=xn,We.ScrollWheelZoom=bn,We.TapHold=wn,We.TouchZoom=En,t.Bounds=D,t.Browser=Dt,t.CRS=B,t.Canvas=hn,t.Circle=Ni,t.CircleMarker=Di,t.Class=T,t.Control=Ye,t.DivIcon=nn,t.DivOverlay=Qi,t.DomEvent=Ve,t.DomUtil=Pe,t.Draggable=ii,t.Evented=M,t.FeatureGroup=Ii,t.GeoJSON=zi,t.GridLayer=rn,t.Handler=Qe,t.Icon=Mi,t.ImageOverlay=$i,t.LatLng=z,t.LatLngBounds=F,t.Layer=Pi,t.LayerGroup=Ti,t.LineUtil=vi,t.Map=We,t.Marker=Li,t.Mixin=ti,t.Path=Oi,t.Point=A,t.PolyUtil=ai,t.Polygon=ki,t.Polyline=Fi,t.Popup=tn,t.PosAnimation=Ze,t.Projection=wi,t.Rectangle=_n,t.Renderer=ln,t.SVG=pn,t.SVGOverlay=Ji,t.TileLayer=on,t.Tooltip=en,t.Transformation=Z,t.Util=P,t.VideoOverlay=Ki,t.bind=n,t.bounds=N,t.canvas=un,t.circle=function(t,e,i){return new Ni(t,e,i)},t.circleMarker=function(t,e){return new Di(t,e)},t.control=Xe,t.divIcon=function(t){return new nn(t)},t.extend=e,t.featureGroup=function(t,e){return new Ii(t,e)},t.geoJSON=Xi,t.geoJson=Hi,t.gridLayer=function(t){return new rn(t)},t.icon=function(t){return new Mi(t)},t.imageOverlay=function(t,e,i){return new $i(t,e,i)},t.latLng=j,t.latLngBounds=k,t.layerGroup=function(t,e){return new Ti(t,e)},t.map=function(t,e){return new We(t,e)},t.marker=function(t,e){return new Li(t,e)},t.point=O,t.polygon=function(t,e){return new ki(t,e)},t.polyline=function(t,e){return new Fi(t,e)},t.popup=function(t,e){return new tn(t,e)},t.rectangle=function(t,e){return new _n(t,e)},t.setOptions=d,t.stamp=o,t.svg=gn,t.svgOverlay=function(t,e,i){return new Ji(t,e,i)},t.tileLayer=sn,t.tooltip=function(t,e){return new en(t,e)},t.transformation=W,t.version="1.9.4",t.videoOverlay=function(t,e,i){return new Ki(t,e,i)}
var Sn=window.L
t.noConflict=function(){return window.L=Sn,this},window.L=t}(e)},8017:t=>{"use strict"
var e=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable
t.exports=function(){try{if(!Object.assign)return!1
var t=new String("abc")
if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1
for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i
if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1
var n={}
return"abcdefghijklmnopqrst".split("").forEach((function(t){n[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}()?Object.assign:function(t,r){for(var o,s,a=function(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined")
return Object(t)}(t),l=1;l<arguments.length;l++){for(var h in o=Object(arguments[l]))i.call(o,h)&&(a[h]=o[h])
if(e){s=e(o)
for(var u=0;u<s.length;u++)n.call(o,s[u])&&(a[s[u]]=o[s[u]])}}return a}},5839:t=>{"use strict"
var e=function(t){return t!=t}
t.exports=function(t,i){return 0===t&&0===i?1/t==1/i:t===i||!(!e(t)||!e(i))}},473:(t,e,i)=>{"use strict"
var n=i(5967),r=i(4649),o=i(5839),s=i(4654),a=i(5996),l=r(s(),Object)
n(l,{getPolyfill:s,implementation:o,shim:a}),t.exports=l},4654:(t,e,i)=>{"use strict"
var n=i(5839)
t.exports=function(){return"function"==typeof Object.is?Object.is:n}},5996:(t,e,i)=>{"use strict"
var n=i(4654),r=i(5967)
t.exports=function(){var t=n()
return r(Object,{is:t},{is:function(){return Object.is!==t}}),t}},2914:(t,e,i)=>{"use strict"
var n
if(!Object.keys){var r=Object.prototype.hasOwnProperty,o=Object.prototype.toString,s=i(6710),a=Object.prototype.propertyIsEnumerable,l=!a.call({toString:null},"toString"),h=a.call((function(){}),"prototype"),u=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],c=function(t){var e=t.constructor
return e&&e.prototype===t},d={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},f=function(){if("undefined"==typeof window)return!1
for(var t in window)try{if(!d["$"+t]&&r.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{c(window[t])}catch(t){return!0}}catch(t){return!0}return!1}()
n=function(t){var e=null!==t&&"object"==typeof t,i="[object Function]"===o.call(t),n=s(t),a=e&&"[object String]"===o.call(t),d=[]
if(!e&&!i&&!n)throw new TypeError("Object.keys called on a non-object")
var p=h&&i
if(a&&t.length>0&&!r.call(t,0))for(var g=0;g<t.length;++g)d.push(String(g))
if(n&&t.length>0)for(var _=0;_<t.length;++_)d.push(String(_))
else for(var m in t)p&&"prototype"===m||!r.call(t,m)||d.push(String(m))
if(l)for(var y=function(t){if("undefined"==typeof window||!f)return c(t)
try{return c(t)}catch(t){return!1}}(t),v=0;v<u.length;++v)y&&"constructor"===u[v]||!r.call(t,u[v])||d.push(u[v])
return d}}t.exports=n},1802:(t,e,i)=>{"use strict"
var n=Array.prototype.slice,r=i(6710),o=Object.keys,s=o?function(t){return o(t)}:i(2914),a=Object.keys
s.shim=function(){if(Object.keys){var t=function(){var t=Object.keys(arguments)
return t&&t.length===arguments.length}(1,2)
t||(Object.keys=function(t){return r(t)?a(n.call(t)):a(t)})}else Object.keys=s
return Object.keys||s},t.exports=s},6710:t=>{"use strict"
var e=Object.prototype.toString
t.exports=function(t){var i=e.call(t),n="[object Arguments]"===i
return n||(n="[object Array]"!==i&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===e.call(t.callee)),n}},5399:(t,e,i)=>{"use strict"
t.exports=r
var n=i(437)
function r(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}r.Varint=0,r.Fixed64=1,r.Bytes=2,r.Fixed32=5
var o=4294967296,s=1/o,a="undefined"==typeof TextDecoder?null:new TextDecoder("utf8")
function l(t){return t.type===r.Bytes?t.readVarint()+t.pos:t.pos+1}function h(t,e,i){return i?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function u(t,e,i){var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2))
i.realloc(n)
for(var r=i.pos-1;r>=t;r--)i.buf[r+n]=i.buf[r]}function c(t,e){for(var i=0;i<t.length;i++)e.writeVarint(t[i])}function d(t,e){for(var i=0;i<t.length;i++)e.writeSVarint(t[i])}function f(t,e){for(var i=0;i<t.length;i++)e.writeFloat(t[i])}function p(t,e){for(var i=0;i<t.length;i++)e.writeDouble(t[i])}function g(t,e){for(var i=0;i<t.length;i++)e.writeBoolean(t[i])}function _(t,e){for(var i=0;i<t.length;i++)e.writeFixed32(t[i])}function m(t,e){for(var i=0;i<t.length;i++)e.writeSFixed32(t[i])}function y(t,e){for(var i=0;i<t.length;i++)e.writeFixed64(t[i])}function v(t,e){for(var i=0;i<t.length;i++)e.writeSFixed64(t[i])}function x(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function b(t,e,i){t[i]=e,t[i+1]=e>>>8,t[i+2]=e>>>16,t[i+3]=e>>>24}function w(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}r.prototype={destroy:function(){this.buf=null},readFields:function(t,e,i){for(i=i||this.length;this.pos<i;){var n=this.readVarint(),r=n>>3,o=this.pos
this.type=7&n,t(r,e,this),this.pos===o&&this.skip(n)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=x(this.buf,this.pos)
return this.pos+=4,t},readSFixed32:function(){var t=w(this.buf,this.pos)
return this.pos+=4,t},readFixed64:function(){var t=x(this.buf,this.pos)+x(this.buf,this.pos+4)*o
return this.pos+=8,t},readSFixed64:function(){var t=x(this.buf,this.pos)+w(this.buf,this.pos+4)*o
return this.pos+=8,t},readFloat:function(){var t=n.read(this.buf,this.pos,!0,23,4)
return this.pos+=4,t},readDouble:function(){var t=n.read(this.buf,this.pos,!0,52,8)
return this.pos+=8,t},readVarint:function(t){var e,i,n=this.buf
return e=127&(i=n[this.pos++]),i<128?e:(e|=(127&(i=n[this.pos++]))<<7,i<128?e:(e|=(127&(i=n[this.pos++]))<<14,i<128?e:(e|=(127&(i=n[this.pos++]))<<21,i<128?e:function(t,e,i){var n,r,o=i.buf
if(n=(112&(r=o[i.pos++]))>>4,r<128)return h(t,n,e)
if(n|=(127&(r=o[i.pos++]))<<3,r<128)return h(t,n,e)
if(n|=(127&(r=o[i.pos++]))<<10,r<128)return h(t,n,e)
if(n|=(127&(r=o[i.pos++]))<<17,r<128)return h(t,n,e)
if(n|=(127&(r=o[i.pos++]))<<24,r<128)return h(t,n,e)
if(n|=(1&(r=o[i.pos++]))<<31,r<128)return h(t,n,e)
throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(i=n[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint()
return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos
return this.pos=t,t-e>=12&&a?function(t,e,i){return a.decode(t.subarray(e,i))}(this.buf,e,t):function(t,e,i){for(var n="",r=e;r<i;){var o,s,a,l=t[r],h=null,u=l>239?4:l>223?3:l>191?2:1
if(r+u>i)break
1===u?l<128&&(h=l):2===u?128==(192&(o=t[r+1]))&&(h=(31&l)<<6|63&o)<=127&&(h=null):3===u?(o=t[r+1],s=t[r+2],128==(192&o)&&128==(192&s)&&((h=(15&l)<<12|(63&o)<<6|63&s)<=2047||h>=55296&&h<=57343)&&(h=null)):4===u&&(o=t[r+1],s=t[r+2],a=t[r+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&((h=(15&l)<<18|(63&o)<<12|(63&s)<<6|63&a)<=65535||h>=1114112)&&(h=null)),null===h?(h=65533,u=1):h>65535&&(h-=65536,n+=String.fromCharCode(h>>>10&1023|55296),h=56320|1023&h),n+=String.fromCharCode(h),r+=u}return n}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t)
return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==r.Bytes)return t.push(this.readVarint(e))
var i=l(this)
for(t=t||[];this.pos<i;)t.push(this.readVarint(e))
return t},readPackedSVarint:function(t){if(this.type!==r.Bytes)return t.push(this.readSVarint())
var e=l(this)
for(t=t||[];this.pos<e;)t.push(this.readSVarint())
return t},readPackedBoolean:function(t){if(this.type!==r.Bytes)return t.push(this.readBoolean())
var e=l(this)
for(t=t||[];this.pos<e;)t.push(this.readBoolean())
return t},readPackedFloat:function(t){if(this.type!==r.Bytes)return t.push(this.readFloat())
var e=l(this)
for(t=t||[];this.pos<e;)t.push(this.readFloat())
return t},readPackedDouble:function(t){if(this.type!==r.Bytes)return t.push(this.readDouble())
var e=l(this)
for(t=t||[];this.pos<e;)t.push(this.readDouble())
return t},readPackedFixed32:function(t){if(this.type!==r.Bytes)return t.push(this.readFixed32())
var e=l(this)
for(t=t||[];this.pos<e;)t.push(this.readFixed32())
return t},readPackedSFixed32:function(t){if(this.type!==r.Bytes)return t.push(this.readSFixed32())
var e=l(this)
for(t=t||[];this.pos<e;)t.push(this.readSFixed32())
return t},readPackedFixed64:function(t){if(this.type!==r.Bytes)return t.push(this.readFixed64())
var e=l(this)
for(t=t||[];this.pos<e;)t.push(this.readFixed64())
return t},readPackedSFixed64:function(t){if(this.type!==r.Bytes)return t.push(this.readSFixed64())
var e=l(this)
for(t=t||[];this.pos<e;)t.push(this.readSFixed64())
return t},skip:function(t){var e=7&t
if(e===r.Varint)for(;this.buf[this.pos++]>127;);else if(e===r.Bytes)this.pos=this.readVarint()+this.pos
else if(e===r.Fixed32)this.pos+=4
else{if(e!==r.Fixed64)throw new Error("Unimplemented type: "+e)
this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2
if(e!==this.length){var i=new Uint8Array(e)
i.set(this.buf),this.buf=i,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),b(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),b(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),b(this.buf,-1&t,this.pos),b(this.buf,Math.floor(t*s),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),b(this.buf,-1&t,this.pos),b(this.buf,Math.floor(t*s),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var i,n
if(t>=0?(i=t%4294967296|0,n=t/4294967296|0):(n=~(-t/4294967296),4294967295^(i=~(-t%4294967296))?i=i+1|0:(i=0,n=n+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes")
e.realloc(10),function(t,e,i){i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos]=127&t}(i,0,e),function(t,e){var i=(7&t)<<4
e.buf[e.pos++]|=i|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(n,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++
var e=this.pos
this.pos=function(t,e,i){for(var n,r,o=0;o<e.length;o++){if((n=e.charCodeAt(o))>55295&&n<57344){if(!r){n>56319||o+1===e.length?(t[i++]=239,t[i++]=191,t[i++]=189):r=n
continue}if(n<56320){t[i++]=239,t[i++]=191,t[i++]=189,r=n
continue}n=r-55296<<10|n-56320|65536,r=null}else r&&(t[i++]=239,t[i++]=191,t[i++]=189,r=null)
n<128?t[i++]=n:(n<2048?t[i++]=n>>6|192:(n<65536?t[i++]=n>>12|224:(t[i++]=n>>18|240,t[i++]=n>>12&63|128),t[i++]=n>>6&63|128),t[i++]=63&n|128)}return i}(this.buf,t,this.pos)
var i=this.pos-e
i>=128&&u(e,i,this),this.pos=e-1,this.writeVarint(i),this.pos+=i},writeFloat:function(t){this.realloc(4),n.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),n.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length
this.writeVarint(e),this.realloc(e)
for(var i=0;i<e;i++)this.buf[this.pos++]=t[i]},writeRawMessage:function(t,e){this.pos++
var i=this.pos
t(e,this)
var n=this.pos-i
n>=128&&u(i,n,this),this.pos=i-1,this.writeVarint(n),this.pos+=n},writeMessage:function(t,e,i){this.writeTag(t,r.Bytes),this.writeRawMessage(e,i)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,c,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,d,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,g,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,f,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,p,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,_,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,m,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,y,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,v,e)},writeBytesField:function(t,e){this.writeTag(t,r.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,r.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,r.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,r.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,r.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,r.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,r.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,r.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,r.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,r.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}},9748:t=>{t.exports=function(t,e,i,n){var r=t[0],o=t[1],s=!1
void 0===i&&(i=0),void 0===n&&(n=e.length)
for(var a=(n-i)/2,l=0,h=a-1;l<a;h=l++){var u=e[i+2*l+0],c=e[i+2*l+1],d=e[i+2*h+0],f=e[i+2*h+1]
c>o!=f>o&&r<(d-u)*(o-c)/(f-c)+u&&(s=!s)}return s}},7267:(t,e,i)=>{var n=i(9748),r=i(6728)
t.exports=function(t,e,i,o){return e.length>0&&Array.isArray(e[0])?r(t,e,i,o):n(t,e,i,o)},t.exports.nested=r,t.exports.flat=n},6728:t=>{t.exports=function(t,e,i,n){var r=t[0],o=t[1],s=!1
void 0===i&&(i=0),void 0===n&&(n=e.length)
for(var a=n-i,l=0,h=a-1;l<a;h=l++){var u=e[l+i][0],c=e[l+i][1],d=e[h+i][0],f=e[h+i][1]
c>o!=f>o&&r<(d-u)*(o-c)/(f-c)+u&&(s=!s)}return s}},6638:function(t){t.exports=function(){"use strict"
var t=function(t,e){this.next=null,this.key=t,this.data=e,this.left=null,this.right=null}
function e(t,e){return t>e?1:t<e?-1:0}function i(e,i,n){for(var r=new t(null,null),o=r,s=r;;){var a=n(e,i.key)
if(a<0){if(null===i.left)break
if(n(e,i.left.key)<0){var l=i.left
if(i.left=l.right,l.right=i,null===(i=l).left)break}s.left=i,s=i,i=i.left}else{if(!(a>0))break
if(null===i.right)break
if(n(e,i.right.key)>0&&(l=i.right,i.right=l.left,l.left=i,null===(i=l).right))break
o.right=i,o=i,i=i.right}}return o.right=i.left,s.left=i.right,i.left=r.right,i.right=r.left,i}function n(e,n,r,o){var s=new t(e,n)
if(null===r)return s.left=s.right=null,s
var a=o(e,(r=i(e,r,o)).key)
return a<0?(s.left=r.left,s.right=r,r.left=null):a>=0&&(s.right=r.right,s.left=r,r.right=null),s}function r(t,e,n){var r=null,o=null
if(e){var s=n((e=i(t,e,n)).key,t)
0===s?(r=e.left,o=e.right):s<0?(o=e.right,e.right=null,r=e):(r=e.left,e.left=null,o=e)}return{left:r,right:o}}function o(t,e,i,n,r){if(t){n(e+(i?" ":" ")+r(t)+"\n")
var s=e+(i?"    ":"   ")
t.left&&o(t.left,s,!1,n,r),t.right&&o(t.right,s,!0,n,r)}}var s=function(){function s(t){void 0===t&&(t=e),this._root=null,this._size=0,this._comparator=t}return s.prototype.insert=function(t,e){return this._size++,this._root=n(t,e,this._root,this._comparator)},s.prototype.add=function(e,n){var r=new t(e,n)
null===this._root&&(r.left=r.right=null,this._size++,this._root=r)
var o=this._comparator,s=i(e,this._root,o),a=o(e,s.key)
return 0===a?this._root=s:(a<0?(r.left=s.left,r.right=s,s.left=null):a>0&&(r.right=s.right,r.left=s,s.right=null),this._size++,this._root=r),this._root},s.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},s.prototype._remove=function(t,e,n){var r
return null===e?null:0===n(t,(e=i(t,e,n)).key)?(null===e.left?r=e.right:(r=i(t,e.left,n)).right=e.right,this._size--,r):e},s.prototype.pop=function(){var t=this._root
if(t){for(;t.left;)t=t.left
return this._root=i(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},s.prototype.findStatic=function(t){for(var e=this._root,i=this._comparator;e;){var n=i(t,e.key)
if(0===n)return e
e=n<0?e.left:e.right}return null},s.prototype.find=function(t){return this._root&&(this._root=i(t,this._root,this._comparator),0!==this._comparator(t,this._root.key))?null:this._root},s.prototype.contains=function(t){for(var e=this._root,i=this._comparator;e;){var n=i(t,e.key)
if(0===n)return!0
e=n<0?e.left:e.right}return!1},s.prototype.forEach=function(t,e){for(var i=this._root,n=[],r=!1;!r;)null!==i?(n.push(i),i=i.left):0!==n.length?(i=n.pop(),t.call(e,i),i=i.right):r=!0
return this},s.prototype.range=function(t,e,i,n){for(var r=[],o=this._comparator,s=this._root;0!==r.length||s;)if(s)r.push(s),s=s.left
else{if(o((s=r.pop()).key,e)>0)break
if(o(s.key,t)>=0&&i.call(n,s))return this
s=s.right}return this},s.prototype.keys=function(){var t=[]
return this.forEach((function(e){var i=e.key
return t.push(i)})),t},s.prototype.values=function(){var t=[]
return this.forEach((function(e){var i=e.data
return t.push(i)})),t},s.prototype.min=function(){return this._root?this.minNode(this._root).key:null},s.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},s.prototype.minNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.left;)t=t.left
return t},s.prototype.maxNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.right;)t=t.right
return t},s.prototype.at=function(t){for(var e=this._root,i=!1,n=0,r=[];!i;)if(e)r.push(e),e=e.left
else if(r.length>0){if(e=r.pop(),n===t)return e
n++,e=e.right}else i=!0
return null},s.prototype.next=function(t){var e=this._root,i=null
if(t.right){for(i=t.right;i.left;)i=i.left
return i}for(var n=this._comparator;e;){var r=n(t.key,e.key)
if(0===r)break
r<0?(i=e,e=e.left):e=e.right}return i},s.prototype.prev=function(t){var e=this._root,i=null
if(null!==t.left){for(i=t.left;i.right;)i=i.right
return i}for(var n=this._comparator;e;){var r=n(t.key,e.key)
if(0===r)break
r<0?e=e.left:(i=e,e=e.right)}return i},s.prototype.clear=function(){return this._root=null,this._size=0,this},s.prototype.toList=function(){return function(e){for(var i=e,n=[],r=!1,o=new t(null,null),s=o;!r;)i?(n.push(i),i=i.left):n.length>0?i=(i=s=s.next=n.pop()).right:r=!0
return s.next=null,o.next}(this._root)},s.prototype.load=function(e,i,n){void 0===i&&(i=[]),void 0===n&&(n=!1)
var r=e.length,o=this._comparator
if(n&&h(e,i,0,r-1,o),null===this._root)this._root=a(e,i,0,r),this._size=r
else{var s=function(e,i,n){for(var r=new t(null,null),o=r,s=e,a=i;null!==s&&null!==a;)n(s.key,a.key)<0?(o.next=s,s=s.next):(o.next=a,a=a.next),o=o.next
return null!==s?o.next=s:null!==a&&(o.next=a),r.next}(this.toList(),function(e,i){for(var n=new t(null,null),r=n,o=0;o<e.length;o++)r=r.next=new t(e[o],i[o])
return r.next=null,n.next}(e,i),o)
r=this._size+r,this._root=l({head:s},0,r)}return this},s.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(s.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),s.prototype.toString=function(t){void 0===t&&(t=function(t){return String(t.key)})
var e=[]
return o(this._root,"",!0,(function(t){return e.push(t)}),t),e.join("")},s.prototype.update=function(t,e,o){var s=this._comparator,a=r(t,this._root,s),l=a.left,h=a.right
s(t,e)<0?h=n(e,o,h,s):l=n(e,o,l,s),this._root=function(t,e,n){return null===e?t:(null===t||((e=i(t.key,e,n)).left=t),e)}(l,h,s)},s.prototype.split=function(t){return r(t,this._root,this._comparator)},s.prototype[Symbol.iterator]=function(){var t,e,i
return function(t,e){var i,n,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1]
return r[1]},trys:[],ops:[]}
return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o
function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.")
for(;s;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r
switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o
break
case 4:return s.label++,{value:o[1],done:!1}
case 5:s.label++,n=o[1],o=[0]
continue
case 7:o=s.ops.pop(),s.trys.pop()
continue
default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0
continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1]
break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o
break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o)
break}r[2]&&s.ops.pop(),s.trys.pop()
continue}o=e.call(t,s)}catch(t){o=[6,t],n=0}finally{i=r=0}if(5&o[0])throw o[1]
return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(n){switch(n.label){case 0:t=this._root,e=[],i=!1,n.label=1
case 1:return i?[3,6]:null===t?[3,2]:(e.push(t),t=t.left,[3,5])
case 2:return 0===e.length?[3,4]:[4,t=e.pop()]
case 3:return n.sent(),t=t.right,[3,5]
case 4:i=!0,n.label=5
case 5:return[3,1]
case 6:return[2]}}))},s}()
function a(e,i,n,r){var o=r-n
if(o>0){var s=n+Math.floor(o/2),l=e[s],h=i[s],u=new t(l,h)
return u.left=a(e,i,n,s),u.right=a(e,i,s+1,r),u}return null}function l(t,e,i){var n=i-e
if(n>0){var r=e+Math.floor(n/2),o=l(t,e,r),s=t.head
return s.left=o,t.head=t.head.next,s.right=l(t,r+1,i),s}return null}function h(t,e,i,n,r){if(!(i>=n)){for(var o=t[i+n>>1],s=i-1,a=n+1;;){do{s++}while(r(t[s],o)<0)
do{a--}while(r(t[a],o)>0)
if(s>=a)break
var l=t[s]
t[s]=t[a],t[a]=l,l=e[s],e[s]=e[a],e[a]=l}h(t,e,i,a,r),h(t,e,a+1,n,r)}}const u=(t,e)=>t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y,c=(t,e)=>{if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null
const i=t.ll.x<e.ll.x?e.ll.x:t.ll.x,n=t.ur.x<e.ur.x?t.ur.x:e.ur.x
return{ll:{x:i,y:t.ll.y<e.ll.y?e.ll.y:t.ll.y},ur:{x:n,y:t.ur.y<e.ur.y?t.ur.y:e.ur.y}}}
let d=Number.EPSILON
void 0===d&&(d=Math.pow(2,-52))
const f=d*d,p=(t,e)=>{if(-d<t&&t<d&&-d<e&&e<d)return 0
const i=t-e
return i*i<f*t*e?0:t<e?-1:1}
class g{constructor(){this.tree=new s,this.round(0)}round(t){const e=this.tree.add(t),i=this.tree.prev(e)
if(null!==i&&0===p(e.key,i.key))return this.tree.remove(t),i.key
const n=this.tree.next(e)
return null!==n&&0===p(e.key,n.key)?(this.tree.remove(t),n.key):t}}const _=new class{constructor(){this.reset()}reset(){this.xRounder=new g,this.yRounder=new g}round(t,e){return{x:this.xRounder.round(t),y:this.yRounder.round(e)}}},m=11102230246251565e-32,y=134217729,v=(3+8*m)*m
function x(t,e,i,n,r){let o,s,a,l,h=e[0],u=n[0],c=0,d=0
u>h==u>-h?(o=h,h=e[++c]):(o=u,u=n[++d])
let f=0
if(c<t&&d<i)for(u>h==u>-h?(s=h+o,a=o-(s-h),h=e[++c]):(s=u+o,a=o-(s-u),u=n[++d]),o=s,0!==a&&(r[f++]=a);c<t&&d<i;)u>h==u>-h?(s=o+h,l=s-o,a=o-(s-l)+(h-l),h=e[++c]):(s=o+u,l=s-o,a=o-(s-l)+(u-l),u=n[++d]),o=s,0!==a&&(r[f++]=a)
for(;c<t;)s=o+h,l=s-o,a=o-(s-l)+(h-l),h=e[++c],o=s,0!==a&&(r[f++]=a)
for(;d<i;)s=o+u,l=s-o,a=o-(s-l)+(u-l),u=n[++d],o=s,0!==a&&(r[f++]=a)
return 0===o&&0!==f||(r[f++]=o),f}function b(t){return new Float64Array(t)}const w=b(4),E=b(8),S=b(12),C=b(16),P=b(4)
const T=(t,e)=>t.x*e.y-t.y*e.x,I=(t,e)=>t.x*e.x+t.y*e.y,M=(t,e,i)=>{const n=function(t,e,i,n,r,o){const s=(e-o)*(i-r),a=(t-r)*(n-o),l=s-a,h=Math.abs(s+a)
return Math.abs(l)>=33306690738754716e-32*h?l:-function(t,e,i,n,r,o,s){let a,l,h,u,c,d,f,p,g,_,m,b,T,I,M,A,R,L
const O=t-r,D=i-r,N=e-o,F=n-o
I=O*F,d=y*O,f=d-(d-O),p=O-f,d=y*F,g=d-(d-F),_=F-g,M=p*_-(I-f*g-p*g-f*_),A=N*D,d=y*N,f=d-(d-N),p=N-f,d=y*D,g=d-(d-D),_=D-g,R=p*_-(A-f*g-p*g-f*_),m=M-R,c=M-m,w[0]=M-(m+c)+(c-R),b=I+m,c=b-I,T=I-(b-c)+(m-c),m=T-A,c=T-m,w[1]=T-(m+c)+(c-A),L=b+m,c=L-b,w[2]=b-(L-c)+(m-c),w[3]=L
let k=function(t,e){let i=e[0]
for(let n=1;n<4;n++)i+=e[n]
return i}(0,w),z=22204460492503146e-32*s
if(k>=z||-k>=z)return k
if(c=t-O,a=t-(O+c)+(c-r),c=i-D,h=i-(D+c)+(c-r),c=e-N,l=e-(N+c)+(c-o),c=n-F,u=n-(F+c)+(c-o),0===a&&0===l&&0===h&&0===u)return k
if(z=11093356479670487e-47*s+v*Math.abs(k),k+=O*u+F*a-(N*h+D*l),k>=z||-k>=z)return k
I=a*F,d=y*a,f=d-(d-a),p=a-f,d=y*F,g=d-(d-F),_=F-g,M=p*_-(I-f*g-p*g-f*_),A=l*D,d=y*l,f=d-(d-l),p=l-f,d=y*D,g=d-(d-D),_=D-g,R=p*_-(A-f*g-p*g-f*_),m=M-R,c=M-m,P[0]=M-(m+c)+(c-R),b=I+m,c=b-I,T=I-(b-c)+(m-c),m=T-A,c=T-m,P[1]=T-(m+c)+(c-A),L=b+m,c=L-b,P[2]=b-(L-c)+(m-c),P[3]=L
const j=x(4,w,4,P,E)
I=O*u,d=y*O,f=d-(d-O),p=O-f,d=y*u,g=d-(d-u),_=u-g,M=p*_-(I-f*g-p*g-f*_),A=N*h,d=y*N,f=d-(d-N),p=N-f,d=y*h,g=d-(d-h),_=h-g,R=p*_-(A-f*g-p*g-f*_),m=M-R,c=M-m,P[0]=M-(m+c)+(c-R),b=I+m,c=b-I,T=I-(b-c)+(m-c),m=T-A,c=T-m,P[1]=T-(m+c)+(c-A),L=b+m,c=L-b,P[2]=b-(L-c)+(m-c),P[3]=L
const G=x(j,E,4,P,S)
I=a*u,d=y*a,f=d-(d-a),p=a-f,d=y*u,g=d-(d-u),_=u-g,M=p*_-(I-f*g-p*g-f*_),A=l*h,d=y*l,f=d-(d-l),p=l-f,d=y*h,g=d-(d-h),_=h-g,R=p*_-(A-f*g-p*g-f*_),m=M-R,c=M-m,P[0]=M-(m+c)+(c-R),b=I+m,c=b-I,T=I-(b-c)+(m-c),m=T-A,c=T-m,P[1]=T-(m+c)+(c-A),L=b+m,c=L-b,P[2]=b-(L-c)+(m-c),P[3]=L
const B=x(G,S,4,P,C)
return C[B-1]}(t,e,i,n,r,o,h)}(t.x,t.y,e.x,e.y,i.x,i.y)
return n>0?-1:n<0?1:0},A=t=>Math.sqrt(I(t,t)),R=(t,e,i)=>{const n={x:e.x-t.x,y:e.y-t.y},r={x:i.x-t.x,y:i.y-t.y}
return T(r,n)/A(r)/A(n)},L=(t,e,i)=>{const n={x:e.x-t.x,y:e.y-t.y},r={x:i.x-t.x,y:i.y-t.y}
return I(r,n)/A(r)/A(n)},O=(t,e,i)=>0===e.y?null:{x:t.x+e.x/e.y*(i-t.y),y:i},D=(t,e,i)=>0===e.x?null:{x:i,y:t.y+e.y/e.x*(i-t.x)}
class N{static compare(t,e){const i=N.comparePoints(t.point,e.point)
return 0!==i?i:(t.point!==e.point&&t.link(e),t.isLeft!==e.isLeft?t.isLeft?1:-1:k.compare(t.segment,e.segment))}static comparePoints(t,e){return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y>e.y?1:0}constructor(t,e){void 0===t.events?t.events=[this]:t.events.push(this),this.point=t,this.isLeft=e}link(t){if(t.point===this.point)throw new Error("Tried to link already linked events")
const e=t.point.events
for(let i=0,n=e.length;i<n;i++){const t=e[i]
this.point.events.push(t),t.point=this.point}this.checkForConsuming()}checkForConsuming(){const t=this.point.events.length
for(let e=0;e<t;e++){const i=this.point.events[e]
if(void 0===i.segment.consumedBy)for(let n=e+1;n<t;n++){const t=this.point.events[n]
void 0===t.consumedBy&&i.otherSE.point.events===t.otherSE.point.events&&i.segment.consume(t.segment)}}}getAvailableLinkedEvents(){const t=[]
for(let e=0,i=this.point.events.length;e<i;e++){const i=this.point.events[e]
i!==this&&!i.segment.ringOut&&i.segment.isInResult()&&t.push(i)}return t}getLeftmostComparator(t){const e=new Map,i=i=>{const n=i.otherSE
e.set(i,{sine:R(this.point,t.point,n.point),cosine:L(this.point,t.point,n.point)})}
return(t,n)=>{e.has(t)||i(t),e.has(n)||i(n)
const{sine:r,cosine:o}=e.get(t),{sine:s,cosine:a}=e.get(n)
return r>=0&&s>=0?o<a?1:o>a?-1:0:r<0&&s<0?o<a?-1:o>a?1:0:s<r?-1:s>r?1:0}}}let F=0
class k{static compare(t,e){const i=t.leftSE.point.x,n=e.leftSE.point.x,r=t.rightSE.point.x,o=e.rightSE.point.x
if(o<i)return 1
if(r<n)return-1
const s=t.leftSE.point.y,a=e.leftSE.point.y,l=t.rightSE.point.y,h=e.rightSE.point.y
if(i<n){if(a<s&&a<l)return 1
if(a>s&&a>l)return-1
const i=t.comparePoint(e.leftSE.point)
if(i<0)return 1
if(i>0)return-1
const n=e.comparePoint(t.rightSE.point)
return 0!==n?n:-1}if(i>n){if(s<a&&s<h)return-1
if(s>a&&s>h)return 1
const i=e.comparePoint(t.leftSE.point)
if(0!==i)return i
const n=t.comparePoint(e.rightSE.point)
return n<0?1:n>0?-1:1}if(s<a)return-1
if(s>a)return 1
if(r<o){const i=e.comparePoint(t.rightSE.point)
if(0!==i)return i}if(r>o){const i=t.comparePoint(e.rightSE.point)
if(i<0)return 1
if(i>0)return-1}if(r!==o){const t=l-s,e=r-i,u=h-a,c=o-n
if(t>e&&u<c)return 1
if(t<e&&u>c)return-1}return r>o?1:r<o||l<h?-1:l>h?1:t.id<e.id?-1:t.id>e.id?1:0}constructor(t,e,i,n){this.id=++F,this.leftSE=t,t.segment=this,t.otherSE=e,this.rightSE=e,e.segment=this,e.otherSE=t,this.rings=i,this.windings=n}static fromRing(t,e,i){let n,r,o
const s=N.comparePoints(t,e)
if(s<0)n=t,r=e,o=1
else{if(!(s>0))throw new Error(`Tried to create degenerate segment at [${t.x}, ${t.y}]`)
n=e,r=t,o=-1}const a=new N(n,!0),l=new N(r,!1)
return new k(a,l,[i],[o])}replaceRightSE(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const t=this.leftSE.point.y,e=this.rightSE.point.y
return{ll:{x:this.leftSE.point.x,y:t<e?t:e},ur:{x:this.rightSE.point.x,y:t>e?t:e}}}vector(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}isAnEndpoint(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}comparePoint(t){if(this.isAnEndpoint(t))return 0
const e=this.leftSE.point,i=this.rightSE.point,n=this.vector()
if(e.x===i.x)return t.x===e.x?0:t.x<e.x?1:-1
const r=(t.y-e.y)/n.y,o=e.x+r*n.x
if(t.x===o)return 0
const s=(t.x-e.x)/n.x,a=e.y+s*n.y
return t.y===a?0:t.y<a?-1:1}getIntersection(t){const e=this.bbox(),i=t.bbox(),n=c(e,i)
if(null===n)return null
const r=this.leftSE.point,o=this.rightSE.point,s=t.leftSE.point,a=t.rightSE.point,l=u(e,s)&&0===this.comparePoint(s),h=u(i,r)&&0===t.comparePoint(r),d=u(e,a)&&0===this.comparePoint(a),f=u(i,o)&&0===t.comparePoint(o)
if(h&&l)return f&&!d?o:!f&&d?a:null
if(h)return d&&r.x===a.x&&r.y===a.y?null:r
if(l)return f&&o.x===s.x&&o.y===s.y?null:s
if(f&&d)return null
if(f)return o
if(d)return a
const p=((t,e,i,n)=>{if(0===e.x)return D(i,n,t.x)
if(0===n.x)return D(t,e,i.x)
if(0===e.y)return O(i,n,t.y)
if(0===n.y)return O(t,e,i.y)
const r=T(e,n)
if(0==r)return null
const o={x:i.x-t.x,y:i.y-t.y},s=T(o,e)/r,a=T(o,n)/r
return{x:(t.x+a*e.x+(i.x+s*n.x))/2,y:(t.y+a*e.y+(i.y+s*n.y))/2}})(r,this.vector(),s,t.vector())
return null===p?null:u(n,p)?_.round(p.x,p.y):null}split(t){const e=[],i=void 0!==t.events,n=new N(t,!0),r=new N(t,!1),o=this.rightSE
this.replaceRightSE(r),e.push(r),e.push(n)
const s=new k(n,o,this.rings.slice(),this.windings.slice())
return N.comparePoints(s.leftSE.point,s.rightSE.point)>0&&s.swapEvents(),N.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),i&&(n.checkForConsuming(),r.checkForConsuming()),e}swapEvents(){const t=this.rightSE
this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1
for(let e=0,i=this.windings.length;e<i;e++)this.windings[e]*=-1}consume(t){let e=this,i=t
for(;e.consumedBy;)e=e.consumedBy
for(;i.consumedBy;)i=i.consumedBy
const n=k.compare(e,i)
if(0!==n){if(n>0){const t=e
e=i,i=t}if(e.prev===i){const t=e
e=i,i=t}for(let t=0,n=i.rings.length;t<n;t++){const n=i.rings[t],r=i.windings[t],o=e.rings.indexOf(n);-1===o?(e.rings.push(n),e.windings.push(r)):e.windings[o]+=r}i.rings=null,i.windings=null,i.consumedBy=e,i.leftSE.consumedBy=e.leftSE,i.rightSE.consumedBy=e.rightSE}}prevInResult(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}beforeState(){if(void 0!==this._beforeState)return this._beforeState
if(this.prev){const t=this.prev.consumedBy||this.prev
this._beforeState=t.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]}
return this._beforeState}afterState(){if(void 0!==this._afterState)return this._afterState
const t=this.beforeState()
this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]}
const e=this._afterState.rings,i=this._afterState.windings,n=this._afterState.multiPolys
for(let s=0,a=this.rings.length;s<a;s++){const t=this.rings[s],n=this.windings[s],r=e.indexOf(t);-1===r?(e.push(t),i.push(n)):i[r]+=n}const r=[],o=[]
for(let s=0,a=e.length;s<a;s++){if(0===i[s])continue
const t=e[s],n=t.poly
if(-1===o.indexOf(n))if(t.isExterior)r.push(n)
else{-1===o.indexOf(n)&&o.push(n)
const e=r.indexOf(t.poly);-1!==e&&r.splice(e,1)}}for(let s=0,a=r.length;s<a;s++){const t=r[s].multiPoly;-1===n.indexOf(t)&&n.push(t)}return this._afterState}isInResult(){if(this.consumedBy)return!1
if(void 0!==this._isInResult)return this._isInResult
const t=this.beforeState().multiPolys,e=this.afterState().multiPolys
switch(Y.type){case"union":{const i=0===t.length,n=0===e.length
this._isInResult=i!==n
break}case"intersection":{let i,n
t.length<e.length?(i=t.length,n=e.length):(i=e.length,n=t.length),this._isInResult=n===Y.numMultiPolys&&i<n
break}case"xor":{const i=Math.abs(t.length-e.length)
this._isInResult=i%2==1
break}case"difference":{const i=t=>1===t.length&&t[0].isSubject
this._isInResult=i(t)!==i(e)
break}default:throw new Error(`Unrecognized operation type found ${Y.type}`)}return this._isInResult}}class z{constructor(t,e,i){if(!Array.isArray(t)||0===t.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon")
if(this.poly=e,this.isExterior=i,this.segments=[],"number"!=typeof t[0][0]||"number"!=typeof t[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon")
const n=_.round(t[0][0],t[0][1])
this.bbox={ll:{x:n.x,y:n.y},ur:{x:n.x,y:n.y}}
let r=n
for(let o=1,s=t.length;o<s;o++){if("number"!=typeof t[o][0]||"number"!=typeof t[o][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon")
let e=_.round(t[o][0],t[o][1])
e.x===r.x&&e.y===r.y||(this.segments.push(k.fromRing(r,e,this)),e.x<this.bbox.ll.x&&(this.bbox.ll.x=e.x),e.y<this.bbox.ll.y&&(this.bbox.ll.y=e.y),e.x>this.bbox.ur.x&&(this.bbox.ur.x=e.x),e.y>this.bbox.ur.y&&(this.bbox.ur.y=e.y),r=e)}n.x===r.x&&n.y===r.y||this.segments.push(k.fromRing(r,n,this))}getSweepEvents(){const t=[]
for(let e=0,i=this.segments.length;e<i;e++){const i=this.segments[e]
t.push(i.leftSE),t.push(i.rightSE)}return t}}class j{constructor(t,e){if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon")
this.exteriorRing=new z(t[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[]
for(let i=1,n=t.length;i<n;i++){const e=new z(t[i],this,!1)
e.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=e.bbox.ll.x),e.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=e.bbox.ll.y),e.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=e.bbox.ur.x),e.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=e.bbox.ur.y),this.interiorRings.push(e)}this.multiPoly=e}getSweepEvents(){const t=this.exteriorRing.getSweepEvents()
for(let e=0,i=this.interiorRings.length;e<i;e++){const i=this.interiorRings[e].getSweepEvents()
for(let e=0,n=i.length;e<n;e++)t.push(i[e])}return t}}class G{constructor(t,e){if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon")
try{"number"==typeof t[0][0][0]&&(t=[t])}catch(t){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}}
for(let i=0,n=t.length;i<n;i++){const e=new j(t[i],this)
e.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=e.bbox.ll.x),e.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=e.bbox.ll.y),e.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=e.bbox.ur.x),e.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=e.bbox.ur.y),this.polys.push(e)}this.isSubject=e}getSweepEvents(){const t=[]
for(let e=0,i=this.polys.length;e<i;e++){const i=this.polys[e].getSweepEvents()
for(let e=0,n=i.length;e<n;e++)t.push(i[e])}return t}}class B{static factory(t){const e=[]
for(let i=0,n=t.length;i<n;i++){const n=t[i]
if(!n.isInResult()||n.ringOut)continue
let r=null,o=n.leftSE,s=n.rightSE
const a=[o],l=o.point,h=[]
for(;r=o,o=s,a.push(o),o.point!==l;)for(;;){const t=o.getAvailableLinkedEvents()
if(0===t.length){const t=a[0].point,e=a[a.length-1].point
throw new Error(`Unable to complete output ring starting at [${t.x}, ${t.y}]. Last matching segment found ends at [${e.x}, ${e.y}].`)}if(1===t.length){s=t[0].otherSE
break}let i=null
for(let e=0,r=h.length;e<r;e++)if(h[e].point===o.point){i=e
break}if(null!==i){const t=h.splice(i)[0],n=a.splice(t.index)
n.unshift(n[0].otherSE),e.push(new B(n.reverse()))
continue}h.push({index:a.length,point:o.point})
const n=o.getLeftmostComparator(r)
s=t.sort(n)[0].otherSE
break}e.push(new B(a))}return e}constructor(t){this.events=t
for(let e=0,i=t.length;e<i;e++)t[e].segment.ringOut=this
this.poly=null}getGeom(){let t=this.events[0].point
const e=[t]
for(let l=1,h=this.events.length-1;l<h;l++){const i=this.events[l].point,n=this.events[l+1].point
0!==M(i,t,n)&&(e.push(i),t=i)}if(1===e.length)return null
const i=e[0],n=e[1]
0===M(i,t,n)&&e.shift(),e.push(e[0])
const r=this.isExteriorRing()?1:-1,o=this.isExteriorRing()?0:e.length-1,s=this.isExteriorRing()?e.length:-1,a=[]
for(let l=o;l!=s;l+=r)a.push([e[l].x,e[l].y])
return a}isExteriorRing(){if(void 0===this._isExteriorRing){const t=this.enclosingRing()
this._isExteriorRing=!t||!t.isExteriorRing()}return this._isExteriorRing}enclosingRing(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){let t=this.events[0]
for(let n=1,r=this.events.length;n<r;n++){const e=this.events[n]
N.compare(t,e)>0&&(t=e)}let e=t.segment.prevInResult(),i=e?e.prevInResult():null
for(;;){if(!e)return null
if(!i)return e.ringOut
if(i.ringOut!==e.ringOut)return i.ringOut.enclosingRing()!==e.ringOut?e.ringOut:e.ringOut.enclosingRing()
e=i.prevInResult(),i=e?e.prevInResult():null}}}class U{constructor(t){this.exteriorRing=t,t.poly=this,this.interiorRings=[]}addInterior(t){this.interiorRings.push(t),t.poly=this}getGeom(){const t=[this.exteriorRing.getGeom()]
if(null===t[0])return null
for(let e=0,i=this.interiorRings.length;e<i;e++){const i=this.interiorRings[e].getGeom()
null!==i&&t.push(i)}return t}}class q{constructor(t){this.rings=t,this.polys=this._composePolys(t)}getGeom(){const t=[]
for(let e=0,i=this.polys.length;e<i;e++){const i=this.polys[e].getGeom()
null!==i&&t.push(i)}return t}_composePolys(t){const e=[]
for(let i=0,n=t.length;i<n;i++){const n=t[i]
if(!n.poly)if(n.isExteriorRing())e.push(new U(n))
else{const t=n.enclosingRing()
t.poly||e.push(new U(t)),t.poly.addInterior(n)}}return e}}class V{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k.compare
this.queue=t,this.tree=new s(e),this.segments=[]}process(t){const e=t.segment,i=[]
if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(e),i
const n=t.isLeft?this.tree.add(e):this.tree.find(e)
if(!n)throw new Error(`Unable to find segment #${e.id} [${e.leftSE.point.x}, ${e.leftSE.point.y}] -> [${e.rightSE.point.x}, ${e.rightSE.point.y}] in SweepLine tree.`)
let r,o,s=n,a=n
for(;void 0===r;)s=this.tree.prev(s),null===s?r=null:void 0===s.key.consumedBy&&(r=s.key)
for(;void 0===o;)a=this.tree.next(a),null===a?o=null:void 0===a.key.consumedBy&&(o=a.key)
if(t.isLeft){let n=null
if(r){const t=r.getIntersection(e)
if(null!==t&&(e.isAnEndpoint(t)||(n=t),!r.isAnEndpoint(t))){const e=this._splitSafely(r,t)
for(let t=0,n=e.length;t<n;t++)i.push(e[t])}}let s=null
if(o){const t=o.getIntersection(e)
if(null!==t&&(e.isAnEndpoint(t)||(s=t),!o.isAnEndpoint(t))){const e=this._splitSafely(o,t)
for(let t=0,n=e.length;t<n;t++)i.push(e[t])}}if(null!==n||null!==s){let t=null
t=null===n?s:null===s||N.comparePoints(n,s)<=0?n:s,this.queue.remove(e.rightSE),i.push(e.rightSE)
const r=e.split(t)
for(let e=0,n=r.length;e<n;e++)i.push(r[e])}i.length>0?(this.tree.remove(e),i.push(t)):(this.segments.push(e),e.prev=r)}else{if(r&&o){const t=r.getIntersection(o)
if(null!==t){if(!r.isAnEndpoint(t)){const e=this._splitSafely(r,t)
for(let t=0,n=e.length;t<n;t++)i.push(e[t])}if(!o.isAnEndpoint(t)){const e=this._splitSafely(o,t)
for(let t=0,n=e.length;t<n;t++)i.push(e[t])}}}this.tree.remove(e)}return i}_splitSafely(t,e){this.tree.remove(t)
const i=t.rightSE
this.queue.remove(i)
const n=t.split(e)
return n.push(i),void 0===t.consumedBy&&this.tree.add(t),n}}const Z="undefined"!=typeof process&&process.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,W="undefined"!=typeof process&&process.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,Y=new class{run(t,e,i){Y.type=t,_.reset()
const n=[new G(e,!0)]
for(let s=0,u=i.length;s<u;s++)n.push(new G(i[s],!1))
if(Y.numMultiPolys=n.length,"difference"===Y.type){const t=n[0]
let e=1
for(;e<n.length;)null!==c(n[e].bbox,t.bbox)?e++:n.splice(e,1)}if("intersection"===Y.type)for(let s=0,u=n.length;s<u;s++){const t=n[s]
for(let e=s+1,i=n.length;e<i;e++)if(null===c(t.bbox,n[e].bbox))return[]}const r=new s(N.compare)
for(let s=0,u=n.length;s<u;s++){const t=n[s].getSweepEvents()
for(let e=0,i=t.length;e<i;e++)if(r.insert(t[e]),r.size>Z)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big).")}const o=new V(r)
let a=r.size,l=r.pop()
for(;l;){const t=l.key
if(r.size===a){const e=t.segment
throw new Error(`Unable to pop() ${t.isLeft?"left":"right"} SweepEvent [${t.point.x}, ${t.point.y}] from segment #${e.id} [${e.leftSE.point.x}, ${e.leftSE.point.y}] -> [${e.rightSE.point.x}, ${e.rightSE.point.y}] from queue.`)}if(r.size>Z)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big).")
if(o.segments.length>W)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments).")
const e=o.process(t)
for(let i=0,n=e.length;i<n;i++){const t=e[i]
void 0===t.consumedBy&&r.insert(t)}a=r.size,l=r.pop()}_.reset()
const h=B.factory(o.segments)
return new q(h).getGeom()}}
return{union:function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n]
return Y.run("union",t,i)},intersection:function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n]
return Y.run("intersection",t,i)},xor:function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n]
return Y.run("xor",t,i)},difference:function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n]
return Y.run("difference",t,i)}}}()},6839:function(t){t.exports=function(){"use strict"
function t(i,n,r,o,s){for(;o>r;){if(o-r>600){var a=o-r+1,l=n-r+1,h=Math.log(a),u=.5*Math.exp(2*h/3),c=.5*Math.sqrt(h*u*(a-u)/a)*(l-a/2<0?-1:1)
t(i,n,Math.max(r,Math.floor(n-l*u/a+c)),Math.min(o,Math.floor(n+(a-l)*u/a+c)),s)}var d=i[n],f=r,p=o
for(e(i,r,n),s(i[o],d)>0&&e(i,r,o);f<p;){for(e(i,f,p),f++,p--;s(i[f],d)<0;)f++
for(;s(i[p],d)>0;)p--}0===s(i[r],d)?e(i,r,p):e(i,++p,o),p<=n&&(r=p+1),n<=p&&(o=p-1)}}function e(t,e,i){var n=t[e]
t[e]=t[i],t[i]=n}function i(t,e){return t<e?-1:t>e?1:0}return function(e,n,r,o,s){t(e,n,r||0,o||e.length-1,s||i)}}()},803:(t,e,i)=>{"use strict"
t.exports=r,t.exports.default=r
var n=i(6839)
function r(t,e){if(!(this instanceof r))return new r(t,e)
this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function o(t,e,i){if(!i)return e.indexOf(t)
for(var n=0;n<e.length;n++)if(i(t,e[n]))return n
return-1}function s(t,e){a(t,0,t.children.length,e,t)}function a(t,e,i,n,r){r||(r=g(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0
for(var o,s=e;s<i;s++)o=t.children[s],l(r,t.leaf?n(o):o)
return r}function l(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function h(t,e){return t.minX-e.minX}function u(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function d(t){return t.maxX-t.minX+(t.maxY-t.minY)}function f(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function p(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function g(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function _(t,e,i,r,o){for(var s,a=[e,i];a.length;)(i=a.pop())-(e=a.pop())<=r||(s=e+Math.ceil((i-e)/r/2)*r,n(t,s,e,i,o),a.push(e,s,s,i))}r.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],n=this.toBBox
if(!p(t,e))return i
for(var r,o,s,a,l=[];e;){for(r=0,o=e.children.length;r<o;r++)s=e.children[r],p(t,a=e.leaf?n(s):s)&&(e.leaf?i.push(s):f(t,a)?this._all(s,i):l.push(s))
e=l.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox
if(!p(t,e))return!1
for(var n,r,o,s,a=[];e;){for(n=0,r=e.children.length;n<r;n++)if(o=e.children[n],p(t,s=e.leaf?i(o):o)){if(e.leaf||f(t,s))return!0
a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this
if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e])
return this}var n=this._build(t.slice(),0,t.length-1,0)
if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n)
else{if(this.data.height<n.height){var r=this.data
this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n
return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=g([]),this},remove:function(t,e){if(!t)return this
for(var i,n,r,s,a=this.data,l=this.toBBox(t),h=[],u=[];a||h.length;){if(a||(a=h.pop(),n=h[h.length-1],i=u.pop(),s=!0),a.leaf&&-1!==(r=o(t,a.children,e)))return a.children.splice(r,1),h.push(a),this._condense(h),this
s||a.leaf||!f(a,l)?n?(i++,a=n.children[i],s=!1):a=null:(h.push(a),u.push(i),i=0,n=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:h,compareMinY:u,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop()
return e},_build:function(t,e,i,n){var r,o=i-e+1,a=this._maxEntries
if(o<=a)return s(r=g(t.slice(e,i+1)),this.toBBox),r
n||(n=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,n-1))),(r=g([])).leaf=!1,r.height=n
var l,h,u,c,d=Math.ceil(o/a),f=d*Math.ceil(Math.sqrt(a))
for(_(t,e,i,f,this.compareMinX),l=e;l<=i;l+=f)for(_(t,l,u=Math.min(l+f-1,i),d,this.compareMinY),h=l;h<=u;h+=d)c=Math.min(h+d-1,u),r.children.push(this._build(t,h,c,n-1))
return s(r,this.toBBox),r},_chooseSubtree:function(t,e,i,n){for(var r,o,s,a,l,h,u,d,f,p;n.push(e),!e.leaf&&n.length-1!==i;){for(u=d=1/0,r=0,o=e.children.length;r<o;r++)l=c(s=e.children[r]),f=t,p=s,(h=(Math.max(p.maxX,f.maxX)-Math.min(p.minX,f.minX))*(Math.max(p.maxY,f.maxY)-Math.min(p.minY,f.minY))-l)<d?(d=h,u=l<u?l:u,a=s):h===d&&l<u&&(u=l,a=s)
e=a||e.children[0]}return e},_insert:function(t,e,i){var n=this.toBBox,r=i?t:n(t),o=[],s=this._chooseSubtree(r,this.data,e,o)
for(s.children.push(t),l(s,r);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--
this._adjustParentBBoxes(r,o,e)},_split:function(t,e){var i=t[e],n=i.children.length,r=this._minEntries
this._chooseSplitAxis(i,r,n)
var o=this._chooseSplitIndex(i,r,n),a=g(i.children.splice(o,i.children.length-o))
a.height=i.height,a.leaf=i.leaf,s(i,this.toBBox),s(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(i,a)},_splitRoot:function(t,e){this.data=g([t,e]),this.data.height=t.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){var n,r,o,s,l,h,u,d,f,p,g,_,m,y
for(h=u=1/0,n=e;n<=i-e;n++)f=r=a(t,0,n,this.toBBox),p=o=a(t,n,i,this.toBBox),g=Math.max(f.minX,p.minX),_=Math.max(f.minY,p.minY),m=Math.min(f.maxX,p.maxX),y=Math.min(f.maxY,p.maxY),s=Math.max(0,m-g)*Math.max(0,y-_),l=c(r)+c(o),s<h?(h=s,d=n,u=l<u?l:u):s===h&&l<u&&(u=l,d=n)
return d},_chooseSplitAxis:function(t,e,i){var n=t.leaf?this.compareMinX:h,r=t.leaf?this.compareMinY:u
this._allDistMargin(t,e,i,n)<this._allDistMargin(t,e,i,r)&&t.children.sort(n)},_allDistMargin:function(t,e,i,n){t.children.sort(n)
var r,o,s=this.toBBox,h=a(t,0,e,s),u=a(t,i-e,i,s),c=d(h)+d(u)
for(r=e;r<i-e;r++)o=t.children[r],l(h,t.leaf?s(o):o),c+=d(h)
for(r=i-e-1;r>=e;r--)o=t.children[r],l(u,t.leaf?s(o):o),c+=d(u)
return c},_adjustParentBBoxes:function(t,e,i){for(var n=i;n>=0;n--)l(e[n],t)},_condense:function(t){for(var e,i=t.length-1;i>=0;i--)0===t[i].children.length?i>0?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():s(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"]
this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},7179:function(t){t.exports=function(){"use strict"
function t(t,n,r,o,s){!function t(i,n,r,o,s){for(;o>r;){if(o-r>600){var a=o-r+1,l=n-r+1,h=Math.log(a),u=.5*Math.exp(2*h/3),c=.5*Math.sqrt(h*u*(a-u)/a)*(l-a/2<0?-1:1)
t(i,n,Math.max(r,Math.floor(n-l*u/a+c)),Math.min(o,Math.floor(n+(a-l)*u/a+c)),s)}var d=i[n],f=r,p=o
for(e(i,r,n),s(i[o],d)>0&&e(i,r,o);f<p;){for(e(i,f,p),f++,p--;s(i[f],d)<0;)f++
for(;s(i[p],d)>0;)p--}0===s(i[r],d)?e(i,r,p):e(i,++p,o),p<=n&&(r=p+1),n<=p&&(o=p-1)}}(t,n,r||0,o||t.length-1,s||i)}function e(t,e,i){var n=t[e]
t[e]=t[i],t[i]=n}function i(t,e){return t<e?-1:t>e?1:0}var n=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}
function r(t,e,i){if(!i)return e.indexOf(t)
for(var n=0;n<e.length;n++)if(i(t,e[n]))return n
return-1}function o(t,e){s(t,0,t.children.length,e,t)}function s(t,e,i,n,r){r||(r=p(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0
for(var o=e;o<i;o++){var s=t.children[o]
a(r,t.leaf?n(s):s)}return r}function a(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function h(t,e){return t.minY-e.minY}function u(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function c(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function f(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function p(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function g(e,i,n,r,o){for(var s=[i,n];s.length;)if(!((n=s.pop())-(i=s.pop())<=r)){var a=i+Math.ceil((n-i)/r/2)*r
t(e,a,i,n,o),s.push(i,a,a,n)}}return n.prototype.all=function(){return this._all(this.data,[])},n.prototype.search=function(t){var e=this.data,i=[]
if(!f(t,e))return i
for(var n=this.toBBox,r=[];e;){for(var o=0;o<e.children.length;o++){var s=e.children[o],a=e.leaf?n(s):s
f(t,a)&&(e.leaf?i.push(s):d(t,a)?this._all(s,i):r.push(s))}e=r.pop()}return i},n.prototype.collides=function(t){var e=this.data
if(!f(t,e))return!1
for(var i=[];e;){for(var n=0;n<e.children.length;n++){var r=e.children[n],o=e.leaf?this.toBBox(r):r
if(f(t,o)){if(e.leaf||d(t,o))return!0
i.push(r)}}e=i.pop()}return!1},n.prototype.load=function(t){if(!t||!t.length)return this
if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e])
return this}var i=this._build(t.slice(),0,t.length-1,0)
if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i)
else{if(this.data.height<i.height){var n=this.data
this.data=i,i=n}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i
return this},n.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},n.prototype.clear=function(){return this.data=p([]),this},n.prototype.remove=function(t,e){if(!t)return this
for(var i,n,o,s=this.data,a=this.toBBox(t),l=[],h=[];s||l.length;){if(s||(s=l.pop(),n=l[l.length-1],i=h.pop(),o=!0),s.leaf){var u=r(t,s.children,e)
if(-1!==u)return s.children.splice(u,1),l.push(s),this._condense(l),this}o||s.leaf||!d(s,a)?n?(i++,s=n.children[i],o=!1):s=null:(l.push(s),h.push(i),i=0,n=s,s=s.children[0])}return this},n.prototype.toBBox=function(t){return t},n.prototype.compareMinX=function(t,e){return t.minX-e.minX},n.prototype.compareMinY=function(t,e){return t.minY-e.minY},n.prototype.toJSON=function(){return this.data},n.prototype.fromJSON=function(t){return this.data=t,this},n.prototype._all=function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop()
return e},n.prototype._build=function(t,e,i,n){var r,s=i-e+1,a=this._maxEntries
if(s<=a)return o(r=p(t.slice(e,i+1)),this.toBBox),r
n||(n=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,n-1))),(r=p([])).leaf=!1,r.height=n
var l=Math.ceil(s/a),h=l*Math.ceil(Math.sqrt(a))
g(t,e,i,h,this.compareMinX)
for(var u=e;u<=i;u+=h){var c=Math.min(u+h-1,i)
g(t,u,c,l,this.compareMinY)
for(var d=u;d<=c;d+=l){var f=Math.min(d+l-1,c)
r.children.push(this._build(t,d,f,n-1))}}return o(r,this.toBBox),r},n.prototype._chooseSubtree=function(t,e,i,n){for(;n.push(e),!e.leaf&&n.length-1!==i;){for(var r=1/0,o=1/0,s=void 0,a=0;a<e.children.length;a++){var l=e.children[a],h=u(l),c=(d=t,f=l,(Math.max(f.maxX,d.maxX)-Math.min(f.minX,d.minX))*(Math.max(f.maxY,d.maxY)-Math.min(f.minY,d.minY))-h)
c<o?(o=c,r=h<r?h:r,s=l):c===o&&h<r&&(r=h,s=l)}e=s||e.children[0]}var d,f
return e},n.prototype._insert=function(t,e,i){var n=i?t:this.toBBox(t),r=[],o=this._chooseSubtree(n,this.data,e,r)
for(o.children.push(t),a(o,n);e>=0&&r[e].children.length>this._maxEntries;)this._split(r,e),e--
this._adjustParentBBoxes(n,r,e)},n.prototype._split=function(t,e){var i=t[e],n=i.children.length,r=this._minEntries
this._chooseSplitAxis(i,r,n)
var s=this._chooseSplitIndex(i,r,n),a=p(i.children.splice(s,i.children.length-s))
a.height=i.height,a.leaf=i.leaf,o(i,this.toBBox),o(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(i,a)},n.prototype._splitRoot=function(t,e){this.data=p([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},n.prototype._chooseSplitIndex=function(t,e,i){for(var n,r,o,a,l,h,c,d=1/0,f=1/0,p=e;p<=i-e;p++){var g=s(t,0,p,this.toBBox),_=s(t,p,i,this.toBBox),m=(r=g,o=_,a=Math.max(r.minX,o.minX),l=Math.max(r.minY,o.minY),h=Math.min(r.maxX,o.maxX),c=Math.min(r.maxY,o.maxY),Math.max(0,h-a)*Math.max(0,c-l)),y=u(g)+u(_)
m<d?(d=m,n=p,f=y<f?y:f):m===d&&y<f&&(f=y,n=p)}return n||i-e},n.prototype._chooseSplitAxis=function(t,e,i){var n=t.leaf?this.compareMinX:l,r=t.leaf?this.compareMinY:h
this._allDistMargin(t,e,i,n)<this._allDistMargin(t,e,i,r)&&t.children.sort(n)},n.prototype._allDistMargin=function(t,e,i,n){t.children.sort(n)
for(var r=this.toBBox,o=s(t,0,e,r),l=s(t,i-e,i,r),h=c(o)+c(l),u=e;u<i-e;u++){var d=t.children[u]
a(o,t.leaf?r(d):d),h+=c(o)}for(var f=i-e-1;f>=e;f--){var p=t.children[f]
a(l,t.leaf?r(p):p),h+=c(l)}return h},n.prototype._adjustParentBBoxes=function(t,e,i){for(var n=i;n>=0;n--)a(e[n],t)},n.prototype._condense=function(t){for(var e=t.length-1,i=void 0;e>=0;e--)0===t[e].children.length?e>0?(i=t[e-1].children).splice(i.indexOf(t[e]),1):this.clear():o(t[e],this.toBBox)},n}()},335:(t,e,i)=>{"use strict"
var n=i(3561),r=i(6933),o=Object
t.exports=n((function(){if(null==this||this!==o(this))throw new r("RegExp.prototype.flags getter called on non-object")
var t=""
return this.hasIndices&&(t+="d"),this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.dotAll&&(t+="s"),this.unicode&&(t+="u"),this.unicodeSets&&(t+="v"),this.sticky&&(t+="y"),t}),"get flags",!0)},5401:(t,e,i)=>{"use strict"
var n=i(5967),r=i(4649),o=i(335),s=i(8606),a=i(284),l=r(s())
n(l,{getPolyfill:s,implementation:o,shim:a}),t.exports=l},8606:(t,e,i)=>{"use strict"
var n=i(335),r=i(5967).supportsDescriptors,o=Object.getOwnPropertyDescriptor
t.exports=function(){if(r&&"gim"===/a/gim.flags){var t=o(RegExp.prototype,"flags")
if(t&&"function"==typeof t.get&&"boolean"==typeof RegExp.prototype.dotAll&&"boolean"==typeof RegExp.prototype.hasIndices){var e="",i={}
if(Object.defineProperty(i,"hasIndices",{get:function(){e+="d"}}),Object.defineProperty(i,"sticky",{get:function(){e+="y"}}),"dy"===e)return t.get}}return n}},284:(t,e,i)=>{"use strict"
var n=i(5967).supportsDescriptors,r=i(8606),o=Object.getOwnPropertyDescriptor,s=Object.defineProperty,a=TypeError,l=Object.getPrototypeOf,h=/a/
t.exports=function(){if(!n||!l)throw new a("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors")
var t=r(),e=l(h),i=o(e,"flags")
return i&&i.get===t||s(e,"flags",{configurable:!0,enumerable:!1,get:t}),t}},3815:function(t,e){!function(t){"use strict"
const e=134217729
function i(t,e,i,n,r){let o,s,a,l,h=e[0],u=n[0],c=0,d=0
u>h==u>-h?(o=h,h=e[++c]):(o=u,u=n[++d])
let f=0
if(c<t&&d<i)for(u>h==u>-h?(a=o-((s=h+o)-h),h=e[++c]):(a=o-((s=u+o)-u),u=n[++d]),o=s,0!==a&&(r[f++]=a);c<t&&d<i;)u>h==u>-h?(a=o-((s=o+h)-(l=s-o))+(h-l),h=e[++c]):(a=o-((s=o+u)-(l=s-o))+(u-l),u=n[++d]),o=s,0!==a&&(r[f++]=a)
for(;c<t;)a=o-((s=o+h)-(l=s-o))+(h-l),h=e[++c],o=s,0!==a&&(r[f++]=a)
for(;d<i;)a=o-((s=o+u)-(l=s-o))+(u-l),u=n[++d],o=s,0!==a&&(r[f++]=a)
return 0===o&&0!==f||(r[f++]=o),f}function n(t){return new Float64Array(t)}const r=n(4),o=n(8),s=n(12),a=n(16),l=n(4)
t.orient2d=function(t,n,h,u,c,d){const f=(n-d)*(h-c),p=(t-c)*(u-d),g=f-p
if(0===f||0===p||f>0!=p>0)return g
const _=Math.abs(f+p)
return Math.abs(g)>=33306690738754716e-32*_?g:-function(t,n,h,u,c,d,f){let p,g,_,m,y,v,x,b,w,E,S,C,P,T,I,M,A,R
const L=t-c,O=h-c,D=n-d,N=u-d
y=(I=(b=L-(x=(v=e*L)-(v-L)))*(E=N-(w=(v=e*N)-(v-N)))-((T=L*N)-x*w-b*w-x*E))-(S=I-(A=(b=D-(x=(v=e*D)-(v-D)))*(E=O-(w=(v=e*O)-(v-O)))-((M=D*O)-x*w-b*w-x*E))),r[0]=I-(S+y)+(y-A),y=(P=T-((C=T+S)-(y=C-T))+(S-y))-(S=P-M),r[1]=P-(S+y)+(y-M),y=(R=C+S)-C,r[2]=C-(R-y)+(S-y),r[3]=R
let F=function(t,e){let i=e[0]
for(let n=1;n<4;n++)i+=e[n]
return i}(0,r),k=22204460492503146e-32*f
if(F>=k||-F>=k)return F
if(p=t-(L+(y=t-L))+(y-c),_=h-(O+(y=h-O))+(y-c),g=n-(D+(y=n-D))+(y-d),m=u-(N+(y=u-N))+(y-d),0===p&&0===g&&0===_&&0===m)return F
if(k=11093356479670487e-47*f+33306690738754706e-32*Math.abs(F),(F+=L*m+N*p-(D*_+O*g))>=k||-F>=k)return F
y=(I=(b=p-(x=(v=e*p)-(v-p)))*(E=N-(w=(v=e*N)-(v-N)))-((T=p*N)-x*w-b*w-x*E))-(S=I-(A=(b=g-(x=(v=e*g)-(v-g)))*(E=O-(w=(v=e*O)-(v-O)))-((M=g*O)-x*w-b*w-x*E))),l[0]=I-(S+y)+(y-A),y=(P=T-((C=T+S)-(y=C-T))+(S-y))-(S=P-M),l[1]=P-(S+y)+(y-M),y=(R=C+S)-C,l[2]=C-(R-y)+(S-y),l[3]=R
const z=i(4,r,4,l,o)
y=(I=(b=L-(x=(v=e*L)-(v-L)))*(E=m-(w=(v=e*m)-(v-m)))-((T=L*m)-x*w-b*w-x*E))-(S=I-(A=(b=D-(x=(v=e*D)-(v-D)))*(E=_-(w=(v=e*_)-(v-_)))-((M=D*_)-x*w-b*w-x*E))),l[0]=I-(S+y)+(y-A),y=(P=T-((C=T+S)-(y=C-T))+(S-y))-(S=P-M),l[1]=P-(S+y)+(y-M),y=(R=C+S)-C,l[2]=C-(R-y)+(S-y),l[3]=R
const j=i(z,o,4,l,s)
y=(I=(b=p-(x=(v=e*p)-(v-p)))*(E=m-(w=(v=e*m)-(v-m)))-((T=p*m)-x*w-b*w-x*E))-(S=I-(A=(b=g-(x=(v=e*g)-(v-g)))*(E=_-(w=(v=e*_)-(v-_)))-((M=g*_)-x*w-b*w-x*E))),l[0]=I-(S+y)+(y-A),y=(P=T-((C=T+S)-(y=C-T))+(S-y))-(S=P-M),l[1]=P-(S+y)+(y-M),y=(R=C+S)-C,l[2]=C-(R-y)+(S-y),l[3]=R
const G=i(j,s,4,l,a)
return a[G-1]}(t,n,h,u,c,d,_)},t.orient2dfast=function(t,e,i,n,r,o){return(e-o)*(i-r)-(t-r)*(n-o)},Object.defineProperty(t,"__esModule",{value:!0})}(e)},3674:(t,e,i)=>{"use strict"
var n=i(8824),r=i(2451),o=i(7214)(),s=i(6627),a=i(6933),l=n("%Math.floor%")
t.exports=function(t,e){if("function"!=typeof t)throw new a("`fn` is not a function")
if("number"!=typeof e||e<0||e>4294967295||l(e)!==e)throw new a("`length` must be a positive 32-bit integer")
var i=arguments.length>2&&!!arguments[2],n=!0,h=!0
if("length"in t&&s){var u=s(t,"length")
u&&!u.configurable&&(n=!1),u&&!u.writable&&(h=!1)}return(n||h||!i)&&(o?r(t,"length",e,!0,!0):r(t,"length",e)),t}},3561:(t,e,i)=>{"use strict"
var n=i(2451),r=i(7214)(),o=i(2275).functionsHaveConfigurableNames(),s=i(6933)
t.exports=function(t,e){if("function"!=typeof t)throw new s("`fn` is not a function")
return arguments.length>2&&!!arguments[2]&&!o||(r?n(t,"name",e,!0,!0):n(t,"name",e)),t}},8264:t=>{"use strict"
t.exports={eudist:function(t,e,i){for(var n=t.length,r=0,o=0;o<n;o++){var s=(t[o]||0)-(e[o]||0)
r+=s*s}return i?Math.sqrt(r):r},mandist:function(t,e,i){for(var n=t.length,r=0,o=0;o<n;o++)r+=Math.abs((t[o]||0)-(e[o]||0))
return i?Math.sqrt(r):r},dist:function(t,e,i){var n=Math.abs(t-e)
return i?n:n*n}}},9036:(t,e,i)=>{"use strict"
var n=i(8264),r=n.eudist,o=n.dist
t.exports={kmrand:function(t,e){for(var i={},n=[],r=e<<2,o=t.length,s=t[0].length>0;n.length<e&&r-- >0;){var a=t[Math.floor(Math.random()*o)],l=s?a.join("_"):""+a
i[l]||(i[l]=!0,n.push(a))}if(n.length<e)throw new Error("Error initializating clusters")
return n},kmpp:function(t,e){var i=t[0].length?r:o,n=[],s=t.length,a=t[0].length>0,l=t[Math.floor(Math.random()*s)]
for(a&&l.join("_"),n.push(l);n.length<e;){for(var h=[],u=n.length,c=0,d=[],f=0;f<s;f++){for(var p=1/0,g=0;g<u;g++){var _=i(t[f],n[g])
_<=p&&(p=_)}h[f]=p}for(var m=0;m<s;m++)c+=h[m]
for(var y=0;y<s;y++)d[y]={i:y,v:t[y],pr:h[y]/c,cs:0}
d.sort((function(t,e){return t.pr-e.pr})),d[0].cs=d[0].pr
for(var v=1;v<s;v++)d[v].cs=d[v-1].cs+d[v].pr
for(var x=Math.random(),b=0;b<s-1&&d[b++].cs<x;);n.push(d[b-1].v)}return n}}},2070:(t,e,i)=>{"use strict"
var n=i(8264),r=i(9036),o=n.eudist,s=(n.mandist,n.dist,r.kmrand),a=r.kmpp
function l(t,e,i){i=i||[]
for(var n=0;n<t;n++)i[n]=e
return i}t.exports=function(t,e,i,n){var r=[],h=[],u=[],c=[],d=!1,f=n||1e4,p=t.length,g=t[0].length,_=g>0,m=[]
if(i)r="kmrand"==i?s(t,e):"kmpp"==i?a(t,e):i
else for(var y={};r.length<e;){var v=Math.floor(Math.random()*p)
y[v]||(y[v]=!0,r.push(t[v]))}do{l(e,0,m)
for(var x=0;x<p;x++){for(var b=1/0,w=0,E=0;E<e;E++)(c=_?o(t[x],r[E]):Math.abs(t[x]-r[E]))<=b&&(b=c,w=E)
u[x]=w,m[w]++}for(var S=[],C=(h=[],0);C<e;C++)S[C]=_?l(g,0,S[C]):0,h[C]=r[C]
if(_){for(var P=0;P<e;P++)r[P]=[]
for(var T=0;T<p;T++)for(var I=S[u[T]],M=t[T],A=0;A<g;A++)I[A]+=M[A]
d=!0
for(var R=0;R<e;R++){for(var L=r[R],O=S[R],D=h[R],N=m[R],F=0;F<g;F++)L[F]=O[F]/N||0
if(d)for(var k=0;k<g;k++)if(D[k]!=L[k]){d=!1
break}}}else{for(var z=0;z<p;z++)S[u[z]]+=t[z]
for(var j=0;j<e;j++)r[j]=S[j]/m[j]||0
d=!0
for(var G=0;G<e;G++)if(h[G]!=r[G]){d=!1
break}}d=d||--f<=0}while(!d)
return{it:1e4-f,k:e,idxs:u,centroids:r}}},3804:(t,e,i)=>{"use strict"
i.r(e),i.d(e,{default:()=>n})
class n{constructor(t=[],e=r){if(this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(let i=(this.length>>1)-1;i>=0;i--)this._down(i)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return
const t=this.data[0],e=this.data.pop()
return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:e,compare:i}=this,n=e[t]
for(;t>0;){const r=t-1>>1,o=e[r]
if(i(n,o)>=0)break
e[t]=o,t=r}e[t]=n}_down(t){const{data:e,compare:i}=this,n=this.length>>1,r=e[t]
for(;t<n;){let n=1+(t<<1),o=e[n]
const s=n+1
if(s<this.length&&i(e[s],o)<0&&(n=s,o=e[s]),i(o,r)>=0)break
e[t]=o,t=n}e[t]=r}}function r(t,e){return t<e?-1:t>e?1:0}},1940:(t,e,i)=>{"use strict"
function n(t){return t}function r(t){if(null==t)return n
var e,i,r=t.scale[0],o=t.scale[1],s=t.translate[0],a=t.translate[1]
return function(t,n){n||(e=i=0)
var l=2,h=t.length,u=new Array(h)
for(u[0]=(e+=t[0])*r+s,u[1]=(i+=t[1])*o+a;l<h;)u[l]=t[l],++l
return u}}function o(t){var e,i=r(t.transform),n=1/0,o=n,s=-n,a=-n
function l(t){(t=i(t))[0]<n&&(n=t[0]),t[0]>s&&(s=t[0]),t[1]<o&&(o=t[1]),t[1]>a&&(a=t[1])}function h(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(h)
break
case"Point":l(t.coordinates)
break
case"MultiPoint":t.coordinates.forEach(l)}}for(e in t.arcs.forEach((function(t){for(var e,r=-1,l=t.length;++r<l;)(e=i(t[r],r))[0]<n&&(n=e[0]),e[0]>s&&(s=e[0]),e[1]<o&&(o=e[1]),e[1]>a&&(a=e[1])})),t.objects)h(t.objects[e])
return[n,o,s,a]}function s(t,e){return"string"==typeof e&&(e=t.objects[e]),"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map((function(e){return a(t,e)}))}:a(t,e)}function a(t,e){var i=e.id,n=e.bbox,r=null==e.properties?{}:e.properties,o=l(t,e)
return null==i&&null==n?{type:"Feature",properties:r,geometry:o}:null==n?{type:"Feature",id:i,properties:r,geometry:o}:{type:"Feature",id:i,bbox:n,properties:r,geometry:o}}function l(t,e){var i=r(t.transform),n=t.arcs
function o(t,e){e.length&&e.pop()
for(var r=n[t<0?~t:t],o=0,s=r.length;o<s;++o)e.push(i(r[o],o))
t<0&&function(t,e){for(var i,n=t.length,r=n-e;r<--n;)i=t[r],t[r++]=t[n],t[n]=i}(e,s)}function s(t){return i(t)}function a(t){for(var e=[],i=0,n=t.length;i<n;++i)o(t[i],e)
return e.length<2&&e.push(e[0]),e}function l(t){for(var e=a(t);e.length<4;)e.push(e[0])
return e}function h(t){return t.map(l)}return function t(e){var i,n=e.type
switch(n){case"GeometryCollection":return{type:n,geometries:e.geometries.map(t)}
case"Point":i=s(e.coordinates)
break
case"MultiPoint":i=e.coordinates.map(s)
break
case"LineString":i=a(e.arcs)
break
case"MultiLineString":i=e.arcs.map(a)
break
case"Polygon":i=h(e.arcs)
break
case"MultiPolygon":i=e.arcs.map(h)
break
default:return null}return{type:n,coordinates:i}}(e)}function h(t,e){var i={},n={},r={},o=[],s=-1
function a(t,e){for(var n in t){var r=t[n]
delete e[r.start],delete r.start,delete r.end,r.forEach((function(t){i[t<0?~t:t]=1})),o.push(r)}}return e.forEach((function(i,n){var r,o=t.arcs[i<0?~i:i]
o.length<3&&!o[1][0]&&!o[1][1]&&(r=e[++s],e[s]=i,e[n]=r)})),e.forEach((function(e){var i,o,s=function(e){var i,n=t.arcs[e<0?~e:e],r=n[0]
return t.transform?(i=[0,0],n.forEach((function(t){i[0]+=t[0],i[1]+=t[1]}))):i=n[n.length-1],e<0?[i,r]:[r,i]}(e),a=s[0],l=s[1]
if(i=r[a])if(delete r[i.end],i.push(e),i.end=l,o=n[l]){delete n[o.start]
var h=o===i?i:i.concat(o)
n[h.start=i.start]=r[h.end=o.end]=h}else n[i.start]=r[i.end]=i
else if(i=n[l])if(delete n[i.start],i.unshift(e),i.start=a,o=r[a]){delete r[o.end]
var u=o===i?i:o.concat(i)
n[u.start=o.start]=r[u.end=i.end]=u}else n[i.start]=r[i.end]=i
else n[(i=[e]).start=a]=r[i.end=l]=i})),a(r,n),a(n,r),e.forEach((function(t){i[t<0?~t:t]||o.push([t])})),o}function u(t){return l(t,c.apply(this,arguments))}function c(t,e,i){var n,r,o
if(arguments.length>1)n=function(t,e,i){var n,r=[],o=[]
function s(t){var e=t<0?~t:t;(o[e]||(o[e]=[])).push({i:t,g:n})}function a(t){t.forEach(s)}function l(t){t.forEach(a)}return function t(e){switch(n=e,e.type){case"GeometryCollection":e.geometries.forEach(t)
break
case"LineString":a(e.arcs)
break
case"MultiLineString":case"Polygon":l(e.arcs)
break
case"MultiPolygon":!function(t){t.forEach(l)}(e.arcs)}}(e),o.forEach(null==i?function(t){r.push(t[0].i)}:function(t){i(t[0].g,t[t.length-1].g)&&r.push(t[0].i)}),r}(0,e,i)
else for(r=0,n=new Array(o=t.arcs.length);r<o;++r)n[r]=r
return{type:"MultiLineString",arcs:h(t,n)}}function d(t){return l(t,f.apply(this,arguments))}function f(t,e){var i={},n=[],r=[]
function o(t){t.forEach((function(e){e.forEach((function(e){(i[e=e<0?~e:e]||(i[e]=[])).push(t)}))})),n.push(t)}function s(e){return function(t){for(var e,i=-1,n=t.length,r=t[n-1],o=0;++i<n;)e=r,r=t[i],o+=e[0]*r[1]-e[1]*r[0]
return Math.abs(o)}(l(t,{type:"Polygon",arcs:[e]}).coordinates[0])}return e.forEach((function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t)
break
case"Polygon":o(e.arcs)
break
case"MultiPolygon":e.arcs.forEach(o)}})),n.forEach((function(t){if(!t._){var e=[],n=[t]
for(t._=1,r.push(e);t=n.pop();)e.push(t),t.forEach((function(t){t.forEach((function(t){i[t<0?~t:t].forEach((function(t){t._||(t._=1,n.push(t))}))}))}))}})),n.forEach((function(t){delete t._})),{type:"MultiPolygon",arcs:r.map((function(e){var n,r=[]
if(e.forEach((function(t){t.forEach((function(t){t.forEach((function(t){i[t<0?~t:t].length<2&&r.push(t)}))}))})),(n=(r=h(t,r)).length)>1)for(var o,a,l=1,u=s(r[0]);l<n;++l)(o=s(r[l]))>u&&(a=r[0],r[0]=r[l],r[l]=a,u=o)
return r})).filter((function(t){return t.length>0}))}}function p(t,e){for(var i=0,n=t.length;i<n;){var r=i+n>>>1
t[r]<e?i=r+1:n=r}return i}function g(t){var e={},i=t.map((function(){return[]}))
function n(t,i){t.forEach((function(t){t<0&&(t=~t)
var n=e[t]
n?n.push(i):e[t]=[i]}))}function r(t,e){t.forEach((function(t){n(t,e)}))}var o={LineString:n,MultiLineString:r,Polygon:r,MultiPolygon:function(t,e){t.forEach((function(t){r(t,e)}))}}
for(var s in t.forEach((function t(e,i){"GeometryCollection"===e.type?e.geometries.forEach((function(e){t(e,i)})):e.type in o&&o[e.type](e.arcs,i)})),e)for(var a=e[s],l=a.length,h=0;h<l;++h)for(var u=h+1;u<l;++u){var c,d=a[h],f=a[u];(c=i[d])[s=p(c,f)]!==f&&c.splice(s,0,f),(c=i[f])[s=p(c,d)]!==d&&c.splice(s,0,d)}return i}function _(t){if(null==t)return n
var e,i,r=t.scale[0],o=t.scale[1],s=t.translate[0],a=t.translate[1]
return function(t,n){n||(e=i=0)
var l=2,h=t.length,u=new Array(h),c=Math.round((t[0]-s)/r),d=Math.round((t[1]-a)/o)
for(u[0]=c-e,e=c,u[1]=d-i,i=d;l<h;)u[l]=t[l],++l
return u}}function m(t,e){if(t.transform)throw new Error("already quantized")
if(e&&e.scale)l=t.bbox
else{if(!((i=Math.floor(e))>=2))throw new Error("n must be 2")
var i,n=(l=t.bbox||o(t))[0],r=l[1],s=l[2],a=l[3]
e={scale:[s-n?(s-n)/(i-1):1,a-r?(a-r)/(i-1):1],translate:[n,r]}}var l,h,u=_(e),c=t.objects,d={}
function f(t){return u(t)}function p(t){var e
switch(t.type){case"GeometryCollection":e={type:"GeometryCollection",geometries:t.geometries.map(p)}
break
case"Point":e={type:"Point",coordinates:f(t.coordinates)}
break
case"MultiPoint":e={type:"MultiPoint",coordinates:t.coordinates.map(f)}
break
default:return t}return null!=t.id&&(e.id=t.id),null!=t.bbox&&(e.bbox=t.bbox),null!=t.properties&&(e.properties=t.properties),e}for(h in c)d[h]=p(c[h])
return{type:"Topology",bbox:l,transform:e,objects:d,arcs:t.arcs.map((function(t){var e,i=0,n=1,r=t.length,o=new Array(r)
for(o[0]=u(t[0],0);++i<r;)((e=u(t[i],i))[0]||e[1])&&(o[n++]=e)
return 1===n&&(o[n++]=[0,0]),o.length=n,o}))}}i.r(e),i.d(e,{bbox:()=>o,feature:()=>s,merge:()=>d,mergeArcs:()=>f,mesh:()=>u,meshArcs:()=>c,neighbors:()=>g,quantize:()=>m,transform:()=>r,untransform:()=>_})},6698:(t,e,i)=>{"use strict"
i.r(e),i.d(e,{topology:()=>p})
var n=Object.prototype.hasOwnProperty
function r(t,e,i,n,r,o){3===arguments.length&&(n=o=Array,r=null)
for(var s=new n(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),a=new o(t),l=t-1,h=0;h<t;++h)s[h]=r
return{set:function(n,o){for(var h=e(n)&l,u=s[h],c=0;u!=r;){if(i(u,n))return a[h]=o
if(++c>=t)throw new Error("full hashmap")
u=s[h=h+1&l]}return s[h]=n,a[h]=o,o},maybeSet:function(n,o){for(var h=e(n)&l,u=s[h],c=0;u!=r;){if(i(u,n))return a[h]
if(++c>=t)throw new Error("full hashmap")
u=s[h=h+1&l]}return s[h]=n,a[h]=o,o},get:function(n,o){for(var h=e(n)&l,u=s[h],c=0;u!=r;){if(i(u,n))return a[h]
if(++c>=t)break
u=s[h=h+1&l]}return o},keys:function(){for(var t=[],e=0,i=s.length;e<i;++e){var n=s[e]
n!=r&&t.push(n)}return t}}}function o(t,e){return t[0]===e[0]&&t[1]===e[1]}var s=new ArrayBuffer(16),a=new Float64Array(s),l=new Uint32Array(s)
function h(t){a[0]=t[0],a[1]=t[1]
var e=l[0]^l[1]
return 2147483647&(e<<5^e>>7^l[2]^l[3])}function u(t,e,i){for(var n,r=e+(i---e>>1);e<r;++e,--i)n=t[e],t[e]=t[i],t[i]=n}function c(t){var e={type:"GeometryCollection",geometries:t.features.map(d)}
return null!=t.bbox&&(e.bbox=t.bbox),e}function d(t){var e,i=f(t.geometry)
for(e in null!=t.id&&(i.id=t.id),null!=t.bbox&&(i.bbox=t.bbox),t.properties){i.properties=t.properties
break}return i}function f(t){if(null==t)return{type:null}
var e="GeometryCollection"===t.type?{type:"GeometryCollection",geometries:t.geometries.map(f)}:"Point"===t.type||"MultiPoint"===t.type?{type:t.type,coordinates:t.coordinates}:{type:t.type,arcs:t.coordinates}
return null!=t.bbox&&(e.bbox=t.bbox),e}function p(t,e){var i=function(t){var e=1/0,i=1/0,r=-1/0,o=-1/0
function s(t){null!=t&&n.call(a,t.type)&&a[t.type](t)}var a={GeometryCollection:function(t){t.geometries.forEach(s)},Point:function(t){l(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(l)},LineString:function(t){h(t.arcs)},MultiLineString:function(t){t.arcs.forEach(h)},Polygon:function(t){t.arcs.forEach(h)},MultiPolygon:function(t){t.arcs.forEach(u)}}
function l(t){var n=t[0],s=t[1]
n<e&&(e=n),n>r&&(r=n),s<i&&(i=s),s>o&&(o=s)}function h(t){t.forEach(l)}function u(t){t.forEach(h)}for(var c in t)s(t[c])
return r>=e&&o>=i?[e,i,r,o]:void 0}(t=function(t){var e,i,n={}
for(e in t)n[e]=null==(i=t[e])?{type:null}:("FeatureCollection"===i.type?c:"Feature"===i.type?d:f)(i)
return n}(t)),s=e>0&&i&&function(t,e,i){var r=e[0],o=e[1],s=e[2],a=e[3],l=s-r?(i-1)/(s-r):1,h=a-o?(i-1)/(a-o):1
function u(t){return[Math.round((t[0]-r)*l),Math.round((t[1]-o)*h)]}function c(t,e){for(var i,n,s,a,u,c=-1,d=0,f=t.length,p=new Array(f);++c<f;)i=t[c],a=Math.round((i[0]-r)*l),u=Math.round((i[1]-o)*h),a===n&&u===s||(p[d++]=[n=a,s=u])
for(p.length=d;d<e;)d=p.push([p[0][0],p[0][1]])
return p}function d(t){return c(t,2)}function f(t){return c(t,4)}function p(t){return t.map(f)}function g(t){null!=t&&n.call(_,t.type)&&_[t.type](t)}var _={GeometryCollection:function(t){t.geometries.forEach(g)},Point:function(t){t.coordinates=u(t.coordinates)},MultiPoint:function(t){t.coordinates=t.coordinates.map(u)},LineString:function(t){t.arcs=d(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(d)},Polygon:function(t){t.arcs=p(t.arcs)},MultiPolygon:function(t){t.arcs=t.arcs.map(p)}}
for(var m in t)g(t[m])
return{scale:[1/l,1/h],translate:[r,o]}}(t,i,e),a=function(t){var e,i,n,s,a=t.coordinates,l=t.lines,u=t.rings,c=l.length+u.length
for(delete t.lines,delete t.rings,n=0,s=l.length;n<s;++n)for(e=l[n];e=e.next;)++c
for(n=0,s=u.length;n<s;++n)for(i=u[n];i=i.next;)++c
var d=r(2*c*1.4,h,o),f=t.arcs=[]
for(n=0,s=l.length;n<s;++n){e=l[n]
do{p(e)}while(e=e.next)}for(n=0,s=u.length;n<s;++n)if((i=u[n]).next)do{p(i)}while(i=i.next)
else g(i)
function p(t){var e,i,n,r,o,s,l,h
if(n=d.get(e=a[t[0]]))for(l=0,h=n.length;l<h;++l)if(_(r=n[l],t))return t[0]=r[0],void(t[1]=r[1])
if(o=d.get(i=a[t[1]]))for(l=0,h=o.length;l<h;++l)if(m(s=o[l],t))return t[1]=s[0],void(t[0]=s[1])
n?n.push(t):d.set(e,[t]),o?o.push(t):d.set(i,[t]),f.push(t)}function g(t){var e,i,n,r,o
if(i=d.get(a[t[0]]))for(r=0,o=i.length;r<o;++r){if(y(n=i[r],t))return t[0]=n[0],void(t[1]=n[1])
if(v(n,t))return t[0]=n[1],void(t[1]=n[0])}if(i=d.get(e=a[t[0]+x(t)]))for(r=0,o=i.length;r<o;++r){if(y(n=i[r],t))return t[0]=n[0],void(t[1]=n[1])
if(v(n,t))return t[0]=n[1],void(t[1]=n[0])}i?i.push(t):d.set(e,[t]),f.push(t)}function _(t,e){var i=t[0],n=e[0],r=t[1]
if(i-r!=n-e[1])return!1
for(;i<=r;++i,++n)if(!o(a[i],a[n]))return!1
return!0}function m(t,e){var i=t[0],n=e[0],r=t[1],s=e[1]
if(i-r!=n-s)return!1
for(;i<=r;++i,--s)if(!o(a[i],a[s]))return!1
return!0}function y(t,e){var i=t[0],n=e[0],r=t[1]-i
if(r!==e[1]-n)return!1
for(var s=x(t),l=x(e),h=0;h<r;++h)if(!o(a[i+(h+s)%r],a[n+(h+l)%r]))return!1
return!0}function v(t,e){var i=t[0],n=e[0],r=t[1],s=e[1],l=r-i
if(l!==s-n)return!1
for(var h=x(t),u=l-x(e),c=0;c<l;++c)if(!o(a[i+(c+h)%l],a[s-(c+u)%l]))return!1
return!0}function x(t){for(var e=t[0],i=t[1],n=e,r=n,o=a[n];++n<i;){var s=a[n];(s[0]<o[0]||s[0]===o[0]&&s[1]<o[1])&&(r=n,o=s)}return r-e}return t}(function(t){var e,i,n,s,a,l,c,d=function(t){var e,i,n,s,a=t.coordinates,l=t.lines,u=t.rings,c=function(){for(var t=r(1.4*a.length,S,C,Int32Array,-1,Int32Array),e=new Int32Array(a.length),i=0,n=a.length;i<n;++i)e[i]=t.maybeSet(i,i)
return e}(),d=new Int32Array(a.length),f=new Int32Array(a.length),p=new Int32Array(a.length),g=new Int8Array(a.length),_=0
for(e=0,i=a.length;e<i;++e)d[e]=f[e]=p[e]=-1
for(e=0,i=l.length;e<i;++e){var m=l[e],y=m[0],v=m[1]
for(n=c[y],s=c[++y],++_,g[n]=1;++y<=v;)E(e,n,n=s,s=c[y]);++_,g[s]=1}for(e=0,i=a.length;e<i;++e)d[e]=-1
for(e=0,i=u.length;e<i;++e){var x=u[e],b=x[0]+1,w=x[1]
for(E(e,c[w-1],n=c[b-1],s=c[b]);++b<=w;)E(e,n,n=s,s=c[b])}function E(t,e,i,n){if(d[i]!==t){d[i]=t
var r=f[i]
if(r>=0){var o=p[i]
r===e&&o===n||r===n&&o===e||(++_,g[i]=1)}else f[i]=e,p[i]=n}}function S(t){return h(a[t])}function C(t,e){return o(a[t],a[e])}d=f=p=null
var P,T=function(t,e,i,n,r){3===arguments.length&&(n=Array,r=null)
for(var o=new n(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),s=t-1,a=0;a<t;++a)o[a]=r
return{add:function(n){for(var a=e(n)&s,l=o[a],h=0;l!=r;){if(i(l,n))return!0
if(++h>=t)throw new Error("full hashset")
l=o[a=a+1&s]}return o[a]=n,!0},has:function(n){for(var a=e(n)&s,l=o[a],h=0;l!=r;){if(i(l,n))return!0
if(++h>=t)break
l=o[a=a+1&s]}return!1},values:function(){for(var t=[],e=0,i=o.length;e<i;++e){var n=o[e]
n!=r&&t.push(n)}return t}}}(1.4*_,h,o)
for(e=0,i=a.length;e<i;++e)g[P=c[e]]&&T.add(a[P])
return T}(t),f=t.coordinates,p=t.lines,g=t.rings
for(i=0,n=p.length;i<n;++i)for(var _=p[i],m=_[0],y=_[1];++m<y;)d.has(f[m])&&(e={0:m,1:_[1]},_[1]=m,_=_.next=e)
for(i=0,n=g.length;i<n;++i)for(var v=g[i],x=v[0],b=x,w=v[1],E=d.has(f[x]);++b<w;)d.has(f[b])&&(E?(e={0:b,1:v[1]},v[1]=b,v=v.next=e):(c=w-b,u(s=f,a=x,l=w),u(s,a,a+c),u(s,a+c,l),f[w]=f[x],E=!0,b=x))
return t}(function(t){var e=-1,i=[],r=[],o=[]
function s(t){t&&n.call(a,t.type)&&a[t.type](t)}var a={GeometryCollection:function(t){t.geometries.forEach(s)},LineString:function(t){t.arcs=l(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(l)},Polygon:function(t){t.arcs=t.arcs.map(h)},MultiPolygon:function(t){t.arcs=t.arcs.map(u)}}
function l(t){for(var n=0,r=t.length;n<r;++n)o[++e]=t[n]
var s={0:e-r+1,1:e}
return i.push(s),s}function h(t){for(var i=0,n=t.length;i<n;++i)o[++e]=t[i]
var s={0:e-n+1,1:e}
return r.push(s),s}function u(t){return t.map(h)}for(var c in t)s(t[c])
return{type:"Topology",coordinates:o,lines:i,rings:r,objects:t}}(t))),l=a.coordinates,p=r(1.4*a.arcs.length,g,_)
function m(t){t&&n.call(y,t.type)&&y[t.type](t)}t=a.objects,a.bbox=i,a.arcs=a.arcs.map((function(t,e){return p.set(t,e),l.slice(t[0],t[1]+1)})),delete a.coordinates,l=null
var y={GeometryCollection:function(t){t.geometries.forEach(m)},LineString:function(t){t.arcs=v(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(v)},Polygon:function(t){t.arcs=t.arcs.map(v)},MultiPolygon:function(t){t.arcs=t.arcs.map(x)}}
function v(t){var e=[]
do{var i=p.get(t)
e.push(t[0]<t[1]?i:~i)}while(t=t.next)
return e}function x(t){return t.map(v)}for(var b in t)m(t[b])
return s&&(a.transform=s,a.arcs=function(t){for(var e=-1,i=t.length;++e<i;){for(var n,r,o=t[e],s=0,a=1,l=o.length,h=o[0],u=h[0],c=h[1];++s<l;)n=(h=o[s])[0],r=h[1],n===u&&r===c||(o[a++]=[n-u,r-c],u=n,c=r)
1===a&&(o[a++]=[0,0]),o.length=a}return t}(a.arcs)),a}function g(t){var e,i=t[0],n=t[1]
return n<i&&(e=i,i=n,n=e),i+31*n}function _(t,e){var i,n=t[0],r=t[1],o=e[0],s=e[1]
return r<n&&(i=n,n=r,r=i),s<o&&(i=o,o=s,s=i),n===o&&r===s}},3011:function(t,e){!function(t){"use strict"
function e(){}function i(t){this.message=t||""}function n(t){this.message=t||""}function r(t){this.message=t||""}function o(){}function s(t){return null===t?Dt:t.color}function a(t){return null===t?null:t.parent}function l(t,e){null!==t&&(t.color=e)}function h(t){return null===t?null:t.left}function u(t){return null===t?null:t.right}function c(){this.root_=null,this.size_=0}function d(){}function f(){this.array_=[],arguments[0]instanceof xt&&this.addAll(arguments[0])}function p(){}function g(t){this.message=t||""}function _(){this.array_=[]}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object")
var e=Object(this),i=Math.max(Math.min(e.length,9007199254740991),0)||0,n=1 in arguments&&parseInt(Number(arguments[1]),10)||0
n=n<0?Math.max(i+n,0):Math.min(n,i)
var r=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:i
for(r=r<0?Math.max(i+arguments[2],0):Math.min(r,i);n<r;)e[n]=t,++n
return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)}
var m=function(){}
m.prototype.interfaces_=function(){return[]},m.prototype.getClass=function(){return m},m.prototype.equalsWithTolerance=function(t,e,i){return Math.abs(t-e)<=i}
var y=function(t){function e(e){t.call(this,e),this.name="IllegalArgumentException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),v=function(){},x={MAX_VALUE:{configurable:!0}}
v.isNaN=function(t){return Number.isNaN(t)},v.doubleToLongBits=function(t){return t},v.longBitsToDouble=function(t){return t},v.isInfinite=function(t){return!Number.isFinite(t)},x.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(v,x)
var b=function(){},w=function(){},E=function(){},S=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE
else if(1===arguments.length){var e=arguments[0]
this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},C={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}}
S.prototype.setOrdinate=function(t,e){switch(t){case S.X:this.x=e
break
case S.Y:this.y=e
break
case S.Z:this.z=e
break
default:throw new y("Invalid ordinate index: "+t)}},S.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0]
return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],i=arguments[1]
return!!m.equalsWithTolerance(this.x,e.x,i)&&!!m.equalsWithTolerance(this.y,e.y,i)}},S.prototype.getOrdinate=function(t){switch(t){case S.X:return this.x
case S.Y:return this.y
case S.Z:return this.z}throw new y("Invalid ordinate index: "+t)},S.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||v.isNaN(this.z))&&v.isNaN(t.z)},S.prototype.equals=function(t){return t instanceof S&&this.equals2D(t)},S.prototype.equalInZ=function(t,e){return m.equalsWithTolerance(this.z,t.z,e)},S.prototype.compareTo=function(t){var e=t
return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},S.prototype.clone=function(){},S.prototype.copy=function(){return new S(this)},S.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},S.prototype.distance3D=function(t){var e=this.x-t.x,i=this.y-t.y,n=this.z-t.z
return Math.sqrt(e*e+i*i+n*n)},S.prototype.distance=function(t){var e=this.x-t.x,i=this.y-t.y
return Math.sqrt(e*e+i*i)},S.prototype.hashCode=function(){var t=17
return 37*(t=37*t+S.hashCode(this.x))+S.hashCode(this.y)},S.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},S.prototype.interfaces_=function(){return[b,w,e]},S.prototype.getClass=function(){return S},S.hashCode=function(){if(1===arguments.length)return v.doubleToLongBits(arguments[0]),Math.trunc(0)},C.DimensionalComparator.get=function(){return P},C.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},C.NULL_ORDINATE.get=function(){return v.NaN},C.X.get=function(){return 0},C.Y.get=function(){return 1},C.Z.get=function(){return 2},Object.defineProperties(S,C)
var P=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0]
if(2!==e&&3!==e)throw new y("only 2 or 3 dimensions may be specified")
this._dimensionsToTest=e}}
P.prototype.compare=function(t,e){var i=t,n=e,r=P.compare(i.x,n.x)
if(0!==r)return r
var o=P.compare(i.y,n.y)
return 0!==o?o:this._dimensionsToTest<=2?0:P.compare(i.z,n.z)},P.prototype.interfaces_=function(){return[E]},P.prototype.getClass=function(){return P},P.compare=function(t,e){return t<e?-1:t>e?1:v.isNaN(t)?v.isNaN(e)?0:-1:v.isNaN(e)?1:0}
var T=function(){}
T.prototype.create=function(){},T.prototype.interfaces_=function(){return[]},T.prototype.getClass=function(){return T}
var I=function(){},M={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}}
I.prototype.interfaces_=function(){return[]},I.prototype.getClass=function(){return I},I.toLocationSymbol=function(t){switch(t){case I.EXTERIOR:return"e"
case I.BOUNDARY:return"b"
case I.INTERIOR:return"i"
case I.NONE:return"-"}throw new y("Unknown location value: "+t)},M.INTERIOR.get=function(){return 0},M.BOUNDARY.get=function(){return 1},M.EXTERIOR.get=function(){return 2},M.NONE.get=function(){return-1},Object.defineProperties(I,M)
var A=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},R=function(){},L={LOG_10:{configurable:!0}}
R.prototype.interfaces_=function(){return[]},R.prototype.getClass=function(){return R},R.log10=function(t){var e=Math.log(t)
return v.isInfinite(e)||v.isNaN(e)?e:e/R.LOG_10},R.min=function(t,e,i,n){var r=t
return e<r&&(r=e),i<r&&(r=i),n<r&&(r=n),r},R.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],i=arguments[2]
return t<e?e:t>i?i:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var n=arguments[0],r=arguments[1],o=arguments[2]
return n<r?r:n>o?o:n}},R.wrap=function(t,e){return t<0?e- -t%e:t%e},R.max=function(){if(3===arguments.length){var t=arguments[1],e=arguments[2],i=arguments[0]
return t>i&&(i=t),e>i&&(i=e),i}if(4===arguments.length){var n=arguments[1],r=arguments[2],o=arguments[3],s=arguments[0]
return n>s&&(s=n),r>s&&(s=r),o>s&&(s=o),s}},R.average=function(t,e){return(t+e)/2},L.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(R,L)
var O=function(t){this.str=t}
O.prototype.append=function(t){this.str+=t},O.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},O.prototype.toString=function(t){return this.str}
var D=function(t){this.value=t}
D.prototype.intValue=function(){return this.value},D.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},D.isNaN=function(t){return Number.isNaN(t)}
var N=function(){}
N.isWhitespace=function(t){return t<=32&&t>=0||127===t},N.toUpperCase=function(t){return t.toUpperCase()}
var F=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0)
else if(1===arguments.length)if("number"==typeof arguments[0]){var e=arguments[0]
this.init(e)}else if(arguments[0]instanceof t){var i=arguments[0]
this.init(i)}else"string"==typeof arguments[0]&&t.call(this,t.parse(arguments[0]))
else if(2===arguments.length){var n=arguments[0],r=arguments[1]
this.init(n,r)}},k={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}}
F.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},F.prototype.extractSignificantDigits=function(t,e){var i=this.abs(),n=F.magnitude(i._hi),r=F.TEN.pow(n);(i=i.divide(r)).gt(F.TEN)?(i=i.divide(F.TEN),n+=1):i.lt(F.ONE)&&(i=i.multiply(F.TEN),n-=1)
for(var o=n+1,s=new O,a=F.MAX_PRINT_DIGITS-1,l=0;l<=a;l++){t&&l===o&&s.append(".")
var h=Math.trunc(i._hi)
if(h<0)break
var u=!1,c=0
h>9?(u=!0,c="9"):c="0"+h,s.append(c),i=i.subtract(F.valueOf(h)).multiply(F.TEN),u&&i.selfAdd(F.TEN)
var d=!0,f=F.magnitude(i._hi)
if(f<0&&Math.abs(f)>=a-l&&(d=!1),!d)break}return e[0]=n,s.toString()},F.prototype.sqr=function(){return this.multiply(this)},F.prototype.doubleValue=function(){return this._hi+this._lo},F.prototype.subtract=function(){if(arguments[0]instanceof F){var t=arguments[0]
return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0]
return this.add(-e)}},F.prototype.equals=function(){if(1===arguments.length){var t=arguments[0]
return this._hi===t._hi&&this._lo===t._lo}},F.prototype.isZero=function(){return 0===this._hi&&0===this._lo},F.prototype.selfSubtract=function(){if(arguments[0]instanceof F){var t=arguments[0]
return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0]
return this.isNaN()?this:this.selfAdd(-e,0)}},F.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},F.prototype.min=function(t){return this.le(t)?this:t},F.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof F){var t=arguments[0]
return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0]
return this.selfDivide(e,0)}}else if(2===arguments.length){var i,n,r,o,s=arguments[0],a=arguments[1],l=null,h=null,u=null,c=null
return r=this._hi/s,c=(l=(u=F.SPLIT*r)-(l=u-r))*(h=(c=F.SPLIT*s)-(h=c-s))-(o=r*s)+l*(n=s-h)+(i=r-l)*h+i*n,c=r+(u=(this._hi-o-c+this._lo-r*a)/s),this._hi=c,this._lo=r-c+u,this}},F.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},F.prototype.divide=function(){if(arguments[0]instanceof F){var t,e,i,n,r=arguments[0],o=null,s=null,a=null,l=null
return t=(i=this._hi/r._hi)-(o=(a=F.SPLIT*i)-(o=a-i)),l=o*(s=(l=F.SPLIT*r._hi)-(s=l-r._hi))-(n=i*r._hi)+o*(e=r._hi-s)+t*s+t*e,a=(this._hi-n-l+this._lo-i*r._lo)/r._hi,new F(l=i+a,i-l+a)}if("number"==typeof arguments[0]){var h=arguments[0]
return v.isNaN(h)?F.createNaN():F.copy(this).selfDivide(h,0)}},F.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},F.prototype.pow=function(t){if(0===t)return F.valueOf(1)
var e=new F(this),i=F.valueOf(1),n=Math.abs(t)
if(n>1)for(;n>0;)n%2==1&&i.selfMultiply(e),(n/=2)>0&&(e=e.sqr())
else i=e
return t<0?i.reciprocal():i},F.prototype.ceil=function(){if(this.isNaN())return F.NaN
var t=Math.ceil(this._hi),e=0
return t===this._hi&&(e=Math.ceil(this._lo)),new F(t,e)},F.prototype.compareTo=function(t){var e=t
return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},F.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},F.prototype.setValue=function(){if(arguments[0]instanceof F){var t=arguments[0]
return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0]
return this.init(e),this}},F.prototype.max=function(t){return this.ge(t)?this:t},F.prototype.sqrt=function(){if(this.isZero())return F.valueOf(0)
if(this.isNegative())return F.NaN
var t=1/Math.sqrt(this._hi),e=this._hi*t,i=F.valueOf(e),n=this.subtract(i.sqr())._hi*(.5*t)
return i.add(n)},F.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof F){var t=arguments[0]
return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e,i,n,r,o,s=arguments[0],a=null
return a=(n=this._hi+s)-(r=n-this._hi),i=(o=(a=s-r+(this._hi-a))+this._lo)+(n-(e=n+o)),this._hi=e+i,this._lo=i+(e-this._hi),this}}else if(2===arguments.length){var l,h,u,c,d=arguments[0],f=arguments[1],p=null,g=null,_=null
u=this._hi+d,h=this._lo+f,g=u-(_=u-this._hi),p=h-(c=h-this._lo)
var m=(l=u+(_=(g=d-_+(this._hi-g))+h))+(_=(p=f-c+(this._lo-p))+(_+(u-l))),y=_+(l-m)
return this._hi=m,this._lo=y,this}},F.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof F){var t=arguments[0]
return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0]
return this.selfMultiply(e,0)}}else if(2===arguments.length){var i,n,r=arguments[0],o=arguments[1],s=null,a=null,l=null,h=null
s=(l=F.SPLIT*this._hi)-this._hi,h=F.SPLIT*r,s=l-s,i=this._hi-s,a=h-r
var u=(l=this._hi*r)+(h=s*(a=h-a)-l+s*(n=r-a)+i*a+i*n+(this._hi*o+this._lo*r)),c=h+(s=l-u)
return this._hi=u,this._lo=c,this}},F.prototype.selfSqr=function(){return this.selfMultiply(this)},F.prototype.floor=function(){if(this.isNaN())return F.NaN
var t=Math.floor(this._hi),e=0
return t===this._hi&&(e=Math.floor(this._lo)),new F(t,e)},F.prototype.negate=function(){return this.isNaN()?this:new F(-this._hi,-this._lo)},F.prototype.clone=function(){},F.prototype.multiply=function(){if(arguments[0]instanceof F){var t=arguments[0]
return t.isNaN()?F.createNaN():F.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0]
return v.isNaN(e)?F.createNaN():F.copy(this).selfMultiply(e,0)}},F.prototype.isNaN=function(){return v.isNaN(this._hi)},F.prototype.intValue=function(){return Math.trunc(this._hi)},F.prototype.toString=function(){var t=F.magnitude(this._hi)
return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},F.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString()
if(null!==t)return t
var e=new Array(1).fill(null),i=this.extractSignificantDigits(!0,e),n=e[0]+1,r=i
if("."===i.charAt(0))r="0"+i
else if(n<0)r="0."+F.stringOfChar("0",-n)+i
else if(-1===i.indexOf(".")){var o=n-i.length
r=i+F.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+r:r},F.prototype.reciprocal=function(){var t,e,i,n,r=null,o=null,s=null,a=null
t=(i=1/this._hi)-(r=(s=F.SPLIT*i)-(r=s-i)),o=(a=F.SPLIT*this._hi)-this._hi
var l=i+(s=(1-(n=i*this._hi)-(a=r*(o=a-o)-n+r*(e=this._hi-o)+t*o+t*e)-i*this._lo)/this._hi)
return new F(l,i-l+s)},F.prototype.toSciNotation=function(){if(this.isZero())return F.SCI_NOT_ZERO
var t=this.getSpecialNumberString()
if(null!==t)return t
var e=new Array(1).fill(null),i=this.extractSignificantDigits(!1,e),n=F.SCI_NOT_EXPONENT_CHAR+e[0]
if("0"===i.charAt(0))throw new Error("Found leading zero: "+i)
var r=""
i.length>1&&(r=i.substring(1))
var o=i.charAt(0)+"."+r
return this.isNegative()?"-"+o+n:o+n},F.prototype.abs=function(){return this.isNaN()?F.NaN:this.isNegative()?this.negate():new F(this)},F.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},F.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},F.prototype.add=function(){if(arguments[0]instanceof F){var t=arguments[0]
return F.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0]
return F.copy(this).selfAdd(e)}},F.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0]
this._hi=t,this._lo=0}else if(arguments[0]instanceof F){var e=arguments[0]
this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var i=arguments[0],n=arguments[1]
this._hi=i,this._lo=n}},F.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},F.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},F.prototype.trunc=function(){return this.isNaN()?F.NaN:this.isPositive()?this.floor():this.ceil()},F.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},F.prototype.interfaces_=function(){return[e,b,w]},F.prototype.getClass=function(){return F},F.sqr=function(t){return F.valueOf(t).selfMultiply(t)},F.valueOf=function(){return"string"==typeof arguments[0]?F.parse(arguments[0]):"number"==typeof arguments[0]?new F(arguments[0]):void 0},F.sqrt=function(t){return F.valueOf(t).sqrt()},F.parse=function(t){for(var e=0,i=t.length;N.isWhitespace(t.charAt(e));)e++
var n=!1
if(e<i){var r=t.charAt(e)
"-"!==r&&"+"!==r||(e++,"-"===r&&(n=!0))}for(var o=new F,s=0,a=0,l=0;!(e>=i);){var h=t.charAt(e)
if(e++,N.isDigit(h)){var u=h-"0"
o.selfMultiply(F.TEN),o.selfAdd(u),s++}else{if("."!==h){if("e"===h||"E"===h){var c=t.substring(e)
try{l=D.parseInt(c)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+c+" in string "+t):e}break}throw new Error("Unexpected character '"+h+"' at position "+e+" in string "+t)}a=s}}var d=o,f=s-a-l
if(0===f)d=o
else if(f>0){var p=F.TEN.pow(f)
d=o.divide(p)}else if(f<0){var g=F.TEN.pow(-f)
d=o.multiply(g)}return n?d.negate():d},F.createNaN=function(){return new F(v.NaN,v.NaN)},F.copy=function(t){return new F(t)},F.magnitude=function(t){var e=Math.abs(t),i=Math.log(e)/Math.log(10),n=Math.trunc(Math.floor(i))
return 10*Math.pow(10,n)<=e&&(n+=1),n},F.stringOfChar=function(t,e){for(var i=new O,n=0;n<e;n++)i.append(t)
return i.toString()},k.PI.get=function(){return new F(3.141592653589793,12246467991473532e-32)},k.TWO_PI.get=function(){return new F(6.283185307179586,24492935982947064e-32)},k.PI_2.get=function(){return new F(1.5707963267948966,6123233995736766e-32)},k.E.get=function(){return new F(2.718281828459045,14456468917292502e-32)},k.NaN.get=function(){return new F(v.NaN,v.NaN)},k.EPS.get=function(){return 123259516440783e-46},k.SPLIT.get=function(){return 134217729},k.MAX_PRINT_DIGITS.get=function(){return 32},k.TEN.get=function(){return F.valueOf(10)},k.ONE.get=function(){return F.valueOf(1)},k.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},k.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(F,k)
var z=function(){},j={DP_SAFE_EPSILON:{configurable:!0}}
z.prototype.interfaces_=function(){return[]},z.prototype.getClass=function(){return z},z.orientationIndex=function(t,e,i){var n=z.orientationIndexFilter(t,e,i)
if(n<=1)return n
var r=F.valueOf(e.x).selfAdd(-t.x),o=F.valueOf(e.y).selfAdd(-t.y),s=F.valueOf(i.x).selfAdd(-e.x),a=F.valueOf(i.y).selfAdd(-e.y)
return r.selfMultiply(a).selfSubtract(o.selfMultiply(s)).signum()},z.signOfDet2x2=function(t,e,i,n){return t.multiply(n).selfSubtract(e.multiply(i)).signum()},z.intersection=function(t,e,i,n){var r=F.valueOf(n.y).selfSubtract(i.y).selfMultiply(F.valueOf(e.x).selfSubtract(t.x)),o=F.valueOf(n.x).selfSubtract(i.x).selfMultiply(F.valueOf(e.y).selfSubtract(t.y)),s=r.subtract(o),a=F.valueOf(n.x).selfSubtract(i.x).selfMultiply(F.valueOf(t.y).selfSubtract(i.y)),l=F.valueOf(n.y).selfSubtract(i.y).selfMultiply(F.valueOf(t.x).selfSubtract(i.x)),h=a.subtract(l).selfDivide(s).doubleValue(),u=F.valueOf(t.x).selfAdd(F.valueOf(e.x).selfSubtract(t.x).selfMultiply(h)).doubleValue(),c=F.valueOf(e.x).selfSubtract(t.x).selfMultiply(F.valueOf(t.y).selfSubtract(i.y)),d=F.valueOf(e.y).selfSubtract(t.y).selfMultiply(F.valueOf(t.x).selfSubtract(i.x)),f=c.subtract(d).selfDivide(s).doubleValue(),p=F.valueOf(i.y).selfAdd(F.valueOf(n.y).selfSubtract(i.y).selfMultiply(f)).doubleValue()
return new S(u,p)},z.orientationIndexFilter=function(t,e,i){var n=null,r=(t.x-i.x)*(e.y-i.y),o=(t.y-i.y)*(e.x-i.x),s=r-o
if(r>0){if(o<=0)return z.signum(s)
n=r+o}else{if(!(r<0))return z.signum(s)
if(o>=0)return z.signum(s)
n=-r-o}var a=z.DP_SAFE_EPSILON*n
return s>=a||-s>=a?z.signum(s):2},z.signum=function(t){return t>0?1:t<0?-1:0},j.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(z,j)
var G=function(){},B={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}}
B.X.get=function(){return 0},B.Y.get=function(){return 1},B.Z.get=function(){return 2},B.M.get=function(){return 3},G.prototype.setOrdinate=function(t,e,i){},G.prototype.size=function(){},G.prototype.getOrdinate=function(t,e){},G.prototype.getCoordinate=function(){},G.prototype.getCoordinateCopy=function(t){},G.prototype.getDimension=function(){},G.prototype.getX=function(t){},G.prototype.clone=function(){},G.prototype.expandEnvelope=function(t){},G.prototype.copy=function(){},G.prototype.getY=function(t){},G.prototype.toCoordinateArray=function(){},G.prototype.interfaces_=function(){return[w]},G.prototype.getClass=function(){return G},Object.defineProperties(G,B)
var U=function(){},q=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(U),V=function(){}
V.arraycopy=function(t,e,i,n,r){for(var o=0,s=e;s<e+r;s++)i[n+o]=t[s],o++},V.getProperty=function(t){return{"line.separator":"\n"}[t]}
var Z=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1
else if(1===arguments.length){var e=arguments[0]
this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var i=arguments[0],n=arguments[1]
this.x=i,this.y=n,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var r=arguments[0],o=arguments[1]
this.x=r.y*o.w-o.y*r.w,this.y=o.x*r.w-r.x*o.w,this.w=r.x*o.y-o.x*r.y}else if(arguments[0]instanceof S&&arguments[1]instanceof S){var s=arguments[0],a=arguments[1]
this.x=s.y-a.y,this.y=a.x-s.x,this.w=s.x*a.y-a.x*s.y}}else if(3===arguments.length){var l=arguments[0],h=arguments[1],u=arguments[2]
this.x=l,this.y=h,this.w=u}else if(4===arguments.length){var c=arguments[0],d=arguments[1],f=arguments[2],p=arguments[3],g=c.y-d.y,_=d.x-c.x,m=c.x*d.y-d.x*c.y,y=f.y-p.y,v=p.x-f.x,x=f.x*p.y-p.x*f.y
this.x=_*x-v*m,this.y=y*m-g*x,this.w=g*v-y*_}}
Z.prototype.getY=function(){var t=this.y/this.w
if(v.isNaN(t)||v.isInfinite(t))throw new q
return t},Z.prototype.getX=function(){var t=this.x/this.w
if(v.isNaN(t)||v.isInfinite(t))throw new q
return t},Z.prototype.getCoordinate=function(){var t=new S
return t.x=this.getX(),t.y=this.getY(),t},Z.prototype.interfaces_=function(){return[]},Z.prototype.getClass=function(){return Z},Z.intersection=function(t,e,i,n){var r=t.y-e.y,o=e.x-t.x,s=t.x*e.y-e.x*t.y,a=i.y-n.y,l=n.x-i.x,h=i.x*n.y-n.x*i.y,u=r*l-a*o,c=(o*h-l*s)/u,d=(a*s-r*h)/u
if(v.isNaN(c)||v.isInfinite(c)||v.isNaN(d)||v.isInfinite(d))throw new q
return new S(c,d)}
var W=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init()
else if(1===arguments.length){if(arguments[0]instanceof S){var e=arguments[0]
this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var i=arguments[0]
this.init(i)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1]
this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],l=arguments[3]
this.init(o,s,a,l)}},Y={serialVersionUID:{configurable:!0}}
W.prototype.getArea=function(){return this.getWidth()*this.getHeight()},W.prototype.equals=function(t){if(!(t instanceof W))return!1
var e=t
return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},W.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new W
var e=this._minx>t._minx?this._minx:t._minx,i=this._miny>t._miny?this._miny:t._miny,n=this._maxx<t._maxx?this._maxx:t._maxx,r=this._maxy<t._maxy?this._maxy:t._maxy
return new W(e,n,i,r)},W.prototype.isNull=function(){return this._maxx<this._minx},W.prototype.getMaxX=function(){return this._maxx},W.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof S){var t=arguments[0]
return this.covers(t.x,t.y)}if(arguments[0]instanceof W){var e=arguments[0]
return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var i=arguments[0],n=arguments[1]
return!this.isNull()&&i>=this._minx&&i<=this._maxx&&n>=this._miny&&n<=this._maxy}},W.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof W){var t=arguments[0]
return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof S){var e=arguments[0]
return this.intersects(e.x,e.y)}}else if(2===arguments.length){var i=arguments[0],n=arguments[1]
return!this.isNull()&&!(i>this._maxx||i<this._minx||n>this._maxy||n<this._miny)}},W.prototype.getMinY=function(){return this._miny},W.prototype.getMinX=function(){return this._minx},W.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof S){var t=arguments[0]
this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof W){var e=arguments[0]
if(e.isNull())return null
this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var i=arguments[0],n=arguments[1]
this.isNull()?(this._minx=i,this._maxx=i,this._miny=n,this._maxy=n):(i<this._minx&&(this._minx=i),i>this._maxx&&(this._maxx=i),n<this._miny&&(this._miny=n),n>this._maxy&&(this._maxy=n))}},W.prototype.minExtent=function(){if(this.isNull())return 0
var t=this.getWidth(),e=this.getHeight()
return t<e?t:e},W.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},W.prototype.compareTo=function(t){var e=t
return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},W.prototype.translate=function(t,e){if(this.isNull())return null
this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},W.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},W.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},W.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},W.prototype.maxExtent=function(){if(this.isNull())return 0
var t=this.getWidth(),e=this.getHeight()
return t>e?t:e},W.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0]
this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],i=arguments[1]
if(this.isNull())return null
this._minx-=e,this._maxx+=e,this._miny-=i,this._maxy+=i,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},W.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof W){var t=arguments[0]
return this.covers(t)}if(arguments[0]instanceof S){var e=arguments[0]
return this.covers(e)}}else if(2===arguments.length){var i=arguments[0],n=arguments[1]
return this.covers(i,n)}},W.prototype.centre=function(){return this.isNull()?null:new S((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},W.prototype.init=function(){if(0===arguments.length)this.setToNull()
else if(1===arguments.length){if(arguments[0]instanceof S){var t=arguments[0]
this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof W){var e=arguments[0]
this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var i=arguments[0],n=arguments[1]
this.init(i.x,n.x,i.y,n.y)}else if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3]
r<o?(this._minx=r,this._maxx=o):(this._minx=o,this._maxx=r),s<a?(this._miny=s,this._maxy=a):(this._miny=a,this._maxy=s)}},W.prototype.getMaxY=function(){return this._maxy},W.prototype.distance=function(t){if(this.intersects(t))return 0
var e=0
this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx)
var i=0
return this._maxy<t._miny?i=t._miny-this._maxy:this._miny>t._maxy&&(i=this._miny-t._maxy),0===e?i:0===i?e:Math.sqrt(e*e+i*i)},W.prototype.hashCode=function(){var t=17
return 37*(t=37*(t=37*(t=37*t+S.hashCode(this._minx))+S.hashCode(this._maxx))+S.hashCode(this._miny))+S.hashCode(this._maxy)},W.prototype.interfaces_=function(){return[b,e]},W.prototype.getClass=function(){return W},W.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],i=arguments[2]
return i.x>=(t.x<e.x?t.x:e.x)&&i.x<=(t.x>e.x?t.x:e.x)&&i.y>=(t.y<e.y?t.y:e.y)&&i.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var n=arguments[0],r=arguments[1],o=arguments[2],s=arguments[3],a=Math.min(o.x,s.x),l=Math.max(o.x,s.x),h=Math.min(n.x,r.x),u=Math.max(n.x,r.x)
return!(h>l||u<a||(a=Math.min(o.y,s.y),l=Math.max(o.y,s.y),h=Math.min(n.y,r.y),u=Math.max(n.y,r.y),h>l||u<a))}},Y.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(W,Y)
var X={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},H=function(t){this.geometryFactory=t||new me}
H.prototype.read=function(t){var e,i,n
t=t.replace(/[\n\r]/g," ")
var r=X.typeStr.exec(t)
if(-1!==t.search("EMPTY")&&((r=X.emptyTypeStr.exec(t))[2]=void 0),r&&(i=r[1].toLowerCase(),n=r[2],K[i]&&(e=K[i].apply(this,[n]))),void 0===e)throw new Error("Could not parse WKT "+t)
return e},H.prototype.write=function(t){return this.extractGeometry(t)},H.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase()
if(!$[e])return null
var i=e.toUpperCase()
return t.isEmpty()?i+" EMPTY":i+"("+$[e].apply(this,[t])+")"}
var $={coordinate:function(t){return t.x+" "+t.y},point:function(t){return $.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],i=0,n=t._geometries.length;i<n;++i)e.push("("+$.point.apply(this,[t._geometries[i]])+")")
return e.join(",")},linestring:function(t){for(var e=[],i=0,n=t._points._coordinates.length;i<n;++i)e.push($.coordinate.apply(this,[t._points._coordinates[i]]))
return e.join(",")},linearring:function(t){for(var e=[],i=0,n=t._points._coordinates.length;i<n;++i)e.push($.coordinate.apply(this,[t._points._coordinates[i]]))
return e.join(",")},multilinestring:function(t){for(var e=[],i=0,n=t._geometries.length;i<n;++i)e.push("("+$.linestring.apply(this,[t._geometries[i]])+")")
return e.join(",")},polygon:function(t){var e=[]
e.push("("+$.linestring.apply(this,[t._shell])+")")
for(var i=0,n=t._holes.length;i<n;++i)e.push("("+$.linestring.apply(this,[t._holes[i]])+")")
return e.join(",")},multipolygon:function(t){for(var e=[],i=0,n=t._geometries.length;i<n;++i)e.push("("+$.polygon.apply(this,[t._geometries[i]])+")")
return e.join(",")},geometrycollection:function(t){for(var e=[],i=0,n=t._geometries.length;i<n;++i)e.push(this.extractGeometry(t._geometries[i]))
return e.join(",")}},K={point:function(t){if(void 0===t)return this.geometryFactory.createPoint()
var e=t.trim().split(X.spaces)
return this.geometryFactory.createPoint(new S(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint()
for(var e,i=t.trim().split(","),n=[],r=0,o=i.length;r<o;++r)e=i[r].replace(X.trimParens,"$1"),n.push(K.point.apply(this,[e]))
return this.geometryFactory.createMultiPoint(n)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString()
for(var e,i=t.trim().split(","),n=[],r=0,o=i.length;r<o;++r)e=i[r].trim().split(X.spaces),n.push(new S(Number.parseFloat(e[0]),Number.parseFloat(e[1])))
return this.geometryFactory.createLineString(n)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing()
for(var e,i=t.trim().split(","),n=[],r=0,o=i.length;r<o;++r)e=i[r].trim().split(X.spaces),n.push(new S(Number.parseFloat(e[0]),Number.parseFloat(e[1])))
return this.geometryFactory.createLinearRing(n)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString()
for(var e,i=t.trim().split(X.parenComma),n=[],r=0,o=i.length;r<o;++r)e=i[r].replace(X.trimParens,"$1"),n.push(K.linestring.apply(this,[e]))
return this.geometryFactory.createMultiLineString(n)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon()
for(var e,i,n,r,o=t.trim().split(X.parenComma),s=[],a=0,l=o.length;a<l;++a)e=o[a].replace(X.trimParens,"$1"),i=K.linestring.apply(this,[e]),n=this.geometryFactory.createLinearRing(i._points),0===a?r=n:s.push(n)
return this.geometryFactory.createPolygon(r,s)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon()
for(var e,i=t.trim().split(X.doubleParenComma),n=[],r=0,o=i.length;r<o;++r)e=i[r].replace(X.trimParens,"$1"),n.push(K.polygon.apply(this,[e]))
return this.geometryFactory.createMultiPolygon(n)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection()
for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),i=[],n=0,r=e.length;n<r;++n)i.push(this.read(e[n]))
return this.geometryFactory.createGeometryCollection(i)}},J=function(t){this.parser=new H(t)}
J.prototype.write=function(t){return this.parser.write(t)},J.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented")
return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"}
var Q=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),tt=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this)
else if(1===arguments.length){var e=arguments[0]
t.call(this,e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Q),et=function(){}
et.prototype.interfaces_=function(){return[]},et.prototype.getClass=function(){return et},et.shouldNeverReachHere=function(){if(0===arguments.length)et.shouldNeverReachHere(null)
else if(1===arguments.length){var t=arguments[0]
throw new tt("Should never reach here"+(null!==t?": "+t:""))}},et.isTrue=function(){var t
if(1===arguments.length)et.isTrue(arguments[0],null)
else if(2===arguments.length&&(t=arguments[1],!arguments[0]))throw null===t?new tt:new tt(t)},et.equals=function(){var t,e,i
if(2===arguments.length)et.equals(t=arguments[0],e=arguments[1],null)
else if(3===arguments.length&&(t=arguments[0],i=arguments[2],!(e=arguments[1]).equals(t)))throw new tt("Expected "+t+" but encountered "+e+(null!==i?": "+i:""))}
var it=function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new S,this._intPt[1]=new S,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},nt={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}}
it.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},it.prototype.getTopologySummary=function(){var t=new O
return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},it.prototype.computeIntersection=function(t,e,i,n){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=i,this._inputLines[1][1]=n,this._result=this.computeIntersect(t,e,i,n)},it.prototype.getIntersectionNum=function(){return this._result},it.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1))
else if(1===arguments.length){var t=arguments[0]
this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},it.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},it.prototype.setPrecisionModel=function(t){this._precisionModel=t},it.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1)
if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0
return!1}},it.prototype.getIntersection=function(t){return this._intPt[t]},it.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},it.prototype.hasIntersection=function(){return this._result!==it.NO_INTERSECTION},it.prototype.getEdgeDistance=function(t,e){return it.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},it.prototype.isCollinear=function(){return this._result===it.COLLINEAR_INTERSECTION},it.prototype.toString=function(){return J.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+J.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},it.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},it.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0
return!1},it.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},it.prototype.interfaces_=function(){return[]},it.prototype.getClass=function(){return it},it.computeEdgeDistance=function(t,e,i){var n=Math.abs(i.x-e.x),r=Math.abs(i.y-e.y),o=-1
if(t.equals(e))o=0
else if(t.equals(i))o=n>r?n:r
else{var s=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y)
0!==(o=n>r?s:a)||t.equals(e)||(o=Math.max(s,a))}return et.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},it.nonRobustComputeEdgeDistance=function(t,e,i){var n=t.x-e.x,r=t.y-e.y,o=Math.sqrt(n*n+r*r)
return et.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},nt.DONT_INTERSECT.get=function(){return 0},nt.DO_INTERSECT.get=function(){return 1},nt.COLLINEAR.get=function(){return 2},nt.NO_INTERSECTION.get=function(){return 0},nt.POINT_INTERSECTION.get=function(){return 1},nt.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(it,nt)
var rt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new W(this._inputLines[0][0],this._inputLines[0][1]),i=new W(this._inputLines[1][0],this._inputLines[1][1])
return e.contains(t)&&i.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments)
var e=arguments[0],i=arguments[1],n=arguments[2]
if(this._isProper=!1,W.intersects(i,n,e)&&0===at.orientationIndex(i,n,e)&&0===at.orientationIndex(n,i,e))return this._isProper=!0,(e.equals(i)||e.equals(n))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null
this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,i,n,r){r.x=this.smallestInAbsValue(t.x,e.x,i.x,n.x),r.y=this.smallestInAbsValue(t.y,e.y,i.y,n.y),t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,i.x-=r.x,i.y-=r.y,n.x-=r.x,n.y-=r.y},e.prototype.safeHCoordinateIntersection=function(t,i,n,r){var o=null
try{o=Z.intersection(t,i,n,r)}catch(s){if(!(s instanceof q))throw s
o=e.nearestEndpoint(t,i,n,r)}return o},e.prototype.intersection=function(t,i,n,r){var o=this.intersectionWithNormalization(t,i,n,r)
return this.isInSegmentEnvelopes(o)||(o=new S(e.nearestEndpoint(t,i,n,r))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,i,n){var r=t,o=Math.abs(r)
return Math.abs(e)<o&&(r=e,o=Math.abs(e)),Math.abs(i)<o&&(r=i,o=Math.abs(i)),Math.abs(n)<o&&(r=n),r},e.prototype.checkDD=function(t,e,i,n,r){var o=z.intersection(t,e,i,n),s=this.isInSegmentEnvelopes(o)
V.out.println("DD in env = "+s+"  --------------------- "+o),r.distance(o)>1e-4&&V.out.println("Distance = "+r.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,i,n){var r=new S(t),o=new S(e),s=new S(i),a=new S(n),l=new S
this.normalizeToEnvCentre(r,o,s,a,l)
var h=this.safeHCoordinateIntersection(r,o,s,a)
return h.x+=l.x,h.y+=l.y,h},e.prototype.computeCollinearIntersection=function(e,i,n,r){var o=W.intersects(e,i,n),s=W.intersects(e,i,r),a=W.intersects(n,r,e),l=W.intersects(n,r,i)
return o&&s?(this._intPt[0]=n,this._intPt[1]=r,t.COLLINEAR_INTERSECTION):a&&l?(this._intPt[0]=e,this._intPt[1]=i,t.COLLINEAR_INTERSECTION):o&&a?(this._intPt[0]=n,this._intPt[1]=e,!n.equals(e)||s||l?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&l?(this._intPt[0]=n,this._intPt[1]=i,!n.equals(i)||s||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&a?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||o||l?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&l?(this._intPt[0]=r,this._intPt[1]=i,!r.equals(i)||o||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,i,n,r){var o=t.x<e.x?t.x:e.x,s=t.y<e.y?t.y:e.y,a=t.x>e.x?t.x:e.x,l=t.y>e.y?t.y:e.y,h=i.x<n.x?i.x:n.x,u=i.y<n.y?i.y:n.y,c=i.x>n.x?i.x:n.x,d=i.y>n.y?i.y:n.y,f=((o>h?o:h)+(a<c?a:c))/2,p=((s>u?s:u)+(l<d?l:d))/2
r.x=f,r.y=p,t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,i.x-=r.x,i.y-=r.y,n.x-=r.x,n.y-=r.y},e.prototype.computeIntersect=function(e,i,n,r){if(this._isProper=!1,!W.intersects(e,i,n,r))return t.NO_INTERSECTION
var o=at.orientationIndex(e,i,n),s=at.orientationIndex(e,i,r)
if(o>0&&s>0||o<0&&s<0)return t.NO_INTERSECTION
var a=at.orientationIndex(n,r,e),l=at.orientationIndex(n,r,i)
return a>0&&l>0||a<0&&l<0?t.NO_INTERSECTION:0===o&&0===s&&0===a&&0===l?this.computeCollinearIntersection(e,i,n,r):(0===o||0===s||0===a||0===l?(this._isProper=!1,e.equals2D(n)||e.equals2D(r)?this._intPt[0]=e:i.equals2D(n)||i.equals2D(r)?this._intPt[0]=i:0===o?this._intPt[0]=new S(n):0===s?this._intPt[0]=new S(r):0===a?this._intPt[0]=new S(e):0===l&&(this._intPt[0]=new S(i))):(this._isProper=!0,this._intPt[0]=this.intersection(e,i,n,r)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,i,n){var r=t,o=at.distancePointLine(t,i,n),s=at.distancePointLine(e,i,n)
return s<o&&(o=s,r=e),(s=at.distancePointLine(i,t,e))<o&&(o=s,r=i),(s=at.distancePointLine(n,t,e))<o&&(o=s,r=n),r},e}(it),ot=function(){}
ot.prototype.interfaces_=function(){return[]},ot.prototype.getClass=function(){return ot},ot.orientationIndex=function(t,e,i){var n=e.x-t.x,r=e.y-t.y,o=i.x-e.x,s=i.y-e.y
return ot.signOfDet2x2(n,r,o,s)},ot.signOfDet2x2=function(t,e,i,n){var r=null,o=null,s=null
if(r=1,0===t||0===n)return 0===e||0===i?0:e>0?i>0?-r:r:i>0?r:-r
if(0===e||0===i)return n>0?t>0?r:-r:t>0?-r:r
if(e>0?n>0?e<=n||(r=-r,o=t,t=i,i=o,o=e,e=n,n=o):e<=-n?(r=-r,i=-i,n=-n):(o=t,t=-i,i=o,o=e,e=-n,n=o):n>0?-e<=n?(r=-r,t=-t,e=-e):(o=-t,t=i,i=o,o=-e,e=n,n=o):e>=n?(t=-t,e=-e,i=-i,n=-n):(r=-r,o=-t,t=-i,i=o,o=-e,e=-n,n=o),t>0){if(!(i>0))return r
if(!(t<=i))return r}else{if(i>0)return-r
if(!(t>=i))return-r
r=-r,t=-t,i=-i}for(;;){if((n-=(s=Math.floor(i/t))*e)<0)return-r
if(n>e)return r
if(t>(i-=s*t)+i){if(e<n+n)return r}else{if(e>n+n)return-r
i=t-i,n=e-n,r=-r}if(0===n)return 0===i?0:-r
if(0===i)return r
if((e-=(s=Math.floor(t/i))*n)<0)return r
if(e>n)return-r
if(i>(t-=s*i)+t){if(n<e+e)return-r}else{if(n>e+e)return r
t=i-t,e=n-e,r=-r}if(0===e)return 0===t?0:r
if(0===t)return-r}}
var st=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1
var t=arguments[0]
this._p=t}
st.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null
if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null
if(t.y===this._p.y&&e.y===this._p.y){var i=t.x,n=e.x
return i>n&&(i=e.x,n=t.x),this._p.x>=i&&this._p.x<=n&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var r=t.x-this._p.x,o=t.y-this._p.y,s=e.x-this._p.x,a=e.y-this._p.y,l=ot.signOfDet2x2(r,o,s,a)
if(0===l)return this._isPointOnSegment=!0,null
a<o&&(l=-l),l>0&&this._crossingCount++}},st.prototype.isPointInPolygon=function(){return this.getLocation()!==I.EXTERIOR},st.prototype.getLocation=function(){return this._isPointOnSegment?I.BOUNDARY:this._crossingCount%2==1?I.INTERIOR:I.EXTERIOR},st.prototype.isOnSegment=function(){return this._isPointOnSegment},st.prototype.interfaces_=function(){return[]},st.prototype.getClass=function(){return st},st.locatePointInRing=function(){if(arguments[0]instanceof S&&A(arguments[1],G)){for(var t=arguments[1],e=new st(arguments[0]),i=new S,n=new S,r=1;r<t.size();r++)if(t.getCoordinate(r,i),t.getCoordinate(r-1,n),e.countSegment(i,n),e.isOnSegment())return e.getLocation()
return e.getLocation()}if(arguments[0]instanceof S&&arguments[1]instanceof Array){for(var o=arguments[1],s=new st(arguments[0]),a=1;a<o.length;a++){var l=o[a],h=o[a-1]
if(s.countSegment(l,h),s.isOnSegment())return s.getLocation()}return s.getLocation()}}
var at=function(){},lt={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}}
at.prototype.interfaces_=function(){return[]},at.prototype.getClass=function(){return at},at.orientationIndex=function(t,e,i){return z.orientationIndex(t,e,i)},at.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0]
if(t.length<3)return 0
for(var e=0,i=t[0].x,n=1;n<t.length-1;n++){var r=t[n].x-i,o=t[n+1].y
e+=r*(t[n-1].y-o)}return e/2}if(A(arguments[0],G)){var s=arguments[0],a=s.size()
if(a<3)return 0
var l=new S,h=new S,u=new S
s.getCoordinate(0,h),s.getCoordinate(1,u)
var c=h.x
u.x-=c
for(var d=0,f=1;f<a-1;f++)l.y=h.y,h.x=u.x,h.y=u.y,s.getCoordinate(f+1,u),u.x-=c,d+=h.x*(l.y-u.y)
return d/2}},at.distanceLineLine=function(t,e,i,n){if(t.equals(e))return at.distancePointLine(t,i,n)
if(i.equals(n))return at.distancePointLine(n,t,e)
var r=!1
if(W.intersects(t,e,i,n)){var o=(e.x-t.x)*(n.y-i.y)-(e.y-t.y)*(n.x-i.x)
if(0===o)r=!0
else{var s=(t.y-i.y)*(n.x-i.x)-(t.x-i.x)*(n.y-i.y),a=((t.y-i.y)*(e.x-t.x)-(t.x-i.x)*(e.y-t.y))/o,l=s/o;(l<0||l>1||a<0||a>1)&&(r=!0)}}else r=!0
return r?R.min(at.distancePointLine(t,i,n),at.distancePointLine(e,i,n),at.distancePointLine(i,t,e),at.distancePointLine(n,t,e)):0},at.isPointInRing=function(t,e){return at.locatePointInRing(t,e)!==I.EXTERIOR},at.computeLength=function(t){var e=t.size()
if(e<=1)return 0
var i=0,n=new S
t.getCoordinate(0,n)
for(var r=n.x,o=n.y,s=1;s<e;s++){t.getCoordinate(s,n)
var a=n.x,l=n.y,h=a-r,u=l-o
i+=Math.sqrt(h*h+u*u),r=a,o=l}return i},at.isCCW=function(t){var e=t.length-1
if(e<3)throw new y("Ring has fewer than 4 points, so orientation cannot be determined")
for(var i=t[0],n=0,r=1;r<=e;r++){var o=t[r]
o.y>i.y&&(i=o,n=r)}var s=n
do{(s-=1)<0&&(s=e)}while(t[s].equals2D(i)&&s!==n)
var a=n
do{a=(a+1)%e}while(t[a].equals2D(i)&&a!==n)
var l=t[s],h=t[a]
if(l.equals2D(i)||h.equals2D(i)||l.equals2D(h))return!1
var u=at.computeOrientation(l,i,h)
return 0===u?l.x>h.x:u>0},at.locatePointInRing=function(t,e){return st.locatePointInRing(t,e)},at.distancePointLinePerpendicular=function(t,e,i){var n=(i.x-e.x)*(i.x-e.x)+(i.y-e.y)*(i.y-e.y),r=((e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y))/n
return Math.abs(r)*Math.sqrt(n)},at.computeOrientation=function(t,e,i){return at.orientationIndex(t,e,i)},at.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1]
if(0===e.length)throw new y("Line array must contain at least one vertex")
for(var i=t.distance(e[0]),n=0;n<e.length-1;n++){var r=at.distancePointLine(t,e[n],e[n+1])
r<i&&(i=r)}return i}if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2]
if(s.x===a.x&&s.y===a.y)return o.distance(s)
var l=(a.x-s.x)*(a.x-s.x)+(a.y-s.y)*(a.y-s.y),h=((o.x-s.x)*(a.x-s.x)+(o.y-s.y)*(a.y-s.y))/l
if(h<=0)return o.distance(s)
if(h>=1)return o.distance(a)
var u=((s.y-o.y)*(a.x-s.x)-(s.x-o.x)*(a.y-s.y))/l
return Math.abs(u)*Math.sqrt(l)}},at.isOnLine=function(t,e){for(var i=new rt,n=1;n<e.length;n++){var r=e[n-1],o=e[n]
if(i.computeIntersection(t,r,o),i.hasIntersection())return!0}return!1},lt.CLOCKWISE.get=function(){return-1},lt.RIGHT.get=function(){return at.CLOCKWISE},lt.COUNTERCLOCKWISE.get=function(){return 1},lt.LEFT.get=function(){return at.COUNTERCLOCKWISE},lt.COLLINEAR.get=function(){return 0},lt.STRAIGHT.get=function(){return at.COLLINEAR},Object.defineProperties(at,lt)
var ht=function(){}
ht.prototype.filter=function(t){},ht.prototype.interfaces_=function(){return[]},ht.prototype.getClass=function(){return ht}
var ut=function(){var t=arguments[0]
this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},ct={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}}
ut.prototype.isGeometryCollection=function(){return this.getSortIndex()===ut.SORTINDEX_GEOMETRYCOLLECTION},ut.prototype.getFactory=function(){return this._factory},ut.prototype.getGeometryN=function(t){return this},ut.prototype.getArea=function(){return 0},ut.prototype.isRectangle=function(){return!1},ut.prototype.equals=function(){if(arguments[0]instanceof ut){var t=arguments[0]
return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0]
if(!(e instanceof ut))return!1
var i=e
return this.equalsExact(i)}},ut.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},ut.prototype.geometryChanged=function(){this.apply(ut.geometryChangedFilter)},ut.prototype.geometryChangedAction=function(){this._envelope=null},ut.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},ut.prototype.getLength=function(){return 0},ut.prototype.getNumGeometries=function(){return 1},ut.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t
return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var i=arguments[0],n=arguments[1]
return this.getSortIndex()!==i.getSortIndex()?this.getSortIndex()-i.getSortIndex():this.isEmpty()&&i.isEmpty()?0:this.isEmpty()?-1:i.isEmpty()?1:this.compareToSameClass(i,n)}},ut.prototype.getUserData=function(){return this._userData},ut.prototype.getSRID=function(){return this._SRID},ut.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},ut.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===ut.SORTINDEX_GEOMETRYCOLLECTION)throw new y("This method does not support GeometryCollection arguments")},ut.prototype.equal=function(t,e,i){return 0===i?t.equals(e):t.distance(e)<=i},ut.prototype.norm=function(){var t=this.copy()
return t.normalize(),t},ut.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},ut.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new W(this._envelope)},ut.prototype.setSRID=function(t){this._SRID=t},ut.prototype.setUserData=function(t){this._userData=t},ut.prototype.compare=function(t,e){for(var i=t.iterator(),n=e.iterator();i.hasNext()&&n.hasNext();){var r=i.next(),o=n.next(),s=r.compareTo(o)
if(0!==s)return s}return i.hasNext()?1:n.hasNext()?-1:0},ut.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},ut.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===ut.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===ut.SORTINDEX_MULTIPOINT||this.getSortIndex()===ut.SORTINDEX_MULTILINESTRING||this.getSortIndex()===ut.SORTINDEX_MULTIPOLYGON},ut.prototype.interfaces_=function(){return[w,b,e]},ut.prototype.getClass=function(){return ut},ut.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0
return!1},ut.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0
return!1},ct.serialVersionUID.get=function(){return 0x799ea46522854c00},ct.SORTINDEX_POINT.get=function(){return 0},ct.SORTINDEX_MULTIPOINT.get=function(){return 1},ct.SORTINDEX_LINESTRING.get=function(){return 2},ct.SORTINDEX_LINEARRING.get=function(){return 3},ct.SORTINDEX_MULTILINESTRING.get=function(){return 4},ct.SORTINDEX_POLYGON.get=function(){return 5},ct.SORTINDEX_MULTIPOLYGON.get=function(){return 6},ct.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},ct.geometryChangedFilter.get=function(){return dt},Object.defineProperties(ut,ct)
var dt=function(){}
dt.interfaces_=function(){return[ht]},dt.filter=function(t){t.geometryChangedAction()}
var ft=function(){}
ft.prototype.filter=function(t){},ft.prototype.interfaces_=function(){return[]},ft.prototype.getClass=function(){return ft}
var pt=function(){},gt={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}}
pt.prototype.isInBoundary=function(t){},pt.prototype.interfaces_=function(){return[]},pt.prototype.getClass=function(){return pt},gt.Mod2BoundaryNodeRule.get=function(){return _t},gt.EndPointBoundaryNodeRule.get=function(){return mt},gt.MultiValentEndPointBoundaryNodeRule.get=function(){return yt},gt.MonoValentEndPointBoundaryNodeRule.get=function(){return vt},gt.MOD2_BOUNDARY_RULE.get=function(){return new _t},gt.ENDPOINT_BOUNDARY_RULE.get=function(){return new mt},gt.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new yt},gt.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new vt},gt.OGC_SFS_BOUNDARY_RULE.get=function(){return pt.MOD2_BOUNDARY_RULE},Object.defineProperties(pt,gt)
var _t=function(){}
_t.prototype.isInBoundary=function(t){return t%2==1},_t.prototype.interfaces_=function(){return[pt]},_t.prototype.getClass=function(){return _t}
var mt=function(){}
mt.prototype.isInBoundary=function(t){return t>0},mt.prototype.interfaces_=function(){return[pt]},mt.prototype.getClass=function(){return mt}
var yt=function(){}
yt.prototype.isInBoundary=function(t){return t>1},yt.prototype.interfaces_=function(){return[pt]},yt.prototype.getClass=function(){return yt}
var vt=function(){}
vt.prototype.isInBoundary=function(t){return 1===t},vt.prototype.interfaces_=function(){return[pt]},vt.prototype.getClass=function(){return vt}
var xt=function(){}
xt.prototype.add=function(){},xt.prototype.addAll=function(){},xt.prototype.isEmpty=function(){},xt.prototype.iterator=function(){},xt.prototype.size=function(){},xt.prototype.toArray=function(){},xt.prototype.remove=function(){},(i.prototype=new Error).name="IndexOutOfBoundsException"
var bt=function(){}
bt.prototype.hasNext=function(){},bt.prototype.next=function(){},bt.prototype.remove=function(){}
var wt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(xt);(n.prototype=new Error).name="NoSuchElementException"
var Et=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof xt&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,xt]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())
return!0},e.prototype.set=function(t,e){var i=this.array_[t]
return this.array_[t]=e,i},e.prototype.iterator=function(){return new St(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new i
return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,i=this.array_.length;e<i;e++)t.push(this.array_[e])
return t},e.prototype.remove=function(t){for(var e=!1,i=0,n=this.array_.length;i<n;i++)if(this.array_[i]===t){this.array_.splice(i,1),e=!0
break}return e},e}(wt),St=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new n
return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(bt),Ct=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0]
this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var i=arguments[0],n=arguments[1]
this.ensureCapacity(i.length),this.add(i,n)}}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e
var i={coordArrayType:{configurable:!0}}
return i.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){if(2===arguments.length){for(var e=arguments[1],i=!1,n=arguments[0].iterator();n.hasNext();)this.add(n.next(),e),i=!0
return i}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),i=0;i<this.size();i++)e.add(i,this.get(i).copy())
return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){if(1===arguments.length){var e=arguments[0]
t.prototype.add.call(this,e)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var i=arguments[0],n=arguments[1]
return this.add(i,n,!0),!0}if(arguments[0]instanceof S&&"boolean"==typeof arguments[1]){var r=arguments[0]
if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(r))return null
t.prototype.add.call(this,r)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var o=arguments[0],s=arguments[1]
return this.add(o,s),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var a=arguments[0],l=arguments[1]
if(arguments[2])for(var h=0;h<a.length;h++)this.add(a[h],l)
else for(var u=a.length-1;u>=0;u--)this.add(a[u],l)
return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof S){var c=arguments[0],d=arguments[1]
if(!arguments[2]){var f=this.size()
if(f>0){if(c>0&&this.get(c-1).equals2D(d))return null
if(c<f&&this.get(c).equals2D(d))return null}}t.prototype.add.call(this,c,d)}}else if(4===arguments.length){var p=arguments[0],g=arguments[1],_=arguments[2],m=arguments[3],y=1
_>m&&(y=-1)
for(var v=_;v!==m;v+=y)this.add(p[v],g)
return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new S(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,i),e}(Et),Pt=function(){},Tt={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}}
Tt.ForwardComparator.get=function(){return It},Tt.BidirectionalComparator.get=function(){return Mt},Tt.coordArrayType.get=function(){return new Array(0).fill(null)},Pt.prototype.interfaces_=function(){return[]},Pt.prototype.getClass=function(){return Pt},Pt.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},Pt.ptNotInList=function(t,e){for(var i=0;i<t.length;i++){var n=t[i]
if(Pt.indexOf(n,e)<0)return n}return null},Pt.scroll=function(t,e){var i=Pt.indexOf(e,t)
if(i<0)return null
var n=new Array(t.length).fill(null)
V.arraycopy(t,i,n,0,t.length-i),V.arraycopy(t,0,n,t.length-i,i),V.arraycopy(n,0,t,0,t.length)},Pt.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1]
if(t===e)return!0
if(null===t||null===e)return!1
if(t.length!==e.length)return!1
for(var i=0;i<t.length;i++)if(!t[i].equals(e[i]))return!1
return!0}if(3===arguments.length){var n=arguments[0],r=arguments[1],o=arguments[2]
if(n===r)return!0
if(null===n||null===r)return!1
if(n.length!==r.length)return!1
for(var s=0;s<n.length;s++)if(0!==o.compare(n[s],r[s]))return!1
return!0}},Pt.intersection=function(t,e){for(var i=new Ct,n=0;n<t.length;n++)e.intersects(t[n])&&i.add(t[n],!0)
return i.toCoordinateArray()},Pt.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0
return!1},Pt.removeRepeatedPoints=function(t){return Pt.hasRepeatedPoints(t)?new Ct(t,!1).toCoordinateArray():t},Pt.reverse=function(t){for(var e=t.length-1,i=Math.trunc(e/2),n=0;n<=i;n++){var r=t[n]
t[n]=t[e-n],t[e-n]=r}},Pt.removeNull=function(t){for(var e=0,i=0;i<t.length;i++)null!==t[i]&&e++
var n=new Array(e).fill(null)
if(0===e)return n
for(var r=0,o=0;o<t.length;o++)null!==t[o]&&(n[r++]=t[o])
return n},Pt.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),i=0;i<t.length;i++)e[i]=new S(t[i])
return e}if(5===arguments.length)for(var n=arguments[0],r=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4],l=0;l<a;l++)o[s+l]=new S(n[r+l])},Pt.isEqualReversed=function(t,e){for(var i=0;i<t.length;i++){var n=t[i],r=e[t.length-i-1]
if(0!==n.compareTo(r))return!1}return!0},Pt.envelope=function(t){for(var e=new W,i=0;i<t.length;i++)e.expandToInclude(t[i])
return e},Pt.toCoordinateArray=function(t){return t.toArray(Pt.coordArrayType)},Pt.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},Pt.indexOf=function(t,e){for(var i=0;i<e.length;i++)if(t.equals(e[i]))return i
return-1},Pt.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var i=t.length-1-e,n=t[e].compareTo(t[i])
if(0!==n)return n}return 1},Pt.compare=function(t,e){for(var i=0;i<t.length&&i<e.length;){var n=t[i].compareTo(e[i])
if(0!==n)return n
i++}return i<e.length?-1:i<t.length?1:0},Pt.minCoordinate=function(t){for(var e=null,i=0;i<t.length;i++)(null===e||e.compareTo(t[i])>0)&&(e=t[i])
return e},Pt.extract=function(t,e,i){e=R.clamp(e,0,t.length)
var n=(i=R.clamp(i,-1,t.length))-e+1
i<0&&(n=0),e>=t.length&&(n=0),i<e&&(n=0)
var r=new Array(n).fill(null)
if(0===n)return r
for(var o=0,s=e;s<=i;s++)r[o++]=t[s]
return r},Object.defineProperties(Pt,Tt)
var It=function(){}
It.prototype.compare=function(t,e){return Pt.compare(t,e)},It.prototype.interfaces_=function(){return[E]},It.prototype.getClass=function(){return It}
var Mt=function(){}
Mt.prototype.compare=function(t,e){var i=t,n=e
if(i.length<n.length)return-1
if(i.length>n.length)return 1
if(0===i.length)return 0
var r=Pt.compare(i,n)
return Pt.isEqualReversed(i,n)?0:r},Mt.prototype.OLDcompare=function(t,e){var i=t,n=e
if(i.length<n.length)return-1
if(i.length>n.length)return 1
if(0===i.length)return 0
for(var r=Pt.increasingDirection(i),o=Pt.increasingDirection(n),s=r>0?0:i.length-1,a=o>0?0:i.length-1,l=0;l<i.length;l++){var h=i[s].compareTo(n[a])
if(0!==h)return h
s+=r,a+=o}return 0},Mt.prototype.interfaces_=function(){return[E]},Mt.prototype.getClass=function(){return Mt}
var At=function(){}
At.prototype.get=function(){},At.prototype.put=function(){},At.prototype.size=function(){},At.prototype.values=function(){},At.prototype.entrySet=function(){}
var Rt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(At);(r.prototype=new Error).name="OperationNotSupported",(o.prototype=new xt).contains=function(){}
var Lt=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof xt&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,i=this.array_.length;e<i;e++)if(this.array_[e]===t)return!0
return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())
return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,i=this.array_.length;e<i;e++)t.push(this.array_[e])
return t},e.prototype.iterator=function(){return new Ot(this)},e}(o),Ot=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new n
return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new r},e}(bt),Dt=0;(c.prototype=new Rt).get=function(t){for(var e=this.root_;null!==e;){var i=t.compareTo(e.key)
if(i<0)e=e.left
else{if(!(i>0))return e.value
e=e.right}}return null},c.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:Dt,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null
var i,n,r=this.root_
do{if(i=r,(n=t.compareTo(r.key))<0)r=r.left
else{if(!(n>0)){var o=r.value
return r.value=e,o}r=r.right}}while(null!==r)
var s={key:t,left:null,right:null,value:e,parent:i,color:Dt,getValue:function(){return this.value},getKey:function(){return this.key}}
return n<0?i.left=s:i.right=s,this.fixAfterInsertion(s),this.size_++,null},c.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(a(t)===h(a(a(t)))){var e=u(a(a(t)))
1===s(e)?(l(a(t),Dt),l(e,Dt),l(a(a(t)),1),t=a(a(t))):(t===u(a(t))&&(t=a(t),this.rotateLeft(t)),l(a(t),Dt),l(a(a(t)),1),this.rotateRight(a(a(t))))}else{var i=h(a(a(t)))
1===s(i)?(l(a(t),Dt),l(i,Dt),l(a(a(t)),1),t=a(a(t))):(t===h(a(t))&&(t=a(t),this.rotateRight(t)),l(a(t),Dt),l(a(a(t)),1),this.rotateLeft(a(a(t))))}this.root_.color=Dt},c.prototype.values=function(){var t=new Et,e=this.getFirstEntry()
if(null!==e)for(t.add(e.value);null!==(e=c.successor(e));)t.add(e.value)
return t},c.prototype.entrySet=function(){var t=new Lt,e=this.getFirstEntry()
if(null!==e)for(t.add(e);null!==(e=c.successor(e));)t.add(e)
return t},c.prototype.rotateLeft=function(t){if(null!=t){var e=t.right
t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},c.prototype.rotateRight=function(t){if(null!=t){var e=t.left
t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},c.prototype.getFirstEntry=function(){var t=this.root_
if(null!=t)for(;null!=t.left;)t=t.left
return t},c.successor=function(t){if(null===t)return null
if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left
return e}for(var i=t.parent,n=t;null!==i&&n===i.right;)n=i,i=i.parent
return i},c.prototype.size=function(){return this.size_}
var Nt=function(){}
Nt.prototype.interfaces_=function(){return[]},Nt.prototype.getClass=function(){return Nt},d.prototype=new o,(f.prototype=new d).contains=function(t){for(var e=0,i=this.array_.length;e<i;e++)if(0===this.array_[e].compareTo(t))return!0
return!1},f.prototype.add=function(t){if(this.contains(t))return!1
for(var e=0,i=this.array_.length;e<i;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0
return this.array_.push(t),!0},f.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())
return!0},f.prototype.remove=function(t){throw new r},f.prototype.size=function(){return this.array_.length},f.prototype.isEmpty=function(){return 0===this.array_.length},f.prototype.toArray=function(){for(var t=[],e=0,i=this.array_.length;e<i;e++)t.push(this.array_[e])
return t},f.prototype.iterator=function(){return new Ft(this)}
var Ft=function(t){this.treeSet_=t,this.position_=0}
Ft.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new n
return this.treeSet_.array_[this.position_++]},Ft.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Ft.prototype.remove=function(){throw new r}
var kt=function(){}
kt.sort=function(){var t,e,i,n,r=arguments[0]
if(1===arguments.length)n=function(t,e){return t.compareTo(e)},r.sort(n)
else if(2===arguments.length)i=arguments[1],n=function(t,e){return i.compare(t,e)},r.sort(n)
else if(3===arguments.length){(e=r.slice(arguments[1],arguments[2])).sort()
var o=r.slice(0,arguments[1]).concat(e,r.slice(arguments[2],r.length))
for(r.splice(0,r.length),t=0;t<o.length;t++)r.push(o[t])}else if(4===arguments.length)for(e=r.slice(arguments[1],arguments[2]),i=arguments[3],n=function(t,e){return i.compare(t,e)},e.sort(n),o=r.slice(0,arguments[1]).concat(e,r.slice(arguments[2],r.length)),r.splice(0,r.length),t=0;t<o.length;t++)r.push(o[t])},kt.asList=function(t){for(var e=new Et,i=0,n=t.length;i<n;i++)e.add(t[i])
return e}
var zt=function(){},jt={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}}
jt.P.get=function(){return 0},jt.L.get=function(){return 1},jt.A.get=function(){return 2},jt.FALSE.get=function(){return-1},jt.TRUE.get=function(){return-2},jt.DONTCARE.get=function(){return-3},jt.SYM_FALSE.get=function(){return"F"},jt.SYM_TRUE.get=function(){return"T"},jt.SYM_DONTCARE.get=function(){return"*"},jt.SYM_P.get=function(){return"0"},jt.SYM_L.get=function(){return"1"},jt.SYM_A.get=function(){return"2"},zt.prototype.interfaces_=function(){return[]},zt.prototype.getClass=function(){return zt},zt.toDimensionSymbol=function(t){switch(t){case zt.FALSE:return zt.SYM_FALSE
case zt.TRUE:return zt.SYM_TRUE
case zt.DONTCARE:return zt.SYM_DONTCARE
case zt.P:return zt.SYM_P
case zt.L:return zt.SYM_L
case zt.A:return zt.SYM_A}throw new y("Unknown dimension value: "+t)},zt.toDimensionValue=function(t){switch(N.toUpperCase(t)){case zt.SYM_FALSE:return zt.FALSE
case zt.SYM_TRUE:return zt.TRUE
case zt.SYM_DONTCARE:return zt.DONTCARE
case zt.SYM_P:return zt.P
case zt.SYM_L:return zt.L
case zt.SYM_A:return zt.A}throw new y("Unknown dimension symbol: "+t)},Object.defineProperties(zt,jt)
var Gt=function(){}
Gt.prototype.filter=function(t){},Gt.prototype.interfaces_=function(){return[]},Gt.prototype.getClass=function(){return Gt}
var Bt=function(){}
Bt.prototype.filter=function(t,e){},Bt.prototype.isDone=function(){},Bt.prototype.isGeometryChanged=function(){},Bt.prototype.interfaces_=function(){return[]},Bt.prototype.getClass=function(){return Bt}
var Ut=function(t){function e(e,i){if(t.call(this,i),this._geometries=e||[],t.hasNullElements(this._geometries))throw new y("geometries must not contain null elements")}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e
var i={serialVersionUID:{configurable:!0}}
return e.prototype.computeEnvelopeInternal=function(){for(var t=new W,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal())
return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,i=0;i<this._geometries.length;i++)for(var n=this._geometries[i].getCoordinates(),r=0;r<n.length;r++)t[++e]=n[r]
return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea()
return t},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],i=arguments[1]
if(!this.isEquivalentClass(e))return!1
var n=e
if(this._geometries.length!==n._geometries.length)return!1
for(var r=0;r<this._geometries.length;r++)if(!this._geometries[r].equalsExact(n._geometries[r],i))return!1
return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize()
kt.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=zt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension())
return t},e.prototype.getDimension=function(){for(var t=zt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension())
return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength()
return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints()
return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),i=0;i<this._geometries.length;i++)e[i]=this._geometries[i].reverse()
return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=new f(kt.asList(this._geometries)),i=new f(kt.asList(t._geometries))
return this.compare(e,i)}if(2===arguments.length){for(var n=arguments[1],r=arguments[0],o=this.getNumGeometries(),s=r.getNumGeometries(),a=0;a<o&&a<s;){var l=this.getGeometryN(a),h=r.getGeometryN(a),u=l.compareToSameClass(h,n)
if(0!==u)return u
a++}return a<o?1:a<s?-1:0}},e.prototype.apply=function(){if(A(arguments[0],ft))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t)
else if(A(arguments[0],Bt)){var i=arguments[0]
if(0===this._geometries.length)return null
for(var n=0;n<this._geometries.length&&(this._geometries[n].apply(i),!i.isDone());n++);i.isGeometryChanged()&&this.geometryChanged()}else if(A(arguments[0],Gt)){var r=arguments[0]
r.filter(this)
for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(r)}else if(A(arguments[0],ht)){var s=arguments[0]
s.filter(this)
for(var a=0;a<this._geometries.length;a++)this._geometries[a].apply(s)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),et.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this)
e._geometries=new Array(this._geometries.length).fill(null)
for(var i=0;i<this._geometries.length;i++)e._geometries[i]=this._geometries[i].clone()
return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),i=0;i<t.length;i++)t[i]=this._geometries[i].copy()
return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1
return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},i.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,i),e}(ut),qt=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e
var i={serialVersionUID:{configurable:!0}}
return e.prototype.getSortIndex=function(){return ut.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],i=arguments[1]
return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,i)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?zt.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1
for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1
return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),i=0;i<this._geometries.length;i++)e[t-1-i]=this._geometries[i].reverse()
return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new Vt(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),i=0;i<t.length;i++)t[i]=this._geometries[i].copy()
return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Nt]},e.prototype.getClass=function(){return e},i.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,i),e}(Ut),Vt=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=pt.MOD2_BOUNDARY_RULE
this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var i=arguments[0],n=arguments[1]
this._geom=i,this._geomFact=i.getFactory(),this._bnRule=n}}
Vt.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint()
var e=this.computeBoundaryCoordinates(t)
return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},Vt.prototype.getBoundary=function(){return this._geom instanceof Ht?this.boundaryLineString(this._geom):this._geom instanceof qt?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},Vt.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},Vt.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},Vt.prototype.computeBoundaryCoordinates=function(t){var e=new Et
this._endpointMap=new c
for(var i=0;i<t.getNumGeometries();i++){var n=t.getGeometryN(i)
0!==n.getNumPoints()&&(this.addEndpoint(n.getCoordinateN(0)),this.addEndpoint(n.getCoordinateN(n.getNumPoints()-1)))}for(var r=this._endpointMap.entrySet().iterator();r.hasNext();){var o=r.next(),s=o.getValue().count
this._bnRule.isInBoundary(s)&&e.add(o.getKey())}return Pt.toCoordinateArray(e)},Vt.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t)
null===e&&(e=new Zt,this._endpointMap.put(t,e)),e.count++},Vt.prototype.interfaces_=function(){return[]},Vt.prototype.getClass=function(){return Vt},Vt.getBoundary=function(){return 1===arguments.length?new Vt(arguments[0]).getBoundary():2===arguments.length?new Vt(arguments[0],arguments[1]).getBoundary():void 0}
var Zt=function(){this.count=null}
Zt.prototype.interfaces_=function(){return[]},Zt.prototype.getClass=function(){return Zt}
var Wt=function(){},Yt={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}}
Wt.prototype.interfaces_=function(){return[]},Wt.prototype.getClass=function(){return Wt},Wt.chars=function(t,e){for(var i=new Array(e).fill(null),n=0;n<e;n++)i[n]=t
return String(i)},Wt.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new function(){},i=new function(){}(e)
return t.printStackTrace(i),e.toString()}if(2===arguments.length){for(var n=arguments[1],r="",o=new function(){}(new function(){}(Wt.getStackTrace(arguments[0]))),s=0;s<n;s++)try{r+=o.readLine()+Wt.NEWLINE}catch(t){if(!(t instanceof p))throw t
et.shouldNeverReachHere()}return r}},Wt.split=function(t,e){for(var i=e.length,n=new Et,r=""+t,o=r.indexOf(e);o>=0;){var s=r.substring(0,o)
n.add(s),o=(r=r.substring(o+i)).indexOf(e)}r.length>0&&n.add(r)
for(var a=new Array(n.size()).fill(null),l=0;l<a.length;l++)a[l]=n.get(l)
return a},Wt.toString=function(){if(1===arguments.length){var t=arguments[0]
return Wt.SIMPLE_ORDINATE_FORMAT.format(t)}},Wt.spaces=function(t){return Wt.chars(" ",t)},Yt.NEWLINE.get=function(){return V.getProperty("line.separator")},Yt.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(Wt,Yt)
var Xt=function(){}
Xt.prototype.interfaces_=function(){return[]},Xt.prototype.getClass=function(){return Xt},Xt.copyCoord=function(t,e,i,n){for(var r=Math.min(t.getDimension(),i.getDimension()),o=0;o<r;o++)i.setOrdinate(n,o,t.getOrdinate(e,o))},Xt.isRing=function(t){var e=t.size()
return 0===e||!(e<=3)&&t.getOrdinate(0,G.X)===t.getOrdinate(e-1,G.X)&&t.getOrdinate(0,G.Y)===t.getOrdinate(e-1,G.Y)},Xt.isEqual=function(t,e){var i=t.size()
if(i!==e.size())return!1
for(var n=Math.min(t.getDimension(),e.getDimension()),r=0;r<i;r++)for(var o=0;o<n;o++){var s=t.getOrdinate(r,o),a=e.getOrdinate(r,o)
if(!(t.getOrdinate(r,o)===e.getOrdinate(r,o)||v.isNaN(s)&&v.isNaN(a)))return!1}return!0},Xt.extend=function(t,e,i){var n=t.create(i,e.getDimension()),r=e.size()
if(Xt.copy(e,0,n,0,r),r>0)for(var o=r;o<i;o++)Xt.copy(e,r-1,n,o,1)
return n},Xt.reverse=function(t){for(var e=t.size()-1,i=Math.trunc(e/2),n=0;n<=i;n++)Xt.swap(t,n,e-n)},Xt.swap=function(t,e,i){if(e===i)return null
for(var n=0;n<t.getDimension();n++){var r=t.getOrdinate(e,n)
t.setOrdinate(e,n,t.getOrdinate(i,n)),t.setOrdinate(i,n,r)}},Xt.copy=function(t,e,i,n,r){for(var o=0;o<r;o++)Xt.copyCoord(t,e+o,i,n+o)},Xt.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size()
if(0===e)return"()"
var i=t.getDimension(),n=new O
n.append("(")
for(var r=0;r<e;r++){r>0&&n.append(" ")
for(var o=0;o<i;o++)o>0&&n.append(","),n.append(Wt.toString(t.getOrdinate(r,o)))}return n.append(")"),n.toString()}},Xt.ensureValidRing=function(t,e){var i=e.size()
return 0===i?e:i<=3?Xt.createClosedRing(t,e,4):e.getOrdinate(0,G.X)===e.getOrdinate(i-1,G.X)&&e.getOrdinate(0,G.Y)===e.getOrdinate(i-1,G.Y)?e:Xt.createClosedRing(t,e,i+1)},Xt.createClosedRing=function(t,e,i){var n=t.create(i,e.getDimension()),r=e.size()
Xt.copy(e,0,n,0,r)
for(var o=r;o<i;o++)Xt.copy(e,0,n,o,1)
return n}
var Ht=function(t){function e(e,i){t.call(this,i),this._points=null,this.init(e)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e
var i={serialVersionUID:{configurable:!0}}
return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new W:this._points.expandEnvelope(new W)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],i=arguments[1]
if(!this.isEquivalentClass(e))return!1
var n=e
if(this._points.size()!==n._points.size())return!1
for(var r=0;r<this._points.size();r++)if(!this.equal(this._points.getCoordinate(r),n._points.getCoordinate(r),i))return!1
return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t
if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e)))return this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0&&Xt.reverse(this._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?zt.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return at.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy()
return Xt.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var t=arguments[0],e=0,i=0;e<this._points.size()&&i<t._points.size();){var n=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(i))
if(0!==n)return n
e++,i++}return e<this._points.size()?1:i<t._points.size()?-1:0}if(2===arguments.length){var r=arguments[0]
return arguments[1].compare(this._points,r._points)}},e.prototype.apply=function(){if(A(arguments[0],ft))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e))
else if(A(arguments[0],Bt)){var i=arguments[0]
if(0===this._points.size())return null
for(var n=0;n<this._points.size()&&(i.filter(this._points,n),!i.isDone());n++);i.isGeometryChanged()&&this.geometryChanged()}else(A(arguments[0],Gt)||A(arguments[0],ht))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new Vt(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this)
return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new y("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)")
this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0
return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[Nt]},e.prototype.getClass=function(){return e},i.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,i),e}(ut),$t=function(){}
$t.prototype.interfaces_=function(){return[]},$t.prototype.getClass=function(){return $t}
var Kt=function(t){function e(e,i){t.call(this,i),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e
var i={serialVersionUID:{configurable:!0}}
return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new W
var t=new W
return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],i=arguments[1]
return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),i))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return zt.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point")
return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0]
return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0]
return arguments[1].compare(this._coordinates,e._coordinates)}},e.prototype.apply=function(){if(A(arguments[0],ft)){var t=arguments[0]
if(this.isEmpty())return null
t.filter(this.getCoordinate())}else if(A(arguments[0],Bt)){var e=arguments[0]
if(this.isEmpty())return null
e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else(A(arguments[0],Gt)||A(arguments[0],ht))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this)
return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point")
return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),et.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[$t]},e.prototype.getClass=function(){return e},i.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,i),e}(ut),Jt=function(){}
Jt.prototype.interfaces_=function(){return[]},Jt.prototype.getClass=function(){return Jt}
var Qt=function(t){function e(e,i,n){if(t.call(this,n),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===i&&(i=[]),t.hasNullElements(i))throw new y("holes must not contain null elements")
if(e.isEmpty()&&t.hasNonEmptyElements(i))throw new y("shell is empty but holes are not")
this._shell=e,this._holes=i}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e
var i={serialVersionUID:{configurable:!0}}
return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[]
for(var t=new Array(this.getNumPoints()).fill(null),e=-1,i=this._shell.getCoordinates(),n=0;n<i.length;n++)t[++e]=i[n]
for(var r=0;r<this._holes.length;r++)for(var o=this._holes[r].getCoordinates(),s=0;s<o.length;s++)t[++e]=o[s]
return t},e.prototype.getArea=function(){var t=0
t+=Math.abs(at.signedArea(this._shell.getCoordinateSequence()))
for(var e=0;e<this._holes.length;e++)t-=Math.abs(at.signedArea(this._holes[e].getCoordinateSequence()))
return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1
if(null===this._shell)return!1
if(5!==this._shell.getNumPoints())return!1
for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),i=0;i<5;i++){var n=t.getX(i)
if(n!==e.getMinX()&&n!==e.getMaxX())return!1
var r=t.getY(i)
if(r!==e.getMinY()&&r!==e.getMaxY())return!1}for(var o=t.getX(0),s=t.getY(0),a=1;a<=4;a++){var l=t.getX(a),h=t.getY(a)
if(l!==o==(h!==s))return!1
o=l,s=h}return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],i=arguments[1]
if(!this.isEquivalentClass(e))return!1
var n=e,r=this._shell,o=n._shell
if(!r.equalsExact(o,i))return!1
if(this._holes.length!==n._holes.length)return!1
for(var s=0;s<this._holes.length;s++)if(!this._holes[s].equalsExact(n._holes[s],i))return!1
return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0)
for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1)
kt.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],i=arguments[1]
if(e.isEmpty())return null
var n=new Array(e.getCoordinates().length-1).fill(null)
V.arraycopy(e.getCoordinates(),0,n,0,n.length)
var r=Pt.minCoordinate(e.getCoordinates())
Pt.scroll(n,r),V.arraycopy(n,0,e.getCoordinates(),0,n.length),e.getCoordinates()[n.length]=n[0],at.isCCW(e.getCoordinates())===i&&Pt.reverse(e.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0
t+=this._shell.getLength()
for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength()
return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints()
return t},e.prototype.reverse=function(){var t=this.copy()
t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null)
for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse()
return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=this._shell,i=t._shell
return e.compareToSameClass(i)}if(2===arguments.length){var n=arguments[1],r=arguments[0],o=this._shell,s=r._shell,a=o.compareToSameClass(s,n)
if(0!==a)return a
for(var l=this.getNumInteriorRing(),h=r.getNumInteriorRing(),u=0;u<l&&u<h;){var c=this.getInteriorRingN(u),d=r.getInteriorRingN(u),f=c.compareToSameClass(d,n)
if(0!==f)return f
u++}return u<l?1:u<h?-1:0}},e.prototype.apply=function(t){if(A(t,ft)){this._shell.apply(t)
for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(A(t,Bt)){if(this._shell.apply(t),!t.isDone())for(var i=0;i<this._holes.length&&(this._holes[i].apply(t),!t.isDone());i++);t.isGeometryChanged()&&this.geometryChanged()}else if(A(t,Gt))t.filter(this)
else if(A(t,ht)){t.filter(this),this._shell.apply(t)
for(var n=0;n<this._holes.length;n++)this._holes[n].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString()
var t=new Array(this._holes.length+1).fill(null)
t[0]=this._shell
for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e]
return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this)
e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null)
for(var i=0;i<this._holes.length;i++)e._holes[i]=this._holes[i].clone()
return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),i=new Array(this._holes.length).fill(null),n=0;n<i.length;n++)i[n]=this._holes[n].copy()
return new e(t,i,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[Jt]},e.prototype.getClass=function(){return e},i.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,i),e}(ut),te=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e
var i={serialVersionUID:{configurable:!0}}
return e.prototype.getSortIndex=function(){return ut.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],i=arguments[1]
return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,i)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0]
return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return zt.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),i=0;i<t.length;i++)t[i]=this._geometries[i].copy()
return new e(t,this._factory)},e.prototype.interfaces_=function(){return[$t]},e.prototype.getClass=function(){return e},i.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,i),e}(Ut),ee=function(t){function e(e,i){e instanceof S&&i instanceof me&&(e=i.getCoordinateSequenceFactory().create(e)),t.call(this,e,i),this.validateConstruction()}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e
var i={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}}
return e.prototype.getSortIndex=function(){return ut.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return zt.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy()
return Xt.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new y("Points of LinearRing do not form a closed linestring")
if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new y("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},i.MINIMUM_VALID_SIZE.get=function(){return 4},i.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,i),e}(Ht),ie=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e
var i={serialVersionUID:{configurable:!0}}
return e.prototype.getSortIndex=function(){return ut.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],i=arguments[1]
return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,i)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),i=0;i<this._geometries.length;i++)e[i]=this._geometries[i].reverse()
return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString()
for(var t=new Et,e=0;e<this._geometries.length;e++)for(var i=this._geometries[e].getBoundary(),n=0;n<i.getNumGeometries();n++)t.add(i.getGeometryN(n))
var r=new Array(t.size()).fill(null)
return this.getFactory().createMultiLineString(t.toArray(r))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),i=0;i<t.length;i++)t[i]=this._geometries[i].copy()
return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Jt]},e.prototype.getClass=function(){return e},i.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,i),e}(Ut),ne=function(t){this._factory=t||null,this._isUserDataCopied=!1},re={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}}
ne.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},ne.prototype.edit=function(t,e){if(null===t)return null
var i=this.editInternal(t,e)
return this._isUserDataCopied&&i.setUserData(t.getUserData()),i},ne.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof Ut?this.editGeometryCollection(t,e):t instanceof Qt?this.editPolygon(t,e):t instanceof Kt||t instanceof Ht?e.edit(t,this._factory):(et.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},ne.prototype.editGeometryCollection=function(t,e){for(var i=e.edit(t,this._factory),n=new Et,r=0;r<i.getNumGeometries();r++){var o=this.edit(i.getGeometryN(r),e)
null===o||o.isEmpty()||n.add(o)}return i.getClass()===te?this._factory.createMultiPoint(n.toArray([])):i.getClass()===qt?this._factory.createMultiLineString(n.toArray([])):i.getClass()===ie?this._factory.createMultiPolygon(n.toArray([])):this._factory.createGeometryCollection(n.toArray([]))},ne.prototype.editPolygon=function(t,e){var i=e.edit(t,this._factory)
if(null===i&&(i=this._factory.createPolygon(null)),i.isEmpty())return i
var n=this.edit(i.getExteriorRing(),e)
if(null===n||n.isEmpty())return this._factory.createPolygon()
for(var r=new Et,o=0;o<i.getNumInteriorRing();o++){var s=this.edit(i.getInteriorRingN(o),e)
null===s||s.isEmpty()||r.add(s)}return this._factory.createPolygon(n,r.toArray([]))},ne.prototype.interfaces_=function(){return[]},ne.prototype.getClass=function(){return ne},ne.GeometryEditorOperation=function(){},re.NoOpGeometryOperation.get=function(){return oe},re.CoordinateOperation.get=function(){return se},re.CoordinateSequenceOperation.get=function(){return ae},Object.defineProperties(ne,re)
var oe=function(){}
oe.prototype.edit=function(t,e){return t},oe.prototype.interfaces_=function(){return[ne.GeometryEditorOperation]},oe.prototype.getClass=function(){return oe}
var se=function(){}
se.prototype.edit=function(t,e){var i=this.editCoordinates(t.getCoordinates(),t)
return null===i?t:t instanceof ee?e.createLinearRing(i):t instanceof Ht?e.createLineString(i):t instanceof Kt?i.length>0?e.createPoint(i[0]):e.createPoint():t},se.prototype.interfaces_=function(){return[ne.GeometryEditorOperation]},se.prototype.getClass=function(){return se}
var ae=function(){}
ae.prototype.edit=function(t,e){return t instanceof ee?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Ht?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Kt?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},ae.prototype.interfaces_=function(){return[ne.GeometryEditorOperation]},ae.prototype.getClass=function(){return ae}
var le=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3
else if(Number.isInteger(arguments[0])){var t=arguments[0]
this._coordinates=new Array(t).fill(null)
for(var e=0;e<t;e++)this._coordinates[e]=new S}else if(A(arguments[0],G)){var i=arguments[0]
if(null===i)return this._coordinates=new Array(0).fill(null),null
this._dimension=i.getDimension(),this._coordinates=new Array(i.size()).fill(null)
for(var n=0;n<this._coordinates.length;n++)this._coordinates[n]=i.getCoordinateCopy(n)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var r=arguments[0],o=arguments[1]
this._coordinates=r,this._dimension=o,null===r&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var s=arguments[0],a=arguments[1]
this._coordinates=new Array(s).fill(null),this._dimension=a
for(var l=0;l<s;l++)this._coordinates[l]=new S}},he={serialVersionUID:{configurable:!0}}
le.prototype.setOrdinate=function(t,e,i){switch(e){case G.X:this._coordinates[t].x=i
break
case G.Y:this._coordinates[t].y=i
break
case G.Z:this._coordinates[t].z=i
break
default:throw new y("invalid ordinateIndex")}},le.prototype.size=function(){return this._coordinates.length},le.prototype.getOrdinate=function(t,e){switch(e){case G.X:return this._coordinates[t].x
case G.Y:return this._coordinates[t].y
case G.Z:return this._coordinates[t].z}return v.NaN},le.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0]
return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],i=arguments[1]
i.x=this._coordinates[e].x,i.y=this._coordinates[e].y,i.z=this._coordinates[e].z}},le.prototype.getCoordinateCopy=function(t){return new S(this._coordinates[t])},le.prototype.getDimension=function(){return this._dimension},le.prototype.getX=function(t){return this._coordinates[t].x},le.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone()
return new le(t,this._dimension)},le.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e])
return t},le.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy()
return new le(t,this._dimension)},le.prototype.toString=function(){if(this._coordinates.length>0){var t=new O(17*this._coordinates.length)
t.append("("),t.append(this._coordinates[0])
for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e])
return t.append(")"),t.toString()}return"()"},le.prototype.getY=function(t){return this._coordinates[t].y},le.prototype.toCoordinateArray=function(){return this._coordinates},le.prototype.interfaces_=function(){return[G,e]},le.prototype.getClass=function(){return le},he.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(le,he)
var ue=function(){},ce={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}}
ue.prototype.readResolve=function(){return ue.instance()},ue.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new le(arguments[0])
if(A(arguments[0],G))return new le(arguments[0])}else if(2===arguments.length){var t=arguments[0],e=arguments[1]
return e>3&&(e=3),e<2?new le(t):new le(t,e)}},ue.prototype.interfaces_=function(){return[T,e]},ue.prototype.getClass=function(){return ue},ue.instance=function(){return ue.instanceObject},ce.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},ce.instanceObject.get=function(){return new ue},Object.defineProperties(ue,ce)
var de=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new Et,e=this.map_.values(),i=e.next();!i.done;)t.add(i.value),i=e.next()
return t},e.prototype.entrySet=function(){var t=new Lt
return this.map_.entries().forEach((function(e){return t.add(e)})),t},e.prototype.size=function(){return this.map_.size()},e}(At),fe=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING
else if(1===arguments.length)if(arguments[0]instanceof ge){var e=arguments[0]
this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var i=arguments[0]
this._modelType=t.FIXED,this.setScale(i)}else if(arguments[0]instanceof t){var n=arguments[0]
this._modelType=n._modelType,this._scale=n._scale}},pe={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}}
fe.prototype.equals=function(t){if(!(t instanceof fe))return!1
var e=t
return this._modelType===e._modelType&&this._scale===e._scale},fe.prototype.compareTo=function(t){var e=t,i=this.getMaximumSignificantDigits(),n=e.getMaximumSignificantDigits()
return new D(i).compareTo(new D(n))},fe.prototype.getScale=function(){return this._scale},fe.prototype.isFloating=function(){return this._modelType===fe.FLOATING||this._modelType===fe.FLOATING_SINGLE},fe.prototype.getType=function(){return this._modelType},fe.prototype.toString=function(){var t="UNKNOWN"
return this._modelType===fe.FLOATING?t="Floating":this._modelType===fe.FLOATING_SINGLE?t="Floating-Single":this._modelType===fe.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},fe.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0]
return v.isNaN(t)||this._modelType===fe.FLOATING_SINGLE?t:this._modelType===fe.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof S){var e=arguments[0]
if(this._modelType===fe.FLOATING)return null
e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},fe.prototype.getMaximumSignificantDigits=function(){var t=16
return this._modelType===fe.FLOATING?t=16:this._modelType===fe.FLOATING_SINGLE?t=6:this._modelType===fe.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},fe.prototype.setScale=function(t){this._scale=Math.abs(t)},fe.prototype.interfaces_=function(){return[e,b]},fe.prototype.getClass=function(){return fe},fe.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},pe.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},pe.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(fe,pe)
var ge=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},_e={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}}
ge.prototype.readResolve=function(){return ge.nameToTypeMap.get(this._name)},ge.prototype.toString=function(){return this._name},ge.prototype.interfaces_=function(){return[e]},ge.prototype.getClass=function(){return ge},_e.serialVersionUID.get=function(){return-552860263173159e4},_e.nameToTypeMap.get=function(){return new de},Object.defineProperties(ge,_e),fe.Type=ge,fe.FIXED=new ge("FIXED"),fe.FLOATING=new ge("FLOATING"),fe.FLOATING_SINGLE=new ge("FLOATING SINGLE")
var me=function t(){this._precisionModel=new fe,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?A(arguments[0],T)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof fe&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},ye={serialVersionUID:{configurable:!0}}
me.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new S(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new S(t.getMinX(),t.getMinY()),new S(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new S(t.getMinX(),t.getMinY()),new S(t.getMinX(),t.getMaxY()),new S(t.getMaxX(),t.getMaxY()),new S(t.getMaxX(),t.getMinY()),new S(t.getMinX(),t.getMinY())]),null)},me.prototype.createLineString=function(t){return t?t instanceof Array?new Ht(this.getCoordinateSequenceFactory().create(t),this):A(t,G)?new Ht(t,this):void 0:new Ht(this.getCoordinateSequenceFactory().create([]),this)},me.prototype.createMultiLineString=function(){return 0===arguments.length?new qt(null,this):1===arguments.length?new qt(arguments[0],this):void 0},me.prototype.buildGeometry=function(t){for(var e=null,i=!1,n=!1,r=t.iterator();r.hasNext();){var o=r.next(),s=o.getClass()
null===e&&(e=s),s!==e&&(i=!0),o.isGeometryCollectionOrDerived()&&(n=!0)}if(null===e)return this.createGeometryCollection()
if(i||n)return this.createGeometryCollection(me.toGeometryArray(t))
var a=t.iterator().next()
if(t.size()>1){if(a instanceof Qt)return this.createMultiPolygon(me.toPolygonArray(t))
if(a instanceof Ht)return this.createMultiLineString(me.toLineStringArray(t))
if(a instanceof Kt)return this.createMultiPoint(me.toPointArray(t))
et.shouldNeverReachHere("Unhandled class: "+a.getClass().getName())}return a},me.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},me.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]))
if(1===arguments.length){if(arguments[0]instanceof S){var t=arguments[0]
return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(A(arguments[0],G))return new Kt(arguments[0],this)}},me.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},me.prototype.createPolygon=function(){if(0===arguments.length)return new Qt(null,null,this)
if(1===arguments.length){if(A(arguments[0],G)){var t=arguments[0]
return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0]
return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof ee){var i=arguments[0]
return this.createPolygon(i,null)}}else if(2===arguments.length)return new Qt(arguments[0],arguments[1],this)},me.prototype.getSRID=function(){return this._SRID},me.prototype.createGeometryCollection=function(){return 0===arguments.length?new Ut(null,this):1===arguments.length?new Ut(arguments[0],this):void 0},me.prototype.createGeometry=function(t){return new ne(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0]
return this._coordinateSequenceFactory.create(t)}}})},me.prototype.getPrecisionModel=function(){return this._precisionModel},me.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]))
if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0]
return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(A(arguments[0],G))return new ee(arguments[0],this)}},me.prototype.createMultiPolygon=function(){return 0===arguments.length?new ie(null,this):1===arguments.length?new ie(arguments[0],this):void 0},me.prototype.createMultiPoint=function(){if(0===arguments.length)return new te(null,this)
if(1===arguments.length){if(arguments[0]instanceof Array)return new te(arguments[0],this)
if(arguments[0]instanceof Array){var t=arguments[0]
return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(A(arguments[0],G)){var e=arguments[0]
if(null===e)return this.createMultiPoint(new Array(0).fill(null))
for(var i=new Array(e.size()).fill(null),n=0;n<e.size();n++){var r=this.getCoordinateSequenceFactory().create(1,e.getDimension())
Xt.copy(e,n,r,0,1),i[n]=this.createPoint(r)}return this.createMultiPoint(i)}}},me.prototype.interfaces_=function(){return[e]},me.prototype.getClass=function(){return me},me.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null)
return t.toArray(e)},me.toGeometryArray=function(t){if(null===t)return null
var e=new Array(t.size()).fill(null)
return t.toArray(e)},me.getDefaultCoordinateSequenceFactory=function(){return ue.instance()},me.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null)
return t.toArray(e)},me.toLineStringArray=function(t){var e=new Array(t.size()).fill(null)
return t.toArray(e)},me.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null)
return t.toArray(e)},me.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null)
return t.toArray(e)},me.toPointArray=function(t){var e=new Array(t.size()).fill(null)
return t.toArray(e)},me.toPolygonArray=function(t){var e=new Array(t.size()).fill(null)
return t.toArray(e)},me.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},ye.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(me,ye)
var ve=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],xe=function(t){this.geometryFactory=t||new me}
xe.prototype.read=function(t){var e,i=(e="string"==typeof t?JSON.parse(t):t).type
if(!be[i])throw new Error("Unknown GeoJSON type: "+e.type)
return-1!==ve.indexOf(i)?be[i].apply(this,[e.coordinates]):"GeometryCollection"===i?be[i].apply(this,[e.geometries]):be[i].apply(this,[e])},xe.prototype.write=function(t){var e=t.getGeometryType()
if(!we[e])throw new Error("Geometry is not supported")
return we[e].apply(this,[t])}
var be={Feature:function(t){var e={}
for(var i in t)e[i]=t[i]
if(t.geometry){var n=t.geometry.type
if(!be[n])throw new Error("Unknown GeoJSON type: "+t.type)
e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=be.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={}
if(t.features){e.features=[]
for(var i=0;i<t.features.length;++i)e.features.push(this.read(t.features[i]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],i=0;i<t.length;++i){var n=t[i]
e.push(new S(n[0],n[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new S(t[0],t[1]),new S(t[2],t[1]),new S(t[2],t[3]),new S(t[0],t[3]),new S(t[0],t[1])])},Point:function(t){var e=new S(t[0],t[1])
return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],i=0;i<t.length;++i)e.push(be.Point.apply(this,[t[i]]))
return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=be.coordinates.apply(this,[t])
return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],i=0;i<t.length;++i)e.push(be.LineString.apply(this,[t[i]]))
return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=be.coordinates.apply(this,[t[0]]),i=this.geometryFactory.createLinearRing(e),n=[],r=1;r<t.length;++r){var o=t[r],s=be.coordinates.apply(this,[o]),a=this.geometryFactory.createLinearRing(s)
n.push(a)}return this.geometryFactory.createPolygon(i,n)},MultiPolygon:function(t){for(var e=[],i=0;i<t.length;++i){var n=t[i]
e.push(be.Polygon.apply(this,[n]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],i=0;i<t.length;++i){var n=t[i]
e.push(this.read(n))}return this.geometryFactory.createGeometryCollection(e)}},we={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:we.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],i=0;i<t._geometries.length;++i){var n=t._geometries[i],r=we.Point.apply(this,[n])
e.push(r.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],i=t.getCoordinates(),n=0;n<i.length;++n){var r=i[n]
e.push(we.coordinate.apply(this,[r]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],i=0;i<t._geometries.length;++i){var n=t._geometries[i],r=we.LineString.apply(this,[n])
e.push(r.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],i=we.LineString.apply(this,[t._shell])
e.push(i.coordinates)
for(var n=0;n<t._holes.length;++n){var r=t._holes[n],o=we.LineString.apply(this,[r])
e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],i=0;i<t._geometries.length;++i){var n=t._geometries[i],r=we.Polygon.apply(this,[n])
e.push(r.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],i=0;i<t._geometries.length;++i){var n=t._geometries[i],r=n.getGeometryType()
e.push(we[r].apply(this,[n]))}return{type:"GeometryCollection",geometries:e}}},Ee=function(t){this.geometryFactory=t||new me,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new xe(this.geometryFactory)}
Ee.prototype.read=function(t){var e=this.parser.read(t)
return this.precisionModel.getType()===fe.FIXED&&this.reducePrecision(e),e},Ee.prototype.reducePrecision=function(t){var e,i
if(t.coordinate)this.precisionModel.makePrecise(t.coordinate)
else if(t.points)for(e=0,i=t.points.length;e<i;e++)this.precisionModel.makePrecise(t.points[e])
else if(t.geometries)for(e=0,i=t.geometries.length;e<i;e++)this.reducePrecision(t.geometries[e])}
var Se=function(){this.parser=new xe(this.geometryFactory)}
Se.prototype.write=function(t){return this.parser.write(t)}
var Ce=function(){},Pe={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}}
Ce.prototype.interfaces_=function(){return[]},Ce.prototype.getClass=function(){return Ce},Ce.opposite=function(t){return t===Ce.LEFT?Ce.RIGHT:t===Ce.RIGHT?Ce.LEFT:t},Pe.ON.get=function(){return 0},Pe.LEFT.get=function(){return 1},Pe.RIGHT.get=function(){return 2},Object.defineProperties(Ce,Pe),(g.prototype=new Error).name="EmptyStackException",(_.prototype=new wt).add=function(t){return this.array_.push(t),!0},_.prototype.get=function(t){if(t<0||t>=this.size())throw new Error
return this.array_[t]},_.prototype.push=function(t){return this.array_.push(t),t},_.prototype.pop=function(t){if(0===this.array_.length)throw new g
return this.array_.pop()},_.prototype.peek=function(){if(0===this.array_.length)throw new g
return this.array_[this.array_.length-1]},_.prototype.empty=function(){return 0===this.array_.length},_.prototype.isEmpty=function(){return this.empty()},_.prototype.search=function(t){return this.array_.indexOf(t)},_.prototype.size=function(){return this.array_.length},_.prototype.toArray=function(){for(var t=[],e=0,i=this.array_.length;e<i;e++)t.push(this.array_[e])
return t}
var Te=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null}
Te.prototype.getCoordinate=function(){return this._minCoord},Te.prototype.getRightmostSide=function(t,e){var i=this.getRightmostSideOfSegment(t,e)
return i<0&&(i=this.getRightmostSideOfSegment(t,e-1)),i<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),i},Te.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates()
et.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge")
var e=t[this._minIndex-1],i=t[this._minIndex+1],n=at.computeOrientation(this._minCoord,i,e),r=!1;(e.y<this._minCoord.y&&i.y<this._minCoord.y&&n===at.COUNTERCLOCKWISE||e.y>this._minCoord.y&&i.y>this._minCoord.y&&n===at.CLOCKWISE)&&(r=!0),r&&(this._minIndex=this._minIndex-1)},Te.prototype.getRightmostSideOfSegment=function(t,e){var i=t.getEdge().getCoordinates()
if(e<0||e+1>=i.length)return-1
if(i[e].y===i[e+1].y)return-1
var n=Ce.LEFT
return i[e].y<i[e+1].y&&(n=Ce.RIGHT),n},Te.prototype.getEdge=function(){return this._orientedDe},Te.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),i=0;i<e.length-1;i++)(null===this._minCoord||e[i].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=i,this._minCoord=e[i])},Te.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges()
this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Te.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var i=e.next()
i.isForward()&&this.checkForRightmostCoordinate(i)}et.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Ce.LEFT&&(this._orientedDe=this._minDe.getSym())},Te.prototype.interfaces_=function(){return[]},Te.prototype.getClass=function(){return Te}
var Ie=function(t){function e(i,n){t.call(this,e.msgWithCoord(i,n)),this.pt=n?new S(n):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}(Q),Me=function(){this.array_=[]}
Me.prototype.addLast=function(t){this.array_.push(t)},Me.prototype.removeFirst=function(){return this.array_.shift()},Me.prototype.isEmpty=function(){return 0===this.array_.length}
var Ae=function(){this._finder=null,this._dirEdgeList=new Et,this._nodes=new Et,this._rightMostCoord=null,this._env=null,this._finder=new Te}
Ae.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},Ae.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Ae.prototype.computeNodeDepth=function(t){for(var e=null,i=t.getEdges().iterator();i.hasNext();){var n=i.next()
if(n.isVisited()||n.getSym().isVisited()){e=n
break}}if(null===e)throw new Ie("unable to find edge to compute depths at "+t.getCoordinate())
t.getEdges().computeDepths(e)
for(var r=t.getEdges().iterator();r.hasNext();){var o=r.next()
o.setVisited(!0),this.copySymDepths(o)}},Ae.prototype.computeDepth=function(t){this.clearVisitedEdges()
var e=this._finder.getEdge()
e.setEdgeDepths(Ce.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},Ae.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Ae.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next()
e.getDepth(Ce.RIGHT)>=1&&e.getDepth(Ce.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},Ae.prototype.computeDepths=function(t){var e=new Lt,i=new Me,n=t.getNode()
for(i.addLast(n),e.add(n),t.setVisited(!0);!i.isEmpty();){var r=i.removeFirst()
e.add(r),this.computeNodeDepth(r)
for(var o=r.getEdges().iterator();o.hasNext();){var s=o.next().getSym()
if(!s.isVisited()){var a=s.getNode()
e.contains(a)||(i.addLast(a),e.add(a))}}}},Ae.prototype.compareTo=function(t){var e=t
return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},Ae.prototype.getEnvelope=function(){if(null===this._env){for(var t=new W,e=this._dirEdgeList.iterator();e.hasNext();)for(var i=e.next().getEdge().getCoordinates(),n=0;n<i.length-1;n++)t.expandToInclude(i[n])
this._env=t}return this._env},Ae.prototype.addReachable=function(t){var e=new _
for(e.add(t);!e.empty();){var i=e.pop()
this.add(i,e)}},Ae.prototype.copySymDepths=function(t){var e=t.getSym()
e.setDepth(Ce.LEFT,t.getDepth(Ce.RIGHT)),e.setDepth(Ce.RIGHT,t.getDepth(Ce.LEFT))},Ae.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t)
for(var i=t.getEdges().iterator();i.hasNext();){var n=i.next()
this._dirEdgeList.add(n)
var r=n.getSym().getNode()
r.isVisited()||e.push(r)}},Ae.prototype.getNodes=function(){return this._nodes},Ae.prototype.getDirectedEdges=function(){return this._dirEdgeList},Ae.prototype.interfaces_=function(){return[b]},Ae.prototype.getClass=function(){return Ae}
var Re=function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0]
this.init(e.length)}else if(Number.isInteger(arguments[0])){var i=arguments[0]
this.init(1),this.location[Ce.ON]=i}else if(arguments[0]instanceof t){var n=arguments[0]
if(this.init(n.location.length),null!==n)for(var r=0;r<this.location.length;r++)this.location[r]=n.location[r]}}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2]
this.init(3),this.location[Ce.ON]=o,this.location[Ce.LEFT]=s,this.location[Ce.RIGHT]=a}}
Re.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Re.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==I.NONE)return!1
return!0},Re.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===I.NONE&&(this.location[e]=t)},Re.prototype.isLine=function(){return 1===this.location.length},Re.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null)
e[Ce.ON]=this.location[Ce.ON],e[Ce.LEFT]=I.NONE,e[Ce.RIGHT]=I.NONE,this.location=e}for(var i=0;i<this.location.length;i++)this.location[i]===I.NONE&&i<t.location.length&&(this.location[i]=t.location[i])},Re.prototype.getLocations=function(){return this.location},Re.prototype.flip=function(){if(this.location.length<=1)return null
var t=this.location[Ce.LEFT]
this.location[Ce.LEFT]=this.location[Ce.RIGHT],this.location[Ce.RIGHT]=t},Re.prototype.toString=function(){var t=new O
return this.location.length>1&&t.append(I.toLocationSymbol(this.location[Ce.LEFT])),t.append(I.toLocationSymbol(this.location[Ce.ON])),this.location.length>1&&t.append(I.toLocationSymbol(this.location[Ce.RIGHT])),t.toString()},Re.prototype.setLocations=function(t,e,i){this.location[Ce.ON]=t,this.location[Ce.LEFT]=e,this.location[Ce.RIGHT]=i},Re.prototype.get=function(t){return t<this.location.length?this.location[t]:I.NONE},Re.prototype.isArea=function(){return this.location.length>1},Re.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===I.NONE)return!0
return!1},Re.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0]
this.setLocation(Ce.ON,t)}else if(2===arguments.length){var e=arguments[0],i=arguments[1]
this.location[e]=i}},Re.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(I.NONE)},Re.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Re.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1
return!0},Re.prototype.interfaces_=function(){return[]},Re.prototype.getClass=function(){return Re}
var Le=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0]
this.elt[0]=new Re(e),this.elt[1]=new Re(e)}else if(arguments[0]instanceof t){var i=arguments[0]
this.elt[0]=new Re(i.elt[0]),this.elt[1]=new Re(i.elt[1])}}else if(2===arguments.length){var n=arguments[0],r=arguments[1]
this.elt[0]=new Re(I.NONE),this.elt[1]=new Re(I.NONE),this.elt[n].setLocation(r)}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2]
this.elt[0]=new Re(o,s,a),this.elt[1]=new Re(o,s,a)}else if(4===arguments.length){var l=arguments[0],h=arguments[1],u=arguments[2],c=arguments[3]
this.elt[0]=new Re(I.NONE,I.NONE,I.NONE),this.elt[1]=new Re(I.NONE,I.NONE,I.NONE),this.elt[l].setLocations(h,u,c)}}
Le.prototype.getGeometryCount=function(){var t=0
return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},Le.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},Le.prototype.isNull=function(t){return this.elt[t].isNull()},Le.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0]
this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],i=arguments[1]
this.elt[e].setAllLocationsIfNull(i)}},Le.prototype.isLine=function(t){return this.elt[t].isLine()},Le.prototype.merge=function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new Re(t.elt[e]):this.elt[e].merge(t.elt[e])},Le.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Le.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0]
return this.elt[t].get(Ce.ON)}if(2===arguments.length){var e=arguments[0],i=arguments[1]
return this.elt[e].get(i)}},Le.prototype.toString=function(){var t=new O
return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},Le.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea()
if(1===arguments.length){var t=arguments[0]
return this.elt[t].isArea()}},Le.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},Le.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1]
this.elt[t].setLocation(Ce.ON,e)}else if(3===arguments.length){var i=arguments[0],n=arguments[1],r=arguments[2]
this.elt[i].setLocation(n,r)}},Le.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},Le.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},Le.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Re(this.elt[t].location[0]))},Le.prototype.interfaces_=function(){return[]},Le.prototype.getClass=function(){return Le},Le.toLineLabel=function(t){for(var e=new Le(I.NONE),i=0;i<2;i++)e.setLocation(i,t.getLocation(i))
return e}
var Oe=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new Et,this._pts=new Et,this._label=new Le(I.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new Et,this._geometryFactory=null
var t=arguments[0],e=arguments[1]
this._geometryFactory=e,this.computePoints(t),this.computeRing()}
Oe.prototype.computeRing=function(){if(null!==this._ring)return null
for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e)
this._ring=this._geometryFactory.createLinearRing(t),this._isHole=at.isCCW(this._ring.getCoordinates())},Oe.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},Oe.prototype.computePoints=function(t){this._startDe=t
var e=t,i=!0
do{if(null===e)throw new Ie("Found null DirectedEdge")
if(e.getEdgeRing()===this)throw new Ie("Directed Edge visited twice during ring-building at "+e.getCoordinate())
this._edges.add(e)
var n=e.getLabel()
et.isTrue(n.isArea()),this.mergeLabel(n),this.addPoints(e.getEdge(),e.isForward(),i),i=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)},Oe.prototype.getLinearRing=function(){return this._ring},Oe.prototype.getCoordinate=function(t){return this._pts.get(t)},Oe.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0
var t=this._startDe
do{var e=t.getNode().getEdges().getOutgoingDegree(this)
e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe)
this._maxNodeDegree*=2},Oe.prototype.addPoints=function(t,e,i){var n=t.getCoordinates()
if(e){var r=1
i&&(r=0)
for(var o=r;o<n.length;o++)this._pts.add(n[o])}else{var s=n.length-2
i&&(s=n.length-1)
for(var a=s;a>=0;a--)this._pts.add(n[a])}},Oe.prototype.isHole=function(){return this._isHole},Oe.prototype.setInResult=function(){var t=this._startDe
do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},Oe.prototype.containsPoint=function(t){var e=this.getLinearRing()
if(!e.getEnvelopeInternal().contains(t))return!1
if(!at.isPointInRing(t,e.getCoordinates()))return!1
for(var i=this._holes.iterator();i.hasNext();)if(i.next().containsPoint(t))return!1
return!0},Oe.prototype.addHole=function(t){this._holes.add(t)},Oe.prototype.isShell=function(){return null===this._shell},Oe.prototype.getLabel=function(){return this._label},Oe.prototype.getEdges=function(){return this._edges},Oe.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Oe.prototype.getShell=function(){return this._shell},Oe.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0]
this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[1],i=arguments[0].getLocation(e,Ce.RIGHT)
if(i===I.NONE)return null
if(this._label.getLocation(e)===I.NONE)return this._label.setLocation(e,i),null}},Oe.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},Oe.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),i=0;i<this._holes.size();i++)e[i]=this._holes.get(i).getLinearRing()
return t.createPolygon(this.getLinearRing(),e)},Oe.prototype.interfaces_=function(){return[]},Oe.prototype.getClass=function(){return Oe}
var De=function(t){function e(){var e=arguments[0],i=arguments[1]
t.call(this,e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Oe),Ne=function(t){function e(){var e=arguments[0],i=arguments[1]
t.call(this,e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new Et,e=this._startDe
do{if(null===e.getMinEdgeRing()){var i=new De(e,this._geometryFactory)
t.add(i)}e=e.getNext()}while(e!==this._startDe)
return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe
do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Oe),Fe=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0]
this._label=t}}
Fe.prototype.setVisited=function(t){this._isVisited=t},Fe.prototype.setInResult=function(t){this._isInResult=t},Fe.prototype.isCovered=function(){return this._isCovered},Fe.prototype.isCoveredSet=function(){return this._isCoveredSet},Fe.prototype.setLabel=function(t){this._label=t},Fe.prototype.getLabel=function(){return this._label},Fe.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},Fe.prototype.updateIM=function(t){et.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},Fe.prototype.isInResult=function(){return this._isInResult},Fe.prototype.isVisited=function(){return this._isVisited},Fe.prototype.interfaces_=function(){return[]},Fe.prototype.getClass=function(){return Fe}
var ke=function(t){function e(){t.call(this),this._coord=null,this._edges=null
var e=arguments[0],i=arguments[1]
this._coord=e,this._edges=i,this._label=new Le(0,I.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0
return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var i=I.NONE
if(i=this._label.getLocation(e),!t.isNull(e)){var n=t.getLocation(e)
i!==I.BOUNDARY&&(i=n)}return i},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments)
var e=arguments[0],i=arguments[1]
null===this._label?this._label=new Le(e,i):this._label.setLocation(e,i)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){if(arguments[0]instanceof e){var t=arguments[0]
this.mergeLabel(t._label)}else if(arguments[0]instanceof Le)for(var i=arguments[0],n=0;n<2;n++){var r=this.computeMergedLocation(i,n)
this._label.getLocation(n)===I.NONE&&this._label.setLocation(n,r)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null
var e=I.NONE
null!==this._label&&(e=this._label.getLocation(t))
var i=null
i=e===I.BOUNDARY?I.INTERIOR:I.BOUNDARY,this._label.setLocation(t,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Fe),ze=function(){this.nodeMap=new c,this.nodeFact=null
var t=arguments[0]
this.nodeFact=t}
ze.prototype.find=function(t){return this.nodeMap.get(t)},ze.prototype.addNode=function(){if(arguments[0]instanceof S){var t=arguments[0],e=this.nodeMap.get(t)
return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof ke){var i=arguments[0],n=this.nodeMap.get(i.getCoordinate())
return null===n?(this.nodeMap.put(i.getCoordinate(),i),i):(n.mergeLabel(i),n)}},ze.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},ze.prototype.iterator=function(){return this.nodeMap.values().iterator()},ze.prototype.values=function(){return this.nodeMap.values()},ze.prototype.getBoundaryNodes=function(t){for(var e=new Et,i=this.iterator();i.hasNext();){var n=i.next()
n.getLabel().getLocation(t)===I.BOUNDARY&&e.add(n)}return e},ze.prototype.add=function(t){var e=t.getCoordinate()
this.addNode(e).add(t)},ze.prototype.interfaces_=function(){return[]},ze.prototype.getClass=function(){return ze}
var je=function(){},Ge={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}}
je.prototype.interfaces_=function(){return[]},je.prototype.getClass=function(){return je},je.isNorthern=function(t){return t===je.NE||t===je.NW},je.isOpposite=function(t,e){return t!==e&&2==(t-e+4)%4},je.commonHalfPlane=function(t,e){if(t===e)return t
if(2==(t-e+4)%4)return-1
var i=t<e?t:e
return 0===i&&3===(t>e?t:e)?3:i},je.isInHalfPlane=function(t,e){return e===je.SE?t===je.SE||t===je.SW:t===e||t===e+1},je.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1]
if(0===t&&0===e)throw new y("Cannot compute the quadrant for point ( "+t+", "+e+" )")
return t>=0?e>=0?je.NE:je.SE:e>=0?je.NW:je.SW}if(arguments[0]instanceof S&&arguments[1]instanceof S){var i=arguments[0],n=arguments[1]
if(n.x===i.x&&n.y===i.y)throw new y("Cannot compute the quadrant for two identical points "+i)
return n.x>=i.x?n.y>=i.y?je.NE:je.SE:n.y>=i.y?je.NW:je.SW}},Ge.NE.get=function(){return 0},Ge.NW.get=function(){return 1},Ge.SW.get=function(){return 2},Ge.SE.get=function(){return 3},Object.defineProperties(je,Ge)
var Be=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0]
this._edge=t}else if(3===arguments.length){var e=arguments[0],i=arguments[1],n=arguments[2]
this._edge=e,this.init(i,n),this._label=null}else if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3]
this._edge=r,this.init(o,s),this._label=a}}
Be.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:at.computeOrientation(t._p0,t._p1,this._p1)},Be.prototype.getDy=function(){return this._dy},Be.prototype.getCoordinate=function(){return this._p0},Be.prototype.setNode=function(t){this._node=t},Be.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),i=this.getClass().getName(),n=i.lastIndexOf("."),r=i.substring(n+1)
t.print("  "+r+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},Be.prototype.compareTo=function(t){var e=t
return this.compareDirection(e)},Be.prototype.getDirectedCoordinate=function(){return this._p1},Be.prototype.getDx=function(){return this._dx},Be.prototype.getLabel=function(){return this._label},Be.prototype.getEdge=function(){return this._edge},Be.prototype.getQuadrant=function(){return this._quadrant},Be.prototype.getNode=function(){return this._node},Be.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),i=e.lastIndexOf(".")
return"  "+e.substring(i+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},Be.prototype.computeLabel=function(t){},Be.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=je.quadrant(this._dx,this._dy),et.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},Be.prototype.interfaces_=function(){return[b]},Be.prototype.getClass=function(){return Be}
var Ue=function(t){function e(){var e=arguments[0],i=arguments[1]
if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=i,i)this.init(e.getCoordinate(0),e.getCoordinate(1))
else{var n=e.getNumPoints()-1
this.init(e.getCoordinate(n),e.getCoordinate(n-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new Le(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Ie("assigned depths do not match",this.getCoordinate())
this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,Ce.LEFT)===I.INTERIOR&&this._label.getLocation(e,Ce.RIGHT)===I.INTERIOR||(t=!1)
return t},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[Ce.LEFT]+"/"+this._depth[Ce.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,I.EXTERIOR),i=!this._label.isArea(1)||this._label.allPositionsEqual(1,I.EXTERIOR)
return t&&e&&i},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta()
return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var i=this.getEdge().getDepthDelta()
this._isForward||(i=-i)
var n=1
t===Ce.LEFT&&(n=-1)
var r=Ce.opposite(t),o=e+i*n
this.setDepth(t,e),this.setDepth(r,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===I.EXTERIOR&&e===I.INTERIOR?1:t===I.INTERIOR&&e===I.EXTERIOR?-1:0},e}(Be),qe=function(){}
qe.prototype.createNode=function(t){return new ke(t,null)},qe.prototype.interfaces_=function(){return[]},qe.prototype.getClass=function(){return qe}
var Ve=function(){if(this._edges=new Et,this._nodes=null,this._edgeEndList=new Et,0===arguments.length)this._nodes=new ze(new qe)
else if(1===arguments.length){var t=arguments[0]
this._nodes=new ze(t)}}
Ve.prototype.printEdges=function(t){t.println("Edges:")
for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":")
var i=this._edges.get(e)
i.print(t),i.eiList.print(t)}},Ve.prototype.find=function(t){return this._nodes.find(t)},Ve.prototype.addNode=function(){if(arguments[0]instanceof ke){var t=arguments[0]
return this._nodes.addNode(t)}if(arguments[0]instanceof S){var e=arguments[0]
return this._nodes.addNode(e)}},Ve.prototype.getNodeIterator=function(){return this._nodes.iterator()},Ve.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},Ve.prototype.debugPrintln=function(t){V.out.println(t)},Ve.prototype.isBoundaryNode=function(t,e){var i=this._nodes.find(e)
if(null===i)return!1
var n=i.getLabel()
return null!==n&&n.getLocation(t)===I.BOUNDARY},Ve.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},Ve.prototype.matchInSameDirection=function(t,e,i,n){return!!t.equals(i)&&at.computeOrientation(t,e,n)===at.COLLINEAR&&je.quadrant(t,e)===je.quadrant(i,n)},Ve.prototype.getEdgeEnds=function(){return this._edgeEndList},Ve.prototype.debugPrint=function(t){V.out.print(t)},Ve.prototype.getEdgeIterator=function(){return this._edges.iterator()},Ve.prototype.findEdgeInSameDirection=function(t,e){for(var i=0;i<this._edges.size();i++){var n=this._edges.get(i),r=n.getCoordinates()
if(this.matchInSameDirection(t,e,r[0],r[1]))return n
if(this.matchInSameDirection(t,e,r[r.length-1],r[r.length-2]))return n}return null},Ve.prototype.insertEdge=function(t){this._edges.add(t)},Ve.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var i=e.next()
if(i.getEdge()===t)return i}return null},Ve.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var i=e.next()
this._edges.add(i)
var n=new Ue(i,!0),r=new Ue(i,!1)
n.setSym(r),r.setSym(n),this.add(n),this.add(r)}},Ve.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},Ve.prototype.getNodes=function(){return this._nodes.values()},Ve.prototype.findEdge=function(t,e){for(var i=0;i<this._edges.size();i++){var n=this._edges.get(i),r=n.getCoordinates()
if(t.equals(r[0])&&e.equals(r[1]))return n}return null},Ve.prototype.interfaces_=function(){return[]},Ve.prototype.getClass=function(){return Ve},Ve.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()}
var Ze=function(){this._geometryFactory=null,this._shellList=new Et
var t=arguments[0]
this._geometryFactory=t}
Ze.prototype.sortShellsAndHoles=function(t,e,i){for(var n=t.iterator();n.hasNext();){var r=n.next()
r.isHole()?i.add(r):e.add(r)}},Ze.prototype.computePolygons=function(t){for(var e=new Et,i=t.iterator();i.hasNext();){var n=i.next().toPolygon(this._geometryFactory)
e.add(n)}return e},Ze.prototype.placeFreeHoles=function(t,e){for(var i=e.iterator();i.hasNext();){var n=i.next()
if(null===n.getShell()){var r=this.findEdgeRingContaining(n,t)
if(null===r)throw new Ie("unable to assign hole to a shell",n.getCoordinate(0))
n.setShell(r)}}},Ze.prototype.buildMinimalEdgeRings=function(t,e,i){for(var n=new Et,r=t.iterator();r.hasNext();){var o=r.next()
if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings()
var s=o.buildMinimalRings(),a=this.findShell(s)
null!==a?(this.placePolygonHoles(a,s),e.add(a)):i.addAll(s)}else n.add(o)}return n},Ze.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0
return!1},Ze.prototype.buildMaximalEdgeRings=function(t){for(var e=new Et,i=t.iterator();i.hasNext();){var n=i.next()
if(n.isInResult()&&n.getLabel().isArea()&&null===n.getEdgeRing()){var r=new Ne(n,this._geometryFactory)
e.add(r),r.setInResult()}}return e},Ze.prototype.placePolygonHoles=function(t,e){for(var i=e.iterator();i.hasNext();){var n=i.next()
n.isHole()&&n.setShell(t)}},Ze.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Ze.prototype.findEdgeRingContaining=function(t,e){for(var i=t.getLinearRing(),n=i.getEnvelopeInternal(),r=i.getCoordinateN(0),o=null,s=null,a=e.iterator();a.hasNext();){var l=a.next(),h=l.getLinearRing(),u=h.getEnvelopeInternal()
null!==o&&(s=o.getLinearRing().getEnvelopeInternal())
var c=!1
u.contains(n)&&at.isPointInRing(r,h.getCoordinates())&&(c=!0),c&&(null===o||s.contains(u))&&(o=l)}return o},Ze.prototype.findShell=function(t){for(var e=0,i=null,n=t.iterator();n.hasNext();){var r=n.next()
r.isHole()||(i=r,e++)}return et.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),i},Ze.prototype.add=function(){if(1===arguments.length){var t=arguments[0]
this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0]
Ve.linkResultDirectedEdges(arguments[1])
var i=this.buildMaximalEdgeRings(e),n=new Et,r=this.buildMinimalEdgeRings(i,this._shellList,n)
this.sortShellsAndHoles(r,this._shellList,n),this.placeFreeHoles(this._shellList,n)}},Ze.prototype.interfaces_=function(){return[]},Ze.prototype.getClass=function(){return Ze}
var We=function(){}
We.prototype.getBounds=function(){},We.prototype.interfaces_=function(){return[]},We.prototype.getClass=function(){return We}
var Ye=function(){this._bounds=null,this._item=null
var t=arguments[0],e=arguments[1]
this._bounds=t,this._item=e}
Ye.prototype.getItem=function(){return this._item},Ye.prototype.getBounds=function(){return this._bounds},Ye.prototype.interfaces_=function(){return[We,e]},Ye.prototype.getClass=function(){return Ye}
var Xe=function(){this._size=null,this._items=null,this._size=0,this._items=new Et,this._items.add(null)}
Xe.prototype.poll=function(){if(this.isEmpty())return null
var t=this._items.get(1)
return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},Xe.prototype.size=function(){return this._size},Xe.prototype.reorder=function(t){for(var e=null,i=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(i)<0);t=e)this._items.set(t,this._items.get(e))
this._items.set(t,i)},Xe.prototype.clear=function(){this._size=0,this._items.clear()},Xe.prototype.isEmpty=function(){return 0===this._size},Xe.prototype.add=function(t){this._items.add(null),this._size+=1
var e=this._size
for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)))
this._items.set(e,t)},Xe.prototype.interfaces_=function(){return[]},Xe.prototype.getClass=function(){return Xe}
var He=function(){}
He.prototype.visitItem=function(t){},He.prototype.interfaces_=function(){return[]},He.prototype.getClass=function(){return He}
var $e=function(){}
$e.prototype.insert=function(t,e){},$e.prototype.remove=function(t,e){},$e.prototype.query=function(){},$e.prototype.interfaces_=function(){return[]},$e.prototype.getClass=function(){return $e}
var Ke=function(){if(this._childBoundables=new Et,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0]
this._level=t}},Je={serialVersionUID:{configurable:!0}}
Ke.prototype.getLevel=function(){return this._level},Ke.prototype.size=function(){return this._childBoundables.size()},Ke.prototype.getChildBoundables=function(){return this._childBoundables},Ke.prototype.addChildBoundable=function(t){et.isTrue(null===this._bounds),this._childBoundables.add(t)},Ke.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Ke.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Ke.prototype.interfaces_=function(){return[We,e]},Ke.prototype.getClass=function(){return Ke},Je.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Ke,Je)
var Qe=function(){}
Qe.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},Qe.min=function(t){return Qe.sort(t),t.get(0)},Qe.sort=function(t,e){var i=t.toArray()
e?kt.sort(i,e):kt.sort(i)
for(var n=t.iterator(),r=0,o=i.length;r<o;r++)n.next(),n.set(i[r])},Qe.singletonList=function(t){var e=new Et
return e.add(t),e}
var ti=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null
var t=arguments[0],e=arguments[1],i=arguments[2]
this._boundable1=t,this._boundable2=e,this._itemDistance=i,this._distance=this.distance()}
ti.prototype.expandToQueue=function(t,e){var i=ti.isComposite(this._boundable1),n=ti.isComposite(this._boundable2)
if(i&&n)return ti.area(this._boundable1)>ti.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null)
if(i)return this.expand(this._boundable1,this._boundable2,t,e),null
if(n)return this.expand(this._boundable2,this._boundable1,t,e),null
throw new y("neither boundable is composite")},ti.prototype.isLeaves=function(){return!(ti.isComposite(this._boundable1)||ti.isComposite(this._boundable2))},ti.prototype.compareTo=function(t){var e=t
return this._distance<e._distance?-1:this._distance>e._distance?1:0},ti.prototype.expand=function(t,e,i,n){for(var r=t.getChildBoundables().iterator();r.hasNext();){var o=r.next(),s=new ti(o,e,this._itemDistance)
s.getDistance()<n&&i.add(s)}},ti.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},ti.prototype.getDistance=function(){return this._distance},ti.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},ti.prototype.interfaces_=function(){return[b]},ti.prototype.getClass=function(){return ti},ti.area=function(t){return t.getBounds().getArea()},ti.isComposite=function(t){return t instanceof Ke}
var ei=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new Et,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY
this._nodeCapacity=e}else if(1===arguments.length){var i=arguments[0]
et.isTrue(i>1,"Node capacity must be greater than 1"),this._nodeCapacity=i}},ii={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}}
ei.prototype.getNodeCapacity=function(){return this._nodeCapacity},ei.prototype.lastNode=function(t){return t.get(t.size()-1)},ei.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root))
if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var i=e.next()
i instanceof Ke?t+=this.size(i):i instanceof Ye&&(t+=1)}return t}},ei.prototype.removeItem=function(t,e){for(var i=null,n=t.getChildBoundables().iterator();n.hasNext();){var r=n.next()
r instanceof Ye&&r.getItem()===e&&(i=r)}return null!==i&&(t.getChildBoundables().remove(i),!0)},ei.prototype.itemsTree=function(){if(0===arguments.length){this.build()
var t=this.itemsTree(this._root)
return null===t?new Et:t}if(1===arguments.length){for(var e=arguments[0],i=new Et,n=e.getChildBoundables().iterator();n.hasNext();){var r=n.next()
if(r instanceof Ke){var o=this.itemsTree(r)
null!==o&&i.add(o)}else r instanceof Ye?i.add(r.getItem()):et.shouldNeverReachHere()}return i.size()<=0?null:i}},ei.prototype.insert=function(t,e){et.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Ye(t,e))},ei.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new Et
return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var i=arguments[0],n=arguments[1],r=arguments[2]
if(et.isTrue(i>-2),n.getLevel()===i)return r.add(n),null
for(var o=n.getChildBoundables().iterator();o.hasNext();){var s=o.next()
s instanceof Ke?this.boundablesAtLevel(i,s,r):(et.isTrue(s instanceof Ye),-1===i&&r.add(s))}return null}},ei.prototype.query=function(){if(1===arguments.length){var t=arguments[0]
this.build()
var e=new Et
return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,e),e}if(2===arguments.length){var i=arguments[0],n=arguments[1]
if(this.build(),this.isEmpty())return null
this.getIntersectsOp().intersects(this._root.getBounds(),i)&&this.query(i,this._root,n)}else if(3===arguments.length)if(A(arguments[2],He)&&arguments[0]instanceof Object&&arguments[1]instanceof Ke)for(var r=arguments[0],o=arguments[2],s=arguments[1].getChildBoundables(),a=0;a<s.size();a++){var l=s.get(a)
this.getIntersectsOp().intersects(l.getBounds(),r)&&(l instanceof Ke?this.query(r,l,o):l instanceof Ye?o.visitItem(l.getItem()):et.shouldNeverReachHere())}else if(A(arguments[2],wt)&&arguments[0]instanceof Object&&arguments[1]instanceof Ke)for(var h=arguments[0],u=arguments[2],c=arguments[1].getChildBoundables(),d=0;d<c.size();d++){var f=c.get(d)
this.getIntersectsOp().intersects(f.getBounds(),h)&&(f instanceof Ke?this.query(h,f,u):f instanceof Ye?u.add(f.getItem()):et.shouldNeverReachHere())}},ei.prototype.build=function(){if(this._built)return null
this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},ei.prototype.getRoot=function(){return this.build(),this._root},ei.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1]
return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var i=arguments[0],n=arguments[1],r=arguments[2],o=this.removeItem(n,r)
if(o)return!0
for(var s=null,a=n.getChildBoundables().iterator();a.hasNext();){var l=a.next()
if(this.getIntersectsOp().intersects(l.getBounds(),i)&&l instanceof Ke&&(o=this.remove(i,l,r))){s=l
break}}return null!==s&&s.getChildBoundables().isEmpty()&&n.getChildBoundables().remove(s),o}},ei.prototype.createHigherLevels=function(t,e){et.isTrue(!t.isEmpty())
var i=this.createParentBoundables(t,e+1)
return 1===i.size()?i.get(0):this.createHigherLevels(i,e+1)},ei.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root))
if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var i=e.next()
if(i instanceof Ke){var n=this.depth(i)
n>t&&(t=n)}}return t+1}},ei.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty())
var i=new Et
i.add(this.createNode(e))
var n=new Et(t)
Qe.sort(n,this.getComparator())
for(var r=n.iterator();r.hasNext();){var o=r.next()
this.lastNode(i).getChildBoundables().size()===this.getNodeCapacity()&&i.add(this.createNode(e)),this.lastNode(i).addChildBoundable(o)}return i},ei.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},ei.prototype.interfaces_=function(){return[e]},ei.prototype.getClass=function(){return ei},ei.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},ii.IntersectsOp.get=function(){return ni},ii.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},ii.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(ei,ii)
var ni=function(){},ri=function(){}
ri.prototype.distance=function(t,e){},ri.prototype.interfaces_=function(){return[]},ri.prototype.getClass=function(){return ri}
var oi=function(t){function i(e){e=e||i.DEFAULT_NODE_CAPACITY,t.call(this,e)}t&&(i.__proto__=t),(i.prototype=Object.create(t&&t.prototype)).constructor=i
var n={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}}
return i.prototype.createParentBoundablesFromVerticalSlices=function(t,e){et.isTrue(t.length>0)
for(var i=new Et,n=0;n<t.length;n++)i.addAll(this.createParentBoundablesFromVerticalSlice(t[n],e))
return i},i.prototype.createNode=function(t){return new si(t)},i.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},i.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments)
var e=arguments[0],i=arguments[1]
if(e.isNull())return null
t.prototype.insert.call(this,e,i)},i.prototype.getIntersectsOp=function(){return i.intersectsOp},i.prototype.verticalSlices=function(t,e){for(var i=Math.trunc(Math.ceil(t.size()/e)),n=new Array(e).fill(null),r=t.iterator(),o=0;o<e;o++){n[o]=new Et
for(var s=0;r.hasNext()&&s<i;){var a=r.next()
n[o].add(a),s++}}return n},i.prototype.query=function(){if(1===arguments.length){var e=arguments[0]
return t.prototype.query.call(this,e)}if(2===arguments.length){var i=arguments[0],n=arguments[1]
t.prototype.query.call(this,i,n)}else if(3===arguments.length)if(A(arguments[2],He)&&arguments[0]instanceof Object&&arguments[1]instanceof Ke){var r=arguments[0],o=arguments[1],s=arguments[2]
t.prototype.query.call(this,r,o,s)}else if(A(arguments[2],wt)&&arguments[0]instanceof Object&&arguments[1]instanceof Ke){var a=arguments[0],l=arguments[1],h=arguments[2]
t.prototype.query.call(this,a,l,h)}},i.prototype.getComparator=function(){return i.yComparator},i.prototype.createParentBoundablesFromVerticalSlice=function(e,i){return t.prototype.createParentBoundables.call(this,e,i)},i.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],i=arguments[1]
return t.prototype.remove.call(this,e,i)}return t.prototype.remove.apply(this,arguments)},i.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},i.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty())
var n=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),r=new Et(t)
Qe.sort(r,i.xComparator)
var o=this.verticalSlices(r,Math.trunc(Math.ceil(Math.sqrt(n))))
return this.createParentBoundablesFromVerticalSlices(o,e)},i.prototype.nearestNeighbour=function(){if(1===arguments.length){if(A(arguments[0],ri)){var t=arguments[0],e=new ti(this.getRoot(),this.getRoot(),t)
return this.nearestNeighbour(e)}if(arguments[0]instanceof ti){var n=arguments[0]
return this.nearestNeighbour(n,v.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof i&&A(arguments[1],ri)){var r=arguments[0],o=arguments[1],s=new ti(this.getRoot(),r.getRoot(),o)
return this.nearestNeighbour(s)}if(arguments[0]instanceof ti&&"number"==typeof arguments[1]){var a=arguments[0],l=arguments[1],h=null,u=new Xe
for(u.add(a);!u.isEmpty()&&l>0;){var c=u.poll(),d=c.getDistance()
if(d>=l)break
c.isLeaves()?(l=d,h=c):c.expandToQueue(u,l)}return[h.getBoundable(0).getItem(),h.getBoundable(1).getItem()]}}else if(3===arguments.length){var f=arguments[2],p=new Ye(arguments[0],arguments[1]),g=new ti(this.getRoot(),p,f)
return this.nearestNeighbour(g)[0]}},i.prototype.interfaces_=function(){return[$e,e]},i.prototype.getClass=function(){return i},i.centreX=function(t){return i.avg(t.getMinX(),t.getMaxX())},i.avg=function(t,e){return(t+e)/2},i.centreY=function(t){return i.avg(t.getMinY(),t.getMaxY())},n.STRtreeNode.get=function(){return si},n.serialVersionUID.get=function(){return 0x39920f7d5f261e0},n.xComparator.get=function(){return{interfaces_:function(){return[E]},compare:function(e,n){return t.compareDoubles(i.centreX(e.getBounds()),i.centreX(n.getBounds()))}}},n.yComparator.get=function(){return{interfaces_:function(){return[E]},compare:function(e,n){return t.compareDoubles(i.centreY(e.getBounds()),i.centreY(n.getBounds()))}}},n.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},n.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(i,n),i}(ei),si=function(t){function e(){var e=arguments[0]
t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var i=e.next()
null===t?t=new W(i.getBounds()):t.expandToInclude(i.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ke),ai=function(){}
ai.prototype.interfaces_=function(){return[]},ai.prototype.getClass=function(){return ai},ai.relativeSign=function(t,e){return t<e?-1:t>e?1:0},ai.compare=function(t,e,i){if(e.equals2D(i))return 0
var n=ai.relativeSign(e.x,i.x),r=ai.relativeSign(e.y,i.y)
switch(t){case 0:return ai.compareValue(n,r)
case 1:return ai.compareValue(r,n)
case 2:return ai.compareValue(r,-n)
case 3:return ai.compareValue(-n,r)
case 4:return ai.compareValue(-n,-r)
case 5:return ai.compareValue(-r,-n)
case 6:return ai.compareValue(-r,n)
case 7:return ai.compareValue(n,-r)}return et.shouldNeverReachHere("invalid octant value"),0},ai.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0}
var li=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null
var t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3]
this._segString=t,this.coord=new S(e),this.segmentIndex=i,this._segmentOctant=n,this._isInterior=!e.equals2D(t.getCoordinate(i))}
li.prototype.getCoordinate=function(){return this.coord},li.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},li.prototype.compareTo=function(t){var e=t
return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:ai.compare(this._segmentOctant,this.coord,e.coord)},li.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},li.prototype.isInterior=function(){return this._isInterior},li.prototype.interfaces_=function(){return[b]},li.prototype.getClass=function(){return li}
var hi=function(){this._nodeMap=new c,this._edge=null
var t=arguments[0]
this._edge=t}
hi.prototype.getSplitCoordinates=function(){var t=new Ct
this.addEndpoints()
for(var e=this.iterator(),i=e.next();e.hasNext();){var n=e.next()
this.addEdgeCoordinates(i,n,t),i=n}return t.toCoordinateArray()},hi.prototype.addCollapsedNodes=function(){var t=new Et
this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t)
for(var e=t.iterator();e.hasNext();){var i=e.next().intValue()
this.add(this._edge.getCoordinate(i),i)}},hi.prototype.print=function(t){t.println("Intersections:")
for(var e=this.iterator();e.hasNext();)e.next().print(t)},hi.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var i=this._edge.getCoordinate(e),n=this._edge.getCoordinate(e+2)
i.equals2D(n)&&t.add(new D(e+1))}},hi.prototype.addEdgeCoordinates=function(t,e,i){var n=this._edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(n)
i.add(new S(t.coord),!1)
for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)i.add(this._edge.getCoordinate(o))
r&&i.add(new S(e.coord))},hi.prototype.iterator=function(){return this._nodeMap.values().iterator()},hi.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes()
for(var e=this.iterator(),i=e.next();e.hasNext();){var n=e.next(),r=this.createSplitEdge(i,n)
t.add(r),i=n}},hi.prototype.findCollapseIndex=function(t,e,i){if(!t.coord.equals2D(e.coord))return!1
var n=e.segmentIndex-t.segmentIndex
return e.isInterior()||n--,1===n&&(i[0]=t.segmentIndex+1,!0)},hi.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),i=this.iterator(),n=i.next();i.hasNext();){var r=i.next()
this.findCollapseIndex(n,r,e)&&t.add(new D(e[0])),n=r}},hi.prototype.getEdge=function(){return this._edge},hi.prototype.addEndpoints=function(){var t=this._edge.size()-1
this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},hi.prototype.createSplitEdge=function(t,e){var i=e.segmentIndex-t.segmentIndex+2,n=this._edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(n)
r||i--
var o=new Array(i).fill(null),s=0
o[s++]=new S(t.coord)
for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this._edge.getCoordinate(a)
return r&&(o[s]=new S(e.coord)),new fi(o,this._edge.getData())},hi.prototype.add=function(t,e){var i=new li(this._edge,t,e,this._edge.getSegmentOctant(e)),n=this._nodeMap.get(i)
return null!==n?(et.isTrue(n.coord.equals2D(t),"Found equal nodes with different coordinates"),n):(this._nodeMap.put(i,i),i)},hi.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),i=t.get(0).getCoordinate(0)
if(!i.equals2D(e[0]))throw new Q("bad split edge start point at "+i)
var n=t.get(t.size()-1).getCoordinates(),r=n[n.length-1]
if(!r.equals2D(e[e.length-1]))throw new Q("bad split edge end point at "+r)},hi.prototype.interfaces_=function(){return[]},hi.prototype.getClass=function(){return hi}
var ui=function(){}
ui.prototype.interfaces_=function(){return[]},ui.prototype.getClass=function(){return ui},ui.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1]
if(0===t&&0===e)throw new y("Cannot compute the octant for point ( "+t+", "+e+" )")
var i=Math.abs(t),n=Math.abs(e)
return t>=0?e>=0?i>=n?0:1:i>=n?7:6:e>=0?i>=n?3:2:i>=n?4:5}if(arguments[0]instanceof S&&arguments[1]instanceof S){var r=arguments[0],o=arguments[1],s=o.x-r.x,a=o.y-r.y
if(0===s&&0===a)throw new y("Cannot compute the octant for two identical points "+r)
return ui.octant(s,a)}}
var ci=function(){}
ci.prototype.getCoordinates=function(){},ci.prototype.size=function(){},ci.prototype.getCoordinate=function(t){},ci.prototype.isClosed=function(){},ci.prototype.setData=function(t){},ci.prototype.getData=function(){},ci.prototype.interfaces_=function(){return[]},ci.prototype.getClass=function(){return ci}
var di=function(){}
di.prototype.addIntersection=function(t,e){},di.prototype.interfaces_=function(){return[ci]},di.prototype.getClass=function(){return di}
var fi=function(){this._nodeList=new hi(this),this._pts=null,this._data=null
var t=arguments[0],e=arguments[1]
this._pts=t,this._data=e}
fi.prototype.getCoordinates=function(){return this._pts},fi.prototype.size=function(){return this._pts.length},fi.prototype.getCoordinate=function(t){return this._pts[t]},fi.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},fi.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},fi.prototype.setData=function(t){this._data=t},fi.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:ui.octant(t,e)},fi.prototype.getData=function(){return this._data},fi.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1]
this.addIntersectionNode(t,e)}else if(4===arguments.length){var i=arguments[1],n=arguments[3],r=new S(arguments[0].getIntersection(n))
this.addIntersection(r,i)}},fi.prototype.toString=function(){return J.toLineString(new le(this._pts))},fi.prototype.getNodeList=function(){return this._nodeList},fi.prototype.addIntersectionNode=function(t,e){var i=e,n=i+1
if(n<this._pts.length){var r=this._pts[n]
t.equals2D(r)&&(i=n)}return this._nodeList.add(t,i)},fi.prototype.addIntersections=function(t,e,i){for(var n=0;n<t.getIntersectionNum();n++)this.addIntersection(t,e,i,n)},fi.prototype.interfaces_=function(){return[di]},fi.prototype.getClass=function(){return fi},fi.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new Et
return fi.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var i=arguments[1],n=arguments[0].iterator();n.hasNext();)n.next().getNodeList().addSplitEdges(i)}
var pi=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new S,this.p1=new S
else if(1===arguments.length){var t=arguments[0]
this.p0=new S(t.p0),this.p1=new S(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1]
else if(4===arguments.length){var e=arguments[0],i=arguments[1],n=arguments[2],r=arguments[3]
this.p0=new S(e,i),this.p1=new S(n,r)}},gi={serialVersionUID:{configurable:!0}}
pi.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},pi.prototype.orientationIndex=function(){if(arguments[0]instanceof pi){var t=arguments[0],e=at.orientationIndex(this.p0,this.p1,t.p0),i=at.orientationIndex(this.p0,this.p1,t.p1)
return e>=0&&i>=0||e<=0&&i<=0?Math.max(e,i):0}if(arguments[0]instanceof S){var n=arguments[0]
return at.orientationIndex(this.p0,this.p1,n)}},pi.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},pi.prototype.isVertical=function(){return this.p0.x===this.p1.x},pi.prototype.equals=function(t){if(!(t instanceof pi))return!1
var e=t
return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},pi.prototype.intersection=function(t){var e=new rt
return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},pi.prototype.project=function(){if(arguments[0]instanceof S){var t=arguments[0]
if(t.equals(this.p0)||t.equals(this.p1))return new S(t)
var e=this.projectionFactor(t),i=new S
return i.x=this.p0.x+e*(this.p1.x-this.p0.x),i.y=this.p0.y+e*(this.p1.y-this.p0.y),i}if(arguments[0]instanceof pi){var n=arguments[0],r=this.projectionFactor(n.p0),o=this.projectionFactor(n.p1)
if(r>=1&&o>=1)return null
if(r<=0&&o<=0)return null
var s=this.project(n.p0)
r<0&&(s=this.p0),r>1&&(s=this.p1)
var a=this.project(n.p1)
return o<0&&(a=this.p0),o>1&&(a=this.p1),new pi(s,a)}},pi.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},pi.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},pi.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},pi.prototype.distancePerpendicular=function(t){return at.distancePointLinePerpendicular(t,this.p0,this.p1)},pi.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},pi.prototype.midPoint=function(){return pi.midPoint(this.p0,this.p1)},pi.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0
if(t.equals(this.p1))return 1
var e=this.p1.x-this.p0.x,i=this.p1.y-this.p0.y,n=e*e+i*i
return n<=0?v.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*i)/n},pi.prototype.closestPoints=function(t){var e=this.intersection(t)
if(null!==e)return[e,e]
var i=new Array(2).fill(null),n=v.MAX_VALUE,r=null,o=this.closestPoint(t.p0)
n=o.distance(t.p0),i[0]=o,i[1]=t.p0
var s=this.closestPoint(t.p1);(r=s.distance(t.p1))<n&&(n=r,i[0]=s,i[1]=t.p1)
var a=t.closestPoint(this.p0);(r=a.distance(this.p0))<n&&(n=r,i[0]=this.p0,i[1]=a)
var l=t.closestPoint(this.p1)
return(r=l.distance(this.p1))<n&&(n=r,i[0]=this.p1,i[1]=l),i},pi.prototype.closestPoint=function(t){var e=this.projectionFactor(t)
return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},pi.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},pi.prototype.getLength=function(){return this.p0.distance(this.p1)},pi.prototype.compareTo=function(t){var e=t,i=this.p0.compareTo(e.p0)
return 0!==i?i:this.p1.compareTo(e.p1)},pi.prototype.reverse=function(){var t=this.p0
this.p0=this.p1,this.p1=t},pi.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},pi.prototype.lineIntersection=function(t){try{return Z.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof q))throw t}return null},pi.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},pi.prototype.pointAlongOffset=function(t,e){var i=this.p0.x+t*(this.p1.x-this.p0.x),n=this.p0.y+t*(this.p1.y-this.p0.y),r=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,s=Math.sqrt(r*r+o*o),a=0,l=0
if(0!==e){if(s<=0)throw new Error("Cannot compute offset from zero-length line segment")
a=e*r/s,l=e*o/s}return new S(i-l,n+a)},pi.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0]
this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],i=arguments[1]
this.p0.x=e.x,this.p0.y=e.y,this.p1.x=i.x,this.p1.y=i.y}},pi.prototype.segmentFraction=function(t){var e=this.projectionFactor(t)
return e<0?e=0:(e>1||v.isNaN(e))&&(e=1),e},pi.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},pi.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},pi.prototype.distance=function(){if(arguments[0]instanceof pi){var t=arguments[0]
return at.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof S){var e=arguments[0]
return at.distancePointLine(e,this.p0,this.p1)}},pi.prototype.pointAlong=function(t){var e=new S
return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},pi.prototype.hashCode=function(){var t=v.doubleToLongBits(this.p0.x)
t^=31*v.doubleToLongBits(this.p0.y)
var e=Math.trunc(t)^Math.trunc(t>>32),i=v.doubleToLongBits(this.p1.x)
return i^=31*v.doubleToLongBits(this.p1.y),e^Math.trunc(i)^Math.trunc(i>>32)},pi.prototype.interfaces_=function(){return[b,e]},pi.prototype.getClass=function(){return pi},pi.midPoint=function(t,e){return new S((t.x+e.x)/2,(t.y+e.y)/2)},gi.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(pi,gi)
var _i=function(){this.tempEnv1=new W,this.tempEnv2=new W,this._overlapSeg1=new pi,this._overlapSeg2=new pi}
_i.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[1],e=arguments[2],i=arguments[3]
arguments[0].getLineSegment(t,this._overlapSeg1),e.getLineSegment(i,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},_i.prototype.interfaces_=function(){return[]},_i.prototype.getClass=function(){return _i}
var mi=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null
var t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3]
this._pts=t,this._start=e,this._end=i,this._context=n}
mi.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},mi.prototype.computeSelect=function(t,e,i,n){var r=this._pts[e],o=this._pts[i]
if(n.tempEnv1.init(r,o),i-e==1)return n.select(this,e),null
if(!t.intersects(n.tempEnv1))return null
var s=Math.trunc((e+i)/2)
e<s&&this.computeSelect(t,e,s,n),s<i&&this.computeSelect(t,s,i,n)},mi.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,i=this._start;i<=this._end;i++)t[e++]=this._pts[i]
return t},mi.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},mi.prototype.setId=function(t){this._id=t},mi.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},mi.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end]
this._env=new W(t,e)}return this._env},mi.prototype.getEndIndex=function(){return this._end},mi.prototype.getStartIndex=function(){return this._start},mi.prototype.getContext=function(){return this._context},mi.prototype.getId=function(){return this._id},mi.prototype.computeOverlapsInternal=function(t,e,i,n,r,o){var s=this._pts[t],a=this._pts[e],l=i._pts[n],h=i._pts[r]
if(e-t==1&&r-n==1)return o.overlap(this,t,i,n),null
if(o.tempEnv1.init(s,a),o.tempEnv2.init(l,h),!o.tempEnv1.intersects(o.tempEnv2))return null
var u=Math.trunc((t+e)/2),c=Math.trunc((n+r)/2)
t<u&&(n<c&&this.computeOverlapsInternal(t,u,i,n,c,o),c<r&&this.computeOverlapsInternal(t,u,i,c,r,o)),u<e&&(n<c&&this.computeOverlapsInternal(u,e,i,n,c,o),c<r&&this.computeOverlapsInternal(u,e,i,c,r,o))},mi.prototype.interfaces_=function(){return[]},mi.prototype.getClass=function(){return mi}
var yi=function(){}
yi.prototype.interfaces_=function(){return[]},yi.prototype.getClass=function(){return yi},yi.getChainStartIndices=function(t){var e=0,i=new Et
i.add(new D(e))
do{var n=yi.findChainEnd(t,e)
i.add(new D(n)),e=n}while(e<t.length-1)
return yi.toIntArray(i)},yi.findChainEnd=function(t,e){for(var i=e;i<t.length-1&&t[i].equals2D(t[i+1]);)i++
if(i>=t.length-1)return t.length-1
for(var n=je.quadrant(t[i],t[i+1]),r=e+1;r<t.length&&(t[r-1].equals2D(t[r])||je.quadrant(t[r-1],t[r])===n);)r++
return r-1},yi.getChains=function(){if(1===arguments.length)return yi.getChains(arguments[0],null)
if(2===arguments.length){for(var t=arguments[0],e=arguments[1],i=new Et,n=yi.getChainStartIndices(t),r=0;r<n.length-1;r++){var o=new mi(t,n[r],n[r+1],e)
i.add(o)}return i}},yi.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),i=0;i<e.length;i++)e[i]=t.get(i).intValue()
return e}
var vi=function(){}
vi.prototype.computeNodes=function(t){},vi.prototype.getNodedSubstrings=function(){},vi.prototype.interfaces_=function(){return[]},vi.prototype.getClass=function(){return vi}
var xi=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0]
this.setSegmentIntersector(t)}}
xi.prototype.setSegmentIntersector=function(t){this._segInt=t},xi.prototype.interfaces_=function(){return[vi]},xi.prototype.getClass=function(){return xi}
var bi=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new Et,this._index=new oi,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e
var i={SegmentOverlapAction:{configurable:!0}}
return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return fi.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=yi.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var i=e.next()
i.setId(this._idCounter++),this._index.insert(i.getEnvelope(),i),this._monoChains.add(i)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t
for(var e=t.iterator();e.hasNext();)this.add(e.next())
this.intersectChains()},e.prototype.intersectChains=function(){for(var t=new wi(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var i=e.next(),n=this._index.query(i.getEnvelope()).iterator();n.hasNext();){var r=n.next()
if(r.getId()>i.getId()&&(i.computeOverlaps(r,t),this._nOverlaps++),this._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},i.SegmentOverlapAction.get=function(){return wi},Object.defineProperties(e,i),e}(xi),wi=function(t){function e(){t.call(this),this._si=null
var e=arguments[0]
this._si=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments)
var e=arguments[1],i=arguments[2],n=arguments[3],r=arguments[0].getContext(),o=i.getContext()
this._si.processIntersections(r,e,o,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(_i),Ei=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0]
this.setQuadrantSegments(e)}else if(2===arguments.length){var i=arguments[0],n=arguments[1]
this.setQuadrantSegments(i),this.setEndCapStyle(n)}else if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3]
this.setQuadrantSegments(r),this.setEndCapStyle(o),this.setJoinStyle(s),this.setMitreLimit(a)}},Si={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}}
Ei.prototype.getEndCapStyle=function(){return this._endCapStyle},Ei.prototype.isSingleSided=function(){return this._isSingleSided},Ei.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=Ei.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Ei.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Ei.JOIN_ROUND&&(this._quadrantSegments=Ei.DEFAULT_QUADRANT_SEGMENTS)},Ei.prototype.getJoinStyle=function(){return this._joinStyle},Ei.prototype.setJoinStyle=function(t){this._joinStyle=t},Ei.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},Ei.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Ei.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Ei.prototype.setEndCapStyle=function(t){this._endCapStyle=t},Ei.prototype.getMitreLimit=function(){return this._mitreLimit},Ei.prototype.setMitreLimit=function(t){this._mitreLimit=t},Ei.prototype.setSingleSided=function(t){this._isSingleSided=t},Ei.prototype.interfaces_=function(){return[]},Ei.prototype.getClass=function(){return Ei},Ei.bufferDistanceError=function(t){var e=Math.PI/2/t
return 1-Math.cos(e/2)},Si.CAP_ROUND.get=function(){return 1},Si.CAP_FLAT.get=function(){return 2},Si.CAP_SQUARE.get=function(){return 3},Si.JOIN_ROUND.get=function(){return 1},Si.JOIN_MITRE.get=function(){return 2},Si.JOIN_BEVEL.get=function(){return 3},Si.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},Si.DEFAULT_MITRE_LIMIT.get=function(){return 5},Si.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(Ei,Si)
var Ci=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=at.COUNTERCLOCKWISE,this._inputLine=t||null},Pi={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}}
Ci.prototype.isDeletable=function(t,e,i,n){var r=this._inputLine[t],o=this._inputLine[e],s=this._inputLine[i]
return!!this.isConcave(r,o,s)&&!!this.isShallow(r,o,s,n)&&this.isShallowSampled(r,o,t,i,n)},Ci.prototype.deleteShallowConcavities=function(){for(var t=1,e=this.findNextNonDeletedIndex(t),i=this.findNextNonDeletedIndex(e),n=!1;i<this._inputLine.length;){var r=!1
this.isDeletable(t,e,i,this._distanceTol)&&(this._isDeleted[e]=Ci.DELETE,r=!0,n=!0),t=r?i:e,e=this.findNextNonDeletedIndex(t),i=this.findNextNonDeletedIndex(e)}return n},Ci.prototype.isShallowConcavity=function(t,e,i,n){return at.computeOrientation(t,e,i)===this._angleOrientation&&at.distancePointLine(e,t,i)<n},Ci.prototype.isShallowSampled=function(t,e,i,n,r){var o=Math.trunc((n-i)/Ci.NUM_PTS_TO_CHECK)
o<=0&&(o=1)
for(var s=i;s<n;s+=o)if(!this.isShallow(t,e,this._inputLine[s],r))return!1
return!0},Ci.prototype.isConcave=function(t,e,i){return at.computeOrientation(t,e,i)===this._angleOrientation},Ci.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=at.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null)
var e=!1
do{e=this.deleteShallowConcavities()}while(e)
return this.collapseLine()},Ci.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===Ci.DELETE;)e++
return e},Ci.prototype.isShallow=function(t,e,i,n){return at.distancePointLine(e,t,i)<n},Ci.prototype.collapseLine=function(){for(var t=new Ct,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Ci.DELETE&&t.add(this._inputLine[e])
return t.toCoordinateArray()},Ci.prototype.interfaces_=function(){return[]},Ci.prototype.getClass=function(){return Ci},Ci.simplify=function(t,e){return new Ci(t).simplify(e)},Pi.INIT.get=function(){return 0},Pi.DELETE.get=function(){return 1},Pi.KEEP.get=function(){return 1},Pi.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Ci,Pi)
var Ti=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new Et},Ii={COORDINATE_ARRAY_TYPE:{configurable:!0}}
Ti.prototype.getCoordinates=function(){return this._ptList.toArray(Ti.COORDINATE_ARRAY_TYPE)},Ti.prototype.setPrecisionModel=function(t){this._precisionModel=t},Ti.prototype.addPt=function(t){var e=new S(t)
if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null
this._ptList.add(e)},Ti.prototype.revere=function(){},Ti.prototype.addPts=function(t,e){if(e)for(var i=0;i<t.length;i++)this.addPt(t[i])
else for(var n=t.length-1;n>=0;n--)this.addPt(t[n])},Ti.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1
var e=this._ptList.get(this._ptList.size()-1)
return t.distance(e)<this._minimimVertexDistance},Ti.prototype.toString=function(){return(new me).createLineString(this.getCoordinates()).toString()},Ti.prototype.closeRing=function(){if(this._ptList.size()<1)return null
var t=new S(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1)
if(t.equals(e))return null
this._ptList.add(t)},Ti.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},Ti.prototype.interfaces_=function(){return[]},Ti.prototype.getClass=function(){return Ti},Ii.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Ti,Ii)
var Mi=function(){},Ai={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}}
Mi.prototype.interfaces_=function(){return[]},Mi.prototype.getClass=function(){return Mi},Mi.toDegrees=function(t){return 180*t/Math.PI},Mi.normalize=function(t){for(;t>Math.PI;)t-=Mi.PI_TIMES_2
for(;t<=-Math.PI;)t+=Mi.PI_TIMES_2
return t},Mi.angle=function(){if(1===arguments.length){var t=arguments[0]
return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],i=arguments[1],n=i.x-e.x,r=i.y-e.y
return Math.atan2(r,n)}},Mi.isAcute=function(t,e,i){var n=t.x-e.x,r=t.y-e.y
return n*(i.x-e.x)+r*(i.y-e.y)>0},Mi.isObtuse=function(t,e,i){var n=t.x-e.x,r=t.y-e.y
return n*(i.x-e.x)+r*(i.y-e.y)<0},Mi.interiorAngle=function(t,e,i){var n=Mi.angle(e,t),r=Mi.angle(e,i)
return Math.abs(r-n)},Mi.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Mi.PI_TIMES_2
t>=Mi.PI_TIMES_2&&(t=0)}else{for(;t>=Mi.PI_TIMES_2;)t-=Mi.PI_TIMES_2
t<0&&(t=0)}return t},Mi.angleBetween=function(t,e,i){var n=Mi.angle(e,t),r=Mi.angle(e,i)
return Mi.diff(n,r)},Mi.diff=function(t,e){var i=null
return(i=t<e?e-t:t-e)>Math.PI&&(i=2*Math.PI-i),i},Mi.toRadians=function(t){return t*Math.PI/180},Mi.getTurn=function(t,e){var i=Math.sin(e-t)
return i>0?Mi.COUNTERCLOCKWISE:i<0?Mi.CLOCKWISE:Mi.NONE},Mi.angleBetweenOriented=function(t,e,i){var n=Mi.angle(e,t),r=Mi.angle(e,i)-n
return r<=-Math.PI?r+Mi.PI_TIMES_2:r>Math.PI?r-Mi.PI_TIMES_2:r},Ai.PI_TIMES_2.get=function(){return 2*Math.PI},Ai.PI_OVER_2.get=function(){return Math.PI/2},Ai.PI_OVER_4.get=function(){return Math.PI/4},Ai.COUNTERCLOCKWISE.get=function(){return at.COUNTERCLOCKWISE},Ai.CLOCKWISE.get=function(){return at.CLOCKWISE},Ai.NONE.get=function(){return at.COLLINEAR},Object.defineProperties(Mi,Ai)
var Ri=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new pi,this._seg1=new pi,this._offset0=new pi,this._offset1=new pi,this._side=0,this._hasNarrowConcaveAngle=!1
var e=arguments[0],i=arguments[1],n=arguments[2]
this._precisionModel=e,this._bufParams=i,this._li=new rt,this._filletAngleQuantum=Math.PI/2/i.getQuadrantSegments(),i.getQuadrantSegments()>=8&&i.getJoinStyle()===Ei.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(n)},Li={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}}
Ri.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null
var i=at.computeOrientation(this._s0,this._s1,this._s2),n=i===at.CLOCKWISE&&this._side===Ce.LEFT||i===at.COUNTERCLOCKWISE&&this._side===Ce.RIGHT
0===i?this.addCollinear(e):n?this.addOutsideTurn(i,e):this.addInsideTurn(i,e)},Ri.prototype.addLineEndCap=function(t,e){var i=new pi(t,e),n=new pi
this.computeOffsetSegment(i,Ce.LEFT,this._distance,n)
var r=new pi
this.computeOffsetSegment(i,Ce.RIGHT,this._distance,r)
var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o)
switch(this._bufParams.getEndCapStyle()){case Ei.CAP_ROUND:this._segList.addPt(n.p1),this.addFilletArc(e,a+Math.PI/2,a-Math.PI/2,at.CLOCKWISE,this._distance),this._segList.addPt(r.p1)
break
case Ei.CAP_FLAT:this._segList.addPt(n.p1),this._segList.addPt(r.p1)
break
case Ei.CAP_SQUARE:var l=new S
l.x=Math.abs(this._distance)*Math.cos(a),l.y=Math.abs(this._distance)*Math.sin(a)
var h=new S(n.p1.x+l.x,n.p1.y+l.y),u=new S(r.p1.x+l.x,r.p1.y+l.y)
this._segList.addPt(h),this._segList.addPt(u)}},Ri.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Ri.prototype.addMitreJoin=function(t,e,i,n){var r=!0,o=null
try{o=Z.intersection(e.p0,e.p1,i.p0,i.p1),(n<=0?1:o.distance(t)/Math.abs(n))>this._bufParams.getMitreLimit()&&(r=!1)}catch(t){if(!(t instanceof q))throw t
o=new S(0,0),r=!1}r?this._segList.addPt(o):this.addLimitedMitreJoin(e,i,n,this._bufParams.getMitreLimit())},Ri.prototype.addFilletCorner=function(t,e,i,n,r){var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o),l=i.x-t.x,h=i.y-t.y,u=Math.atan2(h,l)
n===at.CLOCKWISE?a<=u&&(a+=2*Math.PI):a>=u&&(a-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,a,u,n,r),this._segList.addPt(i)},Ri.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Ri.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null
this._bufParams.getJoinStyle()===Ei.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Ei.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},Ri.prototype.createSquare=function(t){this._segList.addPt(new S(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new S(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new S(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new S(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},Ri.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},Ri.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Ri.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Ri.prototype.initSideSegments=function(t,e,i){this._s1=t,this._s2=e,this._side=i,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,i,this._distance,this._offset1)},Ri.prototype.addLimitedMitreJoin=function(t,e,i,n){var r=this._seg0.p1,o=Mi.angle(r,this._seg0.p0),s=Mi.angleBetweenOriented(this._seg0.p0,r,this._seg1.p1)/2,a=Mi.normalize(o+s),l=Mi.normalize(a+Math.PI),h=n*i,u=i-h*Math.abs(Math.sin(s)),c=r.x+h*Math.cos(l),d=r.y+h*Math.sin(l),f=new S(c,d),p=new pi(r,f),g=p.pointAlongOffset(1,u),_=p.pointAlongOffset(1,-u)
this._side===Ce.LEFT?(this._segList.addPt(g),this._segList.addPt(_)):(this._segList.addPt(_),this._segList.addPt(g))},Ri.prototype.computeOffsetSegment=function(t,e,i,n){var r=e===Ce.LEFT?1:-1,o=t.p1.x-t.p0.x,s=t.p1.y-t.p0.y,a=Math.sqrt(o*o+s*s),l=r*i*o/a,h=r*i*s/a
n.p0.x=t.p0.x-h,n.p0.y=t.p0.y+l,n.p1.x=t.p1.x-h,n.p1.y=t.p1.y+l},Ri.prototype.addFilletArc=function(t,e,i,n,r){var o=n===at.CLOCKWISE?-1:1,s=Math.abs(e-i),a=Math.trunc(s/this._filletAngleQuantum+.5)
if(a<1)return null
for(var l=s/a,h=0,u=new S;h<s;){var c=e+o*h
u.x=t.x+r*Math.cos(c),u.y=t.y+r*Math.sin(c),this._segList.addPt(u),h+=l}},Ri.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0))
else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Ri.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1)
else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var i=new S((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1))
this._segList.addPt(i)
var n=new S((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1))
this._segList.addPt(n)}else this._segList.addPt(this._s1)
this._segList.addPt(this._offset1.p0)}},Ri.prototype.createCircle=function(t){var e=new S(t.x+this._distance,t.y)
this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Ri.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},Ri.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Ti,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*Ri.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Ri.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Ei.JOIN_BEVEL||this._bufParams.getJoinStyle()===Ei.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,at.CLOCKWISE,this._distance))},Ri.prototype.closeRing=function(){this._segList.closeRing()},Ri.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Ri.prototype.interfaces_=function(){return[]},Ri.prototype.getClass=function(){return Ri},Li.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},Li.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},Li.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},Li.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Ri,Li)
var Oi=function(){this._distance=0,this._precisionModel=null,this._bufParams=null
var t=arguments[0],e=arguments[1]
this._precisionModel=t,this._bufParams=e}
Oi.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null
var i=e<0,n=Math.abs(e),r=this.getSegGen(n)
t.length<=1?this.computePointCurve(t[0],r):this.computeOffsetCurve(t,i,r)
var o=r.getCoordinates()
return i&&Pt.reverse(o),o},Oi.prototype.computeSingleSidedBufferCurve=function(t,e,i){var n=this.simplifyTolerance(this._distance)
if(e){i.addSegments(t,!0)
var r=Ci.simplify(t,-n),o=r.length-1
i.initSideSegments(r[o],r[o-1],Ce.LEFT),i.addFirstSegment()
for(var s=o-2;s>=0;s--)i.addNextSegment(r[s],!0)}else{i.addSegments(t,!1)
var a=Ci.simplify(t,n),l=a.length-1
i.initSideSegments(a[0],a[1],Ce.LEFT),i.addFirstSegment()
for(var h=2;h<=l;h++)i.addNextSegment(a[h],!0)}i.addLastSegment(),i.closeRing()},Oi.prototype.computeRingBufferCurve=function(t,e,i){var n=this.simplifyTolerance(this._distance)
e===Ce.RIGHT&&(n=-n)
var r=Ci.simplify(t,n),o=r.length-1
i.initSideSegments(r[o-1],r[0],e)
for(var s=1;s<=o;s++){var a=1!==s
i.addNextSegment(r[s],a)}i.closeRing()},Oi.prototype.computeLineBufferCurve=function(t,e){var i=this.simplifyTolerance(this._distance),n=Ci.simplify(t,i),r=n.length-1
e.initSideSegments(n[0],n[1],Ce.LEFT)
for(var o=2;o<=r;o++)e.addNextSegment(n[o],!0)
e.addLastSegment(),e.addLineEndCap(n[r-1],n[r])
var s=Ci.simplify(t,-i),a=s.length-1
e.initSideSegments(s[a],s[a-1],Ce.LEFT)
for(var l=a-2;l>=0;l--)e.addNextSegment(s[l],!0)
e.addLastSegment(),e.addLineEndCap(s[1],s[0]),e.closeRing()},Oi.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case Ei.CAP_ROUND:e.createCircle(t)
break
case Ei.CAP_SQUARE:e.createSquare(t)}},Oi.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null
if(0===e)return null
var i=Math.abs(e),n=this.getSegGen(i)
if(t.length<=1)this.computePointCurve(t[0],n)
else if(this._bufParams.isSingleSided()){var r=e<0
this.computeSingleSidedBufferCurve(t,r,n)}else this.computeLineBufferCurve(t,n)
return n.getCoordinates()},Oi.prototype.getBufferParameters=function(){return this._bufParams},Oi.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},Oi.prototype.getRingCurve=function(t,e,i){if(this._distance=i,t.length<=2)return this.getLineCurve(t,i)
if(0===i)return Oi.copyCoordinates(t)
var n=this.getSegGen(i)
return this.computeRingBufferCurve(t,e,n),n.getCoordinates()},Oi.prototype.computeOffsetCurve=function(t,e,i){var n=this.simplifyTolerance(this._distance)
if(e){var r=Ci.simplify(t,-n),o=r.length-1
i.initSideSegments(r[o],r[o-1],Ce.LEFT),i.addFirstSegment()
for(var s=o-2;s>=0;s--)i.addNextSegment(r[s],!0)}else{var a=Ci.simplify(t,n),l=a.length-1
i.initSideSegments(a[0],a[1],Ce.LEFT),i.addFirstSegment()
for(var h=2;h<=l;h++)i.addNextSegment(a[h],!0)}i.addLastSegment()},Oi.prototype.getSegGen=function(t){return new Ri(this._precisionModel,this._bufParams,t)},Oi.prototype.interfaces_=function(){return[]},Oi.prototype.getClass=function(){return Oi},Oi.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),i=0;i<e.length;i++)e[i]=new S(t[i])
return e}
var Di=function(){this._subgraphs=null,this._seg=new pi,this._cga=new at
var t=arguments[0]
this._subgraphs=t},Ni={DepthSegment:{configurable:!0}}
Di.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=new Et,i=this._subgraphs.iterator();i.hasNext();){var n=i.next(),r=n.getEnvelope()
t.y<r.getMinY()||t.y>r.getMaxY()||this.findStabbedSegments(t,n.getDirectedEdges(),e)}return e}if(3===arguments.length)if(A(arguments[2],wt)&&arguments[0]instanceof S&&arguments[1]instanceof Ue){for(var o=arguments[0],s=arguments[1],a=arguments[2],l=s.getEdge().getCoordinates(),h=0;h<l.length-1;h++)if(this._seg.p0=l[h],this._seg.p1=l[h+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x||this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||at.computeOrientation(this._seg.p0,this._seg.p1,o)===at.RIGHT)){var u=s.getDepth(Ce.LEFT)
this._seg.p0.equals(l[h])||(u=s.getDepth(Ce.RIGHT))
var c=new Fi(this._seg,u)
a.add(c)}}else if(A(arguments[2],wt)&&arguments[0]instanceof S&&A(arguments[1],wt))for(var d=arguments[0],f=arguments[2],p=arguments[1].iterator();p.hasNext();){var g=p.next()
g.isForward()&&this.findStabbedSegments(d,g,f)}},Di.prototype.getDepth=function(t){var e=this.findStabbedSegments(t)
return 0===e.size()?0:Qe.min(e)._leftDepth},Di.prototype.interfaces_=function(){return[]},Di.prototype.getClass=function(){return Di},Ni.DepthSegment.get=function(){return Fi},Object.defineProperties(Di,Ni)
var Fi=function(){this._upwardSeg=null,this._leftDepth=null
var t=arguments[0],e=arguments[1]
this._upwardSeg=new pi(t),this._leftDepth=e}
Fi.prototype.compareTo=function(t){var e=t
if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1
if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1
var i=this._upwardSeg.orientationIndex(e._upwardSeg)
return 0!==i||0!=(i=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?i:this._upwardSeg.compareTo(e._upwardSeg)},Fi.prototype.compareX=function(t,e){var i=t.p0.compareTo(e.p0)
return 0!==i?i:t.p1.compareTo(e.p1)},Fi.prototype.toString=function(){return this._upwardSeg.toString()},Fi.prototype.interfaces_=function(){return[b]},Fi.prototype.getClass=function(){return Fi}
var ki=function(t,e,i){this.p0=t||null,this.p1=e||null,this.p2=i||null}
ki.prototype.area=function(){return ki.area(this.p0,this.p1,this.p2)},ki.prototype.signedArea=function(){return ki.signedArea(this.p0,this.p1,this.p2)},ki.prototype.interpolateZ=function(t){if(null===t)throw new y("Supplied point is null.")
return ki.interpolateZ(t,this.p0,this.p1,this.p2)},ki.prototype.longestSideLength=function(){return ki.longestSideLength(this.p0,this.p1,this.p2)},ki.prototype.isAcute=function(){return ki.isAcute(this.p0,this.p1,this.p2)},ki.prototype.circumcentre=function(){return ki.circumcentre(this.p0,this.p1,this.p2)},ki.prototype.area3D=function(){return ki.area3D(this.p0,this.p1,this.p2)},ki.prototype.centroid=function(){return ki.centroid(this.p0,this.p1,this.p2)},ki.prototype.inCentre=function(){return ki.inCentre(this.p0,this.p1,this.p2)},ki.prototype.interfaces_=function(){return[]},ki.prototype.getClass=function(){return ki},ki.area=function(t,e,i){return Math.abs(((i.x-t.x)*(e.y-t.y)-(e.x-t.x)*(i.y-t.y))/2)},ki.signedArea=function(t,e,i){return((i.x-t.x)*(e.y-t.y)-(e.x-t.x)*(i.y-t.y))/2},ki.det=function(t,e,i,n){return t*n-e*i},ki.interpolateZ=function(t,e,i,n){var r=e.x,o=e.y,s=i.x-r,a=n.x-r,l=i.y-o,h=n.y-o,u=s*h-a*l,c=t.x-r,d=t.y-o,f=(h*c-a*d)/u,p=(-l*c+s*d)/u
return e.z+f*(i.z-e.z)+p*(n.z-e.z)},ki.longestSideLength=function(t,e,i){var n=t.distance(e),r=e.distance(i),o=i.distance(t),s=n
return r>s&&(s=r),o>s&&(s=o),s},ki.isAcute=function(t,e,i){return!!Mi.isAcute(t,e,i)&&!!Mi.isAcute(e,i,t)&&!!Mi.isAcute(i,t,e)},ki.circumcentre=function(t,e,i){var n=i.x,r=i.y,o=t.x-n,s=t.y-r,a=e.x-n,l=e.y-r,h=2*ki.det(o,s,a,l),u=ki.det(s,o*o+s*s,l,a*a+l*l),c=ki.det(o,o*o+s*s,a,a*a+l*l)
return new S(n-u/h,r+c/h)},ki.perpendicularBisector=function(t,e){var i=e.x-t.x,n=e.y-t.y,r=new Z(t.x+i/2,t.y+n/2,1),o=new Z(t.x-n+i/2,t.y+i+n/2,1)
return new Z(r,o)},ki.angleBisector=function(t,e,i){var n=e.distance(t),r=n/(n+e.distance(i)),o=i.x-t.x,s=i.y-t.y
return new S(t.x+r*o,t.y+r*s)},ki.area3D=function(t,e,i){var n=e.x-t.x,r=e.y-t.y,o=e.z-t.z,s=i.x-t.x,a=i.y-t.y,l=i.z-t.z,h=r*l-o*a,u=o*s-n*l,c=n*a-r*s,d=h*h+u*u+c*c
return Math.sqrt(d)/2},ki.centroid=function(t,e,i){var n=(t.x+e.x+i.x)/3,r=(t.y+e.y+i.y)/3
return new S(n,r)},ki.inCentre=function(t,e,i){var n=e.distance(i),r=t.distance(i),o=t.distance(e),s=n+r+o,a=(n*t.x+r*e.x+o*i.x)/s,l=(n*t.y+r*e.y+o*i.y)/s
return new S(a,l)}
var zi=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new Et
var t=arguments[0],e=arguments[1],i=arguments[2]
this._inputGeom=t,this._distance=e,this._curveBuilder=i}
zi.prototype.addPoint=function(t){if(this._distance<=0)return null
var e=t.getCoordinates(),i=this._curveBuilder.getLineCurve(e,this._distance)
this.addCurve(i,I.EXTERIOR,I.INTERIOR)},zi.prototype.addPolygon=function(t){var e=this._distance,i=Ce.LEFT
this._distance<0&&(e=-this._distance,i=Ce.RIGHT)
var n=t.getExteriorRing(),r=Pt.removeRepeatedPoints(n.getCoordinates())
if(this._distance<0&&this.isErodedCompletely(n,this._distance))return null
if(this._distance<=0&&r.length<3)return null
this.addPolygonRing(r,e,i,I.EXTERIOR,I.INTERIOR)
for(var o=0;o<t.getNumInteriorRing();o++){var s=t.getInteriorRingN(o),a=Pt.removeRepeatedPoints(s.getCoordinates())
this._distance>0&&this.isErodedCompletely(s,-this._distance)||this.addPolygonRing(a,e,Ce.opposite(i),I.INTERIOR,I.EXTERIOR)}},zi.prototype.isTriangleErodedCompletely=function(t,e){var i=new ki(t[0],t[1],t[2]),n=i.inCentre()
return at.distancePointLine(n,i.p0,i.p1)<Math.abs(e)},zi.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null
var e=Pt.removeRepeatedPoints(t.getCoordinates()),i=this._curveBuilder.getLineCurve(e,this._distance)
this.addCurve(i,I.EXTERIOR,I.INTERIOR)},zi.prototype.addCurve=function(t,e,i){if(null===t||t.length<2)return null
var n=new fi(t,new Le(0,I.BOUNDARY,e,i))
this._curveList.add(n)},zi.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},zi.prototype.addPolygonRing=function(t,e,i,n,r){if(0===e&&t.length<ee.MINIMUM_VALID_SIZE)return null
var o=n,s=r
t.length>=ee.MINIMUM_VALID_SIZE&&at.isCCW(t)&&(o=r,s=n,i=Ce.opposite(i))
var a=this._curveBuilder.getRingCurve(t,i,e)
this.addCurve(a,o,s)},zi.prototype.add=function(t){if(t.isEmpty())return null
t instanceof Qt?this.addPolygon(t):t instanceof Ht?this.addLineString(t):t instanceof Kt?this.addPoint(t):(t instanceof te||t instanceof qt||t instanceof ie||t instanceof Ut)&&this.addCollection(t)},zi.prototype.isErodedCompletely=function(t,e){var i=t.getCoordinates()
if(i.length<4)return e<0
if(4===i.length)return this.isTriangleErodedCompletely(i,e)
var n=t.getEnvelopeInternal(),r=Math.min(n.getHeight(),n.getWidth())
return e<0&&2*Math.abs(e)>r},zi.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var i=t.getGeometryN(e)
this.add(i)}},zi.prototype.interfaces_=function(){return[]},zi.prototype.getClass=function(){return zi}
var ji=function(){}
ji.prototype.locate=function(t){},ji.prototype.interfaces_=function(){return[]},ji.prototype.getClass=function(){return ji}
var Gi=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null
var t=arguments[0]
this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()}
Gi.prototype.next=function(){if(this._atStart)return this._atStart=!1,Gi.isAtomic(this._parent)&&this._index++,this._parent
if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next()
this._subcollectionIterator=null}if(this._index>=this._max)throw new n
var t=this._parent.getGeometryN(this._index++)
return t instanceof Ut?(this._subcollectionIterator=new Gi(t),this._subcollectionIterator.next()):t},Gi.prototype.remove=function(){throw new Error(this.getClass().getName())},Gi.prototype.hasNext=function(){if(this._atStart)return!0
if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0
this._subcollectionIterator=null}return!(this._index>=this._max)},Gi.prototype.interfaces_=function(){return[bt]},Gi.prototype.getClass=function(){return Gi},Gi.isAtomic=function(t){return!(t instanceof Ut)}
var Bi=function(){this._geom=null
var t=arguments[0]
this._geom=t}
Bi.prototype.locate=function(t){return Bi.locate(t,this._geom)},Bi.prototype.interfaces_=function(){return[ji]},Bi.prototype.getClass=function(){return Bi},Bi.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&at.isPointInRing(t,e.getCoordinates())},Bi.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1
var i=e.getExteriorRing()
if(!Bi.isPointInRing(t,i))return!1
for(var n=0;n<e.getNumInteriorRing();n++){var r=e.getInteriorRingN(n)
if(Bi.isPointInRing(t,r))return!1}return!0},Bi.containsPoint=function(t,e){if(e instanceof Qt)return Bi.containsPointInPolygon(t,e)
if(e instanceof Ut)for(var i=new Gi(e);i.hasNext();){var n=i.next()
if(n!==e&&Bi.containsPoint(t,n))return!0}return!1},Bi.locate=function(t,e){return e.isEmpty()?I.EXTERIOR:Bi.containsPoint(t,e)?I.INTERIOR:I.EXTERIOR}
var Ui=function(){this._edgeMap=new c,this._edgeList=null,this._ptInAreaLocation=[I.NONE,I.NONE]}
Ui.prototype.getNextCW=function(t){this.getEdges()
var e=this._edgeList.indexOf(t),i=e-1
return 0===e&&(i=this._edgeList.size()-1),this._edgeList.get(i)},Ui.prototype.propagateSideLabels=function(t){for(var e=I.NONE,i=this.iterator();i.hasNext();){var n=i.next().getLabel()
n.isArea(t)&&n.getLocation(t,Ce.LEFT)!==I.NONE&&(e=n.getLocation(t,Ce.LEFT))}if(e===I.NONE)return null
for(var r=e,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getLabel()
if(a.getLocation(t,Ce.ON)===I.NONE&&a.setLocation(t,Ce.ON,r),a.isArea(t)){var l=a.getLocation(t,Ce.LEFT),h=a.getLocation(t,Ce.RIGHT)
if(h!==I.NONE){if(h!==r)throw new Ie("side location conflict",s.getCoordinate())
l===I.NONE&&et.shouldNeverReachHere("found single null side (at "+s.getCoordinate()+")"),r=l}else et.isTrue(a.getLocation(t,Ce.LEFT)===I.NONE,"found single null side"),a.setLocation(t,Ce.RIGHT,r),a.setLocation(t,Ce.LEFT,r)}}},Ui.prototype.getCoordinate=function(){var t=this.iterator()
return t.hasNext()?t.next().getCoordinate():null},Ui.prototype.print=function(t){V.out.println("EdgeEndStar:   "+this.getCoordinate())
for(var e=this.iterator();e.hasNext();)e.next().print(t)},Ui.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},Ui.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges()
if(e.size()<=0)return!0
var i=e.size()-1,n=e.get(i).getLabel().getLocation(t,Ce.LEFT)
et.isTrue(n!==I.NONE,"Found unlabelled area edge")
for(var r=n,o=this.iterator();o.hasNext();){var s=o.next().getLabel()
et.isTrue(s.isArea(t),"Found non-area edge")
var a=s.getLocation(t,Ce.LEFT),l=s.getLocation(t,Ce.RIGHT)
if(a===l)return!1
if(l!==r)return!1
r=a}return!0},Ui.prototype.findIndex=function(t){this.iterator()
for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e
return-1},Ui.prototype.iterator=function(){return this.getEdges().iterator()},Ui.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new Et(this._edgeMap.values())),this._edgeList},Ui.prototype.getLocation=function(t,e,i){return this._ptInAreaLocation[t]===I.NONE&&(this._ptInAreaLocation[t]=Bi.locate(e,i[t].getGeometry())),this._ptInAreaLocation[t]},Ui.prototype.toString=function(){var t=new O
t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n")
for(var e=this.iterator();e.hasNext();){var i=e.next()
t.append(i),t.append("\n")}return t.toString()},Ui.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},Ui.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1)
for(var e=[!1,!1],i=this.iterator();i.hasNext();)for(var n=i.next().getLabel(),r=0;r<2;r++)n.isLine(r)&&n.getLocation(r)===I.BOUNDARY&&(e[r]=!0)
for(var o=this.iterator();o.hasNext();)for(var s=o.next(),a=s.getLabel(),l=0;l<2;l++)if(a.isAnyNull(l)){var h=I.NONE
if(e[l])h=I.EXTERIOR
else{var u=s.getCoordinate()
h=this.getLocation(l,u,t)}a.setAllLocationsIfNull(l,h)}},Ui.prototype.getDegree=function(){return this._edgeMap.size()},Ui.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},Ui.prototype.interfaces_=function(){return[]},Ui.prototype.getClass=function(){return Ui}
var qi=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges()
for(var t=null,e=null,i=this._SCANNING_FOR_INCOMING,n=0;n<this._resultAreaEdgeList.size();n++){var r=this._resultAreaEdgeList.get(n),o=r.getSym()
if(r.getLabel().isArea())switch(null===t&&r.isInResult()&&(t=r),i){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue
e=o,i=this._LINKING_TO_OUTGOING
break
case this._LINKING_TO_OUTGOING:if(!r.isInResult())continue
e.setNext(r),i=this._SCANNING_FOR_INCOMING}}if(i===this._LINKING_TO_OUTGOING){if(null===t)throw new Ie("no outgoing dirEdge found",this.getCoordinate())
et.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},e.prototype.insert=function(t){var e=t
this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size()
if(e<1)return null
var i=t.get(0)
if(1===e)return i
var n=t.get(e-1),r=i.getQuadrant(),o=n.getQuadrant()
return je.isNorthern(r)&&je.isNorthern(o)?i:je.isNorthern(r)||je.isNorthern(o)?0!==i.getDy()?i:0!==n.getDy()?n:(et.shouldNeverReachHere("found two horizontal edges incident on node"),null):n},e.prototype.print=function(t){V.out.println("DirectedEdgeStar: "+this.getCoordinate())
for(var e=this.iterator();e.hasNext();){var i=e.next()
t.print("out "),i.print(t),t.println(),t.print("in "),i.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList
this._resultAreaEdgeList=new Et
for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var i=e.next().getLabel()
i.setAllLocationsIfNull(0,t.getLocation(0)),i.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges()
for(var t=null,e=null,i=this._edgeList.size()-1;i>=0;i--){var n=this._edgeList.get(i),r=n.getSym()
null===e&&(e=r),null!==t&&r.setNext(t),t=n}e.setNext(t)},e.prototype.computeDepths=function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),i=t.getDepth(Ce.LEFT),n=t.getDepth(Ce.RIGHT),r=this.computeDepths(e+1,this._edgeList.size(),i)
if(this.computeDepths(0,e,r)!==n)throw new Ie("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[1],s=arguments[2],a=arguments[0];a<o;a++){var l=this._edgeList.get(a)
l.setEdgeDepths(Ce.RIGHT,s),s=l.getDepth(Ce.LEFT)}return s}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next()
e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,i=null,n=this._SCANNING_FOR_INCOMING,r=this._resultAreaEdgeList.size()-1;r>=0;r--){var o=this._resultAreaEdgeList.get(r),s=o.getSym()
switch(null===e&&o.getEdgeRing()===t&&(e=o),n){case this._SCANNING_FOR_INCOMING:if(s.getEdgeRing()!==t)continue
i=s,n=this._LINKING_TO_OUTGOING
break
case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue
i.setNextMin(o),n=this._SCANNING_FOR_INCOMING}}n===this._LINKING_TO_OUTGOING&&(et.isTrue(null!==e,"found null for first outgoing dirEdge"),et.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),i.setNextMin(e))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++
return t}if(1===arguments.length){for(var i=arguments[0],n=0,r=this.iterator();r.hasNext();)r.next().getEdgeRing()===i&&n++
return n}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=I.NONE,e=this.iterator();e.hasNext();){var i=e.next(),n=i.getSym()
if(!i.isLineEdge()){if(i.isInResult()){t=I.INTERIOR
break}if(n.isInResult()){t=I.EXTERIOR
break}}}if(t===I.NONE)return null
for(var r=t,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getSym()
s.isLineEdge()?s.getEdge().setCovered(r===I.INTERIOR):(s.isInResult()&&(r=I.EXTERIOR),a.isInResult()&&(r=I.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new Le(I.NONE)
for(var i=this.iterator();i.hasNext();)for(var n=i.next().getEdge().getLabel(),r=0;r<2;r++){var o=n.getLocation(r)
o!==I.INTERIOR&&o!==I.BOUNDARY||this._label.setLocation(r,I.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ui),Vi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new ke(t,new qi)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(qe),Zi=function t(){this._pts=null,this._orientation=null
var e=arguments[0]
this._pts=e,this._orientation=t.orientation(e)}
Zi.prototype.compareTo=function(t){var e=t
return Zi.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},Zi.prototype.interfaces_=function(){return[b]},Zi.prototype.getClass=function(){return Zi},Zi.orientation=function(t){return 1===Pt.increasingDirection(t)},Zi.compareOriented=function(t,e,i,n){for(var r=e?1:-1,o=n?1:-1,s=e?t.length:-1,a=n?i.length:-1,l=e?0:t.length-1,h=n?0:i.length-1;;){var u=t[l].compareTo(i[h])
if(0!==u)return u
var c=(l+=r)===s,d=(h+=o)===a
if(c&&!d)return-1
if(!c&&d)return 1
if(c&&d)return 0}}
var Wi=function(){this._edges=new Et,this._ocaMap=new c}
Wi.prototype.print=function(t){t.print("MULTILINESTRING ( ")
for(var e=0;e<this._edges.size();e++){var i=this._edges.get(e)
e>0&&t.print(","),t.print("(")
for(var n=i.getCoordinates(),r=0;r<n.length;r++)r>0&&t.print(","),t.print(n[r].x+" "+n[r].y)
t.println(")")}t.print(")  ")},Wi.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},Wi.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e
return-1},Wi.prototype.iterator=function(){return this._edges.iterator()},Wi.prototype.getEdges=function(){return this._edges},Wi.prototype.get=function(t){return this._edges.get(t)},Wi.prototype.findEqualEdge=function(t){var e=new Zi(t.getCoordinates())
return this._ocaMap.get(e)},Wi.prototype.add=function(t){this._edges.add(t)
var e=new Zi(t.getCoordinates())
this._ocaMap.put(e,t)},Wi.prototype.interfaces_=function(){return[]},Wi.prototype.getClass=function(){return Wi}
var Yi=function(){}
Yi.prototype.processIntersections=function(t,e,i,n){},Yi.prototype.isDone=function(){},Yi.prototype.interfaces_=function(){return[]},Yi.prototype.getClass=function(){return Yi}
var Xi=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0
var t=arguments[0]
this._li=t}
Xi.prototype.isTrivialIntersection=function(t,e,i,n){if(t===i&&1===this._li.getIntersectionNum()){if(Xi.isAdjacentSegments(e,n))return!0
if(t.isClosed()){var r=t.size()-1
if(0===e&&n===r||0===n&&e===r)return!0}}return!1},Xi.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Xi.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Xi.prototype.getLineIntersector=function(){return this._li},Xi.prototype.hasProperIntersection=function(){return this._hasProper},Xi.prototype.processIntersections=function(t,e,i,n){if(t===i&&e===n)return null
this.numTests++
var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=i.getCoordinates()[n],a=i.getCoordinates()[n+1]
this._li.computeIntersection(r,o,s,a),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,i,n)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),i.addIntersections(this._li,n,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Xi.prototype.hasIntersection=function(){return this._hasIntersection},Xi.prototype.isDone=function(){return!1},Xi.prototype.hasInteriorIntersection=function(){return this._hasInterior},Xi.prototype.interfaces_=function(){return[Yi]},Xi.prototype.getClass=function(){return Xi},Xi.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)}
var Hi=function(){this.coord=null,this.segmentIndex=null,this.dist=null
var t=arguments[0],e=arguments[1],i=arguments[2]
this.coord=new S(t),this.segmentIndex=e,this.dist=i}
Hi.prototype.getSegmentIndex=function(){return this.segmentIndex},Hi.prototype.getCoordinate=function(){return this.coord},Hi.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},Hi.prototype.compareTo=function(t){var e=t
return this.compare(e.segmentIndex,e.dist)},Hi.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},Hi.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},Hi.prototype.getDistance=function(){return this.dist},Hi.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},Hi.prototype.interfaces_=function(){return[b]},Hi.prototype.getClass=function(){return Hi}
var $i=function(){this._nodeMap=new c,this.edge=null
var t=arguments[0]
this.edge=t}
$i.prototype.print=function(t){t.println("Intersections:")
for(var e=this.iterator();e.hasNext();)e.next().print(t)},$i.prototype.iterator=function(){return this._nodeMap.values().iterator()},$i.prototype.addSplitEdges=function(t){this.addEndpoints()
for(var e=this.iterator(),i=e.next();e.hasNext();){var n=e.next(),r=this.createSplitEdge(i,n)
t.add(r),i=n}},$i.prototype.addEndpoints=function(){var t=this.edge.pts.length-1
this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},$i.prototype.createSplitEdge=function(t,e){var i=e.segmentIndex-t.segmentIndex+2,n=this.edge.pts[e.segmentIndex],r=e.dist>0||!e.coord.equals2D(n)
r||i--
var o=new Array(i).fill(null),s=0
o[s++]=new S(t.coord)
for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this.edge.pts[a]
return r&&(o[s]=e.coord),new en(o,new Le(this.edge._label))},$i.prototype.add=function(t,e,i){var n=new Hi(t,e,i),r=this._nodeMap.get(n)
return null!==r?r:(this._nodeMap.put(n,n),n)},$i.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0
return!1},$i.prototype.interfaces_=function(){return[]},$i.prototype.getClass=function(){return $i}
var Ki=function(){}
Ki.prototype.getChainStartIndices=function(t){var e=0,i=new Et
i.add(new D(e))
do{var n=this.findChainEnd(t,e)
i.add(new D(n)),e=n}while(e<t.length-1)
return Ki.toIntArray(i)},Ki.prototype.findChainEnd=function(t,e){for(var i=je.quadrant(t[e],t[e+1]),n=e+1;n<t.length&&je.quadrant(t[n-1],t[n])===i;)n++
return n-1},Ki.prototype.interfaces_=function(){return[]},Ki.prototype.getClass=function(){return Ki},Ki.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),i=0;i<e.length;i++)e[i]=t.get(i).intValue()
return e}
var Ji=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new W,this.env2=new W
var t=arguments[0]
this.e=t,this.pts=t.getCoordinates()
var e=new Ki
this.startIndex=e.getChainStartIndices(this.pts)}
Ji.prototype.getCoordinates=function(){return this.pts},Ji.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,i=this.pts[this.startIndex[t+1]].x
return e>i?e:i},Ji.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,i=this.pts[this.startIndex[t+1]].x
return e<i?e:i},Ji.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3]
this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[i],e.startIndex[i+1],n)}else if(6===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],l=arguments[4],h=arguments[5],u=this.pts[r],c=this.pts[o],d=s.pts[a],f=s.pts[l]
if(o-r==1&&l-a==1)return h.addIntersections(this.e,r,s.e,a),null
if(this.env1.init(u,c),this.env2.init(d,f),!this.env1.intersects(this.env2))return null
var p=Math.trunc((r+o)/2),g=Math.trunc((a+l)/2)
r<p&&(a<g&&this.computeIntersectsForChain(r,p,s,a,g,h),g<l&&this.computeIntersectsForChain(r,p,s,g,l,h)),p<o&&(a<g&&this.computeIntersectsForChain(p,o,s,a,g,h),g<l&&this.computeIntersectsForChain(p,o,s,g,l,h))}},Ji.prototype.getStartIndexes=function(){return this.startIndex},Ji.prototype.computeIntersects=function(t,e){for(var i=0;i<this.startIndex.length-1;i++)for(var n=0;n<t.startIndex.length-1;n++)this.computeIntersectsForChain(i,t,n,e)},Ji.prototype.interfaces_=function(){return[]},Ji.prototype.getClass=function(){return Ji}
var Qi=function t(){this._depth=Array(2).fill().map((function(){return Array(3)}))
for(var e=0;e<2;e++)for(var i=0;i<3;i++)this._depth[e][i]=t.NULL_VALUE},tn={NULL_VALUE:{configurable:!0}}
Qi.prototype.getDepth=function(t,e){return this._depth[t][e]},Qi.prototype.setDepth=function(t,e,i){this._depth[t][e]=i},Qi.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==Qi.NULL_VALUE)return!1
return!0}if(1===arguments.length){var i=arguments[0]
return this._depth[i][1]===Qi.NULL_VALUE}if(2===arguments.length){var n=arguments[0],r=arguments[1]
return this._depth[n][r]===Qi.NULL_VALUE}},Qi.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1]
this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0)
for(var i=1;i<3;i++){var n=0
this._depth[t][i]>e&&(n=1),this._depth[t][i]=n}}},Qi.prototype.getDelta=function(t){return this._depth[t][Ce.RIGHT]-this._depth[t][Ce.LEFT]},Qi.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?I.EXTERIOR:I.INTERIOR},Qi.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},Qi.prototype.add=function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var i=1;i<3;i++){var n=t.getLocation(e,i)
n!==I.EXTERIOR&&n!==I.INTERIOR||(this.isNull(e,i)?this._depth[e][i]=Qi.depthAtLocation(n):this._depth[e][i]+=Qi.depthAtLocation(n))}else if(3===arguments.length){var r=arguments[0],o=arguments[1]
arguments[2]===I.INTERIOR&&this._depth[r][o]++}},Qi.prototype.interfaces_=function(){return[]},Qi.prototype.getClass=function(){return Qi},Qi.depthAtLocation=function(t){return t===I.EXTERIOR?0:t===I.INTERIOR?1:Qi.NULL_VALUE},tn.NULL_VALUE.get=function(){return-1},Object.defineProperties(Qi,tn)
var en=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new $i(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Qi,this._depthDelta=0,1===arguments.length){var i=arguments[0]
e.call(this,i,null)}else if(2===arguments.length){var n=arguments[0],r=arguments[1]
this.pts=n,this._label=r}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null)
return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,Le.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1
var i=t
if(this.pts.length!==i.pts.length)return!1
for(var n=!0,r=!0,o=this.pts.length,s=0;s<this.pts.length;s++)if(this.pts[s].equals2D(i.pts[s])||(n=!1),this.pts[s].equals2D(i.pts[--o])||(r=!1),!n&&!r)return!1
return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null
if(1===arguments.length){var t=arguments[0]
return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (")
for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y)
t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ")
for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ")
t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new Ji(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new W
for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,i,n){var r=new S(t.getIntersection(n)),o=e,s=t.getEdgeDistance(i,n),a=o+1
if(a<this.pts.length){var l=this.pts[a]
r.equals2D(l)&&(o=a,s=0)}this.eiList.add(r,o,s)},e.prototype.toString=function(){var t=new O
t.append("edge "+this._name+": "),t.append("LINESTRING (")
for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y)
return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1
for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1
return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,i){for(var n=0;n<t.getIntersectionNum();n++)this.addIntersection(t,e,i,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments)
var e=arguments[0],i=arguments[1]
i.setAtLeastIfValid(e.getLocation(0,Ce.ON),e.getLocation(1,Ce.ON),1),e.isArea()&&(i.setAtLeastIfValid(e.getLocation(0,Ce.LEFT),e.getLocation(1,Ce.LEFT),2),i.setAtLeastIfValid(e.getLocation(0,Ce.RIGHT),e.getLocation(1,Ce.RIGHT),2))},e}(Fe),nn=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Wi,this._bufParams=t||null}
nn.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},nn.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t)
if(null!==e){var i=e.getLabel(),n=t.getLabel()
e.isPointwiseEqual(t)||(n=new Le(t.getLabel())).flip(),i.merge(n)
var r=nn.depthDelta(n),o=e.getDepthDelta()+r
e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(nn.depthDelta(t.getLabel()))},nn.prototype.buildSubgraphs=function(t,e){for(var i=new Et,n=t.iterator();n.hasNext();){var r=n.next(),o=r.getRightmostCoordinate(),s=new Di(i).getDepth(o)
r.computeDepth(s),r.findResultEdges(),i.add(r),e.add(r.getDirectedEdges(),r.getNodes())}},nn.prototype.createSubgraphs=function(t){for(var e=new Et,i=t.getNodes().iterator();i.hasNext();){var n=i.next()
if(!n.isVisited()){var r=new Ae
r.create(n),e.add(r)}}return Qe.sort(e,Qe.reverseOrder()),e},nn.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},nn.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder
var e=new bi,i=new rt
return i.setPrecisionModel(t),e.setSegmentIntersector(new Xi(i)),e},nn.prototype.buffer=function(t,e){var i=this._workingPrecisionModel
null===i&&(i=t.getPrecisionModel()),this._geomFact=t.getFactory()
var n=new Oi(i,this._bufParams),r=new zi(t,e,n).getCurves()
if(r.size()<=0)return this.createEmptyResultGeometry()
this.computeNodedEdges(r,i),this._graph=new Ve(new Vi),this._graph.addEdges(this._edgeList.getEdges())
var o=this.createSubgraphs(this._graph),s=new Ze(this._geomFact)
this.buildSubgraphs(o,s)
var a=s.getPolygons()
return a.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(a)},nn.prototype.computeNodedEdges=function(t,e){var i=this.getNoder(e)
i.computeNodes(t)
for(var n=i.getNodedSubstrings().iterator();n.hasNext();){var r=n.next(),o=r.getCoordinates()
if(2!==o.length||!o[0].equals2D(o[1])){var s=r.getData(),a=new en(r.getCoordinates(),new Le(s))
this.insertUniqueEdge(a)}}},nn.prototype.setNoder=function(t){this._workingNoder=t},nn.prototype.interfaces_=function(){return[]},nn.prototype.getClass=function(){return nn},nn.depthDelta=function(t){var e=t.getLocation(0,Ce.LEFT),i=t.getLocation(0,Ce.RIGHT)
return e===I.INTERIOR&&i===I.EXTERIOR?1:e===I.EXTERIOR&&i===I.INTERIOR?-1:0},nn.convertSegStrings=function(t){for(var e=new me,i=new Et;t.hasNext();){var n=t.next(),r=e.createLineString(n.getCoordinates())
i.add(r)}return e.buildGeometry(i)}
var rn=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1]
this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var i=arguments[0],n=arguments[1],r=arguments[2],o=arguments[3]
this._noder=i,this._scaleFactor=n,this._offsetX=r,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}}
rn.prototype.rescale=function(){if(A(arguments[0],xt))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next()
this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var i=arguments[0],n=0;n<i.length;n++)i[n].x=i[n].x/this._scaleFactor+this._offsetX,i[n].y=i[n].y/this._scaleFactor+this._offsetY
2===i.length&&i[0].equals2D(i[1])&&V.out.println(i)}},rn.prototype.scale=function(){if(A(arguments[0],xt)){for(var t=arguments[0],e=new Et,i=t.iterator();i.hasNext();){var n=i.next()
e.add(new fi(this.scale(n.getCoordinates()),n.getData()))}return e}if(arguments[0]instanceof Array){for(var r=arguments[0],o=new Array(r.length).fill(null),s=0;s<r.length;s++)o[s]=new S(Math.round((r[s].x-this._offsetX)*this._scaleFactor),Math.round((r[s].y-this._offsetY)*this._scaleFactor),r[s].z)
return Pt.removeRepeatedPoints(o)}},rn.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},rn.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings()
return this._isScaled&&this.rescale(t),t},rn.prototype.computeNodes=function(t){var e=t
this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},rn.prototype.interfaces_=function(){return[vi]},rn.prototype.getClass=function(){return rn}
var on=function(){this._li=new rt,this._segStrings=null
var t=arguments[0]
this._segStrings=t},sn={fact:{configurable:!0}}
on.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates()
this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var i=arguments[0],n=arguments[1].iterator();n.hasNext();)for(var r=n.next().getCoordinates(),o=1;o<r.length-1;o++)if(r[o].equals(i))throw new Q("found endpt/interior pt intersection at index "+o+" :pt "+i)},on.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),i=this._segStrings.iterator();i.hasNext();){var n=i.next()
this.checkInteriorIntersections(e,n)}else if(2===arguments.length)for(var r=arguments[0],o=arguments[1],s=r.getCoordinates(),a=o.getCoordinates(),l=0;l<s.length-1;l++)for(var h=0;h<a.length-1;h++)this.checkInteriorIntersections(r,l,o,h)
else if(4===arguments.length){var u=arguments[0],c=arguments[1],d=arguments[2],f=arguments[3]
if(u===d&&c===f)return null
var p=u.getCoordinates()[c],g=u.getCoordinates()[c+1],_=d.getCoordinates()[f],m=d.getCoordinates()[f+1]
if(this._li.computeIntersection(p,g,_,m),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,p,g)||this.hasInteriorIntersection(this._li,_,m)))throw new Q("found non-noded intersection at "+p+"-"+g+" and "+_+"-"+m)}},on.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},on.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next()
this.checkCollapses(e)}else if(1===arguments.length)for(var i=arguments[0].getCoordinates(),n=0;n<i.length-2;n++)this.checkCollapse(i[n],i[n+1],i[n+2])},on.prototype.hasInteriorIntersection=function(t,e,i){for(var n=0;n<t.getIntersectionNum();n++){var r=t.getIntersection(n)
if(!r.equals(e)&&!r.equals(i))return!0}return!1},on.prototype.checkCollapse=function(t,e,i){if(t.equals(i))throw new Q("found non-noded collapse at "+on.fact.createLineString([t,e,i]))},on.prototype.interfaces_=function(){return[]},on.prototype.getClass=function(){return on},sn.fact.get=function(){return new me},Object.defineProperties(on,sn)
var an=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null
var t=arguments[0],e=arguments[1],i=arguments[2]
if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=i,e<=0)throw new y("Scale factor must be non-zero")
1!==e&&(this._pt=new S(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new S,this._p1Scaled=new S),this.initCorners(this._pt)},ln={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}}
an.prototype.intersectsScaled=function(t,e){var i=Math.min(t.x,e.x),n=Math.max(t.x,e.x),r=Math.min(t.y,e.y),o=Math.max(t.y,e.y),s=this._maxx<i||this._minx>n||this._maxy<r||this._miny>o
if(s)return!1
var a=this.intersectsToleranceSquare(t,e)
return et.isTrue(!(s&&a),"Found bad envelope test"),a},an.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new S(this._maxx,this._maxy),this._corner[1]=new S(this._minx,this._maxy),this._corner[2]=new S(this._minx,this._miny),this._corner[3]=new S(this._maxx,this._miny)},an.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},an.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},an.prototype.getCoordinate=function(){return this._originalPt},an.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},an.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=an.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor
this._safeEnv=new W(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},an.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},an.prototype.intersectsToleranceSquare=function(t,e){var i=!1,n=!1
return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(i=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||i&&n||t.equals(this._pt)||e.equals(this._pt)))))},an.prototype.addSnappedNode=function(t,e){var i=t.getCoordinate(e),n=t.getCoordinate(e+1)
return!!this.intersects(i,n)&&(t.addIntersection(this.getCoordinate(),e),!0)},an.prototype.interfaces_=function(){return[]},an.prototype.getClass=function(){return an},ln.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(an,ln)
var hn=function(){this.tempEnv1=new W,this.selectedSegment=new pi}
hn.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[1]
arguments[0].getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment)}},hn.prototype.interfaces_=function(){return[]},hn.prototype.getClass=function(){return hn}
var un=function(){this._index=null
var t=arguments[0]
this._index=t},cn={HotPixelSnapAction:{configurable:!0}}
un.prototype.snap=function(){if(1===arguments.length){var t=arguments[0]
return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],i=arguments[1],n=arguments[2],r=e.getSafeEnvelope(),o=new dn(e,i,n)
return this._index.query(r,{interfaces_:function(){return[He]},visitItem:function(t){t.select(r,o)}}),o.isNodeAdded()}},un.prototype.interfaces_=function(){return[]},un.prototype.getClass=function(){return un},cn.HotPixelSnapAction.get=function(){return dn},Object.defineProperties(un,cn)
var dn=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1
var e=arguments[0],i=arguments[1],n=arguments[2]
this._hotPixel=e,this._parentEdge=i,this._hotPixelVertexIndex=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments)
var e=arguments[1],i=arguments[0].getContext()
if(null!==this._parentEdge&&i===this._parentEdge&&e===this._hotPixelVertexIndex)return null
this._isNodeAdded=this._hotPixel.addSnappedNode(i,e)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(hn),fn=function(){this._li=null,this._interiorIntersections=null
var t=arguments[0]
this._li=t,this._interiorIntersections=new Et}
fn.prototype.processIntersections=function(t,e,i,n){if(t===i&&e===n)return null
var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=i.getCoordinates()[n],a=i.getCoordinates()[n+1]
if(this._li.computeIntersection(r,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var l=0;l<this._li.getIntersectionNum();l++)this._interiorIntersections.add(this._li.getIntersection(l))
t.addIntersections(this._li,e,0),i.addIntersections(this._li,n,1)}},fn.prototype.isDone=function(){return!1},fn.prototype.getInteriorIntersections=function(){return this._interiorIntersections},fn.prototype.interfaces_=function(){return[Yi]},fn.prototype.getClass=function(){return fn}
var pn=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null
var t=arguments[0]
this._pm=t,this._li=new rt,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()}
pn.prototype.checkCorrectness=function(t){var e=fi.getNodedSubstrings(t),i=new on(e)
try{i.checkValid()}catch(t){if(!(t instanceof U))throw t
t.printStackTrace()}},pn.prototype.getNodedSubstrings=function(){return fi.getNodedSubstrings(this._nodedSegStrings)},pn.prototype.snapRound=function(t,e){var i=this.findInteriorIntersections(t,e)
this.computeIntersectionSnaps(i),this.computeVertexSnaps(t)},pn.prototype.findInteriorIntersections=function(t,e){var i=new fn(e)
return this._noder.setSegmentIntersector(i),this._noder.computeNodes(t),i.getInteriorIntersections()},pn.prototype.computeVertexSnaps=function(){if(A(arguments[0],xt))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next()
this.computeVertexSnaps(e)}else if(arguments[0]instanceof fi)for(var i=arguments[0],n=i.getCoordinates(),r=0;r<n.length;r++){var o=new an(n[r],this._scaleFactor,this._li)
this._pointSnapper.snap(o,i,r)&&i.addIntersection(n[r],r)}},pn.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new bi,this._pointSnapper=new un(this._noder.getIndex()),this.snapRound(t,this._li)},pn.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var i=e.next(),n=new an(i,this._scaleFactor,this._li)
this._pointSnapper.snap(n)}},pn.prototype.interfaces_=function(){return[vi]},pn.prototype.getClass=function(){return pn}
var gn=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Ei,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0]
this._argGeom=t}else if(2===arguments.length){var e=arguments[0],i=arguments[1]
this._argGeom=e,this._bufParams=i}},_n={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}}
gn.prototype.bufferFixedPrecision=function(t){var e=new rn(new pn(new fe(1)),t.getScale()),i=new nn(this._bufParams)
i.setWorkingPrecisionModel(t),i.setNoder(e),this._resultGeometry=i.buffer(this._argGeom,this._distance)},gn.prototype.bufferReducedPrecision=function(){var t=this
if(0===arguments.length){for(var e=gn.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Ie))throw e
t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var i=arguments[0],n=gn.precisionScaleFactor(this._argGeom,this._distance,i),r=new fe(n)
this.bufferFixedPrecision(r)}},gn.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null
var t=this._argGeom.getFactory().getPrecisionModel()
t.getType()===fe.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},gn.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},gn.prototype.bufferOriginalPrecision=function(){try{var t=new nn(this._bufParams)
this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof Q))throw t
this._saveException=t}},gn.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},gn.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},gn.prototype.interfaces_=function(){return[]},gn.prototype.getClass=function(){return gn},gn.bufferOp=function(){if(2===arguments.length){var t=arguments[1]
return new gn(arguments[0]).getResultGeometry(t)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof ut&&"number"==typeof arguments[1]){var e=arguments[1],i=arguments[2],n=new gn(arguments[0])
return n.setQuadrantSegments(i),n.getResultGeometry(e)}if(arguments[2]instanceof Ei&&arguments[0]instanceof ut&&"number"==typeof arguments[1]){var r=arguments[1]
return new gn(arguments[0],arguments[2]).getResultGeometry(r)}}else if(4===arguments.length){var o=arguments[1],s=arguments[2],a=arguments[3],l=new gn(arguments[0])
return l.setQuadrantSegments(s),l.setEndCapStyle(a),l.getResultGeometry(o)}},gn.precisionScaleFactor=function(t,e,i){var n=t.getEnvelopeInternal(),r=R.max(Math.abs(n.getMaxX()),Math.abs(n.getMaxY()),Math.abs(n.getMinX()),Math.abs(n.getMinY()))+2*(e>0?e:0),o=i-Math.trunc(Math.log(r)/Math.log(10)+1)
return Math.pow(10,o)},_n.CAP_ROUND.get=function(){return Ei.CAP_ROUND},_n.CAP_BUTT.get=function(){return Ei.CAP_FLAT},_n.CAP_FLAT.get=function(){return Ei.CAP_FLAT},_n.CAP_SQUARE.get=function(){return Ei.CAP_SQUARE},_n.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(gn,_n)
var mn=function(){this._pt=[new S,new S],this._distance=v.NaN,this._isNull=!0}
mn.prototype.getCoordinates=function(){return this._pt},mn.prototype.getCoordinate=function(t){return this._pt[t]},mn.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0]
this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],i=arguments[1]
if(this._isNull)return this.initialize(e,i),null
var n=e.distance(i)
n<this._distance&&this.initialize(e,i,n)}},mn.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0
else if(2===arguments.length){var t=arguments[0],e=arguments[1]
this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var i=arguments[0],n=arguments[1],r=arguments[2]
this._pt[0].setCoordinate(i),this._pt[1].setCoordinate(n),this._distance=r,this._isNull=!1}},mn.prototype.getDistance=function(){return this._distance},mn.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0]
this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],i=arguments[1]
if(this._isNull)return this.initialize(e,i),null
var n=e.distance(i)
n>this._distance&&this.initialize(e,i,n)}},mn.prototype.interfaces_=function(){return[]},mn.prototype.getClass=function(){return mn}
var yn=function(){}
yn.prototype.interfaces_=function(){return[]},yn.prototype.getClass=function(){return yn},yn.computeDistance=function(){if(arguments[2]instanceof mn&&arguments[0]instanceof Ht&&arguments[1]instanceof S)for(var t=arguments[1],e=arguments[2],i=arguments[0].getCoordinates(),n=new pi,r=0;r<i.length-1;r++){n.setCoordinates(i[r],i[r+1])
var o=n.closestPoint(t)
e.setMinimum(o,t)}else if(arguments[2]instanceof mn&&arguments[0]instanceof Qt&&arguments[1]instanceof S){var s=arguments[0],a=arguments[1],l=arguments[2]
yn.computeDistance(s.getExteriorRing(),a,l)
for(var h=0;h<s.getNumInteriorRing();h++)yn.computeDistance(s.getInteriorRingN(h),a,l)}else if(arguments[2]instanceof mn&&arguments[0]instanceof ut&&arguments[1]instanceof S){var u=arguments[0],c=arguments[1],d=arguments[2]
if(u instanceof Ht)yn.computeDistance(u,c,d)
else if(u instanceof Qt)yn.computeDistance(u,c,d)
else if(u instanceof Ut)for(var f=u,p=0;p<f.getNumGeometries();p++){var g=f.getGeometryN(p)
yn.computeDistance(g,c,d)}else d.setMinimum(u.getCoordinate(),c)}else if(arguments[2]instanceof mn&&arguments[0]instanceof pi&&arguments[1]instanceof S){var _=arguments[1],m=arguments[2],y=arguments[0].closestPoint(_)
m.setMinimum(y,_)}}
var vn=function(t){this._maxPtDist=new mn,this._inputGeom=t||null},xn={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}}
vn.prototype.computeMaxMidpointDistance=function(t){var e=new wn(this._inputGeom)
t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},vn.prototype.computeMaxVertexDistance=function(t){var e=new bn(this._inputGeom)
t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},vn.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},vn.prototype.getDistancePoints=function(){return this._maxPtDist},vn.prototype.interfaces_=function(){return[]},vn.prototype.getClass=function(){return vn},xn.MaxPointDistanceFilter.get=function(){return bn},xn.MaxMidpointDistanceFilter.get=function(){return wn},Object.defineProperties(vn,xn)
var bn=function(t){this._maxPtDist=new mn,this._minPtDist=new mn,this._geom=t||null}
bn.prototype.filter=function(t){this._minPtDist.initialize(),yn.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},bn.prototype.getMaxPointDistance=function(){return this._maxPtDist},bn.prototype.interfaces_=function(){return[ft]},bn.prototype.getClass=function(){return bn}
var wn=function(t){this._maxPtDist=new mn,this._minPtDist=new mn,this._geom=t||null}
wn.prototype.filter=function(t,e){if(0===e)return null
var i=t.getCoordinate(e-1),n=t.getCoordinate(e),r=new S((i.x+n.x)/2,(i.y+n.y)/2)
this._minPtDist.initialize(),yn.computeDistance(this._geom,r,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},wn.prototype.isDone=function(){return!1},wn.prototype.isGeometryChanged=function(){return!1},wn.prototype.getMaxPointDistance=function(){return this._maxPtDist},wn.prototype.interfaces_=function(){return[Bt]},wn.prototype.getClass=function(){return wn}
var En=function(t){this._comps=t||null}
En.prototype.filter=function(t){t instanceof Qt&&this._comps.add(t)},En.prototype.interfaces_=function(){return[Gt]},En.prototype.getClass=function(){return En},En.getPolygons=function(){if(1===arguments.length)return En.getPolygons(arguments[0],new Et)
if(2===arguments.length){var t=arguments[0],e=arguments[1]
return t instanceof Qt?e.add(t):t instanceof Ut&&t.apply(new En(e)),e}}
var Sn=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0]
this._lines=t}else if(2===arguments.length){var e=arguments[0],i=arguments[1]
this._lines=e,this._isForcedToLineString=i}}
Sn.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof ee){var e=t.getFactory().createLineString(t.getCoordinateSequence())
return this._lines.add(e),null}t instanceof Ht&&this._lines.add(t)},Sn.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},Sn.prototype.interfaces_=function(){return[ht]},Sn.prototype.getClass=function(){return Sn},Sn.getGeometry=function(){if(1===arguments.length){var t=arguments[0]
return t.getFactory().buildGeometry(Sn.getLines(t))}if(2===arguments.length){var e=arguments[0],i=arguments[1]
return e.getFactory().buildGeometry(Sn.getLines(e,i))}},Sn.getLines=function(){if(1===arguments.length)return Sn.getLines(arguments[0],!1)
if(2===arguments.length){if(A(arguments[0],xt)&&A(arguments[1],xt)){for(var t=arguments[1],e=arguments[0].iterator();e.hasNext();){var i=e.next()
Sn.getLines(i,t)}return t}if(arguments[0]instanceof ut&&"boolean"==typeof arguments[1]){var n=arguments[0],r=arguments[1],o=new Et
return n.apply(new Sn(o,r)),o}if(arguments[0]instanceof ut&&A(arguments[1],xt)){var s=arguments[0],a=arguments[1]
return s instanceof Ht?a.add(s):s.apply(new Sn(a)),a}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&A(arguments[0],xt)&&A(arguments[1],xt)){for(var l=arguments[1],h=arguments[2],u=arguments[0].iterator();u.hasNext();){var c=u.next()
Sn.getLines(c,l,h)}return l}if("boolean"==typeof arguments[2]&&arguments[0]instanceof ut&&A(arguments[1],xt)){var d=arguments[1],f=arguments[2]
return arguments[0].apply(new Sn(d,f)),d}}}
var Cn=function(){if(this._boundaryRule=pt.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0]
if(null===t)throw new y("Rule must be non-null")
this._boundaryRule=t}}
Cn.prototype.locateInternal=function(){if(arguments[0]instanceof S&&arguments[1]instanceof Qt){var t=arguments[0],e=arguments[1]
if(e.isEmpty())return I.EXTERIOR
var i=e.getExteriorRing(),n=this.locateInPolygonRing(t,i)
if(n===I.EXTERIOR)return I.EXTERIOR
if(n===I.BOUNDARY)return I.BOUNDARY
for(var r=0;r<e.getNumInteriorRing();r++){var o=e.getInteriorRingN(r),s=this.locateInPolygonRing(t,o)
if(s===I.INTERIOR)return I.EXTERIOR
if(s===I.BOUNDARY)return I.BOUNDARY}return I.INTERIOR}if(arguments[0]instanceof S&&arguments[1]instanceof Ht){var a=arguments[0],l=arguments[1]
if(!l.getEnvelopeInternal().intersects(a))return I.EXTERIOR
var h=l.getCoordinates()
return l.isClosed()||!a.equals(h[0])&&!a.equals(h[h.length-1])?at.isOnLine(a,h)?I.INTERIOR:I.EXTERIOR:I.BOUNDARY}if(arguments[0]instanceof S&&arguments[1]instanceof Kt){var u=arguments[0]
return arguments[1].getCoordinate().equals2D(u)?I.INTERIOR:I.EXTERIOR}},Cn.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?at.locatePointInRing(t,e.getCoordinates()):I.EXTERIOR},Cn.prototype.intersects=function(t,e){return this.locate(t,e)!==I.EXTERIOR},Cn.prototype.updateLocationInfo=function(t){t===I.INTERIOR&&(this._isIn=!0),t===I.BOUNDARY&&this._numBoundaries++},Cn.prototype.computeLocation=function(t,e){if(e instanceof Kt&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof Ht)this.updateLocationInfo(this.locateInternal(t,e))
else if(e instanceof Qt)this.updateLocationInfo(this.locateInternal(t,e))
else if(e instanceof qt)for(var i=e,n=0;n<i.getNumGeometries();n++){var r=i.getGeometryN(n)
this.updateLocationInfo(this.locateInternal(t,r))}else if(e instanceof ie)for(var o=e,s=0;s<o.getNumGeometries();s++){var a=o.getGeometryN(s)
this.updateLocationInfo(this.locateInternal(t,a))}else if(e instanceof Ut)for(var l=new Gi(e);l.hasNext();){var h=l.next()
h!==e&&this.computeLocation(t,h)}},Cn.prototype.locate=function(t,e){return e.isEmpty()?I.EXTERIOR:e instanceof Ht||e instanceof Qt?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?I.BOUNDARY:this._numBoundaries>0||this._isIn?I.INTERIOR:I.EXTERIOR)},Cn.prototype.interfaces_=function(){return[]},Cn.prototype.getClass=function(){return Cn}
var Pn=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length)t.call(this,arguments[0],t.INSIDE_AREA,arguments[1])
else if(3===arguments.length){var e=arguments[0],i=arguments[1],n=arguments[2]
this._component=e,this._segIndex=i,this._pt=n}},Tn={INSIDE_AREA:{configurable:!0}}
Pn.prototype.isInsideArea=function(){return this._segIndex===Pn.INSIDE_AREA},Pn.prototype.getCoordinate=function(){return this._pt},Pn.prototype.getGeometryComponent=function(){return this._component},Pn.prototype.getSegmentIndex=function(){return this._segIndex},Pn.prototype.interfaces_=function(){return[]},Pn.prototype.getClass=function(){return Pn},Tn.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Pn,Tn)
var In=function(t){this._pts=t||null}
In.prototype.filter=function(t){t instanceof Kt&&this._pts.add(t)},In.prototype.interfaces_=function(){return[Gt]},In.prototype.getClass=function(){return In},In.getPoints=function(){if(1===arguments.length){var t=arguments[0]
return t instanceof Kt?Qe.singletonList(t):In.getPoints(t,new Et)}if(2===arguments.length){var e=arguments[0],i=arguments[1]
return e instanceof Kt?i.add(e):e instanceof Ut&&e.apply(new In(i)),i}}
var Mn=function(){this._locations=null
var t=arguments[0]
this._locations=t}
Mn.prototype.filter=function(t){(t instanceof Kt||t instanceof Ht||t instanceof Qt)&&this._locations.add(new Pn(t,0,t.getCoordinate()))},Mn.prototype.interfaces_=function(){return[Gt]},Mn.prototype.getClass=function(){return Mn},Mn.getLocations=function(t){var e=new Et
return t.apply(new Mn(e)),e}
var An=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Cn,this._minDistanceLocation=null,this._minDistance=v.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1]
this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var i=arguments[0],n=arguments[1],r=arguments[2]
this._geom=new Array(2).fill(null),this._geom[0]=i,this._geom[1]=n,this._terminateDistance=r}}
An.prototype.computeContainmentDistance=function(){if(0===arguments.length){var t=new Array(2).fill(null)
if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null
this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],i=arguments[1],n=1-e,r=En.getPolygons(this._geom[e])
if(r.size()>0){var o=Mn.getLocations(this._geom[n])
if(this.computeContainmentDistance(o,r,i),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[n]=i[0],this._minDistanceLocation[e]=i[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&A(arguments[0],wt)&&A(arguments[1],wt)){for(var s=arguments[0],a=arguments[1],l=arguments[2],h=0;h<s.size();h++)for(var u=s.get(h),c=0;c<a.size();c++)if(this.computeContainmentDistance(u,a.get(c),l),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Pn&&arguments[1]instanceof Qt){var d=arguments[0],f=arguments[1],p=arguments[2],g=d.getCoordinate()
if(I.EXTERIOR!==this._ptLocator.locate(g,f))return this._minDistance=0,p[0]=d,p[1]=new Pn(f,g),null}},An.prototype.computeMinDistanceLinesPoints=function(t,e,i){for(var n=0;n<t.size();n++)for(var r=t.get(n),o=0;o<e.size();o++){var s=e.get(o)
if(this.computeMinDistance(r,s,i),this._minDistance<=this._terminateDistance)return null}},An.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=Sn.getLines(this._geom[0]),i=Sn.getLines(this._geom[1]),n=In.getPoints(this._geom[0]),r=In.getPoints(this._geom[1])
return this.computeMinDistanceLines(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,r,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(i,n,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(n,r,t),void this.updateMinDistance(t,!1))))},An.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},An.prototype.updateMinDistance=function(t,e){if(null===t[0])return null
e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},An.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},An.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation)return null
if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null
this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Ht&&arguments[1]instanceof Kt){var t=arguments[0],e=arguments[1],i=arguments[2]
if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null
for(var n=t.getCoordinates(),r=e.getCoordinate(),o=0;o<n.length-1;o++){var s=at.distancePointLine(r,n[o],n[o+1])
if(s<this._minDistance){this._minDistance=s
var a=new pi(n[o],n[o+1]).closestPoint(r)
i[0]=new Pn(t,o,a),i[1]=new Pn(e,0,r)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Ht&&arguments[1]instanceof Ht){var l=arguments[0],h=arguments[1],u=arguments[2]
if(l.getEnvelopeInternal().distance(h.getEnvelopeInternal())>this._minDistance)return null
for(var c=l.getCoordinates(),d=h.getCoordinates(),f=0;f<c.length-1;f++)for(var p=0;p<d.length-1;p++){var g=at.distanceLineLine(c[f],c[f+1],d[p],d[p+1])
if(g<this._minDistance){this._minDistance=g
var _=new pi(c[f],c[f+1]),m=new pi(d[p],d[p+1]),y=_.closestPoints(m)
u[0]=new Pn(l,f,y[0]),u[1]=new Pn(h,p,y[1])}if(this._minDistance<=this._terminateDistance)return null}}},An.prototype.computeMinDistancePoints=function(t,e,i){for(var n=0;n<t.size();n++)for(var r=t.get(n),o=0;o<e.size();o++){var s=e.get(o),a=r.getCoordinate().distance(s.getCoordinate())
if(a<this._minDistance&&(this._minDistance=a,i[0]=new Pn(r,0,r.getCoordinate()),i[1]=new Pn(s,0,s.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},An.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new y("null geometries are not supported")
return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},An.prototype.computeMinDistanceLines=function(t,e,i){for(var n=0;n<t.size();n++)for(var r=t.get(n),o=0;o<e.size();o++){var s=e.get(o)
if(this.computeMinDistance(r,s,i),this._minDistance<=this._terminateDistance)return null}},An.prototype.interfaces_=function(){return[]},An.prototype.getClass=function(){return An},An.distance=function(t,e){return new An(t,e).distance()},An.isWithinDistance=function(t,e,i){return new An(t,e,i).distance()<=i},An.nearestPoints=function(t,e){return new An(t,e).nearestPoints()}
var Rn=function(){this._pt=[new S,new S],this._distance=v.NaN,this._isNull=!0}
Rn.prototype.getCoordinates=function(){return this._pt},Rn.prototype.getCoordinate=function(t){return this._pt[t]},Rn.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0]
this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],i=arguments[1]
if(this._isNull)return this.initialize(e,i),null
var n=e.distance(i)
n<this._distance&&this.initialize(e,i,n)}},Rn.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0
else if(2===arguments.length){var t=arguments[0],e=arguments[1]
this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var i=arguments[0],n=arguments[1],r=arguments[2]
this._pt[0].setCoordinate(i),this._pt[1].setCoordinate(n),this._distance=r,this._isNull=!1}},Rn.prototype.toString=function(){return J.toLineString(this._pt[0],this._pt[1])},Rn.prototype.getDistance=function(){return this._distance},Rn.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0]
this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],i=arguments[1]
if(this._isNull)return this.initialize(e,i),null
var n=e.distance(i)
n>this._distance&&this.initialize(e,i,n)}},Rn.prototype.interfaces_=function(){return[]},Rn.prototype.getClass=function(){return Rn}
var Ln=function(){}
Ln.prototype.interfaces_=function(){return[]},Ln.prototype.getClass=function(){return Ln},Ln.computeDistance=function(){if(arguments[2]instanceof Rn&&arguments[0]instanceof Ht&&arguments[1]instanceof S)for(var t=arguments[0],e=arguments[1],i=arguments[2],n=new pi,r=t.getCoordinates(),o=0;o<r.length-1;o++){n.setCoordinates(r[o],r[o+1])
var s=n.closestPoint(e)
i.setMinimum(s,e)}else if(arguments[2]instanceof Rn&&arguments[0]instanceof Qt&&arguments[1]instanceof S){var a=arguments[0],l=arguments[1],h=arguments[2]
Ln.computeDistance(a.getExteriorRing(),l,h)
for(var u=0;u<a.getNumInteriorRing();u++)Ln.computeDistance(a.getInteriorRingN(u),l,h)}else if(arguments[2]instanceof Rn&&arguments[0]instanceof ut&&arguments[1]instanceof S){var c=arguments[0],d=arguments[1],f=arguments[2]
if(c instanceof Ht)Ln.computeDistance(c,d,f)
else if(c instanceof Qt)Ln.computeDistance(c,d,f)
else if(c instanceof Ut)for(var p=c,g=0;g<p.getNumGeometries();g++){var _=p.getGeometryN(g)
Ln.computeDistance(_,d,f)}else f.setMinimum(c.getCoordinate(),d)}else if(arguments[2]instanceof Rn&&arguments[0]instanceof pi&&arguments[1]instanceof S){var m=arguments[1],y=arguments[2],v=arguments[0].closestPoint(m)
y.setMinimum(v,m)}}
var On=function(){this._g0=null,this._g1=null,this._ptDist=new Rn,this._densifyFrac=0
var t=arguments[0],e=arguments[1]
this._g0=t,this._g1=e},Dn={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}}
On.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},On.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new y("Fraction is not in range (0.0 - 1.0]")
this._densifyFrac=t},On.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},On.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},On.prototype.computeOrientedDistance=function(t,e,i){var n=new Nn(e)
if(t.apply(n),i.setMaximum(n.getMaxPointDistance()),this._densifyFrac>0){var r=new Fn(e,this._densifyFrac)
t.apply(r),i.setMaximum(r.getMaxPointDistance())}},On.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},On.prototype.interfaces_=function(){return[]},On.prototype.getClass=function(){return On},On.distance=function(){if(2===arguments.length)return new On(arguments[0],arguments[1]).distance()
if(3===arguments.length){var t=arguments[2],e=new On(arguments[0],arguments[1])
return e.setDensifyFraction(t),e.distance()}},Dn.MaxPointDistanceFilter.get=function(){return Nn},Dn.MaxDensifiedByFractionDistanceFilter.get=function(){return Fn},Object.defineProperties(On,Dn)
var Nn=function(){this._maxPtDist=new Rn,this._minPtDist=new Rn,this._euclideanDist=new Ln,this._geom=null
var t=arguments[0]
this._geom=t}
Nn.prototype.filter=function(t){this._minPtDist.initialize(),Ln.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Nn.prototype.getMaxPointDistance=function(){return this._maxPtDist},Nn.prototype.interfaces_=function(){return[ft]},Nn.prototype.getClass=function(){return Nn}
var Fn=function(){this._maxPtDist=new Rn,this._minPtDist=new Rn,this._geom=null,this._numSubSegs=0
var t=arguments[0],e=arguments[1]
this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))}
Fn.prototype.filter=function(t,e){if(0===e)return null
for(var i=t.getCoordinate(e-1),n=t.getCoordinate(e),r=(n.x-i.x)/this._numSubSegs,o=(n.y-i.y)/this._numSubSegs,s=0;s<this._numSubSegs;s++){var a=i.x+s*r,l=i.y+s*o,h=new S(a,l)
this._minPtDist.initialize(),Ln.computeDistance(this._geom,h,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},Fn.prototype.isDone=function(){return!1},Fn.prototype.isGeometryChanged=function(){return!1},Fn.prototype.getMaxPointDistance=function(){return this._maxPtDist},Fn.prototype.interfaces_=function(){return[Bt]},Fn.prototype.getClass=function(){return Fn}
var kn=function(t,e,i){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=i||null},zn={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}}
kn.prototype.checkMaximumDistance=function(t,e,i){var n=new On(e,t)
if(n.setDensifyFraction(.25),this._maxDistanceFound=n.orientedDistance(),this._maxDistanceFound>i){this._isValid=!1
var r=n.getCoordinates()
this._errorLocation=r[1],this._errorIndicator=t.getFactory().createLineString(r),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+J.toLineString(r[0],r[1])+")"}},kn.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=kn.MAX_DISTANCE_DIFF_FRAC*t
return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),kn.VERBOSE&&V.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},kn.prototype.checkNegativeValid=function(){if(!(this._input instanceof Qt||this._input instanceof ie||this._input instanceof Ut))return null
var t=this.getPolygonLines(this._input)
if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null
this.checkMaximumDistance(t,this._result,this._maxValidDistance)},kn.prototype.getErrorIndicator=function(){return this._errorIndicator},kn.prototype.checkMinimumDistance=function(t,e,i){var n=new An(t,e,i)
if(this._minDistanceFound=n.distance(),this._minDistanceFound<i){this._isValid=!1
var r=n.nearestPoints()
this._errorLocation=n.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(r),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+J.toLineString(r[0],r[1])+" )"}},kn.prototype.checkPositiveValid=function(){var t=this._result.getBoundary()
if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null
this.checkMaximumDistance(this._input,t,this._maxValidDistance)},kn.prototype.getErrorLocation=function(){return this._errorLocation},kn.prototype.getPolygonLines=function(t){for(var e=new Et,i=new Sn(e),n=En.getPolygons(t).iterator();n.hasNext();)n.next().apply(i)
return t.getFactory().buildGeometry(e)},kn.prototype.getErrorMessage=function(){return this._errMsg},kn.prototype.interfaces_=function(){return[]},kn.prototype.getClass=function(){return kn},zn.VERBOSE.get=function(){return!1},zn.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(kn,zn)
var jn=function(t,e,i){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=i||null},Gn={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}}
jn.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},jn.prototype.checkEnvelope=function(){if(this._distance<0)return null
var t=this._distance*jn.MAX_ENV_DIFF_FRAC
0===t&&(t=.001)
var e=new W(this._input.getEnvelopeInternal())
e.expandBy(this._distance)
var i=new W(this._result.getEnvelopeInternal())
i.expandBy(t),i.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(i)),this.report("Envelope")},jn.prototype.checkDistance=function(){var t=new kn(this._input,this._distance,this._result)
t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},jn.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea()
this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},jn.prototype.checkPolygonal=function(){this._result instanceof Qt||this._result instanceof ie||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},jn.prototype.getErrorIndicator=function(){return this._errorIndicator},jn.prototype.getErrorLocation=function(){return this._errorLocation},jn.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},jn.prototype.report=function(t){if(!jn.VERBOSE)return null
V.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},jn.prototype.getErrorMessage=function(){return this._errorMsg},jn.prototype.interfaces_=function(){return[]},jn.prototype.getClass=function(){return jn},jn.isValidMsg=function(t,e,i){var n=new jn(t,e,i)
return n.isValid()?null:n.getErrorMessage()},jn.isValid=function(t,e,i){return!!new jn(t,e,i).isValid()},Gn.VERBOSE.get=function(){return!1},Gn.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(jn,Gn)
var Bn=function(){this._pts=null,this._data=null
var t=arguments[0],e=arguments[1]
this._pts=t,this._data=e}
Bn.prototype.getCoordinates=function(){return this._pts},Bn.prototype.size=function(){return this._pts.length},Bn.prototype.getCoordinate=function(t){return this._pts[t]},Bn.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Bn.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:ui.octant(this.getCoordinate(t),this.getCoordinate(t+1))},Bn.prototype.setData=function(t){this._data=t},Bn.prototype.getData=function(){return this._data},Bn.prototype.toString=function(){return J.toLineString(new le(this._pts))},Bn.prototype.interfaces_=function(){return[ci]},Bn.prototype.getClass=function(){return Bn}
var Un=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new Et,this._intersectionCount=0,this._keepIntersections=!0
var t=arguments[0]
this._li=t,this._interiorIntersection=null}
Un.prototype.getInteriorIntersection=function(){return this._interiorIntersection},Un.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},Un.prototype.getIntersectionSegments=function(){return this._intSegments},Un.prototype.count=function(){return this._intersectionCount},Un.prototype.getIntersections=function(){return this._intersections},Un.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Un.prototype.setKeepIntersections=function(t){this._keepIntersections=t},Un.prototype.processIntersections=function(t,e,i,n){if(!this._findAllIntersections&&this.hasIntersection())return null
if(t===i&&e===n)return null
if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(i,n))return null
var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=i.getCoordinates()[n],a=i.getCoordinates()[n+1]
this._li.computeIntersection(r,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=r,this._intSegments[1]=o,this._intSegments[2]=s,this._intSegments[3]=a,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},Un.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},Un.prototype.hasIntersection=function(){return null!==this._interiorIntersection},Un.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},Un.prototype.interfaces_=function(){return[Yi]},Un.prototype.getClass=function(){return Un},Un.createAllIntersectionsFinder=function(t){var e=new Un(t)
return e.setFindAllIntersections(!0),e},Un.createAnyIntersectionFinder=function(t){return new Un(t)},Un.createIntersectionCounter=function(t){var e=new Un(t)
return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e}
var qn=function(){this._li=new rt,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0
var t=arguments[0]
this._segStrings=t}
qn.prototype.execute=function(){if(null!==this._segInt)return null
this.checkInteriorIntersections()},qn.prototype.getIntersections=function(){return this._segInt.getIntersections()},qn.prototype.isValid=function(){return this.execute(),this._isValid},qn.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},qn.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new Un(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections)
var t=new bi
if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},qn.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Ie(this.getErrorMessage(),this._segInt.getInteriorIntersection())},qn.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found"
var t=this._segInt.getIntersectionSegments()
return"found non-noded intersection between "+J.toLineString(t[0],t[1])+" and "+J.toLineString(t[2],t[3])},qn.prototype.interfaces_=function(){return[]},qn.prototype.getClass=function(){return qn},qn.computeIntersections=function(t){var e=new qn(t)
return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()}
var Vn=function t(){this._nv=null
var e=arguments[0]
this._nv=new qn(t.toSegmentStrings(e))}
Vn.prototype.checkValid=function(){this._nv.checkValid()},Vn.prototype.interfaces_=function(){return[]},Vn.prototype.getClass=function(){return Vn},Vn.toSegmentStrings=function(t){for(var e=new Et,i=t.iterator();i.hasNext();){var n=i.next()
e.add(new Bn(n.getCoordinates(),n))}return e},Vn.checkValid=function(t){new Vn(t).checkValid()}
var Zn=function(t){this._mapOp=t}
Zn.prototype.map=function(t){for(var e=new Et,i=0;i<t.getNumGeometries();i++){var n=this._mapOp.map(t.getGeometryN(i))
n.isEmpty()||e.add(n)}return t.getFactory().createGeometryCollection(me.toGeometryArray(e))},Zn.prototype.interfaces_=function(){return[]},Zn.prototype.getClass=function(){return Zn},Zn.map=function(t,e){return new Zn(e).map(t)}
var Wn=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new Et,this._resultLineList=new Et
var t=arguments[0],e=arguments[1],i=arguments[2]
this._op=t,this._geometryFactory=e,this._ptLocator=i}
Wn.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var i=e.next()
this.collectLineEdge(i,t,this._lineEdgesList),this.collectBoundaryTouchEdge(i,t,this._lineEdgesList)}},Wn.prototype.labelIsolatedLine=function(t,e){var i=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e))
t.getLabel().setLocation(e,i)},Wn.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},Wn.prototype.collectLineEdge=function(t,e,i){var n=t.getLabel(),r=t.getEdge()
t.isLineEdge()&&(t.isVisited()||!Pr.isResultOfOp(n,e)||r.isCovered()||(i.add(r),t.setVisitedEdge(!0)))},Wn.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges()
for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var i=e.next(),n=i.getEdge()
if(i.isLineEdge()&&!n.isCoveredSet()){var r=this._op.isCoveredByA(i.getCoordinate())
n.setCovered(r)}}},Wn.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var i=e.next(),n=i.getLabel()
i.isIsolated()&&(n.isNull(0)?this.labelIsolatedLine(i,0):this.labelIsolatedLine(i,1))}},Wn.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var i=e.next(),n=this._geometryFactory.createLineString(i.getCoordinates())
this._resultLineList.add(n),i.setInResult(!0)}},Wn.prototype.collectBoundaryTouchEdge=function(t,e,i){var n=t.getLabel()
return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(et.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Pr.isResultOfOp(n,e)&&e===Pr.INTERSECTION&&(i.add(t.getEdge()),t.setVisitedEdge(!0))))},Wn.prototype.interfaces_=function(){return[]},Wn.prototype.getClass=function(){return Wn}
var Yn=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new Et
var t=arguments[0],e=arguments[1]
this._op=t,this._geometryFactory=e}
Yn.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate()
if(!this._op.isCoveredByLA(e)){var i=this._geometryFactory.createPoint(e)
this._resultPointList.add(i)}},Yn.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var i=e.next()
if(!(i.isInResult()||i.isIncidentEdgeInResult()||0!==i.getEdges().getDegree()&&t!==Pr.INTERSECTION)){var n=i.getLabel()
Pr.isResultOfOp(n,t)&&this.filterCoveredNodeToPoint(i)}}},Yn.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},Yn.prototype.interfaces_=function(){return[]},Yn.prototype.getClass=function(){return Yn}
var Xn=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1}
Xn.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Xn.prototype.transformPolygon=function(t,e){var i=!0,n=this.transformLinearRing(t.getExteriorRing(),t)
null!==n&&n instanceof ee&&!n.isEmpty()||(i=!1)
for(var r=new Et,o=0;o<t.getNumInteriorRing();o++){var s=this.transformLinearRing(t.getInteriorRingN(o),t)
null===s||s.isEmpty()||(s instanceof ee||(i=!1),r.add(s))}if(i)return this._factory.createPolygon(n,r.toArray([]))
var a=new Et
return null!==n&&a.add(n),a.addAll(r),this._factory.buildGeometry(a)},Xn.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Xn.prototype.getInputGeometry=function(){return this._inputGeom},Xn.prototype.transformMultiLineString=function(t,e){for(var i=new Et,n=0;n<t.getNumGeometries();n++){var r=this.transformLineString(t.getGeometryN(n),t)
null!==r&&(r.isEmpty()||i.add(r))}return this._factory.buildGeometry(i)},Xn.prototype.transformCoordinates=function(t,e){return this.copy(t)},Xn.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Xn.prototype.transformMultiPoint=function(t,e){for(var i=new Et,n=0;n<t.getNumGeometries();n++){var r=this.transformPoint(t.getGeometryN(n),t)
null!==r&&(r.isEmpty()||i.add(r))}return this._factory.buildGeometry(i)},Xn.prototype.transformMultiPolygon=function(t,e){for(var i=new Et,n=0;n<t.getNumGeometries();n++){var r=this.transformPolygon(t.getGeometryN(n),t)
null!==r&&(r.isEmpty()||i.add(r))}return this._factory.buildGeometry(i)},Xn.prototype.copy=function(t){return t.copy()},Xn.prototype.transformGeometryCollection=function(t,e){for(var i=new Et,n=0;n<t.getNumGeometries();n++){var r=this.transform(t.getGeometryN(n))
null!==r&&(this._pruneEmptyGeometry&&r.isEmpty()||i.add(r))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(me.toGeometryArray(i)):this._factory.buildGeometry(i)},Xn.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof Kt)return this.transformPoint(t,null)
if(t instanceof te)return this.transformMultiPoint(t,null)
if(t instanceof ee)return this.transformLinearRing(t,null)
if(t instanceof Ht)return this.transformLineString(t,null)
if(t instanceof qt)return this.transformMultiLineString(t,null)
if(t instanceof Qt)return this.transformPolygon(t,null)
if(t instanceof ie)return this.transformMultiPolygon(t,null)
if(t instanceof Ut)return this.transformGeometryCollection(t,null)
throw new y("Unknown Geometry subtype: "+t.getClass().getName())},Xn.prototype.transformLinearRing=function(t,e){var i=this.transformCoordinates(t.getCoordinateSequence(),t)
if(null===i)return this._factory.createLinearRing(null)
var n=i.size()
return n>0&&n<4&&!this._preserveType?this._factory.createLineString(i):this._factory.createLinearRing(i)},Xn.prototype.interfaces_=function(){return[]},Xn.prototype.getClass=function(){return Xn}
var Hn=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new pi,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Ht&&"number"==typeof arguments[1]){var e=arguments[1]
t.call(this,arguments[0].getCoordinates(),e)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var i=arguments[0],n=arguments[1]
this._srcPts=i,this._isClosed=t.isClosed(i),this._snapTolerance=n}}
Hn.prototype.snapVertices=function(t,e){for(var i=this._isClosed?t.size()-1:t.size(),n=0;n<i;n++){var r=t.get(n),o=this.findSnapForVertex(r,e)
null!==o&&(t.set(n,new S(o)),0===n&&this._isClosed&&t.set(t.size()-1,new S(o)))}},Hn.prototype.findSnapForVertex=function(t,e){for(var i=0;i<e.length;i++){if(t.equals2D(e[i]))return null
if(t.distance(e[i])<this._snapTolerance)return e[i]}return null},Hn.prototype.snapTo=function(t){var e=new Ct(this._srcPts)
return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},Hn.prototype.snapSegments=function(t,e){if(0===e.length)return null
var i=e.length
e[0].equals2D(e[e.length-1])&&(i=e.length-1)
for(var n=0;n<i;n++){var r=e[n],o=this.findSegmentIndexToSnap(r,t)
o>=0&&t.add(o+1,new S(r),!1)}},Hn.prototype.findSegmentIndexToSnap=function(t,e){for(var i=v.MAX_VALUE,n=-1,r=0;r<e.size()-1;r++){if(this._seg.p0=e.get(r),this._seg.p1=e.get(r+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue
return-1}var o=this._seg.distance(t)
o<this._snapTolerance&&o<i&&(i=o,n=r)}return n},Hn.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},Hn.prototype.interfaces_=function(){return[]},Hn.prototype.getClass=function(){return Hn},Hn.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])}
var $n=function(t){this._srcGeom=t||null},Kn={SNAP_PRECISION_FACTOR:{configurable:!0}}
$n.prototype.snapTo=function(t,e){var i=this.extractTargetCoordinates(t)
return new Jn(e,i).transform(this._srcGeom)},$n.prototype.snapToSelf=function(t,e){var i=this.extractTargetCoordinates(this._srcGeom),n=new Jn(t,i,!0).transform(this._srcGeom),r=n
return e&&A(r,Jt)&&(r=n.buffer(0)),r},$n.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},$n.prototype.extractTargetCoordinates=function(t){for(var e=new f,i=t.getCoordinates(),n=0;n<i.length;n++)e.add(i[n])
return e.toArray(new Array(0).fill(null))},$n.prototype.computeMinimumSegmentLength=function(t){for(var e=v.MAX_VALUE,i=0;i<t.length-1;i++){var n=t[i].distance(t[i+1])
n<e&&(e=n)}return e},$n.prototype.interfaces_=function(){return[]},$n.prototype.getClass=function(){return $n},$n.snap=function(t,e,i){var n=new Array(2).fill(null),r=new $n(t)
n[0]=r.snapTo(e,i)
var o=new $n(e)
return n[1]=o.snapTo(n[0],i),n},$n.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=$n.computeSizeBasedSnapTolerance(t),i=t.getPrecisionModel()
if(i.getType()===fe.FIXED){var n=1/i.getScale()*2/1.415
n>e&&(e=n)}return e}if(2===arguments.length){var r=arguments[0],o=arguments[1]
return Math.min($n.computeOverlaySnapTolerance(r),$n.computeOverlaySnapTolerance(o))}},$n.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal()
return Math.min(e.getHeight(),e.getWidth())*$n.SNAP_PRECISION_FACTOR},$n.snapToSelf=function(t,e,i){return new $n(t).snapToSelf(e,i)},Kn.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties($n,Kn)
var Jn=function(t){function e(e,i,n){t.call(this),this._snapTolerance=e||null,this._snapPts=i||null,this._isSelfSnap=void 0!==n&&n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var i=new Hn(t,this._snapTolerance)
return i.setAllowSnappingToSourceVertices(this._isSelfSnap),i.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var i=t.toCoordinateArray(),n=this.snapLine(i,this._snapPts)
return this._factory.getCoordinateSequenceFactory().create(n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Xn),Qn=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null}
Qn.prototype.getCommon=function(){return v.longBitsToDouble(this._commonBits)},Qn.prototype.add=function(t){var e=v.doubleToLongBits(t)
return this._isFirst?(this._commonBits=e,this._commonSignExp=Qn.signExpBits(this._commonBits),this._isFirst=!1,null):Qn.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=Qn.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=Qn.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},Qn.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=v.longBitsToDouble(t),i="0000000000000000000000000000000000000000000000000000000000000000"+v.toBinaryString(t),n=i.substring(i.length-64)
return n.substring(0,1)+"  "+n.substring(1,12)+"(exp) "+n.substring(12)+" [ "+e+" ]"}},Qn.prototype.interfaces_=function(){return[]},Qn.prototype.getClass=function(){return Qn},Qn.getBit=function(t,e){return t&1<<e?1:0},Qn.signExpBits=function(t){return t>>52},Qn.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},Qn.numCommonMostSigMantissaBits=function(t,e){for(var i=0,n=52;n>=0;n--){if(Qn.getBit(t,n)!==Qn.getBit(e,n))return i
i++}return 52}
var tr=function(){this._commonCoord=null,this._ccFilter=new ir},er={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}}
tr.prototype.addCommonBits=function(t){var e=new nr(this._commonCoord)
t.apply(e),t.geometryChanged()},tr.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t
var e=new S(this._commonCoord)
e.x=-e.x,e.y=-e.y
var i=new nr(e)
return t.apply(i),t.geometryChanged(),t},tr.prototype.getCommonCoordinate=function(){return this._commonCoord},tr.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},tr.prototype.interfaces_=function(){return[]},tr.prototype.getClass=function(){return tr},er.CommonCoordinateFilter.get=function(){return ir},er.Translater.get=function(){return nr},Object.defineProperties(tr,er)
var ir=function(){this._commonBitsX=new Qn,this._commonBitsY=new Qn}
ir.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},ir.prototype.getCommonCoordinate=function(){return new S(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},ir.prototype.interfaces_=function(){return[ft]},ir.prototype.getClass=function(){return ir}
var nr=function(){this.trans=null
var t=arguments[0]
this.trans=t}
nr.prototype.filter=function(t,e){var i=t.getOrdinate(e,0)+this.trans.x,n=t.getOrdinate(e,1)+this.trans.y
t.setOrdinate(e,0,i),t.setOrdinate(e,1,n)},nr.prototype.isDone=function(){return!1},nr.prototype.isGeometryChanged=function(){return!0},nr.prototype.interfaces_=function(){return[Bt]},nr.prototype.getClass=function(){return nr}
var rr=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()}
rr.prototype.selfSnap=function(t){return new $n(t).snapTo(t,this._snapTolerance)},rr.prototype.removeCommonBits=function(t){this._cbr=new tr,this._cbr.add(t[0]),this._cbr.add(t[1])
var e=new Array(2).fill(null)
return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},rr.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},rr.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),i=Pr.overlayOp(e[0],e[1],t)
return this.prepareResult(i)},rr.prototype.checkValid=function(t){t.isValid()||V.out.println("Snapped geometry is invalid")},rr.prototype.computeSnapTolerance=function(){this._snapTolerance=$n.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},rr.prototype.snap=function(t){var e=this.removeCommonBits(t)
return $n.snap(e[0],e[1],this._snapTolerance)},rr.prototype.interfaces_=function(){return[]},rr.prototype.getClass=function(){return rr},rr.overlayOp=function(t,e,i){return new rr(t,e).getResultGeometry(i)},rr.union=function(t,e){return rr.overlayOp(t,e,Pr.UNION)},rr.intersection=function(t,e){return rr.overlayOp(t,e,Pr.INTERSECTION)},rr.symDifference=function(t,e){return rr.overlayOp(t,e,Pr.SYMDIFFERENCE)},rr.difference=function(t,e){return rr.overlayOp(t,e,Pr.DIFFERENCE)}
var or=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e}
or.prototype.getResultGeometry=function(t){var e=null,i=!1,n=null
try{e=Pr.overlayOp(this._geom[0],this._geom[1],t),i=!0}catch(t){if(!(t instanceof Q))throw t
n=t}if(!i)try{e=rr.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof Q?n:t}return e},or.prototype.interfaces_=function(){return[]},or.prototype.getClass=function(){return or},or.overlayOp=function(t,e,i){return new or(t,e).getResultGeometry(i)},or.union=function(t,e){return or.overlayOp(t,e,Pr.UNION)},or.intersection=function(t,e){return or.overlayOp(t,e,Pr.INTERSECTION)},or.symDifference=function(t,e){return or.overlayOp(t,e,Pr.SYMDIFFERENCE)},or.difference=function(t,e){return or.overlayOp(t,e,Pr.DIFFERENCE)}
var sr=function(){this.mce=null,this.chainIndex=null
var t=arguments[0],e=arguments[1]
this.mce=t,this.chainIndex=e}
sr.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},sr.prototype.interfaces_=function(){return[]},sr.prototype.getClass=function(){return sr}
var ar=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],i=arguments[1]
this._eventType=t.DELETE,this._xValue=e,this._insertEvent=i}else if(3===arguments.length){var n=arguments[0],r=arguments[1],o=arguments[2]
this._eventType=t.INSERT,this._label=n,this._xValue=r,this._obj=o}},lr={INSERT:{configurable:!0},DELETE:{configurable:!0}}
ar.prototype.isDelete=function(){return this._eventType===ar.DELETE},ar.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},ar.prototype.getObject=function(){return this._obj},ar.prototype.compareTo=function(t){var e=t
return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},ar.prototype.getInsertEvent=function(){return this._insertEvent},ar.prototype.isInsert=function(){return this._eventType===ar.INSERT},ar.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},ar.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},ar.prototype.interfaces_=function(){return[b]},ar.prototype.getClass=function(){return ar},lr.INSERT.get=function(){return 1},lr.DELETE.get=function(){return 2},Object.defineProperties(ar,lr)
var hr=function(){}
hr.prototype.interfaces_=function(){return[]},hr.prototype.getClass=function(){return hr}
var ur=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1
var t=arguments[0],e=arguments[1],i=arguments[2]
this._li=t,this._includeProper=e,this._recordIsolated=i}
ur.prototype.isTrivialIntersection=function(t,e,i,n){if(t===i&&1===this._li.getIntersectionNum()){if(ur.isAdjacentSegments(e,n))return!0
if(t.isClosed()){var r=t.getNumPoints()-1
if(0===e&&n===r||0===n&&e===r)return!0}}return!1},ur.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},ur.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},ur.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},ur.prototype.isBoundaryPointInternal=function(t,e){for(var i=e.iterator();i.hasNext();){var n=i.next().getCoordinate()
if(t.isIntersection(n))return!0}return!1},ur.prototype.hasProperIntersection=function(){return this._hasProper},ur.prototype.hasIntersection=function(){return this._hasIntersection},ur.prototype.isDone=function(){return this._isDone},ur.prototype.isBoundaryPoint=function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},ur.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},ur.prototype.addIntersections=function(t,e,i,n){if(t===i&&e===n)return null
this.numTests++
var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=i.getCoordinates()[n],a=i.getCoordinates()[n+1]
this._li.computeIntersection(r,o,s,a),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),i.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,i,n)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),i.addIntersections(this._li,n,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},ur.prototype.interfaces_=function(){return[]},ur.prototype.getClass=function(){return ur},ur.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)}
var cr=function(t){function e(){t.call(this),this.events=new Et,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){Qe.sort(this.events)
for(var t=0;t<this.events.size();t++){var e=this.events.get(t)
e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var t=arguments[0]
this.nOverlaps=0,this.prepareEvents()
for(var e=0;e<this.events.size();e++){var i=this.events.get(e)
if(i.isInsert()&&this.processOverlaps(e,i.getDeleteEventIndex(),i,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof ur&&A(arguments[0],wt)&&A(arguments[1],wt)){var n=arguments[0],r=arguments[1],o=arguments[2]
this.addEdges(n,n),this.addEdges(r,r),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&A(arguments[0],wt)&&arguments[1]instanceof ur){var s=arguments[0],a=arguments[1]
arguments[2]?this.addEdges(s,null):this.addEdges(s),this.computeIntersections(a)}},e.prototype.addEdge=function(t,e){for(var i=t.getMonotoneChainEdge(),n=i.getStartIndexes(),r=0;r<n.length-1;r++){var o=new sr(i,r),s=new ar(e,i.getMinX(r),o)
this.events.add(s),this.events.add(new ar(i.getMaxX(r),s))}},e.prototype.processOverlaps=function(t,e,i,n){for(var r=i.getObject(),o=t;o<e;o++){var s=this.events.get(o)
if(s.isInsert()){var a=s.getObject()
i.isSameLabel(s)||(r.computeIntersections(a,n),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next()
this.addEdge(e,e)}else if(2===arguments.length)for(var i=arguments[1],n=arguments[0].iterator();n.hasNext();){var r=n.next()
this.addEdge(r,i)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(hr),dr=function(){this._min=v.POSITIVE_INFINITY,this._max=v.NEGATIVE_INFINITY},fr={NodeComparator:{configurable:!0}}
dr.prototype.getMin=function(){return this._min},dr.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},dr.prototype.getMax=function(){return this._max},dr.prototype.toString=function(){return J.toLineString(new S(this._min,0),new S(this._max,0))},dr.prototype.interfaces_=function(){return[]},dr.prototype.getClass=function(){return dr},fr.NodeComparator.get=function(){return pr},Object.defineProperties(dr,fr)
var pr=function(){}
pr.prototype.compare=function(t,e){var i=t,n=e,r=(i._min+i._max)/2,o=(n._min+n._max)/2
return r<o?-1:r>o?1:0},pr.prototype.interfaces_=function(){return[E]},pr.prototype.getClass=function(){return pr}
var gr=function(t){function e(){t.call(this),this._item=null
var e=arguments[0],i=arguments[1],n=arguments[2]
this._min=e,this._max=i,this._item=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,i){if(!this.intersects(t,e))return null
i.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(dr),_r=function(t){function e(){t.call(this),this._node1=null,this._node2=null
var e=arguments[0],i=arguments[1]
this._node1=e,this._node2=i,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,i){if(!this.intersects(t,e))return null
null!==this._node1&&this._node1.query(t,e,i),null!==this._node2&&this._node2.query(t,e,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(dr),mr=function(){this._leaves=new Et,this._root=null,this._level=0}
mr.prototype.buildTree=function(){Qe.sort(this._leaves,new dr.NodeComparator)
for(var t=this._leaves,e=null,i=new Et;;){if(this.buildLevel(t,i),1===i.size())return i.get(0)
e=t,t=i,i=e}},mr.prototype.insert=function(t,e,i){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried")
this._leaves.add(new gr(t,e,i))},mr.prototype.query=function(t,e,i){this.init(),this._root.query(t,e,i)},mr.prototype.buildRoot=function(){if(null!==this._root)return null
this._root=this.buildTree()},mr.prototype.printNode=function(t){V.out.println(J.toLineString(new S(t._min,this._level),new S(t._max,this._level)))},mr.prototype.init=function(){if(null!==this._root)return null
this.buildRoot()},mr.prototype.buildLevel=function(t,e){this._level++,e.clear()
for(var i=0;i<t.size();i+=2){var n=t.get(i)
if(null===(i+1<t.size()?t.get(i):null))e.add(n)
else{var r=new _r(t.get(i),t.get(i+1))
e.add(r)}}},mr.prototype.interfaces_=function(){return[]},mr.prototype.getClass=function(){return mr}
var yr=function(){this._items=new Et}
yr.prototype.visitItem=function(t){this._items.add(t)},yr.prototype.getItems=function(){return this._items},yr.prototype.interfaces_=function(){return[He]},yr.prototype.getClass=function(){return yr}
var vr=function(){this._index=null
var t=arguments[0]
if(!A(t,Jt))throw new y("Argument must be Polygonal")
this._index=new wr(t)},xr={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}}
vr.prototype.locate=function(t){var e=new st(t),i=new br(e)
return this._index.query(t.y,t.y,i),e.getLocation()},vr.prototype.interfaces_=function(){return[ji]},vr.prototype.getClass=function(){return vr},xr.SegmentVisitor.get=function(){return br},xr.IntervalIndexedGeometry.get=function(){return wr},Object.defineProperties(vr,xr)
var br=function(){this._counter=null
var t=arguments[0]
this._counter=t}
br.prototype.visitItem=function(t){var e=t
this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},br.prototype.interfaces_=function(){return[He]},br.prototype.getClass=function(){return br}
var wr=function(){this._index=new mr
var t=arguments[0]
this.init(t)}
wr.prototype.init=function(t){for(var e=Sn.getLines(t).iterator();e.hasNext();){var i=e.next().getCoordinates()
this.addLine(i)}},wr.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var i=new pi(t[e-1],t[e]),n=Math.min(i.p0.y,i.p1.y),r=Math.max(i.p0.y,i.p1.y)
this._index.insert(n,r,i)}},wr.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],i=new yr
return this._index.query(t,e,i),i.getItems()}if(3===arguments.length){var n=arguments[0],r=arguments[1],o=arguments[2]
this._index.query(n,r,o)}},wr.prototype.interfaces_=function(){return[]},wr.prototype.getClass=function(){return wr}
var Er=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new de,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Cn,2===arguments.length){var e=arguments[0],i=arguments[1],n=pt.OGC_SFS_BOUNDARY_RULE
this._argIndex=e,this._parentGeom=i,this._boundaryNodeRule=n,null!==i&&this.add(i)}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2]
this._argIndex=r,this._parentGeom=o,this._boundaryNodeRule=s,null!==o&&this.add(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,i){var n=this._nodes.addNode(i).getLabel(),r=1
n.getLocation(t,Ce.ON)===I.BOUNDARY&&r++
var o=e.determineBoundary(this._boundaryNodeRule,r)
n.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1]
return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var i=arguments[1],n=arguments[2],r=new ur(arguments[0],!0,!1)
r.setIsDoneIfProperInt(n)
var o=this.createEdgeSetIntersector(),s=this._parentGeom instanceof ee||this._parentGeom instanceof Qt||this._parentGeom instanceof ie,a=i||!s
return o.computeIntersections(this._edges,r,a),this.addSelfIntersectionNodes(this._argIndex),r}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,i){var n=new ur(e,i,!0)
return n.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,n),n},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof Kt){var t=arguments[0].getCoordinate()
this.insertPoint(this._argIndex,t,I.INTERIOR)}else if(arguments[0]instanceof S){var e=arguments[0]
this.insertPoint(this._argIndex,e,I.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),I.EXTERIOR,I.INTERIOR)
for(var e=0;e<t.getNumInteriorRing();e++){var i=t.getInteriorRingN(e)
this.addPolygonRing(i,I.INTERIOR,I.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t)
var e=t.getCoordinates()
this.insertPoint(this._argIndex,e[0],I.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],I.BOUNDARY)},e.prototype.addLineString=function(t){var e=Pt.removeRepeatedPoints(t.getCoordinates())
if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null
var i=new en(e,new Le(this._argIndex,I.INTERIOR))
this._lineEdgeMap.put(t,i),this.insertEdge(i),et.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),i=0,n=t.iterator();n.hasNext();){var r=n.next()
e[i++]=r.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,i){if(this.isBoundaryNode(t,e))return null
i===I.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,i)},e.prototype.addPolygonRing=function(t,e,i){if(t.isEmpty())return null
var n=Pt.removeRepeatedPoints(t.getCoordinates())
if(n.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=n[0],null
var r=e,o=i
at.isCCW(n)&&(r=i,o=e)
var s=new en(n,new Le(this._argIndex,I.BOUNDARY,r,o))
this._lineEdgeMap.put(t,s),this.insertEdge(s),this.insertPoint(this._argIndex,n[0],I.BOUNDARY)},e.prototype.insertPoint=function(t,e,i){var n=this._nodes.addNode(e),r=n.getLabel()
null===r?n._label=new Le(t,i):r.setLocation(t,i)},e.prototype.createEdgeSetIntersector=function(){return new cr},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var i=e.next(),n=i.getLabel().getLocation(t),r=i.eiList.iterator();r.hasNext();){var o=r.next()
this.addSelfIntersectionNode(t,o.coord,n)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments)
var e=arguments[0]
if(e.isEmpty())return null
if(e instanceof ie&&(this._useBoundaryDeterminationRule=!1),e instanceof Qt)this.addPolygon(e)
else if(e instanceof Ht)this.addLineString(e)
else if(e instanceof Kt)this.addPoint(e)
else if(e instanceof te)this.addCollection(e)
else if(e instanceof qt)this.addCollection(e)
else if(e instanceof ie)this.addCollection(e)
else{if(!(e instanceof Ut))throw new Error(e.getClass().getName())
this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var i=t.getGeometryN(e)
this.add(i)}},e.prototype.locate=function(t){return A(this._parentGeom,Jt)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new vr(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0]
return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?I.BOUNDARY:I.INTERIOR},e}(Ve),Sr=function(){if(this._li=new rt,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0]
this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Er(0,t)}else if(2===arguments.length){var e=arguments[0],i=arguments[1],n=pt.OGC_SFS_BOUNDARY_RULE
e.getPrecisionModel().compareTo(i.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(i.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Er(0,e,n),this._arg[1]=new Er(1,i,n)}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2]
r.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(r.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Er(0,r,s),this._arg[1]=new Er(1,o,s)}}
Sr.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},Sr.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},Sr.prototype.interfaces_=function(){return[]},Sr.prototype.getClass=function(){return Sr}
var Cr=function(){}
Cr.prototype.interfaces_=function(){return[]},Cr.prototype.getClass=function(){return Cr},Cr.map=function(){if(arguments[0]instanceof ut&&A(arguments[1],Cr.MapOp)){for(var t=arguments[0],e=arguments[1],i=new Et,n=0;n<t.getNumGeometries();n++){var r=e.map(t.getGeometryN(n))
null!==r&&i.add(r)}return t.getFactory().buildGeometry(i)}if(A(arguments[0],xt)&&A(arguments[1],Cr.MapOp)){for(var o=arguments[0],s=arguments[1],a=new Et,l=o.iterator();l.hasNext();){var h=l.next(),u=s.map(h)
null!==u&&a.add(u)}return a}},Cr.MapOp=function(){}
var Pr=function(t){function e(){var e=arguments[0],i=arguments[1]
t.call(this,e,i),this._ptLocator=new Cn,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Wi,this._resultPolyList=new Et,this._resultLineList=new Et,this._resultPointList=new Et,this._graph=new Ve(new Vi),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t)
if(null!==e){var i=e.getLabel(),n=t.getLabel()
e.isPointwiseEqual(t)||(n=new Le(t.getLabel())).flip()
var r=e.getDepth()
r.isNull()&&r.add(i),r.add(n),i.merge(n)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),i=e.getSym()
e.isInResult()&&i.isInResult()&&(e.setInResult(!1),i.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,i,n,r){var o=new Et
return o.addAll(t),o.addAll(i),o.addAll(n),o.isEmpty()?e.createEmptyResult(r,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var i=e.iterator();i.hasNext();){var n=i.next()
if(this._ptLocator.locate(t,n)!==I.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new Et,e=this._edgeList.iterator();e.hasNext();){var i=e.next()
i.isCollapsed()&&(e.remove(),t.add(i.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),i=e.getEdges().getLabel()
e.getLabel().merge(i)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var i=e.next()
this.insertUniqueEdge(i)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0)
var e=new Et
this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Vn.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges()
var i=new Ze(this._geomFact)
i.add(this._graph),this._resultPolyList=i.getPolygons()
var n=new Wn(this,this._geomFact,this._ptLocator)
this._resultLineList=n.build(t)
var r=new Yn(this,this._geomFact,this._ptLocator)
this._resultPointList=r.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var i=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry())
t.getLabel().setLocation(e,i)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var i=e.next()
this._graph.addNode(i.getCoordinate()).setLabel(t,i.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var i=this._graph.getEdgeEnds().iterator();i.hasNext();){var n=i.next(),r=n.getLabel()
r.isArea()&&!n.isInteriorAreaEdge()&&e.isResultOfOp(r.getLocation(0,Ce.RIGHT),r.getLocation(1,Ce.RIGHT),t)&&n.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),i=e.getLabel(),n=e.getDepth()
if(!n.isNull()){n.normalize()
for(var r=0;r<2;r++)i.isNull(r)||!i.isArea()||n.isNull(r)||(0===n.getDelta(r)?i.toLine(r):(et.isTrue(!n.isNull(r,Ce.LEFT),"depth of LEFT side has not been initialized"),i.setLocation(r,Ce.LEFT,n.getLocation(r,Ce.LEFT)),et.isTrue(!n.isNull(r,Ce.RIGHT),"depth of RIGHT side has not been initialized"),i.setLocation(r,Ce.RIGHT,n.getLocation(r,Ce.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg)
this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),i=e.getLabel()
e.isIsolated()&&(i.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(i)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Sr)
Pr.overlayOp=function(t,e,i){return new Pr(t,e).getResultGeometry(i)},Pr.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Pr.createEmptyResult(Pr.INTERSECTION,t,e,t.getFactory())
if(t.isGeometryCollection()){var i=e
return Zn.map(t,{interfaces_:function(){return[Cr.MapOp]},map:function(t){return t.intersection(i)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),or.overlayOp(t,e,Pr.INTERSECTION)},Pr.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Pr.createEmptyResult(Pr.SYMDIFFERENCE,t,e,t.getFactory())
if(t.isEmpty())return e.copy()
if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),or.overlayOp(t,e,Pr.SYMDIFFERENCE)},Pr.resultDimension=function(t,e,i){var n=e.getDimension(),r=i.getDimension(),o=-1
switch(t){case Pr.INTERSECTION:o=Math.min(n,r)
break
case Pr.UNION:o=Math.max(n,r)
break
case Pr.DIFFERENCE:o=n
break
case Pr.SYMDIFFERENCE:o=Math.max(n,r)}return o},Pr.createEmptyResult=function(t,e,i,n){var r=null
switch(Pr.resultDimension(t,e,i)){case-1:r=n.createGeometryCollection(new Array(0).fill(null))
break
case 0:r=n.createPoint()
break
case 1:r=n.createLineString()
break
case 2:r=n.createPolygon()}return r},Pr.difference=function(t,e){return t.isEmpty()?Pr.createEmptyResult(Pr.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),or.overlayOp(t,e,Pr.DIFFERENCE))},Pr.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],i=t.getLocation(0),n=t.getLocation(1)
return Pr.isResultOfOp(i,n,e)}if(3===arguments.length){var r=arguments[0],o=arguments[1]
switch(r===I.BOUNDARY&&(r=I.INTERIOR),o===I.BOUNDARY&&(o=I.INTERIOR),arguments[2]){case Pr.INTERSECTION:return r===I.INTERIOR&&o===I.INTERIOR
case Pr.UNION:return r===I.INTERIOR||o===I.INTERIOR
case Pr.DIFFERENCE:return r===I.INTERIOR&&o!==I.INTERIOR
case Pr.SYMDIFFERENCE:return r===I.INTERIOR&&o!==I.INTERIOR||r!==I.INTERIOR&&o===I.INTERIOR}return!1}},Pr.INTERSECTION=1,Pr.UNION=2,Pr.DIFFERENCE=3,Pr.SYMDIFFERENCE=4
var Tr=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Cn,this._seg=new pi
var t=arguments[0],e=arguments[1]
this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)}
Tr.prototype.isWithinToleranceOfBoundary=function(t){for(var e=0;e<this._linework.getNumGeometries();e++)for(var i=this._linework.getGeometryN(e).getCoordinateSequence(),n=0;n<i.size()-1;n++)if(i.getCoordinate(n,this._seg.p0),i.getCoordinate(n+1,this._seg.p1),this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0
return!1},Tr.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?I.BOUNDARY:this._ptLocator.locate(t,this._g)},Tr.prototype.extractLinework=function(t){var e=new Ir
t.apply(e)
var i=e.getLinework(),n=me.toLineStringArray(i)
return t.getFactory().createMultiLineString(n)},Tr.prototype.interfaces_=function(){return[]},Tr.prototype.getClass=function(){return Tr}
var Ir=function(){this._linework=null,this._linework=new Et}
Ir.prototype.getLinework=function(){return this._linework},Ir.prototype.filter=function(t){if(t instanceof Qt){var e=t
this._linework.add(e.getExteriorRing())
for(var i=0;i<e.getNumInteriorRing();i++)this._linework.add(e.getInteriorRingN(i))}},Ir.prototype.interfaces_=function(){return[Gt]},Ir.prototype.getClass=function(){return Ir}
var Mr=function(){this._g=null,this._doLeft=!0,this._doRight=!0
var t=arguments[0]
this._g=t}
Mr.prototype.extractPoints=function(t,e,i){for(var n=t.getCoordinates(),r=0;r<n.length-1;r++)this.computeOffsetPoints(n[r],n[r+1],e,i)},Mr.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Mr.prototype.getPoints=function(t){for(var e=new Et,i=Sn.getLines(this._g).iterator();i.hasNext();){var n=i.next()
this.extractPoints(n,t,e)}return e},Mr.prototype.computeOffsetPoints=function(t,e,i,n){var r=e.x-t.x,o=e.y-t.y,s=Math.sqrt(r*r+o*o),a=i*r/s,l=i*o/s,h=(e.x+t.x)/2,u=(e.y+t.y)/2
if(this._doLeft){var c=new S(h-l,u+a)
n.add(c)}if(this._doRight){var d=new S(h+l,u-a)
n.add(d)}},Mr.prototype.interfaces_=function(){return[]},Mr.prototype.getClass=function(){return Mr}
var Ar=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new Et
var e=arguments[0],i=arguments[1],n=arguments[2]
this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,i),this._geom=[e,i,n],this._locFinder=[new Tr(this._geom[0],this._boundaryDistanceTolerance),new Tr(this._geom[1],this._boundaryDistanceTolerance),new Tr(this._geom[2],this._boundaryDistanceTolerance)]},Rr={TOLERANCE:{configurable:!0}}
Ar.prototype.reportResult=function(t,e,i){V.out.println("Overlay result invalid - A:"+I.toLocationSymbol(e[0])+" B:"+I.toLocationSymbol(e[1])+" expected:"+(i?"i":"e")+" actual:"+I.toLocationSymbol(e[2]))},Ar.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},Ar.prototype.checkValid=function(){if(1===arguments.length){for(var t=arguments[0],e=0;e<this._testCoords.size();e++){var i=this._testCoords.get(e)
if(!this.checkValid(t,i))return this._invalidLocation=i,!1}return!0}if(2===arguments.length){var n=arguments[0],r=arguments[1]
return this._location[0]=this._locFinder[0].getLocation(r),this._location[1]=this._locFinder[1].getLocation(r),this._location[2]=this._locFinder[2].getLocation(r),!!Ar.hasLocation(this._location,I.BOUNDARY)||this.isValidResult(n,this._location)}},Ar.prototype.addTestPts=function(t){var e=new Mr(t)
this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Ar.prototype.isValidResult=function(t,e){var i=Pr.isResultOfOp(e[0],e[1],t),n=!(i^e[2]===I.INTERIOR)
return n||this.reportResult(t,e,i),n},Ar.prototype.getInvalidLocation=function(){return this._invalidLocation},Ar.prototype.interfaces_=function(){return[]},Ar.prototype.getClass=function(){return Ar},Ar.hasLocation=function(t,e){for(var i=0;i<3;i++)if(t[i]===e)return!0
return!1},Ar.computeBoundaryDistanceTolerance=function(t,e){return Math.min($n.computeSizeBasedSnapTolerance(t),$n.computeSizeBasedSnapTolerance(e))},Ar.isValid=function(t,e,i,n){return new Ar(t,e,n).isValid(i)},Rr.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Ar,Rr)
var Lr=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e}
Lr.prototype.extractElements=function(t,e){if(null===t)return null
for(var i=0;i<t.getNumGeometries();i++){var n=t.getGeometryN(i)
this._skipEmpty&&n.isEmpty()||e.add(n)}},Lr.prototype.combine=function(){for(var t=new Et,e=this._inputGeoms.iterator();e.hasNext();){var i=e.next()
this.extractElements(i,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Lr.prototype.interfaces_=function(){return[]},Lr.prototype.getClass=function(){return Lr},Lr.combine=function(){return 1===arguments.length?new Lr(arguments[0]).combine():2===arguments.length?new Lr(Lr.createList(arguments[0],arguments[1])).combine():3===arguments.length?new Lr(Lr.createList(arguments[0],arguments[1],arguments[2])).combine():void 0},Lr.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Lr.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],i=new Et
return i.add(t),i.add(e),i}if(3===arguments.length){var n=arguments[0],r=arguments[1],o=arguments[2],s=new Et
return s.add(n),s.add(r),s.add(o),s}}
var Or=function(){this._inputPolys=null,this._geomFactory=null
var t=arguments[0]
this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new Et)},Dr={STRTREE_NODE_CAPACITY:{configurable:!0}}
Or.prototype.reduceToGeometries=function(t){for(var e=new Et,i=t.iterator();i.hasNext();){var n=i.next(),r=null
A(n,wt)?r=this.unionTree(n):n instanceof ut&&(r=n),e.add(r)}return e},Or.prototype.extractByEnvelope=function(t,e,i){for(var n=new Et,r=0;r<e.getNumGeometries();r++){var o=e.getGeometryN(r)
o.getEnvelopeInternal().intersects(t)?n.add(o):i.add(o)}return this._geomFactory.buildGeometry(n)},Or.prototype.unionOptimized=function(t,e){var i=t.getEnvelopeInternal(),n=e.getEnvelopeInternal()
if(!i.intersects(n))return Lr.combine(t,e)
if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e)
var r=i.intersection(n)
return this.unionUsingEnvelopeIntersection(t,e,r)},Or.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice")
if(this._inputPolys.isEmpty())return null
this._geomFactory=this._inputPolys.iterator().next().getFactory()
for(var t=new oi(Or.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var i=e.next()
t.insert(i.getEnvelopeInternal(),i)}this._inputPolys=null
var n=t.itemsTree()
return this.unionTree(n)},Or.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0]
return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],i=arguments[1],n=arguments[2]
if(n-i<=1){var r=Or.getGeometry(e,i)
return this.unionSafe(r,null)}if(n-i==2)return this.unionSafe(Or.getGeometry(e,i),Or.getGeometry(e,i+1))
var o=Math.trunc((n+i)/2),s=this.binaryUnion(e,i,o),a=this.binaryUnion(e,o,n)
return this.unionSafe(s,a)}},Or.prototype.repeatedUnion=function(t){for(var e=null,i=t.iterator();i.hasNext();){var n=i.next()
e=null===e?n.copy():e.union(n)}return e},Or.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},Or.prototype.unionActual=function(t,e){return Or.restrictToPolygons(t.union(e))},Or.prototype.unionTree=function(t){var e=this.reduceToGeometries(t)
return this.binaryUnion(e)},Or.prototype.unionUsingEnvelopeIntersection=function(t,e,i){var n=new Et,r=this.extractByEnvelope(i,t,n),o=this.extractByEnvelope(i,e,n),s=this.unionActual(r,o)
return n.add(s),Lr.combine(n)},Or.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0]
return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],i=arguments[1]
return e.getFactory().createGeometryCollection([e,i]).buffer(0)}},Or.prototype.interfaces_=function(){return[]},Or.prototype.getClass=function(){return Or},Or.restrictToPolygons=function(t){if(A(t,Jt))return t
var e=En.getPolygons(t)
return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(me.toPolygonArray(e))},Or.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Or.union=function(t){return new Or(t).union()},Dr.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Or,Dr)
var Nr=function(){}
Nr.prototype.interfaces_=function(){return[]},Nr.prototype.getClass=function(){return Nr},Nr.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Pr.createEmptyResult(Pr.UNION,t,e,t.getFactory())
if(t.isEmpty())return e.copy()
if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),or.overlayOp(t,e,Pr.UNION)},t.GeoJSONReader=Ee,t.GeoJSONWriter=Se,t.OverlayOp=Pr,t.UnionOp=Nr,t.BufferOp=gn,Object.defineProperty(t,"__esModule",{value:!0})}(e)},9889:t=>{function e(t,e){const i=new RegExp(e,"g"),n=t.match(i)
return n?n.length:0}t.exports=e,t.exports.default=e},5950:(t,e,i)=>{const n=i(4852),r=i(1744),o=i(9889)
function s(t,e,i){const s=i&&i.debug||!1,a=!(i&&!1===typeof i.nested),l=i&&i.startIndex||0
s&&console.log("[xml-utils] starting findTagByName with",e," and ",i)
const h=n(t,`<${e}[ \n>/]`,l)
if(s&&console.log("[xml-utils] start:",h),-1===h)return
const u=t.slice(h+e.length)
let c=r(u,"^[^<]*[ /]>",0)
const d=-1!==c&&"/"===u[c-1]
if(s&&console.log("[xml-utils] selfClosing:",d),!1===d)if(a){let t=0,i=1,n=0
for(;-1!==(c=r(u,"[ /]"+e+">",t));){const r=u.substring(t,c+1)
if(i+=o(r,"<"+e+"[ \n\t>]"),n+=o(r,"</"+e+">"),n>=i)break
t=c}}else c=r(u,"[ /]"+e+">",0)
const f=h+e.length+c+1
if(s&&console.log("[xml-utils] end:",f),-1===f)return
const p=t.slice(h,f)
let g
return g=d?null:p.slice(p.indexOf(">")+1,p.lastIndexOf("<")),{inner:g,outer:p,start:h,end:f}}t.exports=s,t.exports.default=s},3197:(t,e,i)=>{const n=i(5950)
function r(t,e,i){const r=[],o=i&&i.debug||!1,s=!i||"boolean"!=typeof i.nested||i.nested
let a,l=i&&i.startIndex||0
for(;a=n(t,e,{debug:o,startIndex:l});)l=s?a.start+1+e.length:a.end,r.push(a)
return o&&console.log("findTagsByName found",r.length,"tags"),r}t.exports=r,t.exports.default=r},5633:t=>{function e(t,e,i){const n=i&&i.debug||!1
n&&console.log("[xml-utils] getting "+e+" in "+t)
const r="object"==typeof t?t.outer:t,o=r.slice(0,r.indexOf(">")+1),s=['"',"'"]
for(let a=0;a<s.length;a++){const t=s[a],i=e+"\\="+t+"([^"+t+"]*)"+t
n&&console.log("[xml-utils] pattern:",i)
const r=new RegExp(i).exec(o)
if(n&&console.log("[xml-utils] match:",r),r)return r[1]}}t.exports=e,t.exports.default=e},1744:t=>{function e(t,e,i){const n=new RegExp(e).exec(t.slice(i))
return n?i+n.index+n[0].length-1:-1}t.exports=e,t.exports.default=e},4852:t=>{function e(t,e,i){const n=new RegExp(e).exec(t.slice(i))
return n?i+n.index:-1}t.exports=e,t.exports.default=e},9084:function(t){t.exports=function(){"use strict"
function t(t){return t+.5|0}const e=(t,e,i)=>Math.max(Math.min(t,i),e)
function i(i){return e(t(2.55*i),0,255)}function n(i){return e(t(255*i),0,255)}function r(i){return e(t(i/2.55)/100,0,1)}function o(i){return e(t(100*i),0,100)}const s={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},a=[..."0123456789ABCDEF"],l=t=>a[15&t],h=t=>a[(240&t)>>4]+a[15&t],u=t=>(240&t)>>4==(15&t)
function c(t){var e,i=t.length
return"#"===t[0]&&(4===i||5===i?e={r:255&17*s[t[1]],g:255&17*s[t[2]],b:255&17*s[t[3]],a:5===i?17*s[t[4]]:255}:7!==i&&9!==i||(e={r:s[t[1]]<<4|s[t[2]],g:s[t[3]]<<4|s[t[4]],b:s[t[5]]<<4|s[t[6]],a:9===i?s[t[7]]<<4|s[t[8]]:255})),e}function d(t){var e=(t=>u(t.r)&&u(t.g)&&u(t.b)&&u(t.a))(t)?l:h
return t?"#"+e(t.r)+e(t.g)+e(t.b)+((t,e)=>t<255?e(t):"")(t.a,e):void 0}const f=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/
function p(t,e,i){const n=e*Math.min(i,1-i),r=(e,r=(e+t/30)%12)=>i-n*Math.max(Math.min(r-3,9-r,1),-1)
return[r(0),r(8),r(4)]}function g(t,e,i){const n=(n,r=(n+t/60)%6)=>i-i*e*Math.max(Math.min(r,4-r,1),0)
return[n(5),n(3),n(1)]}function _(t,e,i){const n=p(t,1,.5)
let r
for(e+i>1&&(r=1/(e+i),e*=r,i*=r),r=0;r<3;r++)n[r]*=1-e-i,n[r]+=e
return n}function m(t){const e=t.r/255,i=t.g/255,n=t.b/255,r=Math.max(e,i,n),o=Math.min(e,i,n),s=(r+o)/2
let a,l,h
return r!==o&&(h=r-o,l=s>.5?h/(2-r-o):h/(r+o),a=function(t,e,i,n,r){return t===r?(e-i)/n+(e<i?6:0):e===r?(i-t)/n+2:(t-e)/n+4}(e,i,n,h,r),a=60*a+.5),[0|a,l||0,s]}function y(t,e,i,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,i,r)).map(n)}function v(t,e,i){return y(p,t,e,i)}function x(t,e,i){return y(_,t,e,i)}function b(t,e,i){return y(g,t,e,i)}function w(t){return(t%360+360)%360}function E(t){const e=f.exec(t)
let r,o=255
if(!e)return
e[5]!==r&&(o=e[6]?i(+e[5]):n(+e[5]))
const s=w(+e[2]),a=+e[3]/100,l=+e[4]/100
return r="hwb"===e[1]?x(s,a,l):"hsv"===e[1]?b(s,a,l):v(s,a,l),{r:r[0],g:r[1],b:r[2],a:o}}function S(t,e){var i=m(t)
i[0]=w(i[0]+e),i=v(i),t.r=i[0],t.g=i[1],t.b=i[2]}function C(t){if(!t)return
const e=m(t),i=e[0],n=o(e[1]),s=o(e[2])
return t.a<255?`hsla(${i}, ${n}%, ${s}%, ${r(t.a)})`:`hsl(${i}, ${n}%, ${s}%)`}const P={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},T={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"}
let I
function M(t){I||(I=function(){const t={},e=Object.keys(T),i=Object.keys(P)
let n,r,o,s,a
for(n=0;n<e.length;n++){for(s=a=e[n],r=0;r<i.length;r++)o=i[r],a=a.replace(o,P[o])
o=parseInt(T[s],16),t[a]=[o>>16&255,o>>8&255,255&o]}return t}(),I.transparent=[0,0,0,0])
const e=I[t.toLowerCase()]
return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}const A=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/
function R(t){const n=A.exec(t)
let r,o,s,a=255
if(n){if(n[7]!==r){const t=+n[7]
a=n[8]?i(t):e(255*t,0,255)}return r=+n[1],o=+n[3],s=+n[5],r=255&(n[2]?i(r):e(r,0,255)),o=255&(n[4]?i(o):e(o,0,255)),s=255&(n[6]?i(s):e(s,0,255)),{r:r,g:o,b:s,a:a}}}function L(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${r(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const O=t=>t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,D=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)
function N(t,e,i){if(t){let n=m(t)
n[e]=Math.max(0,Math.min(n[e]+n[e]*i,0===e?360:1)),n=v(n),t.r=n[0],t.g=n[1],t.b=n[2]}}function F(t,e){return t?Object.assign(e||{},t):t}function k(t){var e={r:0,g:0,b:0,a:255}
return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=n(t[3]))):(e=F(t,{r:0,g:0,b:0,a:1})).a=n(e.a),e}class z{constructor(t){if(t instanceof z)return t
const e=typeof t
let i
var n
"object"===e?i=k(t):"string"===e&&(i=c(t)||M(t)||("r"===(n=t).charAt(0)?R(n):E(n))),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=F(this._rgb)
return t&&(t.a=r(t.a)),t}set rgb(t){this._rgb=k(t)}rgbString(){return this._valid?L(this._rgb):void 0}hexString(){return this._valid?d(this._rgb):void 0}hslString(){return this._valid?C(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,n=t.rgb
let r
const o=e===r?.5:e,s=2*o-1,a=i.a-n.a,l=((s*a==-1?s:(s+a)/(1+s*a))+1)/2
r=1-l,i.r=255&l*i.r+r*n.r+.5,i.g=255&l*i.g+r*n.g+.5,i.b=255&l*i.b+r*n.b+.5,i.a=o*i.a+(1-o)*n.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=function(t,e,i){const o=D(r(t.r)),s=D(r(t.g)),a=D(r(t.b))
return{r:n(O(o+i*(D(r(e.r))-o))),g:n(O(s+i*(D(r(e.g))-s))),b:n(O(a+i*(D(r(e.b))-a))),a:t.a+i*(e.a-t.a)}}(this._rgb,t._rgb,e)),this}clone(){return new z(this.rgb)}alpha(t){return this._rgb.a=n(t),this}clearer(t){return this._rgb.a*=1-t,this}greyscale(){const e=this._rgb,i=t(.3*e.r+.59*e.g+.11*e.b)
return e.r=e.g=e.b=i,this}opaquer(t){return this._rgb.a*=1+t,this}negate(){const t=this._rgb
return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return N(this._rgb,2,t),this}darken(t){return N(this._rgb,2,-t),this}saturate(t){return N(this._rgb,1,t),this}desaturate(t){return N(this._rgb,1,-t),this}rotate(t){return S(this._rgb,t),this}}function j(t){return new z(t)}var G=Object.freeze({__proto__:null,Color:z,default:j,round:t,lim:e,p2b:i,b2p:function(i){return e(t(i/2.55),0,100)},n2b:n,b2n:r,n2p:o,hexParse:c,hexString:d,rgb2hsl:m,hsl2rgb:v,hwb2rgb:x,hsv2rgb:b,hueParse:E,rotate:S,hslString:C,nameParse:M,rgbParse:R,rgbString:L})
return Object.assign(j,G)}()},5426:(t,e,i)=>{"use strict"
var n=i(1579)
i(9084)
var r=new class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,n){const r=e.listeners[n],o=e.duration
r.forEach((n=>n({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(i-e.start,o)})))}_refresh(){this._request||(this._running=!0,this._request=n.requestAnimFrame.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(t=Date.now()){let e=0
this._charts.forEach(((i,n)=>{if(!i.running||!i.items.length)return
const r=i.items
let o,s=r.length-1,a=!1
for(;s>=0;--s)o=r[s],o._active?(o._total>i.duration&&(i.duration=o._total),o.tick(t),a=!0):(r[s]=r[r.length-1],r.pop())
a&&(n.draw(),this._notify(n,i,t,"progress")),r.length||(i.running=!1,this._notify(n,i,t,"complete"),i.initial=!1),e+=r.length})),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){const e=this._charts
let i=e.get(t)
return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){e&&e.length&&this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t)
e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce(((t,e)=>Math.max(t,e._duration)),0),this._refresh())}running(t){if(!this._running)return!1
const e=this._charts.get(t)
return!!(e&&e.running&&e.items.length)}stop(t){const e=this._charts.get(t)
if(!e||!e.items.length)return
const i=e.items
let n=i.length-1
for(;n>=0;--n)i[n].cancel()
e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}
const o="transparent",s={boolean:(t,e,i)=>i>.5?e:t,color(t,e,i){const r=n.color(t||o),s=r.valid&&n.color(e||o)
return s&&s.valid?s.mix(r,i).hexString():e},number:(t,e,i)=>t+(e-t)*i}
class a{constructor(t,e,i,r){const o=e[i]
r=n.resolve([t.to,r,o,t.from])
const a=n.resolve([t.from,o,r])
this._active=!0,this._fn=t.fn||s[t.type||typeof a],this._easing=n.effects[t.easing]||n.effects.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=a,this._to=r,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1)
const r=this._target[this._prop],o=i-this._start,s=this._duration-o
this._start=i,this._duration=Math.floor(Math.max(s,t.duration)),this._total+=o,this._loop=!!t.loop,this._to=n.resolve([t.to,e,r,t.from]),this._from=n.resolve([t.from,r,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,n=this._prop,r=this._from,o=this._loop,s=this._to
let a
if(this._active=r!==s&&(o||e<i),!this._active)return this._target[n]=s,void this._notify(!0)
e<0?this._target[n]=r:(a=e/i%2,a=o&&a>1?2-a:a,a=this._easing(Math.min(1,Math.max(0,a))),this._target[n]=this._fn(r,s,a))}wait(){const t=this._promises||(this._promises=[])
return new Promise(((e,i)=>{t.push({res:e,rej:i})}))}_notify(t){const e=t?"res":"rej",i=this._promises||[]
for(let n=0;n<i.length;n++)i[n][e]()}}class l{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!n.isObject(t))return
const e=Object.keys(n.defaults.animation),i=this._properties
Object.getOwnPropertyNames(t).forEach((r=>{const o=t[r]
if(!n.isObject(o))return
const s={}
for(const t of e)s[t]=o[t];(n.isArray(o.properties)&&o.properties||[r]).forEach((t=>{t!==r&&i.has(t)||i.set(t,s)}))}))}_animateOptions(t,e){const i=e.options,n=function(t,e){if(!e)return
let i=t.options
if(i)return i.$shared&&(t.options=i=Object.assign({},i,{$shared:!1,$animations:{}})),i
t.options=e}(t,i)
if(!n)return[]
const r=this._createAnimations(n,i)
return i.$shared&&function(t,e){const i=[],n=Object.keys(e)
for(let r=0;r<n.length;r++){const e=t[n[r]]
e&&e.active()&&i.push(e.wait())}return Promise.all(i)}(t.options.$animations,i).then((()=>{t.options=i}),(()=>{})),r}_createAnimations(t,e){const i=this._properties,n=[],r=t.$animations||(t.$animations={}),o=Object.keys(e),s=Date.now()
let l
for(l=o.length-1;l>=0;--l){const h=o[l]
if("$"===h.charAt(0))continue
if("options"===h){n.push(...this._animateOptions(t,e))
continue}const u=e[h]
let c=r[h]
const d=i.get(h)
if(c){if(d&&c.active()){c.update(d,u,s)
continue}c.cancel()}d&&d.duration?(r[h]=c=new a(d,t,h,u),n.push(c)):t[h]=u}return n}update(t,e){if(0===this._properties.size)return void Object.assign(t,e)
const i=this._createAnimations(t,e)
return i.length?(r.add(this._chart,i),!0):void 0}}function h(t,e){const i=t&&t.options||{},n=i.reverse,r=void 0===i.min?e:0,o=void 0===i.max?e:0
return{start:n?o:r,end:n?r:o}}function u(t,e){const i=[],n=t._getSortedDatasetMetas(e)
let r,o
for(r=0,o=n.length;r<o;++r)i.push(n[r].index)
return i}function c(t,e,i,r={}){const o=t.keys,s="single"===r.mode
let a,l,h,u
if(null!==e){for(a=0,l=o.length;a<l;++a){if(h=+o[a],h===i){if(r.all)continue
break}u=t.values[h],n.isNumberFinite(u)&&(s||0===e||n.sign(e)===n.sign(u))&&(e+=u)}return e}}function d(t,e){const i=t&&t.options.stacked
return i||void 0===i&&void 0!==e.stack}function f(t,e,i){const n=t[e]||(t[e]={})
return n[i]||(n[i]={})}function p(t,e,i,n){for(const r of e.getMatchingVisibleMetas(n).reverse()){const e=t[r.index]
if(i&&e>0||!i&&e<0)return r.index}return null}function g(t,e){const{chart:i,_cachedMeta:n}=t,r=i._stacks||(i._stacks={}),{iScale:o,vScale:s,index:a}=n,l=o.axis,h=s.axis,u=function(t,e,i){return`${t.id}.${e.id}.${i.stack||i.type}`}(o,s,n),c=e.length
let d
for(let g=0;g<c;++g){const t=e[g],{[l]:i,[h]:o}=t
d=(t._stacks||(t._stacks={}))[h]=f(r,u,i),d[a]=o,d._top=p(d,s,!0,n.type),d._bottom=p(d,s,!1,n.type),(d._visualValues||(d._visualValues={}))[a]=o}}function _(t,e){const i=t.scales
return Object.keys(i).filter((t=>i[t].axis===e)).shift()}function m(t,e){const i=t.controller.index,n=t.vScale&&t.vScale.axis
if(n){e=e||t._parsed
for(const t of e){const e=t._stacks
if(!e||void 0===e[n]||void 0===e[n][i])return
delete e[n][i],void 0!==e[n]._visualValues&&void 0!==e[n]._visualValues[i]&&delete e[n]._visualValues[i]}}}const y=t=>"reset"===t||"none"===t,v=(t,e)=>e?t:Object.assign({},t)
class x{static defaults={}
static datasetElementType=null
static dataElementType=null
constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta
this.configure(),this.linkScales(),t._stacked=d(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&m(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,i=this.getDataset(),r=(t,e,i,n)=>"x"===t?e:"r"===t?n:i,o=e.xAxisID=n.valueOrDefault(i.xAxisID,_(t,"x")),s=e.yAxisID=n.valueOrDefault(i.yAxisID,_(t,"y")),a=e.rAxisID=n.valueOrDefault(i.rAxisID,_(t,"r")),l=e.indexAxis,h=e.iAxisID=r(l,o,s,a),u=e.vAxisID=r(l,s,o,a)
e.xScale=this.getScaleForId(o),e.yScale=this.getScaleForId(s),e.rScale=this.getScaleForId(a),e.iScale=this.getScaleForId(h),e.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta
return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta
this._data&&n.unlistenArrayEvents(this._data,this),t._stacked&&m(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),i=this._data
if(n.isObject(e))this._data=function(t){const e=Object.keys(t),i=new Array(e.length)
let n,r,o
for(n=0,r=e.length;n<r;++n)o=e[n],i[n]={x:o,y:t[o]}
return i}(e)
else if(i!==e){if(i){n.unlistenArrayEvents(i,this)
const t=this._cachedMeta
m(t),t._parsed=[]}e&&Object.isExtensible(e)&&n.listenArrayEvents(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta
this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset()
let n=!1
this._dataCheck()
const r=e._stacked
e._stacked=d(e.vScale,e),e.stack!==i.stack&&(n=!0,m(e),e.stack=i.stack),this._resyncElements(t),(n||r!==e._stacked)&&g(this,e._parsed)}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0)
this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:i,_data:r}=this,{iScale:o,_stacked:s}=i,a=o.axis
let l,h,u,c=0===t&&e===r.length||i._sorted,d=t>0&&i._parsed[t-1]
if(!1===this._parsing)i._parsed=r,i._sorted=!0,u=r
else{u=n.isArray(r[t])?this.parseArrayData(i,r,t,e):n.isObject(r[t])?this.parseObjectData(i,r,t,e):this.parsePrimitiveData(i,r,t,e)
const o=()=>null===h[a]||d&&h[a]<d[a]
for(l=0;l<e;++l)i._parsed[l+t]=h=u[l],c&&(o()&&(c=!1),d=h)
i._sorted=c}s&&g(this,u)}parsePrimitiveData(t,e,i,n){const{iScale:r,vScale:o}=t,s=r.axis,a=o.axis,l=r.getLabels(),h=r===o,u=new Array(n)
let c,d,f
for(c=0,d=n;c<d;++c)f=c+i,u[c]={[s]:h||r.parse(l[f],f),[a]:o.parse(e[f],f)}
return u}parseArrayData(t,e,i,n){const{xScale:r,yScale:o}=t,s=new Array(n)
let a,l,h,u
for(a=0,l=n;a<l;++a)h=a+i,u=e[h],s[a]={x:r.parse(u[0],h),y:o.parse(u[1],h)}
return s}parseObjectData(t,e,i,r){const{xScale:o,yScale:s}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,h=new Array(r)
let u,c,d,f
for(u=0,c=r;u<c;++u)d=u+i,f=e[d],h[u]={x:o.parse(n.resolveObjectKey(f,a),d),y:s.parse(n.resolveObjectKey(f,l),d)}
return h}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const n=this.chart,r=this._cachedMeta,o=e[t.axis]
return c({keys:u(n,!0),values:e._stacks[t.axis]._visualValues},o,r.index,{mode:i})}updateRangeFromParsed(t,e,i,n){const r=i[e.axis]
let o=null===r?NaN:r
const s=n&&i._stacks[e.axis]
n&&s&&(n.values=s,o=c(n,r,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,e){const i=this._cachedMeta,r=i._parsed,o=i._sorted&&t===i.iScale,s=r.length,a=this._getOtherScale(t),l=((t,e,i)=>t&&!e.hidden&&e._stacked&&{keys:u(i,!0),values:null})(e,i,this.chart),h={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:d}=function(t){const{min:e,max:i,minDefined:n,maxDefined:r}=t.getUserBounds()
return{min:n?e:Number.NEGATIVE_INFINITY,max:r?i:Number.POSITIVE_INFINITY}}(a)
let f,p
function g(){p=r[f]
const e=p[a.axis]
return!n.isNumberFinite(p[t.axis])||c>e||d<e}for(f=0;f<s&&(g()||(this.updateRangeFromParsed(h,t,p,l),!o));++f);if(o)for(f=s-1;f>=0;--f)if(!g()){this.updateRangeFromParsed(h,t,p,l)
break}return h}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[]
let r,o,s
for(r=0,o=e.length;r<o;++r)s=e[r][t.axis],n.isNumberFinite(s)&&i.push(s)
return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,n=e.vScale,r=this.getParsed(t)
return{label:i?""+i.getLabelForValue(r[i.axis]):"",value:n?""+n.getLabelForValue(r[n.axis]):""}}_update(t){const e=this._cachedMeta
this.update(t||"default"),e._clip=function(t){let e,i,r,o
return n.isObject(t)?(e=t.top,i=t.right,r=t.bottom,o=t.left):e=i=r=o=t,{top:e,right:i,bottom:r,left:o,disabled:!1===t}}(n.valueOrDefault(this.options.clip,function(t,e,i){if(!1===i)return!1
const n=h(t,i),r=h(e,i)
return{top:r.end,right:n.end,bottom:r.start,left:n.start}}(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,i=this._cachedMeta,n=i.data||[],r=e.chartArea,o=[],s=this._drawStart||0,a=this._drawCount||n.length-s,l=this.options.drawActiveElementsOnTop
let h
for(i.dataset&&i.dataset.draw(t,r,s,a),h=s;h<s+a;++h){const e=n[h]
e.hidden||(e.active&&l?o.push(e):e.draw(t,r))}for(h=0;h<o.length;++h)o[h].draw(t,r)}getStyle(t,e){const i=e?"active":"default"
return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const r=this.getDataset()
let o
if(t>=0&&t<this._cachedMeta.data.length){const e=this._cachedMeta.data[t]
o=e.$context||(e.$context=function(t,e,i){return n.createContext(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:i,index:e,mode:"default",type:"data"})}(this.getContext(),t,e)),o.parsed=this.getParsed(t),o.raw=r.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=function(t,e){return n.createContext(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),o.dataset=r,o.index=o.datasetIndex=this.index
return o.active=!!e,o.mode=i,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const r="active"===e,o=this._cachedDataOpts,s=t+"-"+e,a=o[s],l=this.enableOptionSharing&&n.defined(i)
if(a)return v(a,l)
const h=this.chart.config,u=h.datasetElementScopeKeys(this._type,t),c=r?[`${t}Hover`,"hover",t,""]:[t,""],d=h.getOptionScopes(this.getDataset(),u),f=Object.keys(n.defaults.elements[t]),p=h.resolveNamedOptions(d,f,(()=>this.getContext(i,r,e)),c)
return p.$shared&&(p.$shared=l,o[s]=Object.freeze(v(p,l))),p}_resolveAnimations(t,e,i){const n=this.chart,r=this._cachedDataOpts,o=`animation-${e}`,s=r[o]
if(s)return s
let a
if(!1!==n.options.animation){const n=this.chart.config,r=n.datasetAnimationScopeKeys(this._type,e),o=n.getOptionScopes(this.getDataset(),r)
a=n.createResolver(o,this.getContext(t,i,e))}const h=new l(n,a&&a.animations)
return a&&a._cacheable&&(r[o]=Object.freeze(h)),h}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||y(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const i=this.resolveDataElementOptions(t,e),n=this._sharedOptions,r=this.getSharedOptions(i),o=this.includeOptions(e,r)||r!==n
return this.updateSharedOptions(r,e,i),{sharedOptions:r,includeOptions:o}}updateElement(t,e,i,n){y(n)?Object.assign(t,i):this._resolveAnimations(e,n).update(t,i)}updateSharedOptions(t,e,i){t&&!y(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,n){t.active=n
const r=this.getStyle(e,n)
this._resolveAnimations(e,i,n).update(t,{options:!n&&this.getSharedOptions(r)||r})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset
t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset
t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,i=this._cachedMeta.data
for(const[s,a,l]of this._syncList)this[s](a,l)
this._syncList=[]
const n=i.length,r=e.length,o=Math.min(r,n)
o&&this.parse(0,o),r>n?this._insertElements(n,r-n,t):r<n&&this._removeElements(r,n-r)}_insertElements(t,e,i=!0){const n=this._cachedMeta,r=n.data,o=t+e
let s
const a=t=>{for(t.length+=e,s=t.length-1;s>=o;s--)t[s]=t[s-e]}
for(a(r),s=t;s<o;++s)r[s]=new this.dataElementType
this._parsing&&a(n._parsed),this.parse(t,e),i&&this.updateElements(r,t,e,"reset")}updateElements(t,e,i,n){}_removeElements(t,e){const i=this._cachedMeta
if(this._parsing){const n=i._parsed.splice(t,e)
i._stacked&&m(i,n)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t)
else{const[e,i,n]=t
this[e](i,n)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length
this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e])
const i=arguments.length-2
i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function b(t){const e=t.iScale,i=function(t,e){if(!t._cache.$bar){const i=t.getMatchingVisibleMetas(e)
let r=[]
for(let e=0,n=i.length;e<n;e++)r=r.concat(i[e].controller.getAllParsedValues(t))
t._cache.$bar=n._arrayUnique(r.sort(((t,e)=>t-e)))}return t._cache.$bar}(e,t.type)
let r,o,s,a,l=e._length
const h=()=>{32767!==s&&-32768!==s&&(n.defined(a)&&(l=Math.min(l,Math.abs(s-a)||l)),a=s)}
for(r=0,o=i.length;r<o;++r)s=e.getPixelForValue(i[r]),h()
for(a=void 0,r=0,o=e.ticks.length;r<o;++r)s=e.getPixelForTick(r),h()
return l}function w(t,e,i,r){return n.isArray(t)?function(t,e,i,n){const r=i.parse(t[0],n),o=i.parse(t[1],n),s=Math.min(r,o),a=Math.max(r,o)
let l=s,h=a
Math.abs(s)>Math.abs(a)&&(l=a,h=s),e[i.axis]=h,e._custom={barStart:l,barEnd:h,start:r,end:o,min:s,max:a}}(t,e,i,r):e[i.axis]=i.parse(t,r),e}function E(t,e,i,n){const r=t.iScale,o=t.vScale,s=r.getLabels(),a=r===o,l=[]
let h,u,c,d
for(h=i,u=i+n;h<u;++h)d=e[h],c={},c[r.axis]=a||r.parse(s[h],h),l.push(w(d,c,o,h))
return l}function S(t){return t&&void 0!==t.barStart&&void 0!==t.barEnd}function C(t,e,i,n){let r=e.borderSkipped
const o={}
if(!r)return void(t.borderSkipped=o)
if(!0===r)return void(t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0})
const{start:s,end:a,reverse:l,top:h,bottom:u}=function(t){let e,i,n,r,o
return t.horizontal?(e=t.base>t.x,i="left",n="right"):(e=t.base<t.y,i="bottom",n="top"),e?(r="end",o="start"):(r="start",o="end"),{start:i,end:n,reverse:e,top:r,bottom:o}}(t)
"middle"===r&&i&&(t.enableBorderRadius=!0,(i._top||0)===n?r=h:(i._bottom||0)===n?r=u:(o[P(u,s,a,l)]=!0,r=h)),o[P(r,s,a,l)]=!0,t.borderSkipped=o}function P(t,e,i,n){var r,o,s
return n?(s=i,t=T(t=(r=t)===(o=e)?s:r===s?o:r,i,e)):t=T(t,e,i),t}function T(t,e,i){return"start"===t?e:"end"===t?i:t}function I(t,{inflateAmount:e},i){t.inflateAmount="auto"===e?1===i?.33:0:e}class M extends x{static id="bar"
static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}
static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}}
parsePrimitiveData(t,e,i,n){return E(t,e,i,n)}parseArrayData(t,e,i,n){return E(t,e,i,n)}parseObjectData(t,e,i,r){const{iScale:o,vScale:s}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,h="x"===o.axis?a:l,u="x"===s.axis?a:l,c=[]
let d,f,p,g
for(d=i,f=i+r;d<f;++d)g=e[d],p={},p[o.axis]=o.parse(n.resolveObjectKey(g,h),d),c.push(w(n.resolveObjectKey(g,u),p,s,d))
return c}updateRangeFromParsed(t,e,i,n){super.updateRangeFromParsed(t,e,i,n)
const r=i._custom
r&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,r.min),t.max=Math.max(t.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:i,vScale:n}=e,r=this.getParsed(t),o=r._custom,s=S(o)?"["+o.start+", "+o.end+"]":""+n.getLabelForValue(r[n.axis])
return{label:""+i.getLabelForValue(r[i.axis]),value:s}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(t){const e=this._cachedMeta
this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,i,r){const o="reset"===r,{index:s,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),h=a.isHorizontal(),u=this._getRuler(),{sharedOptions:c,includeOptions:d}=this._getSharedOptions(e,r)
for(let f=e;f<e+i;f++){const e=this.getParsed(f),i=o||n.isNullOrUndef(e[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(f),p=this._calculateBarIndexPixels(f,u),g=(e._stacks||{})[a.axis],_={horizontal:h,base:i.base,enableBorderRadius:!g||S(e._custom)||s===g._top||s===g._bottom,x:h?i.head:p.center,y:h?p.center:i.head,height:h?p.size:Math.abs(i.size),width:h?Math.abs(i.size):p.size}
d&&(_.options=c||this.resolveDataElementOptions(f,t[f].active?"active":r))
const m=_.options||t[f].options
C(_,m,g,s),I(_,m,u.ratio),this.updateElement(t[f],f,_,r)}}_getStacks(t,e){const{iScale:i}=this._cachedMeta,r=i.getMatchingVisibleMetas(this._type).filter((t=>t.controller.options.grouped)),o=i.options.stacked,s=[],a=t=>{const i=t.controller.getParsed(e),r=i&&i[t.vScale.axis]
if(n.isNullOrUndef(r)||isNaN(r))return!0}
for(const n of r)if((void 0===e||!a(n))&&((!1===o||-1===s.indexOf(n.stack)||void 0===o&&void 0===n.stack)&&s.push(n.stack),n.index===t))break
return s.length||s.push(void 0),s}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,e,i){const n=this._getStacks(t,i),r=void 0!==e?n.indexOf(e):-1
return-1===r?n.length-1:r}_getRuler(){const t=this.options,e=this._cachedMeta,i=e.iScale,n=[]
let r,o
for(r=0,o=e.data.length;r<o;++r)n.push(i.getPixelForValue(this.getParsed(r)[i.axis],r))
const s=t.barThickness
return{min:s||b(e),pixels:n,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:s?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:i,index:r},options:{base:o,minBarLength:s}}=this,a=o||0,l=this.getParsed(t),h=l._custom,u=S(h)
let c,d,f=l[e.axis],p=0,g=i?this.applyStack(e,l,i):f
g!==f&&(p=g-f,g=f),u&&(f=h.barStart,g=h.barEnd-h.barStart,0!==f&&n.sign(f)!==n.sign(h.barEnd)&&(p=0),p+=f)
const _=n.isNullOrUndef(o)||u?p:o
let m=e.getPixelForValue(_)
if(c=this.chart.getDataVisibility(t)?e.getPixelForValue(p+g):m,d=c-m,Math.abs(d)<s){d=function(t,e,i){return 0!==t?n.sign(t):(e.isHorizontal()?1:-1)*(e.min>=i?1:-1)}(d,e,a)*s,f===a&&(m-=d/2)
const t=e.getPixelForDecimal(0),o=e.getPixelForDecimal(1),h=Math.min(t,o),p=Math.max(t,o)
m=Math.max(Math.min(m,p),h),c=m+d,i&&!u&&(l._stacks[e.axis]._visualValues[r]=e.getValueForPixel(c)-e.getValueForPixel(m))}if(m===e.getPixelForValue(a)){const t=n.sign(d)*e.getLineWidthForValue(a)/2
m+=t,d-=t}return{size:d,base:m,head:c,center:c+d/2}}_calculateBarIndexPixels(t,e){const i=e.scale,r=this.options,o=r.skipNull,s=n.valueOrDefault(r.maxBarThickness,1/0)
let a,l
if(e.grouped){const i=o?this._getStackCount(t):e.stackCount,h="flex"===r.barThickness?function(t,e,i,n){const r=e.pixels,o=r[t]
let s=t>0?r[t-1]:null,a=t<r.length-1?r[t+1]:null
const l=i.categoryPercentage
null===s&&(s=o-(null===a?e.end-e.start:a-o)),null===a&&(a=o+o-s)
const h=o-(o-Math.min(s,a))/2*l
return{chunk:Math.abs(a-s)/2*l/n,ratio:i.barPercentage,start:h}}(t,e,r,i):function(t,e,i,r){const o=i.barThickness
let s,a
return n.isNullOrUndef(o)?(s=e.min*i.categoryPercentage,a=i.barPercentage):(s=o*r,a=1),{chunk:s/r,ratio:a,start:e.pixels[t]-s/2}}(t,e,r,i),u=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0)
a=h.start+h.chunk*u+h.chunk/2,l=Math.min(s,h.chunk*h.ratio)}else a=i.getPixelForValue(this.getParsed(t)[i.axis],t),l=Math.min(s,e.min*e.ratio)
return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const t=this._cachedMeta,e=t.vScale,i=t.data,n=i.length
let r=0
for(;r<n;++r)null!==this.getParsed(r)[e.axis]&&i[r].draw(this._ctx)}}class A extends x{static id="bubble"
static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}
static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}}
initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,i,n){const r=super.parsePrimitiveData(t,e,i,n)
for(let o=0;o<r.length;o++)r[o]._custom=this.resolveDataElementOptions(o+i).radius
return r}parseArrayData(t,e,i,r){const o=super.parseArrayData(t,e,i,r)
for(let s=0;s<o.length;s++){const t=e[i+s]
o[s]._custom=n.valueOrDefault(t[2],this.resolveDataElementOptions(s+i).radius)}return o}parseObjectData(t,e,i,r){const o=super.parseObjectData(t,e,i,r)
for(let s=0;s<o.length;s++){const t=e[i+s]
o[s]._custom=n.valueOrDefault(t&&t.r&&+t.r,this.resolveDataElementOptions(s+i).radius)}return o}getMaxOverflow(){const t=this._cachedMeta.data
let e=0
for(let i=t.length-1;i>=0;--i)e=Math.max(e,t[i].size(this.resolveDataElementOptions(i))/2)
return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart.data.labels||[],{xScale:n,yScale:r}=e,o=this.getParsed(t),s=n.getLabelForValue(o.x),a=r.getLabelForValue(o.y),l=o._custom
return{label:i[t]||"",value:"("+s+", "+a+(l?", "+l:"")+")"}}update(t){const e=this._cachedMeta.data
this.updateElements(e,0,e.length,t)}updateElements(t,e,i,n){const r="reset"===n,{iScale:o,vScale:s}=this._cachedMeta,{sharedOptions:a,includeOptions:l}=this._getSharedOptions(e,n),h=o.axis,u=s.axis
for(let c=e;c<e+i;c++){const e=t[c],i=!r&&this.getParsed(c),d={},f=d[h]=r?o.getPixelForDecimal(.5):o.getPixelForValue(i[h]),p=d[u]=r?s.getBasePixel():s.getPixelForValue(i[u])
d.skip=isNaN(f)||isNaN(p),l&&(d.options=a||this.resolveDataElementOptions(c,e.active?"active":n),r&&(d.options.radius=0)),this.updateElement(e,c,d,n)}}resolveDataElementOptions(t,e){const i=this.getParsed(t)
let r=super.resolveDataElementOptions(t,e)
r.$shared&&(r=Object.assign({},r,{$shared:!1}))
const o=r.radius
return"active"!==e&&(r.radius=0),r.radius+=n.valueOrDefault(i&&i._custom,o),r}}class R extends x{static id="doughnut"
static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}
static descriptors={_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}
static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data
if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i,color:n}}=t.legend.options
return e.labels.map(((e,r)=>{const o=t.getDatasetMeta(0).controller.getStyle(r)
return{text:e,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,fontColor:n,lineWidth:o.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(r),index:r}}))}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}}}
constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const i=this.getDataset().data,r=this._cachedMeta
if(!1===this._parsing)r._parsed=i
else{let o,s,a=t=>+i[t]
if(n.isObject(i[t])){const{key:t="value"}=this._parsing
a=e=>+n.resolveObjectKey(i[e],t)}for(o=t,s=t+e;o<s;++o)r._parsed[o]=a(o)}}_getRotation(){return n.toRadians(this.options.rotation-90)}_getCircumference(){return n.toRadians(this.options.circumference)}_getRotationExtents(){let t=n.TAU,e=-n.TAU
for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const n=this.chart.getDatasetMeta(i).controller,r=n._getRotation(),o=n._getCircumference()
t=Math.min(t,r),e=Math.max(e,r+o)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:i}=e,r=this._cachedMeta,o=r.data,s=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,a=Math.max((Math.min(i.width,i.height)-s)/2,0),l=Math.min(n.toPercentage(this.options.cutout,a),1),h=this._getRingWeight(this.index),{circumference:u,rotation:c}=this._getRotationExtents(),{ratioX:d,ratioY:f,offsetX:p,offsetY:g}=function(t,e,i){let r=1,o=1,s=0,a=0
if(e<n.TAU){const l=t,h=l+e,u=Math.cos(l),c=Math.sin(l),d=Math.cos(h),f=Math.sin(h),p=(t,e,r)=>n._angleBetween(t,l,h,!0)?1:Math.max(e,e*i,r,r*i),g=(t,e,r)=>n._angleBetween(t,l,h,!0)?-1:Math.min(e,e*i,r,r*i),_=p(0,u,d),m=p(n.HALF_PI,c,f),y=g(n.PI,u,d),v=g(n.PI+n.HALF_PI,c,f)
r=(_-y)/2,o=(m-v)/2,s=-(_+y)/2,a=-(m+v)/2}return{ratioX:r,ratioY:o,offsetX:s,offsetY:a}}(c,u,l),_=(i.width-s)/d,m=(i.height-s)/f,y=Math.max(Math.min(_,m)/2,0),v=n.toDimension(this.options.radius,y),x=(v-Math.max(v*l,0))/this._getVisibleDatasetWeightTotal()
this.offsetX=p*v,this.offsetY=g*v,r.total=this.calculateTotal(),this.outerRadius=v-x*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-x*h,0),this.updateElements(o,0,o.length,t)}_circumference(t,e){const i=this.options,r=this._cachedMeta,o=this._getCircumference()
return e&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||null===r._parsed[t]||r.data[t].hidden?0:this.calculateCircumference(r._parsed[t]*o/n.TAU)}updateElements(t,e,i,n){const r="reset"===n,o=this.chart,s=o.chartArea,a=o.options.animation,l=(s.left+s.right)/2,h=(s.top+s.bottom)/2,u=r&&a.animateScale,c=u?0:this.innerRadius,d=u?0:this.outerRadius,{sharedOptions:f,includeOptions:p}=this._getSharedOptions(e,n)
let g,_=this._getRotation()
for(g=0;g<e;++g)_+=this._circumference(g,r)
for(g=e;g<e+i;++g){const e=this._circumference(g,r),i=t[g],o={x:l+this.offsetX,y:h+this.offsetY,startAngle:_,endAngle:_+e,circumference:e,outerRadius:d,innerRadius:c}
p&&(o.options=f||this.resolveDataElementOptions(g,i.active?"active":n)),_+=e,this.updateElement(i,g,o,n)}}calculateTotal(){const t=this._cachedMeta,e=t.data
let i,n=0
for(i=0;i<e.length;i++){const r=t._parsed[i]
null===r||isNaN(r)||!this.chart.getDataVisibility(i)||e[i].hidden||(n+=Math.abs(r))}return n}calculateCircumference(t){const e=this._cachedMeta.total
return e>0&&!isNaN(t)?n.TAU*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,r=i.data.labels||[],o=n.formatNumber(e._parsed[t],i.options.locale)
return{label:r[t]||"",value:o}}getMaxBorderWidth(t){let e=0
const i=this.chart
let n,r,o,s,a
if(!t)for(n=0,r=i.data.datasets.length;n<r;++n)if(i.isDatasetVisible(n)){o=i.getDatasetMeta(n),t=o.data,s=o.controller
break}if(!t)return 0
for(n=0,r=t.length;n<r;++n)a=s.resolveDataElementOptions(n),"inner"!==a.borderAlign&&(e=Math.max(e,a.borderWidth||0,a.hoverBorderWidth||0))
return e}getMaxOffset(t){let e=0
for(let i=0,n=t.length;i<n;++i){const t=this.resolveDataElementOptions(i)
e=Math.max(e,t.offset||0,t.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0
for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(e+=this._getRingWeight(i))
return e}_getRingWeight(t){return Math.max(n.valueOrDefault(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class L extends x{static id="line"
static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}
static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}}
initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:i,data:r=[],_dataset:o}=e,s=this.chart._animationsDisabled
let{start:a,count:l}=n._getStartAndCountOfVisiblePoints(e,r,s)
this._drawStart=a,this._drawCount=l,n._scaleRangesChanged(e)&&(a=0,l=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!o._decimated,i.points=r
const h=this.resolveDatasetElementOptions(t)
this.options.showLine||(h.borderWidth=0),h.segment=this.options.segment,this.updateElement(i,void 0,{animated:!s,options:h},t),this.updateElements(r,a,l,t)}updateElements(t,e,i,r){const o="reset"===r,{iScale:s,vScale:a,_stacked:l,_dataset:h}=this._cachedMeta,{sharedOptions:u,includeOptions:c}=this._getSharedOptions(e,r),d=s.axis,f=a.axis,{spanGaps:p,segment:g}=this.options,_=n.isNumber(p)?p:Number.POSITIVE_INFINITY,m=this.chart._animationsDisabled||o||"none"===r,y=e+i,v=t.length
let x=e>0&&this.getParsed(e-1)
for(let b=0;b<v;++b){const i=t[b],p=m?i:{}
if(b<e||b>=y){p.skip=!0
continue}const v=this.getParsed(b),w=n.isNullOrUndef(v[f]),E=p[d]=s.getPixelForValue(v[d],b),S=p[f]=o||w?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,v,l):v[f],b)
p.skip=isNaN(E)||isNaN(S)||w,p.stop=b>0&&Math.abs(v[d]-x[d])>_,g&&(p.parsed=v,p.raw=h.data[b]),c&&(p.options=u||this.resolveDataElementOptions(b,i.active?"active":r)),m||this.updateElement(i,b,p,r),x=v}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,i=e.options&&e.options.borderWidth||0,n=t.data||[]
if(!n.length)return i
const r=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1))
return Math.max(i,r,o)/2}draw(){const t=this._cachedMeta
t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}class O extends x{static id="polarArea"
static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}
static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data
if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i,color:n}}=t.legend.options
return e.labels.map(((e,r)=>{const o=t.getDatasetMeta(0).controller.getStyle(r)
return{text:e,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,fontColor:n,lineWidth:o.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(r),index:r}}))}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}}
constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,r=i.data.labels||[],o=n.formatNumber(e._parsed[t].r,i.options.locale)
return{label:r[t]||"",value:o}}parseObjectData(t,e,i,r){return n._parseObjectDataRadialScale.bind(this)(t,e,i,r)}update(t){const e=this._cachedMeta.data
this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY}
return t.data.forEach(((t,i)=>{const n=this.getParsed(i).r
!isNaN(n)&&this.chart.getDataVisibility(i)&&(n<e.min&&(e.min=n),n>e.max&&(e.max=n))})),e}_updateRadius(){const t=this.chart,e=t.chartArea,i=t.options,n=Math.min(e.right-e.left,e.bottom-e.top),r=Math.max(n/2,0),o=(r-Math.max(i.cutoutPercentage?r/100*i.cutoutPercentage:1,0))/t.getVisibleDatasetCount()
this.outerRadius=r-o*this.index,this.innerRadius=this.outerRadius-o}updateElements(t,e,i,r){const o="reset"===r,s=this.chart,a=s.options.animation,l=this._cachedMeta.rScale,h=l.xCenter,u=l.yCenter,c=l.getIndexAngle(0)-.5*n.PI
let d,f=c
const p=360/this.countVisibleElements()
for(d=0;d<e;++d)f+=this._computeAngle(d,r,p)
for(d=e;d<e+i;d++){const e=t[d]
let i=f,n=f+this._computeAngle(d,r,p),g=s.getDataVisibility(d)?l.getDistanceFromCenterForValue(this.getParsed(d).r):0
f=n,o&&(a.animateScale&&(g=0),a.animateRotate&&(i=n=c))
const _={x:h,y:u,innerRadius:0,outerRadius:g,startAngle:i,endAngle:n,options:this.resolveDataElementOptions(d,e.active?"active":r)}
this.updateElement(e,d,_,r)}}countVisibleElements(){const t=this._cachedMeta
let e=0
return t.data.forEach(((t,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&e++})),e}_computeAngle(t,e,i){return this.chart.getDataVisibility(t)?n.toRadians(this.resolveDataElementOptions(t,e).angle||i):0}}class D extends R{static id="pie"
static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}class N extends x{static id="radar"
static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}
static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}}
getLabelAndValue(t){const e=this._cachedMeta.vScale,i=this.getParsed(t)
return{label:e.getLabels()[t],value:""+e.getLabelForValue(i[e.axis])}}parseObjectData(t,e,i,r){return n._parseObjectDataRadialScale.bind(this)(t,e,i,r)}update(t){const e=this._cachedMeta,i=e.dataset,n=e.data||[],r=e.iScale.getLabels()
if(i.points=n,"resize"!==t){const e=this.resolveDatasetElementOptions(t)
this.options.showLine||(e.borderWidth=0)
const o={_loop:!0,_fullLoop:r.length===n.length,options:e}
this.updateElement(i,void 0,o,t)}this.updateElements(n,0,n.length,t)}updateElements(t,e,i,n){const r=this._cachedMeta.rScale,o="reset"===n
for(let s=e;s<e+i;s++){const e=t[s],i=this.resolveDataElementOptions(s,e.active?"active":n),a=r.getPointPositionForValue(s,this.getParsed(s).r),l=o?r.xCenter:a.x,h=o?r.yCenter:a.y,u={x:l,y:h,angle:a.angle,skip:isNaN(l)||isNaN(h),options:i}
this.updateElement(e,s,u,n)}}}class F extends x{static id="scatter"
static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}
static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}}
getLabelAndValue(t){const e=this._cachedMeta,i=this.chart.data.labels||[],{xScale:n,yScale:r}=e,o=this.getParsed(t),s=n.getLabelForValue(o.x),a=r.getLabelForValue(o.y)
return{label:i[t]||"",value:"("+s+", "+a+")"}}update(t){const e=this._cachedMeta,{data:i=[]}=e,r=this.chart._animationsDisabled
let{start:o,count:s}=n._getStartAndCountOfVisiblePoints(e,i,r)
if(this._drawStart=o,this._drawCount=s,n._scaleRangesChanged(e)&&(o=0,s=i.length),this.options.showLine){this.datasetElementType||this.addElements()
const{dataset:n,_dataset:o}=e
n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!o._decimated,n.points=i
const s=this.resolveDatasetElementOptions(t)
s.segment=this.options.segment,this.updateElement(n,void 0,{animated:!r,options:s},t)}else this.datasetElementType&&(delete e.dataset,this.datasetElementType=!1)
this.updateElements(i,o,s,t)}addElements(){const{showLine:t}=this.options
!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,i,r){const o="reset"===r,{iScale:s,vScale:a,_stacked:l,_dataset:h}=this._cachedMeta,u=this.resolveDataElementOptions(e,r),c=this.getSharedOptions(u),d=this.includeOptions(r,c),f=s.axis,p=a.axis,{spanGaps:g,segment:_}=this.options,m=n.isNumber(g)?g:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||o||"none"===r
let v=e>0&&this.getParsed(e-1)
for(let x=e;x<e+i;++x){const e=t[x],i=this.getParsed(x),u=y?e:{},g=n.isNullOrUndef(i[p]),b=u[f]=s.getPixelForValue(i[f],x),w=u[p]=o||g?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,i,l):i[p],x)
u.skip=isNaN(b)||isNaN(w)||g,u.stop=x>0&&Math.abs(i[f]-v[f])>m,_&&(u.parsed=i,u.raw=h.data[x]),d&&(u.options=c||this.resolveDataElementOptions(x,e.active?"active":r)),y||this.updateElement(e,x,u,r),v=i}this.updateSharedOptions(c,r,u)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[]
if(!this.options.showLine){let t=0
for(let i=e.length-1;i>=0;--i)t=Math.max(t,e[i].size(this.resolveDataElementOptions(i))/2)
return t>0&&t}const i=t.dataset,n=i.options&&i.options.borderWidth||0
if(!e.length)return n
const r=e[0].size(this.resolveDataElementOptions(0)),o=e[e.length-1].size(this.resolveDataElementOptions(e.length-1))
return Math.max(n,r,o)/2}}var k=Object.freeze({__proto__:null,BarController:M,BubbleController:A,DoughnutController:R,LineController:L,PieController:D,PolarAreaController:O,RadarController:N,ScatterController:F})
function z(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class j{static override(t){Object.assign(j.prototype,t)}options
constructor(t){this.options=t||{}}init(){}formats(){return z()}parse(){return z()}format(){return z()}add(){return z()}diff(){return z()}startOf(){return z()}endOf(){return z()}}var G={_date:j}
function B(t,e,i,r){const{controller:o,data:s,_sorted:a}=t,l=o._cachedMeta.iScale
if(l&&e===l.axis&&"r"!==e&&a&&s.length){const t=l._reversePixels?n._rlookupByKey:n._lookupByKey
if(!r)return t(s,e,i)
if(o._sharedOptions){const n=s[0],r="function"==typeof n.getRange&&n.getRange(e)
if(r){const n=t(s,e,i-r),o=t(s,e,i+r)
return{lo:n.lo,hi:o.hi}}}}return{lo:0,hi:s.length-1}}function U(t,e,i,n,r){const o=t.getSortedVisibleDatasetMetas(),s=i[e]
for(let a=0,l=o.length;a<l;++a){const{index:t,data:i}=o[a],{lo:l,hi:h}=B(o[a],e,s,r)
for(let e=l;e<=h;++e){const r=i[e]
r.skip||n(r,t,e)}}}function q(t,e,i,r,o){const s=[]
return o||t.isPointInArea(e)?(U(t,i,e,(function(i,a,l){(o||n._isPointInArea(i,t.chartArea,0))&&i.inRange(e.x,e.y,r)&&s.push({element:i,datasetIndex:a,index:l})}),!0),s):s}function V(t,e,i,r,o,s){return s||t.isPointInArea(e)?"r"!==i||r?function(t,e,i,n,r,o){let s=[]
const a=function(t){const e=-1!==t.indexOf("x"),i=-1!==t.indexOf("y")
return function(t,n){const r=e?Math.abs(t.x-n.x):0,o=i?Math.abs(t.y-n.y):0
return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}(i)
let l=Number.POSITIVE_INFINITY
return U(t,i,e,(function(i,h,u){const c=i.inRange(e.x,e.y,r)
if(n&&!c)return
const d=i.getCenterPoint(r)
if(!o&&!t.isPointInArea(d)&&!c)return
const f=a(e,d)
f<l?(s=[{element:i,datasetIndex:h,index:u}],l=f):f===l&&s.push({element:i,datasetIndex:h,index:u})})),s}(t,e,i,r,o,s):function(t,e,i,r){let o=[]
return U(t,i,e,(function(t,i,s){const{startAngle:a,endAngle:l}=t.getProps(["startAngle","endAngle"],r),{angle:h}=n.getAngleFromPoint(t,{x:e.x,y:e.y})
n._angleBetween(h,a,l)&&o.push({element:t,datasetIndex:i,index:s})})),o}(t,e,i,o):[]}function Z(t,e,i,n,r){const o=[],s="x"===i?"inXRange":"inYRange"
let a=!1
return U(t,i,e,((t,n,l)=>{t[s](e[i],r)&&(o.push({element:t,datasetIndex:n,index:l}),a=a||t.inRange(e.x,e.y,r))})),n&&!a?[]:o}var W={evaluateInteractionItems:U,modes:{index(t,e,i,r){const o=n.getRelativePosition(e,t),s=i.axis||"x",a=i.includeInvisible||!1,l=i.intersect?q(t,o,s,r,a):V(t,o,s,!1,r,a),h=[]
return l.length?(t.getSortedVisibleDatasetMetas().forEach((t=>{const e=l[0].index,i=t.data[e]
i&&!i.skip&&h.push({element:i,datasetIndex:t.index,index:e})})),h):[]},dataset(t,e,i,r){const o=n.getRelativePosition(e,t),s=i.axis||"xy",a=i.includeInvisible||!1
let l=i.intersect?q(t,o,s,r,a):V(t,o,s,!1,r,a)
if(l.length>0){const e=l[0].datasetIndex,i=t.getDatasetMeta(e).data
l=[]
for(let t=0;t<i.length;++t)l.push({element:i[t],datasetIndex:e,index:t})}return l},point:(t,e,i,r)=>q(t,n.getRelativePosition(e,t),i.axis||"xy",r,i.includeInvisible||!1),nearest(t,e,i,r){const o=n.getRelativePosition(e,t),s=i.axis||"xy",a=i.includeInvisible||!1
return V(t,o,s,i.intersect,r,a)},x:(t,e,i,r)=>Z(t,n.getRelativePosition(e,t),"x",i.intersect,r),y:(t,e,i,r)=>Z(t,n.getRelativePosition(e,t),"y",i.intersect,r)}}
const Y=["left","top","right","bottom"]
function X(t,e){return t.filter((t=>t.pos===e))}function H(t,e){return t.filter((t=>-1===Y.indexOf(t.pos)&&t.box.axis===e))}function $(t,e){return t.sort(((t,i)=>{const n=e?i:t,r=e?t:i
return n.weight===r.weight?n.index-r.index:n.weight-r.weight}))}function K(t,e,i,n){return Math.max(t[i],e[i])+Math.max(t[n],e[n])}function J(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Q(t,e,i,r){const{pos:o,box:s}=i,a=t.maxPadding
if(!n.isObject(o)){i.size&&(t[o]-=i.size)
const e=r[i.stack]||{size:0,count:1}
e.size=Math.max(e.size,i.horizontal?s.height:s.width),i.size=e.size/e.count,t[o]+=i.size}s.getPadding&&J(a,s.getPadding())
const l=Math.max(0,e.outerWidth-K(a,t,"left","right")),h=Math.max(0,e.outerHeight-K(a,t,"top","bottom")),u=l!==t.w,c=h!==t.h
return t.w=l,t.h=h,i.horizontal?{same:u,other:c}:{same:c,other:u}}function tt(t,e){const i=e.maxPadding
return function(t){const n={left:0,top:0,right:0,bottom:0}
return t.forEach((t=>{n[t]=Math.max(e[t],i[t])})),n}(t?["left","right"]:["top","bottom"])}function et(t,e,i,n){const r=[]
let o,s,a,l,h,u
for(o=0,s=t.length,h=0;o<s;++o){a=t[o],l=a.box,l.update(a.width||e.w,a.height||e.h,tt(a.horizontal,e))
const{same:s,other:c}=Q(e,i,a,n)
h|=s&&r.length,u=u||c,l.fullSize||r.push(a)}return h&&et(r,e,i,n)||u}function it(t,e,i,n,r){t.top=i,t.left=e,t.right=e+n,t.bottom=i+r,t.width=n,t.height=r}function nt(t,e,i,r){const o=i.padding
let{x:s,y:a}=e
for(const l of t){const t=l.box,h=r[l.stack]||{count:1,placed:0,weight:1},u=l.stackWeight/h.weight||1
if(l.horizontal){const r=e.w*u,s=h.size||t.height
n.defined(h.start)&&(a=h.start),t.fullSize?it(t,o.left,a,i.outerWidth-o.right-o.left,s):it(t,e.left+h.placed,a,r,s),h.start=a,h.placed+=r,a=t.bottom}else{const r=e.h*u,a=h.size||t.width
n.defined(h.start)&&(s=h.start),t.fullSize?it(t,s,o.top,a,i.outerHeight-o.bottom-o.top):it(t,s,e.top+h.placed,a,r),h.start=s,h.placed+=r,s=t.right}}e.x=s,e.y=a}var rt={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},t.boxes.push(e)},removeBox(t,e){const i=t.boxes?t.boxes.indexOf(e):-1;-1!==i&&t.boxes.splice(i,1)},configure(t,e,i){e.fullSize=i.fullSize,e.position=i.position,e.weight=i.weight},update(t,e,i,r){if(!t)return
const o=n.toPadding(t.options.layout.padding),s=Math.max(e-o.width,0),a=Math.max(i-o.height,0),l=function(t){const e=function(t){const e=[]
let i,n,r,o,s,a
for(i=0,n=(t||[]).length;i<n;++i)r=t[i],({position:o,options:{stack:s,stackWeight:a=1}}=r),e.push({index:i,box:r,pos:o,horizontal:r.isHorizontal(),weight:r.weight,stack:s&&o+s,stackWeight:a})
return e}(t),i=$(e.filter((t=>t.box.fullSize)),!0),n=$(X(e,"left"),!0),r=$(X(e,"right")),o=$(X(e,"top"),!0),s=$(X(e,"bottom")),a=H(e,"x"),l=H(e,"y")
return{fullSize:i,leftAndTop:n.concat(o),rightAndBottom:r.concat(l).concat(s).concat(a),chartArea:X(e,"chartArea"),vertical:n.concat(r).concat(l),horizontal:o.concat(s).concat(a)}}(t.boxes),h=l.vertical,u=l.horizontal
n.each(t.boxes,(t=>{"function"==typeof t.beforeLayout&&t.beforeLayout()}))
const c=h.reduce(((t,e)=>e.box.options&&!1===e.box.options.display?t:t+1),0)||1,d=Object.freeze({outerWidth:e,outerHeight:i,padding:o,availableWidth:s,availableHeight:a,vBoxMaxWidth:s/2/c,hBoxMaxHeight:a/2}),f=Object.assign({},o)
J(f,n.toPadding(r))
const p=Object.assign({maxPadding:f,w:s,h:a,x:o.left,y:o.top},o),g=function(t,e){const i=function(t){const e={}
for(const i of t){const{stack:t,pos:n,stackWeight:r}=i
if(!t||!Y.includes(n))continue
const o=e[t]||(e[t]={count:0,placed:0,weight:0,size:0})
o.count++,o.weight+=r}return e}(t),{vBoxMaxWidth:n,hBoxMaxHeight:r}=e
let o,s,a
for(o=0,s=t.length;o<s;++o){a=t[o]
const{fullSize:s}=a.box,l=i[a.stack],h=l&&a.stackWeight/l.weight
a.horizontal?(a.width=h?h*n:s&&e.availableWidth,a.height=r):(a.width=n,a.height=h?h*r:s&&e.availableHeight)}return i}(h.concat(u),d)
et(l.fullSize,p,d,g),et(h,p,d,g),et(u,p,d,g)&&et(h,p,d,g),function(t){const e=t.maxPadding
function i(i){const n=Math.max(e[i]-t[i],0)
return t[i]+=n,n}t.y+=i("top"),t.x+=i("left"),i("right"),i("bottom")}(p),nt(l.leftAndTop,p,d,g),p.x+=p.w,p.y+=p.h,nt(l.rightAndBottom,p,d,g),t.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},n.each(l.chartArea,(e=>{const i=e.box
Object.assign(i,t.chartArea),i.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})}))}}
class ot{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,n){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,n?Math.floor(e/n):i)}}isAttached(t){return!0}updateConfig(t){}}class st extends ot{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const at="$chartjs",lt={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},ht=t=>null===t||""===t,ut=!!n.supportsEventListenerOptions&&{passive:!0}
function ct(t,e,i){t&&t.canvas&&t.canvas.removeEventListener(e,i,ut)}function dt(t,e){for(const i of t)if(i===e||i.contains(e))return!0}function ft(t,e,i){const n=t.canvas,r=new MutationObserver((t=>{let e=!1
for(const i of t)e=e||dt(i.addedNodes,n),e=e&&!dt(i.removedNodes,n)
e&&i()}))
return r.observe(document,{childList:!0,subtree:!0}),r}function pt(t,e,i){const n=t.canvas,r=new MutationObserver((t=>{let e=!1
for(const i of t)e=e||dt(i.removedNodes,n),e=e&&!dt(i.addedNodes,n)
e&&i()}))
return r.observe(document,{childList:!0,subtree:!0}),r}const gt=new Map
let _t=0
function mt(){const t=window.devicePixelRatio
t!==_t&&(_t=t,gt.forEach(((e,i)=>{i.currentDevicePixelRatio!==t&&e()})))}function yt(t,e,i){const r=t.canvas,o=r&&n._getParentNode(r)
if(!o)return
const s=n.throttled(((t,e)=>{const n=o.clientWidth
i(t,e),n<o.clientWidth&&i()}),window),a=new ResizeObserver((t=>{const e=t[0],i=e.contentRect.width,n=e.contentRect.height
0===i&&0===n||s(i,n)}))
return a.observe(o),function(t,e){gt.size||window.addEventListener("resize",mt),gt.set(t,e)}(t,s),a}function vt(t,e,i){i&&i.disconnect(),"resize"===e&&function(t){gt.delete(t),gt.size||window.removeEventListener("resize",mt)}(t)}function xt(t,e,i){const r=t.canvas,o=n.throttled((e=>{null!==t.ctx&&i(function(t,e){const i=lt[t.type]||t.type,{x:r,y:o}=n.getRelativePosition(t,e)
return{type:i,chart:e,native:t,x:void 0!==r?r:null,y:void 0!==o?o:null}}(e,t))}),t)
return function(t,e,i){t&&t.addEventListener(e,i,ut)}(r,e,o),o}class bt extends ot{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d")
return i&&i.canvas===t?(function(t,e){const i=t.style,r=t.getAttribute("height"),o=t.getAttribute("width")
if(t[at]={initial:{height:r,width:o,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",i.boxSizing=i.boxSizing||"border-box",ht(o)){const e=n.readUsedSize(t,"width")
void 0!==e&&(t.width=e)}if(ht(r))if(""===t.style.height)t.height=t.width/(e||2)
else{const e=n.readUsedSize(t,"height")
void 0!==e&&(t.height=e)}}(t,e),i):null}releaseContext(t){const e=t.canvas
if(!e[at])return!1
const i=e[at].initial;["height","width"].forEach((t=>{const r=i[t]
n.isNullOrUndef(r)?e.removeAttribute(t):e.setAttribute(t,r)}))
const r=i.style||{}
return Object.keys(r).forEach((t=>{e.style[t]=r[t]})),e.width=e.width,delete e[at],!0}addEventListener(t,e,i){this.removeEventListener(t,e)
const n=t.$proxies||(t.$proxies={}),r={attach:ft,detach:pt,resize:yt}[e]||xt
n[e]=r(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),n=i[e]
n&&(({attach:vt,detach:vt,resize:vt}[e]||ct)(t,e,n),i[e]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,r){return n.getMaximumSize(t,e,i,r)}isAttached(t){const e=n._getParentNode(t)
return!(!e||!e.isConnected)}}function wt(t){return!n._isDomSupported()||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas?st:bt}class Et{static defaults={}
static defaultRoutes=void 0
x
y
active=!1
options
$animations
tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t)
return{x:e,y:i}}hasValue(){return n.isNumber(this.x)&&n.isNumber(this.y)}getProps(t,e){const i=this.$animations
if(!e||!i)return this
const n={}
return t.forEach((t=>{n[t]=i[t]&&i[t].active()?i[t]._to:this[t]})),n}}function St(t,e,i,r,o){const s=n.valueOrDefault(r,0),a=Math.min(n.valueOrDefault(o,t.length),t.length)
let l,h,u,c=0
for(i=Math.ceil(i),o&&(l=o-r,i=l/Math.floor(l/i)),u=s;u<0;)c++,u=Math.round(s+c*i)
for(h=Math.max(s,0);h<a;h++)h===u&&(e.push(t[h]),c++,u=Math.round(s+c*i))}const Ct=(t,e,i)=>"top"===e||"left"===e?t[e]+i:t[e]-i,Pt=(t,e)=>Math.min(e||t,t)
function Tt(t,e){const i=[],n=t.length/e,r=t.length
let o=0
for(;o<r;o+=n)i.push(t[Math.floor(o)])
return i}function It(t,e,i){const n=t.ticks.length,r=Math.min(e,n-1),o=t._startPixel,s=t._endPixel,a=1e-6
let l,h=t.getPixelForTick(r)
if(!(i&&(l=1===n?Math.max(h-o,s-h):0===e?(t.getPixelForTick(1)-h)/2:(h-t.getPixelForTick(r-1))/2,h+=r<e?l:-l,h<o-a||h>s+a)))return h}function Mt(t){return t.drawTicks?t.tickLength:0}function At(t,e){if(!t.display)return 0
const i=n.toFont(t.font,e),r=n.toPadding(t.padding)
return(n.isArray(t.text)?t.text.length:1)*i.lineHeight+r.height}function Rt(t,e,i){let r=n._toLeftRightCenter(t)
return(i&&"right"!==e||!i&&"right"===e)&&(r=(t=>"left"===t?"right":"right"===t?"left":t)(r)),r}class Lt extends Et{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:r}=this
return t=n.finiteOrDefault(t,Number.POSITIVE_INFINITY),e=n.finiteOrDefault(e,Number.NEGATIVE_INFINITY),i=n.finiteOrDefault(i,Number.POSITIVE_INFINITY),r=n.finiteOrDefault(r,Number.NEGATIVE_INFINITY),{min:n.finiteOrDefault(t,i),max:n.finiteOrDefault(e,r),minDefined:n.isNumberFinite(t),maxDefined:n.isNumberFinite(e)}}getMinMax(t){let e,{min:i,max:r,minDefined:o,maxDefined:s}=this.getUserBounds()
if(o&&s)return{min:i,max:r}
const a=this.getMatchingVisibleMetas()
for(let n=0,l=a.length;n<l;++n)e=a[n].controller.getMinMax(this,t),o||(i=Math.min(i,e.min)),s||(r=Math.max(r,e.max))
return i=s&&i>r?r:i,r=o&&i>r?i:r,{min:n.finiteOrDefault(i,n.finiteOrDefault(r,i)),max:n.finiteOrDefault(r,n.finiteOrDefault(i,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data
return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){n.callback(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:r,grace:o,ticks:s}=this.options,a=s.sampleSize
this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=n._addGrace(this,o,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks()
const l=a<this.ticks.length
this._convertTicksToLabels(l?Tt(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||"auto"===s.source)&&(this.ticks=function(t,e){const i=t.options.ticks,r=function(t){const e=t.options.offset,i=t._tickSize(),n=t._length/i+(e?0:1),r=t._maxLength/i
return Math.floor(Math.min(n,r))}(t),o=Math.min(i.maxTicksLimit||r,r),s=i.major.enabled?function(t){const e=[]
let i,n
for(i=0,n=t.length;i<n;i++)t[i].major&&e.push(i)
return e}(e):[],a=s.length,l=s[0],h=s[a-1],u=[]
if(a>o)return function(t,e,i,n){let r,o=0,s=i[0]
for(n=Math.ceil(n),r=0;r<t.length;r++)r===s&&(e.push(t[r]),o++,s=i[o*n])}(e,u,s,a/o),u
const c=function(t,e,i){const r=function(t){const e=t.length
let i,n
if(e<2)return!1
for(n=t[0],i=1;i<e;++i)if(t[i]-t[i-1]!==n)return!1
return n}(t),o=e.length/i
if(!r)return Math.max(o,1)
const s=n._factorize(r)
for(let n=0,a=s.length-1;n<a;n++){const t=s[n]
if(t>o)return t}return Math.max(o,1)}(s,e,o)
if(a>0){let t,i
const r=a>1?Math.round((h-l)/(a-1)):null
for(St(e,u,c,n.isNullOrUndef(r)?0:l-r,l),t=0,i=a-1;t<i;t++)St(e,u,c,s[t],s[t+1])
return St(e,u,c,h,n.isNullOrUndef(r)?e.length:h+r),u}return St(e,u,c),u}(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,e,i=this.options.reverse
this.isHorizontal()?(t=this.left,e=this.right):(t=this.top,e=this.bottom,i=!i),this._startPixel=t,this._endPixel=e,this._reversePixels=i,this._length=e-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){n.callback(this.options.afterUpdate,[this])}beforeSetDimensions(){n.callback(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){n.callback(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),n.callback(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){n.callback(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks
let i,r,o
for(i=0,r=t.length;i<r;i++)o=t[i],o.label=n.callback(e.callback,[o.value,i,t],this)}afterTickToLabelConversion(){n.callback(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){n.callback(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=Pt(this.ticks.length,t.ticks.maxTicksLimit),r=e.minRotation||0,o=e.maxRotation
let s,a,l,h=r
if(!this._isVisible()||!e.display||r>=o||i<=1||!this.isHorizontal())return void(this.labelRotation=r)
const u=this._getLabelSizes(),c=u.widest.width,d=u.highest.height,f=n._limitValue(this.chart.width-c,0,this.maxWidth)
s=t.offset?this.maxWidth/i:f/(i-1),c+6>s&&(s=f/(i-(t.offset?.5:1)),a=this.maxHeight-Mt(t.grid)-e.padding-At(t.title,this.chart.options.font),l=Math.sqrt(c*c+d*d),h=n.toDegrees(Math.min(Math.asin(n._limitValue((u.highest.height+6)/s,-1,1)),Math.asin(n._limitValue(a/l,-1,1))-Math.asin(n._limitValue(d/l,-1,1)))),h=Math.max(r,Math.min(o,h))),this.labelRotation=h}afterCalculateLabelRotation(){n.callback(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){n.callback(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:r,grid:o}}=this,s=this._isVisible(),a=this.isHorizontal()
if(s){const s=At(r,e.options.font)
if(a?(t.width=this.maxWidth,t.height=Mt(o)+s):(t.height=this.maxHeight,t.width=Mt(o)+s),i.display&&this.ticks.length){const{first:e,last:r,widest:o,highest:s}=this._getLabelSizes(),l=2*i.padding,h=n.toRadians(this.labelRotation),u=Math.cos(h),c=Math.sin(h)
if(a){const e=i.mirror?0:c*o.width+u*s.height
t.height=Math.min(this.maxHeight,t.height+e+l)}else{const e=i.mirror?0:u*o.width+c*s.height
t.width=Math.min(this.maxWidth,t.width+e+l)}this._calculatePadding(e,r,c,u)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,n){const{ticks:{align:r,padding:o},position:s}=this.options,a=0!==this.labelRotation,l="top"!==s&&"x"===this.axis
if(this.isHorizontal()){const s=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1)
let u=0,c=0
a?l?(u=n*t.width,c=i*e.height):(u=i*t.height,c=n*e.width):"start"===r?c=e.width:"end"===r?u=t.width:"inner"!==r&&(u=t.width/2,c=e.width/2),this.paddingLeft=Math.max((u-s+o)*this.width/(this.width-s),0),this.paddingRight=Math.max((c-h+o)*this.width/(this.width-h),0)}else{let i=e.height/2,n=t.height/2
"start"===r?(i=0,n=t.height):"end"===r&&(i=e.height,n=0),this.paddingTop=i+o,this.paddingBottom=n+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){n.callback(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options
return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,i
for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,i=t.length;e<i;e++)n.isNullOrUndef(t[e].label)&&(t.splice(e,1),i--,e--)
this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes
if(!t){const e=this.options.ticks.sampleSize
let i=this.ticks
e<i.length&&(i=Tt(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){const{ctx:r,_longestTextCache:o}=this,s=[],a=[],l=Math.floor(e/Pt(e,i))
let h,u,c,d,f,p,g,_,m,y,v,x=0,b=0
for(h=0;h<e;h+=l){if(d=t[h].label,f=this._resolveTickFontOptions(h),r.font=p=f.string,g=o[p]=o[p]||{data:{},gc:[]},_=f.lineHeight,m=y=0,n.isNullOrUndef(d)||n.isArray(d)){if(n.isArray(d))for(u=0,c=d.length;u<c;++u)v=d[u],n.isNullOrUndef(v)||n.isArray(v)||(m=n._measureText(r,g.data,g.gc,m,v),y+=_)}else m=n._measureText(r,g.data,g.gc,m,d),y=_
s.push(m),a.push(y),x=Math.max(m,x),b=Math.max(y,b)}!function(t,e){n.each(t,(t=>{const i=t.gc,n=i.length/2
let r
if(n>e){for(r=0;r<n;++r)delete t.data[i[r]]
i.splice(0,n)}}))}(o,e)
const w=s.indexOf(x),E=a.indexOf(b),S=t=>({width:s[t]||0,height:a[t]||0})
return{first:S(0),last:S(e-1),widest:S(w),highest:S(E),widths:s,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks
return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t)
const e=this._startPixel+t*this._length
return n._int16Range(this._alignToPixels?n._alignPixel(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length
return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this
return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[]
if(t>=0&&t<e.length){const i=e[t]
return i.$context||(i.$context=function(t,e,i){return n.createContext(t,{tick:i,index:e,type:"tick"})}(this.getContext(),t,i))}return this.$context||(this.$context=(i=this.chart.getContext(),n.createContext(i,{scale:this,type:"scale"})))
var i}_tickSize(){const t=this.options.ticks,e=n.toRadians(this.labelRotation),i=Math.abs(Math.cos(e)),r=Math.abs(Math.sin(e)),o=this._getLabelSizes(),s=t.autoSkipPadding||0,a=o?o.widest.width+s:0,l=o?o.highest.height+s:0
return this.isHorizontal()?l*i>a*r?a/i:l/r:l*r<a*i?l/i:a/r}_isVisible(){const t=this.options.display
return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,r=this.options,{grid:o,position:s,border:a}=r,l=o.offset,h=this.isHorizontal(),u=this.ticks.length+(l?1:0),c=Mt(o),d=[],f=a.setContext(this.getContext()),p=f.display?f.width:0,g=p/2,_=function(t){return n._alignPixel(i,t,p)}
let m,y,v,x,b,w,E,S,C,P,T,I
if("top"===s)m=_(this.bottom),w=this.bottom-c,S=m-g,P=_(t.top)+g,I=t.bottom
else if("bottom"===s)m=_(this.top),P=t.top,I=_(t.bottom)-g,w=m+g,S=this.top+c
else if("left"===s)m=_(this.right),b=this.right-c,E=m-g,C=_(t.left)+g,T=t.right
else if("right"===s)m=_(this.left),C=t.left,T=_(t.right)-g,b=m+g,E=this.left+c
else if("x"===e){if("center"===s)m=_((t.top+t.bottom)/2+.5)
else if(n.isObject(s)){const t=Object.keys(s)[0],e=s[t]
m=_(this.chart.scales[t].getPixelForValue(e))}P=t.top,I=t.bottom,w=m+g,S=w+c}else if("y"===e){if("center"===s)m=_((t.left+t.right)/2)
else if(n.isObject(s)){const t=Object.keys(s)[0],e=s[t]
m=_(this.chart.scales[t].getPixelForValue(e))}b=m-g,E=b-c,C=t.left,T=t.right}const M=n.valueOrDefault(r.ticks.maxTicksLimit,u),A=Math.max(1,Math.ceil(u/M))
for(y=0;y<u;y+=A){const t=this.getContext(y),e=o.setContext(t),r=a.setContext(t),s=e.lineWidth,u=e.color,c=r.dash||[],f=r.dashOffset,p=e.tickWidth,g=e.tickColor,_=e.tickBorderDash||[],m=e.tickBorderDashOffset
v=It(this,y,l),void 0!==v&&(x=n._alignPixel(i,v,s),h?b=E=C=T=x:w=S=P=I=x,d.push({tx1:b,ty1:w,tx2:E,ty2:S,x1:C,y1:P,x2:T,y2:I,width:s,color:u,borderDash:c,borderDashOffset:f,tickWidth:p,tickColor:g,tickBorderDash:_,tickBorderDashOffset:m}))}return this._ticksLength=u,this._borderValue=m,d}_computeLabelItems(t){const e=this.axis,i=this.options,{position:r,ticks:o}=i,s=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:h,padding:u,mirror:c}=o,d=Mt(i.grid),f=d+u,p=c?-u:f,g=-n.toRadians(this.labelRotation),_=[]
let m,y,v,x,b,w,E,S,C,P,T,I,M="middle"
if("top"===r)w=this.bottom-p,E=this._getXAxisLabelAlignment()
else if("bottom"===r)w=this.top+p,E=this._getXAxisLabelAlignment()
else if("left"===r){const t=this._getYAxisLabelAlignment(d)
E=t.textAlign,b=t.x}else if("right"===r){const t=this._getYAxisLabelAlignment(d)
E=t.textAlign,b=t.x}else if("x"===e){if("center"===r)w=(t.top+t.bottom)/2+f
else if(n.isObject(r)){const t=Object.keys(r)[0],e=r[t]
w=this.chart.scales[t].getPixelForValue(e)+f}E=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===r)b=(t.left+t.right)/2-f
else if(n.isObject(r)){const t=Object.keys(r)[0],e=r[t]
b=this.chart.scales[t].getPixelForValue(e)}E=this._getYAxisLabelAlignment(d).textAlign}"y"===e&&("start"===l?M="top":"end"===l&&(M="bottom"))
const A=this._getLabelSizes()
for(m=0,y=a.length;m<y;++m){v=a[m],x=v.label
const t=o.setContext(this.getContext(m))
S=this.getPixelForTick(m)+o.labelOffset,C=this._resolveTickFontOptions(m),P=C.lineHeight,T=n.isArray(x)?x.length:1
const e=T/2,i=t.color,l=t.textStrokeColor,u=t.textStrokeWidth
let d,f=E
if(s?(b=S,"inner"===E&&(f=m===y-1?this.options.reverse?"left":"right":0===m?this.options.reverse?"right":"left":"center"),I="top"===r?"near"===h||0!==g?-T*P+P/2:"center"===h?-A.highest.height/2-e*P+P:-A.highest.height+P/2:"near"===h||0!==g?P/2:"center"===h?A.highest.height/2-e*P:A.highest.height-T*P,c&&(I*=-1),0===g||t.showLabelBackdrop||(b+=P/2*Math.sin(g))):(w=S,I=(1-T)*P/2),t.showLabelBackdrop){const e=n.toPadding(t.backdropPadding),i=A.heights[m],r=A.widths[m]
let o=I-e.top,s=0-e.left
switch(M){case"middle":o-=i/2
break
case"bottom":o-=i}switch(E){case"center":s-=r/2
break
case"right":s-=r
break
case"inner":m===y-1?s-=r:m>0&&(s-=r/2)}d={left:s,top:o,width:r+e.width,height:i+e.height,color:t.backdropColor}}_.push({label:x,font:C,textOffset:I,options:{rotation:g,color:i,strokeColor:l,strokeWidth:u,textAlign:f,textBaseline:M,translation:[b,w],backdrop:d}})}return _}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options
if(-n.toRadians(this.labelRotation))return"top"===t?"left":"right"
let i="center"
return"start"===e.align?i="left":"end"===e.align?i="right":"inner"===e.align&&(i="inner"),i}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:n,padding:r}}=this.options,o=t+r,s=this._getLabelSizes().widest.width
let a,l
return"left"===e?n?(l=this.right+r,"near"===i?a="left":"center"===i?(a="center",l+=s/2):(a="right",l+=s)):(l=this.right-o,"near"===i?a="right":"center"===i?(a="center",l-=s/2):(a="left",l=this.left)):"right"===e?n?(l=this.left+r,"near"===i?a="right":"center"===i?(a="center",l-=s/2):(a="left",l-=s)):(l=this.left+o,"near"===i?a="left":"center"===i?(a="center",l+=s/2):(a="right",l=this.right)):a="right",{textAlign:a,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return
const t=this.chart,e=this.options.position
return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:n,width:r,height:o}=this
e&&(t.save(),t.fillStyle=e,t.fillRect(i,n,r,o),t.restore())}getLineWidthForValue(t){const e=this.options.grid
if(!this._isVisible()||!e.display)return 0
const i=this.ticks.findIndex((e=>e.value===t))
return i>=0?e.setContext(this.getContext(i)).lineWidth:0}drawGrid(t){const e=this.options.grid,i=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t))
let r,o
const s=(t,e,n)=>{n.width&&n.color&&(i.save(),i.lineWidth=n.width,i.strokeStyle=n.color,i.setLineDash(n.borderDash||[]),i.lineDashOffset=n.borderDashOffset,i.beginPath(),i.moveTo(t.x,t.y),i.lineTo(e.x,e.y),i.stroke(),i.restore())}
if(e.display)for(r=0,o=n.length;r<o;++r){const t=n[r]
e.drawOnChartArea&&s({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},t),e.drawTicks&&s({x:t.tx1,y:t.ty1},{x:t.tx2,y:t.ty2},{color:t.tickColor,width:t.tickWidth,borderDash:t.tickBorderDash,borderDashOffset:t.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:i,grid:r}}=this,o=i.setContext(this.getContext()),s=i.display?o.width:0
if(!s)return
const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue
let h,u,c,d
this.isHorizontal()?(h=n._alignPixel(t,this.left,s)-s/2,u=n._alignPixel(t,this.right,a)+a/2,c=d=l):(c=n._alignPixel(t,this.top,s)-s/2,d=n._alignPixel(t,this.bottom,a)+a/2,h=u=l),e.save(),e.lineWidth=o.width,e.strokeStyle=o.color,e.beginPath(),e.moveTo(h,c),e.lineTo(u,d),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return
const e=this.ctx,i=this._computeLabelArea()
i&&n.clipArea(e,i)
const r=this.getLabelItems(t)
for(const o of r){const t=o.options,i=o.font,r=o.label,s=o.textOffset
n.renderText(e,r,0,s,i,t)}i&&n.unclipArea(e)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:r}}=this
if(!i.display)return
const o=n.toFont(i.font),s=n.toPadding(i.padding),a=i.align
let l=o.lineHeight/2
"bottom"===e||"center"===e||n.isObject(e)?(l+=s.bottom,n.isArray(i.text)&&(l+=o.lineHeight*(i.text.length-1))):l+=s.top
const{titleX:h,titleY:u,maxWidth:c,rotation:d}=function(t,e,i,r){const{top:o,left:s,bottom:a,right:l,chart:h}=t,{chartArea:u,scales:c}=h
let d,f,p,g=0
const _=a-o,m=l-s
if(t.isHorizontal()){if(f=n._alignStartEnd(r,s,l),n.isObject(i)){const t=Object.keys(i)[0],n=i[t]
p=c[t].getPixelForValue(n)+_-e}else p="center"===i?(u.bottom+u.top)/2+_-e:Ct(t,i,e)
d=l-s}else{if(n.isObject(i)){const t=Object.keys(i)[0],n=i[t]
f=c[t].getPixelForValue(n)-m+e}else f="center"===i?(u.left+u.right)/2-m+e:Ct(t,i,e)
p=n._alignStartEnd(r,a,o),g="left"===i?-n.HALF_PI:n.HALF_PI}return{titleX:f,titleY:p,maxWidth:d,rotation:g}}(this,l,e,a)
n.renderText(t,i.text,0,0,o,{color:i.color,maxWidth:c,rotation:d,textAlign:Rt(a,e,r),textBaseline:"middle",translation:[h,u]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=n.valueOrDefault(t.grid&&t.grid.z,-1),r=n.valueOrDefault(t.border&&t.border.z,0)
return this._isVisible()&&this.draw===Lt.prototype.draw?[{z:i,draw:t=>{this.drawBackground(),this.drawGrid(t),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:e,draw:t=>{this.drawLabels(t)}}]:[{z:e,draw:t=>{this.draw(t)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",n=[]
let r,o
for(r=0,o=e.length;r<o;++r){const o=e[r]
o[i]!==this.id||t&&o.type!==t||n.push(o)}return n}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t))
return n.toFont(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight
return(this.isHorizontal()?this.width:this.height)/t}}class Ot{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t)
let i;(function(t){return"id"in t&&"defaults"in t})(e)&&(i=this.register(e))
const r=this.items,o=t.id,s=this.scope+"."+o
if(!o)throw new Error("class does not have id: "+t)
return o in r||(r[o]=t,function(t,e,i){const r=n.merge(Object.create(null),[i?n.defaults.get(i):{},n.defaults.get(e),t.defaults])
n.defaults.set(e,r),t.defaultRoutes&&function(t,e){Object.keys(e).forEach((i=>{const r=i.split("."),o=r.pop(),s=[t].concat(r).join("."),a=e[i].split("."),l=a.pop(),h=a.join(".")
n.defaults.route(s,o,h,l)}))}(e,t.defaultRoutes),t.descriptors&&n.defaults.describe(e,t.descriptors)}(t,s,i),this.override&&n.defaults.override(t.id,t.overrides)),s}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,r=this.scope
i in e&&delete e[i],r&&i in n.defaults[r]&&(delete n.defaults[r][i],this.override&&delete n.overrides[i])}}var Dt=new class{constructor(){this.controllers=new Ot(x,"datasets",!0),this.elements=new Ot(Et,"elements"),this.plugins=new Ot(Object,"plugins"),this.scales=new Ot(Lt,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach((e=>{const r=i||this._getRegistryForType(e)
i||r.isForType(e)||r===this.plugins&&e.id?this._exec(t,r,e):n.each(e,(e=>{const n=i||this._getRegistryForType(e)
this._exec(t,n,e)}))}))}_exec(t,e,i){const r=n._capitalize(t)
n.callback(i["before"+r],[],i),e[t](i),n.callback(i["after"+r],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e]
if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const n=e.get(t)
if(void 0===n)throw new Error('"'+t+'" is not a registered '+i+".")
return n}}
class Nt{constructor(){this._init=[]}notify(t,e,i,n){"beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"))
const r=n?this._descriptors(t).filter(n):this._descriptors(t),o=this._notify(r,t,e,i)
return"afterDestroy"===e&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,e,i,r){r=r||{}
for(const o of t){const t=o.plugin,s=t[i],a=[e,r,o.options]
if(!1===n.callback(s,a,t)&&r.cancelable)return!1}return!0}invalidate(){n.isNullOrUndef(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache
const e=this._cache=this._createDescriptors(t)
return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,r=n.valueOrDefault(i.options&&i.options.plugins,{}),o=function(t){const e={},i=[],n=Object.keys(Dt.plugins.items)
for(let o=0;o<n.length;o++)i.push(Dt.getPlugin(n[o]))
const r=t.plugins||[]
for(let o=0;o<r.length;o++){const t=r[o];-1===i.indexOf(t)&&(i.push(t),e[t.id]=!0)}return{plugins:i,localIds:e}}(i)
return!1!==r||e?function(t,{plugins:e,localIds:i},n,r){const o=[],s=t.getContext()
for(const a of e){const e=a.id,l=Ft(n[e],r)
null!==l&&o.push({plugin:a,options:kt(t.config,{plugin:a,local:i[e]},l,s)})}return o}(t,o,r,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,n=(t,e)=>t.filter((t=>!e.some((e=>t.plugin.id===e.plugin.id))))
this._notify(n(e,i),t,"stop"),this._notify(n(i,e),t,"start")}}function Ft(t,e){return e||!1!==t?!0===t?{}:t:null}function kt(t,{plugin:e,local:i},n,r){const o=t.pluginScopeKeys(e),s=t.getOptionScopes(n,o)
return i&&e.defaults&&s.push(e.defaults),t.createResolver(s,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function zt(t,e){const i=n.defaults.datasets[t]||{}
return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||i.indexAxis||"x"}function jt(t){if("x"===t||"y"===t||"r"===t)return t}function Gt(t,...e){if(jt(t))return t
for(const n of e){const e=n.axis||("top"===(i=n.position)||"bottom"===i?"x":"left"===i||"right"===i?"y":void 0)||t.length>1&&jt(t[0].toLowerCase())
if(e)return e}var i
throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function Bt(t,e,i){if(i[e+"AxisID"]===t)return{axis:e}}function Ut(t){const e=t.options||(t.options={})
e.plugins=n.valueOrDefault(e.plugins,{}),e.scales=function(t,e){const i=n.overrides[t.type]||{scales:{}},r=e.scales||{},o=zt(t.type,e),s=Object.create(null)
return Object.keys(r).forEach((e=>{const a=r[e]
if(!n.isObject(a))return console.error(`Invalid scale configuration for scale: ${e}`)
if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${e}`)
const l=Gt(e,a,function(t,e){if(e.data&&e.data.datasets){const i=e.data.datasets.filter((e=>e.xAxisID===t||e.yAxisID===t))
if(i.length)return Bt(t,"x",i[0])||Bt(t,"y",i[0])}return{}}(e,t),n.defaults.scales[a.type]),h=function(t,e){return t===e?"_index_":"_value_"}(l,o),u=i.scales||{}
s[e]=n.mergeIf(Object.create(null),[{axis:l},a,u[l],u[h]])})),t.data.datasets.forEach((i=>{const o=i.type||t.type,a=i.indexAxis||zt(o,e),l=(n.overrides[o]||{}).scales||{}
Object.keys(l).forEach((t=>{const e=function(t,e){let i=t
return"_index_"===t?i=e:"_value_"===t&&(i="x"===e?"y":"x"),i}(t,a),o=i[e+"AxisID"]||e
s[o]=s[o]||Object.create(null),n.mergeIf(s[o],[{axis:e},r[o],l[t]])}))})),Object.keys(s).forEach((t=>{const e=s[t]
n.mergeIf(e,[n.defaults.scales[e.type],n.defaults.scale])})),s}(t,e)}function qt(t){return(t=t||{}).datasets=t.datasets||[],t.labels=t.labels||[],t}const Vt=new Map,Zt=new Set
function Wt(t,e){let i=Vt.get(t)
return i||(i=e(),Vt.set(t,i),Zt.add(i)),i}const Yt=(t,e,i)=>{const r=n.resolveObjectKey(e,i)
void 0!==r&&t.add(r)}
class Xt{constructor(t){this._config=function(t){return(t=t||{}).data=qt(t.data),Ut(t),t}(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=qt(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config
this.clearCache(),Ut(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Wt(t,(()=>[[`datasets.${t}`,""]]))}datasetAnimationScopeKeys(t,e){return Wt(`${t}.transition.${e}`,(()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]]))}datasetElementScopeKeys(t,e){return Wt(`${t}-${e}`,(()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]]))}pluginScopeKeys(t){const e=t.id
return Wt(`${this.type}-plugin-${e}`,(()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]]))}_cachedScopes(t,e){const i=this._scopeCache
let n=i.get(t)
return n&&!e||(n=new Map,i.set(t,n)),n}getOptionScopes(t,e,i){const{options:r,type:o}=this,s=this._cachedScopes(t,i),a=s.get(e)
if(a)return a
const l=new Set
e.forEach((e=>{t&&(l.add(t),e.forEach((e=>Yt(l,t,e)))),e.forEach((t=>Yt(l,r,t))),e.forEach((t=>Yt(l,n.overrides[o]||{},t))),e.forEach((t=>Yt(l,n.defaults,t))),e.forEach((t=>Yt(l,n.descriptors,t)))}))
const h=Array.from(l)
return 0===h.length&&h.push(Object.create(null)),Zt.has(e)&&s.set(e,h),h}chartOptionScopes(){const{options:t,type:e}=this
return[t,n.overrides[e]||{},n.defaults.datasets[e]||{},{type:e},n.defaults,n.descriptors]}resolveNamedOptions(t,e,i,r=[""]){const o={$shared:!0},{resolver:s,subPrefixes:a}=Ht(this._resolverCache,t,r)
let l=s
if(function(t,e){const{isScriptable:i,isIndexable:r}=n._descriptors(t)
for(const o of e){const e=i(o),s=r(o),a=(s||e)&&t[o]
if(e&&(n.isFunction(a)||$t(a))||s&&n.isArray(a))return!0}return!1}(s,e)){o.$shared=!1,i=n.isFunction(i)?i():i
const e=this.createResolver(t,i,a)
l=n._attachContext(s,i,e)}for(const n of e)o[n]=l[n]
return o}createResolver(t,e,i=[""],r){const{resolver:o}=Ht(this._resolverCache,t,i)
return n.isObject(e)?n._attachContext(o,e,void 0,r):o}}function Ht(t,e,i){let r=t.get(e)
r||(r=new Map,t.set(e,r))
const o=i.join()
let s=r.get(o)
return s||(s={resolver:n._createResolver(e,i),subPrefixes:i.filter((t=>!t.toLowerCase().includes("hover")))},r.set(o,s)),s}const $t=t=>n.isObject(t)&&Object.getOwnPropertyNames(t).some((e=>n.isFunction(t[e]))),Kt=["top","bottom","left","right","chartArea"]
function Jt(t,e){return"top"===t||"bottom"===t||-1===Kt.indexOf(t)&&"x"===e}function Qt(t,e){return function(i,n){return i[t]===n[t]?i[e]-n[e]:i[t]-n[t]}}function te(t){const e=t.chart,i=e.options.animation
e.notifyPlugins("afterRender"),n.callback(i&&i.onComplete,[t],e)}function ee(t){const e=t.chart,i=e.options.animation
n.callback(i&&i.onProgress,[t],e)}function ie(t){return n._isDomSupported()&&"string"==typeof t?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const ne={},re=t=>{const e=ie(t)
return Object.values(ne).filter((t=>t.canvas===e)).pop()}
function oe(t,e,i){const n=Object.keys(t)
for(const r of n){const n=+r
if(n>=e){const o=t[r]
delete t[r],(i>0||n>e)&&(t[n+i]=o)}}}function se(t,e,i){return t.options.clip?t[i]:e[i]}class ae{static defaults=n.defaults
static instances=ne
static overrides=n.overrides
static registry=Dt
static version="4.4.2"
static getChart=re
static register(...t){Dt.add(...t),le()}static unregister(...t){Dt.remove(...t),le()}constructor(t,e){const i=this.config=new Xt(e),o=ie(t),s=re(o)
if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.")
const a=i.createResolver(i.chartOptionScopes(),this.getContext())
this.platform=new(i.platform||wt(o)),this.platform.updateConfig(i)
const l=this.platform.acquireContext(o,a.aspectRatio),h=l&&l.canvas,u=h&&h.height,c=h&&h.width
this.id=n.uid(),this.ctx=l,this.canvas=h,this.width=c,this.height=u,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Nt,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=n.debounce((t=>this.update(t)),a.resizeDelay||0),this._dataChanges=[],ne[this.id]=this,l&&h?(r.listen(this,"complete",te),r.listen(this,"progress",ee),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:r,_aspectRatio:o}=this
return n.isNullOrUndef(t)?e&&o?o:r?i/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Dt}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():n.retinaScale(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return n.clearCanvas(this.canvas,this.ctx),this}stop(){return r.stop(this),this}resize(t,e){r.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,r=this.canvas,o=i.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(r,t,e,o),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach"
this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,n.retinaScale(this,a,!0)&&(this.notifyPlugins("resize",{size:s}),n.callback(i.onResize,[this,s],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{}
n.each(t,((t,e)=>{t.id=e}))}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,r=Object.keys(i).reduce(((t,e)=>(t[e]=!1,t)),{})
let o=[]
e&&(o=o.concat(Object.keys(e).map((t=>{const i=e[t],n=Gt(t,i),r="r"===n,o="x"===n
return{options:i,dposition:r?"chartArea":o?"bottom":"left",dtype:r?"radialLinear":o?"category":"linear"}})))),n.each(o,(e=>{const o=e.options,s=o.id,a=Gt(s,o),l=n.valueOrDefault(o.type,e.dtype)
void 0!==o.position&&Jt(o.position,a)===Jt(e.dposition)||(o.position=e.dposition),r[s]=!0
let h=null
s in i&&i[s].type===l?h=i[s]:(h=new(Dt.getScale(l))({id:s,type:l,ctx:this.ctx,chart:this}),i[h.id]=h),h.init(o,t)})),n.each(r,((t,e)=>{t||delete i[e]})),n.each(i,(t=>{rt.configure(this,t,t.options),rt.addBox(this,t)}))}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length
if(t.sort(((t,e)=>t.index-e.index)),i>e){for(let t=e;t<i;++t)this._destroyDatasetMeta(t)
t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(Qt("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this
t.length>e.length&&delete this._stacks,t.forEach(((t,i)=>{0===e.filter((e=>e===t._dataset)).length&&this._destroyDatasetMeta(i)}))}buildOrUpdateControllers(){const t=[],e=this.data.datasets
let i,r
for(this._removeUnreferencedMetasets(),i=0,r=e.length;i<r;i++){const r=e[i]
let o=this.getDatasetMeta(i)
const s=r.type||this.config.type
if(o.type&&o.type!==s&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=s,o.indexAxis=r.indexAxis||zt(s,this.options),o.order=r.order||0,o.index=i,o.label=""+r.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales()
else{const e=Dt.getController(s),{datasetElementType:r,dataElementType:a}=n.defaults.datasets[s]
Object.assign(e,{dataElementType:Dt.getElement(a),datasetElementType:r&&Dt.getElement(r)}),o.controller=new e(this,i),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){n.each(this.data.datasets,((t,e)=>{this.getDatasetMeta(e).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config
e.update()
const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation
if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return
const o=this.buildOrUpdateControllers()
this.notifyPlugins("beforeElementsUpdate")
let s=0
for(let n=0,h=this.data.datasets.length;n<h;n++){const{controller:t}=this.getDatasetMeta(n),e=!r&&-1===o.indexOf(t)
t.buildOrUpdateElements(e),s=Math.max(+t.getMaxOverflow(),s)}s=this._minPadding=i.layout.autoPadding?s:0,this._updateLayout(s),r||n.each(o,(t=>{t.reset()})),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Qt("z","_idx"))
const{_active:a,_lastEvent:l}=this
l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){n.each(this.scales,(t=>{rt.removeBox(this,t)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events)
n.setsEqual(e,i)&&!!this._responsiveListeners===t.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[]
for(const{method:i,start:n,count:r}of e)oe(t,n,"_removeElements"===i?-r:r)}_getUniformDataChanges(){const t=this._dataChanges
if(!t||!t.length)return
this._dataChanges=[]
const e=this.data.datasets.length,i=e=>new Set(t.filter((t=>t[0]===e)).map(((t,e)=>e+","+t.splice(1).join(",")))),r=i(0)
for(let o=1;o<e;o++)if(!n.setsEqual(r,i(o)))return
return Array.from(r).map((t=>t.split(","))).map((t=>({method:t[1],start:+t[2],count:+t[3]})))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return
rt.update(this,this.width,this.height,t)
const e=this.chartArea,i=e.width<=0||e.height<=0
this._layers=[],n.each(this.boxes,(t=>{i&&"chartArea"===t.position||(t.configure&&t.configure(),this._layers.push(...t._layers()))}),this),this._layers.forEach(((t,e)=>{t._idx=e})),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let t=0,e=this.data.datasets.length;t<e;++t)this.getDatasetMeta(t).controller.configure()
for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,n.isFunction(t)?t({datasetIndex:e}):t)
this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),n={meta:i,index:t,mode:e,cancelable:!0}
!1!==this.notifyPlugins("beforeDatasetUpdate",n)&&(i.controller._update(e),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(r.has(this)?this.attached&&!r.running(this)&&r.start(this):(this.draw(),te({chart:this})))}draw(){let t
if(this._resizeBeforeDraw){const{width:t,height:e}=this._resizeBeforeDraw
this._resize(t,e),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0)return
if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return
const e=this._layers
for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea)
for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea)
this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[]
let n,r
for(n=0,r=e.length;n<r;++n){const r=e[n]
t&&!r.visible||i.push(r)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return
const t=this.getSortedVisibleDatasetMetas()
for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e])
this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i=t._clip,r=!i.disabled,o=function(t,e){const{xScale:i,yScale:n}=t
return i&&n?{left:se(i,e,"left"),right:se(i,e,"right"),top:se(n,e,"top"),bottom:se(n,e,"bottom")}:e}(t,this.chartArea),s={meta:t,index:t.index,cancelable:!0}
!1!==this.notifyPlugins("beforeDatasetDraw",s)&&(r&&n.clipArea(e,{left:!1===i.left?0:o.left-i.left,right:!1===i.right?this.width:o.right+i.right,top:!1===i.top?0:o.top-i.top,bottom:!1===i.bottom?this.height:o.bottom+i.bottom}),t.controller.draw(),r&&n.unclipArea(e),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(t){return n._isPointInArea(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,n){const r=W.modes[e]
return"function"==typeof r?r(this,t,i,n):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets
let n=i.filter((t=>t&&t._dataset===e)).pop()
return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(n)),n}getContext(){return this.$context||(this.$context=n.createContext(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t]
if(!e)return!1
const i=this.getDatasetMeta(t)
return"boolean"==typeof i.hidden?!i.hidden:!e.hidden}setDatasetVisibility(t,e){this.getDatasetMeta(t).hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const r=i?"show":"hide",o=this.getDatasetMeta(t),s=o.controller._resolveAnimations(void 0,r)
n.defined(e)?(o.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),s.update(o,{visible:i}),this.update((e=>e.datasetIndex===t?r:void 0)))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t]
e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e
for(this.stop(),r.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy")
const{canvas:t,ctx:e}=this
this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),n.clearCanvas(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete ne[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(i,n)=>{e.addEventListener(this,i,n),t[i]=n},r=(t,e,i)=>{t.offsetX=e,t.offsetY=i,this._eventHandler(t)}
n.each(this.options.events,(t=>i(t,r)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={})
const t=this._responsiveListeners,e=this.platform,i=(i,n)=>{e.addEventListener(this,i,n),t[i]=n},n=(i,n)=>{t[i]&&(e.removeEventListener(this,i,n),delete t[i])},r=(t,e)=>{this.canvas&&this.resize(t,e)}
let o
const s=()=>{n("attach",s),this.attached=!0,this.resize(),i("resize",r),i("detach",o)}
o=()=>{this.attached=!1,n("resize",r),this._stop(),this._resize(0,0),i("attach",s)},e.isAttached(this.canvas)?s():o()}unbindEvents(){n.each(this._listeners,((t,e)=>{this.platform.removeEventListener(this,e,t)})),this._listeners={},n.each(this._responsiveListeners,((t,e)=>{this.platform.removeEventListener(this,e,t)})),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const n=i?"set":"remove"
let r,o,s,a
for("dataset"===e&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+n+"DatasetHoverStyle"]()),s=0,a=t.length;s<a;++s){o=t[s]
const e=o&&this.getDatasetMeta(o.datasetIndex).controller
e&&e[n+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map((({datasetIndex:t,index:e})=>{const i=this.getDatasetMeta(t)
if(!i)throw new Error("No dataset found at index "+t)
return{datasetIndex:t,element:i.data[e],index:e}}))
!n._elementsEqual(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return 1===this._plugins._cache.filter((e=>e.plugin.id===t)).length}_updateHoverStyles(t,e,i){const n=this.options.hover,r=(t,e)=>t.filter((t=>!e.some((e=>t.datasetIndex===e.datasetIndex&&t.index===e.index)))),o=r(e,t),s=i?t:r(t,e)
o.length&&this.updateHoverStyle(o,n.mode,!1),s.length&&n.mode&&this.updateHoverStyle(s,n.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},n=e=>(e.options.events||this.options.events).includes(t.native.type)
if(!1===this.notifyPlugins("beforeEvent",i,n))return
const r=this._handleEvent(t,e,i.inChartArea)
return i.cancelable=!1,this.notifyPlugins("afterEvent",i,n),(r||i.changed)&&this.render(),this}_handleEvent(t,e,i){const{_active:r=[],options:o}=this,s=e,a=this._getActiveElements(t,r,i,s),l=n._isClickEvent(t),h=function(t,e,i,n){return i&&"mouseout"!==t.type?n?e:t:null}(t,this._lastEvent,i,l)
i&&(this._lastEvent=null,n.callback(o.onHover,[t,a,this],this),l&&n.callback(o.onClick,[t,a,this],this))
const u=!n._elementsEqual(a,r)
return(u||e)&&(this._active=a,this._updateHoverStyles(a,r,e)),this._lastEvent=h,u}_getActiveElements(t,e,i,n){if("mouseout"===t.type)return[]
if(!i)return e
const r=this.options.hover
return this.getElementsAtEventForMode(t,r.mode,r,n)}}function le(){return n.each(ae.instances,(t=>t._plugins.invalidate()))}function he(t,e,i,n){return{x:i+t*Math.cos(e),y:n+t*Math.sin(e)}}function ue(t,e,i,r,o,s){const{x:a,y:l,startAngle:h,pixelMargin:u,innerRadius:c}=e,d=Math.max(e.outerRadius+r+i-u,0),f=c>0?c+r+i+u:0
let p=0
const g=o-h
if(r){const t=((c>0?c-r:0)+(d>0?d-r:0))/2
p=(g-(0!==t?g*t/(t+r):g))/2}const _=(g-Math.max(.001,g*d-i/n.PI)/d)/2,m=h+_+p,y=o-_-p,{outerStart:v,outerEnd:x,innerStart:b,innerEnd:w}=function(t,e,i,r){const o=(s=t.options.borderRadius,n._readValueToProps(s,["outerStart","outerEnd","innerStart","innerEnd"]))
var s
const a=(i-e)/2,l=Math.min(a,r*e/2),h=t=>{const e=(i-Math.min(a,t))*r/2
return n._limitValue(t,0,Math.min(a,e))}
return{outerStart:h(o.outerStart),outerEnd:h(o.outerEnd),innerStart:n._limitValue(o.innerStart,0,l),innerEnd:n._limitValue(o.innerEnd,0,l)}}(e,f,d,y-m),E=d-v,S=d-x,C=m+v/E,P=y-x/S,T=f+b,I=f+w,M=m+b/T,A=y-w/I
if(t.beginPath(),s){const e=(C+P)/2
if(t.arc(a,l,d,C,e),t.arc(a,l,d,e,P),x>0){const e=he(S,P,a,l)
t.arc(e.x,e.y,x,P,y+n.HALF_PI)}const i=he(I,y,a,l)
if(t.lineTo(i.x,i.y),w>0){const e=he(I,A,a,l)
t.arc(e.x,e.y,w,y+n.HALF_PI,A+Math.PI)}const r=(y-w/f+(m+b/f))/2
if(t.arc(a,l,f,y-w/f,r,!0),t.arc(a,l,f,r,m+b/f,!0),b>0){const e=he(T,M,a,l)
t.arc(e.x,e.y,b,M+Math.PI,m-n.HALF_PI)}const o=he(E,m,a,l)
if(t.lineTo(o.x,o.y),v>0){const e=he(E,C,a,l)
t.arc(e.x,e.y,v,m-n.HALF_PI,C)}}else{t.moveTo(a,l)
const e=Math.cos(C)*d+a,i=Math.sin(C)*d+l
t.lineTo(e,i)
const n=Math.cos(P)*d+a,r=Math.sin(P)*d+l
t.lineTo(n,r)}t.closePath()}class ce extends Et{static id="arc"
static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}
static defaultRoutes={backgroundColor:"backgroundColor"}
static descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t}
circumference
endAngle
fullCircles
innerRadius
outerRadius
pixelMargin
startAngle
constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,i){const r=this.getProps(["x","y"],i),{angle:o,distance:s}=n.getAngleFromPoint(r,{x:t,y:e}),{startAngle:a,endAngle:l,innerRadius:h,outerRadius:u,circumference:c}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),d=(this.options.spacing+this.options.borderWidth)/2,f=n.valueOrDefault(c,l-a)>=n.TAU||n._angleBetween(o,a,l),p=n._isBetween(s,h+d,u+d)
return f&&p}getCenterPoint(t){const{x:e,y:i,startAngle:n,endAngle:r,innerRadius:o,outerRadius:s}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:a,spacing:l}=this.options,h=(n+r)/2,u=(o+s+l+a)/2
return{x:e+Math.cos(h)*u,y:i+Math.sin(h)*u}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:i}=this,r=(e.offset||0)/4,o=(e.spacing||0)/2,s=e.circular
if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=i>n.TAU?Math.floor(i/n.TAU):0,0===i||this.innerRadius<0||this.outerRadius<0)return
t.save()
const a=(this.startAngle+this.endAngle)/2
t.translate(Math.cos(a)*r,Math.sin(a)*r)
const l=r*(1-Math.sin(Math.min(n.PI,i||0)))
t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,function(t,e,i,r,o){const{fullCircles:s,startAngle:a,circumference:l}=e
let h=e.endAngle
if(s){ue(t,e,i,r,h,o)
for(let e=0;e<s;++e)t.fill()
isNaN(l)||(h=a+(l%n.TAU||n.TAU))}ue(t,e,i,r,h,o),t.fill()}(t,this,l,o,s),function(t,e,i,r,o){const{fullCircles:s,startAngle:a,circumference:l,options:h}=e,{borderWidth:u,borderJoinStyle:c,borderDash:d,borderDashOffset:f}=h,p="inner"===h.borderAlign
if(!u)return
t.setLineDash(d||[]),t.lineDashOffset=f,p?(t.lineWidth=2*u,t.lineJoin=c||"round"):(t.lineWidth=u,t.lineJoin=c||"bevel")
let g=e.endAngle
if(s){ue(t,e,i,r,g,o)
for(let e=0;e<s;++e)t.stroke()
isNaN(l)||(g=a+(l%n.TAU||n.TAU))}p&&function(t,e,i){const{startAngle:r,pixelMargin:o,x:s,y:a,outerRadius:l,innerRadius:h}=e
let u=o/l
t.beginPath(),t.arc(s,a,l,r-u,i+u),h>o?(u=o/h,t.arc(s,a,h,i+u,r-u,!0)):t.arc(s,a,o,i+n.HALF_PI,r-n.HALF_PI),t.closePath(),t.clip()}(t,e,g),s||(ue(t,e,i,r,g,o),t.stroke())}(t,this,l,o,s),t.restore()}}function de(t,e,i=e){t.lineCap=n.valueOrDefault(i.borderCapStyle,e.borderCapStyle),t.setLineDash(n.valueOrDefault(i.borderDash,e.borderDash)),t.lineDashOffset=n.valueOrDefault(i.borderDashOffset,e.borderDashOffset),t.lineJoin=n.valueOrDefault(i.borderJoinStyle,e.borderJoinStyle),t.lineWidth=n.valueOrDefault(i.borderWidth,e.borderWidth),t.strokeStyle=n.valueOrDefault(i.borderColor,e.borderColor)}function fe(t,e,i){t.lineTo(i.x,i.y)}function pe(t,e,i={}){const n=t.length,{start:r=0,end:o=n-1}=i,{start:s,end:a}=e,l=Math.max(r,s),h=Math.min(o,a),u=r<s&&o<s||r>a&&o>a
return{count:n,start:l,loop:e.loop,ilen:h<l&&!u?n+h-l:h-l}}function ge(t,e,i,r){const{points:o,options:s}=e,{count:a,start:l,loop:h,ilen:u}=pe(o,i,r),c=function(t){return t.stepped?n._steppedLineTo:t.tension||"monotone"===t.cubicInterpolationMode?n._bezierCurveTo:fe}(s)
let d,f,p,{move:g=!0,reverse:_}=r||{}
for(d=0;d<=u;++d)f=o[(l+(_?u-d:d))%a],f.skip||(g?(t.moveTo(f.x,f.y),g=!1):c(t,p,f,_,s.stepped),p=f)
return h&&(f=o[(l+(_?u:0))%a],c(t,p,f,_,s.stepped)),!!h}function _e(t,e,i,n){const r=e.points,{count:o,start:s,ilen:a}=pe(r,i,n),{move:l=!0,reverse:h}=n||{}
let u,c,d,f,p,g,_=0,m=0
const y=t=>(s+(h?a-t:t))%o,v=()=>{f!==p&&(t.lineTo(_,p),t.lineTo(_,f),t.lineTo(_,g))}
for(l&&(c=r[y(0)],t.moveTo(c.x,c.y)),u=0;u<=a;++u){if(c=r[y(u)],c.skip)continue
const e=c.x,i=c.y,n=0|e
n===d?(i<f?f=i:i>p&&(p=i),_=(m*_+e)/++m):(v(),t.lineTo(e,i),d=n,m=0,f=p=i),g=i}v()}function me(t){const e=t.options,i=e.borderDash&&e.borderDash.length
return t._decimated||t._loop||e.tension||"monotone"===e.cubicInterpolationMode||e.stepped||i?ge:_e}const ye="function"==typeof Path2D
class ve extends Et{static id="line"
static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}
static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"}
static descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t}
constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const i=this.options
if((i.tension||"monotone"===i.cubicInterpolationMode)&&!i.stepped&&!this._pointsUpdated){const r=i.spanGaps?this._loop:this._fullLoop
n._updateBezierControlPoints(this._points,i,t,r,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=n._computeSegments(this,this.options.segment))}first(){const t=this.segments,e=this.points
return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,i=t.length
return i&&e[t[i-1].end]}interpolate(t,e){const i=this.options,r=t[e],o=this.points,s=n._boundSegments(this,{property:e,start:r,end:r})
if(!s.length)return
const a=[],l=function(t){return t.stepped?n._steppedInterpolation:t.tension||"monotone"===t.cubicInterpolationMode?n._bezierInterpolation:n._pointInLine}(i)
let h,u
for(h=0,u=s.length;h<u;++h){const{start:n,end:u}=s[h],c=o[n],d=o[u]
if(c===d){a.push(c)
continue}const f=l(c,d,Math.abs((r-c[e])/(d[e]-c[e])),i.stepped)
f[e]=t[e],a.push(f)}return 1===a.length?a[0]:a}pathSegment(t,e,i){return me(this)(t,this,e,i)}path(t,e,i){const n=this.segments,r=me(this)
let o=this._loop
e=e||0,i=i||this.points.length-e
for(const s of n)o&=r(t,this,s,{start:e,end:e+i-1})
return!!o}draw(t,e,i,n){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(t.save(),function(t,e,i,n){ye&&!e.options.segment?function(t,e,i,n){let r=e._path
r||(r=e._path=new Path2D,e.path(r,i,n)&&r.closePath()),de(t,e.options),t.stroke(r)}(t,e,i,n):function(t,e,i,n){const{segments:r,options:o}=e,s=me(e)
for(const a of r)de(t,o,a.style),t.beginPath(),s(t,e,a,{start:i,end:i+n-1})&&t.closePath(),t.stroke()}(t,e,i,n)}(t,this,i,n),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function xe(t,e,i,n){const r=t.options,{[i]:o}=t.getProps([i],n)
return Math.abs(e-o)<r.radius+r.hitRadius}class be extends Et{static id="point"
parsed
skip
stop
static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}
static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"}
constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,i){const n=this.options,{x:r,y:o}=this.getProps(["x","y"],i)
return Math.pow(t-r,2)+Math.pow(e-o,2)<Math.pow(n.hitRadius+n.radius,2)}inXRange(t,e){return xe(this,t,"x",e)}inYRange(t,e){return xe(this,t,"y",e)}getCenterPoint(t){const{x:e,y:i}=this.getProps(["x","y"],t)
return{x:e,y:i}}size(t){let e=(t=t||this.options||{}).radius||0
return e=Math.max(e,e&&t.hoverRadius||0),2*(e+(e&&t.borderWidth||0))}draw(t,e){const i=this.options
this.skip||i.radius<.1||!n._isPointInArea(this,e,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,n.drawPoint(t,i,this.x,this.y))}getRange(){const t=this.options||{}
return t.radius+t.hitRadius}}function we(t,e){const{x:i,y:n,base:r,width:o,height:s}=t.getProps(["x","y","base","width","height"],e)
let a,l,h,u,c
return t.horizontal?(c=s/2,a=Math.min(i,r),l=Math.max(i,r),h=n-c,u=n+c):(c=o/2,a=i-c,l=i+c,h=Math.min(n,r),u=Math.max(n,r)),{left:a,top:h,right:l,bottom:u}}function Ee(t,e,i,r){return t?0:n._limitValue(e,i,r)}function Se(t,e,i,r){const o=null===e,s=null===i,a=t&&!(o&&s)&&we(t,r)
return a&&(o||n._isBetween(e,a.left,a.right))&&(s||n._isBetween(i,a.top,a.bottom))}function Ce(t,e){t.rect(e.x,e.y,e.w,e.h)}function Pe(t,e,i={}){const n=t.x!==i.x?-e:0,r=t.y!==i.y?-e:0,o=(t.x+t.w!==i.x+i.w?e:0)-n,s=(t.y+t.h!==i.y+i.h?e:0)-r
return{x:t.x+n,y:t.y+r,w:t.w+o,h:t.h+s,radius:t.radius}}class Te extends Et{static id="bar"
static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}
static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"}
constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:i,backgroundColor:r}}=this,{inner:o,outer:s}=function(t){const e=we(t),i=e.right-e.left,r=e.bottom-e.top,o=function(t,e,i){const r=t.options.borderWidth,o=t.borderSkipped,s=n.toTRBL(r)
return{t:Ee(o.top,s.top,0,i),r:Ee(o.right,s.right,0,e),b:Ee(o.bottom,s.bottom,0,i),l:Ee(o.left,s.left,0,e)}}(t,i/2,r/2),s=function(t,e,i){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),o=t.options.borderRadius,s=n.toTRBLCorners(o),a=Math.min(e,i),l=t.borderSkipped,h=r||n.isObject(o)
return{topLeft:Ee(!h||l.top||l.left,s.topLeft,0,a),topRight:Ee(!h||l.top||l.right,s.topRight,0,a),bottomLeft:Ee(!h||l.bottom||l.left,s.bottomLeft,0,a),bottomRight:Ee(!h||l.bottom||l.right,s.bottomRight,0,a)}}(t,i/2,r/2)
return{outer:{x:e.left,y:e.top,w:i,h:r,radius:s},inner:{x:e.left+o.l,y:e.top+o.t,w:i-o.l-o.r,h:r-o.t-o.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(o.t,o.l)),topRight:Math.max(0,s.topRight-Math.max(o.t,o.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(o.b,o.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(o.b,o.r))}}}}(this),a=(l=s.radius).topLeft||l.topRight||l.bottomLeft||l.bottomRight?n.addRoundedRectPath:Ce
var l
t.save(),s.w===o.w&&s.h===o.h||(t.beginPath(),a(t,Pe(s,e,o)),t.clip(),a(t,Pe(o,-e,s)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),a(t,Pe(o,e)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,e,i){return Se(this,t,e,i)}inXRange(t,e){return Se(this,t,null,e)}inYRange(t,e){return Se(this,null,t,e)}getCenterPoint(t){const{x:e,y:i,base:n,horizontal:r}=this.getProps(["x","y","base","horizontal"],t)
return{x:r?(e+n)/2:e,y:r?i:(i+n)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}}var Ie=Object.freeze({__proto__:null,ArcElement:ce,BarElement:Te,LineElement:ve,PointElement:be})
const Me=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Ae=Me.map((t=>t.replace("rgb(","rgba(").replace(")",", 0.5)")))
function Re(t){return Me[t%Me.length]}function Le(t){return Ae[t%Ae.length]}function Oe(t){let e
for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0
return!1}var De={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,i){if(!i.enabled)return
const{data:{datasets:n},options:r}=t.config,{elements:o}=r
if(!i.forceOverride&&(Oe(n)||(s=r)&&(s.borderColor||s.backgroundColor)||o&&Oe(o)))return
var s
const a=function(t){let e=0
return(i,n)=>{const r=t.getDatasetMeta(n).controller
r instanceof R?e=function(t,e){return t.backgroundColor=t.data.map((()=>Re(e++))),e}(i,e):r instanceof O?e=function(t,e){return t.backgroundColor=t.data.map((()=>Le(e++))),e}(i,e):r&&(e=function(t,e){return t.borderColor=Re(e),t.backgroundColor=Le(e),++e}(i,e))}}(t)
n.forEach(a)}}
function Ne(t){if(t._decimated){const e=t._data
delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function Fe(t){t.data.datasets.forEach((t=>{Ne(t)}))}var ke={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,i)=>{if(!i.enabled)return void Fe(t)
const r=t.width
t.data.datasets.forEach(((e,o)=>{const{_data:s,indexAxis:a}=e,l=t.getDatasetMeta(o),h=s||e.data
if("y"===n.resolve([a,t.options.indexAxis]))return
if(!l.controller.supportsDecimation)return
const u=t.scales[l.xAxisID]
if("linear"!==u.type&&"time"!==u.type)return
if(t.options.parsing)return
let c,{start:d,count:f}=function(t,e){const i=e.length
let r,o=0
const{iScale:s}=t,{min:a,max:l,minDefined:h,maxDefined:u}=s.getUserBounds()
return h&&(o=n._limitValue(n._lookupByKey(e,s.axis,a).lo,0,i-1)),r=u?n._limitValue(n._lookupByKey(e,s.axis,l).hi+1,o,i)-o:i-o,{start:o,count:r}}(l,h)
if(f<=(i.threshold||4*r))Ne(e)
else{switch(n.isNullOrUndef(s)&&(e._data=h,delete e.data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(t){this._data=t}})),i.algorithm){case"lttb":c=function(t,e,i,n,r){const o=r.samples||n
if(o>=i)return t.slice(e,e+i)
const s=[],a=(i-2)/(o-2)
let l=0
const h=e+i-1
let u,c,d,f,p,g=e
for(s[l++]=t[g],u=0;u<o-2;u++){let n,r=0,o=0
const h=Math.floor((u+1)*a)+1+e,_=Math.min(Math.floor((u+2)*a)+1,i)+e,m=_-h
for(n=h;n<_;n++)r+=t[n].x,o+=t[n].y
r/=m,o/=m
const y=Math.floor(u*a)+1+e,v=Math.min(Math.floor((u+1)*a)+1,i)+e,{x:x,y:b}=t[g]
for(d=f=-1,n=y;n<v;n++)f=.5*Math.abs((x-r)*(t[n].y-b)-(x-t[n].x)*(o-b)),f>d&&(d=f,c=t[n],p=n)
s[l++]=c,g=p}return s[l++]=t[h],s}(h,d,f,r,i)
break
case"min-max":c=function(t,e,i,r){let o,s,a,l,h,u,c,d,f,p,g=0,_=0
const m=[],y=e+i-1,v=t[e].x,x=t[y].x-v
for(o=e;o<e+i;++o){s=t[o],a=(s.x-v)/x*r,l=s.y
const e=0|a
if(e===h)l<f?(f=l,u=o):l>p&&(p=l,c=o),g=(_*g+s.x)/++_
else{const i=o-1
if(!n.isNullOrUndef(u)&&!n.isNullOrUndef(c)){const e=Math.min(u,c),n=Math.max(u,c)
e!==d&&e!==i&&m.push({...t[e],x:g}),n!==d&&n!==i&&m.push({...t[n],x:g})}o>0&&i!==d&&m.push(t[i]),m.push(s),h=e,_=0,f=p=l,u=c=d=o}}return m}(h,d,f,r)
break
default:throw new Error(`Unsupported decimation algorithm '${i.algorithm}'`)}e._decimated=c}}))},destroy(t){Fe(t)}}
function ze(t,e,i,r){if(r)return
let o=e[t],s=i[t]
return"angle"===t&&(o=n._normalizeAngle(o),s=n._normalizeAngle(s)),{property:t,start:o,end:s}}function je(t,e,i){for(;e>t;e--){const t=i[e]
if(!isNaN(t.x)&&!isNaN(t.y))break}return e}function Ge(t,e,i,n){return t&&e?n(t[i],e[i]):t?t[i]:e?e[i]:0}function Be(t,e){let i=[],r=!1
return n.isArray(t)?(r=!0,i=t):i=function(t,e){const{x:i=null,y:n=null}=t||{},r=e.points,o=[]
return e.segments.forEach((({start:t,end:e})=>{e=je(t,e,r)
const s=r[t],a=r[e]
null!==n?(o.push({x:s.x,y:n}),o.push({x:a.x,y:n})):null!==i&&(o.push({x:i,y:s.y}),o.push({x:i,y:a.y}))})),o}(t,e),i.length?new ve({points:i,options:{tension:0},_loop:r,_fullLoop:r}):null}function Ue(t){return t&&!1!==t.fill}function qe(t,e,i){let r=t[e].fill
const o=[e]
let s
if(!i)return r
for(;!1!==r&&-1===o.indexOf(r);){if(!n.isNumberFinite(r))return r
if(s=t[r],!s)return!1
if(s.visible)return r
o.push(r),r=s.fill}return!1}function Ve(t,e,i){const r=function(t){const e=t.options,i=e.fill
let r=n.valueOrDefault(i&&i.target,i)
return void 0===r&&(r=!!e.backgroundColor),!1!==r&&null!==r&&(!0===r?"origin":r)}(t)
if(n.isObject(r))return!isNaN(r.value)&&r
let o=parseFloat(r)
return n.isNumberFinite(o)&&Math.floor(o)===o?function(t,e,i,n){return"-"!==t&&"+"!==t||(i=e+i),!(i===e||i<0||i>=n)&&i}(r[0],e,o,i):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function Ze(t,e,i){const n=[]
for(let r=0;r<i.length;r++){const o=i[r],{first:s,last:a,point:l}=We(o,e,"x")
if(!(!l||s&&a))if(s)n.unshift(l)
else if(t.push(l),!a)break}t.push(...n)}function We(t,e,i){const r=t.interpolate(e,i)
if(!r)return{}
const o=r[i],s=t.segments,a=t.points
let l=!1,h=!1
for(let u=0;u<s.length;u++){const t=s[u],e=a[t.start][i],r=a[t.end][i]
if(n._isBetween(o,e,r)){l=o===e,h=o===r
break}}return{first:l,last:h,point:r}}class Ye{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,i){const{x:r,y:o,radius:s}=this
return e=e||{start:0,end:n.TAU},t.arc(r,o,s,e.end,e.start,!0),!i.bounds}interpolate(t){const{x:e,y:i,radius:n}=this,r=t.angle
return{x:e+Math.cos(r)*n,y:i+Math.sin(r)*n,angle:r}}}function Xe(t,e,i){const r=function(t){const{chart:e,fill:i,line:r}=t
if(n.isNumberFinite(i))return function(t,e){const i=t.getDatasetMeta(e)
return i&&t.isDatasetVisible(e)?i.dataset:null}(e,i)
if("stack"===i)return function(t){const{scale:e,index:i,line:n}=t,r=[],o=n.segments,s=n.points,a=function(t,e){const i=[],n=t.getMatchingVisibleMetas("line")
for(let r=0;r<n.length;r++){const t=n[r]
if(t.index===e)break
t.hidden||i.unshift(t.dataset)}return i}(e,i)
a.push(Be({x:null,y:e.bottom},n))
for(let l=0;l<o.length;l++){const t=o[l]
for(let e=t.start;e<=t.end;e++)Ze(r,s[e],a)}return new ve({points:r,options:{}})}(t)
if("shape"===i)return!0
const o=function(t){return(t.scale||{}).getPointPositionForValue?function(t){const{scale:e,fill:i}=t,r=e.options,o=e.getLabels().length,s=r.reverse?e.max:e.min,a=function(t,e,i){let r
return r="start"===t?i:"end"===t?e.options.reverse?e.min:e.max:n.isObject(t)?t.value:e.getBaseValue(),r}(i,e,s),l=[]
if(r.grid.circular){const t=e.getPointPositionForValue(0,s)
return new Ye({x:t.x,y:t.y,radius:e.getDistanceFromCenterForValue(a)})}for(let n=0;n<o;++n)l.push(e.getPointPositionForValue(n,a))
return l}(t):function(t){const{scale:e={},fill:i}=t,r=function(t,e){let i=null
return"start"===t?i=e.bottom:"end"===t?i=e.top:n.isObject(t)?i=e.getPixelForValue(t.value):e.getBasePixel&&(i=e.getBasePixel()),i}(i,e)
if(n.isNumberFinite(r)){const t=e.isHorizontal()
return{x:t?r:null,y:t?null:r}}return null}(t)}(t)
return o instanceof Ye?o:Be(o,r)}(e),{line:o,scale:s,axis:a}=e,l=o.options,h=l.fill,u=l.backgroundColor,{above:c=u,below:d=u}=h||{}
r&&o.points.length&&(n.clipArea(t,i),function(t,e){const{line:i,target:n,above:r,below:o,area:s,scale:a}=e,l=i._loop?"angle":e.axis
t.save(),"x"===l&&o!==r&&(He(t,n,s.top),$e(t,{line:i,target:n,color:r,scale:a,property:l}),t.restore(),t.save(),He(t,n,s.bottom)),$e(t,{line:i,target:n,color:o,scale:a,property:l}),t.restore()}(t,{line:o,target:r,above:c,below:d,area:i,scale:s,axis:a}),n.unclipArea(t))}function He(t,e,i){const{segments:n,points:r}=e
let o=!0,s=!1
t.beginPath()
for(const a of n){const{start:n,end:l}=a,h=r[n],u=r[je(n,l,r)]
o?(t.moveTo(h.x,h.y),o=!1):(t.lineTo(h.x,i),t.lineTo(h.x,h.y)),s=!!e.pathSegment(t,a,{move:s}),s?t.closePath():t.lineTo(u.x,i)}t.lineTo(e.first().x,i),t.closePath(),t.clip()}function $e(t,e){const{line:i,target:r,property:o,color:s,scale:a}=e,l=function(t,e,i){const r=t.segments,o=t.points,s=e.points,a=[]
for(const l of r){let{start:t,end:r}=l
r=je(t,r,o)
const h=ze(i,o[t],o[r],l.loop)
if(!e.segments){a.push({source:l,target:h,start:o[t],end:o[r]})
continue}const u=n._boundSegments(e,h)
for(const e of u){const t=ze(i,s[e.start],s[e.end],e.loop),r=n._boundSegment(l,o,t)
for(const n of r)a.push({source:n,target:e,start:{[i]:Ge(h,t,"start",Math.max)},end:{[i]:Ge(h,t,"end",Math.min)}})}}return a}(i,r,o)
for(const{source:n,target:h,start:u,end:c}of l){const{style:{backgroundColor:e=s}={}}=n,l=!0!==r
t.save(),t.fillStyle=e,Ke(t,a,l&&ze(o,u,c)),t.beginPath()
const d=!!i.pathSegment(t,n)
let f
if(l){d?t.closePath():Je(t,r,c,o)
const e=!!r.pathSegment(t,h,{move:d,reverse:!0})
f=d&&e,f||Je(t,r,u,o)}t.closePath(),t.fill(f?"evenodd":"nonzero"),t.restore()}}function Ke(t,e,i){const{top:n,bottom:r}=e.chart.chartArea,{property:o,start:s,end:a}=i||{}
"x"===o&&(t.beginPath(),t.rect(s,n,a-s,r-n),t.clip())}function Je(t,e,i,n){const r=e.interpolate(i,n)
r&&t.lineTo(r.x,r.y)}var Qe={id:"filler",afterDatasetsUpdate(t,e,i){const n=(t.data.datasets||[]).length,r=[]
let o,s,a,l
for(s=0;s<n;++s)o=t.getDatasetMeta(s),a=o.dataset,l=null,a&&a.options&&a instanceof ve&&(l={visible:t.isDatasetVisible(s),index:s,fill:Ve(a,s,n),chart:t,axis:o.controller.options.indexAxis,scale:o.vScale,line:a}),o.$filler=l,r.push(l)
for(s=0;s<n;++s)l=r[s],l&&!1!==l.fill&&(l.fill=qe(r,s,i.propagate))},beforeDraw(t,e,i){const n="beforeDraw"===i.drawTime,r=t.getSortedVisibleDatasetMetas(),o=t.chartArea
for(let s=r.length-1;s>=0;--s){const e=r[s].$filler
e&&(e.line.updateControlPoints(o,e.axis),n&&e.fill&&Xe(t.ctx,e,o))}},beforeDatasetsDraw(t,e,i){if("beforeDatasetsDraw"!==i.drawTime)return
const n=t.getSortedVisibleDatasetMetas()
for(let r=n.length-1;r>=0;--r){const e=n[r].$filler
Ue(e)&&Xe(t.ctx,e,t.chartArea)}},beforeDatasetDraw(t,e,i){const n=e.meta.$filler
Ue(n)&&"beforeDatasetDraw"===i.drawTime&&Xe(t.ctx,n,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}}
const ti=(t,e)=>{let{boxHeight:i=e,boxWidth:n=e}=t
return t.usePointStyle&&(i=Math.min(i,e),n=t.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:i,itemHeight:Math.max(e,i)}}
class ei extends Et{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{}
let e=n.callback(t.generateLabels,[this.chart],this)||[]
t.filter&&(e=e.filter((e=>t.filter(e,this.chart.data)))),t.sort&&(e=e.sort(((e,i)=>t.sort(e,i,this.chart.data)))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this
if(!t.display)return void(this.width=this.height=0)
const i=t.labels,r=n.toFont(i.font),o=r.size,s=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=ti(i,o)
let h,u
e.font=r.string,this.isHorizontal()?(h=this.maxWidth,u=this._fitRows(s,o,a,l)+10):(u=this.maxHeight,h=this._fitCols(s,r,a,l)+10),this.width=Math.min(h,t.maxWidth||this.maxWidth),this.height=Math.min(u,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,n){const{ctx:r,maxWidth:o,options:{labels:{padding:s}}}=this,a=this.legendHitBoxes=[],l=this.lineWidths=[0],h=n+s
let u=t
r.textAlign="left",r.textBaseline="middle"
let c=-1,d=-h
return this.legendItems.forEach(((t,f)=>{const p=i+e/2+r.measureText(t.text).width;(0===f||l[l.length-1]+p+2*s>o)&&(u+=h,l[l.length-(f>0?0:1)]=0,d+=h,c++),a[f]={left:0,top:d,row:c,width:p,height:n},l[l.length-1]+=p+s})),u}_fitCols(t,e,i,n){const{ctx:r,maxHeight:o,options:{labels:{padding:s}}}=this,a=this.legendHitBoxes=[],l=this.columnSizes=[],h=o-t
let u=s,c=0,d=0,f=0,p=0
return this.legendItems.forEach(((t,o)=>{const{itemWidth:g,itemHeight:_}=function(t,e,i,n,r){const o=function(t,e,i,n){let r=t.text
return r&&"string"!=typeof r&&(r=r.reduce(((t,e)=>t.length>e.length?t:e))),e+i.size/2+n.measureText(r).width}(n,t,e,i),s=function(t,e,i){let n=t
return"string"!=typeof e.text&&(n=ii(e,i)),n}(r,n,e.lineHeight)
return{itemWidth:o,itemHeight:s}}(i,e,r,t,n)
o>0&&d+_+2*s>h&&(u+=c+s,l.push({width:c,height:d}),f+=c+s,p++,c=d=0),a[o]={left:f,top:d,col:p,width:g,height:_},c=Math.max(c,g),d+=_+s})),u+=c,l.push({width:c,height:d}),u}adjustHitBoxes(){if(!this.options.display)return
const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:r},rtl:o}}=this,s=n.getRtlAdapter(o,this.left,this.width)
if(this.isHorizontal()){let o=0,a=n._alignStartEnd(i,this.left+r,this.right-this.lineWidths[o])
for(const l of e)o!==l.row&&(o=l.row,a=n._alignStartEnd(i,this.left+r,this.right-this.lineWidths[o])),l.top+=this.top+t+r,l.left=s.leftForLtr(s.x(a),l.width),a+=l.width+r}else{let o=0,a=n._alignStartEnd(i,this.top+t+r,this.bottom-this.columnSizes[o].height)
for(const l of e)l.col!==o&&(o=l.col,a=n._alignStartEnd(i,this.top+t+r,this.bottom-this.columnSizes[o].height)),l.top=a,l.left+=this.left+r,l.left=s.leftForLtr(s.x(l.left),l.width),a+=l.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const t=this.ctx
n.clipArea(t,this),this._draw(),n.unclipArea(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:r}=this,{align:o,labels:s}=t,a=n.defaults.color,l=n.getRtlAdapter(t.rtl,this.left,this.width),h=n.toFont(s.font),{padding:u}=s,c=h.size,d=c/2
let f
this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=h.string
const{boxWidth:p,boxHeight:g,itemHeight:_}=ti(s,c),m=this.isHorizontal(),y=this._computeTitleHeight()
f=m?{x:n._alignStartEnd(o,this.left+u,this.right-i[0]),y:this.top+u+y,line:0}:{x:this.left+u,y:n._alignStartEnd(o,this.top+y+u,this.bottom-e[0].height),line:0},n.overrideTextDirection(this.ctx,t.textDirection)
const v=_+u
this.legendItems.forEach(((x,b)=>{r.strokeStyle=x.fontColor,r.fillStyle=x.fontColor
const w=r.measureText(x.text).width,E=l.textAlign(x.textAlign||(x.textAlign=s.textAlign)),S=p+d+w
let C=f.x,P=f.y
if(l.setWidth(this.width),m?b>0&&C+S+u>this.right&&(P=f.y+=v,f.line++,C=f.x=n._alignStartEnd(o,this.left+u,this.right-i[f.line])):b>0&&P+v>this.bottom&&(C=f.x=C+e[f.line].width+u,f.line++,P=f.y=n._alignStartEnd(o,this.top+y+u,this.bottom-e[f.line].height)),function(t,e,i){if(isNaN(p)||p<=0||isNaN(g)||g<0)return
r.save()
const o=n.valueOrDefault(i.lineWidth,1)
if(r.fillStyle=n.valueOrDefault(i.fillStyle,a),r.lineCap=n.valueOrDefault(i.lineCap,"butt"),r.lineDashOffset=n.valueOrDefault(i.lineDashOffset,0),r.lineJoin=n.valueOrDefault(i.lineJoin,"miter"),r.lineWidth=o,r.strokeStyle=n.valueOrDefault(i.strokeStyle,a),r.setLineDash(n.valueOrDefault(i.lineDash,[])),s.usePointStyle){const a={radius:g*Math.SQRT2/2,pointStyle:i.pointStyle,rotation:i.rotation,borderWidth:o},h=l.xPlus(t,p/2),u=e+d
n.drawPointLegend(r,a,h,u,s.pointStyleWidth&&p)}else{const s=e+Math.max((c-g)/2,0),a=l.leftForLtr(t,p),h=n.toTRBLCorners(i.borderRadius)
r.beginPath(),Object.values(h).some((t=>0!==t))?n.addRoundedRectPath(r,{x:a,y:s,w:p,h:g,radius:h}):r.rect(a,s,p,g),r.fill(),0!==o&&r.stroke()}r.restore()}(l.x(C),P,x),C=n._textX(E,C+p+d,m?C+S:this.right,t.rtl),function(t,e,i){n.renderText(r,i.text,t,e+_/2,h,{strikethrough:i.hidden,textAlign:l.textAlign(i.textAlign)})}(l.x(C),P,x),m)f.x+=S+u
else if("string"!=typeof x.text){const t=h.lineHeight
f.y+=ii(x,t)+u}else f.y+=v})),n.restoreTextDirection(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=n.toFont(e.font),r=n.toPadding(e.padding)
if(!e.display)return
const o=n.getRtlAdapter(t.rtl,this.left,this.width),s=this.ctx,a=e.position,l=i.size/2,h=r.top+l
let u,c=this.left,d=this.width
if(this.isHorizontal())d=Math.max(...this.lineWidths),u=this.top+h,c=n._alignStartEnd(t.align,c,this.right-d)
else{const e=this.columnSizes.reduce(((t,e)=>Math.max(t,e.height)),0)
u=h+n._alignStartEnd(t.align,this.top,this.bottom-e-t.labels.padding-this._computeTitleHeight())}const f=n._alignStartEnd(a,c,c+d)
s.textAlign=o.textAlign(n._toLeftRightCenter(a)),s.textBaseline="middle",s.strokeStyle=e.color,s.fillStyle=e.color,s.font=i.string,n.renderText(s,e.text,f,u,i)}_computeTitleHeight(){const t=this.options.title,e=n.toFont(t.font),i=n.toPadding(t.padding)
return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,r,o
if(n._isBetween(t,this.left,this.right)&&n._isBetween(e,this.top,this.bottom))for(o=this.legendHitBoxes,i=0;i<o.length;++i)if(r=o[i],n._isBetween(t,r.left,r.left+r.width)&&n._isBetween(e,r.top,r.top+r.height))return this.legendItems[i]
return null}handleEvent(t){const e=this.options
if(!function(t,e){return!("mousemove"!==t&&"mouseout"!==t||!e.onHover&&!e.onLeave)||!(!e.onClick||"click"!==t&&"mouseup"!==t)}(t.type,e))return
const i=this._getLegendItemAt(t.x,t.y)
if("mousemove"===t.type||"mouseout"===t.type){const s=this._hoveredItem,a=(o=i,null!==(r=s)&&null!==o&&r.datasetIndex===o.datasetIndex&&r.index===o.index)
s&&!a&&n.callback(e.onLeave,[t,s,this],this),this._hoveredItem=i,i&&!a&&n.callback(e.onHover,[t,i,this],this)}else i&&n.callback(e.onClick,[t,i,this],this)
var r,o}}function ii(t,e){return e*(t.text?t.text.length:0)}var ni={id:"legend",_element:ei,start(t,e,i){const n=t.legend=new ei({ctx:t.ctx,options:i,chart:t})
rt.configure(t,n,i),rt.addBox(t,n)},stop(t){rt.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,i){const n=t.legend
rt.configure(t,n,i),n.options=i},afterUpdate(t){const e=t.legend
e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,i){const n=e.datasetIndex,r=i.chart
r.isDatasetVisible(n)?(r.hide(n),e.hidden=!0):(r.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:i,pointStyle:r,textAlign:o,color:s,useBorderRadius:a,borderRadius:l}}=t.legend.options
return t._getSortedDatasetMetas().map((t=>{const h=t.controller.getStyle(i?0:void 0),u=n.toPadding(h.borderWidth)
return{text:e[t.index].label,fillStyle:h.backgroundColor,fontColor:s,hidden:!t.visible,lineCap:h.borderCapStyle,lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:h.borderColor,pointStyle:r||h.pointStyle,rotation:h.rotation,textAlign:o||h.textAlign,borderRadius:a&&(l||h.borderRadius),datasetIndex:t.index}}),this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}}
class ri extends Et{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const i=this.options
if(this.left=0,this.top=0,!i.display)return void(this.width=this.height=this.right=this.bottom=0)
this.width=this.right=t,this.height=this.bottom=e
const r=n.isArray(i.text)?i.text.length:1
this._padding=n.toPadding(i.padding)
const o=r*n.toFont(i.font).lineHeight+this._padding.height
this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const t=this.options.position
return"top"===t||"bottom"===t}_drawArgs(t){const{top:e,left:i,bottom:r,right:o,options:s}=this,a=s.align
let l,h,u,c=0
return this.isHorizontal()?(h=n._alignStartEnd(a,i,o),u=e+t,l=o-i):("left"===s.position?(h=i+t,u=n._alignStartEnd(a,r,e),c=-.5*n.PI):(h=o-t,u=n._alignStartEnd(a,e,r),c=.5*n.PI),l=r-e),{titleX:h,titleY:u,maxWidth:l,rotation:c}}draw(){const t=this.ctx,e=this.options
if(!e.display)return
const i=n.toFont(e.font),r=i.lineHeight/2+this._padding.top,{titleX:o,titleY:s,maxWidth:a,rotation:l}=this._drawArgs(r)
n.renderText(t,e.text,0,0,i,{color:e.color,maxWidth:a,rotation:l,textAlign:n._toLeftRightCenter(e.align),textBaseline:"middle",translation:[o,s]})}}var oi={id:"title",_element:ri,start(t,e,i){!function(t,e){const i=new ri({ctx:t.ctx,options:e,chart:t})
rt.configure(t,i,e),rt.addBox(t,i),t.titleBlock=i}(t,i)},stop(t){const e=t.titleBlock
rt.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,i){const n=t.titleBlock
rt.configure(t,n,i),n.options=i},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}}
const si=new WeakMap
var ai={id:"subtitle",start(t,e,i){const n=new ri({ctx:t.ctx,options:i,chart:t})
rt.configure(t,n,i),rt.addBox(t,n),si.set(t,n)},stop(t){rt.removeBox(t,si.get(t)),si.delete(t)},beforeUpdate(t,e,i){const n=si.get(t)
rt.configure(t,n,i),n.options=i},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}}
const li={average(t){if(!t.length)return!1
let e,i,n=new Set,r=0,o=0
for(e=0,i=t.length;e<i;++e){const i=t[e].element
if(i&&i.hasValue()){const t=i.tooltipPosition()
n.add(t.x),r+=t.y,++o}}return{x:[...n].reduce(((t,e)=>t+e))/n.size,y:r/o}},nearest(t,e){if(!t.length)return!1
let i,r,o,s=e.x,a=e.y,l=Number.POSITIVE_INFINITY
for(i=0,r=t.length;i<r;++i){const r=t[i].element
if(r&&r.hasValue()){const t=r.getCenterPoint(),i=n.distanceBetweenPoints(e,t)
i<l&&(l=i,o=r)}}if(o){const t=o.tooltipPosition()
s=t.x,a=t.y}return{x:s,y:a}}}
function hi(t,e){return e&&(n.isArray(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function ui(t){return("string"==typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function ci(t,e){const{element:i,datasetIndex:n,index:r}=e,o=t.getDatasetMeta(n).controller,{label:s,value:a}=o.getLabelAndValue(r)
return{chart:t,label:s,parsed:o.getParsed(r),raw:t.data.datasets[n].data[r],formattedValue:a,dataset:o.getDataset(),dataIndex:r,datasetIndex:n,element:i}}function di(t,e){const i=t.chart.ctx,{body:r,footer:o,title:s}=t,{boxWidth:a,boxHeight:l}=e,h=n.toFont(e.bodyFont),u=n.toFont(e.titleFont),c=n.toFont(e.footerFont),d=s.length,f=o.length,p=r.length,g=n.toPadding(e.padding)
let _=g.height,m=0,y=r.reduce(((t,e)=>t+e.before.length+e.lines.length+e.after.length),0)
y+=t.beforeBody.length+t.afterBody.length,d&&(_+=d*u.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),y&&(_+=p*(e.displayColors?Math.max(l,h.lineHeight):h.lineHeight)+(y-p)*h.lineHeight+(y-1)*e.bodySpacing),f&&(_+=e.footerMarginTop+f*c.lineHeight+(f-1)*e.footerSpacing)
let v=0
const x=function(t){m=Math.max(m,i.measureText(t).width+v)}
return i.save(),i.font=u.string,n.each(t.title,x),i.font=h.string,n.each(t.beforeBody.concat(t.afterBody),x),v=e.displayColors?a+2+e.boxPadding:0,n.each(r,(t=>{n.each(t.before,x),n.each(t.lines,x),n.each(t.after,x)})),v=0,i.font=c.string,n.each(t.footer,x),i.restore(),m+=g.width,{width:m,height:_}}function fi(t,e,i,n){const{x:r,width:o}=i,{width:s,chartArea:{left:a,right:l}}=t
let h="center"
return"center"===n?h=r<=(a+l)/2?"left":"right":r<=o/2?h="left":r>=s-o/2&&(h="right"),function(t,e,i,n){const{x:r,width:o}=n,s=i.caretSize+i.caretPadding
return"left"===t&&r+o+s>e.width||"right"===t&&r-o-s<0||void 0}(h,t,e,i)&&(h="center"),h}function pi(t,e,i){const n=i.yAlign||e.yAlign||function(t,e){const{y:i,height:n}=e
return i<n/2?"top":i>t.height-n/2?"bottom":"center"}(t,i)
return{xAlign:i.xAlign||e.xAlign||fi(t,e,i,n),yAlign:n}}function gi(t,e,i,r){const{caretSize:o,caretPadding:s,cornerRadius:a}=t,{xAlign:l,yAlign:h}=i,u=o+s,{topLeft:c,topRight:d,bottomLeft:f,bottomRight:p}=n.toTRBLCorners(a)
let g=function(t,e){let{x:i,width:n}=t
return"right"===e?i-=n:"center"===e&&(i-=n/2),i}(e,l)
const _=function(t,e,i){let{y:n,height:r}=t
return"top"===e?n+=i:n-="bottom"===e?r+i:r/2,n}(e,h,u)
return"center"===h?"left"===l?g+=u:"right"===l&&(g-=u):"left"===l?g-=Math.max(c,f)+o:"right"===l&&(g+=Math.max(d,p)+o),{x:n._limitValue(g,0,r.width-e.width),y:n._limitValue(_,0,r.height-e.height)}}function _i(t,e,i){const r=n.toPadding(i.padding)
return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-r.right:t.x+r.left}function mi(t){return hi([],ui(t))}function yi(t,e){const i=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks
return i?t.override(i):t}const vi={beforeTitle:n.noop,title(t){if(t.length>0){const e=t[0],i=e.chart.data.labels,n=i?i.length:0
if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||""
if(e.label)return e.label
if(n>0&&e.dataIndex<n)return i[e.dataIndex]}return""},afterTitle:n.noop,beforeBody:n.noop,beforeLabel:n.noop,label(t){if(this&&this.options&&"dataset"===this.options.mode)return t.label+": "+t.formattedValue||t.formattedValue
let e=t.dataset.label||""
e&&(e+=": ")
const i=t.formattedValue
return n.isNullOrUndef(i)||(e+=i),e},labelColor(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex)
return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex)
return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:n.noop,afterBody:n.noop,beforeFooter:n.noop,footer:n.noop,afterFooter:n.noop}
function xi(t,e,i,n){const r=t[e].call(i,n)
return void 0===r?vi[e].call(i,n):r}class bi extends Et{static positioners=li
constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations
if(t)return t
const e=this.chart,i=this.options.setContext(this.getContext()),n=i.enabled&&e.options.animation&&i.animations,r=new l(this.chart,n)
return n._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=(t=this.chart.getContext(),e=this._tooltipItems,n.createContext(t,{tooltip:this,tooltipItems:e,type:"tooltip"})))
var t,e}getTitle(t,e){const{callbacks:i}=e,n=xi(i,"beforeTitle",this,t),r=xi(i,"title",this,t),o=xi(i,"afterTitle",this,t)
let s=[]
return s=hi(s,ui(n)),s=hi(s,ui(r)),s=hi(s,ui(o)),s}getBeforeBody(t,e){return mi(xi(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:i}=e,r=[]
return n.each(t,(t=>{const e={before:[],lines:[],after:[]},n=yi(i,t)
hi(e.before,ui(xi(n,"beforeLabel",this,t))),hi(e.lines,xi(n,"label",this,t)),hi(e.after,ui(xi(n,"afterLabel",this,t))),r.push(e)})),r}getAfterBody(t,e){return mi(xi(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:i}=e,n=xi(i,"beforeFooter",this,t),r=xi(i,"footer",this,t),o=xi(i,"afterFooter",this,t)
let s=[]
return s=hi(s,ui(n)),s=hi(s,ui(r)),s=hi(s,ui(o)),s}_createItems(t){const e=this._active,i=this.chart.data,r=[],o=[],s=[]
let a,l,h=[]
for(a=0,l=e.length;a<l;++a)h.push(ci(this.chart,e[a]))
return t.filter&&(h=h.filter(((e,n,r)=>t.filter(e,n,r,i)))),t.itemSort&&(h=h.sort(((e,n)=>t.itemSort(e,n,i)))),n.each(h,(e=>{const i=yi(t.callbacks,e)
r.push(xi(i,"labelColor",this,e)),o.push(xi(i,"labelPointStyle",this,e)),s.push(xi(i,"labelTextColor",this,e))})),this.labelColors=r,this.labelPointStyles=o,this.labelTextColors=s,this.dataPoints=h,h}update(t,e){const i=this.options.setContext(this.getContext()),n=this._active
let r,o=[]
if(n.length){const t=li[i.position].call(this,n,this._eventPosition)
o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i)
const e=this._size=di(this,i),s=Object.assign({},t,e),a=pi(this.chart,i,s),l=gi(i,s,a,this.chart)
this.xAlign=a.xAlign,this.yAlign=a.yAlign,r={opacity:1,x:l.x,y:l.y,width:e.width,height:e.height,caretX:t.x,caretY:t.y}}else 0!==this.opacity&&(r={opacity:0})
this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,n){const r=this.getCaretPosition(t,i,n)
e.lineTo(r.x1,r.y1),e.lineTo(r.x2,r.y2),e.lineTo(r.x3,r.y3)}getCaretPosition(t,e,i){const{xAlign:r,yAlign:o}=this,{caretSize:s,cornerRadius:a}=i,{topLeft:l,topRight:h,bottomLeft:u,bottomRight:c}=n.toTRBLCorners(a),{x:d,y:f}=t,{width:p,height:g}=e
let _,m,y,v,x,b
return"center"===o?(x=f+g/2,"left"===r?(_=d,m=_-s,v=x+s,b=x-s):(_=d+p,m=_+s,v=x-s,b=x+s),y=_):(m="left"===r?d+Math.max(l,u)+s:"right"===r?d+p-Math.max(h,c)-s:this.caretX,"top"===o?(v=f,x=v-s,_=m-s,y=m+s):(v=f+g,x=v+s,_=m+s,y=m-s),b=v),{x1:_,x2:m,x3:y,y1:v,y2:x,y3:b}}drawTitle(t,e,i){const r=this.title,o=r.length
let s,a,l
if(o){const h=n.getRtlAdapter(i.rtl,this.x,this.width)
for(t.x=_i(this,i.titleAlign,i),e.textAlign=h.textAlign(i.titleAlign),e.textBaseline="middle",s=n.toFont(i.titleFont),a=i.titleSpacing,e.fillStyle=i.titleColor,e.font=s.string,l=0;l<o;++l)e.fillText(r[l],h.x(t.x),t.y+s.lineHeight/2),t.y+=s.lineHeight+a,l+1===o&&(t.y+=i.titleMarginBottom-a)}}_drawColorBox(t,e,i,r,o){const s=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:h}=o,u=n.toFont(o.bodyFont),c=_i(this,"left",o),d=r.x(c),f=l<u.lineHeight?(u.lineHeight-l)/2:0,p=e.y+f
if(o.usePointStyle){const e={radius:Math.min(h,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},i=r.leftForLtr(d,h)+h/2,u=p+l/2
t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,n.drawPoint(t,e,i,u),t.strokeStyle=s.borderColor,t.fillStyle=s.backgroundColor,n.drawPoint(t,e,i,u)}else{t.lineWidth=n.isObject(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,t.strokeStyle=s.borderColor,t.setLineDash(s.borderDash||[]),t.lineDashOffset=s.borderDashOffset||0
const e=r.leftForLtr(d,h),i=r.leftForLtr(r.xPlus(d,1),h-2),a=n.toTRBLCorners(s.borderRadius)
Object.values(a).some((t=>0!==t))?(t.beginPath(),t.fillStyle=o.multiKeyBackground,n.addRoundedRectPath(t,{x:e,y:p,w:h,h:l,radius:a}),t.fill(),t.stroke(),t.fillStyle=s.backgroundColor,t.beginPath(),n.addRoundedRectPath(t,{x:i,y:p+1,w:h-2,h:l-2,radius:a}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(e,p,h,l),t.strokeRect(e,p,h,l),t.fillStyle=s.backgroundColor,t.fillRect(i,p+1,h-2,l-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){const{body:r}=this,{bodySpacing:o,bodyAlign:s,displayColors:a,boxHeight:l,boxWidth:h,boxPadding:u}=i,c=n.toFont(i.bodyFont)
let d=c.lineHeight,f=0
const p=n.getRtlAdapter(i.rtl,this.x,this.width),g=function(i){e.fillText(i,p.x(t.x+f),t.y+d/2),t.y+=d+o},_=p.textAlign(s)
let m,y,v,x,b,w,E
for(e.textAlign=s,e.textBaseline="middle",e.font=c.string,t.x=_i(this,_,i),e.fillStyle=i.bodyColor,n.each(this.beforeBody,g),f=a&&"right"!==_?"center"===s?h/2+u:h+2+u:0,x=0,w=r.length;x<w;++x){for(m=r[x],y=this.labelTextColors[x],e.fillStyle=y,n.each(m.before,g),v=m.lines,a&&v.length&&(this._drawColorBox(e,t,x,p,i),d=Math.max(c.lineHeight,l)),b=0,E=v.length;b<E;++b)g(v[b]),d=c.lineHeight
n.each(m.after,g)}f=0,d=c.lineHeight,n.each(this.afterBody,g),t.y-=o}drawFooter(t,e,i){const r=this.footer,o=r.length
let s,a
if(o){const l=n.getRtlAdapter(i.rtl,this.x,this.width)
for(t.x=_i(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=l.textAlign(i.footerAlign),e.textBaseline="middle",s=n.toFont(i.footerFont),e.fillStyle=i.footerColor,e.font=s.string,a=0;a<o;++a)e.fillText(r[a],l.x(t.x),t.y+s.lineHeight/2),t.y+=s.lineHeight+i.footerSpacing}}drawBackground(t,e,i,r){const{xAlign:o,yAlign:s}=this,{x:a,y:l}=t,{width:h,height:u}=i,{topLeft:c,topRight:d,bottomLeft:f,bottomRight:p}=n.toTRBLCorners(r.cornerRadius)
e.fillStyle=r.backgroundColor,e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.beginPath(),e.moveTo(a+c,l),"top"===s&&this.drawCaret(t,e,i,r),e.lineTo(a+h-d,l),e.quadraticCurveTo(a+h,l,a+h,l+d),"center"===s&&"right"===o&&this.drawCaret(t,e,i,r),e.lineTo(a+h,l+u-p),e.quadraticCurveTo(a+h,l+u,a+h-p,l+u),"bottom"===s&&this.drawCaret(t,e,i,r),e.lineTo(a+f,l+u),e.quadraticCurveTo(a,l+u,a,l+u-f),"center"===s&&"left"===o&&this.drawCaret(t,e,i,r),e.lineTo(a,l+c),e.quadraticCurveTo(a,l,a+c,l),e.closePath(),e.fill(),r.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,i=this.$animations,n=i&&i.x,r=i&&i.y
if(n||r){const i=li[t.position].call(this,this._active,this._eventPosition)
if(!i)return
const o=this._size=di(this,t),s=Object.assign({},i,this._size),a=pi(e,t,s),l=gi(t,s,a,e)
n._to===l.x&&r._to===l.y||(this.xAlign=a.xAlign,this.yAlign=a.yAlign,this.width=o.width,this.height=o.height,this.caretX=i.x,this.caretY=i.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext())
let i=this.opacity
if(!i)return
this._updateAnimationTarget(e)
const r={width:this.width,height:this.height},o={x:this.x,y:this.y}
i=Math.abs(i)<.001?0:i
const s=n.toPadding(e.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length
e.enabled&&a&&(t.save(),t.globalAlpha=i,this.drawBackground(o,t,r,e),n.overrideTextDirection(t,e.textDirection),o.y+=s.top,this.drawTitle(o,t,e),this.drawBody(o,t,e),this.drawFooter(o,t,e),n.restoreTextDirection(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const i=this._active,r=t.map((({datasetIndex:t,index:e})=>{const i=this.chart.getDatasetMeta(t)
if(!i)throw new Error("Cannot find a dataset at index "+t)
return{datasetIndex:t,element:i.data[e],index:e}})),o=!n._elementsEqual(i,r),s=this._positionChanged(r,e);(o||s)&&(this._active=r,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1
this._ignoreReplayEvents=!1
const r=this.options,o=this._active||[],s=this._getActiveElements(t,o,e,i),a=this._positionChanged(s,t),l=e||!n._elementsEqual(s,o)||a
return l&&(this._active=s,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),l}_getActiveElements(t,e,i,n){const r=this.options
if("mouseout"===t.type)return[]
if(!n)return e.filter((t=>this.chart.data.datasets[t.datasetIndex]&&void 0!==this.chart.getDatasetMeta(t.datasetIndex).controller.getParsed(t.index)))
const o=this.chart.getElementsAtEventForMode(t,r.mode,r,i)
return r.reverse&&o.reverse(),o}_positionChanged(t,e){const{caretX:i,caretY:n,options:r}=this,o=li[r.position].call(this,t,e)
return!1!==o&&(i!==o.x||n!==o.y)}}var wi={id:"tooltip",_element:bi,positioners:li,afterInit(t,e,i){i&&(t.tooltip=new bi({chart:t,options:i}))},beforeUpdate(t,e,i){t.tooltip&&t.tooltip.initialize(i)},reset(t,e,i){t.tooltip&&t.tooltip.initialize(i)},afterDraw(t){const e=t.tooltip
if(e&&e._willRender()){const i={tooltip:e}
if(!1===t.notifyPlugins("beforeTooltipDraw",{...i,cancelable:!0}))return
e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",i)}},afterEvent(t,e){if(t.tooltip){const i=e.replay
t.tooltip.handleEvent(e.event,i,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:vi},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>"filter"!==t&&"itemSort"!==t&&"external"!==t,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},Ei=Object.freeze({__proto__:null,Colors:De,Decimation:ke,Filler:Qe,Legend:ni,SubTitle:ai,Title:oi,Tooltip:wi})
function Si(t){const e=this.getLabels()
return t>=0&&t<e.length?e[t]:t}class Ci extends Lt{static id="category"
static defaults={ticks:{callback:Si}}
constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels
if(e.length){const t=this.getLabels()
for(const{index:i,label:n}of e)t[i]===n&&t.splice(i,1)
this._addedLabels=[]}super.init(t)}parse(t,e){if(n.isNullOrUndef(t))return null
const i=this.getLabels()
return((t,e)=>null===t?null:n._limitValue(Math.round(t),0,e))(e=isFinite(e)&&i[e]===t?e:function(t,e,i,n){const r=t.indexOf(e)
return-1===r?((t,e,i,n)=>("string"==typeof e?(i=t.push(e)-1,n.unshift({index:i,label:e})):isNaN(e)&&(i=null),i))(t,e,i,n):r!==t.lastIndexOf(e)?i:r}(i,t,n.valueOrDefault(e,t),this._addedLabels),i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds()
let{min:i,max:n}=this.getMinMax(!0)
"ticks"===this.options.bounds&&(t||(i=0),e||(n=this.getLabels().length-1)),this.min=i,this.max=n}buildTicks(){const t=this.min,e=this.max,i=this.options.offset,n=[]
let r=this.getLabels()
r=0===t&&e===r.length-1?r:r.slice(t,e+1),this._valueRange=Math.max(r.length-(i?0:1),1),this._startValue=this.min-(i?.5:0)
for(let o=t;o<=e;o++)n.push({value:o})
return n}getLabelForValue(t){return Si.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!=typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks
return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function Pi(t,e,{horizontal:i,minRotation:r}){const o=n.toRadians(r),s=(i?Math.sin(o):Math.cos(o))||.001,a=.75*e*(""+t).length
return Math.min(e/s,a)}class Ti extends Lt{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return n.isNullOrUndef(t)||("number"==typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds()
let{min:r,max:o}=this
const s=t=>r=e?r:t,a=t=>o=i?o:t
if(t){const t=n.sign(r),e=n.sign(o)
t<0&&e<0?a(0):t>0&&e>0&&s(0)}if(r===o){let e=0===o?1:Math.abs(.05*o)
a(o+e),t||s(r-e)}this.min=r,this.max=o}getTickLimit(){const t=this.options.ticks
let e,{maxTicksLimit:i,stepSize:n}=t
return n?(e=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,e>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${e} ticks. Limiting to 1000.`),e=1e3)):(e=this.computeTickLimit(),i=i||11),i&&(e=Math.min(i,e)),e}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks
let i=this.getTickLimit()
i=Math.max(2,i)
const r=function(t,e){const i=[],{bounds:r,step:o,min:s,max:a,precision:l,count:h,maxTicks:u,maxDigits:c,includeBounds:d}=t,f=o||1,p=u-1,{min:g,max:_}=e,m=!n.isNullOrUndef(s),y=!n.isNullOrUndef(a),v=!n.isNullOrUndef(h),x=(_-g)/(c+1)
let b,w,E,S,C=n.niceNum((_-g)/p/f)*f
if(C<1e-14&&!m&&!y)return[{value:g},{value:_}]
S=Math.ceil(_/C)-Math.floor(g/C),S>p&&(C=n.niceNum(S*C/p/f)*f),n.isNullOrUndef(l)||(b=Math.pow(10,l),C=Math.ceil(C*b)/b),"ticks"===r?(w=Math.floor(g/C)*C,E=Math.ceil(_/C)*C):(w=g,E=_),m&&y&&o&&n.almostWhole((a-s)/o,C/1e3)?(S=Math.round(Math.min((a-s)/C,u)),C=(a-s)/S,w=s,E=a):v?(w=m?s:w,E=y?a:E,S=h-1,C=(E-w)/S):(S=(E-w)/C,S=n.almostEquals(S,Math.round(S),C/1e3)?Math.round(S):Math.ceil(S))
const P=Math.max(n._decimalPlaces(C),n._decimalPlaces(w))
b=Math.pow(10,n.isNullOrUndef(l)?P:l),w=Math.round(w*b)/b,E=Math.round(E*b)/b
let T=0
for(m&&(d&&w!==s?(i.push({value:s}),w<s&&T++,n.almostEquals(Math.round((w+T*C)*b)/b,s,Pi(s,x,t))&&T++):w<s&&T++);T<S;++T){const t=Math.round((w+T*C)*b)/b
if(y&&t>a)break
i.push({value:t})}return y&&d&&E!==a?i.length&&n.almostEquals(i[i.length-1].value,a,Pi(a,x,t))?i[i.length-1].value=a:i.push({value:a}):y&&E!==a||i.push({value:E}),i}({maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this)
return"ticks"===t.bounds&&n._setMinAndMaxByKey(r,this,"value"),t.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const t=this.ticks
let e=this.min,i=this.max
if(super.configure(),this.options.offset&&t.length){const n=(i-e)/Math.max(t.length-1,1)/2
e-=n,i+=n}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return n.formatNumber(t,this.chart.options.locale,this.options.ticks.format)}}class Ii extends Ti{static id="linear"
static defaults={ticks:{callback:n.Ticks.formatters.numeric}}
determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0)
this.min=n.isNumberFinite(t)?t:0,this.max=n.isNumberFinite(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,i=n.toRadians(this.options.ticks.minRotation),r=(t?Math.sin(i):Math.cos(i))||.001,o=this._resolveTickFontOptions(0)
return Math.ceil(e/Math.min(40,o.lineHeight/r))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const Mi=t=>Math.floor(n.log10(t)),Ai=(t,e)=>Math.pow(10,Mi(t)+e)
function Ri(t){return 1==t/Math.pow(10,Mi(t))}function Li(t,e,i){const n=Math.pow(10,i),r=Math.floor(t/n)
return Math.ceil(e/n)-r}class Oi extends Lt{static id="logarithmic"
static defaults={ticks:{callback:n.Ticks.formatters.logarithmic,major:{enabled:!0}}}
constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const i=Ti.prototype.parse.apply(this,[t,e])
if(0!==i)return n.isNumberFinite(i)&&i>0?i:null
this._zero=!0}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0)
this.min=n.isNumberFinite(t)?Math.max(0,t):null,this.max=n.isNumberFinite(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!n.isNumberFinite(this._userMin)&&(this.min=t===Ai(this.min,0)?Ai(this.min,-1):Ai(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds()
let i=this.min,n=this.max
const r=e=>i=t?i:e,o=t=>n=e?n:t
i===n&&(i<=0?(r(1),o(10)):(r(Ai(i,-1)),o(Ai(n,1)))),i<=0&&r(Ai(n,-1)),n<=0&&o(Ai(i,1)),this.min=i,this.max=n}buildTicks(){const t=this.options,e=function(t,{min:e,max:i}){e=n.finiteOrDefault(t.min,e)
const r=[],o=Mi(e)
let s=function(t,e){let i=Mi(e-t)
for(;Li(t,e,i)>10;)i++
for(;Li(t,e,i)<10;)i--
return Math.min(i,Mi(t))}(e,i),a=s<0?Math.pow(10,Math.abs(s)):1
const l=Math.pow(10,s),h=o>s?Math.pow(10,o):0,u=Math.round((e-h)*a)/a,c=Math.floor((e-h)/l/10)*l*10
let d=Math.floor((u-c)/Math.pow(10,s)),f=n.finiteOrDefault(t.min,Math.round((h+c+d*Math.pow(10,s))*a)/a)
for(;f<i;)r.push({value:f,major:Ri(f),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(s++,d=2,a=s>=0?1:a),f=Math.round((h+c+d*Math.pow(10,s))*a)/a
const p=n.finiteOrDefault(t.max,f)
return r.push({value:p,major:Ri(p),significand:d}),r}({min:this._userMin,max:this._userMax},this)
return"ticks"===t.bounds&&n._setMinAndMaxByKey(e,this,"value"),t.reverse?(e.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),e}getLabelForValue(t){return void 0===t?"0":n.formatNumber(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min
super.configure(),this._startValue=n.log10(t),this._valueRange=n.log10(this.max)-n.log10(t)}getPixelForValue(t){return void 0!==t&&0!==t||(t=this.min),null===t||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(n.log10(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t)
return Math.pow(10,this._startValue+e*this._valueRange)}}function Di(t){const e=t.ticks
if(e.display&&t.display){const t=n.toPadding(e.backdropPadding)
return n.valueOrDefault(e.font&&e.font.size,n.defaults.font.size)+t.height}return 0}function Ni(t,e,i,n,r){return t===n||t===r?{start:e-i/2,end:e+i/2}:t<n||t>r?{start:e-i,end:e}:{start:e,end:e+i}}function Fi(t,e,i,n,r){const o=Math.abs(Math.sin(i)),s=Math.abs(Math.cos(i))
let a=0,l=0
n.start<e.l?(a=(e.l-n.start)/o,t.l=Math.min(t.l,e.l-a)):n.end>e.r&&(a=(n.end-e.r)/o,t.r=Math.max(t.r,e.r+a)),r.start<e.t?(l=(e.t-r.start)/s,t.t=Math.min(t.t,e.t-l)):r.end>e.b&&(l=(r.end-e.b)/s,t.b=Math.max(t.b,e.b+l))}function ki(t,e,i){const r=t.drawingArea,{extra:o,additionalAngle:s,padding:a,size:l}=i,h=t.getPointPosition(e,r+o+a,s),u=Math.round(n.toDegrees(n._normalizeAngle(h.angle+n.HALF_PI))),c=function(t,e,i){return 90===i||270===i?t-=e/2:(i>270||i<90)&&(t-=e),t}(h.y,l.h,u),d=function(t){return 0===t||180===t?"center":t<180?"left":"right"}(u),f=(p=h.x,g=l.w,"right"===(_=d)?p-=g:"center"===_&&(p-=g/2),p)
var p,g,_
return{visible:!0,x:h.x,y:c,textAlign:d,left:f,top:c,right:f+l.w,bottom:c+l.h}}function zi(t,e){if(!e)return!0
const{left:i,top:r,right:o,bottom:s}=t
return!(n._isPointInArea({x:i,y:r},e)||n._isPointInArea({x:i,y:s},e)||n._isPointInArea({x:o,y:r},e)||n._isPointInArea({x:o,y:s},e))}function ji(t,e,i){const{left:r,top:o,right:s,bottom:a}=i,{backdropColor:l}=e
if(!n.isNullOrUndef(l)){const i=n.toTRBLCorners(e.borderRadius),h=n.toPadding(e.backdropPadding)
t.fillStyle=l
const u=r-h.left,c=o-h.top,d=s-r+h.width,f=a-o+h.height
Object.values(i).some((t=>0!==t))?(t.beginPath(),n.addRoundedRectPath(t,{x:u,y:c,w:d,h:f,radius:i}),t.fill()):t.fillRect(u,c,d,f)}}function Gi(t,e,i,r){const{ctx:o}=t
if(i)o.arc(t.xCenter,t.yCenter,e,0,n.TAU)
else{let i=t.getPointPosition(0,e)
o.moveTo(i.x,i.y)
for(let n=1;n<r;n++)i=t.getPointPosition(n,e),o.lineTo(i.x,i.y)}}class Bi extends Ti{static id="radialLinear"
static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:n.Ticks.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:t=>t,padding:5,centerPointLabels:!1}}
static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}
static descriptors={angleLines:{_fallback:"grid"}}
constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=n.toPadding(Di(this.options)/2),e=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height
this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(e,i)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1)
this.min=n.isNumberFinite(t)&&!isNaN(t)?t:0,this.max=n.isNumberFinite(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Di(this.options))}generateTickLabels(t){Ti.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map(((t,e)=>{const i=n.callback(this.options.pointLabels.callback,[t,e],this)
return i||0===i?i:""})).filter(((t,e)=>this.chart.getDataVisibility(e)))}fit(){const t=this.options
t.display&&t.pointLabels.display?function(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},i=Object.assign({},e),r=[],o=[],s=t._pointLabels.length,a=t.options.pointLabels,l=a.centerPointLabels?n.PI/s:0
for(let d=0;d<s;d++){const s=a.setContext(t.getPointLabelContext(d))
o[d]=s.padding
const f=t.getPointPosition(d,t.drawingArea+o[d],l),p=n.toFont(s.font),g=(h=t.ctx,u=p,c=t._pointLabels[d],c=n.isArray(c)?c:[c],{w:n._longestText(h,u.string,c),h:c.length*u.lineHeight})
r[d]=g
const _=n._normalizeAngle(t.getIndexAngle(d)+l),m=Math.round(n.toDegrees(_))
Fi(i,e,_,Ni(m,f.x,g.w,0,180),Ni(m,f.y,g.h,90,270))}var h,u,c
t.setCenterPoint(e.l-i.l,i.r-e.r,e.t-i.t,i.b-e.b),t._pointLabelItems=function(t,e,i){const r=[],o=t._pointLabels.length,s=t.options,{centerPointLabels:a,display:l}=s.pointLabels,h={extra:Di(s)/2,additionalAngle:a?n.PI/o:0}
let u
for(let n=0;n<o;n++){h.padding=i[n],h.size=e[n]
const o=ki(t,n,h)
r.push(o),"auto"===l&&(o.visible=zi(o,u),o.visible&&(u=o))}return r}(t,r,o)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,i,n){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((i-n)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,i,n))}getIndexAngle(t){const e=n.TAU/(this._pointLabels.length||1),i=this.options.startAngle||0
return n._normalizeAngle(t*e+n.toRadians(i))}getDistanceFromCenterForValue(t){if(n.isNullOrUndef(t))return NaN
const e=this.drawingArea/(this.max-this.min)
return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(n.isNullOrUndef(t))return NaN
const e=t/(this.drawingArea/(this.max-this.min))
return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[]
if(t>=0&&t<e.length){const i=e[t]
return function(t,e,i){return n.createContext(t,{label:i,index:e,type:"pointLabel"})}(this.getContext(),t,i)}}getPointPosition(t,e,i=0){const r=this.getIndexAngle(t)-n.HALF_PI+i
return{x:Math.cos(r)*e+this.xCenter,y:Math.sin(r)*e+this.yCenter,angle:r}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:i,right:n,bottom:r}=this._pointLabelItems[t]
return{left:e,top:i,right:n,bottom:r}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options
if(t){const i=this.ctx
i.save(),i.beginPath(),Gi(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:i,grid:r,border:o}=e,s=this._pointLabels.length
let a,l,h
if(e.pointLabels.display&&function(t,e){const{ctx:i,options:{pointLabels:r}}=t
for(let o=e-1;o>=0;o--){const e=t._pointLabelItems[o]
if(!e.visible)continue
const s=r.setContext(t.getPointLabelContext(o))
ji(i,s,e)
const a=n.toFont(s.font),{x:l,y:h,textAlign:u}=e
n.renderText(i,t._pointLabels[o],l,h+a.lineHeight/2,a,{color:s.color,textAlign:u,textBaseline:"middle"})}}(this,s),r.display&&this.ticks.forEach(((t,e)=>{if(0!==e||0===e&&this.min<0){l=this.getDistanceFromCenterForValue(t.value)
const i=this.getContext(e),n=r.setContext(i),a=o.setContext(i)
!function(t,e,i,n,r){const o=t.ctx,s=e.circular,{color:a,lineWidth:l}=e
!s&&!n||!a||!l||i<0||(o.save(),o.strokeStyle=a,o.lineWidth=l,o.setLineDash(r.dash),o.lineDashOffset=r.dashOffset,o.beginPath(),Gi(t,i,s,n),o.closePath(),o.stroke(),o.restore())}(this,n,l,s,a)}})),i.display){for(t.save(),a=s-1;a>=0;a--){const n=i.setContext(this.getPointLabelContext(a)),{color:r,lineWidth:o}=n
o&&r&&(t.lineWidth=o,t.strokeStyle=r,t.setLineDash(n.borderDash),t.lineDashOffset=n.borderDashOffset,l=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),h=this.getPointPosition(a,l),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(h.x,h.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,i=e.ticks
if(!i.display)return
const r=this.getIndexAngle(0)
let o,s
t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(r),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach(((r,a)=>{if(0===a&&this.min>=0&&!e.reverse)return
const l=i.setContext(this.getContext(a)),h=n.toFont(l.font)
if(o=this.getDistanceFromCenterForValue(this.ticks[a].value),l.showLabelBackdrop){t.font=h.string,s=t.measureText(r.label).width,t.fillStyle=l.backdropColor
const e=n.toPadding(l.backdropPadding)
t.fillRect(-s/2-e.left,-o-h.size/2-e.top,s+e.width,h.size+e.height)}n.renderText(t,r.label,0,-o,h,{color:l.color,strokeColor:l.textStrokeColor,strokeWidth:l.textStrokeWidth})})),t.restore()}drawTitle(){}}const Ui={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},qi=Object.keys(Ui)
function Vi(t,e){return t-e}function Zi(t,e){if(n.isNullOrUndef(e))return null
const i=t._adapter,{parser:r,round:o,isoWeekday:s}=t._parseOpts
let a=e
return"function"==typeof r&&(a=r(a)),n.isNumberFinite(a)||(a="string"==typeof r?i.parse(a,r):i.parse(a)),null===a?null:(o&&(a="week"!==o||!n.isNumber(s)&&!0!==s?i.startOf(a,o):i.startOf(a,"isoWeek",s)),+a)}function Wi(t,e,i,n){const r=qi.length
for(let o=qi.indexOf(t);o<r-1;++o){const t=Ui[qi[o]],r=t.steps?t.steps:Number.MAX_SAFE_INTEGER
if(t.common&&Math.ceil((i-e)/(r*t.size))<=n)return qi[o]}return qi[r-1]}function Yi(t,e,i){if(i){if(i.length){const{lo:r,hi:o}=n._lookup(i,e)
t[i[r]>=e?i[r]:i[o]]=!0}}else t[e]=!0}function Xi(t,e,i){const n=[],r={},o=e.length
let s,a
for(s=0;s<o;++s)a=e[s],r[a]=s,n.push({value:a,major:!1})
return 0!==o&&i?function(t,e,i,n){const r=t._adapter,o=+r.startOf(e[0].value,n),s=e[e.length-1].value
let a,l
for(a=o;a<=s;a=+r.add(a,1,n))l=i[a],l>=0&&(e[l].major=!0)
return e}(t,n,r,i):n}class Hi extends Lt{static id="time"
static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}}
constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const i=t.time||(t.time={}),r=this._adapter=new G._date(t.adapters.date)
r.init(e),n.mergeIf(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return void 0===t?null:Zi(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,i=t.time.unit||"day"
let{min:r,max:o,minDefined:s,maxDefined:a}=this.getUserBounds()
function l(t){s||isNaN(t.min)||(r=Math.min(r,t.min)),a||isNaN(t.max)||(o=Math.max(o,t.max))}s&&a||(l(this._getLabelBounds()),"ticks"===t.bounds&&"labels"===t.ticks.source||l(this.getMinMax(!1))),r=n.isNumberFinite(r)&&!isNaN(r)?r:+e.startOf(Date.now(),i),o=n.isNumberFinite(o)&&!isNaN(o)?o:+e.endOf(Date.now(),i)+1,this.min=Math.min(r,o-1),this.max=Math.max(r+1,o)}_getLabelBounds(){const t=this.getLabelTimestamps()
let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY
return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this.options,e=t.time,i=t.ticks,r="labels"===i.source?this.getLabelTimestamps():this._generate()
"ticks"===t.bounds&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1])
const o=this.min,s=this.max,a=n._filterBetween(r,o,s)
return this._unit=e.unit||(i.autoSkip?Wi(e.minUnit,this.min,this.max,this._getLabelCapacity(o)):function(t,e,i,n,r){for(let o=qi.length-1;o>=qi.indexOf(i);o--){const i=qi[o]
if(Ui[i].common&&t._adapter.diff(r,n,i)>=e-1)return i}return qi[i?qi.indexOf(i):0]}(this,a.length,e.minUnit,this.min,this.max)),this._majorUnit=i.major.enabled&&"year"!==this._unit?function(t){for(let e=qi.indexOf(t)+1,i=qi.length;e<i;++e)if(Ui[qi[e]].common)return qi[e]}(this._unit):void 0,this.initOffsets(r),t.reverse&&a.reverse(),Xi(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((t=>+t.value)))}initOffsets(t=[]){let e,i,r=0,o=0
this.options.offset&&t.length&&(e=this.getDecimalForValue(t[0]),r=1===t.length?1-e:(this.getDecimalForValue(t[1])-e)/2,i=this.getDecimalForValue(t[t.length-1]),o=1===t.length?i:(i-this.getDecimalForValue(t[t.length-2]))/2)
const s=t.length<3?.5:.25
r=n._limitValue(r,0,s),o=n._limitValue(o,0,s),this._offsets={start:r,end:o,factor:1/(r+1+o)}}_generate(){const t=this._adapter,e=this.min,i=this.max,r=this.options,o=r.time,s=o.unit||Wi(o.minUnit,e,i,this._getLabelCapacity(e)),a=n.valueOrDefault(r.ticks.stepSize,1),l="week"===s&&o.isoWeekday,h=n.isNumber(l)||!0===l,u={}
let c,d,f=e
if(h&&(f=+t.startOf(f,"isoWeek",l)),f=+t.startOf(f,h?"day":s),t.diff(i,e,s)>1e5*a)throw new Error(e+" and "+i+" are too far apart with stepSize of "+a+" "+s)
const p="data"===r.ticks.source&&this.getDataTimestamps()
for(c=f,d=0;c<i;c=+t.add(c,a,s),d++)Yi(u,c,p)
return c!==i&&"ticks"!==r.bounds&&1!==d||Yi(u,c,p),Object.keys(u).sort(Vi).map((t=>+t))}getLabelForValue(t){const e=this._adapter,i=this.options.time
return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){const i=this.options.time.displayFormats,n=this._unit,r=e||i[n]
return this._adapter.format(t,r)}_tickFormatFunction(t,e,i,r){const o=this.options,s=o.ticks.callback
if(s)return n.callback(s,[t,e,i],this)
const a=o.time.displayFormats,l=this._unit,h=this._majorUnit,u=l&&a[l],c=h&&a[h],d=i[e],f=h&&c&&d&&d.major
return this._adapter.format(t,r||(f?c:u))}generateTickLabels(t){let e,i,n
for(e=0,i=t.length;e<i;++e)n=t[e],n.label=this._tickFormatFunction(n.value,e,t)}getDecimalForValue(t){return null===t?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,i=this.getDecimalForValue(t)
return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end
return this.min+i*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,i=this.ctx.measureText(t).width,r=n.toRadians(this.isHorizontal()?e.maxRotation:e.minRotation),o=Math.cos(r),s=Math.sin(r),a=this._resolveTickFontOptions(0).size
return{w:i*o+a*s,h:i*s+a*o}}_getLabelCapacity(t){const e=this.options.time,i=e.displayFormats,n=i[e.unit]||i.millisecond,r=this._tickFormatFunction(t,0,Xi(this,[t],this._majorUnit),n),o=this._getLabelSize(r),s=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1
return s>0?s:1}getDataTimestamps(){let t,e,i=this._cache.data||[]
if(i.length)return i
const n=this.getMatchingVisibleMetas()
if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this)
for(t=0,e=n.length;t<e;++t)i=i.concat(n[t].controller.getAllParsedValues(this))
return this._cache.data=this.normalize(i)}getLabelTimestamps(){const t=this._cache.labels||[]
let e,i
if(t.length)return t
const n=this.getLabels()
for(e=0,i=n.length;e<i;++e)t.push(Zi(this,n[e]))
return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return n._arrayUnique(t.sort(Vi))}}function $i(t,e,i){let r,o,s,a,l=0,h=t.length-1
i?(e>=t[l].pos&&e<=t[h].pos&&({lo:l,hi:h}=n._lookupByKey(t,"pos",e)),({pos:r,time:s}=t[l]),({pos:o,time:a}=t[h])):(e>=t[l].time&&e<=t[h].time&&({lo:l,hi:h}=n._lookupByKey(t,"time",e)),({time:r,pos:s}=t[l]),({time:o,pos:a}=t[h]))
const u=o-r
return u?s+(a-s)*(e-r)/u:s}class Ki extends Hi{static id="timeseries"
static defaults=Hi.defaults
constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t)
this._minPos=$i(e,this.min),this._tableRange=$i(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,n=[],r=[]
let o,s,a,l,h
for(o=0,s=t.length;o<s;++o)l=t[o],l>=e&&l<=i&&n.push(l)
if(n.length<2)return[{time:e,pos:0},{time:i,pos:1}]
for(o=0,s=n.length;o<s;++o)h=n[o+1],a=n[o-1],l=n[o],Math.round((h+a)/2)!==l&&r.push({time:l,pos:o/(s-1)})
return r}_generate(){const t=this.min,e=this.max
let i=super.getDataTimestamps()
return i.includes(t)&&i.length||i.splice(0,0,t),i.includes(e)&&1!==i.length||i.push(e),i.sort(((t,e)=>t-e))}_getTimestampsForTable(){let t=this._cache.all||[]
if(t.length)return t
const e=this.getDataTimestamps(),i=this.getLabelTimestamps()
return t=e.length&&i.length?this.normalize(e.concat(i)):e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return($i(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end
return $i(this._table,i*this._tableRange+this._minPos,!0)}}var Ji=Object.freeze({__proto__:null,CategoryScale:Ci,LinearScale:Ii,LogarithmicScale:Oi,RadialLinearScale:Bi,TimeScale:Hi,TimeSeriesScale:Ki})
const Qi=[k,Ie,Ei,Ji]
e.Ticks=n.Ticks,e.defaults=n.defaults,e.Animation=a,e.Animations=l,e.ArcElement=ce,e.BarController=M,e.BarElement=Te,e.BasePlatform=ot,e.BasicPlatform=st,e.BubbleController=A,e.CategoryScale=Ci,e.Chart=ae,e.Colors=De,e.DatasetController=x,e.Decimation=ke,e.DomPlatform=bt,e.DoughnutController=R,e.Element=Et,e.Filler=Qe,e.Interaction=W,e.Legend=ni,e.LineController=L,e.LineElement=ve,e.LinearScale=Ii,e.LogarithmicScale=Oi,e.PieController=D,e.PointElement=be,e.PolarAreaController=O,e.RadarController=N,e.RadialLinearScale=Bi,e.Scale=Lt,e.ScatterController=F,e.SubTitle=ai,e.TimeScale=Hi,e.TimeSeriesScale=Ki,e.Title=oi,e.Tooltip=wi,e._adapters=G,e._detectPlatform=wt,e.animator=r,e.controllers=k,e.elements=Ie,e.layouts=rt,e.plugins=Ei,e.registerables=Qi,e.registry=Dt,e.scales=Ji},1579:(t,e,i)=>{"use strict"
var n=i(9084)
const r=(()=>{let t=0
return()=>t++})()
function o(t){return null==t}function s(t){if(Array.isArray&&Array.isArray(t))return!0
const e=Object.prototype.toString.call(t)
return"[object"===e.slice(0,7)&&"Array]"===e.slice(-6)}function a(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)}function l(t){return("number"==typeof t||t instanceof Number)&&isFinite(+t)}function h(t,e){return void 0===t?e:t}const u=(t,e)=>"string"==typeof t&&t.endsWith("%")?parseFloat(t)/100*e:+t
function c(t){if(s(t))return t.map(c)
if(a(t)){const e=Object.create(null),i=Object.keys(t),n=i.length
let r=0
for(;r<n;++r)e[i[r]]=c(t[i[r]])
return e}return t}function d(t){return-1===["__proto__","prototype","constructor"].indexOf(t)}function f(t,e,i,n){if(!d(t))return
const r=e[t],o=i[t]
a(r)&&a(o)?p(r,o,n):e[t]=c(o)}function p(t,e,i){const n=s(e)?e:[e],r=n.length
if(!a(t))return t
const o=(i=i||{}).merger||f
let l
for(let s=0;s<r;++s){if(l=n[s],!a(l))continue
const e=Object.keys(l)
for(let n=0,r=e.length;n<r;++n)o(e[n],t,l,i)}return t}function g(t,e){return p(t,e,{merger:_})}function _(t,e,i){if(!d(t))return
const n=e[t],r=i[t]
a(n)&&a(r)?g(n,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=c(r))}const m={"":t=>t,x:t=>t.x,y:t=>t.y}
function y(t){const e=t.split("."),i=[]
let n=""
for(const r of e)n+=r,n.endsWith("\\")?n=n.slice(0,-1)+".":(i.push(n),n="")
return i}function v(t,e){const i=m[e]||(m[e]=function(t){const e=y(t)
return t=>{for(const i of e){if(""===i)break
t=t&&t[i]}return t}}(e))
return i(t)}function x(t){return t.charAt(0).toUpperCase()+t.slice(1)}const b=t=>"function"==typeof t,w=Math.PI,E=2*w,S=E+w,C=Number.POSITIVE_INFINITY,P=w/180,T=w/2,I=w/4,M=2*w/3,A=Math.log10,R=Math.sign
function L(t,e,i){return Math.abs(t-e)<i}function O(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function D(t,e){return(t-e+S)%E-w}function N(t){return(t%E+E)%E}function F(t,e,i,n){const r=N(t),o=N(e),s=N(i),a=N(o-r),l=N(s-r),h=N(r-o),u=N(r-s)
return r===o||r===s||n&&o===s||a>l&&h<u}function k(t,e,i){return Math.max(e,Math.min(i,t))}function z(t,e,i,n=1e-6){return t>=Math.min(e,i)-n&&t<=Math.max(e,i)+n}function j(t,e,i){i=i||(i=>t[i]<e)
let n,r=t.length-1,o=0
for(;r-o>1;)n=o+r>>1,i(n)?o=n:r=n
return{lo:o,hi:r}}const G=(t,e,i,n)=>j(t,i,n?n=>{const r=t[n][e]
return r<i||r===i&&t[n+1][e]===i}:n=>t[n][e]<i),B=["push","pop","shift","splice","unshift"],U="undefined"==typeof window?function(t){return t()}:window.requestAnimationFrame,q=t=>0===t||1===t,V=(t,e,i)=>-Math.pow(2,10*(t-=1))*Math.sin((t-e)*E/i),Z=(t,e,i)=>Math.pow(2,-10*t)*Math.sin((t-e)*E/i)+1,W={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>1-Math.cos(t*T),easeOutSine:t=>Math.sin(t*T),easeInOutSine:t=>-.5*(Math.cos(w*t)-1),easeInExpo:t=>0===t?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>1===t?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>q(t)?t:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(2-Math.pow(2,-10*(2*t-1))),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>q(t)?t:V(t,.075,.3),easeOutElastic:t=>q(t)?t:Z(t,.075,.3),easeInOutElastic(t){const e=.1125
return q(t)?t:t<.5?.5*V(2*t,e,.45):.5+.5*Z(2*t-1,e,.45)},easeInBack(t){const e=1.70158
return t*t*((e+1)*t-e)},easeOutBack(t){const e=1.70158
return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack(t){let e=1.70158
return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:t=>1-W.easeOutBounce(1-t),easeOutBounce(t){const e=7.5625,i=2.75
return t<1/i?e*t*t:t<2/i?e*(t-=1.5/i)*t+.75:t<2.5/i?e*(t-=2.25/i)*t+.9375:e*(t-=2.625/i)*t+.984375},easeInOutBounce:t=>t<.5?.5*W.easeInBounce(2*t):.5*W.easeOutBounce(2*t-1)+.5}
function Y(t){if(t&&"object"==typeof t){const e=t.toString()
return"[object CanvasPattern]"===e||"[object CanvasGradient]"===e}return!1}function X(t){return Y(t)?t:new n.Color(t).saturate(.5).darken(.1).hexString()}const H=["x","y","borderWidth","radius","tension"],$=["color","borderColor","backgroundColor"],K=new Map
function J(t,e,i){return function(t,e){e=e||{}
const i=t+JSON.stringify(e)
let n=K.get(i)
return n||(n=new Intl.NumberFormat(t,e),K.set(i,n)),n}(e,i).format(t)}const Q={values:t=>s(t)?t:""+t,numeric(t,e,i){if(0===t)return"0"
const n=this.chart.options.locale
let r,o=t
if(i.length>1){const e=Math.max(Math.abs(i[0].value),Math.abs(i[i.length-1].value));(e<1e-4||e>1e15)&&(r="scientific"),o=function(t,e){let i=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value
return Math.abs(i)>=1&&t!==Math.floor(t)&&(i=t-Math.floor(t)),i}(t,i)}const s=A(Math.abs(o)),a=isNaN(s)?1:Math.max(Math.min(-1*Math.floor(s),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a}
return Object.assign(l,this.options.ticks.format),J(t,n,l)},logarithmic(t,e,i){if(0===t)return"0"
const n=i[e].significand||t/Math.pow(10,Math.floor(A(t)))
return[1,2,3,5,10,15].includes(n)||e>.8*i.length?Q.numeric.call(this,t,e,i):""}}
var tt={formatters:Q}
const et=Object.create(null),it=Object.create(null)
function nt(t,e){if(!e)return t
const i=e.split(".")
for(let n=0,r=i.length;n<r;++n){const e=i[n]
t=t[e]||(t[e]=Object.create(null))}return t}function rt(t,e,i){return"string"==typeof e?p(nt(t,e),i):p(nt(t,""),e)}var ot=new class{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,e)=>X(e.backgroundColor),this.hoverBorderColor=(t,e)=>X(e.borderColor),this.hoverColor=(t,e)=>X(e.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return rt(this,t,e)}get(t){return nt(this,t)}describe(t,e){return rt(it,t,e)}override(t,e){return rt(et,t,e)}route(t,e,i,n){const r=nt(this,t),o=nt(this,i),s="_"+e
Object.defineProperties(r,{[s]:{value:r[e],writable:!0},[e]:{enumerable:!0,get(){const t=this[s],e=o[n]
return a(t)?Object.assign({},e,t):h(t,e)},set(t){this[s]=t}}})}apply(t){t.forEach((t=>t(this)))}}({_scriptable:t=>!t.startsWith("on"),_indexable:t=>"events"!==t,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),t.set("animations",{colors:{type:"color",properties:$},numbers:{type:"number",properties:H}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}})},function(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:tt.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t&&"dash"!==t}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:t=>"backdropPadding"!==t&&"callback"!==t,_indexable:t=>"backdropPadding"!==t})}])
function st(t){return!t||o(t.size)||o(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function at(t,e,i,n,r){let o=e[r]
return o||(o=e[r]=t.measureText(r).width,i.push(r)),o>n&&(n=o),n}function lt(t,e,i,n,r){let o,s,a,l,h,u,c,d
const f=e.pointStyle,p=e.rotation,g=e.radius
let _=(p||0)*P
if(f&&"object"==typeof f&&(o=f.toString(),"[object HTMLImageElement]"===o||"[object HTMLCanvasElement]"===o))return t.save(),t.translate(i,n),t.rotate(_),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),void t.restore()
if(!(isNaN(g)||g<=0)){switch(t.beginPath(),f){default:r?t.ellipse(i,n,r/2,g,0,0,E):t.arc(i,n,g,0,E),t.closePath()
break
case"triangle":u=r?r/2:g,t.moveTo(i+Math.sin(_)*u,n-Math.cos(_)*g),_+=M,t.lineTo(i+Math.sin(_)*u,n-Math.cos(_)*g),_+=M,t.lineTo(i+Math.sin(_)*u,n-Math.cos(_)*g),t.closePath()
break
case"rectRounded":h=.516*g,l=g-h,s=Math.cos(_+I)*l,c=Math.cos(_+I)*(r?r/2-h:l),a=Math.sin(_+I)*l,d=Math.sin(_+I)*(r?r/2-h:l),t.arc(i-c,n-a,h,_-w,_-T),t.arc(i+d,n-s,h,_-T,_),t.arc(i+c,n+a,h,_,_+T),t.arc(i-d,n+s,h,_+T,_+w),t.closePath()
break
case"rect":if(!p){l=Math.SQRT1_2*g,u=r?r/2:l,t.rect(i-u,n-l,2*u,2*l)
break}_+=I
case"rectRot":c=Math.cos(_)*(r?r/2:g),s=Math.cos(_)*g,a=Math.sin(_)*g,d=Math.sin(_)*(r?r/2:g),t.moveTo(i-c,n-a),t.lineTo(i+d,n-s),t.lineTo(i+c,n+a),t.lineTo(i-d,n+s),t.closePath()
break
case"crossRot":_+=I
case"cross":c=Math.cos(_)*(r?r/2:g),s=Math.cos(_)*g,a=Math.sin(_)*g,d=Math.sin(_)*(r?r/2:g),t.moveTo(i-c,n-a),t.lineTo(i+c,n+a),t.moveTo(i+d,n-s),t.lineTo(i-d,n+s)
break
case"star":c=Math.cos(_)*(r?r/2:g),s=Math.cos(_)*g,a=Math.sin(_)*g,d=Math.sin(_)*(r?r/2:g),t.moveTo(i-c,n-a),t.lineTo(i+c,n+a),t.moveTo(i+d,n-s),t.lineTo(i-d,n+s),_+=I,c=Math.cos(_)*(r?r/2:g),s=Math.cos(_)*g,a=Math.sin(_)*g,d=Math.sin(_)*(r?r/2:g),t.moveTo(i-c,n-a),t.lineTo(i+c,n+a),t.moveTo(i+d,n-s),t.lineTo(i-d,n+s)
break
case"line":s=r?r/2:Math.cos(_)*g,a=Math.sin(_)*g,t.moveTo(i-s,n-a),t.lineTo(i+s,n+a)
break
case"dash":t.moveTo(i,n),t.lineTo(i+Math.cos(_)*(r?r/2:g),n+Math.sin(_)*g)
break
case!1:t.closePath()}t.fill(),e.borderWidth>0&&t.stroke()}}function ht(t,e,i){return i=i||.5,!e||t&&t.x>e.left-i&&t.x<e.right+i&&t.y>e.top-i&&t.y<e.bottom+i}function ut(t,e,i,n,r){if(r.strikethrough||r.underline){const o=t.measureText(n),s=e-o.actualBoundingBoxLeft,a=e+o.actualBoundingBoxRight,l=i-o.actualBoundingBoxAscent,h=i+o.actualBoundingBoxDescent,u=r.strikethrough?(l+h)/2:h
t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(s,u),t.lineTo(a,u),t.stroke()}}function ct(t,e){const i=t.fillStyle
t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=i}const dt=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,ft=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/
function pt(t,e){const i=(""+t).match(dt)
if(!i||"normal"===i[1])return 1.2*e
switch(t=+i[2],i[3]){case"px":return t
case"%":t/=100}return e*t}const gt=t=>+t||0
function _t(t,e){const i={},n=a(e),r=n?Object.keys(e):e,o=a(t)?n?i=>h(t[i],t[e[i]]):e=>t[e]:()=>t
for(const s of r)i[s]=gt(o(s))
return i}function mt(t){return _t(t,{top:"y",right:"x",bottom:"y",left:"x"})}function yt(t,e){return Object.assign(Object.create(t),e)}function vt(t,e=[""],i,n,r=(()=>t[0])){const o=i||t
void 0===n&&(n=Mt("_fallback",t))
const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:o,_fallback:n,_getTarget:r,override:i=>vt([i,...t],e,o,n)}
return new Proxy(s,{deleteProperty:(e,i)=>(delete e[i],delete e._keys,delete t[0][i],!0),get:(i,n)=>Et(i,n,(()=>function(t,e,i,n){let r
for(const o of e)if(r=Mt(bt(o,t),i),void 0!==r)return wt(t,r)?Tt(i,n,t,r):r}(n,e,t,i))),getOwnPropertyDescriptor:(t,e)=>Reflect.getOwnPropertyDescriptor(t._scopes[0],e),getPrototypeOf:()=>Reflect.getPrototypeOf(t[0]),has:(t,e)=>At(t).includes(e),ownKeys:t=>At(t),set(t,e,i){const n=t._storage||(t._storage=r())
return t[e]=n[e]=i,delete t._keys,!0}})}function xt(t,e={scriptable:!0,indexable:!0}){const{_scriptable:i=e.scriptable,_indexable:n=e.indexable,_allKeys:r=e.allKeys}=t
return{allKeys:r,scriptable:i,indexable:n,isScriptable:b(i)?i:()=>i,isIndexable:b(n)?n:()=>n}}const bt=(t,e)=>t?t+x(e):e,wt=(t,e)=>a(e)&&"adapters"!==t&&(null===Object.getPrototypeOf(e)||e.constructor===Object)
function Et(t,e,i){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]
const n=i()
return t[e]=n,n}function St(t,e,i){return b(t)?t(e,i):t}const Ct=(t,e)=>!0===t?e:"string"==typeof t?v(e,t):void 0
function Pt(t,e,i,n,r){for(const o of e){const e=Ct(i,o)
if(e){t.add(e)
const o=St(e._fallback,i,r)
if(void 0!==o&&o!==i&&o!==n)return o}else if(!1===e&&void 0!==n&&i!==n)return null}return!1}function Tt(t,e,i,n){const r=e._rootScopes,o=St(e._fallback,i,n),l=[...t,...r],h=new Set
h.add(n)
let u=It(h,l,i,o||i,n)
return null!==u&&(void 0===o||o===i||(u=It(h,l,o,u,n),null!==u))&&vt(Array.from(h),[""],r,o,(()=>function(t,e,i){const n=t._getTarget()
e in n||(n[e]={})
const r=n[e]
return s(r)&&a(i)?i:r||{}}(e,i,n)))}function It(t,e,i,n,r){for(;i;)i=Pt(t,e,i,n,r)
return i}function Mt(t,e){for(const i of e){if(!i)continue
const e=i[t]
if(void 0!==e)return e}}function At(t){let e=t._keys
return e||(e=t._keys=function(t){const e=new Set
for(const i of t)for(const t of Object.keys(i).filter((t=>!t.startsWith("_"))))e.add(t)
return Array.from(e)}(t._scopes)),e}const Rt=Number.EPSILON||1e-14,Lt=(t,e)=>e<t.length&&!t[e].skip&&t[e],Ot=t=>"x"===t?"y":"x"
function Dt(t,e,i,n){const r=t.skip?e:t,o=e,s=i.skip?e:i,a=O(o,r),l=O(s,o)
let h=a/(a+l),u=l/(a+l)
h=isNaN(h)?0:h,u=isNaN(u)?0:u
const c=n*h,d=n*u
return{previous:{x:o.x-c*(s.x-r.x),y:o.y-c*(s.y-r.y)},next:{x:o.x+d*(s.x-r.x),y:o.y+d*(s.y-r.y)}}}function Nt(t,e="x"){const i=Ot(e),n=t.length,r=Array(n).fill(0),o=Array(n)
let s,a,l,h=Lt(t,0)
for(s=0;s<n;++s)if(a=l,l=h,h=Lt(t,s+1),l){if(h){const t=h[e]-l[e]
r[s]=0!==t?(h[i]-l[i])/t:0}o[s]=a?h?R(r[s-1])!==R(r[s])?0:(r[s-1]+r[s])/2:r[s-1]:r[s]}!function(t,e,i){const n=t.length
let r,o,s,a,l,h=Lt(t,0)
for(let u=0;u<n-1;++u)l=h,h=Lt(t,u+1),l&&h&&(L(e[u],0,Rt)?i[u]=i[u+1]=0:(r=i[u]/e[u],o=i[u+1]/e[u],a=Math.pow(r,2)+Math.pow(o,2),a<=9||(s=3/Math.sqrt(a),i[u]=r*s*e[u],i[u+1]=o*s*e[u])))}(t,r,o),function(t,e,i="x"){const n=Ot(i),r=t.length
let o,s,a,l=Lt(t,0)
for(let h=0;h<r;++h){if(s=a,a=l,l=Lt(t,h+1),!a)continue
const r=a[i],u=a[n]
s&&(o=(r-s[i])/3,a[`cp1${i}`]=r-o,a[`cp1${n}`]=u-o*e[h]),l&&(o=(l[i]-r)/3,a[`cp2${i}`]=r+o,a[`cp2${n}`]=u+o*e[h])}}(t,o,e)}function Ft(t,e,i){return Math.max(Math.min(t,i),e)}function kt(){return"undefined"!=typeof window&&"undefined"!=typeof document}function zt(t){let e=t.parentNode
return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function jt(t,e,i){let n
return"string"==typeof t?(n=parseInt(t,10),-1!==t.indexOf("%")&&(n=n/100*e.parentNode[i])):n=t,n}const Gt=t=>t.ownerDocument.defaultView.getComputedStyle(t,null)
function Bt(t,e){return Gt(t).getPropertyValue(e)}const Ut=["top","right","bottom","left"]
function qt(t,e,i){const n={}
i=i?"-"+i:""
for(let r=0;r<4;r++){const o=Ut[r]
n[o]=parseFloat(t[e+"-"+o+i])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const Vt=t=>Math.round(10*t)/10,Zt=function(){let t=!1
try{const e={get passive(){return t=!0,!1}}
kt()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch(t){}return t}()
function Wt(t,e,i,n){return{x:t.x+i*(e.x-t.x),y:t.y+i*(e.y-t.y)}}function Yt(t){return"angle"===t?{between:F,compare:D,normalize:N}:{between:z,compare:(t,e)=>t-e,normalize:t=>t}}function Xt({start:t,end:e,count:i,loop:n,style:r}){return{start:t%i,end:e%i,loop:n&&(e-t+1)%i==0,style:r}}function Ht(t,e,i){if(!i)return[t]
const{property:n,start:r,end:o}=i,s=e.length,{compare:a,between:l,normalize:h}=Yt(n),{start:u,end:c,loop:d,style:f}=function(t,e,i){const{property:n,start:r,end:o}=i,{between:s,normalize:a}=Yt(n),l=e.length
let h,u,{start:c,end:d,loop:f}=t
if(f){for(c+=l,d+=l,h=0,u=l;h<u&&s(a(e[c%l][n]),r,o);++h)c--,d--
c%=l,d%=l}return d<c&&(d+=l),{start:c,end:d,loop:f,style:t.style}}(t,e,i),p=[]
let g,_,m,y=!1,v=null
for(let x=u,b=u;x<=c;++x)_=e[x%s],_.skip||(g=h(_[n]),g!==m&&(y=l(g,r,o),null===v&&(y||l(r,m,g)&&0!==a(r,m))&&(v=0===a(g,r)?x:b),null!==v&&(!y||0===a(o,g)||l(o,m,g))&&(p.push(Xt({start:v,end:x,loop:d,count:s,style:f})),v=null),b=x,m=g))
return null!==v&&p.push(Xt({start:v,end:c,loop:d,count:s,style:f})),p}function $t(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function Kt(t,e){if(!e)return!1
const i=[],n=function(t,e){return Y(e)?(i.includes(e)||i.push(e),i.indexOf(e)):e}
return JSON.stringify(t,n)!==JSON.stringify(e,n)}e.HALF_PI=T,e.INFINITY=C,e.PI=w,e.PITAU=S,e.QUARTER_PI=I,e.RAD_PER_DEG=P,e.TAU=E,e.TWO_THIRDS_PI=M,e.Ticks=tt,e._addGrace=function(t,e,i){const{min:n,max:r}=t,o=u(e,(r-n)/2),s=(t,e)=>i&&0===t?0:t+e
return{min:s(n,-Math.abs(o)),max:s(r,o)}},e._alignPixel=function(t,e,i){const n=t.currentDevicePixelRatio,r=0!==i?Math.max(i/2,.5):0
return Math.round((e-r)*n)/n+r},e._alignStartEnd=(t,e,i)=>"start"===t?e:"end"===t?i:(e+i)/2,e._angleBetween=F,e._angleDiff=D,e._arrayUnique=function(t){const e=new Set(t)
return e.size===t.length?t:Array.from(e)},e._attachContext=function t(e,i,n,r){const o={_cacheable:!1,_proxy:e,_context:i,_subProxy:n,_stack:new Set,_descriptors:xt(e,r),setContext:i=>t(e,i,n,r),override:o=>t(e.override(o),i,n,r)}
return new Proxy(o,{deleteProperty:(t,i)=>(delete t[i],delete e[i],!0),get:(e,i,n)=>Et(e,i,(()=>function(e,i,n){const{_proxy:r,_context:o,_subProxy:l,_descriptors:h}=e
let u=r[i]
return b(u)&&h.isScriptable(i)&&(u=function(t,e,i,n){const{_proxy:r,_context:o,_subProxy:s,_stack:a}=i
if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t)
a.add(t)
let l=e(o,s||n)
return a.delete(t),wt(t,l)&&(l=Tt(r._scopes,r,t,l)),l}(i,u,e,n)),s(u)&&u.length&&(u=function(e,i,n,r){const{_proxy:o,_context:s,_subProxy:l,_descriptors:h}=n
if(void 0!==s.index&&r(e))return i[s.index%i.length]
if(a(i[0])){const n=i,r=o._scopes.filter((t=>t!==n))
i=[]
for(const a of n){const n=Tt(r,o,e,a)
i.push(t(n,s,l&&l[e],h))}}return i}(i,u,e,h.isIndexable)),wt(i,u)&&(u=t(u,o,l&&l[i],h)),u}(e,i,n))),getOwnPropertyDescriptor:(t,i)=>t._descriptors.allKeys?Reflect.has(e,i)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,i),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,i)=>Reflect.has(e,i),ownKeys:()=>Reflect.ownKeys(e),set:(t,i,n)=>(e[i]=n,delete t[i],!0)})},e._bezierCurveTo=function(t,e,i,n){if(!e)return t.lineTo(i.x,i.y)
t.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?i.cp2x:i.cp1x,n?i.cp2y:i.cp1y,i.x,i.y)},e._bezierInterpolation=function(t,e,i,n){const r={x:t.cp2x,y:t.cp2y},o={x:e.cp1x,y:e.cp1y},s=Wt(t,r,i),a=Wt(r,o,i),l=Wt(o,e,i),h=Wt(s,a,i),u=Wt(a,l,i)
return Wt(h,u,i)},e._boundSegment=Ht,e._boundSegments=function(t,e){const i=[],n=t.segments
for(let r=0;r<n.length;r++){const o=Ht(n[r],t.points,e)
o.length&&i.push(...o)}return i},e._capitalize=x,e._computeSegments=function(t,e){const i=t.points,n=t.options.spanGaps,r=i.length
if(!r)return[]
const o=!!t._loop,{start:s,end:a}=function(t,e,i,n){let r=0,o=e-1
if(i&&!n)for(;r<e&&!t[r].skip;)r++
for(;r<e&&t[r].skip;)r++
for(r%=e,i&&(o+=r);o>r&&t[o%e].skip;)o--
return o%=e,{start:r,end:o}}(i,r,o,n)
return function(t,e,i,n){return n&&n.setContext&&i?function(t,e,i,n){const r=t._chart.getContext(),o=$t(t.options),{_datasetIndex:s,options:{spanGaps:a}}=t,l=i.length,h=[]
let u=o,c=e[0].start,d=c
function f(t,e,n,r){const o=a?-1:1
if(t!==e){for(t+=l;i[t%l].skip;)t-=o
for(;i[e%l].skip;)e+=o
t%l!=e%l&&(h.push({start:t%l,end:e%l,loop:n,style:r}),u=r,c=e%l)}}for(const p of e){c=a?c:p.start
let t,e=i[c%l]
for(d=c+1;d<=p.end;d++){const o=i[d%l]
t=$t(n.setContext(yt(r,{type:"segment",p0:e,p1:o,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:s}))),Kt(t,u)&&f(c,d-1,p.loop,u),e=o,u=t}c<d-1&&f(c,d-1,p.loop,u)}return h}(t,e,i,n):e}(t,!0===n?[{start:s,end:a,loop:o}]:function(t,e,i,n){const r=t.length,o=[]
let s,a=e,l=t[e]
for(s=e+1;s<=i;++s){const i=t[s%r]
i.skip||i.stop?l.skip||(n=!1,o.push({start:e%r,end:(s-1)%r,loop:n}),e=a=i.stop?s:null):(a=s,l.skip&&(e=s)),l=i}return null!==a&&o.push({start:e%r,end:a%r,loop:n}),o}(i,s,a<s?a+r:a,!!t._fullLoop&&0===s&&a===r-1),i,e)},e._createResolver=vt,e._decimalPlaces=function(t){if(!l(t))return
let e=1,i=0
for(;Math.round(t*e)/e!==t;)e*=10,i++
return i},e._deprecated=function(t,e,i,n){void 0!==e&&console.warn(t+': "'+i+'" is deprecated. Please use "'+n+'" instead')},e._descriptors=xt,e._elementsEqual=function(t,e){let i,n,r,o
if(!t||!e||t.length!==e.length)return!1
for(i=0,n=t.length;i<n;++i)if(r=t[i],o=e[i],r.datasetIndex!==o.datasetIndex||r.index!==o.index)return!1
return!0},e._factorize=function(t){const e=[],i=Math.sqrt(t)
let n
for(n=1;n<i;n++)t%n==0&&(e.push(n),e.push(t/n))
return i===(0|i)&&e.push(i),e.sort(((t,e)=>t-e)).pop(),e},e._filterBetween=function(t,e,i){let n=0,r=t.length
for(;n<r&&t[n]<e;)n++
for(;r>n&&t[r-1]>i;)r--
return n>0||r<t.length?t.slice(n,r):t},e._getParentNode=zt,e._getStartAndCountOfVisiblePoints=function(t,e,i){const n=e.length
let r=0,o=n
if(t._sorted){const{iScale:s,_parsed:a}=t,l=s.axis,{min:h,max:u,minDefined:c,maxDefined:d}=s.getUserBounds()
c&&(r=k(Math.min(G(a,l,h).lo,i?n:G(e,l,s.getPixelForValue(h)).lo),0,n-1)),o=d?k(Math.max(G(a,s.axis,u,!0).hi+1,i?0:G(e,l,s.getPixelForValue(u),!0).hi+1),r,n)-r:n-r}return{start:r,count:o}},e._int16Range=function(t){return k(t,-32768,32767)},e._isBetween=z,e._isClickEvent=function(t){return"mouseup"===t.type||"click"===t.type||"contextmenu"===t.type},e._isDomSupported=kt,e._isPointInArea=ht,e._limitValue=k,e._longestText=function(t,e,i,n){let r=(n=n||{}).data=n.data||{},o=n.garbageCollect=n.garbageCollect||[]
n.font!==e&&(r=n.data={},o=n.garbageCollect=[],n.font=e),t.save(),t.font=e
let a=0
const l=i.length
let h,u,c,d,f
for(h=0;h<l;h++)if(d=i[h],null==d||s(d)){if(s(d))for(u=0,c=d.length;u<c;u++)f=d[u],null==f||s(f)||(a=at(t,r,o,a,f))}else a=at(t,r,o,a,d)
t.restore()
const p=o.length/2
if(p>i.length){for(h=0;h<p;h++)delete r[o[h]]
o.splice(0,p)}return a},e._lookup=j,e._lookupByKey=G,e._measureText=at,e._merger=f,e._mergerIf=_,e._normalizeAngle=N,e._parseObjectDataRadialScale=function(t,e,i,n){const{iScale:r}=t,{key:o="r"}=this._parsing,s=new Array(n)
let a,l,h,u
for(a=0,l=n;a<l;++a)h=a+i,u=e[h],s[a]={r:r.parse(v(u,o),h)}
return s},e._pointInLine=Wt,e._readValueToProps=_t,e._rlookupByKey=(t,e,i)=>j(t,i,(n=>t[n][e]>=i)),e._scaleRangesChanged=function(t){const{xScale:e,yScale:i,_scaleRanges:n}=t,r={xmin:e.min,xmax:e.max,ymin:i.min,ymax:i.max}
if(!n)return t._scaleRanges=r,!0
const o=n.xmin!==e.min||n.xmax!==e.max||n.ymin!==i.min||n.ymax!==i.max
return Object.assign(n,r),o},e._setMinAndMaxByKey=function(t,e,i){let n,r,o
for(n=0,r=t.length;n<r;n++)o=t[n][i],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))},e._splitKey=y,e._steppedInterpolation=function(t,e,i,n){return{x:t.x+i*(e.x-t.x),y:"middle"===n?i<.5?t.y:e.y:"after"===n?i<1?t.y:e.y:i>0?e.y:t.y}},e._steppedLineTo=function(t,e,i,n,r){if(!e)return t.lineTo(i.x,i.y)
if("middle"===r){const n=(e.x+i.x)/2
t.lineTo(n,e.y),t.lineTo(n,i.y)}else"after"===r!=!!n?t.lineTo(e.x,i.y):t.lineTo(i.x,e.y)
t.lineTo(i.x,i.y)},e._textX=(t,e,i,n)=>t===(n?"left":"right")?i:"center"===t?(e+i)/2:e,e._toLeftRightCenter=t=>"start"===t?"left":"end"===t?"right":"center",e._updateBezierControlPoints=function(t,e,i,n,r){let o,s,a,l
if(e.spanGaps&&(t=t.filter((t=>!t.skip))),"monotone"===e.cubicInterpolationMode)Nt(t,r)
else{let i=n?t[t.length-1]:t[0]
for(o=0,s=t.length;o<s;++o)a=t[o],l=Dt(i,a,t[Math.min(o+1,s-(n?0:1))%s],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,i=a}e.capBezierPoints&&function(t,e){let i,n,r,o,s,a=ht(t[0],e)
for(i=0,n=t.length;i<n;++i)s=o,o=a,a=i<n-1&&ht(t[i+1],e),o&&(r=t[i],s&&(r.cp1x=Ft(r.cp1x,e.left,e.right),r.cp1y=Ft(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=Ft(r.cp2x,e.left,e.right),r.cp2y=Ft(r.cp2y,e.top,e.bottom)))}(t,i)},e.addRoundedRectPath=function(t,e){const{x:i,y:n,w:r,h:o,radius:s}=e
t.arc(i+s.topLeft,n+s.topLeft,s.topLeft,1.5*w,w,!0),t.lineTo(i,n+o-s.bottomLeft),t.arc(i+s.bottomLeft,n+o-s.bottomLeft,s.bottomLeft,w,T,!0),t.lineTo(i+r-s.bottomRight,n+o),t.arc(i+r-s.bottomRight,n+o-s.bottomRight,s.bottomRight,T,0,!0),t.lineTo(i+r,n+s.topRight),t.arc(i+r-s.topRight,n+s.topRight,s.topRight,0,-T,!0),t.lineTo(i+s.topLeft,n)},e.almostEquals=L,e.almostWhole=function(t,e){const i=Math.round(t)
return i-e<=t&&i+e>=t},e.callback=function(t,e,i){if(t&&"function"==typeof t.call)return t.apply(i,e)},e.clearCanvas=function(t,e){(e=e||t.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()},e.clipArea=function(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()},e.clone=c,e.color=function(t){return Y(t)?t:new n.Color(t)},e.createContext=yt,e.debounce=function(t,e){let i
return function(...n){return e?(clearTimeout(i),i=setTimeout(t,e,n)):t.apply(this,n),e}},e.defaults=ot,e.defined=t=>void 0!==t,e.descriptors=it,e.distanceBetweenPoints=O,e.drawPoint=function(t,e,i,n){lt(t,e,i,n,null)},e.drawPointLegend=lt,e.each=function(t,e,i,n){let r,o,l
if(s(t))if(o=t.length,n)for(r=o-1;r>=0;r--)e.call(i,t[r],r)
else for(r=0;r<o;r++)e.call(i,t[r],r)
else if(a(t))for(l=Object.keys(t),o=l.length,r=0;r<o;r++)e.call(i,t[l[r]],l[r])},e.effects=W,e.finiteOrDefault=function(t,e){return l(t)?t:e},e.fontString=function(t,e,i){return e+" "+t+"px "+i},e.formatNumber=J,e.getAngleFromPoint=function(t,e){const i=e.x-t.x,n=e.y-t.y,r=Math.sqrt(i*i+n*n)
let o=Math.atan2(n,i)
return o<-.5*w&&(o+=E),{angle:o,distance:r}},e.getHoverColor=X,e.getMaximumSize=function(t,e,i,n){const r=Gt(t),o=qt(r,"margin"),s=jt(r.maxWidth,t,"clientWidth")||C,a=jt(r.maxHeight,t,"clientHeight")||C,l=function(t,e,i){let n,r
if(void 0===e||void 0===i){const o=zt(t)
if(o){const t=o.getBoundingClientRect(),s=Gt(o),a=qt(s,"border","width"),l=qt(s,"padding")
e=t.width-l.width-a.width,i=t.height-l.height-a.height,n=jt(s.maxWidth,o,"clientWidth"),r=jt(s.maxHeight,o,"clientHeight")}else e=t.clientWidth,i=t.clientHeight}return{width:e,height:i,maxWidth:n||C,maxHeight:r||C}}(t,e,i)
let{width:h,height:u}=l
if("content-box"===r.boxSizing){const t=qt(r,"border","width"),e=qt(r,"padding")
h-=e.width+t.width,u-=e.height+t.height}return h=Math.max(0,h-o.width),u=Math.max(0,n?h/n:u-o.height),h=Vt(Math.min(h,s,l.maxWidth)),u=Vt(Math.min(u,a,l.maxHeight)),h&&!u&&(u=Vt(h/2)),(void 0!==e||void 0!==i)&&n&&l.height&&u>l.height&&(u=l.height,h=Vt(Math.floor(u*n))),{width:h,height:u}},e.getRelativePosition=function(t,e){if("native"in t)return t
const{canvas:i,currentDevicePixelRatio:n}=e,r=Gt(i),o="border-box"===r.boxSizing,s=qt(r,"padding"),a=qt(r,"border","width"),{x:l,y:h,box:u}=function(t,e){const i=t.touches,n=i&&i.length?i[0]:t,{offsetX:r,offsetY:o}=n
let s,a,l=!1
if(((t,e,i)=>(t>0||e>0)&&(!i||!i.shadowRoot))(r,o,t.target))s=r,a=o
else{const t=e.getBoundingClientRect()
s=n.clientX-t.left,a=n.clientY-t.top,l=!0}return{x:s,y:a,box:l}}(t,i),c=s.left+(u&&a.left),d=s.top+(u&&a.top)
let{width:f,height:p}=e
return o&&(f-=s.width+a.width,p-=s.height+a.height),{x:Math.round((l-c)/f*i.width/n),y:Math.round((h-d)/p*i.height/n)}},e.getRtlAdapter=function(t,e,i){return t?function(t,e){return{x:i=>t+t+e-i,setWidth(t){e=t},textAlign:t=>"center"===t?t:"right"===t?"left":"right",xPlus:(t,e)=>t-e,leftForLtr:(t,e)=>t-e}}(e,i):{x:t=>t,setWidth(t){},textAlign:t=>t,xPlus:(t,e)=>t+e,leftForLtr:(t,e)=>t}},e.getStyle=Bt,e.isArray=s,e.isFunction=b,e.isNullOrUndef=o,e.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},e.isNumberFinite=l,e.isObject=a,e.isPatternOrGradient=Y,e.listenArrayEvents=function(t,e){t._chartjs?t._chartjs.listeners.push(e):(Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),B.forEach((e=>{const i="_onData"+x(e),n=t[e]
Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value(...e){const r=n.apply(this,e)
return t._chartjs.listeners.forEach((t=>{"function"==typeof t[i]&&t[i](...e)})),r}})})))},e.log10=A,e.merge=p,e.mergeIf=g,e.niceNum=function(t){const e=Math.round(t)
t=L(t,e,t/1e3)?e:t
const i=Math.pow(10,Math.floor(A(t))),n=t/i
return(n<=1?1:n<=2?2:n<=5?5:10)*i},e.noop=function(){},e.overrideTextDirection=function(t,e){let i,n
"ltr"!==e&&"rtl"!==e||(i=t.canvas.style,n=[i.getPropertyValue("direction"),i.getPropertyPriority("direction")],i.setProperty("direction",e,"important"),t.prevTextDirection=n)},e.overrides=et,e.readUsedSize=function(t,e){const i=Bt(t,e),n=i&&i.match(/^(\d+)(\.\d+)?px$/)
return n?+n[1]:void 0},e.renderText=function(t,e,i,n,r,a={}){const l=s(e)?e:[e],h=a.strokeWidth>0&&""!==a.strokeColor
let u,c
for(t.save(),t.font=r.string,function(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),o(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}(t,a),u=0;u<l.length;++u)c=l[u],a.backdrop&&ct(t,a.backdrop),h&&(a.strokeColor&&(t.strokeStyle=a.strokeColor),o(a.strokeWidth)||(t.lineWidth=a.strokeWidth),t.strokeText(c,i,n,a.maxWidth)),t.fillText(c,i,n,a.maxWidth),ut(t,i,n,c,a),n+=Number(r.lineHeight)
t.restore()},e.requestAnimFrame=U,e.resolve=function(t,e,i,n){let r,o,a,l=!0
for(r=0,o=t.length;r<o;++r)if(a=t[r],void 0!==a&&(void 0!==e&&"function"==typeof a&&(a=a(e),l=!1),void 0!==i&&s(a)&&(a=a[i%a.length],l=!1),void 0!==a))return n&&!l&&(n.cacheable=!1),a},e.resolveObjectKey=v,e.restoreTextDirection=function(t,e){void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))},e.retinaScale=function(t,e,i){const n=e||1,r=Math.floor(t.height*n),o=Math.floor(t.width*n)
t.height=Math.floor(t.height),t.width=Math.floor(t.width)
const s=t.canvas
return s.style&&(i||!s.style.height&&!s.style.width)&&(s.style.height=`${t.height}px`,s.style.width=`${t.width}px`),(t.currentDevicePixelRatio!==n||s.height!==r||s.width!==o)&&(t.currentDevicePixelRatio=n,s.height=r,s.width=o,t.ctx.setTransform(n,0,0,n,0,0),!0)},e.setsEqual=(t,e)=>{if(t.size!==e.size)return!1
for(const i of t)if(!e.has(i))return!1
return!0},e.sign=R,e.splineCurve=Dt,e.splineCurveMonotone=Nt,e.supportsEventListenerOptions=Zt,e.throttled=function(t,e){let i=[],n=!1
return function(...r){i=r,n||(n=!0,U.call(window,(()=>{n=!1,t.apply(e,i)})))}},e.toDegrees=function(t){return t*(180/w)},e.toDimension=u,e.toFont=function(t,e){t=t||{},e=e||ot.font
let i=h(t.size,e.size)
"string"==typeof i&&(i=parseInt(i,10))
let n=h(t.style,e.style)
n&&!(""+n).match(ft)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0)
const r={family:h(t.family,e.family),lineHeight:pt(h(t.lineHeight,e.lineHeight),i),size:i,style:n,weight:h(t.weight,e.weight),string:""}
return r.string=st(r),r},e.toFontString=st,e.toLineHeight=pt,e.toPadding=function(t){const e=mt(t)
return e.width=e.left+e.right,e.height=e.top+e.bottom,e},e.toPercentage=(t,e)=>"string"==typeof t&&t.endsWith("%")?parseFloat(t)/100:+t/e,e.toRadians=function(t){return t*(w/180)},e.toTRBL=mt,e.toTRBLCorners=function(t){return _t(t,["topLeft","topRight","bottomLeft","bottomRight"])},e.uid=r,e.unclipArea=function(t){t.restore()},e.unlistenArrayEvents=function(t,e){const i=t._chartjs
if(!i)return
const n=i.listeners,r=n.indexOf(e);-1!==r&&n.splice(r,1),n.length>0||(B.forEach((e=>{delete t[e]})),delete t._chartjs)},e.valueOrDefault=h},7242:(t,e,i)=>{"use strict"
i.d(e,{$:()=>n,AC:()=>h,Hm:()=>d,NZ:()=>o,S3:()=>c,TZ:()=>u,s$:()=>a,ub:()=>l})
const n={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},r={}
for(const p in n)n.hasOwnProperty(p)&&(r[n[p]]=parseInt(p,10))
const o=[r.BitsPerSample,r.ExtraSamples,r.SampleFormat,r.StripByteCounts,r.StripOffsets,r.StripRowCounts,r.TileByteCounts,r.TileOffsets,r.SubIFDs],s={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},a={}
for(const p in s)s.hasOwnProperty(p)&&(a[s[p]]=parseInt(p,10))
const l={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,TransparencyMask:4,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9},h={Unspecified:0,Assocalpha:1,Unassalpha:2},u={Version:0,AddCompression:1},c={None:0,Deflate:1,Zstandard:2},d={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"},f={}
for(const p in d)d.hasOwnProperty(p)&&(f[d[p]]=parseInt(p,10))},3844:(t,e,i)=>{"use strict"
i.d(e,{A:()=>h})
var n=i(1051),r=i(1678),o=i(406)
const s="length"
class a extends o.Ay{constructor(t,e,i){super(t),this.element=e,this.index=i}}class l extends n.A{constructor(t,e){if(super(),this.on,this.once,this.un,e=e||{},this.unique_=!!e.unique,this.array_=t||[],this.unique_)for(let i=0,n=this.array_.length;i<n;++i)this.assertUnique_(this.array_[i],i)
this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let e=0,i=t.length;e<i;++e)this.push(t[e])
return this}forEach(t){const e=this.array_
for(let i=0,n=e.length;i<n;++i)t(e[i],i,e)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(s)}insertAt(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t)
this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new a(r.A.ADD,e,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t)
const e=this.getLength()
return this.insertAt(e,t),this.getLength()}remove(t){const e=this.array_
for(let i=0,n=e.length;i<n;++i)if(e[i]===t)return this.removeAt(i)}removeAt(t){if(t<0||t>=this.getLength())return
const e=this.array_[t]
return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new a(r.A.REMOVE,e,t)),e}setAt(t,e){if(t>=this.getLength())return void this.insertAt(t,e)
if(t<0)throw new Error("Index out of bounds: "+t)
this.unique_&&this.assertUnique_(e,t)
const i=this.array_[t]
this.array_[t]=e,this.dispatchEvent(new a(r.A.REMOVE,i,t)),this.dispatchEvent(new a(r.A.ADD,e,t))}updateLength_(){this.set(s,this.array_.length)}assertUnique_(t,e){for(let i=0,n=this.array_.length;i<n;++i)if(this.array_[i]===t&&i!==e)throw new Error("Duplicate item added to a unique collection")}}const h=l},1678:(t,e,i)=>{"use strict"
i.d(e,{A:()=>n})
const n={ADD:"add",REMOVE:"remove"}},2272:(t,e,i)=>{"use strict"
i.d(e,{$r:()=>h,Ay:()=>d,bL:()=>a,xo:()=>s})
var n=i(7912),r=i(699),o=i(8454)
function s(t){return t instanceof Image||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageBitmap?t:null}function a(t){return t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Float32Array||t instanceof DataView?t:null}let l=null
function h(t){l||(l=(0,o.Y)(t.width,t.height,void 0,{willReadFrequently:!0}))
const e=l.canvas,i=t.width
e.width!==i&&(e.width=i)
const n=t.height
return e.height!==n&&(e.height=n),l.clearRect(0,0,i,n),l.drawImage(t,0,0),l.getImageData(0,0,i,n).data}const u=[256,256]
class c extends n.A{constructor(t){const e=r.A.IDLE
super(t.tileCoord,e,{transition:t.transition,interpolate:t.interpolate}),this.loader_=t.loader,this.data_=null,this.error_=null,this.size_=t.size||null}getSize(){if(this.size_)return this.size_
const t=s(this.data_)
return t?[t.width,t.height]:u}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==r.A.IDLE&&this.state!==r.A.ERROR)return
this.state=r.A.LOADING,this.changed()
const t=this
this.loader_().then((function(e){t.data_=e,t.state=r.A.LOADED,t.changed()})).catch((function(e){t.error_=e,t.state=r.A.ERROR,t.changed()}))}}const d=c},8646:(t,e,i)=>{"use strict"
i.d(e,{A:()=>n})
const n=class{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}},9656:(t,e,i)=>{"use strict"
i.d(e,{A:()=>l})
var n=i(1051),r=i(8638),o=i(6249),s=i(4757)
class a extends n.A{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if("function"==typeof t.getSimplifiedGeometry){const e=t
this.setGeometry(e)}else{const e=t
this.setProperties(e)}}clone(){const t=new a(this.hasProperties()?this.getProperties():null)
t.setGeometryName(this.getGeometryName())
const e=this.getGeometry()
e&&t.setGeometry(e.clone())
const i=this.getStyle()
return i&&t.setStyle(i),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&((0,s.JH)(this.geometryChangeKey_),this.geometryChangeKey_=null)
const t=this.getGeometry()
t&&(this.geometryChangeKey_=(0,s.KT)(t,r.A.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?function(t){if("function"==typeof t)return t
let e
return Array.isArray(t)?e=t:((0,o.v)("function"==typeof t.getZIndex,"Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[t]),function(){return e}}(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}const l=a},5643:(t,e,i)=>{"use strict"
i.d(e,{Ay:()=>f,D4:()=>d,RA:()=>c,f6:()=>u})
var n=i(669),r=i(8638),o=i(1410),s=i(1622),a=i(4757),l=i(419)
class h extends n.A{constructor(t,e,i,n){super(),this.extent=t,this.pixelRatio_=i,this.resolution=e,this.state="function"==typeof n?o.A.IDLE:n,this.image_=null,this.loader="function"==typeof n?n:null}changed(){this.dispatchEvent(r.A.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==o.A.IDLE&&this.loader){this.state=o.A.LOADING,this.changed()
const t=this.getResolution(),e=Array.isArray(t)?t[0]:t;(0,l.hq)((()=>this.loader(this.getExtent(),e,this.getPixelRatio()))).then((t=>{"image"in t&&(this.image_=t.image),"extent"in t&&(this.extent=t.extent),"resolution"in t&&(this.resolution=t.resolution),"pixelRatio"in t&&(this.pixelRatio_=t.pixelRatio),(t instanceof HTMLImageElement||t instanceof ImageBitmap||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement)&&(this.image_=t),this.state=o.A.LOADED})).catch((t=>{this.state=o.A.ERROR,console.error(t)})).finally((()=>this.changed()))}}setImage(t){this.image_=t}setResolution(t){this.resolution=t}}function u(t,e,i){const n=t
let o=!0,l=!1,h=!1
const u=[(0,a.Jz)(n,r.A.LOAD,(function(){h=!0,l||e()}))]
return n.src&&s.DT?(l=!0,n.decode().then((function(){o&&e()})).catch((function(t){o&&(h?e():i())}))):u.push((0,a.Jz)(n,r.A.ERROR,i)),function(){o=!1,u.forEach(a.JH)}}function c(t,e){return e&&(t.src=e),t.src&&s.DT?new Promise(((e,i)=>t.decode().then((()=>e(t))).catch((n=>t.complete&&t.width?e(t):i(n))))):function(t,e){return new Promise(((e,i)=>{function n(){o(),e(t)}function r(){o(),i(new Error("Image load error"))}function o(){t.removeEventListener("load",n),t.removeEventListener("error",r)}t.addEventListener("load",n),t.addEventListener("error",r)}))}(t)}function d(t,e){return e&&(t.src=e),t.src&&s.DT&&s.XM?t.decode().then((()=>createImageBitmap(t))).catch((e=>{if(t.complete&&t.width)return t
throw e})):c(t)}const f=h},4943:(t,e,i)=>{"use strict"
i.d(e,{A:()=>s})
var n=i(1410),r=i(5643)
class o extends r.Ay{constructor(t,e,i,r,o){super(t,e,i,void 0!==o?n.A.IDLE:n.A.LOADED),this.loader_=void 0!==o?o:null,this.canvas_=r,this.error_=null}getError(){return this.error_}handleLoad_(t){t?(this.error_=t,this.state=n.A.ERROR):this.state=n.A.LOADED,this.changed()}load(){this.state==n.A.IDLE&&(this.state=n.A.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}const s=o},1410:(t,e,i)=>{"use strict"
i.d(e,{A:()=>n})
const n={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},519:(t,e,i)=>{"use strict"
i.d(e,{A:()=>l})
var n=i(7912),r=i(699),o=i(8454),s=i(5643)
class a extends n.A{constructor(t,e,i,n,r,o){super(t,e,o),this.crossOrigin_=n,this.src_=i,this.key=i,this.image_=new Image,null!==n&&(this.image_.crossOrigin=n),this.unlisten_=null,this.tileLoadFunction_=r}getImage(){return this.image_}setImage(t){this.image_=t,this.state=r.A.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=r.A.ERROR,this.unlistenImage_(),this.image_=function(){const t=(0,o.Y)(1,1)
return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}(),this.changed()}handleImageLoad_(){const t=this.image_
t.naturalWidth&&t.naturalHeight?this.state=r.A.LOADED:this.state=r.A.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==r.A.ERROR&&(this.state=r.A.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==r.A.IDLE&&(this.state=r.A.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=(0,s.f6)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}const l=a},3041:(t,e,i)=>{"use strict"
i.r(e),i.d(e,{default:()=>Vt})
var n=i(1051),r=i(3844),o=i(1678),s=i(6789),a=i(8646),l=i(419),h=i(1736),u=i(2282),c=i(3236),d=i(8166),f=i(1257),p=i(8474)
class g extends a.A{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,e){(0,h.b0)()}calculateMatrices2D(t){const e=t.viewState,i=t.coordinateToPixelTransform,n=t.pixelToCoordinateTransform;(0,u.Zz)(i,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),(0,u.T9)(n,i)}forEachFeatureAtCoordinate(t,e,i,n,r,o,s,a){let l
const h=e.viewState
function u(t,e,i,n){return r.call(o,e,t?i:null,n)}const d=h.projection,g=(0,p.Li)(t.slice(),d),_=[[0,0]]
if(d.canWrapX()&&n){const t=d.getExtent(),e=(0,c.RG)(t)
_.push([-e,0],[e,0])}const m=e.layerStatesArray,y=m.length,v=[],x=[]
for(let c=0;c<_.length;c++)for(let n=y-1;n>=0;--n){const r=m[n],o=r.layer
if(o.hasRenderer()&&(0,f.l)(r,h)&&s.call(a,o)){const n=o.getRenderer(),s=o.getSource()
if(n&&s){const o=s.getWrapX()?g:t,a=u.bind(null,r.managed)
x[0]=o[0]+_[c][0],x[1]=o[1]+_[c][1],l=n.forEachFeatureAtCoordinate(x,e,i,a,v)}if(l)return l}}if(0===v.length)return
const b=1/v.length
return v.forEach(((t,e)=>t.distanceSq+=e*b)),v.sort(((t,e)=>t.distanceSq-e.distanceSq)),v.some((t=>l=t.callback(t.feature,t.layer,t.geometry))),l}hasFeatureAtCoordinate(t,e,i,n,r,o){return void 0!==this.forEachFeatureAtCoordinate(t,e,i,n,l.rT,this,r,o)}getMap(){return this.map_}renderFrame(t){(0,h.b0)()}scheduleExpireIconCache(t){d.ue.canExpireCache()&&t.postRenderFunctions.push(_)}}function _(t,e){d.ue.expire()}const m=g
var y=i(7067),v=i(7683),x=i(8411),b=i(8877),w=i(223),E=i(4757),S=i(8454)
const C=class extends m{constructor(t){super(t),this.fontChangeListenerKey_=(0,E.KT)(w.yY,y.A.PROPERTYCHANGE,t.redrawText.bind(t)),this.element_=document.createElement("div")
const e=this.element_.style
e.position="absolute",e.width="100%",e.height="100%",e.zIndex="0",this.element_.className=b.XI+" ol-layers"
const i=t.getViewport()
i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(t,e){const i=this.getMap()
if(i.hasListener(t)){const n=new v.A(t,void 0,e)
i.dispatchEvent(n)}}disposeInternal(){(0,E.JH)(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(t){if(!t)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1))
this.calculateMatrices2D(t),this.dispatchRenderEvent(x.A.PRECOMPOSE,t)
const e=t.layerStatesArray.sort((function(t,e){return t.zIndex-e.zIndex}))
e.some((t=>t.layer instanceof s.A&&t.layer.getDeclutter()))&&(t.declutter={})
const i=t.viewState
this.children_.length=0
const n=[]
let r=null
for(let o=0,s=e.length;o<s;++o){const s=e[o]
t.layerIndex=o
const a=s.layer,l=a.getSourceState()
if(!(0,f.l)(s,i)||"ready"!=l&&"undefined"!=l){a.unrender()
continue}const h=a.render(t,r)
h&&(h!==r&&(this.children_.push(h),r=h),n.push(s))}this.declutter(t,n),(0,S.WM)(this.element_,this.children_),this.dispatchRenderEvent(x.A.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}declutter(t,e){for(let i=e.length-1;i>=0;--i){const n=e[i],r=n.layer
r.getDeclutter()&&r.renderDeclutter(t,n)}e.forEach((e=>e.layer.renderDeferred(t)))}}
var P=i(8638),T=i(1971),I=i(406)
class M extends I.Ay{constructor(t,e,i){super(t),this.map=e,this.frameState=void 0!==i?i:null}}const A=M,R=class extends A{constructor(t,e,i,n,r,o){super(t,e,r),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=void 0!==n&&n,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}},L={SINGLECLICK:"singleclick",CLICK:P.A.CLICK,DBLCLICK:P.A.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},O="pointerdown"
var D=i(669),N=i(1622)
class F extends D.A{constructor(t,e){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=void 0===e?1:e,this.down_=null
const i=this.map_.getViewport()
this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=(0,E.KT)(i,O,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=(0,E.KT)(i,"pointermove",this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(P.A.TOUCHMOVE,this.boundHandleTouchMove_,!!N.FT&&{passive:!1})}emulateClick_(t){let e=new R(L.CLICK,this.map_,t)
this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new R(L.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout((()=>{this.clickTimeoutId_=void 0
const e=new R(L.SINGLECLICK,this.map_,t)
this.dispatchEvent(e)}),250)}updateActivePointers_(t){const e=t,i=e.pointerId
if(e.type==L.POINTERUP||e.type==L.POINTERCANCEL){delete this.trackedTouches_[i]
for(const t in this.trackedTouches_)if(this.trackedTouches_[t].target!==e.target){delete this.trackedTouches_[t]
break}}else e.type!=L.POINTERDOWN&&e.type!=L.POINTERMOVE||(this.trackedTouches_[i]=e)
this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t)
const e=new R(L.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_)
this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(E.JH),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return 0===t.button}handlePointerDown_(t){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(t)
const e=new R(L.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_)
if(this.dispatchEvent(e),this.down_=new PointerEvent(t.type,t),Object.defineProperty(this.down_,"target",{writable:!1,value:t.target}),0===this.dragListenerKeys_.length){const t=this.map_.getOwnerDocument()
this.dragListenerKeys_.push((0,E.KT)(t,L.POINTERMOVE,this.handlePointerMove_,this),(0,E.KT)(t,L.POINTERUP,this.handlePointerUp_,this),(0,E.KT)(this.element_,L.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==t&&this.dragListenerKeys_.push((0,E.KT)(this.element_.getRootNode(),L.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0
const e=new R(L.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_)
this.dispatchEvent(e)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t
const e=!(!this.down_||!this.isMoving_(t))
this.dispatchEvent(new R(L.POINTERMOVE,this.map_,t,e))}handleTouchMove_(t){const e=this.originalPointerMoveEvent_
e&&!e.defaultPrevented||"boolean"==typeof t.cancelable&&!0!==t.cancelable||t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&((0,E.JH)(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(P.A.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&((0,E.JH)(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(E.JH),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const k=F,z="postrender",j="loadstart",G="loadend",B="layergroup",U="size",q="target",V="view"
var Z=i(1358),W=i(5714),Y=i(5548),X=i(6249)
class H extends n.A{constructor(t){super()
const e=t.element
!e||t.target||e.style.pointerEvents||(e.style.pointerEvents="auto"),this.element=e||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){(0,S.bf)(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&&(0,S.bf)(this.element)
for(let e=0,i=this.listenerKeys.length;e<i;++e)(0,E.JH)(this.listenerKeys[e])
this.listenerKeys.length=0,this.map_=t,t&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==l.tV&&this.listenerKeys.push((0,E.KT)(t,z,this.render,this)),t.render())}render(t){}setTarget(t){this.target_="string"==typeof t?document.getElementById(t):t}}const $=H
var K=i(7195)
const J=class extends ${constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===t.collapsed||t.collapsed,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=void 0!==t.collapsible,this.collapsible_=void 0===t.collapsible||t.collapsible,this.collapsible_||(this.collapsed_=!1)
const e=void 0!==t.className?t.className:"ol-attribution",i=void 0!==t.tipLabel?t.tipLabel:"Attributions",n=void 0!==t.expandClassName?t.expandClassName:e+"-expand",r=void 0!==t.collapseLabel?t.collapseLabel:"",o=void 0!==t.collapseClassName?t.collapseClassName:e+"-collapse"
"string"==typeof r?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=r,this.collapseLabel_.className=o):this.collapseLabel_=r
const s=void 0!==t.label?t.label:"i"
"string"==typeof s?(this.label_=document.createElement("span"),this.label_.textContent=s,this.label_.className=n):this.label_=s
const a=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_
this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(a),this.toggleButton_.addEventListener(P.A.CLICK,this.handleClick_.bind(this),!1)
const l=e+" "+b.XI+" "+b.$N+(this.collapsed_&&this.collapsible_?" "+b.nT:"")+(this.collapsible_?"":" ol-uncollapsible"),h=this.element
h.className=l,h.appendChild(this.toggleButton_),h.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const e=Array.from(new Set(this.getMap().getAllLayers().flatMap((e=>e.getAttributions(t))))),i=!this.getMap().getAllLayers().some((t=>t.getSource()&&!1===t.getSource().getAttributionsCollapsible()))
return this.overrideCollapsible_||this.setCollapsible(i),e}async updateElement_(t){if(!t)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1))
const e=await Promise.all(this.collectSourceAttributions_(t).map((t=>(0,l.hq)((()=>t))))),i=e.length>0
if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!(0,K.aI)(e,this.renderedAttributions_)){(0,S.gS)(this.ulElement_)
for(let t=0,i=e.length;t<i;++t){const i=document.createElement("li")
i.innerHTML=e[t],this.ulElement_.appendChild(i)}this.renderedAttributions_=e}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(b.nT),this.collapsed_?(0,S.fo)(this.collapseLabel_,this.label_):(0,S.fo)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}}
var Q=i(7849)
const tt=class extends ${constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target})
const e=void 0!==t.className?t.className:"ol-rotate",i=void 0!==t.label?t.label:"",n=void 0!==t.compassClassName?t.compassClassName:"ol-compass"
this.label_=null,"string"==typeof i?(this.label_=document.createElement("span"),this.label_.className=n,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(n))
const r=t.tipLabel?t.tipLabel:"Reset rotation",o=document.createElement("button")
o.className=e+"-reset",o.setAttribute("type","button"),o.title=r,o.appendChild(this.label_),o.addEventListener(P.A.CLICK,this.handleClick_.bind(this),!1)
const s=e+" "+b.XI+" "+b.$N,a=this.element
a.className=s,a.appendChild(o),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=void 0!==t.duration?t.duration:250,this.autoHide_=void 0===t.autoHide||t.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(b.Si)}handleClick_(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView()
if(!t)return
const e=t.getRotation()
void 0!==e&&(this.duration_>0&&e%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:Q.vT}):t.setRotation(0))}render(t){const e=t.frameState
if(!e)return
const i=e.viewState.rotation
if(i!=this.rotation_){const t="rotate("+i+"rad)"
if(this.autoHide_){const t=this.element.classList.contains(b.Si)
t||0!==i?t&&0!==i&&this.element.classList.remove(b.Si):this.element.classList.add(b.Si)}this.label_.style.transform=t}this.rotation_=i}},et=class extends ${constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target})
const e=void 0!==t.className?t.className:"ol-zoom",i=void 0!==t.delta?t.delta:1,n=void 0!==t.zoomInClassName?t.zoomInClassName:e+"-in",r=void 0!==t.zoomOutClassName?t.zoomOutClassName:e+"-out",o=void 0!==t.zoomInLabel?t.zoomInLabel:"+",s=void 0!==t.zoomOutLabel?t.zoomOutLabel:"",a=void 0!==t.zoomInTipLabel?t.zoomInTipLabel:"Zoom in",l=void 0!==t.zoomOutTipLabel?t.zoomOutTipLabel:"Zoom out",h=document.createElement("button")
h.className=n,h.setAttribute("type","button"),h.title=a,h.appendChild("string"==typeof o?document.createTextNode(o):o),h.addEventListener(P.A.CLICK,this.handleClick_.bind(this,i),!1)
const u=document.createElement("button")
u.className=r,u.setAttribute("type","button"),u.title=l,u.appendChild("string"==typeof s?document.createTextNode(s):s),u.addEventListener(P.A.CLICK,this.handleClick_.bind(this,-i),!1)
const c=e+" "+b.XI+" "+b.$N,d=this.element
d.className=c,d.appendChild(h),d.appendChild(u),this.duration_=void 0!==t.duration?t.duration:250}handleClick_(t,e){e.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const e=this.getMap().getView()
if(!e)return
const i=e.getZoom()
if(void 0!==i){const n=e.getConstrainedZoom(i+t)
this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:n,duration:this.duration_,easing:Q.vT})):e.setZoom(n)}}},it="active"
class nt extends n.A{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(it)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(it,t)}setMap(t){this.map_=t}}function rt(t,e,i,n){const r=t.getZoom()
if(void 0===r)return
const o=t.getConstrainedZoom(r+e),s=t.getResolutionForZoom(o)
t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:s,anchor:i,duration:void 0!==n?n:250,easing:Q.vT})}const ot=nt,st=class extends ot{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:250}handleEvent(t){let e=!1
if(t.type==L.DBLCLICK){const i=t.originalEvent,n=t.map,r=t.coordinate,o=i.shiftKey?-this.delta_:this.delta_
rt(n.getView(),o,r,this.duration_),i.preventDefault(),e=!0}return!e}}
function at(t){const e=t.length
let i=0,n=0
for(let r=0;r<e;r++)i+=t[r].clientX,n+=t[r].clientY
return{clientX:i/e,clientY:n/e}}const lt=class extends ot{constructor(t){super(t=t||{}),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0
let e=!1
if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==L.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault()
else if(t.type==L.POINTERUP){const e=this.handleUpEvent(t)
this.handlingDownUpSequence=e&&this.targetPointers.length>0}}else if(t.type==L.POINTERDOWN){const i=this.handleDownEvent(t)
this.handlingDownUpSequence=i,e=this.stopDown(i)}else t.type==L.POINTERMOVE&&this.handleMoveEvent(t)
return!e}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}}
function ht(t){const e=arguments
return function(t){let i=!0
for(let n=0,r=e.length;n<r&&(i=i&&e[n](t),i);++n);return i}}const ut=function(t){const e=t.originalEvent
return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},ct=function(t){return!t.map.getTargetElement().hasAttribute("tabindex")||function(t){const e=t.map.getTargetElement(),i=t.map.getOwnerDocument().activeElement
return e.contains(i)}(t)},dt=l.rT,ft=function(t){const e=t.originalEvent
return 0==e.button&&!(N.j&&N.ew&&e.ctrlKey)},pt=function(t){const e=t.originalEvent
return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},gt=function(t){const e=t.originalEvent
return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},_t=function(t){const e=t.originalEvent,i=e.target.tagName
return"INPUT"!==i&&"SELECT"!==i&&"TEXTAREA"!==i&&!e.target.isContentEditable},mt=function(t){const e=t.originalEvent
return(0,X.v)(void 0!==e,"mapBrowserEvent must originate from a pointer event"),"mouse"==e.pointerType},yt=function(t){const e=t.originalEvent
return(0,X.v)(void 0!==e,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&0===e.button},vt=class extends lt{constructor(t){super({stopDown:l.W8}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1
const e=t.condition?t.condition:ht(pt,yt)
this.condition_=t.onFocusOnly?ht(ct,e):e,this.noKinetic_=!1}handleDragEvent(t){const e=t.map
this.panning_||(this.panning_=!0,e.getView().beginInteraction())
const i=this.targetPointers,n=e.getEventPixel(at(i))
if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(n[0],n[1]),this.lastCentroid){const e=[this.lastCentroid[0]-n[0],n[1]-this.lastCentroid[1]],i=t.map.getView();(0,p.hs)(e,i.getResolution()),(0,p.e$)(e,i.getRotation()),i.adjustCenterInternal(e)}}else this.kinetic_&&this.kinetic_.begin()
this.lastCentroid=n,this.lastPointersCount_=i.length,t.originalEvent.preventDefault()}handleUpEvent(t){const e=t.map,i=e.getView()
if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const t=this.kinetic_.getDistance(),n=this.kinetic_.getAngle(),r=i.getCenterInternal(),o=e.getPixelFromCoordinateInternal(r),s=e.getCoordinateFromPixelInternal([o[0]-t*Math.cos(n),o[1]-t*Math.sin(n)])
i.animateInternal({center:i.getConstrainedCenter(s),duration:500,easing:Q.vT})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const e=t.map.getView()
return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}
var xt=i(3513)
const bt=class extends lt{constructor(t){t=t||{},super({stopDown:l.W8}),this.condition_=t.condition?t.condition:ut,this.lastAngle_=void 0,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(t){if(!mt(t))return
const e=t.map,i=e.getView()
if(i.getConstraints().rotation===xt.b8)return
const n=e.getSize(),r=t.pixel,o=Math.atan2(n[1]/2-r[1],r[0]-n[0]/2)
if(void 0!==this.lastAngle_){const t=o-this.lastAngle_
i.adjustRotationInternal(-t)}this.lastAngle_=o}handleUpEvent(t){return!mt(t)||(t.map.getView().endInteraction(this.duration_),!1)}handleDownEvent(t){return!(!mt(t)||!ft(t)||!this.condition_(t)||(t.map.getView().beginInteraction(),this.lastAngle_=void 0,0))}}
var wt=i(5631)
class Et extends a.A{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,e=this.endPixel_,i="px",n=this.element_.style
n.left=Math.min(t[0],e[0])+i,n.top=Math.min(t[1],e[1])+i,n.width=Math.abs(e[0]-t[0])+i,n.height=Math.abs(e[1]-t[1])+i}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_)
const t=this.element_.style
t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const t=this.startPixel_,e=this.endPixel_,i=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_)
i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new wt.Ay([i])}getGeometry(){return this.geometry_}}const St=Et
class Ct extends I.Ay{constructor(t,e,i){super(t),this.coordinate=e,this.mapBrowserEvent=i}}const Pt=class extends lt{constructor(t){super(),this.on,this.once,this.un,t=t||{},this.box_=new St(t.className||"ol-dragbox"),this.minArea_=void 0!==t.minArea?t.minArea:64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition?t.condition:ft,this.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(t,e,i){const n=i[0]-e[0],r=i[1]-e[1]
return n*n+r*r>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Ct("boxdrag",t.coordinate,t))}handleUpEvent(t){this.box_.setMap(null)
const e=this.boxEndCondition_(t,this.startPixel_,t.pixel)
return e&&this.onBoxEnd(t),this.dispatchEvent(new Ct(e?"boxend":"boxcancel",t.coordinate,t)),!1}handleDownEvent(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Ct("boxstart",t.coordinate,t)),!0)}onBoxEnd(t){}},Tt=class extends Pt{constructor(t){super({condition:(t=t||{}).condition?t.condition:gt,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=void 0!==t.duration?t.duration:200,this.out_=void 0!==t.out&&t.out}onBoxEnd(t){const e=this.getMap().getView()
let i=this.getGeometry()
if(this.out_){const t=e.rotatedExtentForGeometry(i),n=e.getResolutionForExtentInternal(t),r=e.getResolution()/n
i=i.clone(),i.scale(r*r)}e.fitInternal(i,{duration:this.duration_,easing:Q.vT})}},It="ArrowLeft",Mt="ArrowRight",At="ArrowDown",Rt=class extends ot{constructor(t){super(),t=t||{},this.defaultCondition_=function(t){return pt(t)&&_t(t)},this.condition_=void 0!==t.condition?t.condition:this.defaultCondition_,this.duration_=void 0!==t.duration?t.duration:100,this.pixelDelta_=void 0!==t.pixelDelta?t.pixelDelta:128}handleEvent(t){let e=!1
if(t.type==P.A.KEYDOWN){const i=t.originalEvent,n=i.key
if(this.condition_(t)&&(n==At||n==It||n==Mt||"ArrowUp"==n)){const r=t.map.getView(),o=r.getResolution()*this.pixelDelta_
let s=0,a=0
n==At?a=-o:n==It?s=-o:n==Mt?s=o:a=o
const l=[s,a];(0,p.e$)(l,r.getRotation()),function(t,e,i){const n=t.getCenterInternal()
if(n){const r=[n[0]+e[0],n[1]+e[1]]
t.animateInternal({duration:void 0!==i?i:250,easing:Q.sn,center:t.getConstrainedCenter(r)})}}(r,l,this.duration_),i.preventDefault(),e=!0}}return!e}},Lt=class extends ot{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:function(t){return!function(t){const e=t.originalEvent
return N.ew?e.metaKey:e.ctrlKey}(t)&&_t(t)},this.delta_=t.delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:100}handleEvent(t){let e=!1
if(t.type==P.A.KEYDOWN||t.type==P.A.KEYPRESS){const i=t.originalEvent,n=i.key
if(this.condition_(t)&&("+"===n||"-"===n)){const r=t.map,o="+"===n?this.delta_:-this.delta_
rt(r.getView(),o,void 0,this.duration_),i.preventDefault(),e=!0}}return!e}},Ot=class{constructor(t,e,i){this.decay_=t,this.minVelocity_=e,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,e){this.points_.push(t,e,Date.now())}end(){if(this.points_.length<6)return!1
const t=Date.now()-this.delay_,e=this.points_.length-3
if(this.points_[e+2]<t)return!1
let i=e-3
for(;i>0&&this.points_[i+2]>t;)i-=3
const n=this.points_[e+2]-this.points_[i+2]
if(n<1e3/60)return!1
const r=this.points_[e]-this.points_[i],o=this.points_[e+1]-this.points_[i+1]
return this.angle_=Math.atan2(o,r),this.initialVelocity_=Math.sqrt(r*r+o*o)/n,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}
var Dt=i(5306)
const Nt=class extends ot{constructor(t){super(t=t||{}),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=void 0!==t.maxDelta?t.maxDelta:1,this.duration_=void 0!==t.duration?t.duration:250,this.timeout_=void 0!==t.timeout?t.timeout:80,this.useAnchor_=void 0===t.useAnchor||t.useAnchor,this.constrainResolution_=void 0!==t.constrainResolution&&t.constrainResolution
const e=t.condition?t.condition:dt
this.condition_=t.onFocusOnly?ht(ct,e):e,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0
const t=this.getMap()
t&&t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(t){if(!this.condition_(t))return!0
if(t.type!==P.A.WHEEL)return!0
const e=t.map,i=t.originalEvent
let n
if(i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==P.A.WHEEL&&(n=i.deltaY,N._p&&i.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(n/=N.cr),i.deltaMode===WheelEvent.DOM_DELTA_LINE&&(n*=40)),0===n)return!1
this.lastDelta_=n
const r=Date.now()
void 0===this.startTime_&&(this.startTime_=r),(!this.mode_||r-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(n)<4?"trackpad":"wheel")
const o=e.getView()
if("trackpad"===this.mode_&&!o.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),o.adjustZoom(-n/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=r,!1
this.totalDelta_+=n
const s=Math.max(this.timeout_-(r-this.startTime_),0)
return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,e),s),!1}handleWheelZoom_(t){const e=t.getView()
e.getAnimating()&&e.cancelAnimations()
let i=-(0,Dt.qE)(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),rt(e,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}},Ft=class extends lt{constructor(t){const e=t=t||{}
e.stopDown||(e.stopDown=l.W8),super(e),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==t.threshold?t.threshold:.3,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(t){let e=0
const i=this.targetPointers[0],n=this.targetPointers[1],r=Math.atan2(n.clientY-i.clientY,n.clientX-i.clientX)
if(void 0!==this.lastAngle_){const t=r-this.lastAngle_
this.rotationDelta_+=t,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=t}this.lastAngle_=r
const o=t.map,s=o.getView()
s.getConstraints().rotation!==xt.b8&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(at(this.targetPointers))),this.rotating_&&(o.render(),s.adjustRotationInternal(e,this.anchor_)))}handleUpEvent(t){return!(this.targetPointers.length<2&&(t.map.getView().endInteraction(this.duration_),1))}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map
return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}},kt=class extends lt{constructor(t){const e=t=t||{}
e.stopDown||(e.stopDown=l.W8),super(e),this.anchor_=null,this.duration_=void 0!==t.duration?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let e=1
const i=this.targetPointers[0],n=this.targetPointers[1],r=i.clientX-n.clientX,o=i.clientY-n.clientY,s=Math.sqrt(r*r+o*o)
void 0!==this.lastDistance_&&(e=this.lastDistance_/s),this.lastDistance_=s
const a=t.map,l=a.getView()
1!=e&&(this.lastScaleDelta_=e),this.anchor_=a.getCoordinateFromPixelInternal(a.getEventPixel(at(this.targetPointers))),a.render(),l.adjustResolutionInternal(e,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){const e=t.map.getView(),i=this.lastScaleDelta_>1?1:-1
return e.endInteraction(this.duration_,i),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map
return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}
var zt=i(3906),jt=i(1673),Gt=i(7307)
function Bt(t){t instanceof f.A?t.setMapInternal(null):t instanceof T.A&&t.getLayers().forEach(Bt)}function Ut(t,e){if(t instanceof f.A)t.setMapInternal(e)
else if(t instanceof T.A){const i=t.getLayers().getArray()
for(let t=0,n=i.length;t<n;++t)Ut(i[t],e)}}class qt extends n.A{constructor(t){super(),t=t||{},this.on,this.once,this.un
const e=function(t){let e=null
void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget)
const i={},n=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new T.A({layers:t.layers})
let o,s,a
return i[B]=n,i[q]=t.target,i[V]=t.view instanceof W.default?t.view:new W.default,void 0!==t.controls&&(Array.isArray(t.controls)?o=new r.A(t.controls.slice()):((0,X.v)("function"==typeof t.controls.getArray,"Expected `controls` to be an array or an `ol/Collection.js`"),o=t.controls)),void 0!==t.interactions&&(Array.isArray(t.interactions)?s=new r.A(t.interactions.slice()):((0,X.v)("function"==typeof t.interactions.getArray,"Expected `interactions` to be an array or an `ol/Collection.js`"),s=t.interactions)),void 0!==t.overlays?Array.isArray(t.overlays)?a=new r.A(t.overlays.slice()):((0,X.v)("function"==typeof t.overlays.getArray,"Expected `overlays` to be an array or an `ol/Collection.js`"),a=t.overlays):a=new r.A,{controls:o,interactions:s,keyboardEventTarget:e,overlays:a,values:i}}(t)
this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=void 0!==t.maxTilesLoading?t.maxTilesLoading:16,this.pixelRatio_=void 0!==t.pixelRatio?t.pixelRatio:N.cr,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=(0,u.vt)(),this.pixelToCoordinateTransform_=(0,u.vt)(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=e.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver((()=>this.updateSize())),this.controls=e.controls||function(t){t=t||{}
const e=new r.A
return(void 0===t.zoom||t.zoom)&&e.push(new et(t.zoomOptions)),(void 0===t.rotate||t.rotate)&&e.push(new tt(t.rotateOptions)),(void 0===t.attribution||t.attribution)&&e.push(new J(t.attributionOptions)),e}(),this.interactions=e.interactions||function(t){t=t||{}
const e=new r.A,i=new Ot(-.005,.05,100)
return(void 0===t.altShiftDragRotate||t.altShiftDragRotate)&&e.push(new bt),(void 0===t.doubleClickZoom||t.doubleClickZoom)&&e.push(new st({delta:t.zoomDelta,duration:t.zoomDuration})),(void 0===t.dragPan||t.dragPan)&&e.push(new vt({onFocusOnly:t.onFocusOnly,kinetic:i})),(void 0===t.pinchRotate||t.pinchRotate)&&e.push(new Ft),(void 0===t.pinchZoom||t.pinchZoom)&&e.push(new kt({duration:t.zoomDuration})),(void 0===t.keyboard||t.keyboard)&&(e.push(new Rt),e.push(new Lt({delta:t.zoomDelta,duration:t.zoomDuration}))),(void 0===t.mouseWheelZoom||t.mouseWheelZoom)&&e.push(new Nt({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration})),(void 0===t.shiftDragZoom||t.shiftDragZoom)&&e.push(new Tt({duration:t.zoomDuration})),e}({onFocusOnly:!0}),this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new Z.A(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(B,this.handleLayerGroupChanged_),this.addChangeListener(V,this.handleViewChanged_),this.addChangeListener(U,this.handleSizeChanged_),this.addChangeListener(q,this.handleTargetChanged_),this.setProperties(e.values)
const i=this
!t.view||t.view instanceof W.default||t.view.then((function(t){i.setView(new W.default(t))})),this.controls.addEventListener(o.A.ADD,(t=>{t.element.setMap(this)})),this.controls.addEventListener(o.A.REMOVE,(t=>{t.element.setMap(null)})),this.interactions.addEventListener(o.A.ADD,(t=>{t.element.setMap(this)})),this.interactions.addEventListener(o.A.REMOVE,(t=>{t.element.setMap(null)})),this.overlays_.addEventListener(o.A.ADD,(t=>{this.addOverlayInternal_(t.element)})),this.overlays_.addEventListener(o.A.REMOVE,(t=>{const e=t.element.getId()
void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)})),this.controls.forEach((t=>{t.setMap(this)})),this.interactions.forEach((t=>{t.setMap(this)})),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){Ut(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const e=t.getId()
void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,e,i){if(!this.frameState_||!this.renderer_)return
const n=this.getCoordinateFromPixelInternal(t),r=void 0!==(i=void 0!==i?i:{}).hitTolerance?i.hitTolerance:0,o=void 0!==i.layerFilter?i.layerFilter:l.rT,s=!1!==i.checkWrapped
return this.renderer_.forEachFeatureAtCoordinate(n,this.frameState_,r,s,e,null,o,null)}getFeaturesAtPixel(t,e){const i=[]
return this.forEachFeatureAtPixel(t,(function(t){i.push(t)}),e),i}getAllLayers(){const t=[]
return function e(i){i.forEach((function(i){i instanceof T.A?e(i.getLayers()):t.push(i)}))}(this.getLayers()),t}hasFeatureAtPixel(t,e){if(!this.frameState_||!this.renderer_)return!1
const i=this.getCoordinateFromPixelInternal(t),n=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:l.rT,r=void 0!==e.hitTolerance?e.hitTolerance:0,o=!1!==e.checkWrapped
return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,r,o,n,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const e=this.viewport_.getBoundingClientRect(),i=this.getSize(),n=e.width/i[0],r=e.height/i[1],o="changedTouches"in t?t.changedTouches[0]:t
return[(o.clientX-e.left)/n,(o.clientY-e.top)/r]}getTarget(){return this.get(q)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(t){return(0,zt.te)(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const e=this.frameState_
return e?(0,u.Bb)(e.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const e=this.overlayIdIndex_[t.toString()]
return void 0!==e?e:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(B)}setLayers(t){const e=this.getLayerGroup()
if(t instanceof r.A)return void e.setLayers(t)
const i=e.getLayers()
i.clear(),i.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray()
for(let e=0,i=t.length;e<i;++e){const i=t[e]
if(!i.visible)continue
const n=i.layer.getRenderer()
if(n&&!n.ready)return!0
const r=i.layer.getSource()
if(r&&r.loading)return!0}return!1}getPixelFromCoordinate(t){const e=(0,zt.Ad)(t,this.getView().getProjection())
return this.getPixelFromCoordinateInternal(e)}getPixelFromCoordinateInternal(t){const e=this.frameState_
return e?(0,u.Bb)(e.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(U)}getView(){return this.get(V)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement()
return t?t.ownerDocument:document}getTilePriority(t,e,i,n){return(0,Z.z)(this.frameState_,t,e,i,n)}handleBrowserEvent(t,e){e=e||t.type
const i=new R(e,this,t)
this.handleMapBrowserEvent(i)}handleMapBrowserEvent(t){if(!this.frameState_)return
const e=t.originalEvent,i=e.type
if(i===O||i===P.A.WHEEL||i===P.A.KEYDOWN){const t=this.getOwnerDocument(),i=this.viewport_.getRootNode?this.viewport_.getRootNode():t,n=e.target
if(this.overlayContainerStopEvent_.contains(n)||!(i===t?t.documentElement:i).contains(n))return}if(t.frameState=this.frameState_,!1!==this.dispatchEvent(t)){const e=this.getInteractions().getArray().slice()
for(let i=e.length-1;i>=0;i--){const n=e[i]
if(n.getMap()===this&&n.getActive()&&this.getTargetElement()&&(!n.handleEvent(t)||t.propagationStopped))break}}}handlePostRender(){const t=this.frameState_,e=this.tileQueue_
if(!e.isEmpty()){let i=this.maxTilesLoading_,n=i
if(t){const e=t.viewHints
if(e[Y.A.ANIMATING]||e[Y.A.INTERACTING]){const e=Date.now()-t.time>8
i=e?0:8,n=e?0:2}}e.getTilesLoading()<i&&(e.reprioritize(),e.loadMoreTiles(i,n))}t&&this.renderer_&&!t.animate&&(!0===this.renderComplete_?(this.hasListener(x.A.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(x.A.RENDERCOMPLETE,t),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new A(G,this,t)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new A(j,this,t))))
const i=this.postRenderFunctions_
for(let n=0,r=i.length;n<r;++n)i[n](this,t)
i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let t=0,e=this.targetChangeHandlerKeys_.length;t<e;++t)(0,E.JH)(this.targetChangeHandlerKeys_[t])
this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(P.A.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(P.A.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,(0,S.bf)(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_)
const t=this.targetElement_.getRootNode()
t instanceof ShadowRoot&&this.resizeObserver_.unobserve(t.host),this.setSize(void 0)}const t=this.getTarget(),e="string"==typeof t?document.getElementById(t):t
if(this.targetElement_=e,e){e.appendChild(this.viewport_),this.renderer_||(this.renderer_=new C(this)),this.mapBrowserEventHandler_=new k(this,this.moveTolerance_)
for(const e in L)this.mapBrowserEventHandler_.addEventListener(L[e],this.handleMapBrowserEvent.bind(this))
this.viewport_.addEventListener(P.A.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(P.A.WHEEL,this.boundHandleBrowserEvent_,!!N.FT&&{passive:!1})
const t=this.keyboardEventTarget_?this.keyboardEventTarget_:e
this.targetChangeHandlerKeys_=[(0,E.KT)(t,P.A.KEYDOWN,this.handleBrowserEvent,this),(0,E.KT)(t,P.A.KEYPRESS,this.handleBrowserEvent,this)]
const i=e.getRootNode()
i instanceof ShadowRoot&&this.resizeObserver_.observe(i.host),this.resizeObserver_.observe(e)}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0)
this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&((0,E.JH)(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&((0,E.JH)(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null)
const t=this.getView()
t&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=(0,E.KT)(t,y.A.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=(0,E.KT)(t,P.A.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(E.JH),this.layerGroupPropertyListenerKeys_=null)
const t=this.getLayerGroup()
t&&(this.handleLayerAdd_(new T.i("addlayer",t)),this.layerGroupPropertyListenerKeys_=[(0,E.KT)(t,y.A.PROPERTYCHANGE,this.render,this),(0,E.KT)(t,P.A.CHANGE,this.render,this),(0,E.KT)(t,"addlayer",this.handleLayerAdd_,this),(0,E.KT)(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const t=this.getLayerGroup().getLayerStatesArray()
for(let e=0,i=t.length;e<i;++e){const i=t[e].layer
i.hasRenderer()&&i.getRenderer().handleFontsChanged()}}render(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){Bt(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const e=this.getSize(),i=this.getView(),n=this.frameState_
let r=null
if(void 0!==e&&(0,jt.Ie)(e)&&i&&i.isDef()){const n=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),o=i.getState()
if(r={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:(0,c.Bg)(o.center,o.resolution,o.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:o,viewHints:n,wantedTiles:{},mapId:(0,h.v6)(this),renderTargets:{}},o.nextCenter&&o.nextResolution){const t=isNaN(o.nextRotation)?o.rotation:o.nextRotation
r.nextExtent=(0,c.Bg)(o.nextCenter,o.nextResolution,t,e)}}this.frameState_=r,this.renderer_.renderFrame(r),r&&(r.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,r.postRenderFunctions),n&&(!this.previousExtent_||!(0,c.Im)(this.previousExtent_)&&!(0,c.aI)(r.extent,this.previousExtent_))&&(this.dispatchEvent(new A("movestart",this,n)),this.previousExtent_=(0,c.aZ)(this.previousExtent_)),this.previousExtent_&&!r.viewHints[Y.A.ANIMATING]&&!r.viewHints[Y.A.INTERACTING]&&!(0,c.aI)(r.extent,this.previousExtent_)&&(this.dispatchEvent(new A("moveend",this,r)),(0,c.o8)(r.extent,this.previousExtent_))),this.dispatchEvent(new A(z,this,r)),this.renderComplete_=this.hasListener(j)||this.hasListener(G)||this.hasListener(x.A.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout((()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()}),0))}setLayerGroup(t){const e=this.getLayerGroup()
e&&this.handleLayerRemove_(new T.i("removelayer",e)),this.set(B,t)}setSize(t){this.set(U,t)}setTarget(t){this.set(q,t)}setView(t){if(!t||t instanceof W.default)return void this.set(V,t)
this.set(V,new W.default)
const e=this
t.then((function(t){e.setView(new W.default(t))}))}updateSize(){const t=this.getTargetElement()
let e
if(t){const i=getComputedStyle(t),n=t.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),r=t.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth)
isNaN(n)||isNaN(r)||(e=[n,r],!(0,jt.Ie)(e)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&(0,Gt.R8)("No map visible because the map container's width or height are 0."))}const i=this.getSize()
!e||i&&(0,K.aI)(e,i)||(this.setSize(e),this.updateViewportSize_(e))}updateViewportSize_(t){const e=this.getView()
e&&e.setViewportSize(t)}}const Vt=qt},1051:(t,e,i)=>{"use strict"
i.d(e,{A:()=>u})
var n=i(406),r=i(7067),o=i(8197),s=i(1736),a=i(7931)
class l extends n.Ay{constructor(t,e,i){super(t),this.key=e,this.oldValue=i}}class h extends o.A{constructor(t){super(),this.on,this.once,this.un,(0,s.v6)(this),this.values_=null,void 0!==t&&this.setProperties(t)}get(t){let e
return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(t,e){let i
i=`change:${t}`,this.hasListener(i)&&this.dispatchEvent(new l(i,t,e)),i=r.A.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new l(i,t,e))}addChangeListener(t,e){this.addEventListener(`change:${t}`,e)}removeChangeListener(t,e){this.removeEventListener(`change:${t}`,e)}set(t,e,i){const n=this.values_||(this.values_={})
if(i)n[t]=e
else{const i=n[t]
n[t]=e,i!==e&&this.notify(t,i)}}setProperties(t,e){for(const i in t)this.set(i,t[i],e)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,e){if(this.values_&&t in this.values_){const i=this.values_[t]
delete this.values_[t],(0,a.p)(this.values_)&&(this.values_=null),e||this.notify(t,i)}}}const u=h},7067:(t,e,i)=>{"use strict"
i.d(e,{A:()=>n})
const n={PROPERTYCHANGE:"propertychange"}},8197:(t,e,i)=>{"use strict"
i.d(e,{A:()=>a})
var n=i(669),r=i(8638),o=i(4757)
class s extends n.A{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(r.A.CHANGE)}getRevision(){return this.revision_}onInternal(t,e){if(Array.isArray(t)){const i=t.length,n=new Array(i)
for(let r=0;r<i;++r)n[r]=(0,o.KT)(this,t[r],e)
return n}return(0,o.KT)(this,t,e)}onceInternal(t,e){let i
if(Array.isArray(t)){const n=t.length
i=new Array(n)
for(let r=0;r<n;++r)i[r]=(0,o.Jz)(this,t[r],e)}else i=(0,o.Jz)(this,t,e)
return e.ol_key=i,i}unInternal(t,e){const i=e.ol_key
if(i)!function(t){if(Array.isArray(t))for(let e=0,i=t.length;e<i;++e)(0,o.JH)(t[e])
else(0,o.JH)(t)}(i)
else if(Array.isArray(t))for(let n=0,r=t.length;n<r;++n)this.removeEventListener(t[n],e)
else this.removeEventListener(t,e)}}s.prototype.on,s.prototype.once,s.prototype.un
const a=s},7912:(t,e,i)=>{"use strict"
i.d(e,{A:()=>h})
var n=i(669),r=i(8638),o=i(699),s=i(1736),a=i(7849)
class l extends n.A{constructor(t,e,i){super(),i=i||{},this.tileCoord=t,this.state=e,this.interimTile=null,this.key="",this.transition_=void 0===i.transition?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(r.A.CHANGE)}release(){this.state===o.A.ERROR&&this.setState(o.A.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){let t=this.interimTile
if(!t)return this
do{if(t.getState()==o.A.LOADED)return this.transition_=0,t
t=t.interimTile}while(t)
return this}refreshInterimChain(){let t=this.interimTile
if(!t)return
let e=this
do{if(t.getState()==o.A.LOADED){t.interimTile=null
break}t.getState()==o.A.LOADING?e=t:t.getState()==o.A.IDLE?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==o.A.ERROR&&this.state>t)throw new Error("Tile load sequence violation")
this.state=t,this.changed()}load(){(0,s.b0)()}getAlpha(t,e){if(!this.transition_)return 1
let i=this.transitionStarts_[t]
if(i){if(-1===i)return 1}else i=e,this.transitionStarts_[t]=i
const n=e-i+1e3/60
return n>=this.transition_?1:(0,a.a6)(n/this.transition_)}inTransition(t){return!!this.transition_&&-1!==this.transitionStarts_[t]}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}}const h=l},1358:(t,e,i)=>{"use strict"
i.d(e,{A:()=>h,z:()=>u})
var n=i(8638),r=i(6249),o=i(7931)
const s=1/0,a=class{constructor(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,(0,o.I)(this.queuedElements_)}dequeue(){const t=this.elements_,e=this.priorities_,i=t[0]
1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0))
const n=this.keyFunction_(i)
return delete this.queuedElements_[n],i}enqueue(t){(0,r.v)(!(this.keyFunction_(t)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue")
const e=this.priorityFunction_(t)
return e!=s&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(t){return 2*t+1}getRightChildIndex_(t){return 2*t+2}getParentIndex_(t){return t-1>>1}heapify_(){let t
for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return 0===this.elements_.length}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const e=this.elements_,i=this.priorities_,n=e.length,r=e[t],o=i[t],s=t
for(;t<n>>1;){const r=this.getLeftChildIndex_(t),o=this.getRightChildIndex_(t),s=o<n&&i[o]<i[r]?o:r
e[t]=e[s],i[t]=i[s],t=s}e[t]=r,i[t]=o,this.siftDown_(s,t)}siftDown_(t,e){const i=this.elements_,n=this.priorities_,r=i[e],o=n[e]
for(;e>t;){const t=this.getParentIndex_(e)
if(!(n[t]>o))break
i[e]=i[t],n[e]=n[t],e=t}i[e]=r,n[e]=o}reprioritize(){const t=this.priorityFunction_,e=this.elements_,i=this.priorities_
let n=0
const r=e.length
let o,a,l
for(a=0;a<r;++a)o=e[a],l=t(o),l==s?delete this.queuedElements_[this.keyFunction_(o)]:(i[n]=l,e[n++]=o)
e.length=n,i.length=n,this.heapify_()}}
var l=i(699)
const h=class extends a{constructor(t,e){super((function(e){return t.apply(null,e)}),(function(t){return t[0].getKey()})),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=e,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const e=super.enqueue(t)
return e&&t[0].addEventListener(n.A.CHANGE,this.boundHandleTileChange_),e}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const e=t.target,i=e.getState()
if(i===l.A.LOADED||i===l.A.ERROR||i===l.A.EMPTY){i!==l.A.ERROR&&e.removeEventListener(n.A.CHANGE,this.boundHandleTileChange_)
const t=e.getKey()
t in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[t],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,e){let i,n,r,o=0
for(;this.tilesLoading_<t&&o<e&&this.getCount()>0;)n=this.dequeue()[0],r=n.getKey(),i=n.getState(),i!==l.A.IDLE||r in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[r]=!0,++this.tilesLoading_,++o,n.load())}}
function u(t,e,i,n,r){if(!t||!(i in t.wantedTiles))return s
if(!t.wantedTiles[i][e.getKey()])return s
const o=t.viewState.center,a=n[0]-o[0],l=n[1]-o[1]
return 65536*Math.log(r)+Math.sqrt(a*a+l*l)/r}},5959:(t,e,i)=>{"use strict"
i.d(e,{A:()=>o,N:()=>r})
class n{constructor(t,e,i,n){this.minX=t,this.maxX=e,this.minY=i,this.maxY=n}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}function r(t,e,i,r,o){return void 0!==o?(o.minX=t,o.maxX=e,o.minY=i,o.maxY=r,o):new n(t,e,i,r)}const o=n},699:(t,e,i)=>{"use strict"
i.d(e,{A:()=>n})
const n={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},5714:(t,e,i)=>{"use strict"
i.r(e),i.d(e,{createCenterConstraint:()=>C,createResolutionConstraint:()=>P,createRotationConstraint:()=>T,default:()=>A,isNoopAnimation:()=>I})
var n=i(1051),r=i(5548)
const o={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"}
var s=i(9506),a=i(3906),l=i(419),h=i(8474),u=i(6249),c=i(5306)
function d(t,e,i){return function(n,r,o,s,a){if(!n)return
if(!r&&!e)return n
const l=e?0:o[0]*r,h=e?0:o[1]*r,u=a?a[0]:0,d=a?a[1]:0
let f=t[0]+l/2+u,p=t[2]-l/2+u,g=t[1]+h/2+d,_=t[3]-h/2+d
f>p&&(f=(p+f)/2,p=f),g>_&&(g=(_+g)/2,_=g)
let m=(0,c.qE)(n[0],f,p),y=(0,c.qE)(n[1],g,_)
if(s&&i&&r){const t=30*r
m+=-t*Math.log(1+Math.max(0,f-n[0])/t)+t*Math.log(1+Math.max(0,n[0]-p)/t),y+=-t*Math.log(1+Math.max(0,g-n[1])/t)+t*Math.log(1+Math.max(0,n[1]-_)/t)}return[m,y]}}function f(t){return t}var p=i(3236),g=i(7195)
function _(t,e,i,n){const r=(0,p.RG)(e)/i[0],o=(0,p.Oq)(e)/i[1]
return n?Math.min(t,Math.max(r,o)):Math.min(t,Math.min(r,o))}function m(t,e,i){let n=Math.min(t,e)
return n*=Math.log(1+50*Math.max(0,t/e-1))/50+1,i&&(n=Math.max(n,i),n/=Math.log(1+50*Math.max(0,i/t-1))/50+1),(0,c.qE)(n,i/2,2*e)}function y(t,e,i,n,r){return i=void 0===i||i,function(o,s,a,l){if(void 0!==o){const s=n?_(t,n,a,r):t
return i&&l?m(o,s,e):(0,c.qE)(o,e,s)}}}var v=i(3513),x=i(7849),b=i(5631)
const w=0
class E extends n.A{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=(0,a.Av)(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&(0,a.RJ)(),t.center&&(t.center=(0,a.Ad)(t.center,this.projection_)),t.extent&&(t.extent=(0,a.SD)(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const e=Object.assign({},t)
for(const a in o)delete e[a]
this.setProperties(e,!0)
const i=P(t)
this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=i.minZoom
const n=C(t),r=i.constraint,s=T(t)
this.constraints_={center:n,resolution:r,rotation:s},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let e=this.padding_
this.padding_=t
const i=this.getCenterInternal()
if(i){const n=t||[0,0,0,0]
e=e||[0,0,0,0]
const r=this.getResolution(),o=r/2*(n[3]-e[3]+e[1]-n[1]),s=r/2*(n[0]-e[0]+e[2]-n[2])
this.setCenterInternal([i[0]+o,i[1]-s])}}getUpdatedOptions_(t){const e=this.getProperties()
return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0)
const e=new Array(arguments.length)
for(let i=0;i<e.length;++i){let t=arguments[i]
t.center&&(t=Object.assign({},t),t.center=(0,a.Ad)(t.center,this.getProjection())),t.anchor&&(t=Object.assign({},t),t.anchor=(0,a.Ad)(t.anchor,this.getProjection())),e[i]=t}this.animateInternal.apply(this,e)}animateInternal(t){let e,i=arguments.length
i>1&&"function"==typeof arguments[i-1]&&(e=arguments[i-1],--i)
let n=0
for(;n<i&&!this.isDef();++n){const t=arguments[n]
t.center&&this.setCenterInternal(t.center),void 0!==t.zoom?this.setZoom(t.zoom):t.resolution&&this.setResolution(t.resolution),void 0!==t.rotation&&this.setRotation(t.rotation)}if(n===i)return void(e&&S(e,!0))
let o=Date.now(),s=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_
const h=[]
for(;n<i;++n){const t=arguments[n],i={start:o,complete:!1,anchor:t.anchor,duration:void 0!==t.duration?t.duration:1e3,easing:t.easing||x.T9,callback:e}
if(t.center&&(i.sourceCenter=s,i.targetCenter=t.center.slice(),s=i.targetCenter),void 0!==t.zoom?(i.sourceResolution=a,i.targetResolution=this.getResolutionForZoom(t.zoom),a=i.targetResolution):t.resolution&&(i.sourceResolution=a,i.targetResolution=t.resolution,a=i.targetResolution),void 0!==t.rotation){i.sourceRotation=l
const e=(0,c.xP)(t.rotation-l+Math.PI,2*Math.PI)-Math.PI
i.targetRotation=l+e,l=i.targetRotation}I(i)?i.complete=!0:o+=i.duration,h.push(i)}this.animations_.push(h),this.setHint(r.A.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[r.A.ANIMATING]>0}getInteracting(){return this.hints_[r.A.INTERACTING]>0}cancelAnimations(){let t
this.setHint(r.A.ANIMATING,-this.hints_[r.A.ANIMATING])
for(let e=0,i=this.animations_.length;e<i;++e){const i=this.animations_[e]
if(i[0].callback&&S(i[0].callback,!1),!t)for(let e=0,n=i.length;e<n;++e){const n=i[e]
if(!n.complete){t=n.anchor
break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return
const t=Date.now()
let e=!1
for(let i=this.animations_.length-1;i>=0;--i){const n=this.animations_[i]
let o=!0
for(let i=0,r=n.length;i<r;++i){const r=n[i]
if(r.complete)continue
const s=t-r.start
let a=r.duration>0?s/r.duration:1
a>=1?(r.complete=!0,a=1):o=!1
const l=r.easing(a)
if(r.sourceCenter){const t=r.sourceCenter[0],e=r.sourceCenter[1],i=r.targetCenter[0],n=r.targetCenter[1]
this.nextCenter_=r.targetCenter
const o=t+l*(i-t),s=e+l*(n-e)
this.targetCenter_=[o,s]}if(r.sourceResolution&&r.targetResolution){const t=1===l?r.targetResolution:r.sourceResolution+l*(r.targetResolution-r.sourceResolution)
if(r.anchor){const e=this.getViewportSize_(this.getRotation()),i=this.constraints_.resolution(t,0,e,!0)
this.targetCenter_=this.calculateCenterZoom(i,r.anchor)}this.nextResolution_=r.targetResolution,this.targetResolution_=t,this.applyTargetState_(!0)}if(void 0!==r.sourceRotation&&void 0!==r.targetRotation){const t=1===l?(0,c.xP)(r.targetRotation+Math.PI,2*Math.PI)-Math.PI:r.sourceRotation+l*(r.targetRotation-r.sourceRotation)
if(r.anchor){const e=this.constraints_.rotation(t,!0)
this.targetCenter_=this.calculateCenterRotate(e,r.anchor)}this.nextRotation_=r.targetRotation,this.targetRotation_=t}if(this.applyTargetState_(!0),e=!0,!r.complete)break}if(o){this.animations_[i]=null,this.setHint(r.A.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN
const t=n[0].callback
t&&S(t,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,e){let i
const n=this.getCenterInternal()
return void 0!==n&&(i=[n[0]-e[0],n[1]-e[1]],(0,h.e$)(i,t-this.getRotation()),(0,h.WQ)(i,e)),i}calculateCenterZoom(t,e){let i
const n=this.getCenterInternal(),r=this.getResolution()
return void 0!==n&&void 0!==r&&(i=[e[0]-t*(e[0]-n[0])/r,e[1]-t*(e[1]-n[1])/r]),i}getViewportSize_(t){const e=this.viewportSize_
if(t){const i=e[0],n=e[1]
return[Math.abs(i*Math.cos(t))+Math.abs(n*Math.sin(t)),Math.abs(i*Math.sin(t))+Math.abs(n*Math.cos(t))]}return e}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal()
return t?(0,a.te)(t,this.getProjection()):t}getCenterInternal(){return this.get(o.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){const e=this.calculateExtentInternal(t)
return(0,a.JR)(e,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_()
const e=this.getCenterInternal();(0,u.v)(e,"The view center is not defined")
const i=this.getResolution();(0,u.v)(void 0!==i,"The view resolution is not defined")
const n=this.getRotation()
return(0,u.v)(void 0!==n,"The view rotation is not defined"),(0,p.Bg)(e,i,n,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(o.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,e){return this.getResolutionForExtentInternal((0,a.SD)(t,this.getProjection()),e)}getResolutionForExtentInternal(t,e){e=e||this.getViewportSizeMinusPadding_()
const i=(0,p.RG)(t)/e[0],n=(0,p.Oq)(t)/e[1]
return Math.max(i,n)}getResolutionForValueFunction(t){t=t||2
const e=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,n=Math.log(e/i)/Math.log(t)
return function(i){return e/Math.pow(t,i*n)}}getRotation(){return this.get(o.ROTATION)}getValueForResolutionFunction(t){const e=Math.log(t||2),i=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,r=Math.log(i/n)/e
return function(t){return Math.log(i/t)/e/r}}getViewportSizeMinusPadding_(t){let e=this.getViewportSize_(t)
const i=this.padding_
return i&&(e=[e[0]-i[1]-i[3],e[1]-i[0]-i[2]]),e}getState(){const t=this.getProjection(),e=this.getResolution(),i=this.getRotation()
let n=this.getCenterInternal()
const r=this.padding_
if(r){const t=this.getViewportSizeMinusPadding_()
n=M(n,this.getViewportSize_(),[t[0]/2+r[3],t[1]/2+r[0]],e,i)}return{center:n.slice(0),projection:void 0!==t?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t
const e=this.getResolution()
return void 0!==e&&(t=this.getZoomForResolution(e)),t}getZoomForResolution(t){let e,i,n=this.minZoom_||0
if(this.resolutions_){const r=(0,g.FT)(this.resolutions_,t,1)
n=r,e=this.resolutions_[r],i=r==this.resolutions_.length-1?2:e/this.resolutions_[r+1]}else e=this.maxResolution_,i=this.zoomFactor_
return n+Math.log(e/t)/Math.log(i)}getResolutionForZoom(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0
const e=(0,c.qE)(Math.floor(t),0,this.resolutions_.length-2),i=this.resolutions_[e]/this.resolutions_[e+1]
return this.resolutions_[e]/Math.pow(i,(0,c.qE)(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,e){let i
if((0,u.v)(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,"Invalid extent or geometry provided as `geometry`"),Array.isArray(t)){(0,u.v)(!(0,p.Im)(t),"Cannot fit empty extent provided as `geometry`")
const e=(0,a.SD)(t,this.getProjection())
i=(0,b.VY)(e)}else if("Circle"===t.getType()){const e=(0,a.SD)(t.getExtent(),this.getProjection())
i=(0,b.VY)(e),i.rotate(this.getRotation(),(0,p.q1)(e))}else{const e=(0,a.Tf)()
i=e?t.clone().transform(e,this.getProjection()):t}this.fitInternal(i,e)}rotatedExtentForGeometry(t){const e=this.getRotation(),i=Math.cos(e),n=Math.sin(-e),r=t.getFlatCoordinates(),o=t.getStride()
let s=1/0,a=1/0,l=-1/0,h=-1/0
for(let u=0,c=r.length;u<c;u+=o){const t=r[u]*i-r[u+1]*n,e=r[u]*n+r[u+1]*i
s=Math.min(s,t),a=Math.min(a,e),l=Math.max(l,t),h=Math.max(h,e)}return[s,a,l,h]}fitInternal(t,e){let i=(e=e||{}).size
i||(i=this.getViewportSizeMinusPadding_())
const n=void 0!==e.padding?e.padding:[0,0,0,0],r=void 0!==e.nearest&&e.nearest
let o
o=void 0!==e.minResolution?e.minResolution:void 0!==e.maxZoom?this.getResolutionForZoom(e.maxZoom):0
const s=this.rotatedExtentForGeometry(t)
let a=this.getResolutionForExtentInternal(s,[i[0]-n[1]-n[3],i[1]-n[0]-n[2]])
a=isNaN(a)?o:Math.max(a,o),a=this.getConstrainedResolution(a,r?0:1)
const h=this.getRotation(),u=Math.sin(h),c=Math.cos(h),d=(0,p.q1)(s)
d[0]+=(n[1]-n[3])/2*a,d[1]+=(n[0]-n[2])/2*a
const f=d[0]*c-d[1]*u,g=d[1]*c+d[0]*u,_=this.getConstrainedCenter([f,g],a),m=e.callback?e.callback:l.tV
void 0!==e.duration?this.animateInternal({resolution:a,center:_,duration:e.duration,easing:e.easing},m):(this.targetResolution_=a,this.targetCenter_=_,this.applyTargetState_(!1,!0),S(m,!0))}centerOn(t,e,i){this.centerOnInternal((0,a.Ad)(t,this.getProjection()),e,i)}centerOnInternal(t,e,i){this.setCenterInternal(M(t,e,i,this.getResolution(),this.getRotation()))}calculateCenterShift(t,e,i,n){let r
const o=this.padding_
if(o&&t){const s=this.getViewportSizeMinusPadding_(-i),a=M(t,n,[s[0]/2+o[3],s[1]/2+o[0]],e,i)
r=[t[0]-a[0],t[1]-a[1]]}return r}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(t){const e=(0,a.te)(this.targetCenter_,this.getProjection())
this.setCenter([e[0]+t[0],e[1]+t[1]])}adjustCenterInternal(t){const e=this.targetCenter_
this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}adjustResolution(t,e){e=e&&(0,a.Ad)(e,this.getProjection()),this.adjustResolutionInternal(t,e)}adjustResolutionInternal(t,e){const i=this.getAnimating()||this.getInteracting(),n=this.getViewportSize_(this.getRotation()),r=this.constraints_.resolution(this.targetResolution_*t,0,n,i)
e&&(this.targetCenter_=this.calculateCenterZoom(r,e)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}adjustRotation(t,e){e&&(e=(0,a.Ad)(e,this.getProjection())),this.adjustRotationInternal(t,e)}adjustRotationInternal(t,e){const i=this.getAnimating()||this.getInteracting(),n=this.constraints_.rotation(this.targetRotation_+t,i)
e&&(this.targetCenter_=this.calculateCenterRotate(n,e)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t?(0,a.Ad)(t,this.getProjection()):t)}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,e){const i=this.getAnimating()||this.getInteracting()||e,n=this.constraints_.rotation(this.targetRotation_,i),r=this.getViewportSize_(n),s=this.constraints_.resolution(this.targetResolution_,0,r,i),a=this.constraints_.center(this.targetCenter_,s,r,i,this.calculateCenterShift(this.targetCenter_,s,n,r))
this.get(o.ROTATION)!==n&&this.set(o.ROTATION,n),this.get(o.RESOLUTION)!==s&&(this.set(o.RESOLUTION,s),this.set("zoom",this.getZoom(),!0)),a&&this.get(o.CENTER)&&(0,h.aI)(this.get(o.CENTER),a)||this.set(o.CENTER,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,e,i){t=void 0!==t?t:200
const n=e||0,r=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(r),s=this.constraints_.resolution(this.targetResolution_,n,o),a=this.constraints_.center(this.targetCenter_,s,o,!1,this.calculateCenterShift(this.targetCenter_,s,r,o))
if(0===t&&!this.cancelAnchor_)return this.targetResolution_=s,this.targetRotation_=r,this.targetCenter_=a,void this.applyTargetState_()
i=i||(0===t?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,this.getResolution()===s&&this.getRotation()===r&&this.getCenterInternal()&&(0,h.aI)(this.getCenterInternal(),a)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:a,resolution:s,duration:t,easing:x.vT,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(r.A.INTERACTING,1)}endInteraction(t,e,i){i=i&&(0,a.Ad)(i,this.getProjection()),this.endInteractionInternal(t,e,i)}endInteractionInternal(t,e,i){this.getInteracting()&&(this.setHint(r.A.INTERACTING,-1),this.resolveConstraints(t,e,i))}getConstrainedCenter(t,e){const i=this.getViewportSize_(this.getRotation())
return this.constraints_.center(t,e||this.getResolution(),i)}getConstrainedZoom(t,e){const i=this.getResolutionForZoom(t)
return this.getZoomForResolution(this.getConstrainedResolution(i,e))}getConstrainedResolution(t,e){e=e||0
const i=this.getViewportSize_(this.getRotation())
return this.constraints_.resolution(t,e,i)}}function S(t,e){setTimeout((function(){t(e)}),0)}function C(t){if(void 0!==t.extent){const e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint
return d(t.extent,t.constrainOnlyCenter,e)}const e=(0,a.Av)(t.projection,"EPSG:3857")
if(!0!==t.multiWorld&&e.isGlobal()){const t=e.getExtent().slice()
return t[0]=-1/0,t[2]=1/0,d(t,!1,!1)}return f}function P(t){let e,i,n,r=void 0!==t.minZoom?t.minZoom:w,o=void 0!==t.maxZoom?t.maxZoom:28
const l=void 0!==t.zoomFactor?t.zoomFactor:2,h=void 0!==t.multiWorld&&t.multiWorld,u=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,d=void 0!==t.showFullExtent&&t.showFullExtent,f=(0,a.Av)(t.projection,"EPSG:3857"),v=f.getExtent()
let x=t.constrainOnlyCenter,b=t.extent
if(h||b||!f.isGlobal()||(x=!1,b=v),void 0!==t.resolutions){const s=t.resolutions
i=s[r],n=void 0!==s[o]?s[o]:s[s.length-1],e=t.constrainResolution?function(t,e,i,n){return e=void 0===e||e,function(r,o,s,a){if(void 0!==r){const l=t[0],h=t[t.length-1],u=i?_(l,i,s,n):l
if(a)return e?m(r,u,h):(0,c.qE)(r,h,u)
const d=Math.min(u,r),f=Math.floor((0,g.FT)(t,d,o))
return t[f]>u&&f<t.length-1?t[f+1]:t[f]}}}(s,u,!x&&b,d):y(i,n,u,!x&&b,d)}else{const h=(v?Math.max((0,p.RG)(v),(0,p.Oq)(v)):360*a.Ig.degrees/f.getMetersPerUnit())/s.R/Math.pow(2,w),g=h/Math.pow(2,28-w)
i=t.maxResolution,void 0!==i?r=0:i=h/Math.pow(l,r),n=t.minResolution,void 0===n&&(n=void 0!==t.maxZoom?void 0!==t.maxResolution?i/Math.pow(l,o):h/Math.pow(l,o):g),o=r+Math.floor(Math.log(i/n)/Math.log(l)),n=i/Math.pow(l,o-r),e=t.constrainResolution?function(t,e,i,n,r,o){return n=void 0===n||n,i=void 0!==i?i:0,function(s,a,l,h){if(void 0!==s){const u=r?_(e,r,l,o):e
if(h)return n?m(s,u,i):(0,c.qE)(s,i,u)
const d=1e-9,f=Math.ceil(Math.log(e/u)/Math.log(t)-d),p=-a*(.5-d)+.5,g=Math.min(u,s),y=Math.floor(Math.log(e/g)/Math.log(t)+p),v=Math.max(f,y),x=e/Math.pow(t,v)
return(0,c.qE)(x,i,u)}}}(l,i,n,u,!x&&b,d):y(i,n,u,!x&&b,d)}return{constraint:e,maxResolution:i,minResolution:n,minZoom:r,zoomFactor:l}}function T(t){if(void 0===t.enableRotation||t.enableRotation){const e=t.constrainRotation
return void 0===e||!0===e?(0,v.cq)():!1===e?v.dv:"number"==typeof e?(0,v.a$)(e):v.dv}return v.b8}function I(t){return!(t.sourceCenter&&t.targetCenter&&!(0,h.aI)(t.sourceCenter,t.targetCenter))&&t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation}function M(t,e,i,n,r){const o=Math.cos(-r)
let s=Math.sin(-r),a=t[0]*o-t[1]*s,l=t[1]*o+t[0]*s
return a+=(e[0]/2-i[0])*n,l+=(i[1]-e[1]/2)*n,s=-s,[a*o-l*s,l*o+a*s]}const A=E},5548:(t,e,i)=>{"use strict"
i.d(e,{A:()=>n})
const n={ANIMATING:0,INTERACTING:1}},7195:(t,e,i)=>{"use strict"
function n(t,e,i){let n,o
i=i||r
let s=0,a=t.length,l=!1
for(;s<a;)n=s+(a-s>>1),o=+i(t[n],e),o<0?s=n+1:(a=n,l=!o)
return l?s:~s}function r(t,e){return t>e?1:t<e?-1:0}function o(t,e){return t<e?1:t>e?-1:0}function s(t,e,i){if(t[0]<=e)return 0
const n=t.length
if(e<=t[n-1])return n-1
if("function"==typeof i){for(let r=1;r<n;++r){const n=t[r]
if(n===e)return r
if(n<e)return i(e,t[r-1],n)>0?r-1:r}return n-1}if(i>0){for(let i=1;i<n;++i)if(t[i]<e)return i-1
return n-1}if(i<0){for(let i=1;i<n;++i)if(t[i]<=e)return i
return n-1}for(let r=1;r<n;++r){if(t[r]==e)return r
if(t[r]<e)return t[r-1]-e<e-t[r]?r-1:r}return n-1}function a(t,e,i){for(;e<i;){const n=t[e]
t[e]=t[i],t[i]=n,++e,--i}}function l(t,e){const i=Array.isArray(e)?e:[e],n=i.length
for(let r=0;r<n;r++)t[t.length]=i[r]}function h(t,e){const i=t.length
if(i!==e.length)return!1
for(let n=0;n<i;n++)if(t[n]!==e[n])return!1
return!0}function u(t,e,i){const n=e||r
return t.every((function(e,r){if(0===r)return!0
const o=n(t[r-1],e)
return!(o>0||i&&0===o)}))}i.d(e,{El:()=>n,FT:()=>s,V_:()=>r,WC:()=>u,X$:()=>l,aI:()=>h,gI:()=>a,rG:()=>o})},6249:(t,e,i)=>{"use strict"
function n(t,e){if(!t)throw new Error(e)}i.d(e,{v:()=>n})},659:(t,e,i)=>{"use strict"
i.d(e,{_j:()=>w,oJ:()=>p,sH:()=>b,$C:()=>C,cD:()=>x,S8:()=>E,eE:()=>v,dI:()=>S,fu:()=>y})
const n={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}
var r={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"],whitepoint:{2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}}}
r.max=r.whitepoint[2].D65,r.rgb=function(t,e){e=e||r.whitepoint[2].E
var i,n,o,s=t[0]/e[0],a=t[1]/e[1],l=t[2]/e[2]
return n=-.96924363628087*s+1.87596750150772*a+.041555057407175*l,o=.055630079696993*s+-.20397695888897*a+1.056971514242878*l,i=(i=3.240969941904521*s+-1.537383177570093*a+-.498610760293*l)>.0031308?1.055*Math.pow(i,1/2.4)-.055:i*=12.92,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:n*=12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o*=12.92,[255*(i=Math.min(Math.max(0,i),1)),255*(n=Math.min(Math.max(0,n),1)),255*(o=Math.min(Math.max(0,o),1))]},n.xyz=function(t,e){var i=t[0]/255,n=t[1]/255,o=t[2]/255,s=.21263900587151*(i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92)+.71516867876775*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.072192315360733*(o=o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92),a=.019330818715591*i+.11919477979462*n+.95053215224966*o
return[(.41239079926595*i+.35758433938387*n+.18048078840183*o)*(e=e||r.whitepoint[2].E)[0],s*e[1],a*e[2]]}
const o=r,s={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(t,e,i){var n,r,s,a,l,h,u,c,d
return s=t[0],a=t[1],l=t[2],0===s?[0,0,0]:(e=e||"D65",i=i||2,n=a/(13*s)+4*(u=o.whitepoint[i][e][0])/(u+15*(c=o.whitepoint[i][e][1])+3*(d=o.whitepoint[i][e][2]))||0,r=l/(13*s)+9*c/(u+15*c+3*d)||0,[9*(h=s>8?c*Math.pow((s+16)/116,3):c*s*.0011070564598794539)*n/(4*r)||0,h,h*(12-3*n-20*r)/(4*r)||0])}}
o.luv=function(t,e,i){var n,r,s,a,l,h,u,c,d,f,p
e=e||"D65",i=i||2,f=4*(u=o.whitepoint[i][e][0])/(u+15*(c=o.whitepoint[i][e][1])+3*(d=o.whitepoint[i][e][2])),p=9*c/(u+15*c+3*d),n=4*(a=t[0])/(a+15*(l=t[1])+3*(h=t[2]))||0,r=9*l/(a+15*l+3*h)||0
var g=l/c
return[s=g<=.008856451679035631?903.2962962962961*g:116*Math.pow(g,1/3)-16,13*s*(n-f),13*s*(r-p)]}
var a={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(t){var e,i=t[0],n=t[1]
return e=t[2]/360*2*Math.PI,[i,n*Math.cos(e),n*Math.sin(e)]},xyz:function(t){return s.xyz(a.luv(t))}}
const l=a
s.lchuv=function(t){var e=t[0],i=t[1],n=t[2],r=Math.sqrt(i*i+n*n),o=360*Math.atan2(n,i)/2/Math.PI
return o<0&&(o+=360),[e,r,o]},o.lchuv=function(t){return s.lchuv(o.luv(t))}
const h={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},u=function(t){var e,i,n=[],r=1
if("number"==typeof t)return{space:"rgb",values:[t>>>16,(65280&t)>>>8,255&t],alpha:1}
if("number"==typeof t)return{space:"rgb",values:[t>>>16,(65280&t)>>>8,255&t],alpha:1}
if(t=String(t).toLowerCase(),h[t])n=h[t].slice(),i="rgb"
else if("transparent"===t)r=0,i="rgb",n=[0,0,0]
else if("#"===t[0]){var o=t.slice(1),s=o.length
r=1,s<=4?(n=[parseInt(o[0]+o[0],16),parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16)],4===s&&(r=parseInt(o[3]+o[3],16)/255)):(n=[parseInt(o[0]+o[1],16),parseInt(o[2]+o[3],16),parseInt(o[4]+o[5],16)],8===s&&(r=parseInt(o[6]+o[7],16)/255)),n[0]||(n[0]=0),n[1]||(n[1]=0),n[2]||(n[2]=0),i="rgb"}else if(e=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(t)){var a=e[1],l="cmyk"===(i=a.replace(/a$/,""))?4:"gray"===i?1:3
n=e[2].trim().split(/\s*[,\/]\s*|\s+/),"color"===i&&(i=n.shift()),r=(n=n.map((function(t,e){if("%"===t[t.length-1])return t=parseFloat(t)/100,3===e?t:"rgb"===i?255*t:"h"===i[0]?100*t:"l"!==i[0]||e?"lab"===i?125*t:"lch"===i?e<2?150*t:360*t:"o"!==i[0]||e?"oklab"===i?.4*t:"oklch"===i?e<2?.4*t:360*t:t:t:100*t
if("h"===i[e]||2===e&&"h"===i[i.length-1]){if(void 0!==c[t])return c[t]
if(t.endsWith("deg"))return parseFloat(t)
if(t.endsWith("turn"))return 360*parseFloat(t)
if(t.endsWith("grad"))return 360*parseFloat(t)/400
if(t.endsWith("rad"))return 180*parseFloat(t)/Math.PI}return"none"===t?0:parseFloat(t)}))).length>l?n.pop():1}else/[0-9](?:\s|\/|,)/.test(t)&&(n=t.match(/([0-9]+)/g).map((function(t){return parseFloat(t)})),i=t.match(/([a-z])/gi)?.join("")?.toLowerCase()||"rgb")
return{space:i,values:n,alpha:r}}
var c={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}
const d={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(t){var e,i,n,r,o,s=t[0]/360,a=t[1]/100,l=t[2]/100,h=0
if(0===a)return[o=255*l,o,o]
for(e=2*l-(i=l<.5?l*(1+a):l+a-l*a),r=[0,0,0];h<3;)(n=s+1/3*-(h-1))<0?n++:n>1&&n--,o=6*n<1?e+6*(i-e)*n:2*n<1?i:3*n<2?e+(i-e)*(2/3-n)*6:e,r[h++]=255*o
return r}}
n.hsl=function(t){var e,i,n=t[0]/255,r=t[1]/255,o=t[2]/255,s=Math.min(n,r,o),a=Math.max(n,r,o),l=a-s
return a===s?e=0:n===a?e=(r-o)/l:r===a?e=2+(o-n)/l:o===a&&(e=4+(n-r)/l),(e=Math.min(60*e,360))<0&&(e+=360),i=(s+a)/2,[e,100*(a===s?0:i<=.5?l/(a+s):l/(2-a-s)),100*i]}
var f=i(5306)
function p(t){return"string"==typeof t?t:S(t)}const g=1024,_={}
let m=0
function y(t){if(4===t.length)return t
const e=t.slice()
return e[3]=1,e}function v(t){const e=o.lchuv(n.xyz(t))
return e[3]=t[3],e}function x(t){const e=o.rgb(l.xyz(t))
return e[3]=t[3],e}function b(t){if(_.hasOwnProperty(t))return _[t]
if(m>=g){let t=0
for(const e in _)3&t++||(delete _[e],--m)}const e=function(t){var e
Array.isArray(t)&&t.raw&&(t=String.raw(...arguments)),t instanceof Number&&(t=+t)
var i=u(t)
if(!i.space)return[]
const r="h"===i.space[0]?d.min:n.min,o="h"===i.space[0]?d.max:n.max
return(e=Array(3))[0]=Math.min(Math.max(i.values[0],r[0]),o[0]),e[1]=Math.min(Math.max(i.values[1],r[1]),o[1]),e[2]=Math.min(Math.max(i.values[2],r[2]),o[2]),"h"===i.space[0]&&(e=d.rgb(e)),e.push(Math.min(Math.max(i.alpha,0),1)),e}(t)
if(4!==e.length)throw new Error('Failed to parse "'+t+'" as color')
for(const i of e)if(isNaN(i))throw new Error('Failed to parse "'+t+'" as color')
return E(e),_[t]=e,++m,e}function w(t){return Array.isArray(t)?t:b(t)}function E(t){return t[0]=(0,f.qE)(t[0]+.5|0,0,255),t[1]=(0,f.qE)(t[1]+.5|0,0,255),t[2]=(0,f.qE)(t[2]+.5|0,0,255),t[3]=(0,f.qE)(t[3],0,1),t}function S(t){let e=t[0]
e!=(0|e)&&(e=e+.5|0)
let i=t[1]
i!=(0|i)&&(i=i+.5|0)
let n=t[2]
return n!=(0|n)&&(n=n+.5|0),"rgba("+e+","+i+","+n+","+(void 0===t[3]?1:Math.round(1e3*t[3])/1e3)+")"}function C(t){try{return b(t),!0}catch(t){return!1}}},7382:(t,e,i)=>{"use strict"
i.d(e,{F:()=>l})
var n=i(1410),r=i(8454),o=i(9398),s=i(8166),a=i(659)
function l(t){return t?Array.isArray(t)?(0,a.dI)(t):"object"==typeof t&&"src"in t?function(t){if(!t.offset||!t.size)return s.ue.getPattern(t.src,"anonymous",t.color)
const e=t.src+":"+t.offset,i=s.ue.getPattern(e,void 0,t.color)
if(i)return i
const a=s.ue.get(t.src,"anonymous",null)
if(a.getImageState()!==n.A.LOADED)return null
const l=(0,r.Y)(t.size[0],t.size[1])
return l.drawImage(a.getImage(1),t.offset[0],t.offset[1],t.size[0],t.size[1],0,0,t.size[0],t.size[1]),(0,o.J)(l.canvas,e,void 0,n.A.LOADED,t.color,!0),s.ue.getPattern(e,void 0,t.color)}(t):t:null}},7307:(t,e,i)=>{"use strict"
i.d(e,{R8:()=>o,z3:()=>s})
const n={info:1,warn:2,error:3,none:4}
let r=n.info
function o(...t){r>n.warn||console.warn(...t)}function s(...t){r>n.error||console.error(...t)}},8474:(t,e,i)=>{"use strict"
i.d(e,{Li:()=>c,WQ:()=>s,aI:()=>l,aP:()=>a,e$:()=>h,hs:()=>u})
var n=i(3236),r=i(5306),o=i(4549)
function s(t,e){return t[0]+=+e[0],t[1]+=+e[1],t}function a(t,e,i){const n=(0,r.xP)(e+180,360)-180,s=Math.abs(3600*n),a=i||0
let l=Math.floor(s/3600),h=Math.floor((s-3600*l)/60),u=(0,r.Mg)(s-3600*l-60*h,a)
u>=60&&(u=0,h+=1),h>=60&&(h=0,l+=1)
let c=l+""
return 0===h&&0===u||(c+=" "+(0,o.H)(h,2)+""),0!==u&&(c+=" "+(0,o.H)(u,2,a)+""),0!==n&&(c+=" "+t.charAt(n<0?1:0)),c}function l(t,e){let i=!0
for(let n=t.length-1;n>=0;--n)if(t[n]!=e[n]){i=!1
break}return i}function h(t,e){const i=Math.cos(e),n=Math.sin(e),r=t[0]*i-t[1]*n,o=t[1]*i+t[0]*n
return t[0]=r,t[1]=o,t}function u(t,e){return t[0]*=e,t[1]*=e,t}function c(t,e){if(e.canWrapX()){const i=(0,n.RG)(e.getExtent()),r=function(t,e,i){const r=e.getExtent()
let o=0
return e.canWrapX()&&(t[0]<r[0]||t[0]>r[2])&&(i=i||(0,n.RG)(r),o=Math.floor((t[0]-r[0])/i)),o}(t,e,i)
r&&(t[0]-=r*i)}return t}},8877:(t,e,i)=>{"use strict"
i.d(e,{$N:()=>o,K5:()=>h,Si:()=>n,XI:()=>r,nT:()=>s})
const n="ol-hidden",r="ol-unselectable",o="ol-control",s="ol-collapsed",a=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),l=["style","variant","weight","size","lineHeight","family"],h=function(t){const e=t.match(a)
if(!e)return null
const i={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"}
for(let n=0,r=l.length;n<r;++n){const t=e[n+1]
void 0!==t&&(i[l[n]]=t)}return i.families=i.family.split(/,\s?/),i}},8454:(t,e,i)=>{"use strict"
i.d(e,{WM:()=>c,Y:()=>r,Yg:()=>a,bf:()=>h,fo:()=>l,gS:()=>u,lr:()=>s})
var n=i(1622)
function r(t,e,i,r){let o
return o=i&&i.length?i.shift():n.Wl?new OffscreenCanvas(t||300,e||300):document.createElement("canvas"),t&&(o.width=t),e&&(o.height=e),o.getContext("2d",r)}let o
function s(){return o||(o=r(1,1)),o}function a(t){const e=t.canvas
e.width=1,e.height=1,t.clearRect(0,0,1,1)}function l(t,e){const i=e.parentNode
i&&i.replaceChild(t,e)}function h(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function u(t){for(;t.lastChild;)t.removeChild(t.lastChild)}function c(t,e){const i=t.childNodes
for(let n=0;;++n){const r=i[n],o=e[n]
if(!r&&!o)break
r!==o&&(r?o?t.insertBefore(o,r):(t.removeChild(r),--n):t.appendChild(o))}}},7849:(t,e,i)=>{"use strict"
function n(t){return Math.pow(t,3)}function r(t){return 1-n(1-t)}function o(t){return 3*t*t-2*t*t*t}function s(t){return t}i.d(e,{T9:()=>o,a6:()=>n,sn:()=>s,vT:()=>r})},4757:(t,e,i)=>{"use strict"
i.d(e,{JH:()=>s,Jz:()=>o,KT:()=>r})
var n=i(7931)
function r(t,e,i,n,r){if(n&&n!==t&&(i=i.bind(n)),r){const n=i
i=function(){t.removeEventListener(e,i),n.apply(this,arguments)}}const o={target:t,type:e,listener:i}
return t.addEventListener(e,i),o}function o(t,e,i,n){return r(t,e,i,n,!0)}function s(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),(0,n.I)(t))}},406:(t,e,i)=>{"use strict"
i.d(e,{Ay:()=>n})
const n=class{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}},8638:(t,e,i)=>{"use strict"
i.d(e,{A:()=>n})
const n={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"}},669:(t,e,i)=>{"use strict"
i.d(e,{A:()=>l})
var n=i(8646),r=i(406),o=i(419),s=i(7931)
class a extends n.A{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,e){if(!t||!e)return
const i=this.listeners_||(this.listeners_={}),n=i[t]||(i[t]=[])
n.includes(e)||n.push(e)}dispatchEvent(t){const e="string"==typeof t,i=e?t:t.type,n=this.listeners_&&this.listeners_[i]
if(!n)return
const s=e?new r.Ay(t):t
s.target||(s.target=this.eventTarget_||this)
const a=this.dispatching_||(this.dispatching_={}),l=this.pendingRemovals_||(this.pendingRemovals_={})
let h
i in a||(a[i]=0,l[i]=0),++a[i]
for(let r=0,o=n.length;r<o;++r)if(h="handleEvent"in n[r]?n[r].handleEvent(s):n[r].call(this,s),!1===h||s.propagationStopped){h=!1
break}if(0==--a[i]){let t=l[i]
for(delete l[i];t--;)this.removeEventListener(i,o.tV)
delete a[i]}return h}disposeInternal(){this.listeners_&&(0,s.I)(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return!!this.listeners_&&(t?t in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(t,e){if(!this.listeners_)return
const i=this.listeners_[t]
if(!i)return
const n=i.indexOf(e);-1!==n&&(this.pendingRemovals_&&t in this.pendingRemovals_?(i[n]=o.tV,++this.pendingRemovals_[t]):(i.splice(n,1),0===i.length&&delete this.listeners_[t]))}}const l=a},8548:(t,e,i)=>{"use strict"
i.d(e,{DG:()=>v,Fq:()=>c,SR:()=>x,T8:()=>a,Xj:()=>m,Ye:()=>A,ZD:()=>w,_D:()=>y,cT:()=>h,go:()=>g,ho:()=>_,j:()=>s,mE:()=>u,qg:()=>b,wl:()=>l})
var n=i(7195),r=i(659)
let o=0
const s=0,a=1<<o++,l=1<<o++,h=1<<o++,u=1<<o++,c=1<<o++,d=Math.pow(2,5)-1,f={[a]:"boolean",[l]:"number",[h]:"string",[u]:"color",[c]:"number[]"},p=Object.keys(f).map(Number).sort(n.V_)
function g(t){const e=[]
for(const n of p)(t&(i=n))===i&&e.push(f[n])
var i
return 0===e.length?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function _(t,e){return!!(t&e)}function m(t,e){return t===e}class y{constructor(t,e){this.type=t,this.value=e}}class v{constructor(t,e,...i){this.type=t,this.operator=e,this.args=i}}function x(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,style:{}}}function b(t,e,i){switch(typeof t){case"boolean":return new y(a,t)
case"number":return new y(l,t)
case"string":{let e=h
return(0,r.$C)(t)&&(e|=u),m(e&i,s)||(e&=i),new y(e,t)}}if(!Array.isArray(t))throw new Error("Expression must be an array or a primitive value")
if(0===t.length)throw new Error("Empty expression")
if("string"==typeof t[0])return function(t,e,i){const n=t[0],r=E[n]
if(!r)throw new Error(`Unknown operator: ${n}`)
return r(t,e,i)}(t,e,i)
for(const r of t)if("number"!=typeof r)throw new Error("Expected an array of numbers")
let n=c
return 3!==t.length&&4!==t.length||(n|=u),i&&(n&=i),new y(n,t)}const w={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string"},E={[w.Get]:M((([t,e])=>void 0!==e?function(t){switch(t){case"string":return h
case"color":return u
case"number":return l
case"boolean":return a
case"number[]":return c
default:throw new Error(`Unrecognized type hint: ${t}`)}}(e.value):d),C(1,2),(function(t,e){const i=b(t[1],e)
if(!(i instanceof y))throw new Error("Expected a literal argument for get operation")
if("string"!=typeof i.value)throw new Error("Expected a string argument for get operation")
return e.properties.add(i.value),3===t.length?[i,b(t[2],e)]:[i]})),[w.Var]:M((([t])=>t.type),C(1,1),(function(t,e,i,n){const r=t[1]
if("string"!=typeof r)throw new Error("Expected a string argument for var operation")
if(e.variables.add(r),!("variables"in e.style)||void 0===e.style.variables[r])return[new y(d,r)]
const o=b(e.style.variables[r],e)
if(o.value=r,n&&!_(n,o.type))throw new Error(`The variable ${r} has type ${g(o.type)} but the following type was expected: ${g(n)}`)
return[o]})),[w.Id]:M(l|h,S,(function(t,e){e.featureId=!0})),[w.Concat]:M(h,C(2,1/0),P(d)),[w.GeometryType]:M(h,S,(function(t,e){e.geometryType=!0})),[w.Resolution]:M(l,S),[w.Zoom]:M(l,S),[w.Time]:M(l,S),[w.Any]:M(a,C(2,1/0),P(a)),[w.All]:M(a,C(2,1/0),P(a)),[w.Not]:M(a,C(1,1),P(a)),[w.Equal]:M(a,C(2,2),P(d),T),[w.NotEqual]:M(a,C(2,2),P(d),T),[w.GreaterThan]:M(a,C(2,2),P(d),T),[w.GreaterThanOrEqualTo]:M(a,C(2,2),P(d),T),[w.LessThan]:M(a,C(2,2),P(d),T),[w.LessThanOrEqualTo]:M(a,C(2,2),P(d),T),[w.Multiply]:M((t=>{let e=l|u
for(let i=0;i<t.length;i++)e&=t[i].type
return e}),C(2,1/0),P(l|u),T),[w.Coalesce]:M((t=>{let e=d
for(let i=1;i<t.length;i+=2)e&=t[i].type
return e&=t[t.length-1].type,e}),C(2,1/0),P(d),T),[w.Divide]:M(l,C(2,2),P(l)),[w.Add]:M(l,C(2,1/0),P(l)),[w.Subtract]:M(l,C(2,2),P(l)),[w.Clamp]:M(l,C(3,3),P(l)),[w.Mod]:M(l,C(2,2),P(l)),[w.Pow]:M(l,C(2,2),P(l)),[w.Abs]:M(l,C(1,1),P(l)),[w.Floor]:M(l,C(1,1),P(l)),[w.Ceil]:M(l,C(1,1),P(l)),[w.Round]:M(l,C(1,1),P(l)),[w.Sin]:M(l,C(1,1),P(l)),[w.Cos]:M(l,C(1,1),P(l)),[w.Atan]:M(l,C(1,2),P(l)),[w.Sqrt]:M(l,C(1,1),P(l)),[w.Match]:M((t=>{let e=d
for(let i=2;i<t.length;i+=2)e&=t[i].type
return e&=t[t.length-1].type,e}),C(4,1/0),I,(function(t,e,i,n){const r=t.length-1
let o=b(t[1],e).type
const u=b(t[t.length-1],e)
let c=void 0!==n?n&u.type:u.type
const d=new Array(r-2)
for(let s=0;s<r-2;s+=2){const i=b(t[s+2],e),n=b(t[s+3],e)
o&=i.type,c&=n.type,d[s]=i,d[s+1]=n}const f=h|l|a
if(!_(f,o))throw new Error(`Expected an input of type ${g(f)} for the interpolate operation, got ${g(o)} instead`)
if(m(c,s))throw new Error("Could not find a common output type for the following match operation: "+JSON.stringify(t))
for(let s=0;s<r-2;s+=2){const i=b(t[s+2],e,o),n=b(t[s+3],e,c)
d[s]=i,d[s+1]=n}return[b(t[1],e,o),...d,b(t[t.length-1],e,c)]})),[w.Between]:M(a,C(3,3),P(l)),[w.Interpolate]:M((t=>{let e=u|l
for(let i=3;i<t.length;i+=2)e&=t[i].type
return e}),C(6,1/0),I,(function(t,e,i,n){const r=t[1]
let o
switch(r[0]){case"linear":o=1
break
case"exponential":if(o=r[1],"number"!=typeof o)throw new Error(`Expected a number base for exponential interpolation, got ${JSON.stringify(o)} instead`)
break
default:o=null}if(!o)throw new Error(`Invalid interpolation type: ${JSON.stringify(r)}`)
o=b(o,e)
let s=b(t[2],e)
if(!_(l,s.type))throw new Error(`Expected an input of type number for the interpolate operation, got ${g(s.type)} instead`)
s=b(t[2],e,l)
const a=new Array(t.length-3)
for(let h=0;h<a.length;h+=2){let i=b(t[h+3],e)
if(!_(l,i.type))throw new Error(`Expected all stop input values in the interpolate operation to be of type number, got ${g(i.type)} at position ${h+2} instead`)
let n=b(t[h+4],e)
if(!_(l|u,n.type))throw new Error(`Expected all stop output values in the interpolate operation to be a number or color, got ${g(n.type)} at position ${h+3} instead`)
i=b(t[h+3],e,l),n=b(t[h+4],e,l|u),a[h]=i,a[h+1]=n}return[o,s,...a]})),[w.Case]:M((t=>{let e=d
for(let i=1;i<t.length;i+=2)e&=t[i].type
return e&=t[t.length-1].type,e}),C(3,1/0),(function(t,e){const i=t[0],n=t.length-1
if(n%2==0)throw new Error(`An odd amount of arguments was expected for operation ${i}, got ${JSON.stringify(n)} instead`)}),(function(t,e,i,n){const r=b(t[t.length-1],e)
let o=void 0!==n?n&r.type:r.type
const l=new Array(t.length-1)
for(let s=0;s<l.length-1;s+=2){const i=b(t[s+1],e),n=b(t[s+2],e)
if(!_(a,i.type))throw new Error(`Expected all conditions in the case operation to be of type boolean, got ${g(i.type)} at position ${s} instead`)
o&=n.type,l[s]=i,l[s+1]=n}if(m(o,s))throw new Error("Could not find a common output type for the following case operation: "+JSON.stringify(t))
for(let s=0;s<l.length-1;s+=2)l[s+1]=b(t[s+2],e,o)
return l[l.length-1]=b(t[t.length-1],e,o),l})),[w.In]:M(a,C(2,2),(function(t,e){let i=t[2]
if(!Array.isArray(i))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.')
if("string"==typeof i[0]){if("literal"!==i[0])throw new Error('For the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions.')
if(!Array.isArray(i[1]))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.')
i=i[1]}let n=h|l
const r=new Array(i.length)
for(let o=0;o<r.length;o++){const t=b(i[o],e)
n&=t.type,r[o]=t}if(m(n,s))throw new Error("Could not find a common type for the following in operation: "+JSON.stringify(t))
return[b(t[1],e,n),...r]})),[w.Number]:M(l,C(1,1/0),P(d)),[w.String]:M(h,C(1,1/0),P(d)),[w.Array]:M((t=>3===t.length||4===t.length?c|u:c),C(1,1/0),P(l)),[w.Color]:M(u,C(1,4),P(l)),[w.Band]:M(l,C(1,3),P(l)),[w.Palette]:M(u,C(2,2),(function(t,e){const i=b(t[1],e,l)
if(i.type!==l)throw new Error(`The first argument of palette must be an number, got ${g(i.type)} instead`)
const n=t[2]
if(!Array.isArray(n))throw new Error("The second argument of palette must be an array")
const r=new Array(n.length)
for(let o=0;o<r.length;o++){const t=b(n[o],e,u)
if(!(t instanceof y))throw new Error(`The palette color at index ${o} must be a literal value`)
if(!_(t.type,u))throw new Error(`The palette color at index ${o} should be of type color, got ${g(t.type)} instead`)
r[o]=t}return[i,...r]})),[w.ToString]:M(h,C(1,1),P(a|l|h|u))}
function S(t,e){const i=t[0]
if(1!==t.length)throw new Error(`Expected no arguments for ${i} operation`)
return[]}function C(t,e){return function(i,n){const r=i[0],o=i.length-1
if(t===e){if(o!==t)throw new Error(`Expected ${t} argument${1===t?"":"s"} for ${r}, got ${o}`)}else if(o<t||o>e)throw new Error(`Expected ${e===1/0?`${t} or more`:`${t} to ${e}`} arguments for ${r}, got ${o}`)}}function P(t){return function(e,i){const n=e[0],r=e.length-1,o=new Array(r)
for(let s=0;s<r;++s){const r=b(e[s+1],i)
if(!_(t,r.type)){const e=g(t),i=g(r.type)
throw new Error(`Unexpected type for argument ${s} of ${n} operation, got ${e} but expected ${i}`)}r.type&=t,o[s]=r}return o}}function T(t,e,i){const n=t[0],r=t.length-1
let o=d
for(let s=0;s<i.length;++s)o&=i[s].type
if(o===s)throw new Error(`No common type could be found for arguments of ${n} operation`)
const a=new Array(r)
for(let s=0;s<r;++s)a[s]=b(t[s+1],e,o)
return a}function I(t,e){const i=t[0],n=t.length-1
if(n%2==1)throw new Error(`An even amount of arguments was expected for operation ${i}, got ${JSON.stringify(n)} instead`)}function M(t,...e){return function(i,n,r){const o=i[0]
let a=[]
for(let t=0;t<e.length;t++)a=e[t](i,n,a,r)||a
let l="function"==typeof t?t(a):t
if(void 0!==r){if(!_(l,r))throw new Error(`The following expression was expected to return ${g(r)}, but returns ${g(l)} instead: ${JSON.stringify(i)}`)
l&=r}if(l===s)throw new Error(`No matching type was found for the following expression: ${JSON.stringify(i)}`)
return new v(l,o,...a)}}function A(t){if(!t)return""
const e=t.getType()
switch(e){case"Point":case"LineString":case"Polygon":return e
case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5)
case"Circle":return"Polygon"
case"GeometryCollection":return A(t.getGeometries()[0])
default:return""}}},3236:(t,e,i)=>{"use strict"
i.d(e,{$C:()=>x,$u:()=>z,Af:()=>j,Bg:()=>M,HY:()=>F,Im:()=>k,Ld:()=>a,Li:()=>U,Mx:()=>G,N:()=>f,NW:()=>B,Oq:()=>R,Py:()=>O,QJ:()=>q,R:()=>C,R8:()=>b,RG:()=>N,Rj:()=>u,S5:()=>d,Tr:()=>r,UG:()=>S,Vy:()=>_,WU:()=>D,X$:()=>v,Ym:()=>l,Yw:()=>A,_N:()=>L,aI:()=>m,aZ:()=>p,bE:()=>y,dP:()=>g,k_:()=>P,ms:()=>h,o8:()=>s,q1:()=>T,qF:()=>I,r:()=>o,sB:()=>E,vz:()=>c})
var n=i(937)
function r(t){const e=[1/0,1/0,-1/0,-1/0]
for(let i=0,n=t.length;i<n;++i)x(e,t[i])
return e}function o(t,e,i){return i?(i[0]=t[0]-e,i[1]=t[1]-e,i[2]=t[2]+e,i[3]=t[3]+e,i):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function s(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function a(t,e,i){let n,r
return n=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0,r=i<t[1]?t[1]-i:t[3]<i?i-t[3]:0,n*n+r*r}function l(t,e){return u(t,e[0],e[1])}function h(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function u(t,e,i){return t[0]<=e&&e<=t[2]&&t[1]<=i&&i<=t[3]}function c(t,e){const i=t[0],r=t[1],o=t[2],s=t[3],a=e[0],l=e[1]
let h=n.A.UNKNOWN
return a<i?h|=n.A.LEFT:a>o&&(h|=n.A.RIGHT),l<r?h|=n.A.BELOW:l>s&&(h|=n.A.ABOVE),h===n.A.UNKNOWN&&(h=n.A.INTERSECTING),h}function d(){return[1/0,1/0,-1/0,-1/0]}function f(t,e,i,n,r){return r?(r[0]=t,r[1]=e,r[2]=i,r[3]=n,r):[t,e,i,n]}function p(t){return f(1/0,1/0,-1/0,-1/0,t)}function g(t,e){const i=t[0],n=t[1]
return f(i,n,i,n,e)}function _(t,e,i,n,r){return b(p(r),t,e,i,n)}function m(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function y(t,e,i){return Math.abs(t[0]-e[0])<i&&Math.abs(t[2]-e[2])<i&&Math.abs(t[1]-e[1])<i&&Math.abs(t[3]-e[3])<i}function v(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function x(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function b(t,e,i,n,r){for(;i<n;i+=r)w(t,e[i],e[i+1])
return t}function w(t,e,i){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],i),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],i)}function E(t,e){let i
return i=e(C(t)),i||(i=e(P(t)),i||(i=e(D(t)),i||(i=e(O(t)),i||!1)))}function S(t){let e=0
return k(t)||(e=N(t)*R(t)),e}function C(t){return[t[0],t[1]]}function P(t){return[t[2],t[1]]}function T(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function I(t,e){let i
if("bottom-left"===e)i=C(t)
else if("bottom-right"===e)i=P(t)
else if("top-left"===e)i=O(t)
else{if("top-right"!==e)throw new Error("Invalid corner")
i=D(t)}return i}function M(t,e,i,n,r){const[o,s,a,l,h,u,c,d]=A(t,e,i,n)
return f(Math.min(o,a,h,c),Math.min(s,l,u,d),Math.max(o,a,h,c),Math.max(s,l,u,d),r)}function A(t,e,i,n){const r=e*n[0]/2,o=e*n[1]/2,s=Math.cos(i),a=Math.sin(i),l=r*s,h=r*a,u=o*s,c=o*a,d=t[0],f=t[1]
return[d-l+c,f-h-u,d-l-c,f-h+u,d+l-c,f+h+u,d+l+c,f+h-u,d-l+c,f-h-u]}function R(t){return t[3]-t[1]}function L(t,e,i){const n=i||[1/0,1/0,-1/0,-1/0]
return F(t,e)?(t[0]>e[0]?n[0]=t[0]:n[0]=e[0],t[1]>e[1]?n[1]=t[1]:n[1]=e[1],t[2]<e[2]?n[2]=t[2]:n[2]=e[2],t[3]<e[3]?n[3]=t[3]:n[3]=e[3]):p(n),n}function O(t){return[t[0],t[3]]}function D(t){return[t[2],t[3]]}function N(t){return t[2]-t[0]}function F(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function k(t){return t[2]<t[0]||t[3]<t[1]}function z(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function j(t,e){const i=(t[2]-t[0])/2*(e-1),n=(t[3]-t[1])/2*(e-1)
t[0]-=i,t[2]+=i,t[1]-=n,t[3]+=n}function G(t,e,i){let r=!1
const o=c(t,e),s=c(t,i)
if(o===n.A.INTERSECTING||s===n.A.INTERSECTING)r=!0
else{const a=t[0],l=t[1],h=t[2],u=t[3],c=e[0],d=e[1],f=i[0],p=i[1],g=(p-d)/(f-c)
let _,m
s&n.A.ABOVE&&!(o&n.A.ABOVE)&&(_=f-(p-u)/g,r=_>=a&&_<=h),r||!(s&n.A.RIGHT)||o&n.A.RIGHT||(m=p-(f-h)*g,r=m>=l&&m<=u),r||!(s&n.A.BELOW)||o&n.A.BELOW||(_=f-(p-l)/g,r=_>=a&&_<=h),r||!(s&n.A.LEFT)||o&n.A.LEFT||(m=p-(f-a)*g,r=m>=l&&m<=u)}return r}function B(t,e,i,n){if(k(t))return p(i)
let r=[]
if(n>1){const e=t[2]-t[0],i=t[3]-t[1]
for(let o=0;o<n;++o)r.push(t[0]+e*o/n,t[1],t[2],t[1]+i*o/n,t[2]-e*o/n,t[3],t[0],t[3]-i*o/n)}else r=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]]
e(r,r,2)
const o=[],s=[]
for(let a=0,l=r.length;a<l;a+=2)o.push(r[a]),s.push(r[a+1])
return function(t,e,i){return f(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),i)}(o,s,i)}function U(t,e){const i=e.getExtent(),n=T(t)
if(e.canWrapX()&&(n[0]<i[0]||n[0]>=i[2])){const e=N(i),r=Math.floor((n[0]-i[0])/e)*e
t[0]-=r,t[2]-=r}return t}function q(t,e){if(e.canWrapX()){const i=e.getExtent()
if(!isFinite(t[0])||!isFinite(t[2]))return[[i[0],t[1],i[2],t[3]]]
U(t,e)
const n=N(i)
if(N(t)>n)return[[i[0],t[1],i[2],t[3]]]
if(t[0]<i[0])return[[t[0]+n,t[1],i[2],t[3]],[i[0],t[1],t[2],t[3]]]
if(t[2]>i[2])return[[t[0],t[1],i[2],t[3]],[i[0],t[1],t[2]-n,t[3]]]}return[t]}},937:(t,e,i)=>{"use strict"
i.d(e,{A:()=>n})
const n={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16}},6831:(t,e,i)=>{"use strict"
i.d(e,{m8:()=>o,nF:()=>s})
var n=i(419)
let r=!1
function o(t,e,i,n,o,s,a){const l=new XMLHttpRequest
l.open("GET","function"==typeof t?t(i,n,o):t,!0),"arraybuffer"==e.getType()&&(l.responseType="arraybuffer"),l.withCredentials=r,l.onload=function(t){if(!l.status||l.status>=200&&l.status<300){const t=e.getType()
let n
"json"==t?n=JSON.parse(l.responseText):"text"==t?n=l.responseText:"xml"==t?(n=l.responseXML,n||(n=(new DOMParser).parseFromString(l.responseText,"application/xml"))):"arraybuffer"==t&&(n=l.response),n?s(e.readFeatures(n,{extent:i,featureProjection:o}),e.readProjection(n)):a()}else a()},l.onerror=a,l.send()}function s(t,e){return function(i,r,s,a,l){const h=this
o(t,e,i,r,s,(function(t,e){h.addFeatures(t),void 0!==a&&a(t)}),l||n.tV)}}},4017:(t,e,i)=>{"use strict"
i.d(e,{te:()=>C,Bs:()=>S,Ay:()=>b,hX:()=>w})
var n=i(9656),r=i(9621),o=i(8225),s=i(4008),a=i(5631),l=i(6034),h=i(5741),u=i(7946),c=i(8638),d=i(4783),f=i(3236),p=i(4757)
class g extends d.A{constructor(t){super(),this.geometries_=t,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(p.JH),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const t=this.geometries_
for(let e=0,i=t.length;e<i;++e)this.changeEventsKeys_.push((0,p.KT)(t[e],c.A.CHANGE,this.changed,this))}clone(){const t=new g(_(this.geometries_))
return t.applyProperties(this),t}closestPointXY(t,e,i,n){if(n<(0,f.Ld)(this.getExtent(),t,e))return n
const r=this.geometries_
for(let o=0,s=r.length;o<s;++o)n=r[o].closestPointXY(t,e,i,n)
return n}containsXY(t,e){const i=this.geometries_
for(let n=0,r=i.length;n<r;++n)if(i[n].containsXY(t,e))return!0
return!1}computeExtent(t){(0,f.aZ)(t)
const e=this.geometries_
for(let i=0,n=e.length;i<n;++i)(0,f.X$)(t,e[i].getExtent())
return t}getGeometries(){return _(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let t=[]
const e=this.geometries_
for(let i=0,n=e.length;i<n;++i)e[i].getType()===this.getType()?t=t.concat(e[i].getGeometriesArrayRecursive()):t.push(e[i])
return t}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this
const e=[],i=this.geometries_
let n=!1
for(let r=0,o=i.length;r<o;++r){const o=i[r],s=o.getSimplifiedGeometry(t)
e.push(s),s!==o&&(n=!0)}return n?new g(e):(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getType(){return"GeometryCollection"}intersectsExtent(t){const e=this.geometries_
for(let i=0,n=e.length;i<n;++i)if(e[i].intersectsExtent(t))return!0
return!1}isEmpty(){return 0===this.geometries_.length}rotate(t,e){const i=this.geometries_
for(let n=0,r=i.length;n<r;++n)i[n].rotate(t,e)
this.changed()}scale(t,e,i){i||(i=(0,f.q1)(this.getExtent()))
const n=this.geometries_
for(let r=0,o=n.length;r<o;++r)n[r].scale(t,e,i)
this.changed()}setGeometries(t){this.setGeometriesArray(_(t))}setGeometriesArray(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()}applyTransform(t){const e=this.geometries_
for(let i=0,n=e.length;i<n;++i)e[i].applyTransform(t)
this.changed()}translate(t,e){const i=this.geometries_
for(let n=0,r=i.length;n<r;++n)i[n].translate(t,e)
this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function _(t){return t.map((t=>t.clone()))}const m=g
var y=i(1736),v=i(3906),x=i(3861)
const b=class{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=n.A,this.supportedMediaTypes=null}getReadOptions(t,e){if(e){let i=e.dataProjection?(0,v.Jt)(e.dataProjection):this.readProjection(t)
e.extent&&i&&"tile-pixels"===i.getUnits()&&(i=(0,v.Jt)(i),i.setWorldExtent(e.extent)),e={dataProjection:i,featureProjection:e.featureProjection}}return this.adaptOptions(e)}adaptOptions(t){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},t)}getType(){return(0,y.b0)()}readFeature(t,e){return(0,y.b0)()}readFeatures(t,e){return(0,y.b0)()}readGeometry(t,e){return(0,y.b0)()}readProjection(t){return(0,y.b0)()}writeFeature(t,e){return(0,y.b0)()}writeFeatures(t,e){return(0,y.b0)()}writeGeometry(t,e){return(0,y.b0)()}}
function w(t,e,i){const n=i?(0,v.Jt)(i.featureProjection):null,r=i?(0,v.Jt)(i.dataProjection):null
let o=t
if(n&&r&&!(0,v.tI)(n,r)){e&&(o=t.clone())
const i=e?n:r,s=e?r:n
"tile-pixels"===i.getUnits()?o.transform(i,s):o.applyTransform((0,v.RG)(i,s))}if(e&&i&&void 0!==i.decimals){const e=Math.pow(10,i.decimals),n=function(t){for(let i=0,n=t.length;i<n;++i)t[i]=Math.round(t[i]*e)/e
return t}
o===t&&(o=t.clone()),o.applyTransform(n)}return o}const E={Point:o.A,LineString:s.A,Polygon:a.Ay,MultiPoint:l.A,MultiLineString:h.A,MultiPolygon:u.A}
function S(t,e){const i=t.geometry
if(!i)return[]
if(Array.isArray(i))return i.map((e=>S({...t,geometry:e}))).flat()
const n="MultiPolygon"===i.type?"Polygon":i.type
if("GeometryCollection"===n||"Circle"===n)throw new Error("Unsupported geometry type: "+n)
const o=i.layout.length
return w(new r.Ay(n,"Polygon"===n?function(t,e,i){return Array.isArray(e[0])?((0,x.mb)(t,0,e,i)||(t=t.slice(),(0,x.NK)(t,0,e,i)),t):((0,x.PA)(t,0,e,i)||(t=t.slice(),(0,x.ug)(t,0,e,i)),t)}(i.flatCoordinates,i.ends,o):i.flatCoordinates,i.ends?.flat(),o,t.properties||{},t.id).enableSimplifyTransformed(),!1,e)}function C(t,e){if(!t)return null
if(Array.isArray(t)){const i=t.map((t=>C(t,e)))
return new m(i)}return w(new(0,E[t.type])(t.flatCoordinates,t.layout,t.ends),!1,e)}},3323:(t,e,i)=>{"use strict"
i.r(e),i.d(e,{default:()=>_})
var n=i(9656),r=i(4017),o=i(1736)
class s extends r.Ay{constructor(){super()}getType(){return"json"}readFeature(t,e){return this.readFeatureFromObject(a(t),this.getReadOptions(t,e))}readFeatures(t,e){return this.readFeaturesFromObject(a(t),this.getReadOptions(t,e))}readFeatureFromObject(t,e){return(0,o.b0)()}readFeaturesFromObject(t,e){return(0,o.b0)()}readGeometry(t,e){return this.readGeometryFromObject(a(t),this.getReadOptions(t,e))}readGeometryFromObject(t,e){return(0,o.b0)()}readProjection(t){return this.readProjectionFromObject(a(t))}readProjectionFromObject(t){return(0,o.b0)()}writeFeature(t,e){return JSON.stringify(this.writeFeatureObject(t,e))}writeFeatureObject(t,e){return(0,o.b0)()}writeFeatures(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))}writeFeaturesObject(t,e){return(0,o.b0)()}writeGeometry(t,e){return JSON.stringify(this.writeGeometryObject(t,e))}writeGeometryObject(t,e){return(0,o.b0)()}}function a(t){return"string"==typeof t?JSON.parse(t)||null:null!==t?t:null}const l=s
var h=i(9621),u=i(2656),c=i(9009),d=i(3906),f=i(7931)
function p(t,e){if(!t)return null
let i
switch(t.type){case"Point":i=function(t){const e=t.coordinates
return{type:"Point",flatCoordinates:e,layout:(0,c.p0)(e.length)}}(t)
break
case"LineString":i=function(t){const e=t.coordinates,i=e.flat()
return{type:"LineString",flatCoordinates:i,ends:[i.length],layout:(0,c.p0)(e[0]?.length||2)}}(t)
break
case"Polygon":i=function(t){const e=t.coordinates,i=[],n=e[0]?.[0]?.length
return{type:"Polygon",flatCoordinates:i,ends:(0,u.KG)(i,0,e,n),layout:(0,c.p0)(n)}}(t)
break
case"MultiPoint":i=function(t){const e=t.coordinates
return{type:"MultiPoint",flatCoordinates:e.flat(),layout:(0,c.p0)(e[0]?.length||2)}}(t)
break
case"MultiLineString":i=function(t){const e=t.coordinates,i=e[0]?.[0]?.length||2,n=[]
return{type:"MultiLineString",flatCoordinates:n,ends:(0,u.KG)(n,0,e,i),layout:(0,c.p0)(i)}}(t)
break
case"MultiPolygon":i=function(t){const e=t.coordinates,i=[],n=e[0]?.[0]?.[0].length||2
return{type:"MultiPolygon",flatCoordinates:i,ends:(0,u.d6)(i,0,e,n),layout:(0,c.p0)(n)}}(t)
break
case"GeometryCollection":i=function(t,e){return t.geometries.map((function(t){return p(t)}))}(t)
break
default:throw new Error("Unsupported GeoJSON type: "+t.type)}return i}function g(t,e){const i=(t=(0,r.hX)(t,!0,e)).getType()
let n
switch(i){case"Point":n=function(t,e){return{type:"Point",coordinates:t.getCoordinates()}}(t)
break
case"LineString":n=function(t,e){return{type:"LineString",coordinates:t.getCoordinates()}}(t)
break
case"Polygon":n=function(t,e){let i
return e&&(i=e.rightHanded),{type:"Polygon",coordinates:t.getCoordinates(i)}}(t,e)
break
case"MultiPoint":n=function(t,e){return{type:"MultiPoint",coordinates:t.getCoordinates()}}(t)
break
case"MultiLineString":n=function(t,e){return{type:"MultiLineString",coordinates:t.getCoordinates()}}(t)
break
case"MultiPolygon":n=function(t,e){let i
return e&&(i=e.rightHanded),{type:"MultiPolygon",coordinates:t.getCoordinates(i)}}(t,e)
break
case"GeometryCollection":n=function(t,e){return delete(e=Object.assign({},e)).featureProjection,{type:"GeometryCollection",geometries:t.getGeometriesArray().map((function(t){return g(t,e)}))}}(t,e)
break
case"Circle":n={type:"GeometryCollection",geometries:[]}
break
default:throw new Error("Unsupported geometry type: "+i)}return n}const _=class extends l{constructor(t){t=t||{},super(),this.dataProjection=(0,d.Jt)(t.dataProjection?t.dataProjection:"EPSG:4326"),t.featureProjection&&(this.defaultFeatureProjection=(0,d.Jt)(t.featureProjection)),t.featureClass&&(this.featureClass=t.featureClass),this.geometryName_=t.geometryName,this.extractGeometryName_=t.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(t,e){let i=null
i="Feature"===t.type?t:{type:"Feature",geometry:t,properties:null}
const o=p(i.geometry)
if(this.featureClass===h.Ay)return(0,r.Bs)({geometry:o,id:i.id,properties:i.properties},e)
const s=new n.A
return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&i.geometry_name&&s.setGeometryName(i.geometry_name),s.setGeometry((0,r.te)(o,e)),"id"in i&&s.setId(i.id),i.properties&&s.setProperties(i.properties,!0),s}readFeaturesFromObject(t,e){let i=null
if("FeatureCollection"===t.type){i=[]
const n=t.features
for(let t=0,r=n.length;t<r;++t){const r=this.readFeatureFromObject(n[t],e)
r&&i.push(r)}}else i=[this.readFeatureFromObject(t,e)]
return i.flat()}readGeometryFromObject(t,e){return function(t,e){const i=p(t)
return(0,r.te)(i,e)}(t,e)}readProjectionFromObject(t){const e=t.crs
let i
if(e)if("name"==e.type)i=(0,d.Jt)(e.properties.name)
else{if("EPSG"!==e.type)throw new Error("Unknown SRS type")
i=(0,d.Jt)("EPSG:"+e.properties.code)}else i=this.dataProjection
return i}writeFeatureObject(t,e){e=this.adaptOptions(e)
const i={type:"Feature",geometry:null,properties:null},n=t.getId()
if(void 0!==n&&(i.id=n),!t.hasProperties())return i
const r=t.getProperties(),o=t.getGeometry()
return o&&(i.geometry=g(o,e),delete r[t.getGeometryName()]),(0,f.p)(r)||(i.properties=r),i}writeFeaturesObject(t,e){e=this.adaptOptions(e)
const i=[]
for(let n=0,r=t.length;n<r;++n)i.push(this.writeFeatureObject(t[n],e))
return{type:"FeatureCollection",features:i}}writeGeometryObject(t,e){return g(t,this.adaptOptions(e))}}},9341:(t,e,i)=>{"use strict"
i.r(e),i.d(e,{default:()=>x})
var n=i(4017),r=i(4008),o=i(5741),s=i(6034),a=i(7946),l=i(5399),h=i(8225),u=i(5631),c=i(7595),d=i(9621),f=i(3906),p=i(3861)
class g extends n.Ay{constructor(t){super(),t=t||{},this.dataProjection=new c.A({code:"",units:"tile-pixels"}),this.featureClass_=t.featureClass?t.featureClass:d.Ay,this.geometryName_=t.geometryName,this.layerName_=t.layerName?t.layerName:"layer",this.layers_=t.layers?t.layers:null,this.idProperty_=t.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(t,e,i,n){t.pos=e.geometry
const r=t.readVarint()+t.pos
let o=1,s=0,a=0,l=0,h=0,u=0
for(;t.pos<r;){if(!s){const e=t.readVarint()
o=7&e,s=e>>3}if(s--,1===o||2===o)a+=t.readSVarint(),l+=t.readSVarint(),1===o&&h>u&&(n.push(h),u=h),i.push(a,l),h+=2
else{if(7!==o)throw new Error("Invalid command found in the PBF")
h>u&&(i.push(i[u],i[u+1]),h+=2)}}h>u&&(n.push(h),u=h)}createFeature_(t,e,i){const l=e.type
if(0===l)return null
let c
const f=e.properties
let g
this.idProperty_?(g=f[this.idProperty_],delete f[this.idProperty_]):g=e.id,f[this.layerName_]=e.layer.name
const _=[],m=[]
this.readRawGeometry_(t,e,_,m)
const y=function(t,e){let i
return 1===t?i=1===e?"Point":"MultiPoint":2===t?i=1===e?"LineString":"MultiLineString":3===t&&(i="Polygon"),i}(l,m.length)
if(this.featureClass_===d.Ay)c=new this.featureClass_(y,_,m,2,f,g),c.transform(i.dataProjection)
else{let t
if("Polygon"==y){const e=(0,p.yJ)(_,m)
t=e.length>1?new a.A(_,"XY",e):new u.Ay(_,"XY",m)}else t="Point"===y?new h.A(_,"XY"):"LineString"===y?new r.A(_,"XY"):"MultiPoint"===y?new s.A(_,"XY"):"MultiLineString"===y?new o.A(_,"XY",m):null
c=new(0,this.featureClass_),this.geometryName_&&c.setGeometryName(this.geometryName_)
const e=(0,n.hX)(t,!1,i)
c.setGeometry(e),void 0!==g&&c.setId(g),c.setProperties(f,!0)}return c}getType(){return"arraybuffer"}readFeatures(t,e){const i=this.layers_
e=this.adaptOptions(e)
const n=(0,f.Jt)(e.dataProjection)
n.setWorldExtent(e.extent),e.dataProjection=n
const r=new l(t),o=r.readFields(_,{}),s=[]
for(const a in o){if(i&&!i.includes(a))continue
const t=o[a],l=t?[0,0,t.extent,t.extent]:null
n.setExtent(l)
for(let i=0,n=t.length;i<n;++i){const n=v(r,t,i),o=this.createFeature_(r,n,e)
null!==o&&s.push(o)}}return s}readProjection(t){return this.dataProjection}setLayers(t){this.layers_=t}}function _(t,e,i){if(3===t){const t={keys:[],values:[],features:[]},n=i.readVarint()+i.pos
i.readFields(m,t,n),t.length=t.features.length,t.length&&(e[t.name]=t)}}function m(t,e,i){if(15===t)e.version=i.readVarint()
else if(1===t)e.name=i.readString()
else if(5===t)e.extent=i.readVarint()
else if(2===t)e.features.push(i.pos)
else if(3===t)e.keys.push(i.readString())
else if(4===t){let n=null
const r=i.readVarint()+i.pos
for(;i.pos<r;)n=1==(t=i.readVarint()>>3)?i.readString():2===t?i.readFloat():3===t?i.readDouble():4===t?i.readVarint64():5===t?i.readVarint():6===t?i.readSVarint():7===t?i.readBoolean():null
e.values.push(n)}}function y(t,e,i){if(1==t)e.id=i.readVarint()
else if(2==t){const t=i.readVarint()+i.pos
for(;i.pos<t;){const t=e.layer.keys[i.readVarint()],n=e.layer.values[i.readVarint()]
e.properties[t]=n}}else 3==t?e.type=i.readVarint():4==t&&(e.geometry=i.pos)}function v(t,e,i){t.pos=e.features[i]
const n=t.readVarint()+t.pos,r={layer:e,type:0,properties:{}}
return t.readFields(y,r,n),r}const x=g},419:(t,e,i)=>{"use strict"
i.d(e,{B4:()=>a,W8:()=>o,hq:()=>l,rT:()=>r,tV:()=>s})
var n=i(7195)
function r(){return!0}function o(){return!1}function s(){}function a(t){let e,i,r,o=!1
return function(){const s=Array.prototype.slice.call(arguments)
return o&&this===r&&(0,n.aI)(s,i)||(o=!0,r=this,i=s,e=t.apply(this,arguments)),e}}function l(t){return function(){let e
try{e=t()}catch(t){return Promise.reject(t)}return e instanceof Promise?e:Promise.resolve(e)}()}},4783:(t,e,i)=>{"use strict"
i.d(e,{A:()=>d})
var n=i(1051),r=i(1736),o=i(2282),s=i(3236),a=i(3906),l=i(419),h=i(2363)
const u=(0,o.vt)()
class c extends n.A{constructor(){super(),this.extent_=(0,s.S5)(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=(0,l.B4)(((t,e,i)=>{if(!i)return this.getSimplifiedGeometry(e)
const n=this.clone()
return n.applyTransform(i),n.getSimplifiedGeometry(e)}))}simplifyTransformed(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}clone(){return(0,r.b0)()}closestPointXY(t,e,i,n){return(0,r.b0)()}containsXY(t,e){const i=this.getClosestPoint([t,e])
return i[0]===t&&i[1]===e}getClosestPoint(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return(0,r.b0)()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&(0,s.aZ)(t),this.extentRevision_=this.getRevision()}return(0,s.$u)(this.extent_,t)}rotate(t,e){(0,r.b0)()}scale(t,e,i){(0,r.b0)()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return(0,r.b0)()}getType(){return(0,r.b0)()}applyTransform(t){(0,r.b0)()}intersectsExtent(t){return(0,r.b0)()}translate(t,e){(0,r.b0)()}transform(t,e){const i=(0,a.Jt)(t),n="tile-pixels"==i.getUnits()?function(t,n,r){const l=i.getExtent(),c=i.getWorldExtent(),d=(0,s.Oq)(c)/(0,s.Oq)(l)
return(0,o.Zz)(u,c[0],c[3],d,-d,0,0,0),(0,h.Rc)(t,0,t.length,r,u,n),(0,a.RG)(i,e)(t,n,r)}:(0,a.RG)(i,e)
return this.applyTransform(n),this}}const d=c},4008:(t,e,i)=>{"use strict"
i.d(e,{A:()=>g})
var n=i(9009),r=i(2408),o=i(3236),s=i(2656),a=i(5216),l=i(7195),h=i(6825),u=i(812),c=i(4900),d=i(601),f=i(6963)
class p extends n.Ay{constructor(t,e){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}appendCoordinate(t){(0,l.X$)(this.flatCoordinates,t),this.changed()}clone(){const t=new p(this.flatCoordinates.slice(),this.layout)
return t.applyProperties(this),t}closestPointXY(t,e,i,n){return n<(0,o.Ld)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,r.MD)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,r.n)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,i,n))}forEachSegment(t){return(0,h.j)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,e){return"XYM"!=this.layout&&"XYZM"!=this.layout?null:(e=void 0!==e&&e,(0,c.gr)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e))}getCoordinates(){return(0,u.n2)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,e){return(0,c.SH)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)}getLength(){return(0,f.k)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){const e=[]
return e.length=(0,a.P4)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new p(e,"XY")}getType(){return"LineString"}intersectsExtent(t){return(0,d.gp)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,s.z2)(this.flatCoordinates,0,t,this.stride),this.changed()}}const g=p},5741:(t,e,i)=>{"use strict"
i.d(e,{A:()=>p})
var n=i(4008),r=i(9009),o=i(2408),s=i(3236),a=i(2656),l=i(5216),h=i(7195),u=i(812),c=i(4900),d=i(601)
class f extends r.Ay{constructor(t,e,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(t[0]))this.setCoordinates(t,e)
else if(void 0!==e&&i)this.setFlatCoordinates(e,t),this.ends_=i
else{const e=t,i=[],n=[]
for(let t=0,o=e.length;t<o;++t){const r=e[t];(0,h.X$)(i,r.getFlatCoordinates()),n.push(i.length)}const r=0===e.length?this.getLayout():e[0].getLayout()
this.setFlatCoordinates(r,i),this.ends_=n}}appendLineString(t){(0,h.X$)(this.flatCoordinates,t.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new f(this.flatCoordinates.slice(),this.layout,this.ends_.slice())
return t.applyProperties(this),t}closestPointXY(t,e,i,n){return n<(0,s.Ld)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,o.HX)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,o.oW)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,i,n))}getCoordinateAtM(t,e,i){return"XYM"!=this.layout&&"XYZM"!=this.layout||0===this.flatCoordinates.length?null:(e=void 0!==e&&e,i=void 0!==i&&i,(0,c.L8)(this.flatCoordinates,0,this.ends_,this.stride,t,e,i))}getCoordinates(){return(0,u.cD)(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t<0||this.ends_.length<=t?null:new n.A(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){const t=this.flatCoordinates,e=this.ends_,i=this.layout,r=[]
let o=0
for(let s=0,a=e.length;s<a;++s){const a=e[s],l=new n.A(t.slice(o,a),i)
r.push(l),o=a}return r}getFlatMidpoints(){const t=[],e=this.flatCoordinates
let i=0
const n=this.ends_,r=this.stride
for(let o=0,s=n.length;o<s;++o){const s=n[o],a=(0,c.SH)(e,i,s,r,.5);(0,h.X$)(t,a),i=s}return t}getSimplifiedGeometryInternal(t){const e=[],i=[]
return e.length=(0,l.AL)(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,i),new f(e,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(t){return(0,d.fB)(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[])
const i=(0,a.KG)(this.flatCoordinates,0,t,this.stride,this.ends_)
this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()}}const p=f},6034:(t,e,i)=>{"use strict"
i.d(e,{A:()=>c})
var n=i(8225),r=i(9009),o=i(3236),s=i(2656),a=i(7195),l=i(812),h=i(5306)
class u extends r.Ay{constructor(t,e){super(),e&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendPoint(t){(0,a.X$)(this.flatCoordinates,t.getFlatCoordinates()),this.changed()}clone(){const t=new u(this.flatCoordinates.slice(),this.layout)
return t.applyProperties(this),t}closestPointXY(t,e,i,n){if(n<(0,o.Ld)(this.getExtent(),t,e))return n
const r=this.flatCoordinates,s=this.stride
for(let o=0,a=r.length;o<a;o+=s){const a=(0,h.hG)(t,e,r[o],r[o+1])
if(a<n){n=a
for(let t=0;t<s;++t)i[t]=r[o+t]
i.length=s}}return n}getCoordinates(){return(0,l.n2)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){const e=this.flatCoordinates.length/this.stride
return t<0||e<=t?null:new n.A(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){const t=this.flatCoordinates,e=this.layout,i=this.stride,r=[]
for(let o=0,s=t.length;o<s;o+=i){const s=new n.A(t.slice(o,o+i),e)
r.push(s)}return r}getType(){return"MultiPoint"}intersectsExtent(t){const e=this.flatCoordinates,i=this.stride
for(let n=0,r=e.length;n<r;n+=i){const i=e[n],r=e[n+1]
if((0,o.Rj)(t,i,r))return!0}return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,s.z2)(this.flatCoordinates,0,t,this.stride),this.changed()}}const c=u},7946:(t,e,i)=>{"use strict"
i.d(e,{A:()=>v})
var n=i(6034),r=i(5631),o=i(9009),s=i(2408),a=i(3236),l=i(2656),h=i(7195),u=i(1129),c=i(812),d=i(601),f=i(3861),p=i(8066),g=i(9354),_=i(6554),m=i(5216)
class y extends o.Ay{constructor(t,e,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(t[0])){const n=t,r=[],o=[]
for(let t=0,e=n.length;t<e;++t){const e=n[t],i=r.length,s=e.getEnds()
for(let t=0,n=s.length;t<n;++t)s[t]+=i;(0,h.X$)(r,e.getFlatCoordinates()),o.push(s)}e=0===n.length?this.getLayout():n[0].getLayout(),t=r,i=o}void 0!==e&&i?(this.setFlatCoordinates(e,t),this.endss_=i):this.setCoordinates(t,e)}appendPolygon(t){let e
if(this.flatCoordinates){const i=this.flatCoordinates.length;(0,h.X$)(this.flatCoordinates,t.getFlatCoordinates()),e=t.getEnds().slice()
for(let t=0,n=e.length;t<n;++t)e[t]+=i}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push()
this.endss_.push(e),this.changed()}clone(){const t=this.endss_.length,e=new Array(t)
for(let n=0;n<t;++n)e[n]=this.endss_[n].slice()
const i=new y(this.flatCoordinates.slice(),this.layout,e)
return i.applyProperties(this),i}closestPointXY(t,e,i,n){return n<(0,a.Ld)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,s.c)(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,s.te)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,i,n))}containsXY(t,e){return(0,_.Gd)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)}getArea(){return(0,p.Cs)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let e
return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),(0,f.NK)(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,(0,c.Dz)(e,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=(0,g.C)(this.flatCoordinates,0,this.endss_,this.stride)
this.flatInteriorPoints_=(0,u.p)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new n.A(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;(0,f.mb)(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=(0,f.NK)(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],i=[]
return e.length=(0,m.sx)(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,i),new y(e,"XY",i)}getPolygon(t){if(t<0||this.endss_.length<=t)return null
let e
if(0===t)e=0
else{const i=this.endss_[t-1]
e=i[i.length-1]}const i=this.endss_[t].slice(),n=i[i.length-1]
if(0!==e)for(let r=0,o=i.length;r<o;++r)i[r]-=e
return new r.Ay(this.flatCoordinates.slice(e,n),this.layout,i)}getPolygons(){const t=this.layout,e=this.flatCoordinates,i=this.endss_,n=[]
let o=0
for(let s=0,a=i.length;s<a;++s){const a=i[s].slice(),l=a[a.length-1]
if(0!==o)for(let t=0,e=a.length;t<e;++t)a[t]-=o
const h=new r.Ay(e.slice(o,l),t,a)
n.push(h),o=l}return n}getType(){return"MultiPolygon"}intersectsExtent(t){return(0,d.Wp)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[])
const i=(0,l.d6)(this.flatCoordinates,0,t,this.stride,this.endss_)
if(0===i.length)this.flatCoordinates.length=0
else{const t=i[i.length-1]
this.flatCoordinates.length=0===t.length?0:t[t.length-1]}this.changed()}}const v=y},8225:(t,e,i)=>{"use strict"
i.d(e,{A:()=>l})
var n=i(9009),r=i(3236),o=i(2656),s=i(5306)
class a extends n.Ay{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){const t=new a(this.flatCoordinates.slice(),this.layout)
return t.applyProperties(this),t}closestPointXY(t,e,i,n){const r=this.flatCoordinates,o=(0,s.hG)(t,e,r[0],r[1])
if(o<n){const t=this.stride
for(let e=0;e<t;++e)i[e]=r[e]
return i.length=t,o}return n}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(t){return(0,r.dP)(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return(0,r.Rj)(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,o._n)(this.flatCoordinates,0,t,this.stride),this.changed()}}const l=a},5631:(t,e,i)=>{"use strict"
i.d(e,{Ay:()=>v,VY:()=>x})
var n=i(9009),r=i(2408),o=i(3236),s=i(2656),a=i(5216),l=i(812),h=i(8066)
class u extends n.Ay{constructor(t,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}clone(){return new u(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,e,i,n){return n<(0,o.Ld)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,r.MD)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,r.n)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,i,n))}getArea(){return(0,h.eN)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return(0,l.n2)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const e=[]
return e.length=(0,a.P4)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new u(e,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,s.z2)(this.flatCoordinates,0,t,this.stride),this.changed()}}const c=u
var d=i(8225),f=i(7195),p=i(1129),g=i(601),_=i(3861),m=i(6554)
class y extends n.Ay{constructor(t,e,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==e&&i?(this.setFlatCoordinates(e,t),this.ends_=i):this.setCoordinates(t,e)}appendLinearRing(t){this.flatCoordinates?(0,f.X$)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new y(this.flatCoordinates.slice(),this.layout,this.ends_.slice())
return t.applyProperties(this),t}closestPointXY(t,e,i,n){return n<(0,o.Ld)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,r.HX)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,r.oW)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,i,n))}containsXY(t,e){return(0,m.zb)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}getArea(){return(0,h.PK)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let e
return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),(0,_.ug)(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,(0,l.cD)(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=(0,o.q1)(this.getExtent())
this.flatInteriorPoint_=(0,p.J)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new d.A(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new c(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,e=this.flatCoordinates,i=this.ends_,n=[]
let r=0
for(let o=0,s=i.length;o<s;++o){const s=i[o],a=new c(e.slice(r,s),t)
n.push(a),r=s}return n}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;(0,_.PA)(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=(0,_.ug)(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],i=[]
return e.length=(0,a.Hg)(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,i),new y(e,"XY",i)}getType(){return"Polygon"}intersectsExtent(t){return(0,g.HT)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[])
const i=(0,s.KG)(this.flatCoordinates,0,t,this.stride,this.ends_)
this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()}}const v=y
function x(t){if((0,o.Im)(t))throw new Error("Cannot create polygon from empty extent")
const e=t[0],i=t[1],n=t[2],r=t[3],s=[e,i,e,r,n,r,n,i,e,i]
return new y(s,"XY",[s.length])}},9009:(t,e,i)=>{"use strict"
i.d(e,{Ay:()=>c,p0:()=>l,v7:()=>u})
var n=i(4783),r=i(1736),o=i(3236),s=i(2363)
class a extends n.A{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(t){return(0,o.Vy)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return(0,r.b0)()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this
const e=this.getSimplifiedGeometryInternal(t)
return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=h(t),this.layout=t,this.flatCoordinates=e}setCoordinates(t,e){(0,r.b0)()}setLayout(t,e,i){let n
if(t)n=h(t)
else{for(let t=0;t<i;++t){if(0===e.length)return this.layout="XY",void(this.stride=2)
e=e[0]}n=e.length,t=l(n)}this.layout=t,this.stride=n}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(t,e){const i=this.getFlatCoordinates()
if(i){const n=this.getStride();(0,s.e$)(i,0,i.length,n,t,e,i),this.changed()}}scale(t,e,i){void 0===e&&(e=t),i||(i=(0,o.q1)(this.getExtent()))
const n=this.getFlatCoordinates()
if(n){const r=this.getStride();(0,s.hs)(n,0,n.length,r,t,e,i,n),this.changed()}}translate(t,e){const i=this.getFlatCoordinates()
if(i){const n=this.getStride();(0,s.Tl)(i,0,i.length,n,t,e,i),this.changed()}}}function l(t){let e
return 2==t?e="XY":3==t?e="XYZ":4==t&&(e="XYZM"),e}function h(t){let e
return"XY"==t?e=2:"XYZ"==t||"XYM"==t?e=3:"XYZM"==t&&(e=4),e}function u(t,e,i){const n=t.getFlatCoordinates()
if(!n)return null
const r=t.getStride()
return(0,s.Rc)(n,0,n.length,r,e,i)}const c=a},8066:(t,e,i)=>{"use strict"
function n(t,e,i,n){let r=0,o=t[i-n],s=t[i-n+1]
for(;e<i;e+=n){const i=t[e],n=t[e+1]
r+=s*i-o*n,o=i,s=n}return r/2}function r(t,e,i,r){let o=0
for(let s=0,a=i.length;s<a;++s){const a=i[s]
o+=n(t,e,a,r),e=a}return o}function o(t,e,i,n){let o=0
for(let s=0,a=i.length;s<a;++s){const a=i[s]
o+=r(t,e,a,n),e=a[a.length-1]}return o}i.d(e,{Cs:()=>o,PK:()=>r,eN:()=>n})},9354:(t,e,i)=>{"use strict"
i.d(e,{C:()=>r})
var n=i(3236)
function r(t,e,i,r){const o=[]
let s=(0,n.S5)()
for(let a=0,l=i.length;a<l;++a){const l=i[a]
s=(0,n.Vy)(t,e,l[0],r),o.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=l[l.length-1]}return o}},2408:(t,e,i)=>{"use strict"
i.d(e,{HX:()=>s,MD:()=>o,c:()=>a,n:()=>l,oW:()=>h,te:()=>u})
var n=i(5306)
function r(t,e,i,r,o,s,a){const l=t[e],h=t[e+1],u=t[i]-l,c=t[i+1]-h
let d
if(0===u&&0===c)d=e
else{const f=((o-l)*u+(s-h)*c)/(u*u+c*c)
if(f>1)d=i
else{if(f>0){for(let o=0;o<r;++o)a[o]=(0,n.Cc)(t[e+o],t[i+o],f)
return void(a.length=r)}d=e}}for(let n=0;n<r;++n)a[n]=t[d+n]
a.length=r}function o(t,e,i,r,o){let s=t[e],a=t[e+1]
for(e+=r;e<i;e+=r){const i=t[e],r=t[e+1],l=(0,n.hG)(s,a,i,r)
l>o&&(o=l),s=i,a=r}return o}function s(t,e,i,n,r){for(let s=0,a=i.length;s<a;++s){const a=i[s]
r=o(t,e,a,n,r),e=a}return r}function a(t,e,i,n,r){for(let o=0,a=i.length;o<a;++o){const a=i[o]
r=s(t,e,a,n,r),e=a[a.length-1]}return r}function l(t,e,i,o,s,a,l,h,u,c,d){if(e==i)return c
let f,p
if(0===s){if(p=(0,n.hG)(l,h,t[e],t[e+1]),p<c){for(f=0;f<o;++f)u[f]=t[e+f]
return u.length=o,p}return c}d=d||[NaN,NaN]
let g=e+o
for(;g<i;)if(r(t,g-o,g,o,l,h,d),p=(0,n.hG)(l,h,d[0],d[1]),p<c){for(c=p,f=0;f<o;++f)u[f]=d[f]
u.length=o,g+=o}else g+=o*Math.max((Math.sqrt(p)-Math.sqrt(c))/s|0,1)
if(a&&(r(t,i-o,e,o,l,h,d),p=(0,n.hG)(l,h,d[0],d[1]),p<c)){for(c=p,f=0;f<o;++f)u[f]=d[f]
u.length=o}return c}function h(t,e,i,n,r,o,s,a,h,u,c){c=c||[NaN,NaN]
for(let d=0,f=i.length;d<f;++d){const f=i[d]
u=l(t,e,f,n,r,o,s,a,h,u,c),e=f}return u}function u(t,e,i,n,r,o,s,a,l,u,c){c=c||[NaN,NaN]
for(let d=0,f=i.length;d<f;++d){const f=i[d]
u=h(t,e,f,n,r,o,s,a,l,u,c),e=f[f.length-1]}return u}},6554:(t,e,i)=>{"use strict"
i.d(e,{Gd:()=>a,a_:()=>o,t7:()=>r,zb:()=>s})
var n=i(3236)
function r(t,e,i,r,s){return!(0,n.sB)(s,(function(n){return!o(t,e,i,r,n[0],n[1])}))}function o(t,e,i,n,r,o){let s=0,a=t[i-n],l=t[i-n+1]
for(;e<i;e+=n){const i=t[e],n=t[e+1]
l<=o?n>o&&(i-a)*(o-l)-(r-a)*(n-l)>0&&s++:n<=o&&(i-a)*(o-l)-(r-a)*(n-l)<0&&s--,a=i,l=n}return 0!==s}function s(t,e,i,n,r,s){if(0===i.length)return!1
if(!o(t,e,i[0],n,r,s))return!1
for(let a=1,l=i.length;a<l;++a)if(o(t,i[a-1],i[a],n,r,s))return!1
return!0}function a(t,e,i,n,r,o){if(0===i.length)return!1
for(let a=0,l=i.length;a<l;++a){const l=i[a]
if(s(t,e,l,n,r,o))return!0
e=l[l.length-1]}return!1}},2656:(t,e,i)=>{"use strict"
function n(t,e,i,n){for(let r=0,o=i.length;r<o;++r)t[e++]=i[r]
return e}function r(t,e,i,n){for(let r=0,o=i.length;r<o;++r){const o=i[r]
for(let i=0;i<n;++i)t[e++]=o[i]}return e}function o(t,e,i,n,o){o=o||[]
let s=0
for(let a=0,l=i.length;a<l;++a){const l=r(t,e,i[a],n)
o[s++]=l,e=l}return o.length=s,o}function s(t,e,i,n,r){r=r||[]
let s=0
for(let a=0,l=i.length;a<l;++a){const l=o(t,e,i[a],n,r[s])
0===l.length&&(l[0]=e),r[s++]=l,e=l[l.length-1]}return r.length=s,r}i.d(e,{KG:()=>o,_n:()=>n,d6:()=>s,z2:()=>r})},812:(t,e,i)=>{"use strict"
function n(t,e,i,n,r){r=void 0!==r?r:[]
let o=0
for(let s=e;s<i;s+=n)r[o++]=t.slice(s,s+n)
return r.length=o,r}function r(t,e,i,r,o){o=void 0!==o?o:[]
let s=0
for(let a=0,l=i.length;a<l;++a){const l=i[a]
o[s++]=n(t,e,l,r,o[s]),e=l}return o.length=s,o}function o(t,e,i,n,o){o=void 0!==o?o:[]
let s=0
for(let a=0,l=i.length;a<l;++a){const l=i[a]
o[s++]=1===l.length&&l[0]===e?[]:r(t,e,l,n,o[s]),e=l[l.length-1]}return o.length=s,o}i.d(e,{Dz:()=>o,cD:()=>r,n2:()=>n})},1129:(t,e,i)=>{"use strict"
i.d(e,{J:()=>o,p:()=>s})
var n=i(7195),r=i(6554)
function o(t,e,i,o,s,a,l){let h,u,c,d,f,p,g
const _=s[a+1],m=[]
for(let n=0,r=i.length;n<r;++n){const r=i[n]
for(d=t[r-o],p=t[r-o+1],h=e;h<r;h+=o)f=t[h],g=t[h+1],(_<=p&&g<=_||p<=_&&_<=g)&&(c=(_-p)/(g-p)*(f-d)+d,m.push(c)),d=f,p=g}let y=NaN,v=-1/0
for(m.sort(n.V_),d=m[0],h=1,u=m.length;h<u;++h){f=m[h]
const n=Math.abs(f-d)
n>v&&(c=(d+f)/2,(0,r.zb)(t,e,i,o,c,_)&&(y=c,v=n)),d=f}return isNaN(y)&&(y=s[a]),l?(l.push(y,_,v),l):[y,_,v]}function s(t,e,i,n,r){let s=[]
for(let a=0,l=i.length;a<l;++a){const l=i[a]
s=o(t,e,l,n,r,2*a,s),e=l[l.length-1]}return s}},4900:(t,e,i)=>{"use strict"
i.d(e,{L8:()=>a,SH:()=>o,gr:()=>s})
var n=i(7195),r=i(5306)
function o(t,e,i,o,s,a,l){let h,u
const c=(i-e)/o
if(1===c)h=e
else if(2===c)h=e,u=s
else if(0!==c){let r=t[e],a=t[e+1],l=0
const c=[0]
for(let n=e+o;n<i;n+=o){const e=t[n],i=t[n+1]
l+=Math.sqrt((e-r)*(e-r)+(i-a)*(i-a)),c.push(l),r=e,a=i}const d=s*l,f=(0,n.El)(c,d)
f<0?(u=(d-c[-f-2])/(c[-f-1]-c[-f-2]),h=e+(-f-2)*o):h=e+f*o}l=l>1?l:2,a=a||new Array(l)
for(let n=0;n<l;++n)a[n]=void 0===h?NaN:void 0===u?t[h+n]:(0,r.Cc)(t[h+n],t[h+o+n],u)
return a}function s(t,e,i,n,o,s){if(i==e)return null
let a
if(o<t[e+n-1])return s?(a=t.slice(e,e+n),a[n-1]=o,a):null
if(t[i-1]<o)return s?(a=t.slice(i-n,i),a[n-1]=o,a):null
if(o==t[e+n-1])return t.slice(e,e+n)
let l=e/n,h=i/n
for(;l<h;){const e=l+h>>1
o<t[(e+1)*n-1]?h=e:l=e+1}const u=t[l*n-1]
if(o==u)return t.slice((l-1)*n,(l-1)*n+n)
const c=(o-u)/(t[(l+1)*n-1]-u)
a=[]
for(let d=0;d<n-1;++d)a.push((0,r.Cc)(t[(l-1)*n+d],t[l*n+d],c))
return a.push(o),a}function a(t,e,i,n,r,o,a){if(a)return s(t,e,i[i.length-1],n,r,o)
let l
if(r<t[n-1])return o?(l=t.slice(0,n),l[n-1]=r,l):null
if(t[t.length-1]<r)return o?(l=t.slice(t.length-n),l[n-1]=r,l):null
for(let h=0,u=i.length;h<u;++h){const o=i[h]
if(e!=o){if(r<t[e+n-1])return null
if(r<=t[o-1])return s(t,e,o,n,r,!1)
e=o}}return null}},601:(t,e,i)=>{"use strict"
i.d(e,{HT:()=>h,Wp:()=>u,fB:()=>a,gp:()=>s,sj:()=>l})
var n=i(3236),r=i(6825),o=i(6554)
function s(t,e,i,o,s){const a=(0,n.R8)((0,n.S5)(),t,e,i,o)
return!!(0,n.HY)(s,a)&&(!!(0,n.ms)(s,a)||a[0]>=s[0]&&a[2]<=s[2]||a[1]>=s[1]&&a[3]<=s[3]||(0,r.j)(t,e,i,o,(function(t,e){return(0,n.Mx)(s,t,e)})))}function a(t,e,i,n,r){for(let o=0,a=i.length;o<a;++o){if(s(t,e,i[o],n,r))return!0
e=i[o]}return!1}function l(t,e,i,n,r){return!!(s(t,e,i,n,r)||(0,o.a_)(t,e,i,n,r[0],r[1])||(0,o.a_)(t,e,i,n,r[0],r[3])||(0,o.a_)(t,e,i,n,r[2],r[1])||(0,o.a_)(t,e,i,n,r[2],r[3]))}function h(t,e,i,n,r){if(!l(t,e,i[0],n,r))return!1
if(1===i.length)return!0
for(let a=1,l=i.length;a<l;++a)if((0,o.t7)(t,i[a-1],i[a],n,r)&&!s(t,i[a-1],i[a],n,r))return!1
return!0}function u(t,e,i,n,r){for(let o=0,s=i.length;o<s;++o){const s=i[o]
if(h(t,e,s,n,r))return!0
e=s[s.length-1]}return!1}},6963:(t,e,i)=>{"use strict"
function n(t,e,i,n){let r=t[e],o=t[e+1],s=0
for(let a=e+n;a<i;a+=n){const e=t[a],i=t[a+1]
s+=Math.sqrt((e-r)*(e-r)+(i-o)*(i-o)),r=e,o=i}return s}i.d(e,{k:()=>n})},3861:(t,e,i)=>{"use strict"
function n(t,e,i,n){for(;e<i-n;){for(let r=0;r<n;++r){const o=t[e+r]
t[e+r]=t[i-n+r],t[i-n+r]=o}e+=n,i-=n}}function r(t,e,i,n){let r=0,o=t[i-n],s=t[i-n+1]
for(;e<i;e+=n){const i=t[e],n=t[e+1]
r+=(i-o)*(n+s),o=i,s=n}return 0===r?void 0:r>0}function o(t,e,i,n,o){o=void 0!==o&&o
for(let s=0,a=i.length;s<a;++s){const a=i[s],l=r(t,e,a,n)
if(0===s){if(o&&l||!o&&!l)return!1}else if(o&&!l||!o&&l)return!1
e=a}return!0}function s(t,e,i,n,r){for(let s=0,a=i.length;s<a;++s){const a=i[s]
if(!o(t,e,a,n,r))return!1
a.length&&(e=a[a.length-1])}return!0}function a(t,e,i,o,s){s=void 0!==s&&s
for(let a=0,l=i.length;a<l;++a){const l=i[a],h=r(t,e,l,o);(0===a?s&&h||!s&&!h:s&&!h||!s&&h)&&n(t,e,l,o),e=l}return e}function l(t,e,i,n,r){for(let o=0,s=i.length;o<s;++o)e=a(t,e,i[o],n,r)
return e}function h(t,e){const i=[]
let n,o=0,s=0
for(let a=0,l=e.length;a<l;++a){const l=e[a],h=r(t,o,l,2)
if(void 0===n&&(n=h),h===n)i.push(e.slice(s,a+1))
else{if(0===i.length)continue
i[i.length-1].push(e[s])}s=a+1,o=l}return i}i.d(e,{yJ:()=>h,PA:()=>o,mb:()=>s,ug:()=>a,NK:()=>l})},6825:(t,e,i)=>{"use strict"
function n(t,e,i,n,r){let o
for(e+=n;e<i;e+=n)if(o=r(t.slice(e-n,e),t.slice(e,e+n)),o)return o
return!1}i.d(e,{j:()=>n})},5216:(t,e,i)=>{"use strict"
i.d(e,{AL:()=>o,Hg:()=>l,P4:()=>r,n$:()=>s,sx:()=>h})
var n=i(5306)
function r(t,e,i,r,o,s,a){const l=(i-e)/r
if(l<3){for(;e<i;e+=r)s[a++]=t[e],s[a++]=t[e+1]
return a}const h=new Array(l)
h[0]=1,h[l-1]=1
const u=[e,i-r]
let c=0
for(;u.length>0;){const i=u.pop(),s=u.pop()
let a=0
const l=t[s],d=t[s+1],f=t[i],p=t[i+1]
for(let e=s+r;e<i;e+=r){const i=t[e],r=t[e+1],o=(0,n.Q1)(i,r,l,d,f,p)
o>a&&(c=e,a=o)}a>o&&(h[(c-e)/r]=1,s+r<c&&u.push(s,c),c+r<i&&u.push(c,i))}for(let n=0;n<l;++n)h[n]&&(s[a++]=t[e+n*r],s[a++]=t[e+n*r+1])
return a}function o(t,e,i,n,o,s,a,l){for(let h=0,u=i.length;h<u;++h){const u=i[h]
a=r(t,e,u,n,o,s,a),l.push(a),e=u}return a}function s(t,e){return e*Math.round(t/e)}function a(t,e,i,n,r,o,a){if(e==i)return a
let l,h,u=s(t[e],r),c=s(t[e+1],r)
e+=n,o[a++]=u,o[a++]=c
do{if(l=s(t[e],r),h=s(t[e+1],r),(e+=n)==i)return o[a++]=l,o[a++]=h,a}while(l==u&&h==c)
for(;e<i;){const i=s(t[e],r),d=s(t[e+1],r)
if(e+=n,i==l&&d==h)continue
const f=l-u,p=h-c,g=i-u,_=d-c
f*_==p*g&&(f<0&&g<f||f==g||f>0&&g>f)&&(p<0&&_<p||p==_||p>0&&_>p)?(l=i,h=d):(o[a++]=l,o[a++]=h,u=l,c=h,l=i,h=d)}return o[a++]=l,o[a++]=h,a}function l(t,e,i,n,r,o,s,l){for(let h=0,u=i.length;h<u;++h){const u=i[h]
s=a(t,e,u,n,r,o,s),l.push(s),e=u}return s}function h(t,e,i,n,r,o,s,a){for(let h=0,u=i.length;h<u;++h){const u=i[h],c=[]
s=l(t,e,u,n,r,o,s,c),a.push(c),e=u[u.length-1]}return s}},2363:(t,e,i)=>{"use strict"
function n(t,e,i,n,r,o){o=o||[]
let s=0
for(let a=e;a<i;a+=n){const e=t[a],i=t[a+1]
o[s++]=r[0]*e+r[2]*i+r[4],o[s++]=r[1]*e+r[3]*i+r[5]}return o&&o.length!=s&&(o.length=s),o}function r(t,e,i,n,r,o,s){s=s||[]
const a=Math.cos(r),l=Math.sin(r),h=o[0],u=o[1]
let c=0
for(let d=e;d<i;d+=n){const e=t[d]-h,i=t[d+1]-u
s[c++]=h+e*a-i*l,s[c++]=u+e*l+i*a
for(let r=d+2;r<d+n;++r)s[c++]=t[r]}return s&&s.length!=c&&(s.length=c),s}function o(t,e,i,n,r,o,s,a){a=a||[]
const l=s[0],h=s[1]
let u=0
for(let c=e;c<i;c+=n){const e=t[c]-l,i=t[c+1]-h
a[u++]=l+r*e,a[u++]=h+o*i
for(let r=c+2;r<c+n;++r)a[u++]=t[r]}return a&&a.length!=u&&(a.length=u),a}function s(t,e,i,n,r,o,s){s=s||[]
let a=0
for(let l=e;l<i;l+=n){s[a++]=t[l]+r,s[a++]=t[l+1]+o
for(let e=l+2;e<l+n;++e)s[a++]=t[e]}return s&&s.length!=a&&(s.length=a),s}i.d(e,{Rc:()=>n,Tl:()=>s,e$:()=>r,hs:()=>o})},1622:(t,e,i)=>{"use strict"
i.d(e,{DT:()=>u,FT:()=>d,Wl:()=>h,XM:()=>c,_p:()=>r,cr:()=>l,ew:()=>a,j:()=>s,oF:()=>o})
const n="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",r=n.includes("firefox"),o=n.includes("safari")&&!n.includes("chrom")&&(n.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(n)),s=n.includes("webkit")&&!n.includes("edge"),a=n.includes("macintosh"),l="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,h="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,u="undefined"!=typeof Image&&Image.prototype.decode,c="function"==typeof createImageBitmap,d=function(){let t=!1
try{const e=Object.defineProperty({},"passive",{get:function(){t=!0}})
window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch(t){}return t}()},2896:(t,e,i)=>{"use strict"
i.r(e),i.d(e,{Graticule:()=>At,Group:()=>Rt.A,Heatmap:()=>vi,Image:()=>xi.A,Layer:()=>bi.A,Tile:()=>wi.A,Vector:()=>Ct,VectorImage:()=>Ai,VectorTile:()=>zi,WebGLPoints:()=>Hi,WebGLTile:()=>Qi})
var n=i(3844),r=i(8411),o=i(9656),s=i(8343),a=i(4008),l=i(8225),h=i(7110),u=i(5337),c=i(9769),d=i(6789)
const f={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},p=[f.FILL],g=[f.STROKE],_=[f.BEGIN_PATH],m=[f.CLOSE_PATH],y=f
var v=i(937)
const x=class{drawCustom(t,e,i,n,r){}drawGeometry(t){}setStyle(t){}drawCircle(t,e,i){}drawFeature(t,e,i){}drawGeometryCollection(t,e,i){}drawLineString(t,e,i){}drawMultiLineString(t,e,i){}drawMultiPoint(t,e,i){}drawMultiPolygon(t,e,i){}drawPoint(t,e,i){}drawPolygon(t,e,i){}drawText(t,e,i){}setFillStrokeStyle(t,e){}setImageStyle(t,e){}setTextStyle(t,e){}}
var b=i(7382),w=i(3236),E=i(223),S=i(7195),C=i(812)
const P=class extends x{constructor(t,e,i,n){super(),this.tolerance=t,this.maxExtent=e,this.pixelRatio=n,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const e=this.pixelRatio
return 1==e?t:t.map((function(t){return t*e}))}appendFlatPointCoordinates(t,e){const i=this.getBufferedMaxExtent(),n=this.tmpCoordinate_,r=this.coordinates
let o=r.length
for(let s=0,a=t.length;s<a;s+=e)n[0]=t[s],n[1]=t[s+1],(0,w.Ym)(i,n)&&(r[o++]=n[0],r[o++]=n[1])
return o}appendFlatLineCoordinates(t,e,i,n,r,o){const s=this.coordinates
let a=s.length
const l=this.getBufferedMaxExtent()
o&&(e+=n)
let h=t[e],u=t[e+1]
const c=this.tmpCoordinate_
let d,f,p,g=!0
for(d=e+n;d<i;d+=n)c[0]=t[d],c[1]=t[d+1],p=(0,w.vz)(l,c),p!==f?(g&&(s[a++]=h,s[a++]=u,g=!1),s[a++]=c[0],s[a++]=c[1]):p===v.A.INTERSECTING?(s[a++]=c[0],s[a++]=c[1],g=!1):g=!0,h=c[0],u=c[1],f=p
return(r&&g||d===e+n)&&(s[a++]=h,s[a++]=u),a}drawCustomCoordinates_(t,e,i,n,r){for(let o=0,s=i.length;o<s;++o){const s=i[o],a=this.appendFlatLineCoordinates(t,e,s,n,!1,!1)
r.push(a),e=s}return e}drawCustom(t,e,i,n,r){this.beginGeometry(t,e,r)
const o=t.getType(),s=t.getStride(),a=this.coordinates.length
let l,h,u,c,d
switch(o){case"MultiPolygon":l=t.getOrientedFlatCoordinates(),c=[]
const e=t.getEndss()
d=0
for(let t=0,i=e.length;t<i;++t){const i=[]
d=this.drawCustomCoordinates_(l,d,e[t],s,i),c.push(i)}this.instructions.push([y.CUSTOM,a,c,t,i,C.Dz,r]),this.hitDetectionInstructions.push([y.CUSTOM,a,c,t,n||i,C.Dz,r])
break
case"Polygon":case"MultiLineString":u=[],l="Polygon"==o?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),d=this.drawCustomCoordinates_(l,0,t.getEnds(),s,u),this.instructions.push([y.CUSTOM,a,u,t,i,C.cD,r]),this.hitDetectionInstructions.push([y.CUSTOM,a,u,t,n||i,C.cD,r])
break
case"LineString":case"Circle":l=t.getFlatCoordinates(),h=this.appendFlatLineCoordinates(l,0,l.length,s,!1,!1),this.instructions.push([y.CUSTOM,a,h,t,i,C.n2,r]),this.hitDetectionInstructions.push([y.CUSTOM,a,h,t,n||i,C.n2,r])
break
case"MultiPoint":l=t.getFlatCoordinates(),h=this.appendFlatPointCoordinates(l,s),h>a&&(this.instructions.push([y.CUSTOM,a,h,t,i,C.n2,r]),this.hitDetectionInstructions.push([y.CUSTOM,a,h,t,n||i,C.n2,r]))
break
case"Point":l=t.getFlatCoordinates(),this.coordinates.push(l[0],l[1]),h=this.coordinates.length,this.instructions.push([y.CUSTOM,a,h,t,i,void 0,r]),this.hitDetectionInstructions.push([y.CUSTOM,a,h,t,n||i,void 0,r])}this.endGeometry(e)}beginGeometry(t,e,i){this.beginGeometryInstruction1_=[y.BEGIN_GEOMETRY,e,0,t,i],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[y.BEGIN_GEOMETRY,e,0,t,i],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions
let e
t.reverse()
const i=t.length
let n,r,o=-1
for(e=0;e<i;++e)n=t[e],r=n[0],r==y.END_GEOMETRY?o=e:r==y.BEGIN_GEOMETRY&&(n[2]=e,(0,S.gI)(this.hitDetectionInstructions,o,e),o=-1)}setFillStrokeStyle(t,e){const i=this.state
if(t){const e=t.getColor()
i.fillPatternScale=e&&"object"==typeof e&&"src"in e?this.pixelRatio:1,i.fillStyle=(0,b.F)(e||E.qY)}else i.fillStyle=void 0
if(e){const t=e.getColor()
i.strokeStyle=(0,b.F)(t||E.NT)
const n=e.getLineCap()
i.lineCap=void 0!==n?n:E._m
const r=e.getLineDash()
i.lineDash=r?r.slice():E.Oq
const o=e.getLineDashOffset()
i.lineDashOffset=o||E.vk
const s=e.getLineJoin()
i.lineJoin=void 0!==s?s:E._K
const a=e.getWidth()
i.lineWidth=void 0!==a?a:E.aq
const l=e.getMiterLimit()
i.miterLimit=void 0!==l?l:E.eL,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(t){const e=t.fillStyle,i=[y.SET_FILL_STYLE,e]
return"string"!=typeof e&&i.push(t.fillPatternScale),i}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[y.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,e){const i=t.fillStyle
"string"==typeof i&&t.currentFillStyle==i||(void 0!==i&&this.instructions.push(e.call(this,t)),t.currentFillStyle=i)}updateStrokeStyle(t,e){const i=t.strokeStyle,n=t.lineCap,r=t.lineDash,o=t.lineDashOffset,s=t.lineJoin,a=t.lineWidth,l=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=n||r!=t.currentLineDash&&!(0,S.aI)(t.currentLineDash,r)||t.currentLineDashOffset!=o||t.currentLineJoin!=s||t.currentLineWidth!=a||t.currentMiterLimit!=l)&&(void 0!==i&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=n,t.currentLineDash=r,t.currentLineDashOffset=o,t.currentLineJoin=s,t.currentLineWidth=a,t.currentMiterLimit=l)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null
const e=[y.END_GEOMETRY,t]
this.instructions.push(e),this.hitDetectionInstructions.push(e)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=(0,w.o8)(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;(0,w.r)(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}
var T=i(5216)
const I=class extends P{constructor(t,e,i,n){super(t,e,i,n)}drawFlatCoordinatess_(t,e,i,n){const r=this.state,o=void 0!==r.fillStyle,s=void 0!==r.strokeStyle,a=i.length
this.instructions.push(_),this.hitDetectionInstructions.push(_)
for(let l=0;l<a;++l){const r=i[l],o=this.coordinates.length,a=this.appendFlatLineCoordinates(t,e,r,n,!0,!s),h=[y.MOVE_TO_LINE_TO,o,a]
this.instructions.push(h),this.hitDetectionInstructions.push(h),s&&(this.instructions.push(m),this.hitDetectionInstructions.push(m)),e=r}return o&&(this.instructions.push(p),this.hitDetectionInstructions.push(p)),s&&(this.instructions.push(g),this.hitDetectionInstructions.push(g)),e}drawCircle(t,e,i){const n=this.state,r=n.fillStyle,o=n.strokeStyle
if(void 0===r&&void 0===o)return
this.setFillStrokeStyles_(),this.beginGeometry(t,e,i),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([y.SET_FILL_STYLE,E.qY]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([y.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,E.Oq,E.vk])
const s=t.getFlatCoordinates(),a=t.getStride(),l=this.coordinates.length
this.appendFlatLineCoordinates(s,0,s.length,a,!1,!1)
const h=[y.CIRCLE,l]
this.instructions.push(_,h),this.hitDetectionInstructions.push(_,h),void 0!==n.fillStyle&&(this.instructions.push(p),this.hitDetectionInstructions.push(p)),void 0!==n.strokeStyle&&(this.instructions.push(g),this.hitDetectionInstructions.push(g)),this.endGeometry(e)}drawPolygon(t,e,i){const n=this.state,r=n.fillStyle,o=n.strokeStyle
if(void 0===r&&void 0===o)return
this.setFillStrokeStyles_(),this.beginGeometry(t,e,i),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([y.SET_FILL_STYLE,E.qY]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([y.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,E.Oq,E.vk])
const s=t.getEnds(),a=t.getOrientedFlatCoordinates(),l=t.getStride()
this.drawFlatCoordinatess_(a,0,s,l),this.endGeometry(e)}drawMultiPolygon(t,e,i){const n=this.state,r=n.fillStyle,o=n.strokeStyle
if(void 0===r&&void 0===o)return
this.setFillStrokeStyles_(),this.beginGeometry(t,e,i),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([y.SET_FILL_STYLE,E.qY]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([y.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,E.Oq,E.vk])
const s=t.getEndss(),a=t.getOrientedFlatCoordinates(),l=t.getStride()
let h=0
for(let u=0,c=s.length;u<c;++u)h=this.drawFlatCoordinatess_(a,h,s[u],l)
this.endGeometry(e)}finish(){this.reverseHitDetectionInstructions(),this.state=null
const t=this.tolerance
if(0!==t){const e=this.coordinates
for(let i=0,n=e.length;i<n;++i)e[i]=(0,T.n$)(e[i],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state
void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)}}
var M=i(1736),A=i(5306)
function R(t,e,i,n,r){const o=[]
let s=i,a=0,l=e.slice(i,2)
for(;a<t&&s+r<n;){const[i,n]=l.slice(-2),h=e[s+r],u=e[s+r+1],c=Math.sqrt((h-i)*(h-i)+(u-n)*(u-n))
if(a+=c,a>=t){const e=(t-a+c)/c,d=(0,A.Cc)(i,h,e),f=(0,A.Cc)(n,u,e)
l.push(d,f),o.push(l),l=[d,f],a==t&&(s+=r),a=0}else if(a<t)l.push(e[s+r],e[s+r+1]),s+=r
else{const t=c-a,e=(0,A.Cc)(i,h,t/c),d=(0,A.Cc)(n,u,t/c)
l.push(e,d),o.push(l),l=[e,d],a=0,s+=r}}return a>0&&o.push(l),o}function L(t,e,i,n,r){let o,s,a,l,h,u,c,d,f,p,g=i,_=i,m=0,y=0,v=i
for(s=i;s<n;s+=r){const i=e[s],n=e[s+1]
void 0!==h&&(f=i-h,p=n-u,l=Math.sqrt(f*f+p*p),void 0!==c&&(y+=a,o=Math.acos((c*f+d*p)/(a*l)),o>t&&(y>m&&(m=y,g=v,_=s),y=0,v=s-r)),a=l,c=f,d=p),h=i,u=n}return y+=l,y>m?[v,s]:[g,_]}const O={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},D={Circle:I,Default:P,Image:class extends P{constructor(t,e,i,n){super(t,e,i,n),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,e,i){if(!this.image_||this.maxExtent&&!(0,w.Ym)(this.maxExtent,t.getFlatCoordinates()))return
this.beginGeometry(t,e,i)
const n=t.getFlatCoordinates(),r=t.getStride(),o=this.coordinates.length,s=this.appendFlatPointCoordinates(n,r)
this.instructions.push([y.DRAW_IMAGE,o,s,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([y.DRAW_IMAGE,o,s,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}drawMultiPoint(t,e,i){if(!this.image_)return
this.beginGeometry(t,e,i)
const n=t.getFlatCoordinates(),r=[]
for(let a=0,l=n.length;a<l;a+=t.getStride())this.maxExtent&&!(0,w.Ym)(this.maxExtent,n.slice(a,a+2))||r.push(n[a],n[a+1])
const o=this.coordinates.length,s=this.appendFlatPointCoordinates(r,2)
this.instructions.push([y.DRAW_IMAGE,o,s,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([y.DRAW_IMAGE,o,s,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,e){const i=t.getAnchor(),n=t.getSize(),r=t.getOrigin()
this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=n[1],this.opacity_=t.getOpacity(),this.originX_=r[0],this.originY_=r[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=n[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}},LineString:class extends P{constructor(t,e,i,n){super(t,e,i,n)}drawFlatCoordinates_(t,e,i,n){const r=this.coordinates.length,o=this.appendFlatLineCoordinates(t,e,i,n,!1,!1),s=[y.MOVE_TO_LINE_TO,r,o]
return this.instructions.push(s),this.hitDetectionInstructions.push(s),i}drawLineString(t,e,i){const n=this.state,r=n.strokeStyle,o=n.lineWidth
if(void 0===r||void 0===o)return
this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e,i),this.hitDetectionInstructions.push([y.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,E.Oq,E.vk],_)
const s=t.getFlatCoordinates(),a=t.getStride()
this.drawFlatCoordinates_(s,0,s.length,a),this.hitDetectionInstructions.push(g),this.endGeometry(e)}drawMultiLineString(t,e,i){const n=this.state,r=n.strokeStyle,o=n.lineWidth
if(void 0===r||void 0===o)return
this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e,i),this.hitDetectionInstructions.push([y.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,E.Oq,E.vk],_)
const s=t.getEnds(),a=t.getFlatCoordinates(),l=t.getStride()
let h=0
for(let u=0,c=s.length;u<c;++u)h=this.drawFlatCoordinates_(a,h,s[u],l)
this.hitDetectionInstructions.push(g),this.endGeometry(e)}finish(){const t=this.state
return null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(g),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(g),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(_)}},Polygon:I,Text:class extends P{constructor(t,e,i,n){super(t,e,i,n),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[E.qY]={fillStyle:E.qY},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const t=super.finish()
return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e,i){const n=this.textFillState_,r=this.textStrokeState_,o=this.textState_
if(""===this.text_||!o||!n&&!r)return
const s=this.coordinates
let a=s.length
const l=t.getType()
let h=null,u=t.getStride()
if("line"!==o.placement||"LineString"!=l&&"MultiLineString"!=l&&"Polygon"!=l&&"MultiPolygon"!=l){let n=o.overflow?null:[]
switch(l){case"Point":case"MultiPoint":h=t.getFlatCoordinates()
break
case"LineString":h=t.getFlatMidpoint()
break
case"Circle":h=t.getCenter()
break
case"MultiLineString":h=t.getFlatMidpoints(),u=2
break
case"Polygon":h=t.getFlatInteriorPoint(),o.overflow||n.push(h[2]/this.resolution),u=3
break
case"MultiPolygon":const e=t.getFlatInteriorPoints()
h=[]
for(let t=0,i=e.length;t<i;t+=3)o.overflow||n.push(e[t+2]/this.resolution),h.push(e[t],e[t+1])
if(0===h.length)return
u=2}const r=this.appendFlatPointCoordinates(h,u)
if(r===a)return
if(n&&(r-a)/2!=h.length/u){let t=a/2
n=n.filter(((e,i)=>{const n=s[2*(t+i)]===h[i*u]&&s[2*(t+i)+1]===h[i*u+1]
return n||--t,n}))}this.saveTextStates_(),(o.backgroundFill||o.backgroundStroke)&&(this.setFillStrokeStyle(o.backgroundFill,o.backgroundStroke),o.backgroundFill&&this.updateFillStyle(this.state,this.createFill),o.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e,i)
let c=o.padding
if(c!=E.Tq&&(o.scale[0]<0||o.scale[1]<0)){let t=o.padding[0],e=o.padding[1],i=o.padding[2],n=o.padding[3]
o.scale[0]<0&&(e=-e,n=-n),o.scale[1]<0&&(t=-t,i=-i),c=[t,e,i,n]}const d=this.pixelRatio
this.instructions.push([y.DRAW_IMAGE,a,r,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,c==E.Tq?E.Tq:c.map((function(t){return t*d})),!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,n])
const f=1/d,p=this.state.fillStyle
o.backgroundFill&&(this.state.fillStyle=E.qY,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([y.DRAW_IMAGE,a,r,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[f,f],NaN,this.declutterMode_,this.declutterImageWithText_,c,!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?E.qY:this.fillKey_,this.textOffsetX_,this.textOffsetY_,n]),o.backgroundFill&&(this.state.fillStyle=p,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(e)}else{if(!(0,w.HY)(this.maxExtent,t.getExtent()))return
let n
if(h=t.getFlatCoordinates(),"LineString"==l)n=[h.length]
else if("MultiLineString"==l)n=t.getEnds()
else if("Polygon"==l)n=t.getEnds().slice(0,1)
else if("MultiPolygon"==l){const e=t.getEndss()
n=[]
for(let t=0,i=e.length;t<i;++t)n.push(e[t][0])}this.beginGeometry(t,e,i)
const r=o.repeat,c=r?void 0:o.textAlign
let d=0
for(let t=0,e=n.length;t<e;++t){let e
e=r?R(r*this.resolution,h,d,n[t],u):[h.slice(d,n[t])]
for(let i=0,r=e.length;i<r;++i){const r=e[i]
let l=0,h=r.length
if(null==c){const t=L(o.maxAngle,r,0,r.length,2)
l=t[0],h=t[1]}for(let t=l;t<h;t+=u)s.push(r[t],r[t+1])
const f=s.length
d=n[t],this.drawChars_(a,f),a=f}}this.endGeometry(e)}}saveTextStates_(){const t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,n=this.strokeKey_
t&&(n in this.strokeStates||(this.strokeStates[n]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}))
const r=this.textKey_
r in this.textStates||(this.textStates[r]={font:e.font,textAlign:e.textAlign||E.MY,justify:e.justify,textBaseline:e.textBaseline||E.M8,scale:e.scale})
const o=this.fillKey_
i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))}drawChars_(t,e){const i=this.textStrokeState_,n=this.textState_,r=this.strokeKey_,o=this.textKey_,s=this.fillKey_
this.saveTextStates_()
const a=this.pixelRatio,l=O[n.textBaseline],h=this.textOffsetY_*a,u=this.text_,c=i?i.lineWidth*Math.abs(n.scale[0])/2:0
this.instructions.push([y.DRAW_CHARS,t,e,l,n.overflow,s,n.maxAngle,a,h,r,c*a,u,o,1,this.declutterMode_]),this.hitDetectionInstructions.push([y.DRAW_CHARS,t,e,l,n.overflow,s?E.qY:s,n.maxAngle,a,h,r,c*a,u,o,1/a,this.declutterMode_])}setTextStyle(t,e){let i,n,r
if(t){const e=t.getFill()
e?(n=this.textFillState_,n||(n={},this.textFillState_=n),n.fillStyle=(0,b.F)(e.getColor()||E.qY)):(n=null,this.textFillState_=n)
const o=t.getStroke()
if(o){r=this.textStrokeState_,r||(r={},this.textStrokeState_=r)
const t=o.getLineDash(),e=o.getLineDashOffset(),i=o.getWidth(),n=o.getMiterLimit()
r.lineCap=o.getLineCap()||E._m,r.lineDash=t?t.slice():E.Oq,r.lineDashOffset=void 0===e?E.vk:e,r.lineJoin=o.getLineJoin()||E._K,r.lineWidth=void 0===i?E.aq:i,r.miterLimit=void 0===n?E.eL:n,r.strokeStyle=(0,b.F)(o.getColor()||E.NT)}else r=null,this.textStrokeState_=r
i=this.textState_
const s=t.getFont()||E.ZV;(0,E.fZ)(s)
const a=t.getScaleArray()
i.overflow=t.getOverflow(),i.font=s,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.repeat=t.getRepeat(),i.justify=t.getJustify(),i.textBaseline=t.getTextBaseline()||E.M8,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||E.Tq,i.scale=void 0===a?[1,1]:a
const l=t.getOffsetX(),h=t.getOffsetY(),u=t.getRotateWithView(),c=t.getRotation()
this.text_=t.getText()||"",this.textOffsetX_=void 0===l?0:l,this.textOffsetY_=void 0===h?0:h,this.textRotateWithView_=void 0!==u&&u,this.textRotation_=void 0===c?0:c,this.strokeKey_=r?("string"==typeof r.strokeStyle?r.strokeStyle:(0,M.v6)(r.strokeStyle))+r.lineCap+r.lineDashOffset+"|"+r.lineWidth+r.lineJoin+r.miterLimit+"["+r.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=n&&n.fillStyle?"string"==typeof n.fillStyle?n.fillStyle:"|"+(0,M.v6)(n.fillStyle):""}else this.text_=""
this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}},N=class{constructor(t,e,i,n){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=n,this.resolution_=i,this.buildersByZIndex_={}}finish(){const t={}
for(const e in this.buildersByZIndex_){t[e]=t[e]||{}
const i=this.buildersByZIndex_[e]
for(const n in i){const r=i[n].finish()
t[e][n]=r}}return t}getBuilder(t,e){const i=void 0!==t?t.toString():"0"
let n=this.buildersByZIndex_[i]
void 0===n&&(n={},this.buildersByZIndex_[i]=n)
let r=n[e]
return void 0===r&&(r=new(0,D[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),n[e]=r),r}}
var F=i(1500),k=i(6733),z=i(2282),j=i(2363)
function G(t,e,i,n,r,o,s,a,l,h,u,c){let d=t[e],f=t[e+1],p=0,g=0,_=0,m=0
function y(){p=d,g=f,d=t[e+=n],f=t[e+1],m+=_,_=Math.sqrt((d-p)*(d-p)+(f-g)*(f-g))}do{y()}while(e<i-n&&m+_<o)
let v=0===_?0:(o-m)/_
const x=(0,A.Cc)(p,d,v),b=(0,A.Cc)(g,f,v),w=e-n,E=m,S=o+a*l(h,r,u)
for(;e<i-n&&m+_<S;)y()
v=0===_?0:(S-m)/_
const C=(0,A.Cc)(p,d,v),P=(0,A.Cc)(g,f,v)
let T
if(c){const t=[x,b,C,P];(0,j.e$)(t,0,4,2,c,t,t),T=t[0]>t[2]}else T=x>C
const I=Math.PI,M=[],R=w+n===e
let L
if(_=0,m=E,d=t[e=w],f=t[e+1],R){y(),L=Math.atan2(f-g,d-p),T&&(L+=L>0?-I:I)
const t=(C+x)/2,e=(P+b)/2
return M[0]=[t,e,(S-o)/2,L,r],M}for(let O=0,D=(r=r.replace(/\n/g," ")).length;O<D;){y()
let t=Math.atan2(f-g,d-p)
if(T&&(t+=t>0?-I:I),void 0!==L){let e=t-L
if(e+=e>I?-2*I:e<-I?2*I:0,Math.abs(e)>s)return null}L=t
const c=O
let x=0
for(;O<D;++O){const t=a*l(h,r[T?D-O-1:O],u)
if(e+n<i&&m+_<o+x+t/2)break
x+=t}if(O===c)continue
const b=T?r.substring(D-c,D-O):r.substring(c,O)
v=0===_?0:(o+x/2-m)/_
const w=(0,A.Cc)(p,d,v),E=(0,A.Cc)(g,f,v)
M.push([w,E,x/2,t,b]),o+=x}return M}var B=i(6963)
const U=(0,w.S5)(),q=[],V=[],Z=[],W=[]
function Y(t){return t[3].declutterBox}const X=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]")
function H(t,e){return"start"===e?e=X.test(t)?"right":"left":"end"===e&&(e=X.test(t)?"left":"right"),O[e]}function $(t,e,i){return i>0&&t.push("\n",""),t.push(e,""),t}const K=class{constructor(t,e,i,n,r){this.overlaps=i,this.pixelRatio=e,this.resolution=t,this.alignAndScaleFill_,this.instructions=n.instructions,this.coordinates=n.coordinates,this.coordinateCache_={},this.renderedTransform_=(0,z.vt)(),this.hitDetectionInstructions=n.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=n.fillStates||{},this.strokeStates=n.strokeStates||{},this.textStates=n.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=r?new k.A:null}getZIndexContext(){return this.zIndexContext_}createLabel(t,e,i,n){const r=t+e+i+n
if(this.labels_[r])return this.labels_[r]
const o=n?this.strokeStates[n]:null,s=i?this.fillStates[i]:null,a=this.textStates[e],l=this.pixelRatio,h=[a.scale[0]*l,a.scale[1]*l],u=Array.isArray(t),c=a.justify?O[a.justify]:H(Array.isArray(t)?t[0]:t,a.textAlign||E.MY),d=n&&o.lineWidth?o.lineWidth:0,f=u?t:t.split("\n").reduce($,[]),{width:p,height:g,widths:_,heights:m,lineWidths:y}=(0,E.jT)(a,f),v=p+d,x=[],b=(v+2)*h[0],w=(g+d)*h[1],S={width:b<0?Math.floor(b):Math.ceil(b),height:w<0?Math.floor(w):Math.ceil(w),contextInstructions:x}
1==h[0]&&1==h[1]||x.push("scale",h),n&&(x.push("strokeStyle",o.strokeStyle),x.push("lineWidth",d),x.push("lineCap",o.lineCap),x.push("lineJoin",o.lineJoin),x.push("miterLimit",o.miterLimit),x.push("setLineDash",[o.lineDash]),x.push("lineDashOffset",o.lineDashOffset)),i&&x.push("fillStyle",s.fillStyle),x.push("textBaseline","middle"),x.push("textAlign","center")
const C=.5-c
let P=c*v+C*d
const T=[],I=[]
let M,A=0,R=0,L=0,D=0
for(let E=0,O=f.length;E<O;E+=2){const t=f[E]
if("\n"===t){R+=A,A=0,P=c*v+C*d,++D
continue}const e=f[E+1]||a.font
e!==M&&(n&&T.push("font",e),i&&I.push("font",e),M=e),A=Math.max(A,m[L])
const r=[t,P+C*_[L]+c*(_[L]-y[D]),.5*(d+A)+R]
P+=_[L],n&&T.push("strokeText",r),i&&I.push("fillText",r),++L}return Array.prototype.push.apply(x,T),Array.prototype.push.apply(x,I),this.labels_[r]=S,S}replayTextBackground_(t,e,i,n,r,o,s){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,n),t.lineTo.apply(t,r),t.lineTo.apply(t,e),o&&(this.alignAndScaleFill_=o[2],this.fill_(t)),s&&(this.setStrokeStyle_(t,s),t.stroke())}calculateImageOrLabelDimensions_(t,e,i,n,r,o,s,a,l,h,u,c,d,f,p,g){let _=i-(s*=c[0]),m=n-(a*=c[1])
const y=r+l>t?t-l:r,v=o+h>e?e-h:o,x=f[3]+y*c[0]+f[1],b=f[0]+v*c[1]+f[2],E=_-f[3],S=m-f[0]
let C
return(p||0!==u)&&(q[0]=E,W[0]=E,q[1]=S,V[1]=S,V[0]=E+x,Z[0]=V[0],Z[1]=S+b,W[1]=Z[1]),0!==u?(C=(0,z.Zz)((0,z.vt)(),i,n,1,1,u,-i,-n),(0,z.Bb)(C,q),(0,z.Bb)(C,V),(0,z.Bb)(C,Z),(0,z.Bb)(C,W),(0,w.N)(Math.min(q[0],V[0],Z[0],W[0]),Math.min(q[1],V[1],Z[1],W[1]),Math.max(q[0],V[0],Z[0],W[0]),Math.max(q[1],V[1],Z[1],W[1]),U)):(0,w.N)(Math.min(E,E+x),Math.min(S,S+b),Math.max(E,E+x),Math.max(S,S+b),U),d&&(_=Math.round(_),m=Math.round(m)),{drawImageX:_,drawImageY:m,drawImageW:y,drawImageH:v,originX:l,originY:h,declutterBox:{minX:U[0],minY:U[1],maxX:U[2],maxY:U[3],value:g},canvasTransform:C,scale:c}}replayImageOrLabel_(t,e,i,n,r,o,s){const a=!(!o&&!s),l=n.declutterBox,h=s?s[2]*n.scale[0]/2:0
return l.minX-h<=e[0]&&l.maxX+h>=0&&l.minY-h<=e[1]&&l.maxY+h>=0&&(a&&this.replayTextBackground_(t,q,V,Z,W,o,s),(0,E.Jw)(t,n.canvasTransform,r,i,n.originX,n.originY,n.drawImageW,n.drawImageH,n.drawImageX,n.drawImageY,n.scale)),!0}fill_(t){const e=this.alignAndScaleFill_
if(e){const i=(0,z.Bb)(this.renderedTransform_,[0,0]),n=512*this.pixelRatio
t.save(),t.translate(i[0]%n,i[1]%n),1!==e&&t.scale(e,e),t.rotate(this.viewRotation_)}t.fill(),e&&t.restore()}setStrokeStyle_(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.lineDashOffset=e[7],t.setLineDash(e[6])}drawLabelWithPointPlacement_(t,e,i,n){const r=this.textStates[e],o=this.createLabel(t,e,n,i),s=this.strokeStates[i],a=this.pixelRatio,l=H(Array.isArray(t)?t[0]:t,r.textAlign||E.MY),h=O[r.textBaseline||E.M8],u=s&&s.lineWidth?s.lineWidth:0
return{label:o,anchorX:l*(o.width/a-2*r.scale[0])+2*(.5-l)*u,anchorY:h*o.height/a+2*(.5-h)*u}}execute_(t,e,i,n,r,o,s,a){const l=this.zIndexContext_
let h
this.pixelCoordinates_&&(0,S.aI)(i,this.renderedTransform_)?h=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),h=(0,j.Rc)(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),(0,z.k3)(this.renderedTransform_,i))
let u=0
const c=n.length
let d,f,p,g,_,m,v,x,b,C,P,T,I,M=0,A=0,R=0,L=null,O=null
const D=this.coordinateCache_,N=this.viewRotation_,F=Math.round(1e12*Math.atan2(-i[1],i[0]))/1e12,k={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:N},U=this.instructions!=n||this.overlaps?0:200
let q,V,Z,W
for(;u<c;){const i=n[u]
switch(i[0]){case y.BEGIN_GEOMETRY:q=i[1],W=i[3],q.getGeometry()?void 0===s||(0,w.HY)(s,W.getExtent())?++u:u=i[2]+1:u=i[2],l&&(l.zIndex=i[4])
break
case y.BEGIN_PATH:A>U&&(this.fill_(t),A=0),R>U&&(t.stroke(),R=0),A||R||(t.beginPath(),_=NaN,m=NaN),++u
break
case y.CIRCLE:M=i[1]
const n=h[M],c=h[M+1],S=h[M+2]-n,z=h[M+3]-c,j=Math.sqrt(S*S+z*z)
t.moveTo(n+j,c),t.arc(n,c,j,0,2*Math.PI,!0),++u
break
case y.CLOSE_PATH:t.closePath(),++u
break
case y.CUSTOM:M=i[1],d=i[2]
const X=i[3],$=i[4],K=i[5]
k.geometry=X,k.feature=q,u in D||(D[u]=[])
const J=D[u]
K?K(h,M,d,2,J):(J[0]=h[M],J[1]=h[M+1],J.length=2),l&&(l.zIndex=i[6]),$(J,k),++u
break
case y.DRAW_IMAGE:M=i[1],d=i[2],b=i[3],f=i[4],p=i[5]
let Q=i[6]
const tt=i[7],et=i[8],it=i[9],nt=i[10]
let rt=i[11]
const ot=i[12]
let st=i[13]
g=i[14]||"declutter"
const at=i[15]
if(!b&&i.length>=20){C=i[19],P=i[20],T=i[21],I=i[22]
const t=this.drawLabelWithPointPlacement_(C,P,T,I)
b=t.label,i[3]=b
const e=i[23]
f=(t.anchorX-e)*this.pixelRatio,i[4]=f
const n=i[24]
p=(t.anchorY-n)*this.pixelRatio,i[5]=p,Q=b.height,i[6]=Q,st=b.width,i[13]=st}let lt,ht,ut,ct
i.length>25&&(lt=i[25]),i.length>17?(ht=i[16],ut=i[17],ct=i[18]):(ht=E.Tq,ut=!1,ct=!1),nt&&F?rt+=N:nt||F||(rt-=N)
let dt=0
for(;M<d;M+=2){if(lt&&lt[dt++]<st/this.pixelRatio)continue
const i=this.calculateImageOrLabelDimensions_(b.width,b.height,h[M],h[M+1],st,Q,f,p,et,it,rt,ot,r,ht,ut||ct,q),n=[t,e,b,i,tt,ut?L:null,ct?O:null]
if(a){let t,e,r,o,s
if(at){const i=d-M
if(!at[i]){at[i]={args:n,declutterMode:g}
continue}const o=at[i]
t=o.args,e=o.declutterMode,delete at[i],r=Y(t)}if(!t||"declutter"===e&&a.collides(r)||(o=!0),"declutter"===g&&a.collides(i.declutterBox)||(s=!0),"declutter"===e&&"declutter"===g){const t=o&&s
o=t,s=t}o&&("none"!==e&&a.insert(r),this.replayImageOrLabel_.apply(this,t)),s&&("none"!==g&&a.insert(i.declutterBox),this.replayImageOrLabel_.apply(this,n))}else this.replayImageOrLabel_.apply(this,n)}++u
break
case y.DRAW_CHARS:const ft=i[1],pt=i[2],gt=i[3],_t=i[4]
I=i[5]
const mt=i[6],yt=i[7],vt=i[8]
T=i[9]
const xt=i[10]
C=i[11],P=i[12]
const bt=[i[13],i[13]]
g=i[14]||"declutter"
const wt=this.textStates[P],Et=wt.font,St=[wt.scale[0]*yt,wt.scale[1]*yt]
let Ct
Et in this.widths_?Ct=this.widths_[Et]:(Ct={},this.widths_[Et]=Ct)
const Pt=(0,B.k)(h,ft,pt,2),Tt=Math.abs(St[0])*(0,E.TA)(Et,C,Ct)
if(_t||Tt<=Pt){const i=G(h,ft,pt,2,C,(Pt-Tt)*H(C,this.textStates[P].textAlign),mt,Math.abs(St[0]),E.TA,Et,Ct,F?0:this.viewRotation_)
t:if(i){const n=[]
let r,o,s,l,h
if(T)for(r=0,o=i.length;r<o;++r){h=i[r],s=h[4],l=this.createLabel(s,P,"",T),f=h[2]+(St[0]<0?-xt:xt),p=gt*l.height+2*(.5-gt)*xt*St[1]/St[0]-vt
const o=this.calculateImageOrLabelDimensions_(l.width,l.height,h[0],h[1],l.width,l.height,f,p,0,0,h[3],bt,!1,E.Tq,!1,q)
if(a&&"declutter"===g&&a.collides(o.declutterBox))break t
n.push([t,e,l,o,1,null,null])}if(I)for(r=0,o=i.length;r<o;++r){h=i[r],s=h[4],l=this.createLabel(s,P,I,""),f=h[2],p=gt*l.height-vt
const o=this.calculateImageOrLabelDimensions_(l.width,l.height,h[0],h[1],l.width,l.height,f,p,0,0,h[3],bt,!1,E.Tq,!1,q)
if(a&&"declutter"===g&&a.collides(o.declutterBox))break t
n.push([t,e,l,o,1,null,null])}a&&"none"!==g&&a.load(n.map(Y))
for(let t=0,e=n.length;t<e;++t)this.replayImageOrLabel_.apply(this,n[t])}}++u
break
case y.END_GEOMETRY:if(void 0!==o){q=i[1]
const t=o(q,W)
if(t)return t}++u
break
case y.FILL:U?A++:this.fill_(t),++u
break
case y.MOVE_TO_LINE_TO:for(M=i[1],d=i[2],V=h[M],Z=h[M+1],v=V+.5|0,x=Z+.5|0,v===_&&x===m||(t.moveTo(V,Z),_=v,m=x),M+=2;M<d;M+=2)V=h[M],Z=h[M+1],v=V+.5|0,x=Z+.5|0,M!=d-2&&v===_&&x===m||(t.lineTo(V,Z),_=v,m=x);++u
break
case y.SET_FILL_STYLE:L=i,this.alignAndScaleFill_=i[2],A&&(this.fill_(t),A=0,R&&(t.stroke(),R=0)),t.fillStyle=i[1],++u
break
case y.SET_STROKE_STYLE:O=i,R&&(t.stroke(),R=0),this.setStrokeStyle_(t,i),++u
break
case y.STROKE:U?R++:t.stroke(),++u
break
default:++u}}A&&this.fill_(t),R&&t.stroke()}execute(t,e,i,n,r,o){this.viewRotation_=n,this.execute_(t,e,i,this.instructions,r,void 0,void 0,o)}executeHitDetection(t,e,i,n,r){return this.viewRotation_=i,this.execute_(t,[t.canvas.width,t.canvas.height],e,this.hitDetectionInstructions,!0,n,r)}}
var J=i(8454),Q=i(7931)
const tt=["Polygon","Circle","LineString","Image","Text","Default"],et=["Image","Text"],it=tt.filter((t=>!et.includes(t))),nt={},rt=class{constructor(t,e,i,n,r,o,s){this.maxExtent_=t,this.overlaps_=n,this.pixelRatio_=i,this.resolution_=e,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=(0,z.vt)(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(r,s)}clip(t,e){const i=this.getClipCoords(e)
t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()}createExecutors_(t,e){for(const i in t){let n=this.executorsByZIndex_[i]
void 0===n&&(n={},this.executorsByZIndex_[i]=n)
const r=t[i]
for(const t in r){const i=r[t]
n[t]=new K(this.resolution_,this.pixelRatio_,this.overlaps_,i,e)}}}hasExecutors(t){for(const e in this.executorsByZIndex_){const i=this.executorsByZIndex_[e]
for(let e=0,n=t.length;e<n;++e)if(t[e]in i)return!0}return!1}forEachFeatureAtCoordinate(t,e,i,n,r,o){const s=2*(n=Math.round(n))+1,a=(0,z.Zz)(this.hitDetectionTransform_,n+.5,n+.5,1/e,-1/e,-i,-t[0],-t[1]),l=!this.hitDetectionContext_
l&&(this.hitDetectionContext_=(0,J.Y)(s,s,void 0,{willReadFrequently:!0}))
const h=this.hitDetectionContext_
let u
h.canvas.width!==s||h.canvas.height!==s?(h.canvas.width=s,h.canvas.height=s):l||h.clearRect(0,0,s,s),void 0!==this.renderBuffer_&&(u=(0,w.S5)(),(0,w.$C)(u,t),(0,w.r)(u,e*(this.renderBuffer_+n),u))
const c=function(t){if(void 0!==nt[t])return nt[t]
const e=2*t+1,i=t*t,n=new Array(i+1)
for(let o=0;o<=t;++o)for(let r=0;r<=t;++r){const s=o*o+r*r
if(s>i)break
let a=n[s]
a||(a=[],n[s]=a),a.push(4*((t+o)*e+(t+r))+3),o>0&&a.push(4*((t-o)*e+(t+r))+3),r>0&&(a.push(4*((t+o)*e+(t-r))+3),o>0&&a.push(4*((t-o)*e+(t-r))+3))}const r=[]
for(let o=0,s=n.length;o<s;++o)n[o]&&r.push(...n[o])
return nt[t]=r,r}(n)
let d
function f(t,e){const i=h.getImageData(0,0,s,s).data
for(let a=0,l=c.length;a<l;a++)if(i[c[a]]>0){if(!o||"Image"!==d&&"Text"!==d||o.includes(t)){const i=(c[a]-3)/4,o=n-i%s,l=n-(i/s|0),h=r(t,e,o*o+l*l)
if(h)return h}h.clearRect(0,0,s,s)
break}}const p=Object.keys(this.executorsByZIndex_).map(Number)
let g,_,m,y,v
for(p.sort(S.V_),g=p.length-1;g>=0;--g){const t=p[g].toString()
for(m=this.executorsByZIndex_[t],_=tt.length-1;_>=0;--_)if(d=tt[_],y=m[d],void 0!==y&&(v=y.executeHitDetection(h,a,i,f,u),v))return v}}getClipCoords(t){const e=this.maxExtent_
if(!e)return null
const i=e[0],n=e[1],r=e[2],o=e[3],s=[i,n,i,o,r,o,r,n]
return(0,j.Rc)(s,0,8,2,t,s),s}isEmpty(){return(0,Q.p)(this.executorsByZIndex_)}execute(t,e,i,n,r,o,s){const a=Object.keys(this.executorsByZIndex_).map(Number)
let l,h,u,c,d,f
for(a.sort(S.V_),o=o||tt,s&&a.reverse(),l=0,h=a.length;l<h;++l){const h=a[l].toString()
for(d=this.executorsByZIndex_[h],u=0,c=o.length;u<c;++u){const h=o[u]
if(f=d[h],void 0!==f){const o=null===s?void 0:f.getZIndexContext(),u=o?o.getContext():t,c=this.maxExtent_&&"Image"!==h&&"Text"!==h
if(c&&(u.save(),this.clip(u,i)),f.execute(u,e,i,n,r,s),c&&u.restore(),o){o.offset()
const t=a[l]
this.deferredZIndexContexts_[t]||(this.deferredZIndexContexts_[t]=[]),this.deferredZIndexContexts_[t].push(o)}}}}this.renderedContext_=t}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const t=this.deferredZIndexContexts_,e=Object.keys(t).map(Number).sort(S.V_)
for(let i=0,n=e.length;i<n;++i)t[e[i]].forEach((t=>{t.draw(this.renderedContext_),t.clear()}))}}
var ot=i(5548),st=i(9009)
const at=class extends x{constructor(t,e,i,n,r,o,s){super(),this.context_=t,this.pixelRatio_=e,this.extent_=i,this.transform_=n,this.transformRotation_=n?(0,A.Mg)(Math.atan2(n[1],n[0]),10):0,this.viewRotation_=r,this.squaredTolerance_=o,this.userTransform_=s,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=(0,z.vt)()}drawImages_(t,e,i,n){if(!this.image_)return
const r=(0,j.Rc)(t,e,i,n,this.transform_,this.pixelCoordinates_),o=this.context_,s=this.tmpLocalTransform_,a=o.globalAlpha
1!=this.imageOpacity_&&(o.globalAlpha=a*this.imageOpacity_)
let l=this.imageRotation_
0===this.transformRotation_&&(l-=this.viewRotation_),this.imageRotateWithView_&&(l+=this.viewRotation_)
for(let h=0,u=r.length;h<u;h+=2){const t=r[h]-this.imageAnchorX_,e=r[h+1]-this.imageAnchorY_
if(0!==l||1!=this.imageScale_[0]||1!=this.imageScale_[1]){const i=t+this.imageAnchorX_,n=e+this.imageAnchorY_;(0,z.Zz)(s,i,n,1,1,l,-i,-n),o.save(),o.transform.apply(o,s),o.translate(i,n),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.restore()}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,t,e,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(o.globalAlpha=a)}drawText_(t,e,i,n){if(!this.textState_||""===this.text_)return
this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_)
const r=(0,j.Rc)(t,e,i,n,this.transform_,this.pixelCoordinates_),o=this.context_
let s=this.textRotation_
for(0===this.transformRotation_&&(s-=this.viewRotation_),this.textRotateWithView_&&(s+=this.viewRotation_);e<i;e+=n){const t=r[e]+this.textOffsetX_,i=r[e+1]+this.textOffsetY_
0!==s||1!=this.textScale_[0]||1!=this.textScale_[1]?(o.save(),o.translate(t-this.textOffsetX_,i-this.textOffsetY_),o.rotate(s),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.restore()):(this.textStrokeState_&&o.strokeText(this.text_,t,i),this.textFillState_&&o.fillText(this.text_,t,i))}}moveToLineTo_(t,e,i,n,r){const o=this.context_,s=(0,j.Rc)(t,e,i,n,this.transform_,this.pixelCoordinates_)
o.moveTo(s[0],s[1])
let a=s.length
r&&(a-=2)
for(let l=2;l<a;l+=2)o.lineTo(s[l],s[l+1])
return r&&o.closePath(),i}drawRings_(t,e,i,n){for(let r=0,o=i.length;r<o;++r)e=this.moveToLineTo_(t,e,i[r],n,!0)
return e}drawCircle(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,w.HY)(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_)
const e=(0,st.v7)(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],n=e[3]-e[1],r=Math.sqrt(i*i+n*n),o=this.context_
o.beginPath(),o.arc(e[0],e[1],r,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t)
break
case"LineString":this.drawLineString(t)
break
case"Polygon":this.drawPolygon(t)
break
case"MultiPoint":this.drawMultiPoint(t)
break
case"MultiLineString":this.drawMultiLineString(t)
break
case"MultiPolygon":this.drawMultiPolygon(t)
break
case"GeometryCollection":this.drawGeometryCollection(t)
break
case"Circle":this.drawCircle(t)}}drawFeature(t,e){const i=e.getGeometryFunction()(t)
i&&(this.setStyle(e),this.drawGeometry(i))}drawGeometryCollection(t){const e=t.getGeometriesArray()
for(let i=0,n=e.length;i<n;++i)this.drawGeometry(e[i])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_))
const e=t.getFlatCoordinates(),i=t.getStride()
this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_))
const e=t.getFlatCoordinates(),i=t.getStride()
this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,w.HY)(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_)
const e=this.context_,i=t.getFlatCoordinates()
e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){const e=t.getFlatMidpoint()
this.drawText_(e,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_))
const e=t.getExtent()
if((0,w.HY)(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_)
const e=this.context_,i=t.getFlatCoordinates()
let n=0
const r=t.getEnds(),o=t.getStride()
e.beginPath()
for(let t=0,s=r.length;t<s;++t)n=this.moveToLineTo_(i,n,r[t],o,!1)
e.stroke()}if(""!==this.text_){const e=t.getFlatMidpoints()
this.drawText_(e,0,e.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,w.HY)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_)
const e=this.context_
e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){const e=t.getFlatInteriorPoint()
this.drawText_(e,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,w.HY)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_)
const e=this.context_,i=t.getOrientedFlatCoordinates()
let n=0
const r=t.getEndss(),o=t.getStride()
e.beginPath()
for(let t=0,s=r.length;t<s;++t){const e=r[t]
n=this.drawRings_(i,n,e,o)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){const e=t.getFlatInteriorPoints()
this.drawText_(e,0,e.length,2)}}}setContextFillState_(t){const e=this.context_,i=this.contextFillState_
i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const e=this.context_,i=this.contextStrokeState_
i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,e.lineCap=t.lineCap),(0,S.aI)(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const e=this.context_,i=this.contextTextState_,n=t.textAlign?t.textAlign:E.MY
i?(i.font!=t.font&&(i.font=t.font,e.font=t.font),i.textAlign!=n&&(i.textAlign=n,e.textAlign=n),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=n,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:n,textBaseline:t.textBaseline})}setFillStrokeStyle(t,e){if(t){const e=t.getColor()
this.fillState_={fillStyle:(0,b.F)(e||E.qY)}}else this.fillState_=null
if(e){const t=e.getColor(),i=e.getLineCap(),n=e.getLineDash(),r=e.getLineDashOffset(),o=e.getLineJoin(),s=e.getWidth(),a=e.getMiterLimit(),l=n||E.Oq
this.strokeState_={lineCap:void 0!==i?i:E._m,lineDash:1===this.pixelRatio_?l:l.map((t=>t*this.pixelRatio_)),lineDashOffset:(r||E.vk)*this.pixelRatio_,lineJoin:void 0!==o?o:E._K,lineWidth:(void 0!==s?s:E.aq)*this.pixelRatio_,miterLimit:void 0!==a?a:E.eL,strokeStyle:(0,b.F)(t||E.NT)}}else this.strokeState_=null}setImageStyle(t){let e
if(!t||!(e=t.getSize()))return void(this.image_=null)
const i=t.getPixelRatio(this.pixelRatio_),n=t.getAnchor(),r=t.getOrigin()
this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=n[0]*i,this.imageAnchorY_=n[1]*i,this.imageHeight_=e[1]*i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=r[0],this.imageOriginY_=r[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation()
const o=t.getScaleArray()
this.imageScale_=[o[0]*this.pixelRatio_/i,o[1]*this.pixelRatio_/i],this.imageWidth_=e[0]*i}setTextStyle(t){if(t){const e=t.getFill()
if(e){const t=e.getColor()
this.textFillState_={fillStyle:(0,b.F)(t||E.qY)}}else this.textFillState_=null
const i=t.getStroke()
if(i){const t=i.getColor(),e=i.getLineCap(),n=i.getLineDash(),r=i.getLineDashOffset(),o=i.getLineJoin(),s=i.getWidth(),a=i.getMiterLimit()
this.textStrokeState_={lineCap:void 0!==e?e:E._m,lineDash:n||E.Oq,lineDashOffset:r||E.vk,lineJoin:void 0!==o?o:E._K,lineWidth:void 0!==s?s:E.aq,miterLimit:void 0!==a?a:E.eL,strokeStyle:(0,b.F)(t||E.NT)}}else this.textStrokeState_=null
const n=t.getFont(),r=t.getOffsetX(),o=t.getOffsetY(),s=t.getRotateWithView(),a=t.getRotation(),l=t.getScaleArray(),h=t.getText(),u=t.getTextAlign(),c=t.getTextBaseline()
this.textState_={font:void 0!==n?n:E.ZV,textAlign:void 0!==u?u:E.MY,textBaseline:void 0!==c?c:E.M8},this.text_=void 0!==h?Array.isArray(h)?h.reduce(((t,e,i)=>t+(i%2?" ":e)),""):h:"",this.textOffsetX_=void 0!==r?this.pixelRatio_*r:0,this.textOffsetY_=void 0!==o?this.pixelRatio_*o:0,this.textRotateWithView_=void 0!==s&&s,this.textRotation_=void 0!==a?a:0,this.textScale_=[this.pixelRatio_*l[0],this.pixelRatio_*l[1]]}else this.text_=""}}
var lt=i(2375),ht=i(3906)
const ut=.5
function ct(t,e,i,n,r,o,s,a,l){const h=l?(0,ht.JR)(r,l):r,u=t[0]*ut,c=t[1]*ut,d=(0,J.Y)(u,c)
d.imageSmoothingEnabled=!1
const f=d.canvas,p=new at(d,ut,r,null,s,a,l?(0,ht.FO)((0,ht.Tf)(),l):null),g=i.length,_=Math.floor(16777215/g),m={}
for(let v=1;v<=g;++v){const t=i[v-1],e=t.getStyleFunction()||n
if(!e)continue
let r=e(t,o)
if(!r)continue
Array.isArray(r)||(r=[r])
const s=(v*_).toString(16).padStart(7,"#00000")
for(let i=0,n=r.length;i<n;++i){const e=r[i],n=e.getGeometryFunction()(t)
if(!n||!(0,w.HY)(h,n.getExtent()))continue
const o=e.clone(),a=o.getFill()
a&&a.setColor(s)
const l=o.getStroke()
l&&(l.setColor(s),l.setLineDash(null)),o.setText(void 0)
const u=e.getImage()
if(u){const t=u.getImageSize()
if(!t)continue
const e=(0,J.Y)(t[0],t[1],void 0,{alpha:!1}),i=e.canvas
e.fillStyle=s,e.fillRect(0,0,i.width,i.height),o.setImage(new lt.A({img:i,anchor:u.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:u.getOrigin(),opacity:1,size:u.getSize(),scale:u.getScale(),rotation:u.getRotation(),rotateWithView:u.getRotateWithView()}))}const c=o.getZIndex()||0
let d=m[c]
d||(d={},m[c]=d,d.Polygon=[],d.Circle=[],d.LineString=[],d.Point=[])
const f=n.getType()
if("GeometryCollection"===f){const t=n.getGeometriesArrayRecursive()
for(let e=0,i=t.length;e<i;++e){const i=t[e]
d[i.getType().replace("Multi","")].push(i,o)}}else d[f.replace("Multi","")].push(n,o)}}const y=Object.keys(m).map(Number).sort(S.V_)
for(let v=0,x=y.length;v<x;++v){const t=m[y[v]]
for(const i in t){const n=t[i]
for(let t=0,i=n.length;t<i;t+=2){p.setStyle(n[t+1])
for(let i=0,r=e.length;i<r;++i)p.setTransform(e[i]),p.drawGeometry(n[t])}}}return d.getImageData(0,0,f.width,f.height)}function dt(t,e,i){const n=[]
if(i){const r=Math.floor(Math.round(t[0])*ut),o=Math.floor(Math.round(t[1])*ut),s=4*((0,A.qE)(r,0,i.width-1)+(0,A.qE)(o,0,i.height-1)*i.width),a=i.data[s],l=i.data[s+1],h=i.data[s+2]+256*(l+256*a),u=Math.floor(16777215/e.length)
h&&h%u==0&&n.push(e[h/u-1])}return n}var ft=i(1410)
const pt=.5,gt={Point:function(t,e,i,n,r,o){const s=i.getImage(),a=i.getText(),l=a&&a.getText(),h=o&&s&&l?{}:void 0
if(s){if(s.getImageState()!=ft.A.LOADED)return
const o=t.getBuilder(i.getZIndex(),"Image")
o.setImageStyle(s,h),o.drawPoint(e,n,r)}if(l){const o=t.getBuilder(i.getZIndex(),"Text")
o.setTextStyle(a,h),o.drawText(e,n,r)}},LineString:function(t,e,i,n,r){const o=i.getStroke()
if(o){const s=t.getBuilder(i.getZIndex(),"LineString")
s.setFillStrokeStyle(null,o),s.drawLineString(e,n,r)}const s=i.getText()
if(s&&s.getText()){const o=t.getBuilder(i.getZIndex(),"Text")
o.setTextStyle(s),o.drawText(e,n,r)}},Polygon:function(t,e,i,n,r){const o=i.getFill(),s=i.getStroke()
if(o||s){const a=t.getBuilder(i.getZIndex(),"Polygon")
a.setFillStrokeStyle(o,s),a.drawPolygon(e,n,r)}const a=i.getText()
if(a&&a.getText()){const o=t.getBuilder(i.getZIndex(),"Text")
o.setTextStyle(a),o.drawText(e,n,r)}},MultiPoint:function(t,e,i,n,r,o){const s=i.getImage(),a=s&&0!==s.getOpacity(),l=i.getText(),h=l&&l.getText(),u=o&&a&&h?{}:void 0
if(a){if(s.getImageState()!=ft.A.LOADED)return
const o=t.getBuilder(i.getZIndex(),"Image")
o.setImageStyle(s,u),o.drawMultiPoint(e,n,r)}if(h){const o=t.getBuilder(i.getZIndex(),"Text")
o.setTextStyle(l,u),o.drawText(e,n,r)}},MultiLineString:function(t,e,i,n,r){const o=i.getStroke()
if(o){const s=t.getBuilder(i.getZIndex(),"LineString")
s.setFillStrokeStyle(null,o),s.drawMultiLineString(e,n,r)}const s=i.getText()
if(s&&s.getText()){const o=t.getBuilder(i.getZIndex(),"Text")
o.setTextStyle(s),o.drawText(e,n,r)}},MultiPolygon:function(t,e,i,n,r){const o=i.getFill(),s=i.getStroke()
if(s||o){const a=t.getBuilder(i.getZIndex(),"Polygon")
a.setFillStrokeStyle(o,s),a.drawMultiPolygon(e,n,r)}const a=i.getText()
if(a&&a.getText()){const o=t.getBuilder(i.getZIndex(),"Text")
o.setTextStyle(a),o.drawText(e,n,r)}},GeometryCollection:function(t,e,i,n,r,o){const s=e.getGeometriesArray()
let a,l
for(a=0,l=s.length;a<l;++a)(0,gt[s[a].getType()])(t,s[a],i,n,r,o)},Circle:function(t,e,i,n,r){const o=i.getFill(),s=i.getStroke()
if(o||s){const a=t.getBuilder(i.getZIndex(),"Circle")
a.setFillStrokeStyle(o,s),a.drawCircle(e,n,r)}const a=i.getText()
if(a&&a.getText()){const r=t.getBuilder(i.getZIndex(),"Text")
r.setTextStyle(a),r.drawText(e,n)}}}
function _t(t,e){return parseInt((0,M.v6)(t),10)-parseInt((0,M.v6)(e),10)}function mt(t,e){const i=yt(t,e)
return i*i}function yt(t,e){return pt*t/e}function vt(t,e,i,n,r,o,s,a){const l=[],h=i.getImage()
if(h){let t=!0
const e=h.getImageState()
e==ft.A.LOADED||e==ft.A.ERROR?t=!1:e==ft.A.IDLE&&h.load(),t&&l.push(h.ready())}const u=i.getFill()
u&&u.loading()&&l.push(u.ready())
const c=l.length>0
return c&&Promise.all(l).then((()=>r(null))),function(t,e,i,n,r,o,s){const a=i.getGeometryFunction()(e)
if(!a)return
const l=a.simplifyTransformed(n,r)
i.getRenderer()?xt(t,l,i,e,s):(0,gt[l.getType()])(t,l,i,e,s,o)}(t,e,i,n,o,s,a),c}function xt(t,e,i,n,r){if("GeometryCollection"!=e.getType())t.getBuilder(i.getZIndex(),"Default").drawCustom(e,n,i.getRenderer(),i.getHitDetectionRenderer(),r)
else{const o=e.getGeometries()
for(let e=0,s=o.length;e<s;++e)xt(t,o[e],i,n,r)}}var bt=i(8474)
class wt extends F.A{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=(0,w.S5)(),this.wrappedRenderedExtent_=(0,w.S5)(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(t,e,i){const n=e.extent,r=e.viewState,o=r.center,s=r.resolution,a=r.projection,l=r.rotation,h=a.getExtent(),u=this.getLayer().getSource(),c=this.getLayer().getDeclutter(),d=e.pixelRatio,f=e.viewHints,p=!(f[ot.A.ANIMATING]||f[ot.A.INTERACTING]),g=this.context,_=Math.round((0,w.RG)(n)/s*d),m=Math.round((0,w.Oq)(n)/s*d),y=u.getWrapX()&&a.canWrapX(),v=y?(0,w.RG)(h):null,x=y?Math.ceil((n[2]-h[2])/v)+1:1
let b=y?Math.floor((n[0]-h[0])/v):0
do{const n=this.getRenderTransform(o,s,l,d,_,m,b*v)
t.execute(g,[g.canvas.width,g.canvas.height],n,l,p,void 0===i?tt:i?et:it,i?c&&e.declutter[c]:void 0)}while(++b<x)}setDrawContext_(){1!==this.opacity_&&(this.targetContext_=this.context,this.context=(0,J.Y)(this.context.canvas.width,this.context.canvas.height,F.B))}resetDrawContext_(){if(1!==this.opacity_){const t=this.targetContext_.globalAlpha
this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=t,(0,J.Yg)(this.context),F.B.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(t){this.replayGroup_&&this.getLayer().getDeclutter()&&this.renderWorlds(this.replayGroup_,t,!0)}renderDeferredInternal(t){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.resetDrawContext_())}renderFrame(t,e){const i=t.pixelRatio,n=t.layerStatesArray[t.layerIndex]
this.opacity_=n.opacity
const o=t.extent,s=t.viewState.resolution,a=Math.round((0,w.RG)(o)/s*i),l=Math.round((0,w.Oq)(o)/s*i);(0,z.Zz)(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/i,1/i,0,-a/2,-l/2),(0,z.T9)(this.inversePixelTransform,this.pixelTransform)
const h=(0,z.dI)(this.pixelTransform)
this.useContainer(e,h,this.getBackground(t))
const u=this.context,c=u.canvas,d=this.replayGroup_
let f=d&&!d.isEmpty()
if(!f&&!this.getLayer().hasListener(r.A.PRERENDER)&&!this.getLayer().hasListener(r.A.POSTRENDER))return null
c.width!=a||c.height!=l?(c.width=a,c.height=l,c.style.transform!==h&&(c.style.transform=h)):this.containerReused||u.clearRect(0,0,a,l),this.setDrawContext_(),this.preRender(u,t)
const p=t.viewState,g=p.projection
let _=!1
if(f&&n.extent&&this.clipping){const e=(0,ht.SD)(n.extent,g)
f=(0,w.HY)(e,t.extent),_=f&&!(0,w.ms)(e,t.extent),_&&this.clipUnrotated(u,t,e)}return f&&this.renderWorlds(d,t,!this.getLayer().getDeclutter()&&void 0),_&&u.restore(),this.postRender(u,t),this.renderedRotation_!==p.rotation&&(this.renderedRotation_=p.rotation,this.hitDetectionImageData_=null),t.declutter||this.resetDrawContext_(),this.container}getFeatures(t){return new Promise((e=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const t=[this.context.canvas.width,this.context.canvas.height];(0,z.Bb)(this.pixelTransform,t)
const e=this.renderedCenter_,i=this.renderedResolution_,n=this.renderedRotation_,r=this.renderedProjection_,o=this.wrappedRenderedExtent_,s=this.getLayer(),a=[],l=t[0]*ut,h=t[1]*ut
a.push(this.getRenderTransform(e,i,n,ut,l,h,0).slice())
const u=s.getSource(),c=r.getExtent()
if(u.getWrapX()&&r.canWrapX()&&!(0,w.ms)(c,o)){let t=o[0]
const r=(0,w.RG)(c)
let s,u=0
for(;t<c[0];)--u,s=r*u,a.push(this.getRenderTransform(e,i,n,ut,l,h,s).slice()),t+=r
for(u=0,t=o[2];t>c[2];)++u,s=r*u,a.push(this.getRenderTransform(e,i,n,ut,l,h,s).slice()),t-=r}const d=(0,ht.Tf)()
this.hitDetectionImageData_=ct(t,a,this.renderedFeatures_,s.getStyleFunction(),o,i,n,mt(i,this.renderedPixelRatio_),d?r:null)}e(dt(t,this.renderedFeatures_,this.hitDetectionImageData_))}))}forEachFeatureAtCoordinate(t,e,i,n,r){if(!this.replayGroup_)return
const o=e.viewState.resolution,s=e.viewState.rotation,a=this.getLayer(),l={},h=function(t,e,i){const o=(0,M.v6)(t),s=l[o]
if(s){if(!0!==s&&i<s.distanceSq){if(0===i)return l[o]=!0,r.splice(r.lastIndexOf(s),1),n(t,a,e)
s.geometry=e,s.distanceSq=i}}else{if(0===i)return l[o]=!0,n(t,a,e)
r.push(l[o]={feature:t,layer:a,geometry:e,distanceSq:i,callback:n})}}
let u
const c=[this.replayGroup_],d=this.getLayer().getDeclutter()
return c.some((n=>u=n.forEachFeatureAtCoordinate(t,o,s,i,h,d&&e.declutter[d]?e.declutter[d].all().map((t=>t.value)):null))),u}handleFontsChanged(){const t=this.getLayer()
t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const e=this.getLayer(),i=e.getSource()
if(!i)return!1
const n=t.viewHints[ot.A.ANIMATING],r=t.viewHints[ot.A.INTERACTING],o=e.getUpdateWhileAnimating(),s=e.getUpdateWhileInteracting()
if(this.ready&&!o&&n||!s&&r)return this.animatingOrInteracting_=!0,!0
this.animatingOrInteracting_=!1
const a=t.extent,l=t.viewState,h=l.projection,u=l.resolution,c=t.pixelRatio,d=e.getRevision(),f=e.getRenderBuffer()
let p=e.getRenderOrder()
void 0===p&&(p=_t)
const g=l.center.slice(),_=(0,w.r)(a,f*u),m=_.slice(),y=[_.slice()],v=h.getExtent()
if(i.getWrapX()&&h.canWrapX()&&!(0,w.ms)(v,t.extent)){const t=(0,w.RG)(v),e=Math.max((0,w.RG)(_)/2,t)
_[0]=v[0]-e,_[2]=v[2]+e,(0,bt.Li)(g,h)
const i=(0,w.Li)(y[0],h)
i[0]<v[0]&&i[2]<v[2]?y.push([i[0]+t,i[1],i[2]+t,i[3]]):i[0]>v[0]&&i[2]>v[2]&&y.push([i[0]-t,i[1],i[2]-t,i[3]])}if(this.ready&&this.renderedResolution_==u&&this.renderedRevision_==d&&this.renderedRenderOrder_==p&&(0,w.ms)(this.wrappedRenderedExtent_,_))return(0,S.aI)(this.renderedExtent_,m)||(this.hitDetectionImageData_=null,this.renderedExtent_=m),this.renderedCenter_=g,this.replayGroupChanged=!1,!0
this.replayGroup_=null
const x=new N(yt(u,c),_,u,c),b=(0,ht.Tf)()
let E
if(b){for(let t=0,e=y.length;t<e;++t){const e=y[t],n=(0,ht.JR)(e,h)
i.loadFeatures(n,(0,ht.vN)(u,h),b)}E=(0,ht.FO)(b,h)}else for(let w=0,S=y.length;w<S;++w)i.loadFeatures(y[w],u,h)
const C=mt(u,c)
let P=!0
const T=(t,i)=>{let n
const r=t.getStyleFunction()||e.getStyleFunction()
if(r&&(n=r(t,u)),n){const e=this.renderFeature(t,C,n,x,E,this.getLayer().getDeclutter(),i)
P=P&&!e}},I=(0,ht.JR)(_,h),M=i.getFeaturesInExtent(I)
p&&M.sort(p)
for(let w=0,S=M.length;w<S;++w)T(M[w],w)
this.renderedFeatures_=M,this.ready=P
const A=x.finish(),R=new rt(_,u,c,i.getOverlaps(),A,e.getRenderBuffer(),!!t.declutter)
return this.renderedResolution_=u,this.renderedRevision_=d,this.renderedRenderOrder_=p,this.renderedExtent_=m,this.wrappedRenderedExtent_=_,this.renderedCenter_=g,this.renderedProjection_=h,this.renderedPixelRatio_=c,this.replayGroup_=R,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,e,i,n,r,o,s){if(!i)return!1
let a=!1
if(Array.isArray(i))for(let l=0,h=i.length;l<h;++l)a=vt(n,t,i[l],e,this.boundHandleStyleImageChange_,r,o,s)||a
else a=vt(n,t,i,e,this.boundHandleStyleImageChange_,r,o,s)
return a}}const Et=wt
class St extends d.A{constructor(t){super(t)}createRenderer(){return new Et(this)}}const Ct=St
var Pt=i(9481)
function Tt(t,e,i){const n=[]
let r=t(0),o=t(1),s=e(r),a=e(o)
const l=[o,r],h=[a,s],u=[1,0],c={}
let d,f,p,g,_,m,y=1e5
for(;--y>0&&u.length>0;)p=u.pop(),r=l.pop(),s=h.pop(),m=p.toString(),m in c||(n.push(s[0],s[1]),c[m]=!0),g=u.pop(),o=l.pop(),a=h.pop(),_=(p+g)/2,d=t(_),f=e(d),(0,A.Q1)(f[0],f[1],s[0],s[1],a[0],a[1])<i?(n.push(a[0],a[1]),m=g.toString(),c[m]=!0):(u.push(g,_,_,p),h.push(a,f,f,s),l.push(o,d,d,r))
return n}const It=new h.A({color:"rgba(0,0,0,0.2)"}),Mt=[90,45,30,20,10,5,2,1,.5,20/60,10/60,5/60,2/60,1/60,30/3600,20/3600,10/3600,5/3600,2/3600,1/3600],At=class extends Ct{constructor(t){t=t||{}
const e=Object.assign({updateWhileAnimating:!0,updateWhileInteracting:!0,renderBuffer:0},t)
delete e.maxLines,delete e.strokeStyle,delete e.targetSize,delete e.showLabels,delete e.lonLabelFormatter,delete e.latLabelFormatter,delete e.lonLabelPosition,delete e.latLabelPosition,delete e.lonLabelStyle,delete e.latLabelStyle,delete e.intervals,super(e),this.projection_=null,this.maxLat_=1/0,this.maxLon_=1/0,this.minLat_=-1/0,this.minLon_=-1/0,this.maxX_=1/0,this.maxY_=1/0,this.minX_=-1/0,this.minY_=-1/0,this.targetSize_=void 0!==t.targetSize?t.targetSize:100,this.maxLines_=void 0!==t.maxLines?t.maxLines:100,this.meridians_=[],this.parallels_=[],this.strokeStyle_=void 0!==t.strokeStyle?t.strokeStyle:It,this.fromLonLatTransform_=void 0,this.toLonLatTransform_=void 0,this.projectionCenterLonLat_=null,this.bottomLeft_=null,this.bottomRight_=null,this.topLeft_=null,this.topRight_=null,this.meridiansLabels_=null,this.parallelsLabels_=null,t.showLabels&&(this.lonLabelFormatter_=null==t.lonLabelFormatter?bt.aP.bind(this,"EW"):t.lonLabelFormatter,this.latLabelFormatter_=null==t.latLabelFormatter?bt.aP.bind(this,"NS"):t.latLabelFormatter,this.lonLabelPosition_=null==t.lonLabelPosition?0:t.lonLabelPosition,this.latLabelPosition_=null==t.latLabelPosition?1:t.latLabelPosition,this.lonLabelStyleBase_=new u.Ay({text:void 0!==t.lonLabelStyle?t.lonLabelStyle.clone():new c.A({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new s.A({color:"rgba(0,0,0,1)"}),stroke:new h.A({color:"rgba(255,255,255,1)",width:3})})}),this.lonLabelStyle_=t=>{const e=t.get("graticule_label")
return this.lonLabelStyleBase_.getText().setText(e),this.lonLabelStyleBase_},this.latLabelStyleBase_=new u.Ay({text:void 0!==t.latLabelStyle?t.latLabelStyle.clone():new c.A({font:"12px Calibri,sans-serif",textAlign:"right",fill:new s.A({color:"rgba(0,0,0,1)"}),stroke:new h.A({color:"rgba(255,255,255,1)",width:3})})}),this.latLabelStyle_=t=>{const e=t.get("graticule_label")
return this.latLabelStyleBase_.getText().setText(e),this.latLabelStyleBase_},this.meridiansLabels_=[],this.parallelsLabels_=[],this.addEventListener(r.A.POSTRENDER,this.drawLabels_.bind(this))),this.intervals_=void 0!==t.intervals?t.intervals:Mt,this.setSource(new Pt.A({loader:this.loaderFunction.bind(this),strategy:this.strategyFunction.bind(this),features:new n.A,overlaps:!1,useSpatialIndex:!1,wrapX:t.wrapX})),this.featurePool_=[],this.lineStyle_=new u.Ay({stroke:this.strokeStyle_}),this.loadedExtent_=null,this.renderedExtent_=null,this.renderedResolution_=null,this.setRenderOrder(null)}strategyFunction(t,e){let i=t.slice()
return this.projection_&&this.getSource().getWrapX()&&(0,w.Li)(i,this.projection_),this.loadedExtent_&&((0,w.bE)(this.loadedExtent_,i,e)?i=this.loadedExtent_.slice():this.getSource().removeLoadedExtent(this.loadedExtent_)),[i]}loaderFunction(t,e,i){this.loadedExtent_=t
const n=this.getSource(),r=this.getExtent()||[-1/0,-1/0,1/0,1/0],s=(0,w._N)(r,t)
if(this.renderedExtent_&&(0,w.aI)(this.renderedExtent_,s)&&this.renderedResolution_===e)return
if(this.renderedExtent_=s,this.renderedResolution_=e,(0,w.Im)(s))return
const a=(0,w.q1)(s),l=e*e/4;(!this.projection_||!(0,ht.tI)(this.projection_,i))&&this.updateProjectionInfo_(i),this.createGraticule_(s,a,e,l)
let h,u=this.meridians_.length+this.parallels_.length
for(this.meridiansLabels_&&(u+=this.meridians_.length),this.parallelsLabels_&&(u+=this.parallels_.length);u>this.featurePool_.length;)h=new o.A,this.featurePool_.push(h)
const c=n.getFeaturesCollection()
c.clear()
let d,f,p=0
for(d=0,f=this.meridians_.length;d<f;++d)h=this.featurePool_[p++],h.setGeometry(this.meridians_[d]),h.setStyle(this.lineStyle_),c.push(h)
for(d=0,f=this.parallels_.length;d<f;++d)h=this.featurePool_[p++],h.setGeometry(this.parallels_[d]),h.setStyle(this.lineStyle_),c.push(h)}addMeridian_(t,e,i,n,r,o){const s=this.getMeridian_(t,e,i,n,o)
if((0,w.HY)(s.getExtent(),r)){if(this.meridiansLabels_){const e=this.lonLabelFormatter_(t)
o in this.meridiansLabels_?this.meridiansLabels_[o].text=e:this.meridiansLabels_[o]={geom:new l.A([]),text:e}}this.meridians_[o++]=s}return o}addParallel_(t,e,i,n,r,o){const s=this.getParallel_(t,e,i,n,o)
if((0,w.HY)(s.getExtent(),r)){if(this.parallelsLabels_){const e=this.latLabelFormatter_(t)
o in this.parallelsLabels_?this.parallelsLabels_[o].text=e:this.parallelsLabels_[o]={geom:new l.A([]),text:e}}this.parallels_[o++]=s}return o}drawLabels_(t){const e=t.frameState.viewState.rotation,i=t.frameState.viewState.resolution,n=t.frameState.size,r=t.frameState.extent,o=(0,w.q1)(r)
let s=r
if(e){const t=n[0]*i,e=n[1]*i
s=[o[0]-t/2,o[1]-e/2,o[0]+t/2,o[1]+e/2]}let a=0,l=0,h=this.latLabelPosition_<.5
const u=this.projection_.getExtent(),c=(0,w.RG)(u)
this.getSource().getWrapX()&&this.projection_.canWrapX()&&!(0,w.ms)(u,r)&&(a=Math.floor((r[0]-u[0])/c),l=Math.ceil((r[2]-u[2])/c),h=h!==Math.abs(e)>Math.PI/2)
const d=function(t){if(!(t.context instanceof CanvasRenderingContext2D))throw new Error("Only works for render events from Canvas 2D layers")
const e=t.inversePixelTransform[0],i=t.inversePixelTransform[1],n=Math.sqrt(e*e+i*i),r=t.frameState,o=(0,z.lw)(t.inversePixelTransform.slice(),r.coordinateToPixelTransform),s=mt(r.viewState.resolution,n)
let a
const l=(0,ht.Tf)()
return l&&(a=(0,ht.FO)(l,r.viewState.projection)),new at(t.context,n,r.extent,o,r.viewState.rotation,s,a)}(t)
for(let f=a;f<=l;++f){let t,i,n,u,p=this.meridians_.length+this.parallels_.length
if(this.meridiansLabels_)for(i=0,n=this.meridiansLabels_.length;i<n;++i){const n=this.meridians_[i]
if(e||0!==f){const t=n.clone()
t.translate(f*c,0),t.rotate(-e,o),u=this.getMeridianPoint_(t,s,i),u.rotate(e,o)}else u=this.getMeridianPoint_(n,r,i)
t=this.featurePool_[p++],t.setGeometry(u),t.set("graticule_label",this.meridiansLabels_[i].text),d.drawFeature(t,this.lonLabelStyle_(t))}if(this.parallelsLabels_&&(f===a&&h||f===l&&!h))for(i=0,n=this.parallels_.length;i<n;++i){const n=this.parallels_[i]
if(e||0!==f){const t=n.clone()
t.translate(f*c,0),t.rotate(-e,o),u=this.getParallelPoint_(t,s,i),u.rotate(e,o)}else u=this.getParallelPoint_(n,r,i)
t=this.featurePool_[p++],t.setGeometry(u),t.set("graticule_label",this.parallelsLabels_[i].text),d.drawFeature(t,this.latLabelStyle_(t))}}}createGraticule_(t,e,i,n){const r=this.getInterval_(i)
if(-1==r)return this.meridians_.length=0,this.parallels_.length=0,this.meridiansLabels_&&(this.meridiansLabels_.length=0),void(this.parallelsLabels_&&(this.parallelsLabels_.length=0))
let o=!1
const s=this.projection_.getExtent(),a=(0,w.RG)(s)
this.getSource().getWrapX()&&this.projection_.canWrapX()&&!(0,w.ms)(s,t)&&((0,w.RG)(t)>=a?(t[0]=s[0],t[2]=s[2]):o=!0)
const l=[(0,A.qE)(e[0],this.minX_,this.maxX_),(0,A.qE)(e[1],this.minY_,this.maxY_)],h=this.toLonLatTransform_(l)
isNaN(h[1])&&(h[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_)
let u=(0,A.qE)(h[0],this.minLon_,this.maxLon_),c=(0,A.qE)(h[1],this.minLat_,this.maxLat_)
const d=this.maxLines_
let f,p,g,_,m=t
o||(m=[(0,A.qE)(t[0],this.minX_,this.maxX_),(0,A.qE)(t[1],this.minY_,this.maxY_),(0,A.qE)(t[2],this.minX_,this.maxX_),(0,A.qE)(t[3],this.minY_,this.maxY_)])
const y=(0,w.NW)(m,this.toLonLatTransform_,void 0,8)
let v=y[3],x=y[2],b=y[1],E=y[0]
if(o||((0,w.Ym)(m,this.bottomLeft_)&&(E=this.minLon_,b=this.minLat_),(0,w.Ym)(m,this.bottomRight_)&&(x=this.maxLon_,b=this.minLat_),(0,w.Ym)(m,this.topLeft_)&&(E=this.minLon_,v=this.maxLat_),(0,w.Ym)(m,this.topRight_)&&(x=this.maxLon_,v=this.maxLat_),v=(0,A.qE)(v,c,this.maxLat_),x=(0,A.qE)(x,u,this.maxLon_),b=(0,A.qE)(b,this.minLat_,c),E=(0,A.qE)(E,this.minLon_,u)),u=Math.floor(u/r)*r,_=(0,A.qE)(u,this.minLon_,this.maxLon_),p=this.addMeridian_(_,b,v,n,t,0),f=0,o)for(;(_-=r)>=E&&f++<d;)p=this.addMeridian_(_,b,v,n,t,p)
else for(;_!=this.minLon_&&f++<d;)_=Math.max(_-r,this.minLon_),p=this.addMeridian_(_,b,v,n,t,p)
if(_=(0,A.qE)(u,this.minLon_,this.maxLon_),f=0,o)for(;(_+=r)<=x&&f++<d;)p=this.addMeridian_(_,b,v,n,t,p)
else for(;_!=this.maxLon_&&f++<d;)_=Math.min(_+r,this.maxLon_),p=this.addMeridian_(_,b,v,n,t,p)
for(this.meridians_.length=p,this.meridiansLabels_&&(this.meridiansLabels_.length=p),c=Math.floor(c/r)*r,g=(0,A.qE)(c,this.minLat_,this.maxLat_),p=this.addParallel_(g,E,x,n,t,0),f=0;g!=this.minLat_&&f++<d;)g=Math.max(g-r,this.minLat_),p=this.addParallel_(g,E,x,n,t,p)
for(g=(0,A.qE)(c,this.minLat_,this.maxLat_),f=0;g!=this.maxLat_&&f++<d;)g=Math.min(g+r,this.maxLat_),p=this.addParallel_(g,E,x,n,t,p)
this.parallels_.length=p,this.parallelsLabels_&&(this.parallelsLabels_.length=p)}getInterval_(t){const e=this.projectionCenterLonLat_[0],i=this.projectionCenterLonLat_[1]
let n=-1
const r=Math.pow(this.targetSize_*t,2),o=[],s=[]
for(let a=0,l=this.intervals_.length;a<l;++a){const t=(0,A.qE)(this.intervals_[a]/2,0,90),l=(0,A.qE)(i,-90+t,90-t)
if(o[0]=e-t,o[1]=l-t,s[0]=e+t,s[1]=l+t,this.fromLonLatTransform_(o,o),this.fromLonLatTransform_(s,s),Math.pow(s[0]-o[0],2)+Math.pow(s[1]-o[1],2)<=r)break
n=this.intervals_[a]}return n}getMeridian_(t,e,i,n,r){const o=function(t,e,i,n,r){const o=(0,ht.Jt)("EPSG:4326")
return Tt((function(n){return[t,e+(i-e)*n]}),(0,ht.RG)(o,n),r)}(t,e,i,this.projection_,n)
let s=this.meridians_[r]
return s?(s.setFlatCoordinates("XY",o),s.changed()):(s=new a.A(o,"XY"),this.meridians_[r]=s),s}getMeridianPoint_(t,e,i){const n=t.getFlatCoordinates()
let r=1,o=n.length-1
n[r]>n[o]&&(r=o,o=1)
const s=Math.max(e[1],n[r]),a=Math.min(e[3],n[o]),l=(0,A.qE)(e[1]+Math.abs(e[1]-e[3])*this.lonLabelPosition_,s,a),h=[n[r-1]+(n[o-1]-n[r-1])*(l-n[r])/(n[o]-n[r]),l],u=this.meridiansLabels_[i].geom
return u.setCoordinates(h),u}getMeridians(){return this.meridians_}getParallel_(t,e,i,n,r){const o=function(t,e,i,n,r){const o=(0,ht.Jt)("EPSG:4326")
return Tt((function(n){return[e+(i-e)*n,t]}),(0,ht.RG)(o,n),r)}(t,e,i,this.projection_,n)
let s=this.parallels_[r]
return s?(s.setFlatCoordinates("XY",o),s.changed()):s=new a.A(o,"XY"),s}getParallelPoint_(t,e,i){const n=t.getFlatCoordinates()
let r=0,o=n.length-2
n[r]>n[o]&&(r=o,o=0)
const s=Math.max(e[0],n[r]),a=Math.min(e[2],n[o]),l=(0,A.qE)(e[0]+Math.abs(e[0]-e[2])*this.latLabelPosition_,s,a),h=[l,n[r+1]+(n[o+1]-n[r+1])*(l-n[r])/(n[o]-n[r])],u=this.parallelsLabels_[i].geom
return u.setCoordinates(h),u}getParallels(){return this.parallels_}updateProjectionInfo_(t){const e=(0,ht.Jt)("EPSG:4326"),i=t.getWorldExtent()
this.maxLat_=i[3],this.maxLon_=i[2],this.minLat_=i[1],this.minLon_=i[0]
const n=(0,ht.RG)(t,e)
if(this.minLon_<this.maxLon_)this.toLonLatTransform_=n
else{const t=this.minLon_+this.maxLon_/2
this.maxLon_+=360,this.toLonLatTransform_=function(e,i,r){const o=n(e,i,r=r||2)
for(let n=0,s=o.length;n<s;n+=r)o[n]<t&&(o[n]+=360)
return o}}this.fromLonLatTransform_=(0,ht.RG)(e,t)
const r=(0,w.NW)([this.minLon_,this.minLat_,this.maxLon_,this.maxLat_],this.fromLonLatTransform_,void 0,8)
this.minX_=r[0],this.maxX_=r[2],this.minY_=r[1],this.maxY_=r[3],this.bottomLeft_=this.fromLonLatTransform_([this.minLon_,this.minLat_]),this.bottomRight_=this.fromLonLatTransform_([this.maxLon_,this.minLat_]),this.topLeft_=this.fromLonLatTransform_([this.minLon_,this.maxLat_]),this.topRight_=this.fromLonLatTransform_([this.maxLon_,this.maxLat_]),this.projectionCenterLonLat_=this.toLonLatTransform_((0,w.q1)(t.getExtent())),isNaN(this.projectionCenterLonLat_[1])&&(this.projectionCenterLonLat_[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_),this.projection_=t}}
var Rt=i(1971),Lt=i(8027),Ot=i(1622)
const Dt=34962,Nt=34963,Ft=["experimental-webgl","webgl","webkit-3d","moz-webgl"]
function kt(t,e){e=Object.assign({preserveDrawingBuffer:!0,antialias:!Ot.oF},e)
const i=Ft.length
for(let n=0;n<i;++n)try{const i=t.getContext(Ft[n],e)
if(i)return i}catch(t){}return null}var zt=i(6249)
function jt(t){switch(t){case Dt:return Float32Array
case Nt:return Uint32Array
default:return Float32Array}}const Gt=class{constructor(t,e){this.array_=null,this.type_=t,(0,zt.v)(t===Dt||t===Nt,"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`"),this.usage_=void 0!==e?e:35044}ofSize(t){return this.array_=new(jt(this.type_))(t),this}fromArray(t){return this.array_=jt(this.type_).from(t),this}fromArrayBuffer(t){return this.array_=new(jt(this.type_))(t),this}getType(){return this.type_}getArray(){return this.array_}getUsage(){return this.usage_}getSize(){return this.array_?this.array_.length:0}}
var Bt=i(7439),Ut=i(5097),qt=i(7683)
const Vt="webglcontextlost",Zt="webglcontextrestored"
var Wt=i(8646)
const Yt=class{constructor(t){this.gl_=t.webGlContext
const e=this.gl_
this.scaleRatio_=t.scaleRatio||1,this.renderTargetTexture_=e.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=e.createFramebuffer(),this.depthBuffer_=e.createRenderbuffer()
const i=e.createShader(e.VERTEX_SHADER)
e.shaderSource(i,t.vertexShader||"\n  precision mediump float;\n  \n  attribute vec2 a_position;\n  varying vec2 v_texCoord;\n  varying vec2 v_screenCoord;\n  \n  uniform vec2 u_screenSize;\n   \n  void main() {\n    v_texCoord = a_position * 0.5 + 0.5;\n    v_screenCoord = v_texCoord * u_screenSize;\n    gl_Position = vec4(a_position, 0.0, 1.0);\n  }\n"),e.compileShader(i)
const n=e.createShader(e.FRAGMENT_SHADER)
e.shaderSource(n,t.fragmentShader||"\n  precision mediump float;\n   \n  uniform sampler2D u_image;\n  uniform float u_opacity;\n   \n  varying vec2 v_texCoord;\n   \n  void main() {\n    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;\n  }\n"),e.compileShader(n),this.renderTargetProgram_=e.createProgram(),e.attachShader(this.renderTargetProgram_,i),e.attachShader(this.renderTargetProgram_,n),e.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),e.STATIC_DRAW),this.renderTargetAttribLocation_=e.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],t.uniforms&&Object.keys(t.uniforms).forEach((i=>{this.uniforms_.push({value:t.uniforms[i],location:e.getUniformLocation(this.renderTargetProgram_,i)})}))}getGL(){return this.gl_}init(t){const e=this.getGL(),i=[e.drawingBufferWidth*this.scaleRatio_,e.drawingBufferHeight*this.scaleRatio_]
if(e.bindFramebuffer(e.FRAMEBUFFER,this.getFrameBuffer()),e.bindRenderbuffer(e.RENDERBUFFER,this.getDepthBuffer()),e.viewport(0,0,i[0],i[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==i[0]||this.renderTargetTextureSize_[1]!==i[1]){this.renderTargetTextureSize_=i
const t=0,n=e.RGBA,r=0,o=e.RGBA,s=e.UNSIGNED_BYTE,a=null
e.bindTexture(e.TEXTURE_2D,this.renderTargetTexture_),e.texImage2D(e.TEXTURE_2D,t,n,i[0],i[1],r,o,s,a),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.renderTargetTexture_,0),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,i[0],i[1]),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,this.depthBuffer_)}}apply(t,e,i,n){const r=this.getGL(),o=t.size
if(r.bindFramebuffer(r.FRAMEBUFFER,e?e.getFrameBuffer():null),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,this.renderTargetTexture_),!e){const e=(0,M.v6)(r.canvas)
if(!t.renderTargets[e]){const i=r.getContextAttributes()
i&&i.preserveDrawingBuffer&&(r.clearColor(0,0,0,0),r.clearDepth(1),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT)),t.renderTargets[e]=!0}}r.disable(r.DEPTH_TEST),r.enable(r.BLEND),r.blendFunc(r.ONE,r.ONE_MINUS_SRC_ALPHA),r.viewport(0,0,r.drawingBufferWidth,r.drawingBufferHeight),r.bindBuffer(r.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),r.useProgram(this.renderTargetProgram_),r.enableVertexAttribArray(this.renderTargetAttribLocation_),r.vertexAttribPointer(this.renderTargetAttribLocation_,2,r.FLOAT,!1,0,0),r.uniform2f(this.renderTargetUniformLocation_,o[0],o[1]),r.uniform1i(this.renderTargetTextureLocation_,0)
const s=t.layerStatesArray[t.layerIndex].opacity
r.uniform1f(this.renderTargetOpacityLocation_,s),this.applyUniforms(t),i&&i(r,t),r.drawArrays(r.TRIANGLES,0,6),n&&n(r,t)}getFrameBuffer(){return this.frameBuffer_}getDepthBuffer(){return this.depthBuffer_}applyUniforms(t){const e=this.getGL()
let i,n=1
this.uniforms_.forEach((function(r){if(i="function"==typeof r.value?r.value(t):r.value,i instanceof HTMLCanvasElement||i instanceof ImageData)r.texture||(r.texture=e.createTexture()),e.activeTexture(e[`TEXTURE${n}`]),e.bindTexture(e.TEXTURE_2D,r.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),i instanceof ImageData?e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,i.width,i.height,0,e.UNSIGNED_BYTE,new Uint8Array(i.data)):e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,i),e.uniform1i(r.location,n++)
else if(Array.isArray(i))switch(i.length){case 2:return void e.uniform2f(r.location,i[0],i[1])
case 3:return void e.uniform3f(r.location,i[0],i[1],i[2])
case 4:return void e.uniform4f(r.location,i[0],i[1],i[2],i[3])
default:return}else"number"==typeof i&&e.uniform1f(r.location,i)}))}}
function Xt(t,e){return t[0]=e[0],t[1]=e[1],t[4]=e[2],t[5]=e[3],t[12]=e[4],t[13]=e[5],t}const Ht="u_pixelRatio",$t=5126,Kt={}
function Jt(t){return"shared/"+t}let Qt=0
class te extends Wt.A{constructor(t){super(),t=t||{},this.boundHandleWebGLContextLost_=this.handleWebGLContextLost.bind(this),this.boundHandleWebGLContextRestored_=this.handleWebGLContextRestored.bind(this),this.canvasCacheKey_=t.canvasCacheKey?Jt(t.canvasCacheKey):function(){const t="unique/"+Qt
return Qt+=1,t}(),this.gl_=function(t){let e=Kt[t]
if(!e){const i=document.createElement("canvas")
i.width=1,i.height=1,i.style.position="absolute",i.style.left="0",e={users:0,context:kt(i)},Kt[t]=e}return e.users+=1,e.context}(this.canvasCacheKey_),this.bufferCache_={},this.extensionCache_={},this.currentProgram_=null,this.needsToBeRecreated_=!1
const e=this.gl_.canvas
e.addEventListener(Vt,this.boundHandleWebGLContextLost_),e.addEventListener(Zt,this.boundHandleWebGLContextRestored_),this.offsetRotateMatrix_=(0,z.vt)(),this.offsetScaleMatrix_=(0,z.vt)(),this.tmpMat4_=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.uniformLocationsByProgram_={},this.attribLocationsByProgram_={},this.uniforms_=[],t.uniforms&&this.setUniforms(t.uniforms),this.postProcessPasses_=t.postProcesses?t.postProcesses.map((t=>new Yt({webGlContext:this.gl_,scaleRatio:t.scaleRatio,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms}))):[new Yt({webGlContext:this.gl_})],this.shaderCompileErrors_=null,this.startTime_=Date.now()}setUniforms(t){this.uniforms_=[],this.addUniforms(t)}addUniforms(t){for(const e in t)this.uniforms_.push({name:e,value:t[e]})}canvasCacheKeyMatches(t){return this.canvasCacheKey_===Jt(t)}getExtension(t){if(t in this.extensionCache_)return this.extensionCache_[t]
const e=this.gl_.getExtension(t)
return this.extensionCache_[t]=e,e}bindBuffer(t){const e=this.gl_,i=(0,M.v6)(t)
let n=this.bufferCache_[i]
n||(n={buffer:t,webGlBuffer:e.createBuffer()},this.bufferCache_[i]=n),e.bindBuffer(t.getType(),n.webGlBuffer)}flushBufferData(t){const e=this.gl_
this.bindBuffer(t),e.bufferData(t.getType(),t.getArray(),t.getUsage())}deleteBuffer(t){const e=this.gl_,i=(0,M.v6)(t),n=this.bufferCache_[i]
n&&!e.isContextLost()&&e.deleteBuffer(n.webGlBuffer),delete this.bufferCache_[i]}disposeInternal(){const t=this.gl_.canvas
t.removeEventListener(Vt,this.boundHandleWebGLContextLost_),t.removeEventListener(Zt,this.boundHandleWebGLContextRestored_),function(t){const e=Kt[t]
if(!e)return
if(e.users-=1,e.users>0)return
const i=e.context,n=i.getExtension("WEBGL_lose_context")
n&&n.loseContext()
const r=i.canvas
r.width=1,r.height=1,delete Kt[t]}(this.canvasCacheKey_),delete this.gl_}prepareDraw(t,e,i){const n=this.gl_,r=this.getCanvas(),o=t.size,s=t.pixelRatio
r.width===o[0]*s&&r.height===o[1]*s||(r.width=o[0]*s,r.height=o[1]*s,r.style.width=o[0]+"px",r.style.height=o[1]+"px")
for(let a=this.postProcessPasses_.length-1;a>=0;a--)this.postProcessPasses_[a].init(t)
n.bindTexture(n.TEXTURE_2D,null),n.clearColor(0,0,0,0),n.depthRange(0,1),n.clearDepth(1),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),n.enable(n.BLEND),n.blendFunc(n.ONE,e?n.ZERO:n.ONE_MINUS_SRC_ALPHA),i?(n.enable(n.DEPTH_TEST),n.depthFunc(n.LEQUAL)):n.disable(n.DEPTH_TEST)}bindTexture(t,e,i){const n=this.gl_
n.activeTexture(n.TEXTURE0+e),n.bindTexture(n.TEXTURE_2D,t),n.uniform1i(this.getUniformLocation(i),e)}prepareDrawToRenderTarget(t,e,i,n){const r=this.gl_,o=e.getSize()
r.bindFramebuffer(r.FRAMEBUFFER,e.getFramebuffer()),r.bindRenderbuffer(r.RENDERBUFFER,e.getDepthbuffer()),r.viewport(0,0,o[0],o[1]),r.bindTexture(r.TEXTURE_2D,e.getTexture()),r.clearColor(0,0,0,0),r.depthRange(0,1),r.clearDepth(1),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT),r.enable(r.BLEND),r.blendFunc(r.ONE,i?r.ZERO:r.ONE_MINUS_SRC_ALPHA),n?(r.enable(r.DEPTH_TEST),r.depthFunc(r.LEQUAL)):r.disable(r.DEPTH_TEST)}drawElements(t,e){const i=this.gl_
this.getExtension("OES_element_index_uint")
const n=i.UNSIGNED_INT,r=e-t,o=4*t
i.drawElements(i.TRIANGLES,r,n,o)}finalizeDraw(t,e,i){for(let n=0,r=this.postProcessPasses_.length;n<r;n++)n===r-1?this.postProcessPasses_[n].apply(t,null,e,i):this.postProcessPasses_[n].apply(t,this.postProcessPasses_[n+1])}getCanvas(){return this.gl_.canvas}getGL(){return this.gl_}applyFrameState(t){const e=t.size,i=t.viewState.rotation,n=t.pixelRatio
this.setUniformFloatValue("u_time",.001*(Date.now()-this.startTime_)),this.setUniformFloatValue("u_zoom",t.viewState.zoom),this.setUniformFloatValue("u_resolution",t.viewState.resolution),this.setUniformFloatValue(Ht,n),this.setUniformFloatVec2("u_viewportSizePx",[e[0],e[1]]),this.setUniformFloatValue("u_rotation",i)}applyHitDetectionUniform(t){const e=this.getUniformLocation("u_hitDetection")
this.getGL().uniform1i(e,t?1:0),t&&this.setUniformFloatValue(Ht,.5)}applyUniforms(t){const e=this.gl_
let i,n=0
this.uniforms_.forEach((r=>{if(i="function"==typeof r.value?r.value(t):r.value,i instanceof HTMLCanvasElement||i instanceof HTMLImageElement||i instanceof ImageData||i instanceof WebGLTexture){i instanceof WebGLTexture&&!r.texture?(r.prevValue=void 0,r.texture=i):r.texture||(r.prevValue=void 0,r.texture=e.createTexture()),this.bindTexture(r.texture,n,r.name),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)
const t=!(i instanceof HTMLImageElement)||i.complete
i instanceof WebGLTexture||!t||r.prevValue===i||(r.prevValue=i,e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,i)),n++}else if(Array.isArray(i)&&6===i.length)this.setUniformMatrixValue(r.name,Xt(this.tmpMat4_,i))
else if(Array.isArray(i)&&i.length<=4)switch(i.length){case 2:return void e.uniform2f(this.getUniformLocation(r.name),i[0],i[1])
case 3:return void e.uniform3f(this.getUniformLocation(r.name),i[0],i[1],i[2])
case 4:return void e.uniform4f(this.getUniformLocation(r.name),i[0],i[1],i[2],i[3])
default:return}else"number"==typeof i&&e.uniform1f(this.getUniformLocation(r.name),i)}))}useProgram(t,e){this.gl_.useProgram(t),this.currentProgram_=t,this.applyFrameState(e),this.applyUniforms(e)}compileShader(t,e){const i=this.gl_,n=i.createShader(e)
return i.shaderSource(n,t),i.compileShader(n),n}getProgram(t,e){const i=this.gl_,n=this.compileShader(t,i.FRAGMENT_SHADER),r=this.compileShader(e,i.VERTEX_SHADER),o=i.createProgram()
if(i.attachShader(o,n),i.attachShader(o,r),i.linkProgram(o),!i.getShaderParameter(n,i.COMPILE_STATUS)){const t=`Fragment shader compilation failed: ${i.getShaderInfoLog(n)}`
throw new Error(t)}if(i.deleteShader(n),!i.getShaderParameter(r,i.COMPILE_STATUS)){const t=`Vertex shader compilation failed: ${i.getShaderInfoLog(r)}`
throw new Error(t)}if(i.deleteShader(r),!i.getProgramParameter(o,i.LINK_STATUS)){const t=`GL program linking failed: ${i.getProgramInfoLog(o)}`
throw new Error(t)}return o}getUniformLocation(t){const e=(0,M.v6)(this.currentProgram_)
return void 0===this.uniformLocationsByProgram_[e]&&(this.uniformLocationsByProgram_[e]={}),void 0===this.uniformLocationsByProgram_[e][t]&&(this.uniformLocationsByProgram_[e][t]=this.gl_.getUniformLocation(this.currentProgram_,t)),this.uniformLocationsByProgram_[e][t]}getAttributeLocation(t){const e=(0,M.v6)(this.currentProgram_)
return void 0===this.attribLocationsByProgram_[e]&&(this.attribLocationsByProgram_[e]={}),void 0===this.attribLocationsByProgram_[e][t]&&(this.attribLocationsByProgram_[e][t]=this.gl_.getAttribLocation(this.currentProgram_,t)),this.attribLocationsByProgram_[e][t]}makeProjectionTransform(t,e){const i=t.size,n=t.viewState.rotation,r=t.viewState.resolution,o=t.viewState.center
return(0,z.Zz)(e,0,0,2/(r*i[0]),2/(r*i[1]),-n,-o[0],-o[1]),e}setUniformFloatValue(t,e){this.gl_.uniform1f(this.getUniformLocation(t),e)}setUniformFloatVec2(t,e){this.gl_.uniform2fv(this.getUniformLocation(t),e)}setUniformFloatVec4(t,e){this.gl_.uniform4fv(this.getUniformLocation(t),e)}setUniformMatrixValue(t,e){this.gl_.uniformMatrix4fv(this.getUniformLocation(t),!1,e)}enableAttributeArray_(t,e,i,n,r){const o=this.getAttributeLocation(t)
o<0||(this.gl_.enableVertexAttribArray(o),this.gl_.vertexAttribPointer(o,e,i,!1,n,r))}enableAttributes(t){const e=function(t){let e=0
for(let i=0;i<t.length;i++){const n=t[i]
e+=n.size*ee(n.type)}return e}(t)
let i=0
for(let n=0;n<t.length;n++){const r=t[n]
this.enableAttributeArray_(r.name,r.size,r.type||5126,e,i),i+=r.size*ee(r.type)}}handleWebGLContextLost(t){(0,Q.I)(this.bufferCache_),this.currentProgram_=null,t.preventDefault()}handleWebGLContextRestored(){this.needsToBeRecreated_=!0}needsToBeRecreated(){return this.needsToBeRecreated_}createTexture(t,e,i){const n=this.gl_
i=i||n.createTexture()
const r=n.RGBA,o=n.RGBA,s=n.UNSIGNED_BYTE
return n.bindTexture(n.TEXTURE_2D,i),e?n.texImage2D(n.TEXTURE_2D,0,r,o,s,e):n.texImage2D(n.TEXTURE_2D,0,r,t[0],t[1],0,o,s,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),i}}function ee(t){switch(t){case 5121:return Uint8Array.BYTES_PER_ELEMENT
case 5123:return Uint16Array.BYTES_PER_ELEMENT
case 5125:return Uint32Array.BYTES_PER_ELEMENT
default:return Float32Array.BYTES_PER_ELEMENT}}const ie=te
class ne extends Ut.A{constructor(t,e){super(t),e=e||{},this.inversePixelTransform_=(0,z.vt)(),this.pixelContext_=null,this.postProcesses_=e.postProcesses,this.uniforms_=e.uniforms,this.helper,t.addChangeListener(Bt.A.MAP,this.removeHelper.bind(this)),this.dispatchPreComposeEvent=this.dispatchPreComposeEvent.bind(this),this.dispatchPostComposeEvent=this.dispatchPostComposeEvent.bind(this)}dispatchPreComposeEvent(t,e){const i=this.getLayer()
if(i.hasListener(r.A.PRECOMPOSE)){const n=new qt.A(r.A.PRECOMPOSE,void 0,e,t)
i.dispatchEvent(n)}}dispatchPostComposeEvent(t,e){const i=this.getLayer()
if(i.hasListener(r.A.POSTCOMPOSE)){const n=new qt.A(r.A.POSTCOMPOSE,void 0,e,t)
i.dispatchEvent(n)}}reset(t){this.uniforms_=t.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)}removeHelper(){this.helper&&(this.helper.dispose(),delete this.helper)}prepareFrame(t){if(this.getLayer().getRenderSource()){let e,i=!0,n=-1
for(let o=0,s=t.layerStatesArray.length;o<s;o++){const r=t.layerStatesArray[o].layer,s=r.getRenderer()
if(!(s instanceof ne)){i=!0
continue}const a=r.getClassName()
if((i||a!==e)&&(n+=1,i=!1),e=a,s===this)break}const r="map/"+t.mapId+"/group/"+n
this.helper&&this.helper.canvasCacheKeyMatches(r)&&!this.helper.needsToBeRecreated()||(this.removeHelper(),this.helper=new ie({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:r}),e&&(this.helper.getCanvas().className=e),this.afterHelperCreated())}return this.prepareFrameInternal(t)}afterHelperCreated(){}prepareFrameInternal(t){return!0}disposeInternal(){this.removeHelper(),super.disposeInternal()}dispatchRenderEvent_(t,e,i){const n=this.getLayer()
if(n.hasListener(t)){(0,z.Zz)(this.inversePixelTransform_,0,0,i.pixelRatio,-i.pixelRatio,0,0,-i.size[1])
const r=new qt.A(t,this.inversePixelTransform_,i,e)
n.dispatchEvent(r)}}preRender(t,e){this.dispatchRenderEvent_(r.A.PRERENDER,t,e)}postRender(t,e){this.dispatchRenderEvent_(r.A.POSTRENDER,t,e)}}const re=ne,oe=new Uint8Array(4),se=class{constructor(t,e){this.helper_=t
const i=t.getGL()
this.texture_=i.createTexture(),this.framebuffer_=i.createFramebuffer(),this.depthbuffer_=i.createRenderbuffer(),this.size_=e||[1,1],this.data_=new Uint8Array(0),this.dataCacheDirty_=!0,this.updateSize_()}setSize(t){(0,S.aI)(t,this.size_)||(this.size_[0]=t[0],this.size_[1]=t[1],this.updateSize_())}getSize(){return this.size_}clearCachedData(){this.dataCacheDirty_=!0}readAll(){if(this.dataCacheDirty_){const t=this.size_,e=this.helper_.getGL()
e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer_),e.readPixels(0,0,t[0],t[1],e.RGBA,e.UNSIGNED_BYTE,this.data_),this.dataCacheDirty_=!1}return this.data_}readPixel(t,e){if(t<0||e<0||t>this.size_[0]||e>=this.size_[1])return oe[0]=0,oe[1]=0,oe[2]=0,oe[3]=0,oe
this.readAll()
const i=Math.floor(t)+(this.size_[1]-Math.floor(e)-1)*this.size_[0]
return oe[0]=this.data_[4*i],oe[1]=this.data_[4*i+1],oe[2]=this.data_[4*i+2],oe[3]=this.data_[4*i+3],oe}getTexture(){return this.texture_}getFramebuffer(){return this.framebuffer_}getDepthbuffer(){return this.depthbuffer_}updateSize_(){const t=this.size_,e=this.helper_.getGL()
this.texture_=this.helper_.createTexture(t,null,this.texture_),e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer_),e.viewport(0,0,t[0],t[1]),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture_,0),e.bindRenderbuffer(e.RENDERBUFFER,this.depthbuffer_),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,t[0],t[1]),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,this.depthbuffer_),this.data_=new Uint8Array(t[0]*t[1]*4)}},ae="GENERATE_POINT_BUFFERS"
function le(t,e){const i=256,n=255
return(e=e||[])[0]=Math.floor(t/i/i/i)/n,e[1]=Math.floor(t/i/i)%i/n,e[2]=Math.floor(t/i)%i/n,e[3]=t%i/n,e}i(8992)
var he=i(4757)
const ue=class extends re{constructor(t,e){const i=e.uniforms||{},n=(0,z.vt)()
i.u_projectionMatrix=n,super(t,{uniforms:i,postProcesses:e.postProcesses}),this.sourceRevision_=-1,this.verticesBuffer_=new Gt(Dt,35048),this.indicesBuffer_=new Gt(Nt,35048),this.vertexShader_=e.vertexShader,this.fragmentShader_=e.fragmentShader,this.program_,this.hitDetectionEnabled_=e.hitDetectionEnabled??!0
const r=e.attributes?e.attributes.map((function(t){return{name:"a_prop_"+t.name,size:1,type:$t}})):[]
this.attributes=[{name:"a_position",size:2,type:$t},{name:"a_index",size:1,type:$t}],this.hitDetectionEnabled_&&(this.attributes.push({name:"a_prop_hitColor",size:4,type:$t}),this.attributes.push({name:"a_featureUid",size:1,type:$t})),this.attributes.push(...r),this.customAttributes=e.attributes?e.attributes:[],this.previousExtent_=(0,w.S5)(),this.currentTransform_=n,this.renderTransform_=(0,z.vt)(),this.invertRenderTransform_=(0,z.vt)(),this.renderInstructions_=new Float32Array(0),this.hitRenderTarget_,this.lastSentId=0,this.worker_=function(){const t='const e="GENERATE_POLYGON_BUFFERS",t="GENERATE_POINT_BUFFERS",n="GENERATE_LINE_STRING_BUFFERS";function r(e,t){const n=t[0],r=t[1];return t[0]=e[0]*n+e[2]*r+e[4],t[1]=e[1]*n+e[3]*r+e[5],t}function x(e,t){const n=(r=t)[0]*r[3]-r[1]*r[2];var r;!function(e,t){if(!e)throw new Error(t)}(0!==n,"Transformation matrix cannot be inverted");const x=t[0],i=t[1],u=t[2],o=t[3],f=t[4],s=t[5];return e[0]=o/n,e[1]=-i/n,e[2]=-u/n,e[3]=x/n,e[4]=(u*s-o*f)/n,e[5]=-(x*s-i*f)/n,e}function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}new Array(6);var u={exports:{}};function o(e,t,n){n=n||2;var r,x,i,u,o,s,l,v=t&&t.length,h=v?t[0]*n:e.length,c=f(e,0,h,n,!0),g=[];if(!c||c.next===c.prev)return g;if(v&&(c=function(e,t,n,r){var x,i,u,o=[];for(x=0,i=t.length;x<i;x++)(u=f(e,t[x]*r,x<i-1?t[x+1]*r:e.length,r,!1))===u.next&&(u.steiner=!0),o.push(d(u));for(o.sort(p),x=0;x<o.length;x++)n=y(o[x],n);return n}(e,t,c,n)),e.length>80*n){r=i=e[0],x=u=e[1];for(var b=n;b<h;b+=n)(o=e[b])<r&&(r=o),(s=e[b+1])<x&&(x=s),o>i&&(i=o),s>u&&(u=s);l=0!==(l=Math.max(i-r,u-x))?32767/l:0}return a(c,g,n,r,x,l,0),g}function f(e,t,n,r,x){var i,u;if(x===O(e,t,n,r)>0)for(i=t;i<n;i+=r)u=P(i,e[i],e[i+1],u);else for(i=n-r;i>=t;i-=r)u=P(i,e[i],e[i+1],u);return u&&m(u,u.next)&&(B(u),u=u.next),u}function s(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!m(r,r.next)&&0!==w(r.prev,r,r.next))r=r.next;else{if(B(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function a(e,t,n,r,x,i,u){if(e){!u&&i&&function(e,t,n,r){var x=e;do{0===x.z&&(x.z=b(x.x,x.y,t,n,r)),x.prevZ=x.prev,x.nextZ=x.next,x=x.next}while(x!==e);x.prevZ.nextZ=null,x.prevZ=null,function(e){var t,n,r,x,i,u,o,f,s=1;do{for(n=e,e=null,i=null,u=0;n;){for(u++,r=n,o=0,t=0;t<s&&(o++,r=r.nextZ);t++);for(f=s;o>0||f>0&&r;)0!==o&&(0===f||!r||n.z<=r.z)?(x=n,n=n.nextZ,o--):(x=r,r=r.nextZ,f--),i?i.nextZ=x:e=x,x.prevZ=i,i=x;n=r}i.nextZ=null,s*=2}while(u>1)}(x)}(e,r,x,i);for(var o,f,p=e;e.prev!==e.next;)if(o=e.prev,f=e.next,i?v(e,r,x,i):l(e))t.push(o.i/n|0),t.push(e.i/n|0),t.push(f.i/n|0),B(e),e=f.next,p=f.next;else if((e=f)===p){u?1===u?a(e=h(s(e),t,n),t,n,r,x,i,2):2===u&&c(e,t,n,r,x,i):a(s(e),t,n,r,x,i,1);break}}}function l(e){var t=e.prev,n=e,r=e.next;if(w(t,n,r)>=0)return!1;for(var x=t.x,i=n.x,u=r.x,o=t.y,f=n.y,s=r.y,a=x<i?x<u?x:u:i<u?i:u,l=o<f?o<s?o:s:f<s?f:s,v=x>i?x>u?x:u:i>u?i:u,h=o>f?o>s?o:s:f>s?f:s,c=r.next;c!==t;){if(c.x>=a&&c.x<=v&&c.y>=l&&c.y<=h&&M(x,o,i,f,u,s,c.x,c.y)&&w(c.prev,c,c.next)>=0)return!1;c=c.next}return!0}function v(e,t,n,r){var x=e.prev,i=e,u=e.next;if(w(x,i,u)>=0)return!1;for(var o=x.x,f=i.x,s=u.x,a=x.y,l=i.y,v=u.y,h=o<f?o<s?o:s:f<s?f:s,c=a<l?a<v?a:v:l<v?l:v,p=o>f?o>s?o:s:f>s?f:s,y=a>l?a>v?a:v:l>v?l:v,g=b(h,c,t,n,r),d=b(p,y,t,n,r),Z=e.prevZ,m=e.nextZ;Z&&Z.z>=g&&m&&m.z<=d;){if(Z.x>=h&&Z.x<=p&&Z.y>=c&&Z.y<=y&&Z!==x&&Z!==u&&M(o,a,f,l,s,v,Z.x,Z.y)&&w(Z.prev,Z,Z.next)>=0)return!1;if(Z=Z.prevZ,m.x>=h&&m.x<=p&&m.y>=c&&m.y<=y&&m!==x&&m!==u&&M(o,a,f,l,s,v,m.x,m.y)&&w(m.prev,m,m.next)>=0)return!1;m=m.nextZ}for(;Z&&Z.z>=g;){if(Z.x>=h&&Z.x<=p&&Z.y>=c&&Z.y<=y&&Z!==x&&Z!==u&&M(o,a,f,l,s,v,Z.x,Z.y)&&w(Z.prev,Z,Z.next)>=0)return!1;Z=Z.prevZ}for(;m&&m.z<=d;){if(m.x>=h&&m.x<=p&&m.y>=c&&m.y<=y&&m!==x&&m!==u&&M(o,a,f,l,s,v,m.x,m.y)&&w(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function h(e,t,n){var r=e;do{var x=r.prev,i=r.next.next;!m(x,i)&&A(x,r,r.next,i)&&z(x,i)&&z(i,x)&&(t.push(x.i/n|0),t.push(r.i/n|0),t.push(i.i/n|0),B(r),B(r.next),r=e=i),r=r.next}while(r!==e);return s(r)}function c(e,t,n,r,x,i){var u=e;do{for(var o=u.next.next;o!==u.prev;){if(u.i!==o.i&&Z(u,o)){var f=F(u,o);return u=s(u,u.next),f=s(f,f.next),a(u,t,n,r,x,i,0),void a(f,t,n,r,x,i,0)}o=o.next}u=u.next}while(u!==e)}function p(e,t){return e.x-t.x}function y(e,t){var n=function(e,t){var n,r=t,x=e.x,i=e.y,u=-1/0;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var o=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(o<=x&&o>u&&(u=o,n=r.x<r.next.x?r:r.next,o===x))return n}r=r.next}while(r!==t);if(!n)return null;var f,s=n,a=n.x,l=n.y,v=1/0;r=n;do{x>=r.x&&r.x>=a&&x!==r.x&&M(i<l?x:u,i,a,l,i<l?u:x,i,r.x,r.y)&&(f=Math.abs(i-r.y)/(x-r.x),z(r,e)&&(f<v||f===v&&(r.x>n.x||r.x===n.x&&g(n,r)))&&(n=r,v=f)),r=r.next}while(r!==s);return n}(e,t);if(!n)return t;var r=F(n,e);return s(r,r.next),s(n,n.next)}function g(e,t){return w(e.prev,e,t.prev)<0&&w(t.next,e,e.next)<0}function b(e,t,n,r,x){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*x|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*x|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function d(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function M(e,t,n,r,x,i,u,o){return(x-u)*(t-o)>=(e-u)*(i-o)&&(e-u)*(r-o)>=(n-u)*(t-o)&&(n-u)*(i-o)>=(x-u)*(r-o)}function Z(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&A(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(z(e,t)&&z(t,e)&&function(e,t){var n=e,r=!1,x=(e.x+t.x)/2,i=(e.y+t.y)/2;do{n.y>i!=n.next.y>i&&n.next.y!==n.y&&x<(n.next.x-n.x)*(i-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(w(e.prev,e,t.prev)||w(e,t.prev,t))||m(e,t)&&w(e.prev,e,e.next)>0&&w(t.prev,t,t.next)>0)}function w(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function m(e,t){return e.x===t.x&&e.y===t.y}function A(e,t,n,r){var x=I(w(e,t,n)),i=I(w(e,t,r)),u=I(w(n,r,e)),o=I(w(n,r,t));return x!==i&&u!==o||(!(0!==x||!E(e,n,t))||(!(0!==i||!E(e,r,t))||(!(0!==u||!E(n,e,r))||!(0!==o||!E(n,t,r)))))}function E(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function I(e){return e>0?1:e<0?-1:0}function z(e,t){return w(e.prev,e,e.next)<0?w(e,t,e.next)>=0&&w(e,e.prev,t)>=0:w(e,t,e.prev)<0||w(e,e.next,t)<0}function F(e,t){var n=new _(e.i,e.x,e.y),r=new _(t.i,t.x,t.y),x=e.next,i=t.prev;return e.next=t,t.prev=e,n.next=x,x.prev=n,r.next=n,n.prev=r,i.next=r,r.prev=i,r}function P(e,t,n,r){var x=new _(e,t,n);return r?(x.next=r.next,x.prev=r,r.next.prev=x,r.next=x):(x.prev=x,x.next=x),x}function B(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function _(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function O(e,t,n,r){for(var x=0,i=t,u=n-r;i<n;i+=r)x+=(e[u]-e[i])*(e[i+1]+e[u+1]),u=i;return x}u.exports=o,u.exports.default=o,o.deviation=function(e,t,n,r){var x=t&&t.length,i=x?t[0]*n:e.length,u=Math.abs(O(e,0,i,n));if(x)for(var o=0,f=t.length;o<f;o++){var s=t[o]*n,a=o<f-1?t[o+1]*n:e.length;u-=Math.abs(O(e,s,a,n))}var l=0;for(o=0;o<r.length;o+=3){var v=r[o]*n,h=r[o+1]*n,c=r[o+2]*n;l+=Math.abs((e[v]-e[c])*(e[h+1]-e[v+1])-(e[v]-e[h])*(e[c+1]-e[v+1]))}return 0===u&&0===l?0:Math.abs((l-u)/u)},o.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,x=0;x<e.length;x++){for(var i=0;i<e[x].length;i++)for(var u=0;u<t;u++)n.vertices.push(e[x][i][u]);x>0&&(r+=e[x-1].length,n.holes.push(r))}return n};var N=i(u.exports);const R=[],S={vertexPosition:0,indexPosition:0};function T(e,t,n,r,x){e[t+0]=n,e[t+1]=r,e[t+2]=x}function U(e,t,n,r,x,i){const u=3+x,o=e[t+0],f=e[t+1],s=R;s.length=x;for(let n=0;n<s.length;n++)s[n]=e[t+2+n];let a=i?i.vertexPosition:0,l=i?i.indexPosition:0;const v=a/u;return T(n,a,o,f,0),s.length&&n.set(s,a+3),a+=u,T(n,a,o,f,1),s.length&&n.set(s,a+3),a+=u,T(n,a,o,f,2),s.length&&n.set(s,a+3),a+=u,T(n,a,o,f,3),s.length&&n.set(s,a+3),a+=u,r[l++]=v,r[l++]=v+1,r[l++]=v+3,r[l++]=v+1,r[l++]=v+2,r[l++]=v+3,S.vertexPosition=a,S.indexPosition=l,S}function k(e,t,n,x,i,u,o,f,s,a,l){const v=8+f.length,h=u.length/v,c=[e[t+0],e[t+1]],p=[e[n],e[n+1]],y=r(s,[...c]),g=r(s,[...p]);function b(e,t,n){const r=Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])),x=[(t[0]-e[0])/r,(t[1]-e[1])/r],i=[-x[1],x[0]],u=Math.sqrt((n[0]-e[0])*(n[0]-e[0])+(n[1]-e[1])*(n[1]-e[1])),o=[(n[0]-e[0])/u,(n[1]-e[1])/u],f=0===r||0===u?0:Math.acos((s=o[0]*x[0]+o[1]*x[1],a=-1,l=1,Math.min(Math.max(s,a),l)));var s,a,l;return o[0]*i[0]+o[1]*i[1]>0?f:2*Math.PI-f}let d=-1,M=-1,Z=l;const w=null!==i;if(null!==x){d=b(y,g,r(s,[...[e[x],e[x+1]]])),Math.cos(d)<=.985&&(Z+=Math.tan((d-Math.PI)/2))}if(w){M=b(g,y,r(s,[...[e[i],e[i+1]]])),Math.cos(M)<=.985&&(Z+=Math.tan((Math.PI-M)/2))}function m(e,t){return 0===t?1e4*e:Math.sign(t)*(1e4*e+Math.abs(t))}return u.push(c[0],c[1],p[0],p[1],d,M,a,m(0,l)),u.push(...f),u.push(c[0],c[1],p[0],p[1],d,M,a,m(1,l)),u.push(...f),u.push(c[0],c[1],p[0],p[1],d,M,a,m(2,l)),u.push(...f),u.push(c[0],c[1],p[0],p[1],d,M,a,m(3,l)),u.push(...f),o.push(h,h+1,h+2,h+1,h+3,h+2),{length:a+Math.sqrt((g[0]-y[0])*(g[0]-y[0])+(g[1]-y[1])*(g[1]-y[1])),angle:Z}}function G(e,t,n,r,x){const i=2+x;let u=t;const o=e.slice(u,u+x);u+=x;const f=e[u++];let s=0;const a=new Array(f-1);for(let t=0;t<f;t++)s+=e[u++],t<f-1&&(a[t]=s);const l=e.slice(u,u+2*s),v=N(l,a,2);for(let e=0;e<v.length;e++)r.push(v[e]+n.length/i);for(let e=0;e<l.length;e+=2)n.push(l[e],l[e+1],...o);return u+2*s}const j=self;j.onmessage=r=>{const i=r.data;switch(i.type){case t:{const e=3,t=2,n=i.customAttributesSize,r=t+n,x=new Float32Array(i.renderInstructions),u=x.length/r,o=4*u*(n+e),f=new Uint32Array(6*u),s=new Float32Array(o);let a;for(let e=0;e<x.length;e+=r)a=U(x,e,s,f,n,a);const l=Object.assign({vertexBuffer:s.buffer,indexBuffer:f.buffer,renderInstructions:x.buffer},i);j.postMessage(l,[s.buffer,f.buffer,x.buffer]);break}case n:{const e=[],t=[],n=i.customAttributesSize,r=2,u=new Float32Array(i.renderInstructions);let o=0;const f=[1,0,0,1,0,0];let s,a;for(x(f,i.renderInstructionsTransform);o<u.length;){a=Array.from(u.slice(o,o+n)),o+=n,s=u[o++];const x=o,i=o+(s-1)*r,l=u[x]===u[i]&&u[x+1]===u[i+1];let v=0,h=0;for(let n=0;n<s-1;n++){let c=null;n>0?c=o+(n-1)*r:l&&(c=i-r);let p=null;n<s-2?p=o+(n+2)*r:l&&(p=x+r);const y=k(u,o+n*r,o+(n+1)*r,c,p,e,t,a,f,v,h);v=y.length,h=y.angle}o+=s*r}const l=Uint32Array.from(t),v=Float32Array.from(e),h=Object.assign({vertexBuffer:v.buffer,indexBuffer:l.buffer,renderInstructions:u.buffer},i);j.postMessage(h,[v.buffer,l.buffer,u.buffer]);break}case e:{const e=[],t=[],n=i.customAttributesSize,r=new Float32Array(i.renderInstructions);let x=0;for(;x<r.length;)x=G(r,x,e,t,n);const u=Uint32Array.from(t),o=Float32Array.from(e),f=Object.assign({vertexBuffer:o.buffer,indexBuffer:u.buffer,renderInstructions:r.buffer},i);j.postMessage(f,[o.buffer,u.buffer,r.buffer]);break}}};'
return new Worker("undefined"==typeof Blob?"data:application/javascript;base64,"+Buffer.from(t,"binary").toString("base64"):URL.createObjectURL(new Blob([t],{type:"application/javascript"})))}(),this.worker_.addEventListener("message",(t=>{const e=t.data
if(e.type===ae){const i=e.projectionTransform
this.verticesBuffer_.fromArrayBuffer(e.vertexBuffer),this.helper.flushBufferData(this.verticesBuffer_),this.indicesBuffer_.fromArrayBuffer(e.indexBuffer),this.helper.flushBufferData(this.indicesBuffer_),this.renderTransform_=i,(0,z.T9)(this.invertRenderTransform_,this.renderTransform_),this.renderInstructions_=new Float32Array(t.data.renderInstructions),e.id===this.lastSentId&&(this.ready=!0),this.getLayer().changed()}})),this.featureCache_={},this.featureCount_=0
const o=this.getLayer().getSource()
this.sourceListenKeys_=[(0,he.KT)(o,Lt.A.ADDFEATURE,this.handleSourceFeatureAdded_,this),(0,he.KT)(o,Lt.A.CHANGEFEATURE,this.handleSourceFeatureChanged_,this),(0,he.KT)(o,Lt.A.REMOVEFEATURE,this.handleSourceFeatureDelete_,this),(0,he.KT)(o,Lt.A.CLEAR,this.handleSourceFeatureClear_,this)],o.forEachFeature((t=>{this.featureCache_[(0,M.v6)(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()},this.featureCount_++}))}afterHelperCreated(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.hitDetectionEnabled_&&(this.hitRenderTarget_=new se(this.helper))}handleSourceFeatureAdded_(t){const e=t.feature
this.featureCache_[(0,M.v6)(e)]={feature:e,properties:e.getProperties(),geometry:e.getGeometry()},this.featureCount_++}handleSourceFeatureChanged_(t){const e=t.feature
this.featureCache_[(0,M.v6)(e)]={feature:e,properties:e.getProperties(),geometry:e.getGeometry()}}handleSourceFeatureDelete_(t){const e=t.feature
delete this.featureCache_[(0,M.v6)(e)],this.featureCount_--}handleSourceFeatureClear_(){this.featureCache_={},this.featureCount_=0}renderFrame(t){const e=this.helper.getGL()
this.preRender(e,t)
const[i,n,r]=function(t,e){const i=t.viewState.projection,n=e.getSource().getWrapX()&&i.canWrapX(),r=i.getExtent(),o=t.extent,s=n?(0,w.RG)(r):null,a=n?Math.ceil((o[2]-r[2])/s)+1:1
return[n?Math.floor((o[0]-r[0])/s):0,a,s]}(t,this.getLayer())
return this.renderWorlds(t,!1,i,n,r),this.helper.finalizeDraw(t,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent),this.hitDetectionEnabled_&&(this.renderWorlds(t,!0,i,n,r),this.hitRenderTarget_.clearCachedData()),this.postRender(e,t),this.helper.getCanvas()}prepareFrameInternal(t){const e=this.getLayer(),i=e.getSource(),n=t.viewState,r=!t.viewHints[ot.A.ANIMATING]&&!t.viewHints[ot.A.INTERACTING],o=!(0,w.aI)(this.previousExtent_,t.extent),s=this.sourceRevision_<i.getRevision()
if(s&&(this.sourceRevision_=i.getRevision()),r&&(o||s)){const r=n.projection,o=n.resolution,s=e instanceof d.A?e.getRenderBuffer():0,a=(0,w.r)(t.extent,s*o)
i.loadFeatures(a,o,r),this.rebuildBuffers_(t),this.previousExtent_=t.extent.slice()}return this.helper.useProgram(this.program_,t),this.helper.prepareDraw(t),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes),!0}rebuildBuffers_(t){const e=(0,z.vt)()
this.helper.makeProjectionTransform(t,e)
const i=(0,ht.Tf)(),n=(this.hitDetectionEnabled_?7:2)+this.customAttributes.length,r=n*this.featureCount_
let o,s
this.renderInstructions_&&this.renderInstructions_.length===r||(this.renderInstructions_=new Float32Array(r))
const a=[],l=[]
let h=-1
for(const c in this.featureCache_)if(o=this.featureCache_[c],s=o.geometry,s&&"Point"===s.getType()){if(i){const e=(0,ht.Ad)(s.getFlatCoordinates(),t.viewState.projection)
a[0]=e[0],a[1]=e[1]}else a[0]=s.getFlatCoordinates()[0],a[1]=s.getFlatCoordinates()[1]
if((0,z.Bb)(e,a),this.renderInstructions_[++h]=a[0],this.renderInstructions_[++h]=a[1],this.hitDetectionEnabled_){const t=le(h+5,l)
this.renderInstructions_[++h]=t[0],this.renderInstructions_[++h]=t[1],this.renderInstructions_[++h]=t[2],this.renderInstructions_[++h]=t[3],this.renderInstructions_[++h]=Number(c)}for(let t=0;t<this.customAttributes.length;t++){const e=this.customAttributes[t].callback(o.feature,o.properties)
this.renderInstructions_[++h]=e}}const u={id:++this.lastSentId,type:ae,renderInstructions:this.renderInstructions_.buffer,customAttributesSize:n-2}
u.projectionTransform=e,this.ready=!1,this.worker_.postMessage(u,[this.renderInstructions_.buffer]),this.renderInstructions_=null}forEachFeatureAtCoordinate(t,e,i,n,r){if((0,zt.v)(this.hitDetectionEnabled_,"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has been disabled using the `disableHitDetection: true` option."),!this.renderInstructions_||!this.hitDetectionEnabled_)return
const o=(0,z.Bb)(e.coordinateToPixelTransform,t.slice()),s=this.hitRenderTarget_.readPixel(o[0]/2,o[1]/2),a=function(t){let e=0
const i=256,n=255
return e+=Math.round(t[0]*i*i*i*n),e+=Math.round(t[1]*i*i*n),e+=Math.round(t[2]*i*n),e+=Math.round(t[3]*n),e}([s[0]/255,s[1]/255,s[2]/255,s[3]/255]),l=this.renderInstructions_[a],h=Math.floor(l).toString(),u=this.getLayer().getSource().getFeatureByUid(h)
return u?n(u,this.getLayer(),null):void 0}renderWorlds(t,e,i,n,r){let o=i
this.helper.useProgram(this.program_,t),e&&(this.hitRenderTarget_.setSize([Math.floor(t.size[0]/2),Math.floor(t.size[1]/2)]),this.helper.prepareDrawToRenderTarget(t,this.hitRenderTarget_,!0)),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes)
do{this.helper.makeProjectionTransform(t,this.currentTransform_),(0,z.Tl)(this.currentTransform_,o*r,0),(0,z.lw)(this.currentTransform_,this.invertRenderTransform_),this.helper.applyUniforms(t),this.helper.applyHitDetectionUniform(e)
const i=this.indicesBuffer_.getSize()
this.helper.drawElements(0,i)}while(++o<n)}disposeInternal(){this.worker_.terminate(),this.layer_=null,this.sourceListenKeys_.forEach((function(t){(0,he.JH)(t)})),this.sourceListenKeys_=null,super.disposeInternal()}renderDeclutter(){}},ce=class{constructor(t,e){this.name=t,this.data=e,this.texture_=null}getTexture(t){if(!this.texture_){const e=t.createTexture()
t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.data.length/4,1,0,t.RGBA,t.UNSIGNED_BYTE,this.data),this.texture_=e}return this.texture_}}
var de=i(8548),fe=i(5733),pe=i(7893),ge=i(699),_e=i(669),me=i(8638),ye=i(519)
class ve extends _e.A{constructor(t){super(),this.tile,this.handleTileChange_=this.handleTileChange_.bind(this),this.gutter_=t.gutter||0,this.helper_=t.helper,this.loaded=!1,this.ready=!1}setTile(t){if(t!==this.tile)if(this.tile&&this.tile.removeEventListener(me.A.CHANGE,this.handleTileChange_),this.tile=t,this.loaded=t.getState()===ge.A.LOADED,this.loaded)this.uploadTile()
else{if(t instanceof ye.A){const e=t.getImage()
e instanceof Image&&!e.crossOrigin&&(e.crossOrigin="anonymous")}t.addEventListener(me.A.CHANGE,this.handleTileChange_)}}uploadTile(){(0,M.b0)()}setReady(){this.ready=!0,this.dispatchEvent(me.A.CHANGE)}handleTileChange_(){this.tile.getState()===ge.A.LOADED&&(this.loaded=!0,this.uploadTile())}disposeInternal(){this.tile.removeEventListener(me.A.CHANGE,this.handleTileChange_)}}const xe=ve
var be=i(2272),we=i(1673)
function Ee(t,e,i){const n=i?t.LINEAR:t.NEAREST
t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,n)}function Se(t,e,i,n,r,o){const s=t.getGL()
let a,l
i instanceof Float32Array?(a=s.FLOAT,t.getExtension("OES_texture_float"),l=null!==t.getExtension("OES_texture_float_linear")):(a=s.UNSIGNED_BYTE,l=!0),Ee(s,e,o&&l)
const h=i.byteLength/n[1]
let u,c=1
switch(h%8==0?c=8:h%4==0?c=4:h%2==0&&(c=2),r){case 1:u=s.LUMINANCE
break
case 2:u=s.LUMINANCE_ALPHA
break
case 3:u=s.RGB
break
case 4:u=s.RGBA
break
default:throw new Error(`Unsupported number of bands: ${r}`)}const d=s.getParameter(s.UNPACK_ALIGNMENT)
s.pixelStorei(s.UNPACK_ALIGNMENT,c),s.texImage2D(s.TEXTURE_2D,0,u,n[0],n[1],0,u,a,i),s.pixelStorei(s.UNPACK_ALIGNMENT,d)}let Ce=null
const Pe=class extends xe{constructor(t){super(t),this.textures=[],this.renderSize_=(0,we.xq)(t.grid.getTileSize(t.tile.tileCoord[0])),this.bandCount=NaN
const e=new Gt(Dt,35044)
e.fromArray([0,1,1,1,1,0,0,0]),this.helper_.flushBufferData(e),this.coords=e,this.setTile(t.tile)}uploadTile(){const t=this.helper_,e=t.getGL(),i=this.tile
let n
this.textures.length=0,n=i instanceof ye.A||i instanceof pe.A?i.getImage():i.getData()
const r=(0,be.xo)(n)
if(r){const t=e.createTexture()
return this.textures.push(t),this.bandCount=4,function(t,e,i,n){Ee(t,e,n),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,i)}(e,t,r,i.interpolate),void this.setReady()}n=(0,be.bL)(n)
const o=i.getSize(),s=[o[0]+2*this.gutter_,o[1]+2*this.gutter_],a=n instanceof Float32Array,l=s[0]*s[1],h=a?Float32Array:Uint8Array,u=h.BYTES_PER_ELEMENT,c=n.byteLength/s[1]
this.bandCount=Math.floor(c/u/s[0])
const d=Math.ceil(this.bandCount/4)
if(1===d){const r=e.createTexture()
return this.textures.push(r),Se(t,r,n,s,this.bandCount,i.interpolate),void this.setReady()}const f=new Array(d)
for(let m=0;m<d;++m){const t=e.createTexture()
this.textures.push(t)
const i=m<d-1?4:(this.bandCount-1)%4+1
f[m]=new h(l*i)}let p=0,g=0
const _=s[0]*this.bandCount
for(let m=0;m<s[1];++m){for(let t=0;t<_;++t){const e=n[g+t],i=Math.floor(p/this.bandCount),r=t%this.bandCount,o=f[Math.floor(r/4)]
o[i*(o.length/l)+r%4]=e,++p}g+=c/u}for(let m=0;m<d;++m){const e=this.textures[m],n=f[m]
Se(t,e,n,s,n.length/l,i.interpolate)}this.setReady()}disposeInternal(){const t=this.helper_.getGL()
this.helper_.deleteBuffer(this.coords)
for(let e=0;e<this.textures.length;++e)t.deleteTexture(this.textures[e])
this.tile.removeEventListener(me.A.CHANGE,this.handleTileChange_)}getImagePixelData_(t,e,i){const n=this.gutter_,r=this.renderSize_[0],o=this.renderSize_[1]
Ce||(Ce=(0,J.Y)(1,1,void 0,{willReadFrequently:!0})),Ce.clearRect(0,0,1,1)
const s=t.width-2*n,a=t.height-2*n,l=n+Math.floor(s*(e/r)),h=n+Math.floor(a*(i/o))
let u
try{Ce.drawImage(t,l,h,1,1,0,0,1,1),u=Ce.getImageData(0,0,1,1).data}catch(t){return Ce=null,null}return u}getArrayPixelData_(t,e,i,n){const r=this.gutter_,o=this.renderSize_[0],s=this.renderSize_[1],a=e[0],l=e[1],h=a+2*r,u=l+2*r,c=r+Math.floor(a*(i/o)),d=r+Math.floor(l*(n/s))
if(t instanceof DataView){const e=t.byteLength/(h*u),i=e*(d*h+c),n=t.buffer.slice(i,i+e)
return new DataView(n)}const f=this.bandCount*(d*h+c)
return t.slice(f,f+this.bandCount)}getPixelData(t,e){if(!this.loaded)return null
if(this.tile instanceof be.Ay){const i=this.tile.getData(),n=(0,be.bL)(i)
if(n){const i=this.tile.getSize()
return this.getArrayPixelData_(n,i,t,e)}return this.getImagePixelData_((0,be.xo)(i),t,e)}return this.getImagePixelData_(this.tile.getImage(),t,e)}}
var Te=i(6838),Ie=i(5959),Me=i(2695)
const Ae={}
function Re(t){return 1/(t+2)}function Le(t,e){return t.tileIds.has((0,M.v6)(e))}function Oe(t,e,i){const n=t.representationsByZ
i in n||(n[i]=new Set),n[i].add(e),t.tileIds.add((0,M.v6)(e.tile))}function De(t,e){const i=t.layerStatesArray[t.layerIndex]
i.extent&&(e=(0,w._N)(e,(0,ht.SD)(i.extent,t.viewState.projection)))
const n=i.layer.getRenderSource()
if(!n.getWrapX()){const i=n.getTileGridForProjection(t.viewState.projection).getExtent()
i&&(e=(0,w._N)(e,i))}return e}function Ne(t,e){return`${t.getKey()},${(0,Me.i7)(e)}`}const Fe=class extends re{constructor(t,e){super(t,{uniforms:e.uniforms,postProcesses:e.postProcesses}),this.renderComplete=!1,this.tileTransform_=(0,z.vt)(),this.tempMat4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.tempTileRange_=new Ie.A(0,0,0,0),this.tempTileCoord_=(0,Me.N)(0,0,0),this.tempSize_=[0,0]
const i=void 0!==e.cacheSize?e.cacheSize:512
this.tileRepresentationCache=new Te.A(i),this.frameState=null,this.projection_=void 0}reset(t){super.reset({uniforms:t.uniforms})}isDrawableTile_(t){const e=this.getLayer(),i=t.getState(),n=e.getUseInterimTilesOnError()
return i==ge.A.LOADED||i==ge.A.EMPTY||i==ge.A.ERROR&&!n}prepareFrameInternal(t){this.projection_?t.viewState.projection!==this.projection_&&(this.clearCache(),this.projection_=t.viewState.projection):this.projection_=t.viewState.projection
const e=this.getLayer().getRenderSource()
return!!e&&!(0,w.Im)(De(t,t.extent))&&"ready"===e.getState()}createTileRepresentation(t){return(0,M.b0)()}enqueueTiles(t,e,i,n,r){const o=t.viewState,s=this.getLayer(),a=s.getRenderSource(),l=a.getTileGridForProjection(o.projection),h=a.getGutterForProjection(o.projection),u=(0,M.v6)(a)
u in t.wantedTiles||(t.wantedTiles[u]={})
const c=t.wantedTiles[u],d=this.tileRepresentationCache,f=s.getMapInternal(),p=Math.max(i-r,l.getMinZoom(),l.getZForResolution(Math.min(s.getMaxResolution(),f?f.getView().getResolutionForZoom(Math.max(s.getMinZoom(),0)):l.getResolution(0)),a.zDirection))
for(let g=i;g>=p;--g){const i=l.getTileRangeForExtentAndZ(e,g,this.tempTileRange_),r=l.getResolution(g)
for(let e=i.minX;e<=i.maxX;++e)for(let s=i.minY;s<=i.maxY;++s){const i=(0,Me.N)(g,e,s,this.tempTileCoord_),f=Ne(a,i)
let p,_
if(d.containsKey(f)&&(p=d.get(f),_=p.tile),p&&p.tile.key===a.getKey()||(_=a.getTile(g,e,s,t.pixelRatio,o.projection)),Le(n,_))continue
if(p)if(this.isDrawableTile_(_))p.setTile(_)
else{const t=_.getInterimTile()
p.setTile(t)}else p=this.createTileRepresentation({tile:_,grid:l,helper:this.helper,gutter:h}),d.set(f,p)
Oe(n,p,g)
const m=_.getKey()
c[m]=!0,_.getState()===ge.A.IDLE&&(t.tileQueue.isKeyQueued(m)||t.tileQueue.enqueue([_,u,l.getTileCoordCenter(i),r]))}}}beforeTilesRender(t,e){this.helper.prepareDraw(this.frameState,!e,!0)}beforeTilesMaskRender(t){return!1}renderTile(t,e,i,n,r,o,s,a,l,h,u){}renderTileMask(t,e,i,n){}drawTile_(t,e,i,n,r,o,s){if(!e.ready)return
const a=e.tile.tileCoord,l=(0,Me.i7)(a),h=l in o?o[l]:1,u=s.getResolution(i),c=(0,we.xq)(s.getTileSize(i),this.tempSize_),d=s.getOrigin(i),f=s.getTileCoordExtent(a),p=h<1?-1:Re(i)
h<1&&(t.animate=!0)
const g=t.viewState,_=g.center[0],m=g.center[1],y=c[0]+2*n,v=c[1]+2*n,x=y/v,b=(_-d[0])/(c[0]*u),w=(d[1]-m)/(c[1]*u),E=g.resolution/u,S=a[1],C=a[2];(0,z.cL)(this.tileTransform_),(0,z.hs)(this.tileTransform_,2/(t.size[0]*E/y),-2/(t.size[1]*E/y)),(0,z.e$)(this.tileTransform_,g.rotation),(0,z.hs)(this.tileTransform_,1,1/x),(0,z.Tl)(this.tileTransform_,(c[0]*(S-b)-n)/y,(c[1]*(C-w)-n)/v),this.renderTile(e,this.tileTransform_,t,r,u,c,d,f,p,n,h)}renderFrame(t){this.frameState=t,this.renderComplete=!0
const e=this.helper.getGL()
this.preRender(e,t)
const i=t.viewState,n=this.getLayer(),r=n.getRenderSource(),o=r.getTileGridForProjection(i.projection),s=r.getGutterForProjection(i.projection),a=De(t,t.extent),l=o.getZForResolution(i.resolution,r.zDirection),h={tileIds:new Set,representationsByZ:{}},u=n.getPreload()
if(t.nextExtent){const e=o.getZForResolution(i.nextResolution,r.zDirection),n=De(t,t.nextExtent)
this.enqueueTiles(t,n,e,h,u)}this.enqueueTiles(t,a,l,h,0),u>0&&setTimeout((()=>{this.enqueueTiles(t,a,l-1,h,u-1)}),0)
const c={},d=(0,M.v6)(this),f=t.time
let p=!1
for(const v of h.representationsByZ[l]){const t=v.tile
if((t instanceof pe.A||t instanceof fe.A)&&t.getState()===ge.A.EMPTY)continue
const e=t.tileCoord
if(v.ready){const i=t.getAlpha(d,f)
if(1===i){t.endTransition(d)
continue}p=!0,c[(0,Me.i7)(e)]=i}if(this.renderComplete=!1,this.findAltTiles_(o,e,l+1,h))continue
const i=o.getMinZoom()
for(let n=l-1;n>=i&&!this.findAltTiles_(o,e,n,h);--n);}const g=h.representationsByZ,_=Object.keys(g).map(Number).sort(S.rG)
if(this.beforeTilesMaskRender(t))for(let v=0,x=_.length;v<x;++v){const t=_[v]
for(const e of g[t]){const i=e.tile.tileCoord
if((0,Me.i7)(i)in c)continue
const n=o.getTileCoordExtent(i)
this.renderTileMask(e,t,n,Re(t))}}this.beforeTilesRender(t,p)
for(let v=0,x=_.length;v<x;++v){const e=_[v]
for(const i of g[e]){const n=i.tile.tileCoord;(0,Me.i7)(n)in c||this.drawTile_(t,i,e,s,a,c,o)}}for(const v of g[l]){const e=v.tile.tileCoord;(0,Me.i7)(e)in c&&this.drawTile_(t,v,l,s,a,c,o)}this.helper.finalizeDraw(t,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent)
const m=this.helper.getCanvas(),y=this.tileRepresentationCache
for(;y.canExpireCache();)y.pop().dispose()
return t.postRenderFunctions.push((function(t,e){r.updateCacheSize(.1,e.viewState.projection),r.expireCache(e.viewState.projection,Ae)})),this.postRender(e,t),m}findAltTiles_(t,e,i,n){const r=t.getTileRangeForTileCoordAndZ(e,i,this.tempTileRange_)
if(!r)return!1
let o=!0
const s=this.tileRepresentationCache,a=this.getLayer().getRenderSource()
for(let l=r.minX;l<=r.maxX;++l)for(let t=r.minY;t<=r.maxY;++t){const e=Ne(a,[i,l,t])
let r=!1
if(s.containsKey(e)){const t=s.get(e)
t.ready&&!Le(n,t.tile)&&(Oe(n,t,i),r=!0)}r||(o=!1)}return o}clearCache(){const t=this.tileRepresentationCache
t.forEach((t=>t.dispose())),t.clear()}removeHelper(){this.helper&&this.clearCache(),super.removeHelper()}disposeInternal(){super.disposeInternal(),delete this.frameState}},ke="u_tileTransform",ze="u_transitionAlpha",je="u_depth",Ge="u_renderExtent",Be="u_resolution",Ue="u_zoom",qe="u_tileTextures",Ve="u_texturePixelWidth",Ze="u_texturePixelHeight",We="u_textureResolution",Ye="u_textureOriginX",Xe="u_textureOriginY",He="a_textureCoord",$e=[{name:He,size:2,type:$t}],Ke=class extends Fe{constructor(t,e){super(t,e),this.program_,this.vertexShader_=e.vertexShader,this.fragmentShader_=e.fragmentShader,this.indices_=new Gt(Nt,35044),this.indices_.fromArray([0,1,3,1,2,3]),this.paletteTextures_=e.paletteTextures||[]}reset(t){super.reset(t),this.vertexShader_=t.vertexShader,this.fragmentShader_=t.fragmentShader,this.paletteTextures_=t.paletteTextures||[],this.helper&&(this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_))}afterHelperCreated(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.helper.flushBufferData(this.indices_)}createTileRepresentation(t){return new Pe(t)}beforeTilesRender(t,e){super.beforeTilesRender(t,e),this.helper.useProgram(this.program_,t)}renderTile(t,e,i,n,r,o,s,a,l,h,u){const c=this.helper.getGL()
this.helper.bindBuffer(t.coords),this.helper.bindBuffer(this.indices_),this.helper.enableAttributes($e)
let d=0
for(;d<t.textures.length;){const e=`${qe}[${d}]`
this.helper.bindTexture(t.textures[d],d,e),++d}for(let x=0;x<this.paletteTextures_.length;++x){const t=this.paletteTextures_[x],e=t.getTexture(c)
this.helper.bindTexture(e,d,t.name),++d}const f=i.viewState,p=o[0]+2*h,g=o[1]+2*h,_=t.tile.tileCoord,m=_[1],y=_[2]
this.helper.setUniformMatrixValue(ke,Xt(this.tempMat4,e)),this.helper.setUniformFloatValue(ze,u),this.helper.setUniformFloatValue(je,l)
let v=n
h>0&&(v=a,(0,w._N)(v,n,v)),this.helper.setUniformFloatVec4(Ge,v),this.helper.setUniformFloatValue(Be,f.resolution),this.helper.setUniformFloatValue(Ue,f.zoom),this.helper.setUniformFloatValue(Ve,p),this.helper.setUniformFloatValue(Ze,g),this.helper.setUniformFloatValue(We,r),this.helper.setUniformFloatValue(Ye,s[0]+m*o[0]*r-h*r),this.helper.setUniformFloatValue(Xe,s[1]-y*o[1]*r+h*r),this.helper.drawElements(0,this.indices_.getSize())}getData(t){if(!this.helper.getGL())return null
const e=this.frameState
if(!e)return null
const i=this.getLayer(),n=(0,z.Bb)(e.pixelToCoordinateTransform,t.slice()),r=e.viewState,o=i.getExtent()
if(o&&!(0,w.Ym)((0,ht.SD)(o,r.projection),n))return null
const s=i.getSources((0,w.Tr)([n]),r.resolution)
let a,l,h
for(a=s.length-1;a>=0;--a)if(l=s[a],"ready"===l.getState()){if(h=l.getTileGridForProjection(r.projection),l.getWrapX())break
const t=h.getExtent()
if(!t||(0,w.Ym)(t,n))break}if(a<0)return null
const u=this.tileRepresentationCache
for(let c=h.getZForResolution(r.resolution);c>=h.getMinZoom();--c){const t=h.getTileCoordForCoordAndZ(n,c),e=Ne(l,t)
if(!u.containsKey(e))continue
const i=u.get(e),r=i.tile
if((r instanceof pe.A||r instanceof fe.A)&&r.getState()===ge.A.EMPTY)return null
if(!i.loaded)continue
const o=h.getOrigin(c),s=(0,we.xq)(h.getTileSize(c)),a=h.getResolution(c),d=(n[0]-o[0])/a-t[1]*s[0],f=(o[1]-n[1])/a-t[2]*s[1]
return i.getPixelData(d,f)}return null}disposeInternal(){const t=this.helper
t&&(t.getGL().deleteProgram(this.program_),delete this.program_,t.deleteBuffer(this.indices_)),super.disposeInternal(),delete this.indices_}}
var Je=i(659)
function Qe(t){const e=t.toString()
return e.includes(".")?e:e+".0"}function ti(t){if(t.length<2||t.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.")
return`vec${t.length}(${t.map(Qe).join(", ")})`}function ei(t){const e=(0,Je._j)(t),i=e.length>3?e[3]:1
return ti([e[0]/255*i,e[1]/255*i,e[2]/255*i,i])}const ii={}
let ni=0
function ri(t){return t in ii||(ii[t]=ni++),ii[t]}function oi(t){return Qe(ri(t))}function si(t){return"u_var_"+t}const ai="getBandValue",li="u_paletteTextures"
function hi(t){return(e,i,n)=>{const r=i.args.length,o=new Array(r)
for(let t=0;t<r;++t)o[t]=ci(i.args[t],n,e)
return t(o,e)}}const ui={[de.ZD.Get]:(t,e)=>{const i=e.args[0].value
return i in t.properties||(t.properties[i]={name:i,type:e.type}),(t.inFragmentShader?"v_prop_":"a_prop_")+i},[de.ZD.GeometryType]:(t,e,i)=>{const n="geometryType"
return n in t.properties||(t.properties[n]={name:n,type:de.cT,evaluator:t=>(0,de.Ye)(t.getGeometry())}),(t.inFragmentShader?"v_prop_":"a_prop_")+n},[de.ZD.Var]:(t,e)=>{const i=e.args[0].value
return i in t.variables||(t.variables[i]={name:i,type:e.type}),si(i)},[de.ZD.Resolution]:()=>"u_resolution",[de.ZD.Zoom]:()=>"u_zoom",[de.ZD.Time]:()=>"u_time",[de.ZD.Any]:hi((t=>`(${t.join(" || ")})`)),[de.ZD.All]:hi((t=>`(${t.join(" && ")})`)),[de.ZD.Not]:hi((([t])=>`(!${t})`)),[de.ZD.Equal]:hi((([t,e])=>`(${t} == ${e})`)),[de.ZD.NotEqual]:hi((([t,e])=>`(${t} != ${e})`)),[de.ZD.GreaterThan]:hi((([t,e])=>`(${t} > ${e})`)),[de.ZD.GreaterThanOrEqualTo]:hi((([t,e])=>`(${t} >= ${e})`)),[de.ZD.LessThan]:hi((([t,e])=>`(${t} < ${e})`)),[de.ZD.LessThanOrEqualTo]:hi((([t,e])=>`(${t} <= ${e})`)),[de.ZD.Multiply]:hi((t=>`(${t.join(" * ")})`)),[de.ZD.Divide]:hi((([t,e])=>`(${t} / ${e})`)),[de.ZD.Add]:hi((t=>`(${t.join(" + ")})`)),[de.ZD.Subtract]:hi((([t,e])=>`(${t} - ${e})`)),[de.ZD.Clamp]:hi((([t,e,i])=>`clamp(${t}, ${e}, ${i})`)),[de.ZD.Mod]:hi((([t,e])=>`mod(${t}, ${e})`)),[de.ZD.Pow]:hi((([t,e])=>`pow(${t}, ${e})`)),[de.ZD.Abs]:hi((([t])=>`abs(${t})`)),[de.ZD.Floor]:hi((([t])=>`floor(${t})`)),[de.ZD.Ceil]:hi((([t])=>`ceil(${t})`)),[de.ZD.Round]:hi((([t])=>`floor(${t} + 0.5)`)),[de.ZD.Sin]:hi((([t])=>`sin(${t})`)),[de.ZD.Cos]:hi((([t])=>`cos(${t})`)),[de.ZD.Atan]:hi((([t,e])=>void 0!==e?`atan(${t}, ${e})`:`atan(${t})`)),[de.ZD.Sqrt]:hi((([t])=>`sqrt(${t})`)),[de.ZD.Match]:hi((t=>{const e=t[0],i=t[t.length-1]
let n=null
for(let r=t.length-3;r>=1;r-=2)n=`(${e} == ${t[r]} ? ${t[r+1]} : ${n||i})`
return n})),[de.ZD.Between]:hi((([t,e,i])=>`(${t} >= ${e} && ${t} <= ${i})`)),[de.ZD.Interpolate]:hi((([t,e,...i])=>{let n=""
for(let r=0;r<i.length-2;r+=2){const o=i[r],s=n||i[r+1],a=i[r+2],l=i[r+3]
let h
h=t===Qe(1)?`(${e} - ${o}) / (${a} - ${o})`:`(pow(${t}, (${e} - ${o})) - 1.0) / (pow(${t}, (${a} - ${o})) - 1.0)`,n=`mix(${s}, ${l}, clamp(${h}, 0.0, 1.0))`}return n})),[de.ZD.Case]:hi((t=>{const e=t[t.length-1]
let i=null
for(let n=t.length-3;n>=0;n-=2)i=`(${t[n]} ? ${t[n+1]} : ${i||e})`
return i})),[de.ZD.In]:hi((([t,...e],i)=>{const n=function(t,e){return`operator_in_${Object.keys(e.functions).length}`}(0,i),r=[]
for(let o=0;o<e.length;o+=1)r.push(`  if (inputValue == ${e[o]}) { return true; }`)
return i.functions[n]=`bool ${n}(float inputValue) {\n${r.join("\n")}\n  return false;\n}`,`${n}(${t})`})),[de.ZD.Array]:hi((t=>`vec${t.length}(${t.join(", ")})`)),[de.ZD.Color]:hi((t=>{if(1===t.length)return`vec4(vec3(${t[0]} / 255.0), 1.0)`
if(2===t.length)return`(${t[1]} * vec4(vec3(${t[0]} / 255.0), 1.0))`
const e=t.slice(0,3).map((t=>`${t} / 255.0`))
return 3===t.length?`vec4(${e.join(", ")}, 1.0)`:`(${t[3]} * vec4(${e.join(", ")}, 1.0))`})),[de.ZD.Band]:hi((([t,e,i],n)=>{if(!(ai in n.functions)){let t=""
const e=n.bandCount||1
for(let i=0;i<e;i++){const n=Math.floor(i/4)
let r=i%4
i===e-1&&1===r&&(r=3),t+=`  if (band == ${i+1}.0) {\n    return texture2D(${qe}[${n}], v_textureCoord + vec2(dx, dy))[${r}];\n  }\n`}n.functions[ai]=`float getBandValue(float band, float xOffset, float yOffset) {\n  float dx = xOffset / ${Ve};\n  float dy = yOffset / ${Ze};\n${t}\n}`}return`${ai}(${t}, ${e??"0.0"}, ${i??"0.0"})`})),[de.ZD.Palette]:(t,e)=>{const[i,...n]=e.args,r=n.length,o=new Uint8Array(4*r)
for(let l=0;l<n.length;l++){const t=n[l].value,e=(0,Je._j)(t),i=4*l
o[i]=e[0],o[i+1]=e[1],o[i+2]=e[2],o[i+3]=255*e[3]}t.paletteTextures||(t.paletteTextures=[])
const s=`${li}[${t.paletteTextures.length}]`,a=new ce(s,o)
return t.paletteTextures.push(a),`texture2D(${s}, vec2((${ci(i,de.wl,t)} + 0.5) / ${r}.0, 0.5))`}}
function ci(t,e,i){if(t instanceof de.DG){const n=ui[t.operator]
if(void 0===n)throw new Error(`No compiler defined for this operator: ${JSON.stringify(t.operator)}`)
return n(i,t,e)}if((t.type&de.wl)>0)return Qe(t.value)
if((t.type&de.T8)>0)return t.value.toString()
if((t.type&de.cT)>0)return oi(t.value.toString())
if((t.type&de.mE)>0)return ei(t.value)
if((t.type&de.Fq)>0)return ti(t.value)
throw new Error(`Unexpected expression ${t.value} (expected type ${(0,de.go)(e)})`)}const di="#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_screenToWorldMatrix;\nuniform vec2 u_viewportSizePx;\nuniform float u_pixelRatio;\nuniform float u_globalAlpha;\nuniform float u_time;\nuniform float u_zoom;\nuniform float u_resolution;\nuniform float u_rotation;\nuniform vec4 u_renderExtent;\nuniform vec2 u_patternOrigin;\nuniform float u_depth;\nuniform mediump int u_hitDetection;\n\nconst float PI = 3.141592653589793238;\nconst float TWO_PI = 2.0 * PI;\n\n// this used to produce an alpha-premultiplied color from a texture\nvec4 samplePremultiplied(sampler2D sampler, vec2 texCoord) {\n  vec4 color = texture2D(sampler, texCoord);\n  return vec4(color.rgb * color.a, color.a);\n}\n"
class fi{constructor(){this.uniforms_=[],this.attributes_=[],this.varyings_=[],this.hasSymbol_=!1,this.symbolSizeExpression_=`vec2(${Qe(5)} + ${Qe(.625)})`,this.symbolRotationExpression_="0.0",this.symbolOffsetExpression_="vec2(0.0)",this.symbolColorExpression_=ei("rgba(255,255,255,0.4)"),this.texCoordExpression_="vec4(0.0, 0.0, 1.0, 1.0)",this.discardExpression_="false",this.symbolRotateWithView_=!1,this.hasStroke_=!1,this.strokeWidthExpression_=Qe(1.25),this.strokeColorExpression_=ei("#3399CC"),this.strokeOffsetExpression_="0.",this.strokeCapExpression_=oi("round"),this.strokeJoinExpression_=oi("round"),this.strokeMiterLimitExpression_="10.",this.strokeDistanceFieldExpression_="-1000.",this.hasFill_=!1,this.fillColorExpression_=ei("rgba(255,255,255,0.4)"),this.vertexShaderFunctions_=[],this.fragmentShaderFunctions_=[]}addUniform(t){return this.uniforms_.push(t),this}addAttribute(t){return this.attributes_.push(t),this}addVarying(t,e,i){return this.varyings_.push({name:t,type:e,expression:i}),this}setSymbolSizeExpression(t){return this.hasSymbol_=!0,this.symbolSizeExpression_=t,this}getSymbolSizeExpression(){return this.symbolSizeExpression_}setSymbolRotationExpression(t){return this.symbolRotationExpression_=t,this}setSymbolOffsetExpression(t){return this.symbolOffsetExpression_=t,this}getSymbolOffsetExpression(){return this.symbolOffsetExpression_}setSymbolColorExpression(t){return this.hasSymbol_=!0,this.symbolColorExpression_=t,this}getSymbolColorExpression(){return this.symbolColorExpression_}setTextureCoordinateExpression(t){return this.texCoordExpression_=t,this}setFragmentDiscardExpression(t){return this.discardExpression_=t,this}getFragmentDiscardExpression(){return this.discardExpression_}setSymbolRotateWithView(t){return this.symbolRotateWithView_=t,this}setStrokeWidthExpression(t){return this.hasStroke_=!0,this.strokeWidthExpression_=t,this}setStrokeColorExpression(t){return this.hasStroke_=!0,this.strokeColorExpression_=t,this}getStrokeColorExpression(){return this.strokeColorExpression_}setStrokeOffsetExpression(t){return this.strokeOffsetExpression_=t,this}setStrokeCapExpression(t){return this.strokeCapExpression_=t,this}setStrokeJoinExpression(t){return this.strokeJoinExpression_=t,this}setStrokeMiterLimitExpression(t){return this.strokeMiterLimitExpression_=t,this}setStrokeDistanceFieldExpression(t){return this.strokeDistanceFieldExpression_=t,this}setFillColorExpression(t){return this.hasFill_=!0,this.fillColorExpression_=t,this}getFillColorExpression(){return this.fillColorExpression_}addVertexShaderFunction(t){this.vertexShaderFunctions_.includes(t)||this.vertexShaderFunctions_.push(t)}addFragmentShaderFunction(t){this.fragmentShaderFunctions_.includes(t)||this.fragmentShaderFunctions_.push(t)}getSymbolVertexShader(){return this.hasSymbol_?`${di}\n${this.uniforms_.map((function(t){return"uniform "+t+";"})).join("\n")}\nattribute vec2 a_position;\nattribute float a_index;\nattribute vec4 a_prop_hitColor;\n${this.attributes_.map((function(t){return"attribute "+t+";"})).join("\n")}\nvarying vec2 v_texCoord;\nvarying vec2 v_quadCoord;\nvarying vec4 v_prop_hitColor;\nvarying vec2 v_centerPx;\nvarying float v_angle;\nvarying vec2 v_quadSizePx;\n${this.varyings_.map((function(t){return"varying "+t.type+" "+t.name+";"})).join("\n")}\n${this.vertexShaderFunctions_.join("\n")}\nvec2 pxToScreen(vec2 coordPx) {\n  vec2 scaled = coordPx / u_viewportSizePx / 0.5;\n  return scaled;\n}\n\nvec2 screenToPx(vec2 coordScreen) {\n  return (coordScreen * 0.5 + 0.5) * u_viewportSizePx;\n}\n\nvoid main(void) {\n  v_quadSizePx = ${this.symbolSizeExpression_};\n  vec2 halfSizePx = v_quadSizePx * 0.5;\n  vec2 centerOffsetPx = ${this.symbolOffsetExpression_};\n  vec2 offsetPx = centerOffsetPx;\n  if (a_index == 0.0) {\n    offsetPx -= halfSizePx;\n  } else if (a_index == 1.0) {\n    offsetPx += halfSizePx * vec2(1., -1.);\n  } else if (a_index == 2.0) {\n    offsetPx += halfSizePx;\n  } else {\n    offsetPx += halfSizePx * vec2(-1., 1.);\n  }\n  float angle = ${this.symbolRotationExpression_};\n  ${this.symbolRotateWithView_?"angle += u_rotation;":""}\n  float c = cos(-angle);\n  float s = sin(-angle);\n  offsetPx = vec2(c * offsetPx.x - s * offsetPx.y, s * offsetPx.x + c * offsetPx.y);\n  vec4 center = u_projectionMatrix * vec4(a_position, 0.0, 1.0);\n  gl_Position = center + vec4(pxToScreen(offsetPx), u_depth, 0.);\n  vec4 texCoord = ${this.texCoordExpression_};\n  float u = a_index == 0.0 || a_index == 3.0 ? texCoord.s : texCoord.p;\n  float v = a_index == 2.0 || a_index == 3.0 ? texCoord.t : texCoord.q;\n  v_texCoord = vec2(u, v);\n  v_prop_hitColor = a_prop_hitColor;\n  v_angle = angle;\n  c = cos(-v_angle);\n  s = sin(-v_angle);\n  centerOffsetPx = vec2(c * centerOffsetPx.x - s * centerOffsetPx.y, s * centerOffsetPx.x + c * centerOffsetPx.y); \n  v_centerPx = screenToPx(center.xy) + centerOffsetPx;\n${this.varyings_.map((function(t){return"  "+t.name+" = "+t.expression+";"})).join("\n")}\n}`:null}getSymbolFragmentShader(){return this.hasSymbol_?`${di}\n${this.uniforms_.map((function(t){return"uniform "+t+";"})).join("\n")}\nvarying vec2 v_texCoord;\nvarying vec4 v_prop_hitColor;\nvarying vec2 v_centerPx;\nvarying float v_angle;\nvarying vec2 v_quadSizePx;\n${this.varyings_.map((function(t){return"varying "+t.type+" "+t.name+";"})).join("\n")}\n${this.fragmentShaderFunctions_.join("\n")}\n\nvoid main(void) {\n  if (${this.discardExpression_}) { discard; }\n  vec2 coordsPx = gl_FragCoord.xy / u_pixelRatio - v_centerPx; // relative to center\n  float c = cos(v_angle);\n  float s = sin(v_angle);\n  coordsPx = vec2(c * coordsPx.x - s * coordsPx.y, s * coordsPx.x + c * coordsPx.y);\n  gl_FragColor = ${this.symbolColorExpression_};\n  if (u_hitDetection > 0) {\n    if (gl_FragColor.a < 0.05) { discard; };\n    gl_FragColor = v_prop_hitColor;\n  }\n}`:null}getStrokeVertexShader(){return this.hasStroke_?`${di}\n${this.uniforms_.map((function(t){return"uniform "+t+";"})).join("\n")}\nattribute vec2 a_position;\nattribute float a_index;\nattribute vec2 a_segmentStart;\nattribute vec2 a_segmentEnd;\nattribute float a_parameters;\nattribute float a_distance;\nattribute vec2 a_joinAngles;\nattribute vec4 a_prop_hitColor;\n${this.attributes_.map((function(t){return"attribute "+t+";"})).join("\n")}\nvarying vec2 v_segmentStart;\nvarying vec2 v_segmentEnd;\nvarying float v_angleStart;\nvarying float v_angleEnd;\nvarying float v_width;\nvarying vec4 v_prop_hitColor;\nvarying float v_distanceOffsetPx;\n${this.varyings_.map((function(t){return"varying "+t.type+" "+t.name+";"})).join("\n")}\n${this.vertexShaderFunctions_.join("\n")}\nvec2 worldToPx(vec2 worldPos) {\n  vec4 screenPos = u_projectionMatrix * vec4(worldPos, 0.0, 1.0);\n  return (0.5 * screenPos.xy + 0.5) * u_viewportSizePx;\n}\n\nvec4 pxToScreen(vec2 pxPos) {\n  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;\n  return vec4(screenPos, u_depth, 1.0);\n}\n\nbool isCap(float joinAngle) {\n  return joinAngle < -0.1;\n}\n\nvec2 getJoinOffsetDirection(vec2 normalPx, float joinAngle) {\n  float halfAngle = joinAngle / 2.0;\n  float c = cos(halfAngle);\n  float s = sin(halfAngle);\n  vec2 angleBisectorNormal = vec2(s * normalPx.x + c * normalPx.y, -c * normalPx.x + s * normalPx.y);\n  float length = 1.0 / s;\n  return angleBisectorNormal * length;\n}\n\nvec2 getOffsetPoint(vec2 point, vec2 normal, float joinAngle, float offsetPx) {\n  // if on a cap or the join angle is too high, offset the line along the segment normal\n  if (cos(joinAngle) > 0.998 || isCap(joinAngle)) {\n    return point - normal * offsetPx;\n  }\n  // offset is applied along the inverted normal (positive offset goes "right" relative to line direction)\n  return point - getJoinOffsetDirection(normal, joinAngle) * offsetPx;\n}\n\nvoid main(void) {\n  v_angleStart = a_joinAngles.x;\n  v_angleEnd = a_joinAngles.y;\n  float vertexNumber = floor(abs(a_parameters) / 10000. + 0.5);\n  // we're reading the fractional part while keeping the sign (so -4.12 gives -0.12, 3.45 gives 0.45)\n  float angleTangentSum = fract(abs(a_parameters) / 10000.) * 10000. * sign(a_parameters);\n\n  float lineWidth = ${this.strokeWidthExpression_};\n  float lineOffsetPx = ${this.strokeOffsetExpression_};\n\n  // compute segment start/end in px with offset\n  vec2 segmentStartPx = worldToPx(a_segmentStart);\n  vec2 segmentEndPx = worldToPx(a_segmentEnd);\n  vec2 tangentPx = normalize(segmentEndPx - segmentStartPx);\n  vec2 normalPx = vec2(-tangentPx.y, tangentPx.x);\n  segmentStartPx = getOffsetPoint(segmentStartPx, normalPx, v_angleStart, lineOffsetPx),\n  segmentEndPx = getOffsetPoint(segmentEndPx, normalPx, v_angleEnd, lineOffsetPx);\n  \n  // compute current vertex position\n  float normalDir = vertexNumber < 0.5 || (vertexNumber > 1.5 && vertexNumber < 2.5) ? 1.0 : -1.0;\n  float tangentDir = vertexNumber < 1.5 ? 1.0 : -1.0;\n  float angle = vertexNumber < 1.5 ? v_angleStart : v_angleEnd;\n  vec2 joinDirection;\n  vec2 positionPx = vertexNumber < 1.5 ? segmentStartPx : segmentEndPx;\n  // if angle is too high, do not make a proper join\n  if (cos(angle) > 0.985 || isCap(angle)) {\n    joinDirection = normalPx * normalDir - tangentPx * tangentDir;\n  } else {\n    joinDirection = getJoinOffsetDirection(normalPx * normalDir, angle);\n  }\n  positionPx = positionPx + joinDirection * (lineWidth * 0.5 + 1.); // adding 1 pixel for antialiasing\n  gl_Position = pxToScreen(positionPx);\n\n  v_segmentStart = segmentStartPx;\n  v_segmentEnd = segmentEndPx;\n  v_width = lineWidth;\n  v_prop_hitColor = a_prop_hitColor;\n  v_distanceOffsetPx = a_distance / u_resolution - (lineOffsetPx * angleTangentSum);\n${this.varyings_.map((function(t){return"  "+t.name+" = "+t.expression+";"})).join("\n")}\n}`:null}getStrokeFragmentShader(){return this.hasStroke_?`${di}\n${this.uniforms_.map((function(t){return"uniform "+t+";"})).join("\n")}\nvarying vec2 v_segmentStart;\nvarying vec2 v_segmentEnd;\nvarying float v_angleStart;\nvarying float v_angleEnd;\nvarying float v_width;\nvarying vec4 v_prop_hitColor;\nvarying float v_distanceOffsetPx;\n${this.varyings_.map((function(t){return"varying "+t.type+" "+t.name+";"})).join("\n")}\n${this.fragmentShaderFunctions_.join("\n")}\n\nvec2 pxToWorld(vec2 pxPos) {\n  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;\n  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;\n}\n\nbool isCap(float joinAngle) {\n  return joinAngle < -0.1;\n}\n\nfloat segmentDistanceField(vec2 point, vec2 start, vec2 end, float width) {\n  vec2 tangent = normalize(end - start);\n  vec2 normal = vec2(-tangent.y, tangent.x);\n  vec2 startToPoint = point - start;\n  return abs(dot(startToPoint, normal)) - width * 0.5;\n}\n\nfloat buttCapDistanceField(vec2 point, vec2 start, vec2 end) {\n  vec2 startToPoint = point - start;\n  vec2 tangent = normalize(end - start);\n  return dot(startToPoint, -tangent);\n}\n\nfloat squareCapDistanceField(vec2 point, vec2 start, vec2 end, float width) {\n  return buttCapDistanceField(point, start, end) - width * 0.5;\n}\n\nfloat roundCapDistanceField(vec2 point, vec2 start, vec2 end, float width) {\n  float onSegment = max(0., 1000. * dot(point - start, end - start)); // this is very high when inside the segment\n  return length(point - start) - width * 0.5 - onSegment;\n}\n\nfloat roundJoinDistanceField(vec2 point, vec2 start, vec2 end, float width) {\n  return roundCapDistanceField(point, start, end, width);\n}\n\nfloat bevelJoinField(vec2 point, vec2 start, vec2 end, float width, float joinAngle) {\n  vec2 startToPoint = point - start;\n  vec2 tangent = normalize(end - start);\n  float c = cos(joinAngle * 0.5);\n  float s = sin(joinAngle * 0.5);\n  float direction = -sign(sin(joinAngle));\n  vec2 bisector = vec2(c * tangent.x - s * tangent.y, s * tangent.x + c * tangent.y);\n  float radius = width * 0.5 * s;\n  return dot(startToPoint, bisector * direction) - radius;\n}\n\nfloat miterJoinDistanceField(vec2 point, vec2 start, vec2 end, float width, float joinAngle) {\n  if (cos(joinAngle) > 0.985) { // avoid risking a division by zero\n    return bevelJoinField(point, start, end, width, joinAngle);\n  }\n  float miterLength = 1. / sin(joinAngle * 0.5);\n  float miterLimit = ${this.strokeMiterLimitExpression_};\n  if (miterLength > miterLimit) {\n    return bevelJoinField(point, start, end, width, joinAngle);\n  }\n  return -1000.;\n}\n\nfloat capDistanceField(vec2 point, vec2 start, vec2 end, float width, float capType) {\n   if (capType == ${oi("butt")}) {\n    return buttCapDistanceField(point, start, end);\n  } else if (capType == ${oi("square")}) {\n    return squareCapDistanceField(point, start, end, width);\n  }\n  return roundCapDistanceField(point, start, end, width);\n}\n\nfloat joinDistanceField(vec2 point, vec2 start, vec2 end, float width, float joinAngle, float joinType) {\n  if (joinType == ${oi("bevel")}) {\n    return bevelJoinField(point, start, end, width, joinAngle);\n  } else if (joinType == ${oi("miter")}) {\n    return miterJoinDistanceField(point, start, end, width, joinAngle);\n  }\n  return roundJoinDistanceField(point, start, end, width);\n}\n\nfloat computeSegmentPointDistance(vec2 point, vec2 start, vec2 end, float width, float joinAngle, float capType, float joinType) {\n  if (isCap(joinAngle)) {\n    return capDistanceField(point, start, end, width, capType);\n  }\n  return joinDistanceField(point, start, end, width, joinAngle, joinType);\n}\n\nvoid main(void) {\n  vec2 currentPoint = gl_FragCoord.xy / u_pixelRatio;\n  #ifdef GL_FRAGMENT_PRECISION_HIGH\n  vec2 worldPos = pxToWorld(currentPoint);\n  if (\n    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (\n      worldPos[0] < u_renderExtent[0] ||\n      worldPos[1] < u_renderExtent[1] ||\n      worldPos[0] > u_renderExtent[2] ||\n      worldPos[1] > u_renderExtent[3]\n    )\n  ) {\n    discard;\n  }\n  #endif\n  if (${this.discardExpression_}) { discard; }\n\n  float segmentLength = length(v_segmentEnd - v_segmentStart);\n  vec2 segmentTangent = (v_segmentEnd - v_segmentStart) / segmentLength;\n  vec2 segmentNormal = vec2(-segmentTangent.y, segmentTangent.x);\n  vec2 startToPoint = currentPoint - v_segmentStart;\n  float currentLengthPx = max(0., min(dot(segmentTangent, startToPoint), segmentLength)) + v_distanceOffsetPx; \n  float currentRadiusPx = abs(dot(segmentNormal, startToPoint));\n  float currentRadiusRatio = dot(segmentNormal, startToPoint) * 2. / v_width;\n  vec4 color = ${this.strokeColorExpression_} * u_globalAlpha;\n  float capType = ${this.strokeCapExpression_};\n  float joinType = ${this.strokeJoinExpression_};\n  float segmentStartDistance = computeSegmentPointDistance(currentPoint, v_segmentStart, v_segmentEnd, v_width, v_angleStart, capType, joinType);\n  float segmentEndDistance = computeSegmentPointDistance(currentPoint, v_segmentEnd, v_segmentStart, v_width, v_angleEnd, capType, joinType);\n  float distance = max(\n    segmentDistanceField(currentPoint, v_segmentStart, v_segmentEnd, v_width),\n    max(segmentStartDistance, segmentEndDistance)\n  );\n  distance = max(distance, ${this.strokeDistanceFieldExpression_});\n  gl_FragColor = color * smoothstep(0.5, -0.5, distance);\n  if (u_hitDetection > 0) {\n    if (gl_FragColor.a < 0.1) { discard; };\n    gl_FragColor = v_prop_hitColor;\n  }\n}`:null}getFillVertexShader(){return this.hasFill_?`${di}\n${this.uniforms_.map((function(t){return"uniform "+t+";"})).join("\n")}\nattribute vec2 a_position;\nattribute vec4 a_prop_hitColor;\n${this.attributes_.map((function(t){return"attribute "+t+";"})).join("\n")}\nvarying vec4 v_prop_hitColor;\n${this.varyings_.map((function(t){return"varying "+t.type+" "+t.name+";"})).join("\n")}\n${this.vertexShaderFunctions_.join("\n")}\nvoid main(void) {\n  gl_Position = u_projectionMatrix * vec4(a_position, u_depth, 1.0);\n  v_prop_hitColor = a_prop_hitColor;\n${this.varyings_.map((function(t){return"  "+t.name+" = "+t.expression+";"})).join("\n")}\n}`:null}getFillFragmentShader(){return this.hasFill_?`${di}\n${this.uniforms_.map((function(t){return"uniform "+t+";"})).join("\n")}\nvarying vec4 v_prop_hitColor;\n${this.varyings_.map((function(t){return"varying "+t.type+" "+t.name+";"})).join("\n")}\n${this.fragmentShaderFunctions_.join("\n")}\nvec2 pxToWorld(vec2 pxPos) {\n  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;\n  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;\n}\n\nvec2 worldToPx(vec2 worldPos) {\n  vec4 screenPos = u_projectionMatrix * vec4(worldPos, 0.0, 1.0);\n  return (0.5 * screenPos.xy + 0.5) * u_viewportSizePx;\n}\n\nvoid main(void) {\n  vec2 pxPos = gl_FragCoord.xy / u_pixelRatio;\n  vec2 pxOrigin = worldToPx(u_patternOrigin);\n  #ifdef GL_FRAGMENT_PRECISION_HIGH\n  vec2 worldPos = pxToWorld(pxPos);\n  if (\n    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (\n      worldPos[0] < u_renderExtent[0] ||\n      worldPos[1] < u_renderExtent[1] ||\n      worldPos[0] > u_renderExtent[2] ||\n      worldPos[1] > u_renderExtent[3]\n    )\n  ) {\n    discard;\n  }\n  #endif\n  if (${this.discardExpression_}) { discard; }\n  gl_FragColor = ${this.fillColorExpression_} * u_globalAlpha;\n  if (u_hitDetection > 0) {\n    if (gl_FragColor.a < 0.1) { discard; };\n    gl_FragColor = v_prop_hitColor;\n  }\n}`:null}}const pi="blur",gi="gradient",_i="radius",mi=["#00f","#0ff","#0f0","#ff0","#f00"]
class yi extends d.A{constructor(t){t=t||{}
const e=Object.assign({},t)
delete e.gradient,delete e.radius,delete e.blur,delete e.weight,super(e),this.gradient_=null,this.addChangeListener(gi,this.handleGradientChanged_),this.setGradient(t.gradient?t.gradient:mi),this.setBlur(void 0!==t.blur?t.blur:15),this.setRadius(void 0!==t.radius?t.radius:8)
const i=t.weight?t.weight:"weight"
this.weightFunction_="string"==typeof i?function(t){return t.get(i)}:i,this.setRenderOrder(null)}getBlur(){return this.get(pi)}getGradient(){return this.get(gi)}getRadius(){return this.get(_i)}handleGradientChanged_(){this.gradient_=function(t){const e=(0,J.Y)(1,256),i=e.createLinearGradient(0,0,1,256),n=1/(t.length-1)
for(let r=0,o=t.length;r<o;++r)i.addColorStop(r*n,t[r])
return e.fillStyle=i,e.fillRect(0,0,1,256),e.canvas}(this.getGradient())}setBlur(t){this.set(pi,t)}setGradient(t){this.set(gi,t)}setRadius(t){this.set(_i,t)}createRenderer(){const t=(new fi).addAttribute("float a_prop_weight").addVarying("v_prop_weight","float","a_prop_weight").addUniform("float u_size").addUniform("float u_blurSlope").setSymbolSizeExpression("vec2(u_size)").setSymbolColorExpression("vec4(smoothstep(0., 1., (1. - length(coordsPx * 2. / v_quadSizePx)) * u_blurSlope) * v_prop_weight)")
return new ue(this,{className:this.getClassName(),attributes:[{name:"weight",callback:t=>{const e=this.weightFunction_(t)
return void 0!==e?(0,A.qE)(e,0,1):1}}],uniforms:{u_size:()=>2*(this.get(_i)+this.get(pi)),u_blurSlope:()=>this.get(_i)/Math.max(1,this.get(pi))},hitDetectionEnabled:!0,vertexShader:t.getSymbolVertexShader(),fragmentShader:t.getSymbolFragmentShader(),postProcesses:[{fragmentShader:"\n            precision mediump float;\n\n            uniform sampler2D u_image;\n            uniform sampler2D u_gradientTexture;\n            uniform float u_opacity;\n\n            varying vec2 v_texCoord;\n\n            void main() {\n              vec4 color = texture2D(u_image, v_texCoord);\n              gl_FragColor.a = color.a * u_opacity;\n              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;\n              gl_FragColor.rgb *= gl_FragColor.a;\n            }",uniforms:{u_gradientTexture:()=>this.gradient_,u_opacity:()=>this.getOpacity()}}]})}renderDeclutter(){}}const vi=yi
var xi=i(9343),bi=i(1257),wi=i(3498),Ei=i(8247),Si=i(4943),Ci=i(7179),Pi=i(1270)
class Ti extends Ei.A{constructor(t){super(t),this.vectorRenderer_=new Et(t),this.layerImageRatio_=t.getImageRatio(),this.coordinateToVectorPixelTransform_=(0,z.vt)(),this.renderedPixelToCoordinateTransform_=null}disposeInternal(){this.vectorRenderer_.dispose(),super.disposeInternal()}getFeatures(t){if(!this.vectorRenderer_)return Promise.resolve([])
const e=(0,z.Bb)(this.coordinateToVectorPixelTransform_,(0,z.Bb)(this.renderedPixelToCoordinateTransform_,t.slice()))
return this.vectorRenderer_.getFeatures(e)}handleFontsChanged(){this.vectorRenderer_.handleFontsChanged()}prepareFrame(t){const e=t.pixelRatio,i=t.viewState,n=i.resolution,r=t.viewHints,o=this.vectorRenderer_
let s=t.extent
1!==this.layerImageRatio_&&(s=s.slice(0),(0,w.Af)(s,this.layerImageRatio_))
const a=(0,w.RG)(s)/n,l=(0,w.Oq)(s)/n
if(!r[ot.A.ANIMATING]&&!r[ot.A.INTERACTING]&&!(0,w.Im)(s)){o.useContainer(null,null)
const r=o.context,h=t.layerStatesArray[t.layerIndex],u=Object.assign({},h,{opacity:1}),c=Object.assign({},t,{extent:s,size:[a,l],viewState:Object.assign({},t.viewState,{rotation:0}),layerStatesArray:[u],layerIndex:0,declutter:null}),d=this.getLayer().getDeclutter()
d&&(c.declutter={[d]:new Ci(9)})
let f=!0
const p=new Si.A(s,n,e,r.canvas,(function(t){o.prepareFrame(c)&&o.replayGroupChanged&&(o.clipping=!1,o.renderFrame(c,null)&&(o.renderDeclutter(c),o.renderDeferred(c),f=!1),t())}))
p.addEventListener(me.A.CHANGE,(()=>{if(p.getState()!==ft.A.LOADED)return
this.image_=f?null:p
const t=p.getPixelRatio(),n=(0,Pi.m)(p.getResolution())*e/t
this.renderedResolution=n,this.coordinateToVectorPixelTransform_=(0,z.Zz)(this.coordinateToVectorPixelTransform_,a/2,l/2,1/n,-1/n,0,-i.center[0],-i.center[1])})),p.load()}return this.image_&&(this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice()),!!this.image_}preRender(){}postRender(){}renderDeclutter(){}forEachFeatureAtCoordinate(t,e,i,n,r){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(t,e,i,n,r):super.forEachFeatureAtCoordinate(t,e,i,n,r)}}const Ii=Ti
class Mi extends d.A{constructor(t){t=t||{}
const e=Object.assign({},t)
delete e.imageRatio,super(e),this.imageRatio_=void 0!==t.imageRatio?t.imageRatio:1}getImageRatio(){return this.imageRatio_}createRenderer(){return new Ii(this)}}const Ai=Mi
var Ri=i(6104)
const Li={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},Oi={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]}
class Di extends Ri.A{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=(0,z.vt)(),this.tileClipContexts_=null}prepareTile(t,e,i){let n
const r=t.getState()
return r!==ge.A.LOADED&&r!==ge.A.ERROR||(this.updateExecutorGroup_(t,e,i),this.tileImageNeedsRender_(t)&&(n=!0)),n}getTile(t,e,i,n){const r=n.pixelRatio,o=n.viewState,s=o.resolution,a=o.projection,l=this.getLayer(),h=l.getSource().getTile(t,e,i,r,a),u=n.viewHints,c=!(u[ot.A.ANIMATING]||u[ot.A.INTERACTING])
return!c&&h.wantedResolution||(h.wantedResolution=s),this.prepareTile(h,r,a)&&(c||Date.now()-n.time<8)&&"vector"!==l.getRenderMode()&&this.renderTileImage_(h,n),super.getTile(t,e,i,n)}isDrawableTile(t){const e=this.getLayer()
return super.isDrawableTile(t)&&("vector"===e.getRenderMode()?(0,M.v6)(e)in t.executorGroups:t.hasContext(e))}getTileImage(t){return t.getImage(this.getLayer())}prepareFrame(t){const e=this.getLayer().getRevision()
return this.renderedLayerRevision_!==e&&(this.renderedLayerRevision_=e,this.renderedTiles.length=0),super.prepareFrame(t)}updateExecutorGroup_(t,e,i){const n=this.getLayer(),r=n.getRevision(),o=n.getRenderOrder()||null,s=t.wantedResolution,a=t.getReplayState(n)
if(!a.dirty&&a.renderedResolution===s&&a.renderedRevision==r&&a.renderedRenderOrder==o)return
const l=n.getSource(),h=!!n.getDeclutter(),u=l.getTileGrid(),c=l.getTileGridForProjection(i).getTileCoordExtent(t.wrappedTileCoord),d=l.getSourceTiles(e,i,t),f=(0,M.v6)(n)
delete t.hitDetectionImageData[f],t.executorGroups[f]=[],a.dirty=!1
for(let p=0,g=d.length;p<g;++p){const i=d[p]
if(i.getState()!=ge.A.LOADED)continue
const r=i.tileCoord,g=u.getTileCoordExtent(r),_=(0,w._N)(c,g),m=(0,w.r)(_,n.getRenderBuffer()*s,this.tmpExtent),y=(0,w.aI)(g,_)?null:m,v=new N(0,_,s,e),x=mt(s,e),b=function(t,e){let i
const r=t.getStyleFunction()||n.getStyleFunction()
if(r&&(i=r(t,s)),i){const n=this.renderFeature(t,x,i,v,h,e)
a.dirty=a.dirty||n}},E=i.getFeatures()
o&&o!==a.renderedRenderOrder&&E.sort(o)
for(let t=0,e=E.length;t<e;++t){const e=E[t]
y&&!(0,w.HY)(y,e.getGeometry().getExtent())||b.call(this,e,t)}const S=v.finish(),C="vector"!==n.getRenderMode()&&h&&1===d.length?null:_,P=new rt(C,s,e,l.getOverlaps(),S,n.getRenderBuffer(),!!this.frameState?.declutter)
t.executorGroups[f].push(P)}a.renderedRevision=r,a.renderedRenderOrder=o,a.renderedResolution=s}forEachFeatureAtCoordinate(t,e,i,n,r){const o=e.viewState.resolution,s=e.viewState.rotation
i=null==i?0:i
const a=this.getLayer(),l=a.getSource().getTileGridForProjection(e.viewState.projection),h=(0,w.Tr)([t]);(0,w.r)(h,o*i,h)
const u={},c=function(t,e,i){let o=t.getId()
void 0===o&&(o=(0,M.v6)(t))
const s=u[o]
if(s){if(!0!==s&&i<s.distanceSq){if(0===i)return u[o]=!0,r.splice(r.lastIndexOf(s),1),n(t,a,e)
s.geometry=e,s.distanceSq=i}}else{if(0===i)return u[o]=!0,n(t,a,e)
r.push(u[o]={feature:t,layer:a,geometry:e,distanceSq:i,callback:n})}},d=this.renderedTiles
let f
for(let p=0,g=d.length;!f&&p<g;++p){const n=d[p],r=l.getTileCoordExtent(n.wrappedTileCoord)
if(!(0,w.HY)(r,h))continue
const u=(0,M.v6)(a),g=[n.executorGroups[u]],_=a.getDeclutter()
g.some((n=>{const r=_?e.declutter[_].all().map((t=>t.value)):null
for(let e=0,a=n.length;e<a;++e){const a=n[e]
if(f=a.forEachFeatureAtCoordinate(t,o,s,i,c,r),f)return!0}}))}return f}getFeatures(t){return new Promise(((e,i)=>{const n=this.getLayer(),r=(0,M.v6)(n),o=n.getSource(),s=this.renderedProjection,a=s.getExtent(),l=this.renderedResolution,h=o.getTileGridForProjection(s),u=(0,z.Bb)(this.renderedPixelToCoordinateTransform_,t.slice()),c=h.getTileCoordForCoordAndResolution(u,l)
let d
for(let t=0,y=this.renderedTiles.length;t<y;++t)if(c.toString()===this.renderedTiles[t].tileCoord.toString()){if(d=this.renderedTiles[t],d.getState()===ge.A.LOADED){const t=h.getTileCoordExtent(d.tileCoord)
o.getWrapX()&&s.canWrapX()&&!(0,w.ms)(a,t)&&(0,bt.Li)(u,s)
break}d=void 0}if(!d||d.loadingSourceTiles>0)return void e([])
const f=h.getTileCoordExtent(d.wrappedTileCoord),p=(0,w.Py)(f),g=[(u[0]-p[0])/l,(p[1]-u[1])/l],_=d.getSourceTiles().reduce((function(t,e){return t.concat(e.getFeatures())}),[])
let m=d.hitDetectionImageData[r]
if(!m){const t=(0,we.xq)(h.getTileSize(h.getZForResolution(l,o.zDirection))),e=this.renderedRotation_
m=ct(t,[this.getRenderTransform(h.getTileCoordCenter(d.wrappedTileCoord),l,0,ut,t[0]*ut,t[1]*ut,0)],_,n.getStyleFunction(),h.getTileCoordExtent(d.wrappedTileCoord),d.getReplayState(n).renderedResolution,e),d.hitDetectionImageData[r]=m}e(dt(g,_,m))}))}handleFontsChanged(){const t=this.getLayer()
t.getVisible()&&void 0!==this.renderedLayerRevision_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}renderDeclutter(t,e){const i=this.context,n=i.globalAlpha
i.globalAlpha=e.opacity
const r=t.viewHints,o=!(r[ot.A.ANIMATING]||r[ot.A.INTERACTING]),s=this.renderedTiles
for(let a=0,l=s.length;a<l;++a){const e=s[a],i=e.executorGroups[(0,M.v6)(this.getLayer())],n=this.getLayer().getDeclutter()
if(i)for(let r=i.length-1;r>=0;--r)i[r].execute(this.context,[this.context.canvas.width,this.context.canvas.height],this.getTileRenderTransform(e,t),t.viewState.rotation,o,et,n?t.declutter[n]:void 0)}i.globalAlpha=n}renderDeferredInternal(t){const e=this.renderedTiles.reduce(((t,e,i)=>(e.executorGroups[(0,M.v6)(this.getLayer())].forEach((e=>t.push({executorGroup:e,index:i}))),t)),[]),i=e.map((({executorGroup:t})=>t.getDeferredZIndexContexts()))
i.map((t=>Object.keys(t))).flat().sort(S.V_).map(Number).forEach((t=>{i.forEach(((i,n)=>{i[t]&&i[t].forEach((t=>{const{executorGroup:i,index:r}=e[n],o=i.getRenderedContext(),s=o.globalAlpha
o.globalAlpha=this.renderedOpacity_
const a=this.tileClipContexts_[r]
a&&a.draw(o),t.draw(o),a&&o.restore(),o.globalAlpha=s,t.clear()}))}))}))}getTileRenderTransform(t,e){const i=e.pixelRatio,n=e.viewState,r=n.center,o=n.resolution,s=n.rotation,a=e.size,l=Math.round(a[0]*i),h=Math.round(a[1]*i),u=this.getLayer().getSource().getTileGridForProjection(e.viewState.projection),c=t.tileCoord,d=u.getTileCoordExtent(t.wrappedTileCoord),f=u.getTileCoordExtent(c,this.tmpExtent)[0]-d[0]
return(0,z.lw)((0,z.hs)(this.inversePixelTransform.slice(),1/i,1/i),this.getRenderTransform(r,o,s,i,l,h,f))}postRender(t,e){const i=e.viewHints,n=!(i[ot.A.ANIMATING]||i[ot.A.INTERACTING])
this.renderedPixelToCoordinateTransform_=e.pixelToCoordinateTransform.slice(),this.renderedRotation_=e.viewState.rotation,this.renderedOpacity_=e.layerStatesArray[e.layerIndex].opacity
const r=this.getLayer(),o=r.getRenderMode(),s=t.globalAlpha
t.globalAlpha=this.renderedOpacity_
const a=r.getDeclutter(),l=a?Oi[o].filter((t=>!et.includes(t))):Oi[o],h=e.viewState,u=h.rotation,c=r.getSource(),d=c.getTileGridForProjection(h.projection).getZForResolution(h.resolution,c.zDirection),f=this.renderedTiles,p=[],g=[],_=[]
let m=!0
for(let y=f.length-1;y>=0;--y){const i=f[y]
m=m&&!i.getReplayState(r).dirty
const o=i.executorGroups[(0,M.v6)(r)].filter((t=>t.hasExecutors(l)))
if(0===o.length)continue
const s=this.getTileRenderTransform(i,e),h=i.tileCoord[0]
let c=!1
const v=o[0].getClipCoords(s)
let x,b=t
if(v){a&&(x=new k.A,b=x.getContext())
for(let t=0,e=p.length;t<e;++t)if(d!==h&&h<g[t]){const e=p[t];(0,w.HY)([v[0],v[3],v[4],v[7]],[e[0],e[3],e[4],e[7]])&&(c||(b.save(),c=!0),b.beginPath(),b.moveTo(v[0],v[1]),b.lineTo(v[2],v[3]),b.lineTo(v[4],v[5]),b.lineTo(v[6],v[7]),b.moveTo(e[6],e[7]),b.lineTo(e[4],e[5]),b.lineTo(e[2],e[3]),b.lineTo(e[0],e[1]),b.clip())}p.push(v),g.push(h)}for(let e=0,r=o.length;e<r;++e)o[e].execute(t,[t.canvas.width,t.canvas.height],s,u,n,l)
c&&(b===t?b.restore():_[y]=x)}t.globalAlpha=s,this.ready=m,this.tileClipContexts_=_,super.postRender(t,e)}renderFeature(t,e,i,n,r,o){if(!i)return!1
let s=!1
if(Array.isArray(i))for(let a=0,l=i.length;a<l;++a)s=vt(n,t,i[a],e,this.boundHandleStyleImageChange_,void 0,r,o)||s
else s=vt(n,t,i,e,this.boundHandleStyleImageChange_,void 0,r,o)
return s}tileImageNeedsRender_(t){const e=this.getLayer()
if("vector"===e.getRenderMode())return!1
const i=t.getReplayState(e),n=e.getRevision(),r=t.wantedResolution
return i.renderedTileResolution!==r||i.renderedTileRevision!==n}renderTileImage_(t,e){const i=this.getLayer(),n=t.getReplayState(i),r=i.getRevision(),o=t.executorGroups[(0,M.v6)(i)]
n.renderedTileRevision=r
const s=t.wrappedTileCoord,a=s[0],l=i.getSource()
let h=e.pixelRatio
const u=e.viewState.projection,c=l.getTileGridForProjection(u),d=c.getResolution(t.tileCoord[0]),f=e.pixelRatio/t.wantedResolution*d,p=c.getResolution(a),g=t.getContext(i)
h=Math.round(Math.max(h,f/h))
const _=l.getTilePixelSize(a,h,u)
g.canvas.width=_[0],g.canvas.height=_[1]
const m=h/f
if(1!==m){const t=(0,z.cL)(this.tmpTransform_);(0,z.hs)(t,m,m),g.setTransform.apply(g,t)}const y=c.getTileCoordExtent(s,this.tmpExtent),v=f/p,x=(0,z.cL)(this.tmpTransform_);(0,z.hs)(x,v,-v),(0,z.Tl)(x,-y[0],-y[3])
for(let b=0,w=o.length;b<w;++b)o[b].execute(g,[g.canvas.width*m,g.canvas.height*m],x,0,!0,Li[i.getRenderMode()],null)
n.renderedTileResolution=t.wantedResolution}}const Ni=Di
var Fi=i(3035)
class ki extends d.A{constructor(t){t=t||{}
const e=Object.assign({},t)
delete e.preload,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un
const i=t.renderMode||"hybrid";(0,zt.v)("hybrid"==i||"vector"==i,"`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=i,this.setPreload(t.preload?t.preload:0),this.setUseInterimTilesOnError(void 0===t.useInterimTilesOnError||t.useInterimTilesOnError),this.getBackground,this.setBackground}createRenderer(){return new Ni(this)}getFeatures(t){return super.getFeatures(t)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(Fi.A.PRELOAD)}getUseInterimTilesOnError(){return this.get(Fi.A.USE_INTERIM_TILES_ON_ERROR)}setPreload(t){this.set(Fi.A.PRELOAD,t)}setUseInterimTilesOnError(t){this.set(Fi.A.USE_INTERIM_TILES_ON_ERROR,t)}}const zi=ki
function ji(t,e,i){const n=(0,de.SR)()
return n.style=t.style,function(t,e,i,n){const r=(0,de.qg)(t,i,e)
if((0,de.Xj)(r.type,de.j))throw new Error("No matching type was found")
if(!(0,de.ho)(e,r.type)){const t=(0,de.go)(e),i=(0,de.go)(r.type)
throw new Error(`Expected expression to be of type ${t}, got ${i}`)}return ci(r,e,n)}(e,i,n,t)}function Gi(t){const e=(0,Je._j)(t)
return[256*e[0]+e[1],256*e[2]+Math.round(255*e[3])]}function Bi(t){return t===de.mE?2:t===de.Fq?4:1}function Ui(t){const e=Bi(t)
return e>1?`vec${e}`:"float"}function qi(t){return(JSON.stringify(t).split("").reduce(((t,e)=>(t<<5)-t+e.charCodeAt(0)),0)>>>0).toString()}function Vi(t,e,i,n){if(`${n}radius`in t&&"icon-"!==n){let r=ji(i,t[`${n}radius`],de.wl);`${n}radius2`in t&&(r=`max(${r}, ${ji(i,t[`${n}radius2`],de.wl)})`),`${n}stroke-width`in t&&(r=`(${r} + ${ji(i,t[`${n}stroke-width`],de.wl)} * 0.5)`),e.setSymbolSizeExpression(`vec2(${r} * 2. + 0.5)`)}if(`${n}scale`in t){const r=ji(i,t[`${n}scale`],de.wl|de.Fq)
e.setSymbolSizeExpression(`${e.getSymbolSizeExpression()} * ${r}`)}`${n}displacement`in t&&e.setSymbolOffsetExpression(ji(i,t[`${n}displacement`],de.Fq)),`${n}rotation`in t&&e.setSymbolRotationExpression(ji(i,t[`${n}rotation`],de.wl)),`${n}rotate-with-view`in t&&e.setSymbolRotateWithView(!!t[`${n}rotate-with-view`])}function Zi(t,e,i,n,r){let o="vec4(0.)"
null!==e&&(o=e),null!==i&&null!==n&&(o=`mix(${i}, ${o}, smoothstep(-${n} + 0.63, -${n} - 0.58, ${t}))`)
let s=`${o} * (1.0 - smoothstep(-0.63, 0.58, ${t}))`
return null!==r&&(s=`${s} * ${r}`),s}function Wi(t,e,i,n,r){const o=new Image
let s
return o.crossOrigin=void 0===t[`${n}cross-origin`]?"anonymous":t[`${n}cross-origin`],o.src=t[`${n}src`],o.complete&&o.width&&o.height?s=ti([o.width,o.height]):(i[`u_texture${r}_size`]=()=>o.complete?[o.width,o.height]:[0,0],e.addUniform(`vec2 u_texture${r}_size`),s=`u_texture${r}_size`),i[`u_texture${r}`]=o,e.addUniform(`sampler2D u_texture${r}`),s}function Yi(t,e,i,n,r){let o=ji(i,t[`${e}offset`],de.Fq)
if(`${e}offset-origin`in t)switch(t[`${e}offset-origin`]){case"top-right":o=`vec2(${n}.x, 0.) + ${r} * vec2(-1., 0.) + ${o} * vec2(-1., 1.)`
break
case"bottom-left":o=`vec2(0., ${n}.y) + ${r} * vec2(0., -1.) + ${o} * vec2(1., -1.)`
break
case"bottom-right":o=`${n} - ${r} - ${o}`}return o}class Xi extends bi.A{constructor(t){super(Object.assign({},t)),this.parseResult_=function(t){const e={inFragmentShader:!1,properties:{},variables:{},functions:{},style:t},i={inFragmentShader:!0,variables:e.variables,properties:{},functions:{},style:t},n=new fi,r={}
if("icon-src"in t?function(t,e,i,n,r){let o="vec4(1.0)"
"icon-color"in t&&(o=ji(r,t["icon-color"],de.mE)),"icon-opacity"in t&&(o=`${o} * ${ji(r,t["icon-opacity"],de.wl)}`)
const s=qi(t["icon-src"]),a=Wi(t,e,i,"icon-",s)
if(e.setSymbolColorExpression(`${o} * samplePremultiplied(u_texture${s}, v_texCoord)`).setSymbolSizeExpression(a),"icon-width"in t&&"icon-height"in t&&e.setSymbolSizeExpression(`vec2(${ji(n,t["icon-width"],de.wl)}, ${ji(n,t["icon-height"],de.wl)})`),"icon-offset"in t&&"icon-size"in t){const i=ji(n,t["icon-size"],de.Fq),r=e.getSymbolSizeExpression()
e.setSymbolSizeExpression(i)
const o=Yi(t,"icon-",n,"v_quadSizePx",i)
e.setTextureCoordinateExpression(`(vec4((${o}).xyxy) + vec4(0., 0., ${i})) / (${r}).xyxy`)}if(Vi(t,e,n,"icon-"),"icon-anchor"in t){const i=ji(n,t["icon-anchor"],de.Fq)
let r,o="1.0"
"icon-scale"in t&&(o=ji(n,t["icon-scale"],de.wl|de.Fq)),r="pixels"===t["icon-anchor-x-units"]&&"pixels"===t["icon-anchor-y-units"]?`${i} * ${o}`:"pixels"===t["icon-anchor-x-units"]?`${i} * vec2(vec2(${o}).x, v_quadSizePx.y)`:"pixels"===t["icon-anchor-y-units"]?`${i} * vec2(v_quadSizePx.x, vec2(${o}).x)`:`${i} * v_quadSizePx`
let s=`v_quadSizePx * vec2(0.5, -0.5) + ${r} * vec2(-1., 1.)`
if("icon-anchor-origin"in t)switch(t["icon-anchor-origin"]){case"top-right":s=`v_quadSizePx * -0.5 + ${r}`
break
case"bottom-left":s=`v_quadSizePx * 0.5 - ${r}`
break
case"bottom-right":s=`v_quadSizePx * vec2(-0.5, 0.5) + ${r} * vec2(1., -1.)`}e.setSymbolOffsetExpression(`${e.getSymbolOffsetExpression()} + ${s}`)}}(t,n,r,e,i):"shape-points"in t?function(t,e,i,n,r){r.functions.round="float round(float v) {\n  return sign(v) * floor(abs(v) + 0.5);\n}",r.functions.starDistanceField="float starDistanceField(vec2 point, float numPoints, float radius, float radius2, float angle) {\n  float startAngle = -PI * 0.5 + angle; // tip starts upwards and rotates clockwise with angle\n  float c = cos(startAngle);\n  float s = sin(startAngle);\n  vec2 pointRotated = vec2(c * point.x - s * point.y, s * point.x + c * point.y);\n  float alpha = TWO_PI / numPoints; // the angle of one sector\n  float beta = atan(pointRotated.y, pointRotated.x);\n  float gamma = round(beta / alpha) * alpha; // angle in sector\n  c = cos(-gamma);\n  s = sin(-gamma);\n  vec2 inSector = vec2(c * pointRotated.x - s * pointRotated.y, abs(s * pointRotated.x + c * pointRotated.y));\n  vec2 tipToPoint = inSector + vec2(-radius, 0.);\n  vec2 edgeNormal = vec2(radius2 * sin(alpha * 0.5), -radius2 * cos(alpha * 0.5) + radius);\n  return dot(normalize(edgeNormal), tipToPoint);\n}",r.functions.regularDistanceField="float regularDistanceField(vec2 point, float numPoints, float radius, float angle) {\n  float startAngle = -PI * 0.5 + angle; // tip starts upwards and rotates clockwise with angle\n  float c = cos(startAngle);\n  float s = sin(startAngle);\n  vec2 pointRotated = vec2(c * point.x - s * point.y, s * point.x + c * point.y);\n  float alpha = TWO_PI / numPoints; // the angle of one sector\n  float radiusIn = radius * cos(PI / numPoints);\n  float beta = atan(pointRotated.y, pointRotated.x);\n  float gamma = round((beta - alpha * 0.5) / alpha) * alpha + alpha * 0.5; // angle in sector from mid\n  c = cos(-gamma);\n  s = sin(-gamma);\n  vec2 inSector = vec2(c * pointRotated.x - s * pointRotated.y, abs(s * pointRotated.x + c * pointRotated.y));\n  return inSector.x - radiusIn;\n}",Vi(t,e,n,"shape-")
let o=null
"shape-opacity"in t&&(o=ji(r,t["shape-opacity"],de.wl))
let s="coordsPx"
"shape-scale"in t&&(s=`coordsPx / ${ji(r,t["shape-scale"],de.wl|de.Fq)}`)
let a=null
"shape-fill-color"in t&&(a=ji(r,t["shape-fill-color"],de.mE))
let l=null
"shape-stroke-color"in t&&(l=ji(r,t["shape-stroke-color"],de.mE))
let h=null
"shape-stroke-width"in t&&(h=ji(r,t["shape-stroke-width"],de.wl))
const u=ji(r,t["shape-points"],de.wl)
let c,d="0."
"shape-angle"in t&&(d=ji(r,t["shape-angle"],de.wl))
let f=ji(r,t["shape-radius"],de.wl)
if(null!==h&&(f=`${f} + ${h} * 0.5`),"shape-radius2"in t){let e=ji(r,t["shape-radius2"],de.wl)
null!==h&&(e=`${e} + ${h} * 0.5`),c=`starDistanceField(${s}, ${u}, ${f}, ${e}, ${d})`}else c=`regularDistanceField(${s}, ${u}, ${f}, ${d})`
const p=Zi(c,a,l,h,o)
e.setSymbolColorExpression(p)}(t,n,0,e,i):"circle-radius"in t&&function(t,e,i,n,r){r.functions.circleDistanceField="float circleDistanceField(vec2 point, float radius) {\n  return length(point) - radius;\n}",Vi(t,e,n,"circle-")
let o=null
"circle-opacity"in t&&(o=ji(r,t["circle-opacity"],de.wl))
let s="coordsPx"
"circle-scale"in t&&(s=`coordsPx / ${ji(r,t["circle-scale"],de.wl|de.Fq)}`)
let a=null
"circle-fill-color"in t&&(a=ji(r,t["circle-fill-color"],de.mE))
let l=null
"circle-stroke-color"in t&&(l=ji(r,t["circle-stroke-color"],de.mE))
let h=ji(r,t["circle-radius"],de.wl),u=null
"circle-stroke-width"in t&&(u=ji(r,t["circle-stroke-width"],de.wl),h=`(${h} + ${u} * 0.5)`)
const c=Zi(`circleDistanceField(${s}, ${h})`,a,l,u,o)
e.setSymbolColorExpression(c)}(t,n,0,e,i),function(t,e,i,n,r){if("stroke-color"in t&&e.setStrokeColorExpression(ji(r,t["stroke-color"],de.mE)),"stroke-pattern-src"in t){const n=qi(t["stroke-pattern-src"]),o=Wi(t,e,i,"stroke-pattern-",n)
let s=o,a="vec2(0.)"
"stroke-pattern-offset"in t&&"stroke-pattern-size"in t&&(s=ji(r,t["stroke-pattern-size"],de.Fq),a=Yi(t,"stroke-pattern-",r,o,s))
let l="0."
"stroke-pattern-spacing"in t&&(l=ji(r,t["stroke-pattern-spacing"],de.wl)),r.functions.sampleStrokePattern="vec4 sampleStrokePattern(sampler2D texture, vec2 textureSize, vec2 textureOffset, vec2 sampleSize, float spacingPx, float currentLengthPx, float currentRadiusRatio, float lineWidth) {\n  float currentLengthScaled = currentLengthPx * sampleSize.y / lineWidth;\n  float spacingScaled = spacingPx * sampleSize.y / lineWidth;\n  float uCoordPx = mod(currentLengthScaled, (sampleSize.x + spacingScaled));\n  // make sure that we're not sampling too close to the borders to avoid interpolation with outside pixels\n  uCoordPx = clamp(uCoordPx, 0.5, sampleSize.x - 0.5);\n  float vCoordPx = (-currentRadiusRatio * 0.5 + 0.5) * sampleSize.y;\n  vec2 texCoord = (vec2(uCoordPx, vCoordPx) + textureOffset) / textureSize;\n  return samplePremultiplied(texture, texCoord);\n}"
const h=`u_texture${n}`
let u="1."
"stroke-color"in t&&(u=e.getStrokeColorExpression()),e.setStrokeColorExpression(`${u} * sampleStrokePattern(${h}, ${o}, ${a}, ${s}, ${l}, currentLengthPx, currentRadiusRatio, v_width)`)}if("stroke-width"in t&&e.setStrokeWidthExpression(ji(n,t["stroke-width"],de.wl)),"stroke-offset"in t&&e.setStrokeOffsetExpression(ji(n,t["stroke-offset"],de.wl)),"stroke-line-cap"in t&&e.setStrokeCapExpression(ji(n,t["stroke-line-cap"],de.cT)),"stroke-line-join"in t&&e.setStrokeJoinExpression(ji(n,t["stroke-line-join"],de.cT)),"stroke-miter-limit"in t&&e.setStrokeMiterLimitExpression(ji(n,t["stroke-miter-limit"],de.wl)),"stroke-line-dash"in t){r.functions.getSingleDashDistance=`float getSingleDashDistance(float distance, float radius, float dashOffset, float dashLength, float dashLengthTotal, float capType) {\n  float localDistance = mod(distance, dashLengthTotal);\n  float distanceSegment = abs(localDistance - dashOffset - dashLength * 0.5) - dashLength * 0.5;\n  distanceSegment = min(distanceSegment, dashLengthTotal - localDistance);\n  if (capType == ${oi("square")}) {\n    distanceSegment -= v_width * 0.5;\n  } else if (capType == ${oi("round")}) {\n    distanceSegment = min(distanceSegment, sqrt(distanceSegment * distanceSegment + radius * radius) - v_width * 0.5);\n  }\n  return distanceSegment;\n}`
let i=t["stroke-line-dash"].map((t=>ji(r,t,de.wl)))
i.length%2==1&&(i=[...i,...i])
let o="0."
"stroke-line-dash-offset"in t&&(o=ji(n,t["stroke-line-dash-offset"],de.wl))
const s=`dashDistanceField_${qi(t["stroke-line-dash"])}`,a=i.map(((t,e)=>`float dashLength${e} = ${t};`)),l=i.map(((t,e)=>`dashLength${e}`)).join(" + ")
let h="0.",u=`getSingleDashDistance(distance, radius, ${h}, dashLength0, totalDashLength, capType)`
for(let t=2;t<i.length;t+=2)h=`${h} + dashLength${t-2} + dashLength${t-1}`,u=`min(${u}, getSingleDashDistance(distance, radius, ${h}, dashLength${t}, totalDashLength, capType))`
r.functions[s]=`float ${s}(float distance, float radius, float capType) {\n  ${a.join("\n  ")}\n  float totalDashLength = ${l};\n  return ${u};\n}`,e.setStrokeDistanceFieldExpression(`${s}(currentLengthPx + ${o}, currentRadiusPx, capType)`)}}(t,n,r,e,i),function(t,e,i,n,r){if("fill-color"in t&&e.setFillColorExpression(ji(r,t["fill-color"],de.mE)),"fill-pattern-src"in t){const n=qi(t["fill-pattern-src"]),o=Wi(t,e,i,"fill-pattern-",n)
let s=o,a="vec2(0.)"
"fill-pattern-offset"in t&&"fill-pattern-size"in t&&(s=ji(r,t["fill-pattern-size"],de.Fq),a=Yi(t,"fill-pattern-",r,o,s)),r.functions.sampleFillPattern="vec4 sampleFillPattern(sampler2D texture, vec2 textureSize, vec2 textureOffset, vec2 sampleSize, vec2 pxOrigin, vec2 pxPosition) {\n  float scaleRatio = pow(2., mod(u_zoom + 0.5, 1.) - 0.5);\n  vec2 pxRelativePos = pxPosition - pxOrigin;\n  // rotate the relative position from origin by the current view rotation\n  pxRelativePos = vec2(pxRelativePos.x * cos(u_rotation) - pxRelativePos.y * sin(u_rotation), pxRelativePos.x * sin(u_rotation) + pxRelativePos.y * cos(u_rotation));\n  // sample position is computed according to the sample offset & size\n  vec2 samplePos = mod(pxRelativePos / scaleRatio, sampleSize);\n  // also make sure that we're not sampling too close to the borders to avoid interpolation with outside pixels\n  samplePos = clamp(samplePos, vec2(0.5), sampleSize - vec2(0.5));\n  samplePos.y = sampleSize.y - samplePos.y; // invert y axis so that images appear upright\n  return samplePremultiplied(texture, (samplePos + textureOffset) / textureSize);\n}"
const l=`u_texture${n}`
let h="1."
"fill-color"in t&&(h=e.getFillColorExpression()),e.setFillColorExpression(`${h} * sampleFillPattern(${l}, ${o}, ${a}, ${s}, pxOrigin, pxPos)`)}}(t,n,r,0,i),t.filter){const e=ji(i,t.filter,de.T8)
n.setFragmentDiscardExpression(`!${e}`)}Object.keys(i.variables).forEach((function(e){const o=i.variables[e],s=si(o.name)
let a
n.addUniform(`${Ui(o.type)} ${s}`),a=o.type===de.cT?()=>ri(t.variables[o.name]):o.type===de.mE?()=>Gi([...(0,Je._j)(t.variables[o.name]||"#eee")]):o.type===de.T8?()=>t.variables[o.name]?1:0:()=>t.variables[o.name],r[s]=a})),Object.keys(i.properties).forEach((function(t){const r=i.properties[t]
e.properties[t]||(e.properties[t]=r)
let o=Ui(r.type),s=`a_prop_${r.name}`
r.type===de.mE&&(o="vec4",s=`unpackColor(${s})`,n.addVertexShaderFunction("vec4 unpackColor(vec2 packedColor) {\n  return fract(packedColor[1] / 256.0) * vec4(\n    fract(floor(packedColor[0] / 256.0) / 256.0),\n    fract(packedColor[0] / 256.0),\n    fract(floor(packedColor[1] / 256.0) / 256.0),\n    1.0\n  );\n}")),n.addVarying(`v_prop_${r.name}`,o,s)})),Object.keys(e.properties).forEach((function(t){const i=e.properties[t]
n.addAttribute(`${Ui(i.type)} a_prop_${i.name}`)}))
const o=Object.keys(e.properties).map((function(t){const i=e.properties[t]
let n
return n=i.evaluator?i.evaluator:i.type===de.cT?t=>ri(t.get(i.name)):i.type===de.mE?t=>Gi([...(0,Je._j)(t.get(i.name)||"#eee")]):i.type===de.T8?t=>t.get(i.name)?1:0:t=>t.get(i.name),{name:i.name,size:Bi(i.type),callback:n}}))
for(const s in e.functions)n.addVertexShaderFunction(e.functions[s])
for(const s in i.functions)n.addFragmentShaderFunction(i.functions[s])
return{builder:n,attributes:o.reduce(((t,e)=>({...t,[e.name]:{callback:e.callback,size:e.size}})),{}),uniforms:r}}(t.style),this.styleVariables_=t.style.variables||{},this.hitDetectionDisabled_=!!t.disableHitDetection}createRenderer(){const t=Object.keys(this.parseResult_.attributes).map((t=>({name:t,...this.parseResult_.attributes[t]})))
return new ue(this,{vertexShader:this.parseResult_.builder.getSymbolVertexShader(),fragmentShader:this.parseResult_.builder.getSymbolFragmentShader(),hitDetectionEnabled:!this.hitDetectionDisabled_,uniforms:this.parseResult_.uniforms,attributes:t})}updateStyleVariables(t){Object.assign(this.styleVariables_,t),this.changed()}}const Hi=Xi
var $i=i(9043)
function Ki(t,e){const i=`\n    attribute vec2 ${He};\n    uniform mat4 ${ke};\n    uniform float ${Ve};\n    uniform float ${Ze};\n    uniform float ${We};\n    uniform float ${Ye};\n    uniform float ${Xe};\n    uniform float ${je};\n\n    varying vec2 v_textureCoord;\n    varying vec2 v_mapCoord;\n\n    void main() {\n      v_textureCoord = ${He};\n      v_mapCoord = vec2(\n        ${Ye} + ${We} * ${Ve} * v_textureCoord[0],\n        ${Xe} - ${We} * ${Ze} * v_textureCoord[1]\n      );\n      gl_Position = ${ke} * vec4(${He}, ${je}, 1.0);\n    }\n  `,n={inFragmentShader:!1,variables:{},properties:{},functions:{},bandCount:0,style:{},inFragmentShader:!0,bandCount:e,style:t},r=[]
if(void 0!==t.color){const e=ji(n,t.color,de.mE)
r.push(`color = ${e};`)}if(void 0!==t.contrast){const e=ji(n,t.contrast,de.wl)
r.push(`color.rgb = clamp((${e} + 1.0) * color.rgb - (${e} / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(void 0!==t.exposure){const e=ji(n,t.exposure,de.wl)
r.push(`color.rgb = clamp((${e} + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(void 0!==t.saturation){const e=ji(n,t.saturation,de.wl)
r.push(`\n      float saturation = ${e} + 1.0;\n      float sr = (1.0 - saturation) * 0.2126;\n      float sg = (1.0 - saturation) * 0.7152;\n      float sb = (1.0 - saturation) * 0.0722;\n      mat3 saturationMatrix = mat3(\n        sr + saturation, sr, sr,\n        sg, sg + saturation, sg,\n        sb, sb, sb + saturation\n      );\n      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));\n    `)}if(void 0!==t.gamma){const e=ji(n,t.gamma,de.wl)
r.push(`color.rgb = pow(color.rgb, vec3(1.0 / ${e}));`)}if(void 0!==t.brightness){const e=ji(n,t.brightness,de.wl)
r.push(`color.rgb = clamp(color.rgb + ${e}, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}const o={},s=Object.keys(n.variables).length
if(s>1&&!t.variables)throw new Error(`Missing variables in style (expected ${n.variables})`)
for(let u=0;u<s;++u){const e=n.variables[Object.keys(n.variables)[u]]
if(!(e.name in t.variables))throw new Error(`Missing '${e.name}' in style variables`)
o[si(e.name)]=function(){let i=t.variables[e.name]
return"string"==typeof i&&(i=ri(i)),void 0!==i?i:-9999999}}const a=Object.keys(o).map((function(t){return`uniform float ${t};`})),l=Math.ceil(e/4)
a.push(`uniform sampler2D ${qe}[${l}];`),n.paletteTextures&&a.push(`uniform sampler2D ${li}[${n.paletteTextures.length}];`)
const h=Object.keys(n.functions).map((function(t){return n.functions[t]}))
return{vertexShader:i,fragmentShader:`\n    #ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n    #else\n    precision mediump float;\n    #endif\n\n    varying vec2 v_textureCoord;\n    varying vec2 v_mapCoord;\n    uniform vec4 ${Ge};\n    uniform float ${ze};\n    uniform float ${Ve};\n    uniform float ${Ze};\n    uniform float ${Be};\n    uniform float ${Ue};\n\n    ${a.join("\n")}\n\n    ${h.join("\n")}\n\n    void main() {\n      if (\n        v_mapCoord[0] < ${Ge}[0] ||\n        v_mapCoord[1] < ${Ge}[1] ||\n        v_mapCoord[0] > ${Ge}[2] ||\n        v_mapCoord[1] > ${Ge}[3]\n      ) {\n        discard;\n      }\n\n      vec4 color = texture2D(${qe}[0],  v_textureCoord);\n\n      ${r.join("\n")}\n\n      gl_FragColor = color;\n      gl_FragColor.rgb *= gl_FragColor.a;\n      gl_FragColor *= ${ze};\n    }`,uniforms:o,paletteTextures:n.paletteTextures}}class Ji extends $i.A{constructor(t){const e=(t=t?Object.assign({},t):{}).style||{}
delete t.style
const i=t.cacheSize
delete t.cacheSize,super(t),this.sources_=t.sources,this.renderedSource_=null,this.renderedResolution_=NaN,this.style_=e,this.cacheSize_=i,this.styleVariables_=this.style_.variables||{},this.addChangeListener(Bt.A.SOURCE,this.handleSourceUpdate_)}getSources(t,e){const i=this.getSource()
return this.sources_?"function"==typeof this.sources_?this.sources_(t,e):this.sources_:i?[i]:[]}getRenderSource(){return this.renderedSource_||this.getSource()}getSourceState(){const t=this.getRenderSource()
return t?t.getState():"undefined"}handleSourceUpdate_(){this.hasRenderer()&&this.getRenderer().clearCache(),this.getSource()&&this.setStyle(this.style_)}getSourceBandCount_(){const t=Number.MAX_SAFE_INTEGER,e=this.getSources([-t,-t,t,t],t)
return e&&e.length&&"bandCount"in e[0]?e[0].bandCount:4}createRenderer(){const t=Ki(this.style_,this.getSourceBandCount_())
return new Ke(this,{vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms,cacheSize:this.cacheSize_,paletteTextures:t.paletteTextures})}renderSources(t,e){const i=this.getRenderer()
let n
for(let r=0,o=e.length;r<o;++r)this.renderedSource_=e[r],i.prepareFrame(t)&&(n=i.renderFrame(t))
return n}render(t,e){this.rendered=!0
const i=t.viewState,n=this.getSources(t.extent,i.resolution)
let r=!0
for(let s=0,a=n.length;s<a;++s){const t=n[s],e=t.getState()
if("loading"==e){const e=()=>{"ready"==t.getState()&&(t.removeEventListener("change",e),this.changed())}
t.addEventListener("change",e)}r=r&&"ready"==e}const o=this.renderSources(t,n)
if(this.getRenderer().renderComplete&&r)return this.renderedResolution_=i.resolution,o
if(this.renderedResolution_>.5*i.resolution){const e=this.getSources(t.extent,this.renderedResolution_).filter((t=>!n.includes(t)))
if(e.length>0)return this.renderSources(t,e)}return o}setStyle(t){this.styleVariables_=t.variables||{},this.style_=t
const e=Ki(this.style_,this.getSourceBandCount_())
this.getRenderer().reset({vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms,paletteTextures:e.paletteTextures}),this.changed()}updateStyleVariables(t){Object.assign(this.styleVariables_,t),this.changed()}}Ji.prototype.dispose
const Qi=Ji},9855:(t,e,i)=>{"use strict"
i.d(e,{A:()=>h})
var n=i(1051),r=i(7439),o=i(1736),s=i(6249),a=i(5306)
class l extends n.A{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background
const e=Object.assign({},t)
"object"==typeof t.properties&&(delete e.properties,Object.assign(e,t.properties)),e[r.A.OPACITY]=void 0!==t.opacity?t.opacity:1,(0,s.v)("number"==typeof e[r.A.OPACITY],"Layer opacity must be a number"),e[r.A.VISIBLE]=void 0===t.visible||t.visible,e[r.A.Z_INDEX]=t.zIndex,e[r.A.MAX_RESOLUTION]=void 0!==t.maxResolution?t.maxResolution:1/0,e[r.A.MIN_RESOLUTION]=void 0!==t.minResolution?t.minResolution:0,e[r.A.MIN_ZOOM]=void 0!==t.minZoom?t.minZoom:-1/0,e[r.A.MAX_ZOOM]=void 0!==t.maxZoom?t.maxZoom:1/0,this.className_=void 0!==e.className?e.className:"ol-layer",delete e.className,this.setProperties(e),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const e=this.state_||{layer:this,managed:void 0===t||t},i=this.getZIndex()
return e.opacity=(0,a.qE)(Math.round(100*this.getOpacity())/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==i||e.managed?i:1/0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}getLayersArray(t){return(0,o.b0)()}getLayerStatesArray(t){return(0,o.b0)()}getExtent(){return this.get(r.A.EXTENT)}getMaxResolution(){return this.get(r.A.MAX_RESOLUTION)}getMinResolution(){return this.get(r.A.MIN_RESOLUTION)}getMinZoom(){return this.get(r.A.MIN_ZOOM)}getMaxZoom(){return this.get(r.A.MAX_ZOOM)}getOpacity(){return this.get(r.A.OPACITY)}getSourceState(){return(0,o.b0)()}getVisible(){return this.get(r.A.VISIBLE)}getZIndex(){return this.get(r.A.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(r.A.EXTENT,t)}setMaxResolution(t){this.set(r.A.MAX_RESOLUTION,t)}setMinResolution(t){this.set(r.A.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(r.A.MAX_ZOOM,t)}setMinZoom(t){this.set(r.A.MIN_ZOOM,t)}setOpacity(t){(0,s.v)("number"==typeof t,"Layer opacity must be a number"),this.set(r.A.OPACITY,t)}setVisible(t){this.set(r.A.VISIBLE,t)}setZIndex(t){this.set(r.A.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const h=l},9043:(t,e,i)=>{"use strict"
i.d(e,{A:()=>s})
var n=i(1257),r=i(3035)
class o extends n.A{constructor(t){t=t||{}
const e=Object.assign({},t)
delete e.preload,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un,this.setPreload(void 0!==t.preload?t.preload:0),this.setUseInterimTilesOnError(void 0===t.useInterimTilesOnError||t.useInterimTilesOnError)}getPreload(){return this.get(r.A.PRELOAD)}setPreload(t){this.set(r.A.PRELOAD,t)}getUseInterimTilesOnError(){return this.get(r.A.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(t){this.set(r.A.USE_INTERIM_TILES_ON_ERROR,t)}getData(t){return super.getData(t)}}const s=o},6789:(t,e,i)=>{"use strict"
i.d(e,{A:()=>Z})
var n=i(1257),r=i(7179),o=i(5337),s=i(6602),a=i(8343),l=i(2375),h=i(3247),u=i(7110),c=i(9769),d=i(8548),f=i(659)
function p(t,e,i){const n=(0,d.qg)(t,i)
if(!(0,d.ho)(e,n.type)){const t=(0,d.go)(e),i=(0,d.go)(n.type)
throw new Error(`Expected expression to be of type ${t}, got ${i}`)}return g(n,i)}function g(t,e){if(t instanceof d._D){if(t.type===d.mE&&"string"==typeof t.value){const e=(0,f.sH)(t.value)
return function(){return e}}return function(){return t.value}}const i=t.operator
switch(i){case d.ZD.Number:case d.ZD.String:case d.ZD.Coalesce:return function(t,e){const i=t.operator,n=t.args.length,r=new Array(n)
for(let o=0;o<n;++o)r[o]=g(t.args[o],e)
switch(i){case d.ZD.Coalesce:return t=>{for(let e=0;e<n;++e){const i=r[e](t)
if(null!=i)return i}throw new Error("Expected one of the values to be non-null")}
case d.ZD.Number:case d.ZD.String:return t=>{for(let e=0;e<n;++e){const n=r[e](t)
if(typeof n===i)return n}throw new Error(`Expected one of the values to be a ${i}`)}
default:throw new Error(`Unsupported assertion operator ${i}`)}}(t,e)
case d.ZD.Get:case d.ZD.Var:return function(t,e){const i=t.args[0].value
switch(t.operator){case d.ZD.Get:return t=>t.properties[i]
case d.ZD.Var:return t=>t.variables[i]
default:throw new Error(`Unsupported accessor operator ${t.operator}`)}}(t)
case d.ZD.Id:return t=>t.featureId
case d.ZD.GeometryType:return t=>t.geometryType
case d.ZD.Concat:{const i=t.args.map((t=>g(t,e)))
return t=>"".concat(...i.map((e=>e(t).toString())))}case d.ZD.Resolution:return t=>t.resolution
case d.ZD.Any:case d.ZD.All:case d.ZD.Between:case d.ZD.In:case d.ZD.Not:return function(t,e){const i=t.operator,n=t.args.length,r=new Array(n)
for(let o=0;o<n;++o)r[o]=g(t.args[o],e)
switch(i){case d.ZD.Any:return t=>{for(let e=0;e<n;++e)if(r[e](t))return!0
return!1}
case d.ZD.All:return t=>{for(let e=0;e<n;++e)if(!r[e](t))return!1
return!0}
case d.ZD.Between:return t=>{const e=r[0](t),i=r[1](t),n=r[2](t)
return e>=i&&e<=n}
case d.ZD.In:return t=>{const e=r[0](t)
for(let i=1;i<n;++i)if(e===r[i](t))return!0
return!1}
case d.ZD.Not:return t=>!r[0](t)
default:throw new Error(`Unsupported logical operator ${i}`)}}(t,e)
case d.ZD.Equal:case d.ZD.NotEqual:case d.ZD.LessThan:case d.ZD.LessThanOrEqualTo:case d.ZD.GreaterThan:case d.ZD.GreaterThanOrEqualTo:return function(t,e){const i=t.operator,n=g(t.args[0],e),r=g(t.args[1],e)
switch(i){case d.ZD.Equal:return t=>n(t)===r(t)
case d.ZD.NotEqual:return t=>n(t)!==r(t)
case d.ZD.LessThan:return t=>n(t)<r(t)
case d.ZD.LessThanOrEqualTo:return t=>n(t)<=r(t)
case d.ZD.GreaterThan:return t=>n(t)>r(t)
case d.ZD.GreaterThanOrEqualTo:return t=>n(t)>=r(t)
default:throw new Error(`Unsupported comparison operator ${i}`)}}(t,e)
case d.ZD.Multiply:case d.ZD.Divide:case d.ZD.Add:case d.ZD.Subtract:case d.ZD.Clamp:case d.ZD.Mod:case d.ZD.Pow:case d.ZD.Abs:case d.ZD.Floor:case d.ZD.Ceil:case d.ZD.Round:case d.ZD.Sin:case d.ZD.Cos:case d.ZD.Atan:case d.ZD.Sqrt:return function(t,e){const i=t.operator,n=t.args.length,r=new Array(n)
for(let o=0;o<n;++o)r[o]=g(t.args[o],e)
switch(i){case d.ZD.Multiply:return t=>{let e=1
for(let i=0;i<n;++i)e*=r[i](t)
return e}
case d.ZD.Divide:return t=>r[0](t)/r[1](t)
case d.ZD.Add:return t=>{let e=0
for(let i=0;i<n;++i)e+=r[i](t)
return e}
case d.ZD.Subtract:return t=>r[0](t)-r[1](t)
case d.ZD.Clamp:return t=>{const e=r[0](t),i=r[1](t)
if(e<i)return i
const n=r[2](t)
return e>n?n:e}
case d.ZD.Mod:return t=>r[0](t)%r[1](t)
case d.ZD.Pow:return t=>Math.pow(r[0](t),r[1](t))
case d.ZD.Abs:return t=>Math.abs(r[0](t))
case d.ZD.Floor:return t=>Math.floor(r[0](t))
case d.ZD.Ceil:return t=>Math.ceil(r[0](t))
case d.ZD.Round:return t=>Math.round(r[0](t))
case d.ZD.Sin:return t=>Math.sin(r[0](t))
case d.ZD.Cos:return t=>Math.cos(r[0](t))
case d.ZD.Atan:return 2===n?t=>Math.atan2(r[0](t),r[1](t)):t=>Math.atan(r[0](t))
case d.ZD.Sqrt:return t=>Math.sqrt(r[0](t))
default:throw new Error(`Unsupported numeric operator ${i}`)}}(t,e)
case d.ZD.Case:return function(t,e){const i=t.args.length,n=new Array(i)
for(let r=0;r<i;++r)n[r]=g(t.args[r],e)
return t=>{for(let e=0;e<i-1;e+=2)if(n[e](t))return n[e+1](t)
return n[i-1](t)}}(t,e)
case d.ZD.Match:return function(t,e){const i=t.args.length,n=new Array(i)
for(let r=0;r<i;++r)n[r]=g(t.args[r],e)
return t=>{const e=n[0](t)
for(let r=1;r<i;r+=2)if(e===n[r](t))return n[r+1](t)
return n[i-1](t)}}(t,e)
case d.ZD.Interpolate:return function(t,e){const i=t.args.length,n=new Array(i)
for(let r=0;r<i;++r)n[r]=g(t.args[r],e)
return t=>{const e=n[0](t),r=n[1](t)
let o,s
for(let a=2;a<i;a+=2){const i=n[a](t)
let l=n[a+1](t)
const h=Array.isArray(l)
if(h&&(l=(0,f.fu)(l)),i>=r)return 2===a?l:h?m(e,r,o,s,i,l):_(e,r,o,s,i,l)
o=i,s=l}return s}}(t,e)
case d.ZD.ToString:return function(t,e){const i=t.operator,n=t.args.length,r=new Array(n)
for(let o=0;o<n;++o)r[o]=g(t.args[o],e)
if(i===d.ZD.ToString)return e=>{const i=r[0](e)
return t.args[0].type===d.mE?(0,f.dI)(i):i.toString()}
throw new Error(`Unsupported convert operator ${i}`)}(t,e)
default:throw new Error(`Unsupported operator ${i}`)}}function _(t,e,i,n,r,o){const s=r-i
if(0===s)return n
const a=e-i
return n+(1===t?a/s:(Math.pow(t,a)-1)/(Math.pow(t,s)-1))*(o-n)}function m(t,e,i,n,r,o){if(0==r-i)return n
const s=(0,f.eE)(n),a=(0,f.eE)(o)
let l=a[2]-s[2]
l>180?l-=360:l<-180&&(l+=360)
const h=[_(t,e,i,s[0],r,a[0]),_(t,e,i,s[1],r,a[1]),s[2]+_(t,e,i,0,r,l),_(t,e,i,n[3],r,o[3])]
return(0,f.S8)((0,f.cD)(h))}var y=i(7931),v=i(1673)
function x(t){return!0}function b(t){const e=(0,d.SR)(),i=t.length,n=new Array(i)
for(let s=0;s<i;++s)n[s]=w(t[s],e)
const r={variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""},o=new Array(i)
return function(t,s){if(r.properties=t.getPropertiesInternal(),r.resolution=s,e.featureId){const e=t.getId()
r.featureId=void 0!==e?e:null}let a=0
for(let e=0;e<i;++e){const t=n[e](r)
t&&(o[a]=t,a+=1)}return o.length=a,o}}function w(t,e){const i=E(t,"",e),n=S(t,"",e),r=function(t,e){const i="text-",n=P(t,i+"value",e)
if(!n)return null
const r=E(t,i,e),o=E(t,i+"background-",e),s=S(t,i,e),a=S(t,i+"background-",e),l=P(t,i+"font",e),h=C(t,i+"max-angle",e),u=C(t,i+"offset-x",e),d=C(t,i+"offset-y",e),f=T(t,i+"overflow",e),p=P(t,i+"placement",e),g=C(t,i+"repeat",e),_=L(t,i+"scale",e),m=T(t,i+"rotate-with-view",e),y=C(t,i+"rotation",e),v=P(t,i+"align",e),x=P(t,i+"justify",e),b=P(t,i+"baseline",e),w=M(t,i+"padding",e),I=k(t,i+"declutter-mode"),A=new c.A({declutterMode:I})
return function(t){if(A.setText(n(t)),r&&A.setFill(r(t)),o&&A.setBackgroundFill(o(t)),s&&A.setStroke(s(t)),a&&A.setBackgroundStroke(a(t)),l&&A.setFont(l(t)),h&&A.setMaxAngle(h(t)),u&&A.setOffsetX(u(t)),d&&A.setOffsetY(d(t)),f&&A.setOverflow(f(t)),p){const e=p(t)
if("point"!==e&&"line"!==e)throw new Error("Expected point or line for text-placement")
A.setPlacement(e)}if(g&&A.setRepeat(g(t)),_&&A.setScale(_(t)),m&&A.setRotateWithView(m(t)),y&&A.setRotation(y(t)),v){const e=v(t)
if("left"!==e&&"center"!==e&&"right"!==e&&"end"!==e&&"start"!==e)throw new Error("Expected left, right, center, start, or end for text-align")
A.setTextAlign(e)}if(x){const e=x(t)
if("left"!==e&&"right"!==e&&"center"!==e)throw new Error("Expected left, right, or center for text-justify")
A.setJustify(e)}if(b){const e=b(t)
if("bottom"!==e&&"top"!==e&&"middle"!==e&&"alphabetic"!==e&&"hanging"!==e)throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline")
A.setTextBaseline(e)}return w&&A.setPadding(w(t)),A}}(t,e),a=function(t,e){return"icon-src"in t?function(t,e){const i="icon-",n=i+"src",r=j(t[n],n),o=A(t,i+"anchor",e),s=L(t,i+"scale",e),a=C(t,i+"opacity",e),h=A(t,i+"displacement",e),u=C(t,i+"rotation",e),c=T(t,i+"rotate-with-view",e),d=N(t,i+"anchor-origin"),f=F(t,i+"anchor-x-units"),p=F(t,i+"anchor-y-units"),g=function(t,e){const i=t[e]
if(void 0!==i)return B(i,e)}(t,i+"color"),_=function(t,e){const i=t[e]
if(void 0!==i){if("string"!=typeof i)throw new Error(`Expected a string for ${e}`)
return i}}(t,i+"cross-origin"),m=function(t,e){const i=t[e]
if(void 0!==i)return z(i,e)}(t,i+"offset"),y=N(t,i+"offset-origin"),v=O(t,i+"width"),x=O(t,i+"height"),b=D(t,i+"size"),w=k(t,i+"declutter-mode"),E=new l.A({src:r,anchorOrigin:d,anchorXUnits:f,anchorYUnits:p,color:g,crossOrigin:_,offset:m,offsetOrigin:y,height:x,width:v,size:b,declutterMode:w})
return function(t){return a&&E.setOpacity(a(t)),h&&E.setDisplacement(h(t)),u&&E.setRotation(u(t)),c&&E.setRotateWithView(c(t)),s&&E.setScale(s(t)),o&&E.setAnchor(o(t)),E}}(t,e):"shape-points"in t?function(t,e){const i="shape-",n=i+"points",r=i+"radius",o=G(t[n],n),s=G(t[r],r),a=E(t,i,e),l=S(t,i,e),u=L(t,i+"scale",e),c=A(t,i+"displacement",e),d=C(t,i+"rotation",e),f=T(t,i+"rotate-with-view",e),p=O(t,i+"radius2"),g=O(t,i+"angle"),_=k(t,i+"declutter-mode"),m=new h.A({points:o,radius:s,radius2:p,angle:g,declutterMode:_})
return function(t){return a&&m.setFill(a(t)),l&&m.setStroke(l(t)),c&&m.setDisplacement(c(t)),d&&m.setRotation(d(t)),f&&m.setRotateWithView(f(t)),u&&m.setScale(u(t)),m}}(t,e):"circle-radius"in t?function(t,e){const i="circle-",n=E(t,i,e),r=S(t,i,e),o=C(t,i+"radius",e),a=L(t,i+"scale",e),l=A(t,i+"displacement",e),h=C(t,i+"rotation",e),u=T(t,i+"rotate-with-view",e),c=k(t,i+"declutter-mode"),d=new s.A({radius:5,declutterMode:c})
return function(t){return o&&d.setRadius(o(t)),n&&d.setFill(n(t)),r&&d.setStroke(r(t)),l&&d.setDisplacement(l(t)),h&&d.setRotation(h(t)),u&&d.setRotateWithView(u(t)),a&&d.setScale(a(t)),d}}(t,e):null}(t,e),u=C(t,"z-index",e)
if(!(i||n||r||a||(0,y.p)(t)))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(t))
const d=new o.Ay
return function(t){let e=!0
if(i){const n=i(t)
n&&(e=!1),d.setFill(n)}if(n){const i=n(t)
i&&(e=!1),d.setStroke(i)}if(r){const i=r(t)
i&&(e=!1),d.setText(i)}if(a){const i=a(t)
i&&(e=!1),d.setImage(i)}return u&&d.setZIndex(u(t)),e?null:d}}function E(t,e,i){let n
if(n=e+"fill-pattern-src"in t?function(t,e,i){const n=P(t,e+"pattern-src",i),r=R(t,e+"pattern-offset",i),o=R(t,e+"pattern-size",i),s=I(t,e+"color",i)
return function(t){return{src:n(t),offset:r&&r(t),size:o&&o(t),color:s&&s(t)}}}(t,e+"fill-",i):I(t,e+"fill-color",i),!n)return null
const r=new a.A
return function(t){const e=n(t)
return"none"===e?null:(r.setColor(e),r)}}function S(t,e,i){const n=C(t,e+"stroke-width",i),r=I(t,e+"stroke-color",i)
if(!n&&!r)return null
const o=P(t,e+"stroke-line-cap",i),s=P(t,e+"stroke-line-join",i),a=M(t,e+"stroke-line-dash",i),l=C(t,e+"stroke-line-dash-offset",i),h=C(t,e+"stroke-miter-limit",i),c=new u.A
return function(t){if(r){const e=r(t)
if("none"===e)return null
c.setColor(e)}if(n&&c.setWidth(n(t)),o){const e=o(t)
if("butt"!==e&&"round"!==e&&"square"!==e)throw new Error("Expected butt, round, or square line cap")
c.setLineCap(e)}if(s){const e=s(t)
if("bevel"!==e&&"round"!==e&&"miter"!==e)throw new Error("Expected bevel, round, or miter line join")
c.setLineJoin(e)}return a&&c.setLineDash(a(t)),l&&c.setLineDashOffset(l(t)),h&&c.setMiterLimit(h(t)),c}}function C(t,e,i){if(!(e in t))return
const n=p(t[e],d.wl,i)
return function(t){return G(n(t),e)}}function P(t,e,i){if(!(e in t))return null
const n=p(t[e],d.cT,i)
return function(t){return j(n(t),e)}}function T(t,e,i){if(!(e in t))return null
const n=p(t[e],d.T8,i)
return function(t){const i=n(t)
if("boolean"!=typeof i)throw new Error(`Expected a boolean for ${e}`)
return i}}function I(t,e,i){if(!(e in t))return null
const n=p(t[e],d.mE|d.cT,i)
return function(t){return B(n(t),e)}}function M(t,e,i){if(!(e in t))return null
const n=p(t[e],d.Fq,i)
return function(t){return z(n(t),e)}}function A(t,e,i){if(!(e in t))return null
const n=p(t[e],d.Fq,i)
return function(t){const i=z(n(t),e)
if(2!==i.length)throw new Error(`Expected two numbers for ${e}`)
return i}}function R(t,e,i){if(!(e in t))return null
const n=p(t[e],d.Fq,i)
return function(t){return U(n(t),e)}}function L(t,e,i){if(!(e in t))return null
const n=p(t[e],d.Fq|d.wl,i)
return function(t){return"number"==typeof(i=n(t))?i:U(i,e)
var i}}function O(t,e){const i=t[e]
if(void 0!==i){if("number"!=typeof i)throw new Error(`Expected a number for ${e}`)
return i}}function D(t,e){const i=t[e]
if(void 0!==i){if("number"==typeof i)return(0,v.xq)(i)
if(!Array.isArray(i))throw new Error(`Expected a number or size array for ${e}`)
if(2!==i.length||"number"!=typeof i[0]||"number"!=typeof i[1])throw new Error(`Expected a number or size array for ${e}`)
return i}}function N(t,e){const i=t[e]
if(void 0!==i){if("bottom-left"!==i&&"bottom-right"!==i&&"top-left"!==i&&"top-right"!==i)throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`)
return i}}function F(t,e){const i=t[e]
if(void 0!==i){if("pixels"!==i&&"fraction"!==i)throw new Error(`Expected pixels or fraction for ${e}`)
return i}}function k(t,e){const i=t[e]
if(void 0!==i){if("string"!=typeof i)throw new Error(`Expected a string for ${e}`)
if("declutter"!==i&&"obstacle"!==i&&"none"!==i)throw new Error(`Expected declutter, obstacle, or none for ${e}`)
return i}}function z(t,e){if(!Array.isArray(t))throw new Error(`Expected an array for ${e}`)
const i=t.length
for(let n=0;n<i;++n)if("number"!=typeof t[n])throw new Error(`Expected an array of numbers for ${e}`)
return t}function j(t,e){if("string"!=typeof t)throw new Error(`Expected a string for ${e}`)
return t}function G(t,e){if("number"!=typeof t)throw new Error(`Expected a number for ${e}`)
return t}function B(t,e){if("string"==typeof t)return t
const i=z(t,e),n=i.length
if(n<3||n>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`)
return i}function U(t,e){const i=z(t,e)
if(2!==i.length)throw new Error(`Expected an array of two numbers for ${e}`)
return i}const q="renderOrder"
class V extends n.A{constructor(t){t=t||{}
const e=Object.assign({},t)
delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,super(e),this.declutter_=t.declutter?String(t.declutter):void 0,this.renderBuffer_=void 0!==t.renderBuffer?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=void 0!==t.updateWhileAnimating&&t.updateWhileAnimating,this.updateWhileInteracting_=void 0!==t.updateWhileInteracting&&t.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(q)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t,e){const i=this.getDeclutter()
i in t.declutter==0&&(t.declutter[i]=new r(9)),this.getRenderer().renderDeclutter(t,e)}setRenderOrder(t){this.set(q,t)}setStyle(t){this.style_=function(t){if(void 0===t)return o.d1
if(!t)return null
if("function"==typeof t)return t
if(t instanceof o.Ay)return t
if(!Array.isArray(t))return b([t])
if(0===t.length)return[]
const e=t.length,i=t[0]
if(i instanceof o.Ay){const i=new Array(e)
for(let n=0;n<e;++n){const e=t[n]
if(!(e instanceof o.Ay))throw new Error("Expected a list of style instances")
i[n]=e}return i}if("style"in i){const i=new Array(e)
for(let n=0;n<e;++n){const e=t[n]
if(!("style"in e))throw new Error("Expected a list of rules with a style property")
i[n]=e}return function(t){const e=(0,d.SR)(),i=function(t,e){const i=t.length,n=new Array(i)
for(let r=0;r<i;++r){const i=t[r],o="filter"in i?p(i.filter,d.T8,e):x
let s
if(Array.isArray(i.style)){const t=i.style.length
s=new Array(t)
for(let n=0;n<t;++n)s[n]=w(i.style[n],e)}else s=[w(i.style,e)]
n[r]={filter:o,styles:s}}return function(e){const r=[]
let o=!1
for(let s=0;s<i;++s)if((0,n[s].filter)(e)&&(!t[s].else||!o)){o=!0
for(const t of n[s].styles){const i=t(e)
i&&r.push(i)}}return r}}(t,e),n={variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}
return function(t,r){if(n.properties=t.getPropertiesInternal(),n.resolution=r,e.featureId){const e=t.getId()
n.featureId=void 0!==e?e:null}return e.geometryType&&(n.geometryType=(0,d.Ye)(t.getGeometry())),i(n)}}(i)}return b(t)}(t),this.styleFunction_=null===t?void 0:(0,o.mC)(this.style_),this.changed()}}const Z=V},1971:(t,e,i)=>{"use strict"
i.d(e,{A:()=>m,i:()=>p})
var n=i(9855),r=i(3844),o=i(1678),s=i(406),a=i(8638),l=i(7067),h=i(6249),u=i(7931),c=i(3236),d=i(1736),f=i(4757)
class p extends s.Ay{constructor(t,e){super(t),this.layer=e}}const g="layers"
class _ extends n.A{constructor(t){t=t||{}
const e=Object.assign({},t)
delete e.layers
let i=t.layers
super(e),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(g,this.handleLayersChanged_),i?Array.isArray(i)?i=new r.A(i.slice(),{unique:!0}):(0,h.v)("function"==typeof i.getArray,"Expected `layers` to be an array or a `Collection`"):i=new r.A(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(f.JH),this.layersListenerKeys_.length=0
const t=this.getLayers()
this.layersListenerKeys_.push((0,f.KT)(t,o.A.ADD,this.handleLayersAdd_,this),(0,f.KT)(t,o.A.REMOVE,this.handleLayersRemove_,this))
for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(f.JH);(0,u.I)(this.listenerKeys_)
const e=t.getArray()
for(let i=0,n=e.length;i<n;i++){const t=e[i]
this.registerLayerListeners_(t),this.dispatchEvent(new p("addlayer",t))}this.changed()}registerLayerListeners_(t){const e=[(0,f.KT)(t,l.A.PROPERTYCHANGE,this.handleLayerChange_,this),(0,f.KT)(t,a.A.CHANGE,this.handleLayerChange_,this)]
t instanceof _&&e.push((0,f.KT)(t,"addlayer",this.handleLayerGroupAdd_,this),(0,f.KT)(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[(0,d.v6)(t)]=e}handleLayerGroupAdd_(t){this.dispatchEvent(new p("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new p("removelayer",t.layer))}handleLayersAdd_(t){const e=t.element
this.registerLayerListeners_(e),this.dispatchEvent(new p("addlayer",e)),this.changed()}handleLayersRemove_(t){const e=t.element,i=(0,d.v6)(e)
this.listenerKeys_[i].forEach(f.JH),delete this.listenerKeys_[i],this.dispatchEvent(new p("removelayer",e)),this.changed()}getLayers(){return this.get(g)}setLayers(t){const e=this.getLayers()
if(e){const t=e.getArray()
for(let e=0,i=t.length;e<i;++e)this.dispatchEvent(new p("removelayer",t[e]))}this.set(g,t)}getLayersArray(t){return t=void 0!==t?t:[],this.getLayers().forEach((function(e){e.getLayersArray(t)})),t}getLayerStatesArray(t){const e=void 0!==t?t:[],i=e.length
this.getLayers().forEach((function(t){t.getLayerStatesArray(e)}))
const n=this.getLayerState()
let r=n.zIndex
t||void 0!==n.zIndex||(r=0)
for(let o=i,s=e.length;o<s;o++){const t=e[o]
t.opacity*=n.opacity,t.visible=t.visible&&n.visible,t.maxResolution=Math.min(t.maxResolution,n.maxResolution),t.minResolution=Math.max(t.minResolution,n.minResolution),t.minZoom=Math.max(t.minZoom,n.minZoom),t.maxZoom=Math.min(t.maxZoom,n.maxZoom),void 0!==n.extent&&(void 0!==t.extent?t.extent=(0,c._N)(t.extent,n.extent):t.extent=n.extent),void 0===t.zIndex&&(t.zIndex=r)}return e}getSourceState(){return"ready"}}const m=_},9343:(t,e,i)=>{"use strict"
i.d(e,{A:()=>a})
var n=i(1257)
class r extends n.A{constructor(t){super(t=t||{})}}const o=r
var s=i(8247)
const a=class extends o{constructor(t){super(t)}createRenderer(){return new s.A(this)}getData(t){return super.getData(t)}}},1257:(t,e,i)=>{"use strict"
i.d(e,{A:()=>f,l:()=>d})
var n=i(9855),r=i(8638),o=i(7439),s=i(8411),a=i(5714),l=i(6249),h=i(3236),u=i(4757)
class c extends n.A{constructor(t){const e=Object.assign({},t)
delete e.source,super(e),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(o.A.SOURCE,this.handleSourcePropertyChange_)
const i=t.source?t.source:null
this.setSource(i)}getLayersArray(t){return(t=t||[]).push(this),t}getLayerStatesArray(t){return(t=t||[]).push(this.getLayerState()),t}getSource(){return this.get(o.A.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource()
return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),this.sourceReady_||"ready"!==this.getSource().getState()||(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&((0,u.JH)(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1
const t=this.getSource()
t&&(this.sourceChangeKey_=(0,u.KT)(t,r.A.CHANGE,this.handleSourceChange_,this),"ready"===t.getState()&&(this.sourceReady_=!0,setTimeout((()=>{this.dispatchEvent("sourceready")}),0))),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return this.renderer_&&this.rendered?this.renderer_.getData(t):null}isVisible(t){let e
const i=this.getMapInternal()
let n
!t&&i&&(t=i.getView()),e=t instanceof a.default?{viewState:t.getState(),extent:t.calculateExtent()}:t,!e.layerStatesArray&&i&&(e.layerStatesArray=i.getLayerGroup().getLayerStatesArray()),n=e.layerStatesArray?e.layerStatesArray.find((t=>t.layer===this)):this.getLayerState()
const r=this.getExtent()
return d(n,e.viewState)&&(!r||(0,h.HY)(r,e.extent))}getAttributions(t){if(!this.isVisible(t))return[]
let e
const i=this.getSource()
if(i&&(e=i.getAttributions()),!e)return[]
let n=e(t instanceof a.default?t.getViewStateAndExtent():t)
return Array.isArray(n)||(n=[n]),n}render(t,e){const i=this.getRenderer()
return i.prepareFrame(t)?(this.rendered=!0,i.renderFrame(t,e)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(t,e){}renderDeferred(t){const e=this.getRenderer()
e&&e.renderDeferred(t)}setMapInternal(t){t||this.unrender(),this.set(o.A.MAP,t)}getMapInternal(){return this.get(o.A.MAP)}setMap(t){this.mapPrecomposeKey_&&((0,u.JH)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&((0,u.JH)(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=(0,u.KT)(t,s.A.PRECOMPOSE,(function(t){const e=t.frameState.layerStatesArray,i=this.getLayerState(!1);(0,l.v)(!e.some((function(t){return t.layer===i.layer})),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),e.push(i)}),this),this.mapRenderKey_=(0,u.KT)(this,r.A.CHANGE,t.render,t),this.changed())}setSource(t){this.set(o.A.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function d(t,e){if(!t.visible)return!1
const i=e.resolution
if(i<t.minResolution||i>=t.maxResolution)return!1
const n=e.zoom
return n>t.minZoom&&n<=t.maxZoom}const f=c},7439:(t,e,i)=>{"use strict"
i.d(e,{A:()=>n})
const n={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"}},3498:(t,e,i)=>{"use strict"
i.d(e,{A:()=>s})
var n=i(9043),r=i(6104)
class o extends n.A{constructor(t){super(t)}createRenderer(){return new r.A(this)}}const s=o},3035:(t,e,i)=>{"use strict"
i.d(e,{A:()=>n})
const n={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"}},5306:(t,e,i)=>{"use strict"
function n(t,e,i){return Math.min(Math.max(t,e),i)}function r(t,e,i,n,r,s){const a=r-i,l=s-n
if(0!==a||0!==l){const o=((t-i)*a+(e-n)*l)/(a*a+l*l)
o>1?(i=r,n=s):o>0&&(i+=a*o,n+=l*o)}return o(t,e,i,n)}function o(t,e,i,n){const r=i-t,o=n-e
return r*r+o*o}function s(t){const e=t.length
for(let n=0;n<e;n++){let i=n,r=Math.abs(t[n][n])
for(let s=n+1;s<e;s++){const e=Math.abs(t[s][n])
e>r&&(r=e,i=s)}if(0===r)return null
const o=t[i]
t[i]=t[n],t[n]=o
for(let s=n+1;s<e;s++){const i=-t[s][n]/t[n][n]
for(let r=n;r<e+1;r++)n==r?t[s][r]=0:t[s][r]+=i*t[n][r]}}const i=new Array(e)
for(let n=e-1;n>=0;n--){i[n]=t[n][e]/t[n][n]
for(let r=n-1;r>=0;r--)t[r][e]-=t[r][n]*i[n]}return i}function a(t){return t*Math.PI/180}function l(t,e){const i=t%e
return i*e<0?i+e:i}function h(t,e,i){return t+i*(e-t)}function u(t,e){const i=Math.pow(10,e)
return Math.round(t*i)/i}function c(t,e){return Math.round(u(t,e))}function d(t,e){return Math.floor(u(t,e))}function f(t,e){return Math.ceil(u(t,e))}i.d(e,{Cc:()=>h,KU:()=>s,LI:()=>c,Mg:()=>u,Q1:()=>r,RI:()=>d,eh:()=>a,hG:()=>o,mk:()=>f,qE:()=>n,xP:()=>l})},7931:(t,e,i)=>{"use strict"
function n(t){for(const e in t)delete t[e]}function r(t){let e
for(e in t)return!1
return!e}i.d(e,{I:()=>n,p:()=>r})},3906:(t,e,i)=>{"use strict"
i.d(e,{Ig:()=>g.I,MF:()=>n.A,Av:()=>O,RJ:()=>P,tI:()=>N,Ad:()=>q,SD:()=>Z,Jt:()=>A,hO:()=>R,RG:()=>k,FO:()=>F,Tf:()=>B,WP:()=>D,te:()=>U,JR:()=>V,vN:()=>W,pd:()=>z})
var n=i(7595)
const r=6378137,o=Math.PI*r,s=[-o,-o,o,o],a=[-180,-85,180,85],l=r*Math.log(Math.tan(Math.PI/2))
class h extends n.A{constructor(t){super({code:t,units:"m",extent:s,global:!0,worldExtent:a,getPointResolution:function(t,e){return t/Math.cosh(e[1]/r)}})}}const u=[new h("EPSG:3857"),new h("EPSG:102100"),new h("EPSG:102113"),new h("EPSG:900913"),new h("http://www.opengis.net/def/crs/EPSG/0/3857"),new h("http://www.opengis.net/gml/srs/epsg.xml#3857")],c=[-180,-90,180,90],d=6378137*Math.PI/180
class f extends n.A{constructor(t,e){super({code:t,units:"degrees",extent:c,axisOrientation:e,global:!0,metersPerUnit:d,worldExtent:c})}}const p=[new f("CRS:84"),new f("EPSG:4326","neu"),new f("urn:ogc:def:crs:OGC:1.3:CRS84"),new f("urn:ogc:def:crs:OGC:2:84"),new f("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new f("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new f("http://www.opengis.net/def/crs/EPSG/0/4326","neu")]
var g=i(3311)
let _={},m={}
function y(t,e,i){const n=t.getCode(),r=e.getCode()
n in m||(m[n]={}),m[n][r]=i}var v=i(3236),x=i(5306),b=i(8474)
const w=6371008.8
function E(t,e,i){i=i||w
const n=(0,x.eh)(t[1]),r=(0,x.eh)(e[1]),o=(r-n)/2,s=(0,x.eh)(e[0]-t[0])/2,a=Math.sin(o)*Math.sin(o)+Math.sin(s)*Math.sin(s)*Math.cos(n)*Math.cos(r)
return 2*i*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}var S=i(7307)
let C=!0
function P(t){C=!(void 0===t||t)}function T(t,e){if(void 0!==e)for(let i=0,n=t.length;i<n;++i)e[i]=t[i]
else e=t.slice()
return e}function I(t,e){if(void 0!==e&&t!==e){for(let i=0,n=t.length;i<n;++i)e[i]=t[i]
t=e}return t}function M(t){!function(t,e){_[t]=e}(t.getCode(),t),y(t,t,T)}function A(t){return"string"==typeof t?_[e=t]||_[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null:t||null
var e}function R(t,e,i,n){let r
const o=(t=A(t)).getPointResolutionFunc()
if(o){if(r=o(e,i),n&&n!==t.getUnits()){const e=t.getMetersPerUnit()
e&&(r=r*e/g.I[n])}}else{const o=t.getUnits()
if("degrees"==o&&!n||"degrees"==n)r=e
else{const s=F(t,A("EPSG:4326"))
if(s===I&&"degrees"!==o)r=e*t.getMetersPerUnit()
else{let t=[i[0]-e/2,i[1],i[0]+e/2,i[1],i[0],i[1]-e/2,i[0],i[1]+e/2]
t=s(t,t,2),r=(E(t.slice(0,2),t.slice(2,4))+E(t.slice(4,6),t.slice(6,8)))/2}const a=n?g.I[n]:t.getMetersPerUnit()
void 0!==a&&(r/=a)}}return r}function L(t){!function(t){t.forEach(M)}(t),t.forEach((function(e){t.forEach((function(t){e!==t&&y(e,t,T)}))}))}function O(t,e){return t?"string"==typeof t?A(t):t:A(e)}function D(t,e){const i=z(t,void 0!==e?e:"EPSG:3857","EPSG:4326"),n=i[0]
return(n<-180||n>180)&&(i[0]=(0,x.xP)(n+180,360)-180),i}function N(t,e){if(t===e)return!0
const i=t.getUnits()===e.getUnits()
return(t.getCode()===e.getCode()||F(t,e)===T)&&i}function F(t,e){let i=function(t,e){let i
return t in m&&e in m[t]&&(i=m[t][e]),i}(t.getCode(),e.getCode())
return i||(i=I),i}function k(t,e){return F(A(t),A(e))}function z(t,e,i){return k(e,i)(t,void 0,t.length)}function j(t,e,i,n){const r=k(e,i)
return(0,v.NW)(t,r,void 0,n)}let G=null
function B(){return G}function U(t,e){return G?z(t,e,G):t}function q(t,e){return G?z(t,G,e):(C&&!(0,b.aI)(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(C=!1,(0,S.R8)("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t)}function V(t,e){return G?j(t,e,G):t}function Z(t,e){return G?j(t,G,e):t}function W(t,e){if(!G)return t
const i=A(e).getMetersPerUnit(),n=G.getMetersPerUnit()
return i&&n?t*i/n:t}var Y,X,H
L(u),L(p),Y=u,X=function(t,e,i){const n=t.length
i=i>1?i:2,void 0===e&&(e=i>2?t.slice():new Array(n))
for(let s=0;s<n;s+=i){e[s]=o*t[s]/180
let i=r*Math.log(Math.tan(Math.PI*(+t[s+1]+90)/360))
i>l?i=l:i<-l&&(i=-l),e[s+1]=i}return e},H=function(t,e,i){const n=t.length
i=i>1?i:2,void 0===e&&(e=i>2?t.slice():new Array(n))
for(let s=0;s<n;s+=i)e[s]=180*t[s]/o,e[s+1]=360*Math.atan(Math.exp(t[s+1]/r))/Math.PI-90
return e},p.forEach((function(t){Y.forEach((function(e){y(t,e,X),y(e,t,H)}))}))},7595:(t,e,i)=>{"use strict"
i.d(e,{A:()=>r})
var n=i(3311)
const r=class{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||n.I[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}}},3311:(t,e,i)=>{"use strict"
i.d(e,{I:()=>o,q:()=>r})
const n={9001:"m",9002:"ft",9003:"us-ft",9101:"radians",9102:"degrees"}
function r(t){return n[t]}const o={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937}},7683:(t,e,i)=>{"use strict"
i.d(e,{A:()=>o})
var n=i(406)
class r extends n.Ay{constructor(t,e,i,n){super(t),this.inversePixelTransform=e,this.frameState=i,this.context=n}}const o=r},8411:(t,e,i)=>{"use strict"
i.d(e,{A:()=>n})
const n={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"}},9621:(t,e,i)=>{"use strict"
i.d(e,{Ay:()=>_})
var n=i(2282),r=i(3236),o=i(5216),s=i(7195),a=i(1129),l=i(3906),h=i(3861),u=i(4900),c=i(9354),d=i(419),f=i(2363)
const p=(0,n.vt)()
class g{constructor(t,e,i,n,r,o){this.styleFunction,this.extent_,this.id_=o,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i||null,this.properties_=r,this.squaredTolerance_,this.stride_=n,this.simplifiedGeometry_}get(t){return this.properties_[t]}getExtent(){return this.extent_||(this.extent_="Point"===this.type_?(0,r.dP)(this.flatCoordinates_):(0,r.Vy)(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const t=(0,r.q1)(this.getExtent())
this.flatInteriorPoints_=(0,a.J)(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const t=(0,h.yJ)(this.flatCoordinates_,this.ends_),e=(0,c.C)(this.flatCoordinates_,0,t,2)
this.flatInteriorPoints_=(0,a.p)(this.flatCoordinates_,0,t,2,e)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=(0,u.SH)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[]
const t=this.flatCoordinates_
let e=0
const i=this.ends_
for(let n=0,r=i.length;n<r;++n){const r=i[n],o=(0,u.SH)(t,e,r,2,.5);(0,s.X$)(this.flatMidpoints_,o),e=r}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(t){return this}simplifyTransformed(t,e){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(t){const e=(t=(0,l.Jt)(t)).getExtent(),i=t.getWorldExtent()
if(e&&i){const t=(0,r.Oq)(i)/(0,r.Oq)(e);(0,n.Zz)(p,i[0],i[3],t,-t,0,0,0),(0,f.Rc)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,p,this.flatCoordinates_)}}applyTransform(t){t(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new g(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=(0,d.B4)(((t,e)=>{if(t===this.squaredTolerance_)return this.simplifiedGeometry_
this.simplifiedGeometry_=this.clone(),e&&this.simplifiedGeometry_.applyTransform(e)
const i=this.simplifiedGeometry_.getFlatCoordinates()
let n
switch(this.type_){case"LineString":i.length=(0,o.P4)(i,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,t,i,0),n=[i.length]
break
case"MultiLineString":n=[],i.length=(0,o.AL)(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,t,i,0,n)
break
case"Polygon":n=[],i.length=(0,o.Hg)(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(t),i,0,n)}return n&&(this.simplifiedGeometry_=new g(this.type_,i,n,2,this.properties_,this.id_)),this.squaredTolerance_=t,this.simplifiedGeometry_})),this}}g.prototype.getFlatCoordinates=g.prototype.getOrientedFlatCoordinates
const _=g},223:(t,e,i)=>{"use strict"
i.d(e,{Jw:()=>A,M8:()=>m,MY:()=>_,NT:()=>g,Oq:()=>c,TA:()=>I,Tq:()=>y,ZV:()=>l,_K:()=>f,_m:()=>u,aq:()=>v,eL:()=>p,fZ:()=>S,jT:()=>M,qY:()=>h,vk:()=>d,yY:()=>x})
var n=i(1051),r=i(1622),o=i(7931),s=i(8454),a=i(8877)
const l="10px sans-serif",h="#000",u="round",c=[],d=0,f="round",p=10,g="#000",_="center",m="middle",y=[0,0,0,0],v=1,x=new n.A
let b,w=null
const E={},S=function(){const t="32px ",e=["monospace","serif"],i=e.length,n="wmytzilWMYTZIL@#/&?$%10"
let r,s
function l(r,o,a){let l=!0
for(let h=0;h<i;++h){const i=e[h]
if(s=T(r+" "+o+" "+t+i,n),a!=i){const e=T(r+" "+o+" "+t+a+","+i,n)
l=l&&e!=s}}return!!l}function h(){let t=!0
const e=x.getKeys()
for(let i=0,n=e.length;i<n;++i){const n=e[i]
x.get(n)<100&&(l.apply(this,n.split("\n"))?((0,o.I)(E),w=null,b=void 0,x.set(n,100)):(x.set(n,x.get(n)+1,!0),t=!1))}t&&(clearInterval(r),r=void 0)}return function(t){const e=(0,a.K5)(t)
if(!e)return
const i=e.families
for(let n=0,o=i.length;n<o;++n){const t=i[n],o=e.style+"\n"+e.weight+"\n"+t
void 0===x.get(o)&&(x.set(o,100,!0),l(e.style,e.weight,t)||(x.set(o,0,!0),void 0===r&&(r=setInterval(h,32))))}}}(),C=function(){let t
return function(e){let i=E[e]
if(null==i){if(r.Wl){const t=(0,a.K5)(e),n=P(e,"g")
i=(isNaN(Number(t.lineHeight))?1.2:Number(t.lineHeight))*(n.actualBoundingBoxAscent+n.actualBoundingBoxDescent)}else t||(t=document.createElement("div"),t.innerHTML="M",t.style.minHeight="0",t.style.maxHeight="none",t.style.height="auto",t.style.padding="0",t.style.border="none",t.style.position="absolute",t.style.display="block",t.style.left="-99999px"),t.style.font=e,document.body.appendChild(t),i=t.offsetHeight,document.body.removeChild(t)
E[e]=i}return i}}()
function P(t,e){return w||(w=(0,s.Y)(1,1)),t!=b&&(w.font=t,b=w.font),w.measureText(e)}function T(t,e){return P(t,e).width}function I(t,e,i){if(e in i)return i[e]
const n=e.split("\n").reduce(((e,i)=>Math.max(e,T(t,i))),0)
return i[e]=n,n}function M(t,e){const i=[],n=[],r=[]
let o=0,s=0,a=0,l=0
for(let h=0,u=e.length;h<=u;h+=2){const c=e[h]
if("\n"===c||h===u){o=Math.max(o,s),r.push(s),s=0,a+=l
continue}const d=e[h+1]||t.font,f=T(d,c)
i.push(f),s+=f
const p=C(d)
n.push(p),l=Math.max(l,p)}return{width:o,height:a,widths:i,heights:n,lineWidths:r}}function A(t,e,i,n,r,o,s,a,l,h,u){t.save(),1!==i&&(void 0===t.globalAlpha?t.globalAlpha=t=>t.globalAlpha*=i:t.globalAlpha*=i),e&&t.transform.apply(t,e),n.contextInstructions?(t.translate(l,h),t.scale(u[0],u[1]),function(t,e){const i=t.contextInstructions
for(let n=0,r=i.length;n<r;n+=2)Array.isArray(i[n+1])?e[i[n]].apply(e,i[n+1]):e[i[n]]=i[n+1]}(n,t)):u[0]<0||u[1]<0?(t.translate(l,h),t.scale(u[0],u[1]),t.drawImage(n,r,o,s,a,0,0,s,a)):t.drawImage(n,r,o,s,a,l,h,s*u[0],a*u[1]),t.restore()}},6733:(t,e,i)=>{"use strict"
i.d(e,{A:()=>r})
var n=i(8454)
const r=class{constructor(){var t,e,i,r
t=this,i=(...t)=>(this.instructions_[this.zIndex+this.offset_].push(t),this),(e="symbol"==typeof(r=function(t,e){if("object"!=typeof t||!t)return t
var i=t[Symbol.toPrimitive]
if(void 0!==i){var n=i.call(t,"string")
if("object"!=typeof n)return n
throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e="pushMethodArgs_"))?r:r+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(CanvasRenderingContext2D.prototype,{get:(t,e)=>{if("function"==typeof(0,n.lr)()[e])return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(e),this.pushMethodArgs_},set:(t,e,i)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(e,i),!0)})}getContext(){return this.context_}draw(t){this.instructions_.forEach((e=>{for(let i=0,n=e.length;i<n;i+=2){const n=e[i],r=e[i+1]
if("function"==typeof t[n])t[n](...r)
else{if("function"==typeof r){t[n]=r(t)
continue}t[n]=r}}}))}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}},5097:(t,e,i)=>{"use strict"
i.d(e,{A:()=>l})
var n=i(8638),r=i(1410),o=i(8197),s=i(1736)
class a extends o.A{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.declutterExecutorGroup=null}getFeatures(t){return(0,s.b0)()}getData(t){return null}prepareFrame(t){return(0,s.b0)()}renderFrame(t,e){return(0,s.b0)()}loadedTileCallback(t,e,i){t[e]||(t[e]={}),t[e][i.tileCoord.toString()]=i}createLoadedTileFinder(t,e,i){return(n,r)=>{const o=this.loadedTileCallback.bind(this,i,n)
return t.forEachLoadedTile(e,n,r,o)}}forEachFeatureAtCoordinate(t,e,i,n,r){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){const e=t.target
e.getState()!==r.A.LOADED&&e.getState()!==r.A.ERROR||this.renderIfReadyAndVisible()}loadImage(t){let e=t.getState()
return e!=r.A.LOADED&&e!=r.A.ERROR&&t.addEventListener(n.A.CHANGE,this.boundHandleImageChange_),e==r.A.IDLE&&(t.load(),e=t.getState()),e==r.A.LOADED}renderIfReadyAndVisible(){const t=this.getLayer()
t&&t.getVisible()&&"ready"===t.getSourceState()&&t.changed()}renderDeferred(t){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const l=a},8247:(t,e,i)=>{"use strict"
i.d(e,{A:()=>u})
var n=i(1500),r=i(1410),o=i(5548),s=i(2282),a=i(3236),l=i(3906)
class h extends n.A{constructor(t){super(t),this.image_=null}getImage(){return this.image_?this.image_.getImage():null}prepareFrame(t){const e=t.layerStatesArray[t.layerIndex],i=t.pixelRatio,n=t.viewState,s=n.resolution,h=this.getLayer().getSource(),u=t.viewHints
let c=t.extent
if(void 0!==e.extent&&(c=(0,a._N)(c,(0,l.SD)(e.extent,n.projection))),!u[o.A.ANIMATING]&&!u[o.A.INTERACTING]&&!(0,a.Im)(c))if(h){const t=n.projection,e=h.getImage(c,s,i,t)
e&&(this.loadImage(e)?this.image_=e:e.getState()===r.A.EMPTY&&(this.image_=null))}else this.image_=null
return!!this.image_}getData(t){const e=this.frameState
if(!e)return null
const i=this.getLayer(),n=(0,s.Bb)(e.pixelToCoordinateTransform,t.slice()),r=i.getExtent()
if(r&&!(0,a.Ym)(r,n))return null
const o=this.image_.getExtent(),l=this.image_.getImage(),h=(0,a.RG)(o),u=Math.floor(l.width*((n[0]-o[0])/h))
if(u<0||u>=l.width)return null
const c=(0,a.Oq)(o),d=Math.floor(l.height*((o[3]-n[1])/c))
return d<0||d>=l.height?null:this.getImageData(l,u,d)}renderFrame(t,e){const i=this.image_,n=i.getExtent(),r=i.getResolution(),[o,h]=Array.isArray(r)?r:[r,r],u=i.getPixelRatio(),c=t.layerStatesArray[t.layerIndex],d=t.pixelRatio,f=t.viewState,p=f.center,g=f.resolution,_=d*o/(g*u),m=d*h/(g*u),y=t.extent,v=f.resolution,x=f.rotation,b=Math.round((0,a.RG)(y)/v*d),w=Math.round((0,a.Oq)(y)/v*d);(0,s.Zz)(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/d,1/d,x,-b/2,-w/2),(0,s.T9)(this.inversePixelTransform,this.pixelTransform)
const E=(0,s.dI)(this.pixelTransform)
this.useContainer(e,E,this.getBackground(t))
const S=this.getRenderContext(t),C=this.context.canvas
C.width!=b||C.height!=w?(C.width=b,C.height=w):this.containerReused||S.clearRect(0,0,b,w)
let P=!1,T=!0
if(c.extent){const e=(0,l.SD)(c.extent,f.projection)
T=(0,a.HY)(e,t.extent),P=T&&!(0,a.ms)(e,t.extent),P&&this.clipUnrotated(S,t,e)}const I=i.getImage(),M=(0,s.Zz)(this.tempTransform,b/2,w/2,_,m,0,u*(n[0]-p[0])/o,u*(p[1]-n[3])/h)
this.renderedResolution=h*d/u
const A=I.width*M[0],R=I.height*M[3]
if(this.getLayer().getSource().getInterpolate()||(S.imageSmoothingEnabled=!1),this.preRender(S,t),T&&A>=.5&&R>=.5){const t=M[4],e=M[5],i=c.opacity
1!==i&&(S.save(),S.globalAlpha=i),S.drawImage(I,0,0,+I.width,+I.height,t,e,A,R),1!==i&&S.restore()}return this.postRender(this.context,t),P&&S.restore(),S.imageSmoothingEnabled=!0,E!==C.style.transform&&(C.style.transform=E),this.container}}const u=h},1500:(t,e,i)=>{"use strict"
i.d(e,{A:()=>g,B:()=>d})
var n=i(5097),r=i(7683),o=i(8411),s=i(6733),a=i(2282),l=i(659),h=i(8454),u=i(7195),c=i(3236)
const d=[]
let f=null
class p extends n.A{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=(0,a.vt)(),this.pixelTransform=(0,a.vt)(),this.inversePixelTransform=(0,a.vt)(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(t,e,i){let n
f||(f=(0,h.Y)(1,1,void 0,{willReadFrequently:!0})),f.clearRect(0,0,1,1)
try{f.drawImage(t,e,i,1,1,0,0,1,1),n=f.getImageData(0,0,1,1).data}catch(t){return f=null,null}return n}getBackground(t){let e=this.getLayer().getBackground()
return"function"==typeof e&&(e=e(t.viewState.resolution)),e||void 0}useContainer(t,e,i){const n=this.getLayer().getClassName()
let r,o
if(t&&t.className===n&&(!i||t&&t.style.backgroundColor&&(0,u.aI)((0,l._j)(t.style.backgroundColor),(0,l._j)(i)))){const e=t.firstElementChild
e instanceof HTMLCanvasElement&&(o=e.getContext("2d"))}if(o&&o.canvas.style.transform===e?(this.container=t,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){r=document.createElement("div"),r.className=n
let t=r.style
t.position="absolute",t.width="100%",t.height="100%",o=(0,h.Y)()
const e=o.canvas
r.appendChild(e),t=e.style,t.position="absolute",t.left="0",t.transformOrigin="top left",this.container=r,this.context=o}this.containerReused||!i||this.container.style.backgroundColor||(this.container.style.backgroundColor=i)}clipUnrotated(t,e,i){const n=(0,c.Py)(i),r=(0,c.WU)(i),o=(0,c.k_)(i),s=(0,c.R)(i);(0,a.Bb)(e.coordinateToPixelTransform,n),(0,a.Bb)(e.coordinateToPixelTransform,r),(0,a.Bb)(e.coordinateToPixelTransform,o),(0,a.Bb)(e.coordinateToPixelTransform,s)
const l=this.inversePixelTransform;(0,a.Bb)(l,n),(0,a.Bb)(l,r),(0,a.Bb)(l,o),(0,a.Bb)(l,s),t.save(),t.beginPath(),t.moveTo(Math.round(n[0]),Math.round(n[1])),t.lineTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.clip()}dispatchRenderEvent_(t,e,i){const n=this.getLayer()
if(n.hasListener(t)){const o=new r.A(t,this.inversePixelTransform,i,e)
n.dispatchEvent(o)}}preRender(t,e){this.frameState=e,e.declutter||this.dispatchRenderEvent_(o.A.PRERENDER,t,e)}postRender(t,e){e.declutter||this.dispatchRenderEvent_(o.A.POSTRENDER,t,e)}renderDeferredInternal(t){}getRenderContext(t){return t.declutter&&!this.deferredContext_&&(this.deferredContext_=new s.A),t.declutter?this.deferredContext_.getContext():this.context}renderDeferred(t){t.declutter&&(this.dispatchRenderEvent_(o.A.PRERENDER,this.context,t),t.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(t),this.dispatchRenderEvent_(o.A.POSTRENDER,this.context,t))}getRenderTransform(t,e,i,n,r,o,s){const l=r/2,h=o/2,u=n/e,c=-u,d=-t[0]+s,f=-t[1]
return(0,a.Zz)(this.tempTransform,l,h,u,c,-i,d,f)}disposeInternal(){delete this.frameState,super.disposeInternal()}}const g=p},6104:(t,e,i)=>{"use strict"
i.d(e,{A:()=>g})
var n=i(1500),r=i(519),o=i(7893),s=i(5959),a=i(699),l=i(2282),h=i(7195),u=i(3236),c=i(3906),d=i(1736),f=i(1673)
class p extends n.A{constructor(t){super(t),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=(0,u.S5)(),this.tmpTileRange_=new s.A(0,0,0,0)}isDrawableTile(t){const e=this.getLayer(),i=t.getState(),n=e.getUseInterimTilesOnError()
return i==a.A.LOADED||i==a.A.EMPTY||i==a.A.ERROR&&!n}getTile(t,e,i,n){const r=n.pixelRatio,o=n.viewState.projection,s=this.getLayer()
let l=s.getSource().getTile(t,e,i,r,o)
return l.getState()==a.A.ERROR&&s.getUseInterimTilesOnError()&&s.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(l)||(l=l.getInterimTile()),l}getData(t){const e=this.frameState
if(!e)return null
const i=this.getLayer(),n=(0,l.Bb)(e.pixelToCoordinateTransform,t.slice()),s=i.getExtent()
if(s&&!(0,u.Ym)(s,n))return null
const h=e.pixelRatio,c=e.viewState.projection,d=e.viewState,p=i.getRenderSource(),g=p.getTileGridForProjection(d.projection),_=p.getTilePixelRatio(e.pixelRatio)
for(let l=g.getZForResolution(d.resolution);l>=g.getMinZoom();--l){const t=g.getTileCoordForCoordAndZ(n,l),e=p.getTile(l,t[1],t[2],h,c)
if(!(e instanceof r.A||e instanceof o.A)||e instanceof o.A&&e.getState()===a.A.EMPTY)return null
if(e.getState()!==a.A.LOADED)continue
const i=g.getOrigin(l),s=(0,f.xq)(g.getTileSize(l)),u=g.getResolution(l),m=Math.floor(_*((n[0]-i[0])/u-t[1]*s[0])),y=Math.floor(_*((i[1]-n[1])/u-t[2]*s[1])),v=Math.round(_*p.getGutterForProjection(d.projection))
return this.getImageData(e.getImage(),m+v,y+v)}return null}loadedTileCallback(t,e,i){return!!this.isDrawableTile(i)&&super.loadedTileCallback(t,e,i)}prepareFrame(t){return!!this.getLayer().getSource()}renderFrame(t,e){const i=t.layerStatesArray[t.layerIndex],n=t.viewState,r=n.projection,o=n.resolution,s=n.center,f=n.rotation,p=t.pixelRatio,g=this.getLayer(),_=g.getSource(),m=_.getRevision(),y=_.getTileGridForProjection(r),v=y.getZForResolution(o,_.zDirection),x=y.getResolution(v)
let b=t.extent
const w=t.viewState.resolution,E=_.getTilePixelRatio(p),S=Math.round((0,u.RG)(b)/w*p),C=Math.round((0,u.Oq)(b)/w*p),P=i.extent&&(0,c.SD)(i.extent,r)
P&&(b=(0,u._N)(b,(0,c.SD)(i.extent,r)))
const T=x*S/2/E,I=x*C/2/E,M=[s[0]-T,s[1]-I,s[0]+T,s[1]+I],A=y.getTileRangeForExtentAndZ(b,v),R={}
R[v]={}
const L=this.createLoadedTileFinder(_,r,R),O=this.tmpExtent,D=this.tmpTileRange_
this.newTiles_=!1
const N=f?(0,u.Yw)(n.center,w,f,t.size):void 0
for(let l=A.minX;l<=A.maxX;++l)for(let e=A.minY;e<=A.maxY;++e){if(f&&!y.tileCoordIntersectsViewport([v,l,e],N))continue
const n=this.getTile(v,l,e,t)
if(this.isDrawableTile(n)){const e=(0,d.v6)(this)
if(n.getState()==a.A.LOADED){R[v][n.tileCoord.toString()]=n
let t=n.inTransition(e)
t&&1!==i.opacity&&(n.endTransition(e),t=!1),this.newTiles_||!t&&this.renderedTiles.includes(n)||(this.newTiles_=!0)}if(1===n.getAlpha(e,t.time))continue}const r=y.getTileCoordChildTileRange(n.tileCoord,D,O)
let o=!1
r&&(o=L(v+1,r)),o||y.forEachTileCoordParentTileRange(n.tileCoord,L,D,O)}const F=x/o*p/E;(0,l.Zz)(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/p,1/p,f,-S/2,-C/2)
const k=(0,l.dI)(this.pixelTransform)
this.useContainer(e,k,this.getBackground(t))
const z=this.getRenderContext(t),j=this.context.canvas;(0,l.T9)(this.inversePixelTransform,this.pixelTransform),(0,l.Zz)(this.tempTransform,S/2,C/2,F,F,0,-S/2,-C/2),j.width!=S||j.height!=C?(j.width=S,j.height=C):this.containerReused||z.clearRect(0,0,S,C),P&&this.clipUnrotated(z,t,P),_.getInterpolate()||(z.imageSmoothingEnabled=!1),this.preRender(z,t),this.renderedTiles.length=0
let G,B,U,q=Object.keys(R).map(Number)
q.sort(h.V_),1!==i.opacity||this.containerReused&&!_.getOpaque(t.viewState.projection)?(G=[],B=[]):q=q.reverse()
for(let a=q.length-1;a>=0;--a){const e=q[a],i=_.getTilePixelSize(e,p,r),n=y.getResolution(e)/x,o=i[0]*n*F,s=i[1]*n*F,h=y.getTileCoordForCoordAndZ((0,u.Py)(M),e),c=y.getTileCoordExtent(h),f=(0,l.Bb)(this.tempTransform,[E*(c[0]-M[0])/x,E*(M[3]-c[3])/x]),g=E*_.getGutterForProjection(r),m=R[e]
for(const r in m){const i=m[r],n=i.tileCoord,a=h[1]-n[1],l=Math.round(f[0]-(a-1)*o),c=h[2]-n[2],p=Math.round(f[1]-(c-1)*s),y=Math.round(f[0]-a*o),x=Math.round(f[1]-c*s),b=l-y,w=p-x,E=v===e,S=E&&1!==i.getAlpha((0,d.v6)(this),t.time)
let C=!1
if(!S)if(G){U=[y,x,y+b,x,y+b,x+w,y,x+w]
for(let t=0,i=G.length;t<i;++t)if(v!==e&&e<B[t]){const e=G[t];(0,u.HY)([y,x,y+b,x+w],[e[0],e[3],e[4],e[7]])&&(C||(z.save(),C=!0),z.beginPath(),z.moveTo(U[0],U[1]),z.lineTo(U[2],U[3]),z.lineTo(U[4],U[5]),z.lineTo(U[6],U[7]),z.moveTo(e[6],e[7]),z.lineTo(e[4],e[5]),z.lineTo(e[2],e[3]),z.lineTo(e[0],e[1]),z.clip())}G.push(U),B.push(e)}else z.clearRect(y,x,b,w)
this.drawTileImage(i,t,y,x,b,w,g,E),G&&!S?(C&&z.restore(),this.renderedTiles.unshift(i)):this.renderedTiles.push(i),this.updateUsedTiles(t.usedTiles,_,i)}}return this.renderedRevision=m,this.renderedResolution=x,this.extentChanged=!this.renderedExtent_||!(0,u.aI)(this.renderedExtent_,M),this.renderedExtent_=M,this.renderedPixelRatio=p,this.renderedProjection=r,this.manageTilePyramid(t,_,y,p,r,b,v,g.getPreload()),this.scheduleExpireCache(t,_),this.postRender(this.context,t),i.extent&&z.restore(),z.imageSmoothingEnabled=!0,k!==j.style.transform&&(j.style.transform=k),this.container}drawTileImage(t,e,i,n,r,o,s,a){const l=this.getTileImage(t)
if(!l)return
const h=this.getRenderContext(e),u=(0,d.v6)(this),c=e.layerStatesArray[e.layerIndex],f=c.opacity*(a?t.getAlpha(u,e.time):1),p=f!==h.globalAlpha
p&&(h.save(),h.globalAlpha=f),h.drawImage(l,s,s,l.width-2*s,l.height-2*s,i,n,r,o),p&&h.restore(),f!==c.opacity?e.animate=!0:a&&t.endTransition(u)}getImage(){const t=this.context
return t?t.canvas:null}getTileImage(t){return t.getImage()}scheduleExpireCache(t,e){if(e.canExpireCache()){const i=function(t,e,i){const n=(0,d.v6)(t)
n in i.usedTiles&&t.expireCache(i.viewState.projection,i.usedTiles[n])}.bind(null,e)
t.postRenderFunctions.push(i)}}updateUsedTiles(t,e,i){const n=(0,d.v6)(e)
n in t||(t[n]={}),t[n][i.getKey()]=!0}manageTilePyramid(t,e,i,n,r,o,s,l,h){const c=(0,d.v6)(e)
c in t.wantedTiles||(t.wantedTiles[c]={})
const f=t.wantedTiles[c],p=t.tileQueue,g=i.getMinZoom(),_=t.viewState.rotation,m=_?(0,u.Yw)(t.viewState.center,t.viewState.resolution,_,t.size):void 0
let y,v,x,b,w,E,S=0
for(E=g;E<=s;++E)for(v=i.getTileRangeForExtentAndZ(o,E,v),x=i.getResolution(E),b=v.minX;b<=v.maxX;++b)for(w=v.minY;w<=v.maxY;++w)_&&!i.tileCoordIntersectsViewport([E,b,w],m)||(s-E<=l?(++S,y=e.getTile(E,b,w,n,r),y.getState()==a.A.IDLE&&(f[y.getKey()]=!0,p.isKeyQueued(y.getKey())||p.enqueue([y,c,i.getTileCoordCenter(y.tileCoord),x])),void 0!==h&&h(y)):e.useTile(E,b,w,r))
e.updateCacheSize(S,r)}}const g=p},6582:(t,e,i)=>{"use strict"
i.d(e,{BV:()=>l,KQ:()=>c,XX:()=>f,aY:()=>d})
var n=i(3236),r=i(8454),o=i(3906),s=i(5306)
let a
const l=[]
function h(t,e,i,n,r){t.beginPath(),t.moveTo(0,0),t.lineTo(e,i),t.lineTo(n,r),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,n)+1,Math.max(i,r)),t.restore()}function u(t,e){return Math.abs(t[4*e]-210)>2||Math.abs(t[4*e+3]-191.25)>2}function c(t,e,i,r){const s=(0,o.pd)(i,e,t)
let a=(0,o.hO)(e,r,i)
const l=e.getMetersPerUnit()
void 0!==l&&(a*=l)
const h=t.getMetersPerUnit()
void 0!==h&&(a/=h)
const u=t.getExtent()
if(!u||(0,n.Ym)(u,s)){const e=(0,o.hO)(t,a,s)/a
isFinite(e)&&e>0&&(a/=e)}return a}function d(t,e,i,r){const o=(0,n.q1)(i)
let s=c(t,e,o,r)
return(!isFinite(s)||s<=0)&&(0,n.sB)(i,(function(i){return s=c(t,e,i,r),isFinite(s)&&s>0})),s}function f(t,e,i,o,c,d,f,p,g,_,m,y,v,x){const b=(0,r.Y)(Math.round(i*t),Math.round(i*e),l)
if(y||(b.imageSmoothingEnabled=!1),0===g.length)return b.canvas
function w(t){return Math.round(t*i)/i}b.scale(i,i),b.globalCompositeOperation="lighter"
const E=(0,n.S5)()
let S
g.forEach((function(t,e,i){(0,n.X$)(E,t.extent)}))
const C=i/o,P=(y?1:1+Math.pow(2,-24))/C
if(!v||1!==g.length||0!==_){if(S=(0,r.Y)(Math.round((0,n.RG)(E)*C),Math.round((0,n.Oq)(E)*C),l),y||(S.imageSmoothingEnabled=!1),c&&x){const t=(c[0]-E[0])*C,e=-(c[3]-E[3])*C,i=(0,n.RG)(c)*C,r=(0,n.Oq)(c)*C
S.rect(t,e,i,r),S.clip()}g.forEach((function(t,e,i){const r=(t.extent[0]-E[0])*C,o=-(t.extent[3]-E[3])*C,s=(0,n.RG)(t.extent)*C,a=(0,n.Oq)(t.extent)*C
t.image.width>0&&t.image.height>0&&S.drawImage(t.image,_,_,t.image.width-2*_,t.image.height-2*_,y?r:Math.round(r),y?o:Math.round(o),y?s:Math.round(r+s)-Math.round(r),y?a:Math.round(o+a)-Math.round(o))}))}const T=(0,n.Py)(f)
return p.getTriangles().forEach((function(t,e,i){const o=t.source,c=t.target
let f=o[0][0],p=o[0][1],_=o[1][0],m=o[1][1],v=o[2][0],x=o[2][1]
const C=w((c[0][0]-T[0])/d),I=w(-(c[0][1]-T[1])/d),M=w((c[1][0]-T[0])/d),A=w(-(c[1][1]-T[1])/d),R=w((c[2][0]-T[0])/d),L=w(-(c[2][1]-T[1])/d),O=f,D=p
f=0,p=0,_-=O,m-=D,v-=O,x-=D
const N=[[_,m,0,0,M-C],[v,x,0,0,R-C],[0,0,_,m,A-I],[0,0,v,x,L-I]],F=(0,s.KU)(N)
if(!F)return
if(b.save(),b.beginPath(),function(){if(void 0===a){const t=(0,r.Y)(6,6,l)
t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",h(t,4,5,4,0),h(t,4,5,0,5)
const e=t.getImageData(0,0,3,3).data
a=u(e,0)||u(e,4)||u(e,8),(0,r.Yg)(t),l.push(t.canvas)}return a}()||!y){b.moveTo(M,A)
const t=4,e=C-M,i=I-A
for(let n=0;n<t;n++)b.lineTo(M+w((n+1)*e/t),A+w(n*i/(t-1))),n!=t-1&&b.lineTo(M+w((n+1)*e/t),A+w((n+1)*i/(t-1)))
b.lineTo(R,L)}else b.moveTo(M,A),b.lineTo(C,I),b.lineTo(R,L)
let k
if(b.clip(),b.transform(F[0],F[2],F[1],F[3],C,I),b.translate(E[0]-O,E[3]-D),S)k=S.canvas,b.scale(P,-P)
else{const t=g[0],e=t.extent
k=t.image,b.scale((0,n.RG)(e)/k.width,-(0,n.Oq)(e)/k.height)}b.drawImage(k,0,0),b.restore()})),S&&((0,r.Yg)(S),l.push(S.canvas)),m&&(b.save(),b.globalCompositeOperation="source-over",b.strokeStyle="black",b.lineWidth=1,p.getTriangles().forEach((function(t,e,i){const n=t.target,r=(n[0][0]-T[0])/d,o=-(n[0][1]-T[1])/d,s=(n[1][0]-T[0])/d,a=-(n[1][1]-T[1])/d,l=(n[2][0]-T[0])/d,h=-(n[2][1]-T[1])/d
b.beginPath(),b.moveTo(s,a),b.lineTo(r,o),b.lineTo(l,h),b.closePath(),b.stroke()})),b.restore()),b.canvas}},5733:(t,e,i)=>{"use strict"
i.d(e,{A:()=>p})
var n=i(7028),r=i(2272),o=i(8638),s=i(699),a=i(7486),l=i(6582),h=i(5306),u=i(8454),c=i(3236),d=i(4757)
class f extends r.Ay{constructor(t){super({tileCoord:t.tileCoord,loader:()=>Promise.resolve(new Uint8Array(4)),interpolate:t.interpolate,transition:t.transition}),this.pixelRatio_=t.pixelRatio,this.gutter_=t.gutter,this.reprojData_=null,this.reprojError_=null,this.reprojSize_=void 0,this.sourceTileGrid_=t.sourceTileGrid,this.targetTileGrid_=t.targetTileGrid,this.wrappedTileCoord_=t.wrappedTileCoord||t.tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0
const e=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),i=this.targetTileGrid_.getExtent()
let r=this.sourceTileGrid_.getExtent()
const o=i?(0,c._N)(e,i):e
if(0===(0,c.UG)(o))return void(this.state=s.A.EMPTY)
const u=t.sourceProj,d=u.getExtent()
d&&(r=r?(0,c._N)(r,d):d)
const f=this.targetTileGrid_.getResolution(this.wrappedTileCoord_[0]),p=t.targetProj,g=(0,l.aY)(u,p,o,f)
if(!isFinite(g)||g<=0)return void(this.state=s.A.EMPTY)
const _=void 0!==t.errorThreshold?t.errorThreshold:n.l
if(this.triangulation_=new a.A(u,p,o,r,g*_,f),0===this.triangulation_.getTriangles().length)return void(this.state=s.A.EMPTY)
this.sourceZ_=this.sourceTileGrid_.getZForResolution(g)
let m=this.triangulation_.calculateSourceExtent()
if(r&&(u.canWrapX()?(m[1]=(0,h.qE)(m[1],r[1],r[3]),m[3]=(0,h.qE)(m[3],r[1],r[3])):m=(0,c._N)(m,r)),(0,c.UG)(m)){const e=this.sourceTileGrid_.getTileRangeForExtentAndZ(m,this.sourceZ_),i=t.getTileFunction
for(let t=e.minX;t<=e.maxX;t++)for(let n=e.minY;n<=e.maxY;n++){const e=i(this.sourceZ_,t,n,this.pixelRatio_)
e&&this.sourceTiles_.push(e)}0===this.sourceTiles_.length&&(this.state=s.A.EMPTY)}else this.state=s.A.EMPTY}getSize(){return this.reprojSize_}getData(){return this.reprojData_}getError(){return this.reprojError_}reproject_(){const t=[]
if(this.sourceTiles_.forEach((e=>{if(!e||e.getState()!==s.A.LOADED)return
const i=e.getSize(),n=this.gutter_
let o
o=(0,r.bL)(e.getData())||(0,r.$r)((0,r.xo)(e.getData()))
const a=[i[0]+2*n,i[1]+2*n],l=o instanceof Float32Array,h=a[0]*a[1],u=l?Float32Array:Uint8Array,c=new u(o.buffer),d=u.BYTES_PER_ELEMENT,f=d*c.length/h,p=c.byteLength/a[1],g=Math.floor(p/d/a[0]),_=h*g
let m=c
if(c.length!==_){m=new u(_)
let t=0,e=0
const i=a[0]*g
for(let n=0;n<a[1];++n){for(let n=0;n<i;++n)m[t++]=c[e+n]
e+=p/d}}t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),data:new Uint8Array(m.buffer),dataType:u,bytesPerPixel:f,pixelSize:a})})),this.sourceTiles_.length=0,0===t.length)this.state=s.A.ERROR
else{const e=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(e),n="number"==typeof i?i:i[0],r="number"==typeof i?i:i[1],o=this.targetTileGrid_.getResolution(e),a=this.sourceTileGrid_.getResolution(this.sourceZ_),h=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_)
let c,d
const f=t[0].bytesPerPixel
for(let s=Math.ceil(f/3)-1;s>=0;--s){const e=[]
for(let n=0,r=t.length;n<r;++n){const i=t[n],r=i.data,o=i.pixelSize,a=o[0],h=o[1],c=(0,u.Y)(a,h,l.BV),d=c.createImageData(a,h),p=d.data
let g=3*s
for(let t=0,e=p.length;t<e;t+=4)p[t]=r[g],p[t+1]=r[g+1],p[t+2]=r[g+2],p[t+3]=255,g+=f
c.putImageData(d,0,0),e.push({extent:i.extent,image:c.canvas})}const i=(0,l.XX)(n,r,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,h,this.triangulation_,e,this.gutter_,!1,!1,!1,!0)
for(let t=0,n=e.length;t<n;++t){const i=e[t].image.getContext("2d");(0,u.Yg)(i),l.BV.push(i.canvas)}const p=i.getContext("2d"),g=p.getImageData(0,0,i.width,i.height);(0,u.Yg)(p),l.BV.push(i),c||(d=new Uint8Array(f*g.width*g.height),c=new t[0].dataType(d.buffer))
const _=g.data
let m=3*s
for(let t=0,n=_.length;t<n;t+=4)255===_[t+3]?(d[m]=_[t],d[m+1]=_[t+1],d[m+2]=_[t+2]):(d[m]=0,d[m+1]=0,d[m+2]=0),m+=f}this.reprojData_=c,this.reprojSize_=[Math.round(n*this.pixelRatio_),Math.round(r*this.pixelRatio_)],this.state=s.A.LOADED}this.changed()}load(){if(this.state!==s.A.IDLE&&this.state!==s.A.ERROR)return
this.state=s.A.LOADING,this.changed()
let t=0
this.sourcesListenerKeys_=[],this.sourceTiles_.forEach((e=>{const i=e.getState()
if(i!==s.A.IDLE&&i!==s.A.LOADING)return
t++
const n=(0,d.KT)(e,o.A.CHANGE,(function(){const i=e.getState()
i!=s.A.LOADED&&i!=s.A.ERROR&&i!=s.A.EMPTY||((0,d.JH)(n),t--,0===t&&(this.unlistenSources_(),this.reproject_()))}),this)
this.sourcesListenerKeys_.push(n)})),0===t?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach((function(t){t.getState()==s.A.IDLE&&t.load()}))}unlistenSources_(){this.sourcesListenerKeys_.forEach(d.JH),this.sourcesListenerKeys_=null}}const p=f},7893:(t,e,i)=>{"use strict"
i.d(e,{A:()=>p})
var n=i(7028),r=i(8638),o=i(7912),s=i(699),a=i(7486),l=i(6582),h=i(5306),u=i(3236),c=i(4757),d=i(8454)
class f extends o.A{constructor(t,e,i,r,o,c,d,f,p,g,_,m){super(o,s.A.IDLE,m),this.renderEdges_=void 0!==_&&_,this.pixelRatio_=d,this.gutter_=f,this.canvas_=null,this.sourceTileGrid_=e,this.targetTileGrid_=r,this.wrappedTileCoord_=c||o,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0
const y=r.getTileCoordExtent(this.wrappedTileCoord_),v=this.targetTileGrid_.getExtent()
let x=this.sourceTileGrid_.getExtent()
const b=v?(0,u._N)(y,v):y
if(0===(0,u.UG)(b))return void(this.state=s.A.EMPTY)
const w=t.getExtent()
w&&(x=x?(0,u._N)(x,w):w)
const E=r.getResolution(this.wrappedTileCoord_[0]),S=(0,l.aY)(t,i,b,E)
if(!isFinite(S)||S<=0)return void(this.state=s.A.EMPTY)
const C=void 0!==g?g:n.l
if(this.triangulation_=new a.A(t,i,b,x,S*C,E),0===this.triangulation_.getTriangles().length)return void(this.state=s.A.EMPTY)
this.sourceZ_=e.getZForResolution(S)
let P=this.triangulation_.calculateSourceExtent()
if(x&&(t.canWrapX()?(P[1]=(0,h.qE)(P[1],x[1],x[3]),P[3]=(0,h.qE)(P[3],x[1],x[3])):P=(0,u._N)(P,x)),(0,u.UG)(P)){const t=e.getTileRangeForExtentAndZ(P,this.sourceZ_)
for(let e=t.minX;e<=t.maxX;e++)for(let i=t.minY;i<=t.maxY;i++){const t=p(this.sourceZ_,e,i,d)
t&&this.sourceTiles_.push(t)}0===this.sourceTiles_.length&&(this.state=s.A.EMPTY)}else this.state=s.A.EMPTY}getImage(){return this.canvas_}reproject_(){const t=[]
if(this.sourceTiles_.forEach((e=>{e&&e.getState()==s.A.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})})),this.sourceTiles_.length=0,0===t.length)this.state=s.A.ERROR
else{const e=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(e),n="number"==typeof i?i:i[0],r="number"==typeof i?i:i[1],o=this.targetTileGrid_.getResolution(e),a=this.sourceTileGrid_.getResolution(this.sourceZ_),h=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_)
this.canvas_=(0,l.XX)(n,r,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,h,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=s.A.LOADED}this.changed()}load(){if(this.state==s.A.IDLE){this.state=s.A.LOADING,this.changed()
let t=0
this.sourcesListenerKeys_=[],this.sourceTiles_.forEach((e=>{const i=e.getState()
if(i==s.A.IDLE||i==s.A.LOADING){t++
const i=(0,c.KT)(e,r.A.CHANGE,(function(n){const r=e.getState()
r!=s.A.LOADED&&r!=s.A.ERROR&&r!=s.A.EMPTY||((0,c.JH)(i),t--,0===t&&(this.unlistenSources_(),this.reproject_()))}),this)
this.sourcesListenerKeys_.push(i)}})),0===t?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach((function(t,e,i){t.getState()==s.A.IDLE&&t.load()}))}}unlistenSources_(){this.sourcesListenerKeys_.forEach(c.JH),this.sourcesListenerKeys_=null}release(){this.canvas_&&((0,d.Yg)(this.canvas_.getContext("2d")),l.BV.push(this.canvas_),this.canvas_=null),super.release()}}const p=f},7486:(t,e,i)=>{"use strict"
i.d(e,{A:()=>s})
var n=i(3236),r=i(3906),o=i(5306)
const s=class{constructor(t,e,i,o,s,a){this.sourceProj_=t,this.targetProj_=e
let l={}
const h=(0,r.RG)(this.targetProj_,this.sourceProj_)
this.transformInv_=function(t){const e=t[0]+"/"+t[1]
return l[e]||(l[e]=h(t)),l[e]},this.maxSourceExtent_=o,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!o&&!!this.sourceProj_.getExtent()&&(0,n.RG)(o)>=(0,n.RG)(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?(0,n.RG)(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?(0,n.RG)(this.targetProj_.getExtent()):null
const u=(0,n.Py)(i),c=(0,n.WU)(i),d=(0,n.k_)(i),f=(0,n.R)(i),p=this.transformInv_(u),g=this.transformInv_(c),_=this.transformInv_(d),m=this.transformInv_(f),y=10+(a?Math.max(0,Math.ceil(Math.log2((0,n.UG)(i)/(a*a*256*256)))):0)
if(this.addQuad_(u,c,d,f,p,g,_,m,y),this.wrapsXInSource_){let t=1/0
this.triangles_.forEach((function(e,i,n){t=Math.min(t,e.source[0][0],e.source[1][0],e.source[2][0])})),this.triangles_.forEach((e=>{if(Math.max(e.source[0][0],e.source[1][0],e.source[2][0])-t>this.sourceWorldWidth_/2){const i=[[e.source[0][0],e.source[0][1]],[e.source[1][0],e.source[1][1]],[e.source[2][0],e.source[2][1]]]
i[0][0]-t>this.sourceWorldWidth_/2&&(i[0][0]-=this.sourceWorldWidth_),i[1][0]-t>this.sourceWorldWidth_/2&&(i[1][0]-=this.sourceWorldWidth_),i[2][0]-t>this.sourceWorldWidth_/2&&(i[2][0]-=this.sourceWorldWidth_)
const n=Math.min(i[0][0],i[1][0],i[2][0])
Math.max(i[0][0],i[1][0],i[2][0])-n<this.sourceWorldWidth_/2&&(e.source=i)}}))}l={}}addTriangle_(t,e,i,n,r,o){this.triangles_.push({source:[n,r,o],target:[t,e,i]})}addQuad_(t,e,i,r,s,a,l,h,u){const c=(0,n.Tr)([s,a,l,h]),d=this.sourceWorldWidth_?(0,n.RG)(c)/this.sourceWorldWidth_:null,f=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&d>.5&&d<1
let g=!1
if(u>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const o=(0,n.Tr)([t,e,i,r])
g=(0,n.RG)(o)/this.targetWorldWidth_>.25||g}!p&&this.sourceProj_.isGlobal()&&d&&(g=d>.25||g)}if(!g&&this.maxSourceExtent_&&isFinite(c[0])&&isFinite(c[1])&&isFinite(c[2])&&isFinite(c[3])&&!(0,n.HY)(c,this.maxSourceExtent_))return
let _=0
if(!(g||isFinite(s[0])&&isFinite(s[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(l[0])&&isFinite(l[1])&&isFinite(h[0])&&isFinite(h[1])))if(u>0)g=!0
else if(_=(isFinite(s[0])&&isFinite(s[1])?0:8)+(isFinite(a[0])&&isFinite(a[1])?0:4)+(isFinite(l[0])&&isFinite(l[1])?0:2)+(isFinite(h[0])&&isFinite(h[1])?0:1),1!=_&&2!=_&&4!=_&&8!=_)return
if(u>0){if(!g){const e=[(t[0]+i[0])/2,(t[1]+i[1])/2],n=this.transformInv_(e)
let r
r=p?((0,o.xP)(s[0],f)+(0,o.xP)(l[0],f))/2-(0,o.xP)(n[0],f):(s[0]+l[0])/2-n[0]
const a=(s[1]+l[1])/2-n[1]
g=r*r+a*a>this.errorThresholdSquared_}if(g){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){const n=[(e[0]+i[0])/2,(e[1]+i[1])/2],o=this.transformInv_(n),c=[(r[0]+t[0])/2,(r[1]+t[1])/2],d=this.transformInv_(c)
this.addQuad_(t,e,n,c,s,a,o,d,u-1),this.addQuad_(c,n,i,r,d,o,l,h,u-1)}else{const n=[(t[0]+e[0])/2,(t[1]+e[1])/2],o=this.transformInv_(n),c=[(i[0]+r[0])/2,(i[1]+r[1])/2],d=this.transformInv_(c)
this.addQuad_(t,n,c,r,s,o,d,h,u-1),this.addQuad_(n,e,i,c,o,a,l,d,u-1)}return}}if(p){if(!this.canWrapXInSource_)return
this.wrapsXInSource_=!0}11&_||this.addTriangle_(t,i,r,s,l,h),14&_||this.addTriangle_(t,i,e,s,l,a),_&&(13&_||this.addTriangle_(e,r,t,a,h,s),7&_||this.addTriangle_(e,r,i,a,h,l))}calculateSourceExtent(){const t=(0,n.S5)()
return this.triangles_.forEach((function(e,i,r){const o=e.source;(0,n.$C)(t,o[0]),(0,n.$C)(t,o[1]),(0,n.$C)(t,o[2])})),t}getTriangles(){return this.triangles_}}},7028:(t,e,i)=>{"use strict"
i.d(e,{l:()=>n})
const n=.5},1270:(t,e,i)=>{"use strict"
function n(t){return Array.isArray(t)?Math.min(...t):t}i.d(e,{m:()=>n})},3513:(t,e,i)=>{"use strict"
i.d(e,{a$:()=>s,b8:()=>r,cq:()=>a,dv:()=>o})
var n=i(5306)
function r(t){if(void 0!==t)return 0}function o(t){if(void 0!==t)return t}function s(t){const e=2*Math.PI/t
return function(t,i){return i?t:void 0!==t?t=Math.floor(t/e+.5)*e:void 0}}function a(t){const e=void 0===t?(0,n.eh)(5):t
return function(t,i){return i||void 0===t?t:Math.abs(t)<=e?0:t}}},1673:(t,e,i)=>{"use strict"
function n(t){return t[0]>0&&t[1]>0}function r(t,e,i){return void 0===i&&(i=[0,0]),i[0]=t[0]*e+.5|0,i[1]=t[1]*e+.5|0,i}function o(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}i.d(e,{Ie:()=>n,hs:()=>r,xq:()=>o})},8833:(t,e,i)=>{"use strict"
i.r(e),i.d(e,{BingMaps:()=>V,CartoDB:()=>W,Cluster:()=>J,DataTile:()=>it,GeoTIFF:()=>Si,Google:()=>Pi,IIIF:()=>Fi,Image:()=>Ki,ImageArcGISRest:()=>en,ImageCanvas:()=>rn,ImageMapGuide:()=>sn,ImageStatic:()=>ln,ImageWMS:()=>_n,OGCMapTile:()=>Pn,OGCVectorTile:()=>kn,OSM:()=>jn,Raster:()=>er,Source:()=>_.A,StadiaMaps:()=>rr,Tile:()=>D,TileArcGISRest:()=>or,TileDebug:()=>sr,TileImage:()=>q,TileJSON:()=>ar,TileWMS:()=>lr,UTFGrid:()=>ur,UrlTile:()=>B,Vector:()=>H.A,VectorTile:()=>Nn,WMTS:()=>cr,XYZ:()=>Z,Zoomify:()=>Mi,createArcGISRestLoader:()=>tn,createMapGuideLoader:()=>on,createStaticLoader:()=>an,createWMSLoader:()=>gn,sourcesFromTileGrid:()=>dr})
var n=i(6838),r=i(3236),o=i(8638),s=i(519),a=i(7893),l=i(2695)
class h extends n.A{clear(){for(;this.getCount()>0;)this.pop().release()
super.clear()}expireCache(t){for(;this.canExpireCache()&&!(this.peekLast().getKey()in t);)this.pop().release()}pruneExceptNewestZ(){if(0===this.getCount())return
const t=this.peekFirstKey(),e=(0,l.K)(t)[0]
this.forEach((t=>{t.tileCoord[0]!==e&&(this.remove((0,l.i7)(t.tileCoord)),t.release())}))}}const u=h
var c=i(699)
const d="tileloadstart",f="tileloadend",p="tileloaderror"
var g=i(406),_=i(4749),m=i(1736),y=i(6249),v=i(3906),x=i(5959),b=i(9506),w=i(5306),E=i(601),S=i(7195),C=i(1673)
const P=[0,0,0],T=class{constructor(t){let e
if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,(0,y.v)((0,S.WC)(this.resolutions_,((t,e)=>e-t),!0),"`resolutions` must be sorted in descending order"),!t.origins)for(let n=0,r=this.resolutions_.length-1;n<r;++n)if(e){if(this.resolutions_[n]/this.resolutions_[n+1]!==e){e=void 0
break}}else e=this.resolutions_[n]/this.resolutions_[n+1]
this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,(0,y.v)(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"))
const i=t.extent
void 0===i||this.origin_||this.origins_||(this.origin_=(0,r.Py)(i)),(0,y.v)(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,(0,y.v)(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:b.R,(0,y.v)(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=void 0!==i?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map(((t,e)=>{const n=new x.A(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1))
if(i){const t=this.getTileRangeForExtentAndZ(i,e)
n.minX=Math.max(t.minX,n.minX),n.maxX=Math.min(t.maxX,n.maxX),n.minY=Math.max(t.minY,n.minY),n.maxY=Math.min(t.maxY,n.maxY)}return n})):i&&this.calculateTileRanges_(i)}forEachTileCoord(t,e,i){const n=this.getTileRangeForExtentAndZ(t,e)
for(let r=n.minX,o=n.maxX;r<=o;++r)for(let t=n.minY,s=n.maxY;t<=s;++t)i([e,r,t])}forEachTileCoordParentTileRange(t,e,i,n){let r,o,s,a=null,l=t[0]-1
for(2===this.zoomFactor_?(o=t[1],s=t[2]):a=this.getTileCoordExtent(t,n);l>=this.minZoom;){if(void 0!==o&&void 0!==s?(o=Math.floor(o/2),s=Math.floor(s/2),r=(0,x.N)(o,o,s,s,i)):r=this.getTileRangeForExtentAndZ(a,l,i),e(l,r))return!0;--l}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,e,i){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){const i=2*t[1],n=2*t[2]
return(0,x.N)(i,i+1,n,n+1,e)}const n=this.getTileCoordExtent(t,i||this.tmpExtent_)
return this.getTileRangeForExtentAndZ(n,t[0]+1,e)}return null}getTileRangeForTileCoordAndZ(t,e,i){if(e>this.maxZoom||e<this.minZoom)return null
const n=t[0],r=t[1],o=t[2]
if(e===n)return(0,x.N)(r,o,r,o,i)
if(this.zoomFactor_){const t=Math.pow(this.zoomFactor_,e-n),s=Math.floor(r*t),a=Math.floor(o*t)
if(e<n)return(0,x.N)(s,s,a,a,i)
const l=Math.floor(t*(r+1))-1,h=Math.floor(t*(o+1))-1
return(0,x.N)(s,l,a,h,i)}const s=this.getTileCoordExtent(t,this.tmpExtent_)
return this.getTileRangeForExtentAndZ(s,e,i)}getTileRangeForExtentAndZ(t,e,i){this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,P)
const n=P[1],r=P[2]
this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,P)
const o=P[1],s=P[2]
return(0,x.N)(n,o,r,s,i)}getTileCoordCenter(t){const e=this.getOrigin(t[0]),i=this.getResolution(t[0]),n=(0,C.xq)(this.getTileSize(t[0]),this.tmpSize_)
return[e[0]+(t[1]+.5)*n[0]*i,e[1]-(t[2]+.5)*n[1]*i]}getTileCoordExtent(t,e){const i=this.getOrigin(t[0]),n=this.getResolution(t[0]),o=(0,C.xq)(this.getTileSize(t[0]),this.tmpSize_),s=i[0]+t[1]*o[0]*n,a=i[1]-(t[2]+1)*o[1]*n,l=s+o[0]*n,h=a+o[1]*n
return(0,r.N)(s,a,l,h,e)}getTileCoordForCoordAndResolution(t,e,i){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,i)}getTileCoordForXYAndResolution_(t,e,i,n,r){const o=this.getZForResolution(i),s=i/this.getResolution(o),a=this.getOrigin(o),h=(0,C.xq)(this.getTileSize(o),this.tmpSize_)
let u=s*(t-a[0])/i/h[0],c=s*(a[1]-e)/i/h[1]
return n?(u=(0,w.mk)(u,5)-1,c=(0,w.mk)(c,5)-1):(u=(0,w.RI)(u,5),c=(0,w.RI)(c,5)),(0,l.N)(o,u,c,r)}getTileCoordForXYAndZ_(t,e,i,n,r){const o=this.getOrigin(i),s=this.getResolution(i),a=(0,C.xq)(this.getTileSize(i),this.tmpSize_)
let h=(t-o[0])/s/a[0],u=(o[1]-e)/s/a[1]
return n?(h=(0,w.mk)(h,5)-1,u=(0,w.mk)(u,5)-1):(h=(0,w.RI)(h,5),u=(0,w.RI)(u,5)),(0,l.N)(i,h,u,r)}getTileCoordForCoordAndZ(t,e,i){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,i)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,e){const i=(0,S.FT)(this.resolutions_,t,e||0)
return(0,w.qE)(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,e){return(0,E.sj)(e,0,e.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){const e=this.resolutions_.length,i=new Array(e)
for(let n=this.minZoom;n<e;++n)i[n]=this.getTileRangeForExtentAndZ(t,n)
this.fullTileRanges_=i}}
function I(t){let e=t.getDefaultTileGrid()
return e||(e=function(t,e,i,n){return function(t,e,i,n){n=void 0!==n?n:"top-left"
const o=A(t,void 0,i)
return new T({extent:t,origin:(0,r.qF)(t,n),resolutions:o,tileSize:i})}(R(t),0,void 0,void 0)}(t),t.setDefaultTileGrid(e)),e}function M(t){const e=t||{},i=e.extent||(0,v.Jt)("EPSG:3857").getExtent(),n={extent:i,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:A(i,e.maxZoom,e.tileSize,e.maxResolution)}
return new T(n)}function A(t,e,i,n){e=void 0!==e?e:b.L,i=(0,C.xq)(void 0!==i?i:b.R)
const o=(0,r.Oq)(t),s=(0,r.RG)(t)
n=n>0?n:Math.max(s/i[0],o/i[1])
const a=e+1,l=new Array(a)
for(let r=0;r<a;++r)l[r]=n/Math.pow(2,r)
return l}function R(t){let e=(t=(0,v.Jt)(t)).getExtent()
if(!e){const i=180*v.Ig.degrees/t.getMetersPerUnit()
e=(0,r.N)(-i,-i,i,i)}return e}class L extends _.A{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.opaque_=void 0!==t.opaque&&t.opaque,this.tilePixelRatio_=void 0!==t.tilePixelRatio?t.tilePixelRatio:1,this.tileGrid=void 0!==t.tileGrid?t.tileGrid:null,this.tileGrid&&(0,C.xq)(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),[256,256]),this.tileCache=new u(t.cacheSize||0),this.tmpSize=[0,0],this.key_=t.key||"",this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(t,e){const i=this.getTileCacheForProjection(t)
i&&i.expireCache(e)}forEachLoadedTile(t,e,i,n){const r=this.getTileCacheForProjection(t)
if(!r)return!1
let o,s,a,h=!0
for(let u=i.minX;u<=i.maxX;++u)for(let t=i.minY;t<=i.maxY;++t)s=(0,l.dp)(e,u,t),a=!1,r.containsKey(s)&&(o=r.get(s),a=o.getState()===c.A.LOADED,a&&(a=!1!==n(o))),a||(h=!1)
return h}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getOpaque(t){return this.opaque_}getResolutions(t){const e=t?this.getTileGridForProjection(t):this.tileGrid
return e?e.getResolutions():null}getTile(t,e,i,n,r){return(0,m.b0)()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:I(t)}getTileCacheForProjection(t){const e=this.getProjection()
return(0,y.v)(null===e||(0,v.tI)(e,t),"A VectorTile source can only be rendered if it has a projection compatible with the view projection."),this.tileCache}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,e,i){const n=this.getTileGridForProjection(i),r=this.getTilePixelRatio(e),o=(0,C.xq)(n.getTileSize(t),this.tmpSize)
return 1==r?o:(0,C.hs)(o,r,this.tmpSize)}getTileCoordForTileUrlFunction(t,e){e=void 0!==e?e:this.getProjection()
const i=this.getTileGridForProjection(e)
return this.getWrapX()&&e.isGlobal()&&(t=function(t,e,i){const n=e[0],o=t.getTileCoordCenter(e),s=R(i)
if(!(0,r.Ym)(s,o)){const e=(0,r.RG)(s),i=Math.ceil((s[0]-o[0])/e)
return o[0]+=e*i,t.getTileCoordForCoordAndZ(o,n)}return e}(i,t,e)),(0,l.N5)(t,i)?t:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(t,e){const i=this.getTileCacheForProjection(e)
t>i.highWaterMark&&(i.highWaterMark=t)}useTile(t,e,i,n){}}class O extends g.Ay{constructor(t,e){super(t),this.tile=e}}const D=L
function N(t,e){const i=/\{z\}/g,n=/\{x\}/g,r=/\{y\}/g,o=/\{-y\}/g
return function(s,a,l){if(s)return t.replace(i,s[0].toString()).replace(n,s[1].toString()).replace(r,s[2].toString()).replace(o,(function(){const t=s[0],i=e.getFullTileRange(t)
if(!i)throw new Error("The {-y} placeholder requires a tile grid with extent")
return(i.getHeight()-s[2]-1).toString()}))}}function F(t,e){const i=t.length,n=new Array(i)
for(let r=0;r<i;++r)n[r]=N(t[r],e)
return k(n)}function k(t){return 1===t.length?t[0]:function(e,i,n){if(!e)return
const r=(0,l.tW)(e),o=(0,w.xP)(r,t.length)
return t[o](e,i,n)}}function z(t,e,i){}function j(t){const e=[]
let i=/\{([a-z])-([a-z])\}/.exec(t)
if(i){const n=i[1].charCodeAt(0),r=i[2].charCodeAt(0)
let o
for(o=n;o<=r;++o)e.push(t.replace(i[0],String.fromCharCode(o)))
return e}if(i=/\{(\d+)-(\d+)\}/.exec(t),i){const n=parseInt(i[2],10)
for(let r=parseInt(i[1],10);r<=n;r++)e.push(t.replace(i[0],r.toString()))
return e}return e.push(t),e}class G extends D{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===G.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){const e=t.target,i=(0,m.v6)(e),n=e.getState()
let r
n==c.A.LOADING?(this.tileLoadingKeys_[i]=!0,r=d):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],r=n==c.A.ERROR?p:n==c.A.LOADED?f:void 0),null!=r&&this.dispatchEvent(new O(r,e))}setTileLoadFunction(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()}setUrl(t){const e=j(t)
this.urls=e,this.setUrls(e)}setUrls(t){this.urls=t
const e=t.join("\n")
this.generateTileUrlFunction_?this.setTileUrlFunction(F(t,this.tileGrid),e):this.setKey(e)}tileUrlFunction(t,e,i){}useTile(t,e,i){const n=(0,l.dp)(t,e,i)
this.tileCache.containsKey(n)&&this.tileCache.get(n)}}const B=G
function U(t,e){t.getImage().src=e}const q=class extends B{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:U,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:void 0===t.interpolate||t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=void 0!==t.crossOrigin?t.crossOrigin:null,this.tileClass=void 0!==t.tileClass?t.tileClass:s.A,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0
for(const t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0
return!1}expireCache(t,e){const i=this.getTileCacheForProjection(t)
this.tileCache.expireCache(this.tileCache==i?e:{})
for(const n in this.tileCacheForProjection){const t=this.tileCacheForProjection[n]
t.expireCache(t==i?e:{})}}getGutterForProjection(t){return this.getProjection()&&t&&!(0,v.tI)(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey()
return this.getInterpolate()||(t+=":disable-interpolation"),t}getOpaque(t){return!(this.getProjection()&&t&&!(0,v.tI)(this.getProjection(),t))&&super.getOpaque(t)}getTileGridForProjection(t){const e=this.getProjection()
if(this.tileGrid&&(!e||(0,v.tI)(e,t)))return this.tileGrid
const i=(0,m.v6)(t)
return i in this.tileGridForProjection||(this.tileGridForProjection[i]=I(t)),this.tileGridForProjection[i]}getTileCacheForProjection(t){const e=this.getProjection()
if(!e||(0,v.tI)(e,t))return this.tileCache
const i=(0,m.v6)(t)
return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new u(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]}createTile_(t,e,i,n,r,s){const a=[t,e,i],l=this.getTileCoordForTileUrlFunction(a,r),h=l?this.tileUrlFunction(l,n,r):void 0,u=new this.tileClass(a,void 0!==h?c.A.IDLE:c.A.EMPTY,void 0!==h?h:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions)
return u.key=s,u.addEventListener(o.A.CHANGE,this.handleTileChange.bind(this)),u}getTile(t,e,i,n,r){const o=this.getProjection()
if(!o||!r||(0,v.tI)(o,r))return this.getTileInternal(t,e,i,n,o||r)
const s=this.getTileCacheForProjection(r),h=[t,e,i]
let u
const c=(0,l.i7)(h)
s.containsKey(c)&&(u=s.get(c))
const d=this.getKey()
if(u&&u.key==d)return u
const f=this.getTileGridForProjection(o),p=this.getTileGridForProjection(r),g=this.getTileCoordForTileUrlFunction(h,r),_=new a.A(o,f,r,p,h,g,this.getTilePixelRatio(n),this.getGutter(),((t,e,i,n)=>this.getTileInternal(t,e,i,n,o)),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions)
return _.key=d,u?(_.interimTile=u,_.refreshInterimChain(),s.replace(c,_)):s.set(c,_),_}getTileInternal(t,e,i,n,r){let o=null
const s=(0,l.dp)(t,e,i),a=this.getKey()
if(this.tileCache.containsKey(s)){if(o=this.tileCache.get(s),o.key!=a){const l=o
o=this.createTile_(t,e,i,n,r,a),l.getState()==c.A.IDLE?o.interimTile=l.interimTile:o.interimTile=l,o.refreshInterimChain(),this.tileCache.replace(s,o)}}else o=this.createTile_(t,e,i,n,r,a),this.tileCache.set(s,o)
return o}setRenderReprojectionEdges(t){if(this.renderReprojectionEdges_!=t){this.renderReprojectionEdges_=t
for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear()
this.changed()}}setTileGridForProjection(t,e){const i=(0,v.Jt)(t)
if(i){const t=(0,m.v6)(i)
t in this.tileGridForProjection||(this.tileGridForProjection[t]=e)}}clear(){super.clear()
for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear()}},V=class extends q{constructor(t){const e=void 0!==t.hidpi&&t.hidpi
super({cacheSize:t.cacheSize,crossOrigin:"anonymous",interpolate:t.interpolate,opaque:!0,projection:(0,v.Jt)("EPSG:3857"),reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:"loading",tileLoadFunction:t.tileLoadFunction,tilePixelRatio:e?2:1,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:t.zDirection}),this.hidpi_=e,this.culture_=void 0!==t.culture?t.culture:"en-us",this.maxZoom_=void 0!==t.maxZoom?t.maxZoom:-1,this.apiKey_=t.key,this.imagerySet_=t.imagerySet,this.placeholderTiles_=t.placeholderTiles
const i="https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.imagerySet_+"?uriScheme=https&include=ImageryProviders&key="+this.apiKey_+"&c="+this.culture_
fetch(i).then((t=>t.json())).then((t=>this.handleImageryMetadataResponse(t)))}getApiKey(){return this.apiKey_}getImagerySet(){return this.imagerySet_}handleImageryMetadataResponse(t){if(200!=t.statusCode||"OK"!=t.statusDescription||"ValidCredentials"!=t.authenticationResultCode||1!=t.resourceSets.length||1!=t.resourceSets[0].resources.length)return void this.setState("error")
const e=t.resourceSets[0].resources[0],i=-1==this.maxZoom_?e.zoomMax:this.maxZoom_,n=R(this.getProjection()),o=this.hidpi_?2:1,s=e.imageWidth==e.imageHeight?e.imageWidth/o:[e.imageWidth/o,e.imageHeight/o],a=M({extent:n,minZoom:e.zoomMin,maxZoom:i,tileSize:s})
this.tileGrid=a
const h=this.culture_,u=this.hidpi_,c=this.placeholderTiles_
if(this.tileUrlFunction=k(e.imageUrlSubdomains.map((function(t){const i=[0,0,0],n=e.imageUrl.replace("{subdomain}",t).replace("{culture}",h)
return function(t,e,r){if(!t)return;(0,l.N)(t[0],t[1],t[2],i)
const o=new URL(n.replace("{quadkey}",function(t){const e=t[0],i=new Array(e)
let n,r,o=1<<e-1
for(n=0;n<e;++n)r=48,t[1]&o&&(r+=1),t[2]&o&&(r+=2),i[n]=String.fromCharCode(r),o>>=1
return i.join("")}(i))),s=o.searchParams
return u&&(s.set("dpi","d1"),s.set("device","mobile")),!0===c?s.delete("n"):!1===c&&s.set("n","z"),o.toString()}}))),e.imageryProviders){const t=(0,v.FO)((0,v.Jt)("EPSG:4326"),this.getProjection())
this.setAttributions((i=>{const n=[],o=i.viewState,s=this.getTileGrid(),a=s.getZForResolution(o.resolution,this.zDirection),l=s.getTileCoordForCoordAndZ(o.center,a)[0]
return e.imageryProviders.map((function(e){let o=!1
const s=e.coverageAreas
for(let n=0,a=s.length;n<a;++n){const e=s[n]
if(l>=e.zoomMin&&l<=e.zoomMax){const n=e.bbox,s=[n[1],n[0],n[3],n[2]],a=(0,r.NW)(s,t)
if((0,r.HY)(a,i.extent)){o=!0
break}}}o&&n.push(e.attribution)})),n.push('<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html" target="_blank">Terms of Use</a>'),n}))}this.setState("ready")}},Z=class extends q{constructor(t){const e=void 0!==(t=t||{}).projection?t.projection:"EPSG:3857",i=void 0!==t.tileGrid?t.tileGrid:M({extent:R(e),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize})
super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:t.opaque,projection:e,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=void 0!==t.gutter?t.gutter:0}getGutter(){return this.gutter_}},W=class extends Z{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,maxZoom:void 0!==t.maxZoom?t.maxZoom:18,minZoom:t.minZoom,projection:t.projection,transition:t.transition,wrapX:t.wrapX,zDirection:t.zDirection}),this.account_=t.account,this.mapId_=t.map||"",this.config_=t.config||{},this.templateCache_={},this.initializeMap_()}getConfig(){return this.config_}updateConfig(t){Object.assign(this.config_,t),this.initializeMap_()}setConfig(t){this.config_=t||{},this.initializeMap_()}initializeMap_(){const t=JSON.stringify(this.config_)
if(this.templateCache_[t])return void this.applyTemplate_(this.templateCache_[t])
let e="https://"+this.account_+".carto.com/api/v1/map"
this.mapId_&&(e+="/named/"+this.mapId_)
const i=new XMLHttpRequest
i.addEventListener("load",this.handleInitResponse_.bind(this,t)),i.addEventListener("error",this.handleInitError_.bind(this)),i.open("POST",e),i.setRequestHeader("Content-type","application/json"),i.send(JSON.stringify(this.config_))}handleInitResponse_(t,e){const i=e.target
if(!i.status||i.status>=200&&i.status<300){let e
try{e=JSON.parse(i.responseText)}catch(t){return void this.setState("error")}this.applyTemplate_(e),this.templateCache_[t]=e,this.setState("ready")}else this.setState("error")}handleInitError_(t){this.setState("error")}applyTemplate_(t){const e="https://"+t.cdn_url.https+"/"+this.account_+"/api/v1/map/"+t.layergroupid+"/{z}/{x}/{y}.png"
this.setUrl(e)}}
var Y=i(9656),X=i(8225),H=i(9481),$=i(8474)
class K extends H.A{constructor(t){super({attributions:t.attributions,wrapX:t.wrapX}),this.resolution=void 0,this.distance=void 0!==t.distance?t.distance:20,this.minDistance=t.minDistance||0,this.interpolationRatio=0,this.features=[],this.geometryFunction=t.geometryFunction||function(t){const e=t.getGeometry()
return(0,y.v)(!e||"Point"===e.getType(),"The default `geometryFunction` can only handle `Point` or null geometries"),e},this.createCustomCluster_=t.createCluster,this.source=null,this.boundRefresh_=this.refresh.bind(this),this.updateDistance(this.distance,this.minDistance),this.setSource(t.source||null)}clear(t){this.features.length=0,super.clear(t)}getDistance(){return this.distance}getSource(){return this.source}loadFeatures(t,e,i){this.source.loadFeatures(t,e,i),e!==this.resolution&&(this.resolution=e,this.refresh())}setDistance(t){this.updateDistance(t,this.minDistance)}setMinDistance(t){this.updateDistance(this.distance,t)}getMinDistance(){return this.minDistance}setSource(t){this.source&&this.source.removeEventListener(o.A.CHANGE,this.boundRefresh_),this.source=t,t&&t.addEventListener(o.A.CHANGE,this.boundRefresh_),this.refresh()}refresh(){this.clear(),this.cluster(),this.addFeatures(this.features)}updateDistance(t,e){const i=0===t?0:Math.min(e,t)/t,n=t!==this.distance||this.interpolationRatio!==i
this.distance=t,this.minDistance=e,this.interpolationRatio=i,n&&this.refresh()}cluster(){if(void 0===this.resolution||!this.source)return
const t=(0,r.S5)(),e=this.distance*this.resolution,i=this.source.getFeatures(),n={}
for(let o=0,s=i.length;o<s;o++){const s=i[o]
if(!((0,m.v6)(s)in n)){const i=this.geometryFunction(s)
if(i){const o=i.getCoordinates();(0,r.dP)(o,t),(0,r.r)(t,e,t)
const s=this.source.getFeaturesInExtent(t).filter((function(t){const e=(0,m.v6)(t)
return!(e in n)&&(n[e]=!0,!0)}))
this.features.push(this.createCluster(s,t))}}}}createCluster(t,e){const i=[0,0]
for(let r=t.length-1;r>=0;--r){const e=this.geometryFunction(t[r])
e?(0,$.WQ)(i,e.getCoordinates()):t.splice(r,1)}(0,$.hs)(i,1/t.length)
const n=(0,r.q1)(e),o=this.interpolationRatio,s=new X.A([i[0]*(1-o)+n[0]*o,i[1]*(1-o)+n[1]*o])
return this.createCustomCluster_?this.createCustomCluster_(s,t):new Y.A({geometry:s,features:t})}}const J=K
var Q=i(2272),tt=i(5733),et=i(419)
const it=class extends D{constructor(t){const e=void 0===t.projection?"EPSG:3857":t.projection
let i=t.tileGrid
void 0===i&&e&&(i=M({extent:R(e),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize})),super({cacheSize:.1,attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:e,tileGrid:i,opaque:t.opaque,state:t.state,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate}),this.gutter_=void 0!==t.gutter?t.gutter:0,this.tileSize_=t.tileSize?(0,C.xq)(t.tileSize):null,this.tileSizes_=null,this.tileLoadingKeys_={},this.loader_=t.loader,this.handleTileChange_=this.handleTileChange_.bind(this),this.bandCount=void 0===t.bandCount?4:t.bandCount,this.tileGridForProjection_={},this.tileCacheForProjection_={}}setTileSizes(t){this.tileSizes_=t}getTileSize(t){if(this.tileSizes_)return this.tileSizes_[t]
if(this.tileSize_)return this.tileSize_
const e=this.getTileGrid()
return e?(0,C.xq)(e.getTileSize(t)):[256,256]}getGutterForProjection(t){const e=this.getProjection()
return!e||(0,v.tI)(e,t)?this.gutter_:0}setLoader(t){this.loader_=t}getReprojTile_(t,e,i,n,r){const o=this.getTileCacheForProjection(n),s=(0,l.dp)(t,e,i)
if(o.containsKey(s)){const t=o.get(s)
if(t&&t.key==this.getKey())return t}const a=this.getTileGrid(),h=Math.max.apply(null,a.getResolutions().map(((t,e)=>{const i=(0,C.xq)(a.getTileSize(e)),n=this.getTileSize(e)
return Math.max(n[0]/i[0],n[1]/i[1])}))),u=this.getTileGridForProjection(r),c=this.getTileGridForProjection(n),d=[t,e,i],f=this.getTileCoordForTileUrlFunction(d,n),p=Object.assign({sourceProj:r,sourceTileGrid:u,targetProj:n,targetTileGrid:c,tileCoord:d,wrappedTileCoord:f,pixelRatio:h,gutter:this.getGutterForProjection(r),getTileFunction:(t,e,i,n)=>this.getTile(t,e,i,n,r)},this.tileOptions),g=new tt.A(p)
return g.key=this.getKey(),g}getTile(t,e,i,n,r){const s=this.getProjection()
if(s&&r&&!(0,v.tI)(s,r))return this.getReprojTile_(t,e,i,r,s)
const a=this.getTileSize(t),h=(0,l.dp)(t,e,i)
if(this.tileCache.containsKey(h))return this.tileCache.get(h)
const u=this.loader_,c=Object.assign({tileCoord:[t,e,i],loader:function(){return(0,et.hq)((function(){return u(t,e,i)}))},size:a},this.tileOptions),d=new Q.Ay(c)
return d.key=this.getKey(),d.addEventListener(o.A.CHANGE,this.handleTileChange_),this.tileCache.set(h,d),d}handleTileChange_(t){const e=t.target,i=(0,m.v6)(e),n=e.getState()
let r
n==c.A.LOADING?(this.tileLoadingKeys_[i]=!0,r=d):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],r=n==c.A.ERROR?p:n==c.A.LOADED?f:void 0),r&&this.dispatchEvent(new O(r,e))}getTileGridForProjection(t){const e=this.getProjection()
if(this.tileGrid&&(!e||(0,v.tI)(e,t)))return this.tileGrid
const i=(0,m.v6)(t)
return i in this.tileGridForProjection_||(this.tileGridForProjection_[i]=I(t)),this.tileGridForProjection_[i]}setTileGridForProjection(t,e){const i=(0,v.Jt)(t)
if(i){const t=(0,m.v6)(i)
t in this.tileGridForProjection_||(this.tileGridForProjection_[t]=e)}}getTileCacheForProjection(t){const e=this.getProjection()
if(!e||(0,v.tI)(e,t))return this.tileCache
const i=(0,m.v6)(t)
return i in this.tileCacheForProjection_||(this.tileCacheForProjection_[i]=new u(.1)),this.tileCacheForProjection_[i]}expireCache(t,e){const i=this.getTileCacheForProjection(t)
this.tileCache.expireCache(this.tileCache==i?e:{})
for(const n in this.tileCacheForProjection_){const t=this.tileCacheForProjection_[n]
t.expireCache(t==i?e:{})}}clear(){super.clear()
for(const t in this.tileCacheForProjection_)this.tileCacheForProjection_[t].clear()}}
var nt=i(7242)
const rt=new Map
function ot(t,e){Array.isArray(t)||(t=[t]),t.forEach((t=>rt.set(t,e)))}async function st(t){const e=rt.get(t.Compression)
if(!e)throw new Error(`Unknown compression method identifier: ${t.Compression}`)
return new(await e())(t)}ot([void 0,1],(()=>i.e(205).then(i.bind(i,9205)).then((t=>t.default)))),ot(5,(()=>i.e(816).then(i.bind(i,1816)).then((t=>t.default)))),ot(6,(()=>{throw new Error("old style JPEG compression is not supported.")})),ot(7,(()=>i.e(517).then(i.bind(i,5517)).then((t=>t.default)))),ot([8,32946],(()=>Promise.all([i.e(75),i.e(188)]).then(i.bind(i,1188)).then((t=>t.default)))),ot(32773,(()=>i.e(570).then(i.bind(i,3570)).then((t=>t.default)))),ot(34887,(()=>Promise.all([i.e(75),i.e(916)]).then(i.bind(i,2916)).then((async t=>(await t.zstd.init(),t))).then((t=>t.default)))),ot(50001,(()=>i.e(388).then(i.bind(i,388)).then((t=>t.default))))
const at="undefined"!=typeof navigator&&navigator.hardwareConcurrency||2,lt=class{constructor(t=at,e){this.workers=null,this._awaitingDecoder=null,this.size=t,this.messageId=0,t&&(this._awaitingDecoder=e?Promise.resolve(e):new Promise((t=>{i.e(161).then(i.bind(i,2161)).then((e=>{t(e.create)}))})),this._awaitingDecoder.then((e=>{this._awaitingDecoder=null,this.workers=[]
for(let i=0;i<t;i++)this.workers.push({worker:e(),idle:!0})})))}async decode(t,e){return this._awaitingDecoder&&await this._awaitingDecoder,0===this.size?st(t).then((i=>i.decode(t,e))):new Promise((i=>{const n=this.workers.find((t=>t.idle))||this.workers[Math.floor(Math.random()*this.size)]
n.idle=!1
const r=this.messageId++,o=t=>{t.data.id===r&&(n.idle=!0,i(t.data.decoded),n.worker.removeEventListener("message",o))}
n.worker.addEventListener("message",o),n.worker.postMessage({fileDirectory:t,buffer:e,id:r},[e])}))}destroy(){this.workers&&(this.workers.forEach((t=>{t.worker.terminate()})),this.workers=null)}}
function ht(t){return(e,...i)=>ct(t,e,i)}function ut(t,e){return ht(gt(t,e).get)}const{apply:ct,construct:dt,defineProperty:ft,get:pt,getOwnPropertyDescriptor:gt,getPrototypeOf:_t,has:mt,ownKeys:yt,set:vt,setPrototypeOf:xt}=Reflect,{EPSILON:bt,MAX_SAFE_INTEGER:wt,isFinite:Et,isNaN:St}=Number,{iterator:Ct,species:Pt,toStringTag:Tt,for:It}=Symbol,Mt=Object,{create:At,defineProperty:Rt,freeze:Lt,is:Ot}=Mt,Dt=Mt.prototype,Nt=(Dt.__lookupGetter__&&ht(Dt.__lookupGetter__),Mt.hasOwn||ht(Dt.hasOwnProperty),Array),Ft=(Nt.isArray,Nt.prototype),kt=(ht(Ft.join),ht(Ft.push),ht(Ft.toLocaleString),Ft[Ct]),zt=ht(kt),{abs:jt,trunc:Gt}=Math,Bt=ArrayBuffer,Ut=(Bt.isView,Bt.prototype),qt=(ht(Ut.slice),ut(Ut,"byteLength"),"undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:null),Vt=(qt&&ut(qt.prototype,"byteLength"),_t(Uint8Array)),Zt=(Vt.from,Vt.prototype),Wt=(Zt[Ct],ht(Zt.keys),ht(Zt.values),ht(Zt.entries),ht(Zt.set),ht(Zt.reverse),ht(Zt.fill),ht(Zt.copyWithin),ht(Zt.sort),ht(Zt.slice),ht(Zt.subarray),ut(Zt,"buffer"),ut(Zt,"byteOffset"),ut(Zt,"length"),ut(Zt,Tt),Uint8Array),Yt=Uint16Array,Xt=Uint32Array,Ht=Float32Array,$t=_t([][Ct]()),Kt=ht($t.next),Jt=ht(function*(){}().next),Qt=_t($t),te=DataView.prototype,ee=ht(te.getUint16),ie=(ht(te.setUint16),TypeError,WeakSet.prototype),ne=(ht(ie.add),ht(ie.has),WeakMap),re=ne.prototype,oe=ht(re.get),se=(ht(re.has),ht(re.set)),ae=new ne,le=At(null,{next:{value:function(){const t=oe(ae,this)
return Kt(t)}},[Ct]:{value:function(){return this}}}),he=new ne,ue=At(Qt,{next:{value:function(){const t=oe(he,this)
return Jt(t)},writable:!0,configurable:!0}})
for(const fr of yt($t))"next"!==fr&&Rt(ue,fr,gt($t,fr))
const ce=new Bt(4),de=new Ht(ce),fe=new Xt(ce),pe=new Yt(512),ge=new Wt(512)
for(let fr=0;fr<256;++fr){const t=fr-127
t<-27?(pe[fr]=0,pe[256|fr]=32768,ge[fr]=24,ge[256|fr]=24):t<-14?(pe[fr]=1024>>-t-14,pe[256|fr]=1024>>-t-14|32768,ge[fr]=-t-1,ge[256|fr]=-t-1):t<=15?(pe[fr]=t+15<<10,pe[256|fr]=t+15<<10|32768,ge[fr]=13,ge[256|fr]=13):t<128?(pe[fr]=31744,pe[256|fr]=64512,ge[fr]=24,ge[256|fr]=24):(pe[fr]=31744,pe[256|fr]=64512,ge[fr]=13,ge[256|fr]=13)}const _e=new Xt(2048)
for(let fr=1;fr<1024;++fr){let t=fr<<13,e=0
for(;!(8388608&t);)t<<=1,e-=8388608
t&=-8388609,e+=947912704,_e[fr]=t|e}for(let fr=1024;fr<2048;++fr)_e[fr]=939524096+(fr-1024<<13)
const me=new Xt(64)
for(let fr=1;fr<31;++fr)me[fr]=fr<<23
me[31]=1199570944,me[32]=2147483648
for(let fr=33;fr<63;++fr)me[fr]=2147483648+(fr-32<<23)
me[63]=3347054592
const ye=new Yt(64)
for(let fr=1;fr<64;++fr)32!==fr&&(ye[fr]=1024)
function ve(t,e,...i){return function(t){const e=t>>10
return fe[0]=_e[ye[e]+(1023&t)]+me[e],de[0]}(ee(t,e,...function(t){if(t[Ct]===kt&&$t.next===Kt)return t
const e=At(le)
return se(ae,e,zt(t)),e}(i)))}var xe=i(5633),be=i(3197)
function we(t,e,i,n=1){return new(Object.getPrototypeOf(t).constructor)(e*i*n)}function Ee(t,e,i){return(1-i)*t+i*e}function Se(t,e,i){let n=0
for(let r=e;r<i;++r)n+=t[r]
return n}function Ce(t,e,i){switch(t){case 1:if(e<=8)return new Uint8Array(i)
if(e<=16)return new Uint16Array(i)
if(e<=32)return new Uint32Array(i)
break
case 2:if(8===e)return new Int8Array(i)
if(16===e)return new Int16Array(i)
if(32===e)return new Int32Array(i)
break
case 3:switch(e){case 16:case 32:return new Float32Array(i)
case 64:return new Float64Array(i)}}throw Error("Unsupported data format/bitsPerSample")}const Pe=class{constructor(t,e,i,n,r,o){this.fileDirectory=t,this.geoKeys=e,this.dataView=i,this.littleEndian=n,this.tiles=r?{}:null,this.isTiled=!t.StripOffsets
const s=t.PlanarConfiguration
if(this.planarConfiguration=void 0===s?1:s,1!==this.planarConfiguration&&2!==this.planarConfiguration)throw new Error("Invalid planar configuration.")
this.source=o}getFileDirectory(){return this.fileDirectory}getGeoKeys(){return this.geoKeys}getWidth(){return this.fileDirectory.ImageWidth}getHeight(){return this.fileDirectory.ImageLength}getSamplesPerPixel(){return void 0!==this.fileDirectory.SamplesPerPixel?this.fileDirectory.SamplesPerPixel:1}getTileWidth(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}getTileHeight(){return this.isTiled?this.fileDirectory.TileLength:void 0!==this.fileDirectory.RowsPerStrip?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}getBlockWidth(){return this.getTileWidth()}getBlockHeight(t){return this.isTiled||(t+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-t*this.getTileHeight()}getBytesPerPixel(){let t=0
for(let e=0;e<this.fileDirectory.BitsPerSample.length;++e)t+=this.getSampleByteSize(e)
return t}getSampleByteSize(t){if(t>=this.fileDirectory.BitsPerSample.length)throw new RangeError(`Sample index ${t} is out of range.`)
return Math.ceil(this.fileDirectory.BitsPerSample[t]/8)}getReaderForSample(t){const e=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1,i=this.fileDirectory.BitsPerSample[t]
switch(e){case 1:if(i<=8)return DataView.prototype.getUint8
if(i<=16)return DataView.prototype.getUint16
if(i<=32)return DataView.prototype.getUint32
break
case 2:if(i<=8)return DataView.prototype.getInt8
if(i<=16)return DataView.prototype.getInt16
if(i<=32)return DataView.prototype.getInt32
break
case 3:switch(i){case 16:return function(t,e){return ve(this,t,e)}
case 32:return DataView.prototype.getFloat32
case 64:return DataView.prototype.getFloat64}}throw Error("Unsupported data format/bitsPerSample")}getSampleFormat(t=0){return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1}getBitsPerSample(t=0){return this.fileDirectory.BitsPerSample[t]}getArrayForSample(t,e){return Ce(this.getSampleFormat(t),this.getBitsPerSample(t),e)}async getTileOrStrip(t,e,i,n,r){const o=Math.ceil(this.getWidth()/this.getTileWidth()),s=Math.ceil(this.getHeight()/this.getTileHeight())
let a
const{tiles:l}=this
let h,u
1===this.planarConfiguration?a=e*o+t:2===this.planarConfiguration&&(a=i*o*s+e*o+t),this.isTiled?(h=this.fileDirectory.TileOffsets[a],u=this.fileDirectory.TileByteCounts[a]):(h=this.fileDirectory.StripOffsets[a],u=this.fileDirectory.StripByteCounts[a])
const c=(await this.source.fetch([{offset:h,length:u}],r))[0]
let d
return null!==l&&l[a]?d=l[a]:(d=(async()=>{let t=await n.decode(this.fileDirectory,c)
const i=this.getSampleFormat(),r=this.getBitsPerSample()
return function(t,e){return(1!==t&&2!==t||!(e<=32)||e%8!=0)&&(3!==t||16!==e&&32!==e&&64!==e)}(i,r)&&(t=function(t,e,i,n,r,o,s){const a=new DataView(t),l=2===i?1:n,h=Ce(e,r,2===i?s*o:s*o*n),u=parseInt("1".repeat(r),2)
if(1===e){let t
t=1===i?n*r:r
let e=o*t
7&e&&(e=e+7&-8)
for(let i=0;i<s;++i){const t=i*e
for(let e=0;e<o;++e){const n=t+e*l*r
for(let t=0;t<l;++t){const s=n+t*r,c=(i*o+e)*l+t,d=Math.floor(s/8),f=s%8
if(f+r<=8)h[c]=a.getUint8(d)>>8-r-f&u
else if(f+r<=16)h[c]=a.getUint16(d)>>16-r-f&u
else if(f+r<=24){const t=a.getUint16(d)<<8|a.getUint8(d+2)
h[c]=t>>24-r-f&u}else h[c]=a.getUint32(d)>>32-r-f&u}}}}return h.buffer}(t,i,this.planarConfiguration,this.getSamplesPerPixel(),r,this.getTileWidth(),this.getBlockHeight(e))),t})(),null!==l&&(l[a]=d)),{x:t,y:e,sample:i,data:await d}}async _readRaster(t,e,i,n,r,o,s,a,l){const h=this.getTileWidth(),u=this.getTileHeight(),c=this.getWidth(),d=this.getHeight(),f=Math.max(Math.floor(t[0]/h),0),p=Math.min(Math.ceil(t[2]/h),Math.ceil(c/h)),g=Math.max(Math.floor(t[1]/u),0),_=Math.min(Math.ceil(t[3]/u),Math.ceil(d/u)),m=t[2]-t[0]
let y=this.getBytesPerPixel()
const v=[],x=[]
for(let E=0;E<e.length;++E)1===this.planarConfiguration?v.push(Se(this.fileDirectory.BitsPerSample,0,e[E])/8):v.push(0),x.push(this.getReaderForSample(e[E]))
const b=[],{littleEndian:w}=this
for(let E=g;E<_;++E)for(let o=f;o<p;++o){let s
1===this.planarConfiguration&&(s=this.getTileOrStrip(o,E,0,r,l))
for(let a=0;a<e.length;++a){const f=a,p=e[a]
2===this.planarConfiguration&&(y=this.getSampleByteSize(p),s=this.getTileOrStrip(o,E,p,r,l))
const g=s.then((r=>{const o=r.data,s=new DataView(o),a=this.getBlockHeight(r.y),l=r.y*u,p=r.x*h,g=l+a,_=(r.x+1)*h,b=x[f],E=Math.min(a,a-(g-t[3]),d-l),S=Math.min(h,h-(_-t[2]),c-p)
for(let u=Math.max(0,t[1]-l);u<E;++u)for(let r=Math.max(0,t[0]-p);r<S;++r){const o=(u*h+r)*y,a=b.call(s,o+v[f],w)
let c
n?(c=(u+l-t[1])*m*e.length+(r+p-t[0])*e.length+f,i[c]=a):(c=(u+l-t[1])*m+r+p-t[0],i[f][c]=a)}}))
b.push(g)}}if(await Promise.all(b),o&&t[2]-t[0]!==o||s&&t[3]-t[1]!==s){let r
return r=n?function(t,e,i,n,r,o,s="nearest"){switch(s.toLowerCase()){case"nearest":return function(t,e,i,n,r,o){const s=e/n,a=i/r,l=we(t,n,r,o)
for(let h=0;h<r;++h){const r=Math.min(Math.round(a*h),i-1)
for(let i=0;i<n;++i){const a=Math.min(Math.round(s*i),e-1)
for(let s=0;s<o;++s){const u=t[r*e*o+a*o+s]
l[h*n*o+i*o+s]=u}}}return l}(t,e,i,n,r,o)
case"bilinear":case"linear":return function(t,e,i,n,r,o){const s=e/n,a=i/r,l=we(t,n,r,o)
for(let h=0;h<r;++h){const r=a*h,u=Math.floor(r),c=Math.min(Math.ceil(r),i-1)
for(let i=0;i<n;++i){const a=s*i,d=a%1,f=Math.floor(a),p=Math.min(Math.ceil(a),e-1)
for(let s=0;s<o;++s){const a=t[u*e*o+f*o+s],g=t[u*e*o+p*o+s],_=t[c*e*o+f*o+s],m=t[c*e*o+p*o+s],y=Ee(Ee(a,g,d),Ee(_,m,d),r%1)
l[h*n*o+i*o+s]=y}}}return l}(t,e,i,n,r,o)
default:throw new Error(`Unsupported resampling method: '${s}'`)}}(i,t[2]-t[0],t[3]-t[1],o,s,e.length,a):function(t,e,i,n,r,o="nearest"){switch(o.toLowerCase()){case"nearest":return function(t,e,i,n,r){const o=e/n,s=i/r
return t.map((t=>{const a=we(t,n,r)
for(let l=0;l<r;++l){const r=Math.min(Math.round(s*l),i-1)
for(let i=0;i<n;++i){const s=Math.min(Math.round(o*i),e-1),h=t[r*e+s]
a[l*n+i]=h}}return a}))}(t,e,i,n,r)
case"bilinear":case"linear":return function(t,e,i,n,r){const o=e/n,s=i/r
return t.map((t=>{const a=we(t,n,r)
for(let l=0;l<r;++l){const r=s*l,h=Math.floor(r),u=Math.min(Math.ceil(r),i-1)
for(let i=0;i<n;++i){const s=o*i,c=s%1,d=Math.floor(s),f=Math.min(Math.ceil(s),e-1),p=t[h*e+d],g=t[h*e+f],_=t[u*e+d],m=t[u*e+f],y=Ee(Ee(p,g,c),Ee(_,m,c),r%1)
a[l*n+i]=y}}return a}))}(t,e,i,n,r)
default:throw new Error(`Unsupported resampling method: '${o}'`)}}(i,t[2]-t[0],t[3]-t[1],o,s,a),r.width=o,r.height=s,r}return i.width=o||t[2]-t[0],i.height=s||t[3]-t[1],i}async readRasters({window:t,samples:e=[],interleave:i,pool:n=null,width:r,height:o,resampleMethod:s,fillValue:a,signal:l}={}){const h=t||[0,0,this.getWidth(),this.getHeight()]
if(h[0]>h[2]||h[1]>h[3])throw new Error("Invalid subsets")
const u=(h[2]-h[0])*(h[3]-h[1]),c=this.getSamplesPerPixel()
if(e&&e.length){for(let p=0;p<e.length;++p)if(e[p]>=c)return Promise.reject(new RangeError(`Invalid sample index '${e[p]}'.`))}else for(let p=0;p<c;++p)e.push(p)
let d
if(i)d=Ce(this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,Math.max.apply(null,this.fileDirectory.BitsPerSample),u*e.length),a&&d.fill(a)
else{d=[]
for(let t=0;t<e.length;++t){const i=this.getArrayForSample(e[t],u)
Array.isArray(a)&&t<a.length?i.fill(a[t]):a&&!Array.isArray(a)&&i.fill(a),d.push(i)}}const f=n||await st(this.fileDirectory)
return await this._readRaster(h,e,d,i,f,r,o,s,l)}async readRGB({window:t,interleave:e=!0,pool:i=null,width:n,height:r,resampleMethod:o,enableAlpha:s=!1,signal:a}={}){const l=t||[0,0,this.getWidth(),this.getHeight()]
if(l[0]>l[2]||l[1]>l[3])throw new Error("Invalid subsets")
const h=this.fileDirectory.PhotometricInterpretation
if(h===nt.ub.RGB){let l=[0,1,2]
if(this.fileDirectory.ExtraSamples!==nt.AC.Unspecified&&s){l=[]
for(let t=0;t<this.fileDirectory.BitsPerSample.length;t+=1)l.push(t)}return this.readRasters({window:t,interleave:e,samples:l,pool:i,width:n,height:r,resampleMethod:o,signal:a})}let u
switch(h){case nt.ub.WhiteIsZero:case nt.ub.BlackIsZero:case nt.ub.Palette:u=[0]
break
case nt.ub.CMYK:u=[0,1,2,3]
break
case nt.ub.YCbCr:case nt.ub.CIELab:u=[0,1,2]
break
default:throw new Error("Invalid or unsupported photometric interpretation.")}const c={window:l,interleave:!0,samples:u,pool:i,width:n,height:r,resampleMethod:o,signal:a},{fileDirectory:d}=this,f=await this.readRasters(c),p=2**this.fileDirectory.BitsPerSample[0]
let g
switch(h){case nt.ub.WhiteIsZero:g=function(t,e){const{width:i,height:n}=t,r=new Uint8Array(i*n*3)
let o
for(let s=0,a=0;s<t.length;++s,a+=3)o=256-t[s]/e*256,r[a]=o,r[a+1]=o,r[a+2]=o
return r}(f,p)
break
case nt.ub.BlackIsZero:g=function(t,e){const{width:i,height:n}=t,r=new Uint8Array(i*n*3)
let o
for(let s=0,a=0;s<t.length;++s,a+=3)o=t[s]/e*256,r[a]=o,r[a+1]=o,r[a+2]=o
return r}(f,p)
break
case nt.ub.Palette:g=function(t,e){const{width:i,height:n}=t,r=new Uint8Array(i*n*3),o=e.length/3,s=e.length/3*2
for(let a=0,l=0;a<t.length;++a,l+=3){const i=t[a]
r[l]=e[i]/65536*256,r[l+1]=e[i+o]/65536*256,r[l+2]=e[i+s]/65536*256}return r}(f,d.ColorMap)
break
case nt.ub.CMYK:g=function(t){const{width:e,height:i}=t,n=new Uint8Array(e*i*3)
for(let r=0,o=0;r<t.length;r+=4,o+=3){const e=t[r],i=t[r+1],s=t[r+2],a=t[r+3]
n[o]=(255-e)/256*255*((255-a)/256),n[o+1]=(255-i)/256*255*((255-a)/256),n[o+2]=(255-s)/256*255*((255-a)/256)}return n}(f)
break
case nt.ub.YCbCr:g=function(t){const{width:e,height:i}=t,n=new Uint8ClampedArray(e*i*3)
for(let r=0,o=0;r<t.length;r+=3,o+=3){const e=t[r],i=t[r+1],s=t[r+2]
n[o]=e+1.402*(s-128),n[o+1]=e-.34414*(i-128)-.71414*(s-128),n[o+2]=e+1.772*(i-128)}return n}(f)
break
case nt.ub.CIELab:g=function(t){const{width:e,height:i}=t,n=new Uint8Array(e*i*3)
for(let r=0,o=0;r<t.length;r+=3,o+=3){let e,i,s,a=(t[r+0]+16)/116,l=(t[r+1]<<24>>24)/500+a,h=a-(t[r+2]<<24>>24)/200
l=.95047*(l*l*l>.008856?l*l*l:(l-16/116)/7.787),a=1*(a*a*a>.008856?a*a*a:(a-16/116)/7.787),h=1.08883*(h*h*h>.008856?h*h*h:(h-16/116)/7.787),e=3.2406*l+-1.5372*a+-.4986*h,i=-.9689*l+1.8758*a+.0415*h,s=.0557*l+-.204*a+1.057*h,e=e>.0031308?1.055*e**(1/2.4)-.055:12.92*e,i=i>.0031308?1.055*i**(1/2.4)-.055:12.92*i,s=s>.0031308?1.055*s**(1/2.4)-.055:12.92*s,n[o]=255*Math.max(0,Math.min(1,e)),n[o+1]=255*Math.max(0,Math.min(1,i)),n[o+2]=255*Math.max(0,Math.min(1,s))}return n}(f)
break
default:throw new Error("Unsupported photometric interpretation.")}if(!e){const t=new Uint8Array(g.length/3),e=new Uint8Array(g.length/3),i=new Uint8Array(g.length/3)
for(let n=0,r=0;n<g.length;n+=3,++r)t[r]=g[n],e[r]=g[n+1],i[r]=g[n+2]
g=[t,e,i]}return g.width=f.width,g.height=f.height,g}getTiePoints(){if(!this.fileDirectory.ModelTiepoint)return[]
const t=[]
for(let e=0;e<this.fileDirectory.ModelTiepoint.length;e+=6)t.push({i:this.fileDirectory.ModelTiepoint[e],j:this.fileDirectory.ModelTiepoint[e+1],k:this.fileDirectory.ModelTiepoint[e+2],x:this.fileDirectory.ModelTiepoint[e+3],y:this.fileDirectory.ModelTiepoint[e+4],z:this.fileDirectory.ModelTiepoint[e+5]})
return t}getGDALMetadata(t=null){const e={}
if(!this.fileDirectory.GDAL_METADATA)return null
const i=this.fileDirectory.GDAL_METADATA
let n=be(i,"Item")
n=null===t?n.filter((t=>void 0===xe(t,"sample"))):n.filter((e=>Number(xe(e,"sample"))===t))
for(let r=0;r<n.length;++r){const t=n[r]
e[xe(t,"name")]=t.inner}return e}getGDALNoData(){if(!this.fileDirectory.GDAL_NODATA)return null
const t=this.fileDirectory.GDAL_NODATA
return Number(t.substring(0,t.length-1))}getOrigin(){const t=this.fileDirectory.ModelTiepoint,e=this.fileDirectory.ModelTransformation
if(t&&6===t.length)return[t[3],t[4],t[5]]
if(e)return[e[3],e[7],e[11]]
throw new Error("The image does not have an affine transformation.")}getResolution(t=null){const e=this.fileDirectory.ModelPixelScale,i=this.fileDirectory.ModelTransformation
if(e)return[e[0],-e[1],e[2]]
if(i)return 0===i[1]&&0===i[4]?[i[0],-i[5],i[10]]:[Math.sqrt(i[0]*i[0]+i[4]*i[4]),-Math.sqrt(i[1]*i[1]+i[5]*i[5]),i[10]]
if(t){const[e,i,n]=t.getResolution()
return[e*t.getWidth()/this.getWidth(),i*t.getHeight()/this.getHeight(),n*t.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}pixelIsArea(){return 1===this.geoKeys.GTRasterTypeGeoKey}getBoundingBox(t=!1){const e=this.getHeight(),i=this.getWidth()
if(this.fileDirectory.ModelTransformation&&!t){const[t,n,r,o,s,a,l,h]=this.fileDirectory.ModelTransformation,u=[[0,0],[0,e],[i,0],[i,e]].map((([e,i])=>[o+t*e+n*i,h+s*e+a*i])),c=u.map((t=>t[0])),d=u.map((t=>t[1]))
return[Math.min(...c),Math.min(...d),Math.max(...c),Math.max(...d)]}{const t=this.getOrigin(),n=this.getResolution(),r=t[0],o=t[1],s=r+n[0]*i,a=o+n[1]*e
return[Math.min(r,s),Math.min(o,a),Math.max(r,s),Math.max(o,a)]}}}
class Te{constructor(t){this._dataView=new DataView(t)}get buffer(){return this._dataView.buffer}getUint64(t,e){const i=this.getUint32(t,e),n=this.getUint32(t+4,e)
let r
if(e){if(r=i+2**32*n,!Number.isSafeInteger(r))throw new Error(`${r} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`)
return r}if(r=2**32*i+n,!Number.isSafeInteger(r))throw new Error(`${r} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`)
return r}getInt64(t,e){let i=0
const n=(128&this._dataView.getUint8(t+(e?7:0)))>0
let r=!0
for(let o=0;o<8;o++){let s=this._dataView.getUint8(t+(e?o:7-o))
n&&(r?0!==s&&(s=255&~(s-1),r=!1):s=255&~s),i+=s*256**o}return n&&(i=-i),i}getUint8(t,e){return this._dataView.getUint8(t,e)}getInt8(t,e){return this._dataView.getInt8(t,e)}getUint16(t,e){return this._dataView.getUint16(t,e)}getInt16(t,e){return this._dataView.getInt16(t,e)}getUint32(t,e){return this._dataView.getUint32(t,e)}getInt32(t,e){return this._dataView.getInt32(t,e)}getFloat16(t,e){return ve(this._dataView,t,e)}getFloat32(t,e){return this._dataView.getFloat32(t,e)}getFloat64(t,e){return this._dataView.getFloat64(t,e)}}class Ie{constructor(t,e,i,n){this._dataView=new DataView(t),this._sliceOffset=e,this._littleEndian=i,this._bigTiff=n}get sliceOffset(){return this._sliceOffset}get sliceTop(){return this._sliceOffset+this.buffer.byteLength}get littleEndian(){return this._littleEndian}get bigTiff(){return this._bigTiff}get buffer(){return this._dataView.buffer}covers(t,e){return this.sliceOffset<=t&&this.sliceTop>=t+e}readUint8(t){return this._dataView.getUint8(t-this._sliceOffset,this._littleEndian)}readInt8(t){return this._dataView.getInt8(t-this._sliceOffset,this._littleEndian)}readUint16(t){return this._dataView.getUint16(t-this._sliceOffset,this._littleEndian)}readInt16(t){return this._dataView.getInt16(t-this._sliceOffset,this._littleEndian)}readUint32(t){return this._dataView.getUint32(t-this._sliceOffset,this._littleEndian)}readInt32(t){return this._dataView.getInt32(t-this._sliceOffset,this._littleEndian)}readFloat32(t){return this._dataView.getFloat32(t-this._sliceOffset,this._littleEndian)}readFloat64(t){return this._dataView.getFloat64(t-this._sliceOffset,this._littleEndian)}readUint64(t){const e=this.readUint32(t),i=this.readUint32(t+4)
let n
if(this._littleEndian){if(n=e+2**32*i,!Number.isSafeInteger(n))throw new Error(`${n} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`)
return n}if(n=2**32*e+i,!Number.isSafeInteger(n))throw new Error(`${n} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`)
return n}readInt64(t){let e=0
const i=(128&this._dataView.getUint8(t+(this._littleEndian?7:0)))>0
let n=!0
for(let r=0;r<8;r++){let o=this._dataView.getUint8(t+(this._littleEndian?r:7-r))
i&&(n?0!==o&&(o=255&~(o-1),n=!1):o=255&~o),e+=o*256**r}return i&&(e=-e),e}readOffset(t){return this._bigTiff?this.readUint64(t):this.readUint32(t)}}function Me(t){if(void 0!==Object.fromEntries)return Object.fromEntries(t)
const e={}
for(const[i,n]of t)e[i.toLowerCase()]=n
return e}function Ae(t){return Me(t.split("\r\n").map((t=>{const e=t.split(":").map((t=>t.trim()))
return e[0]=e[0].toLowerCase(),e})))}function Re(t){let e,i,n
return t&&([,e,i,n]=t.match(/bytes (\d+)-(\d+)\/(\d+)/),e=parseInt(e,10),i=parseInt(i,10),n=parseInt(n,10)),{start:e,end:i,total:n}}class Le{async fetch(t,e=void 0){return Promise.all(t.map((t=>this.fetchSlice(t,e))))}async fetchSlice(t){throw new Error(`fetching of slice ${t} not possible, not implemented`)}get fileSize(){return null}async close(){}}class Oe extends Map{constructor(t={}){if(super(),!(t.maxSize&&t.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0")
if("number"==typeof t.maxAge&&0===t.maxAge)throw new TypeError("`maxAge` must be a number greater than 0")
this.maxSize=t.maxSize,this.maxAge=t.maxAge||Number.POSITIVE_INFINITY,this.onEviction=t.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(t){if("function"==typeof this.onEviction)for(const[e,i]of t)this.onEviction(e,i.value)}_deleteIfExpired(t,e){return"number"==typeof e.expiry&&e.expiry<=Date.now()&&("function"==typeof this.onEviction&&this.onEviction(t,e.value),this.delete(t))}_getOrDeleteIfExpired(t,e){if(!1===this._deleteIfExpired(t,e))return e.value}_getItemValue(t,e){return e.expiry?this._getOrDeleteIfExpired(t,e):e.value}_peek(t,e){const i=e.get(t)
return this._getItemValue(t,i)}_set(t,e){this.cache.set(t,e),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(t,e){this.oldCache.delete(t),this._set(t,e)}*_entriesAscending(){for(const t of this.oldCache){const[e,i]=t
this.cache.has(e)||!1===this._deleteIfExpired(e,i)&&(yield t)}for(const t of this.cache){const[e,i]=t
!1===this._deleteIfExpired(e,i)&&(yield t)}}get(t){if(this.cache.has(t)){const e=this.cache.get(t)
return this._getItemValue(t,e)}if(this.oldCache.has(t)){const e=this.oldCache.get(t)
if(!1===this._deleteIfExpired(t,e))return this._moveToRecent(t,e),e.value}}set(t,e,{maxAge:i=this.maxAge}={}){const n="number"==typeof i&&i!==Number.POSITIVE_INFINITY?Date.now()+i:void 0
return this.cache.has(t)?this.cache.set(t,{value:e,expiry:n}):this._set(t,{value:e,expiry:n}),this}has(t){return this.cache.has(t)?!this._deleteIfExpired(t,this.cache.get(t)):!!this.oldCache.has(t)&&!this._deleteIfExpired(t,this.oldCache.get(t))}peek(t){return this.cache.has(t)?this._peek(t,this.cache):this.oldCache.has(t)?this._peek(t,this.oldCache):void 0}delete(t){const e=this.cache.delete(t)
return e&&this._size--,this.oldCache.delete(t)||e}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(t){if(!(t&&t>0))throw new TypeError("`maxSize` must be a number greater than 0")
const e=[...this._entriesAscending()],i=e.length-t
i<0?(this.cache=new Map(e),this.oldCache=new Map,this._size=e.length):(i>0&&this._emitEvictions(e.slice(0,i)),this.oldCache=new Map(e.slice(i)),this.cache=new Map,this._size=0),this.maxSize=t}*keys(){for(const[t]of this)yield t}*values(){for(const[,t]of this)yield t}*[Symbol.iterator](){for(const t of this.cache){const[e,i]=t
!1===this._deleteIfExpired(e,i)&&(yield[e,i.value])}for(const t of this.oldCache){const[e,i]=t
this.cache.has(e)||!1===this._deleteIfExpired(e,i)&&(yield[e,i.value])}}*entriesDescending(){let t=[...this.cache]
for(let e=t.length-1;e>=0;--e){const i=t[e],[n,r]=i
!1===this._deleteIfExpired(n,r)&&(yield[n,r.value])}t=[...this.oldCache]
for(let e=t.length-1;e>=0;--e){const i=t[e],[n,r]=i
this.cache.has(n)||!1===this._deleteIfExpired(n,r)&&(yield[n,r.value])}}*entriesAscending(){for(const[t,e]of this._entriesAscending())yield[t,e.value]}get size(){if(!this._size)return this.oldCache.size
let t=0
for(const e of this.oldCache.keys())this.cache.has(e)||t++
return Math.min(this._size+t,this.maxSize)}entries(){return this.entriesAscending()}forEach(t,e=this){for(const[i,n]of this.entriesAscending())t.call(e,n,i,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}class De extends Error{constructor(t){super(t),Error.captureStackTrace&&Error.captureStackTrace(this,De),this.name="AbortError"}}class Ne extends Error{constructor(t,e){super(e),this.errors=t,this.message=e,this.name="AggregateError"}}const Fe=Ne
class ke{constructor(t,e,i=null){this.offset=t,this.length=e,this.data=i}get top(){return this.offset+this.length}}class ze{constructor(t,e,i){this.offset=t,this.length=e,this.blockIds=i}}class je extends Le{constructor(t,{blockSize:e=65536,cacheSize:i=100}={}){super(),this.source=t,this.blockSize=e,this.blockCache=new Oe({maxSize:i,onEviction:(t,e)=>{this.evictedBlocks.set(t,e)}}),this.evictedBlocks=new Map,this.blockRequests=new Map,this.blockIdsToFetch=new Set,this.abortedBlockIds=new Set}get fileSize(){return this.source.fileSize}async fetch(t,e){const i=[],n=[],r=[]
this.evictedBlocks.clear()
for(const{offset:c,length:d}of t){let t=c+d
const{fileSize:e}=this
null!==e&&(t=Math.min(t,e))
for(let o=Math.floor(c/this.blockSize)*this.blockSize;o<t;o+=this.blockSize){const t=Math.floor(o/this.blockSize)
this.blockCache.has(t)||this.blockRequests.has(t)||(this.blockIdsToFetch.add(t),n.push(t)),this.blockRequests.has(t)&&i.push(this.blockRequests.get(t)),r.push(t)}}await async function(t){return new Promise((t=>setTimeout(t,void 0)))}(),this.fetchBlocks(e)
const o=[]
for(const c of n)this.blockRequests.has(c)&&o.push(this.blockRequests.get(c))
await Promise.allSettled(i),await Promise.allSettled(o)
const s=[],a=r.filter((t=>this.abortedBlockIds.has(t)||!this.blockCache.has(t)))
if(a.forEach((t=>this.blockIdsToFetch.add(t))),a.length>0&&e&&!e.aborted){this.fetchBlocks(null)
for(const t of a){const e=this.blockRequests.get(t)
if(!e)throw new Error(`Block ${t} is not in the block requests`)
s.push(e)}await Promise.allSettled(s)}if(e&&e.aborted)throw new De("Request was aborted")
const l=r.map((t=>this.blockCache.get(t)||this.evictedBlocks.get(t))),h=l.filter((t=>!t))
if(h.length)throw new Fe(h,"Request failed")
const u=new Map(function(t,e){const i=Array.isArray(t)?t:Array.from(t),n=Array.isArray(e)?e:Array.from(e)
return i.map(((t,e)=>[t,n[e]]))}(r,l))
return this.readSliceData(t,u)}fetchBlocks(t){if(this.blockIdsToFetch.size>0){const e=this.groupBlocks(this.blockIdsToFetch),i=this.source.fetch(e,t)
for(let n=0;n<e.length;++n){const r=e[n]
for(const e of r.blockIds)this.blockRequests.set(e,(async()=>{try{const t=(await i)[n],r=e*this.blockSize,o=r-t.offset,s=Math.min(o+this.blockSize,t.data.byteLength),a=t.data.slice(o,s),l=new ke(r,a.byteLength,a,e)
this.blockCache.set(e,l),this.abortedBlockIds.delete(e)}catch(i){if("AbortError"!==i.name)throw i
i.signal=t,this.blockCache.delete(e),this.abortedBlockIds.add(e)}finally{this.blockRequests.delete(e)}})())}this.blockIdsToFetch.clear()}}groupBlocks(t){const e=Array.from(t).sort(((t,e)=>t-e))
if(0===e.length)return[]
let i=[],n=null
const r=[]
for(const o of e)null===n||n+1===o?(i.push(o),n=o):(r.push(new ze(i[0]*this.blockSize,i.length*this.blockSize,i)),i=[o],n=o)
return r.push(new ze(i[0]*this.blockSize,i.length*this.blockSize,i)),r}readSliceData(t,e){return t.map((t=>{let i=t.offset+t.length
null!==this.fileSize&&(i=Math.min(this.fileSize,i))
const n=Math.floor(t.offset/this.blockSize),r=Math.floor(i/this.blockSize),o=new ArrayBuffer(t.length),s=new Uint8Array(o)
for(let a=n;a<=r;++a){const n=e.get(a),r=n.offset-t.offset
let o,l=0,h=0
r<0?l=-r:r>0&&(h=r),o=n.top-i<0?n.length-l:i-n.offset-l
const u=new Uint8Array(n.data,l,o)
s.set(u,h)}return o}))}}class Ge{get ok(){return this.status>=200&&this.status<=299}get status(){throw new Error("not implemented")}getHeader(t){throw new Error("not implemented")}async getData(){throw new Error("not implemented")}}class Be{constructor(t){this.url=t}async request({headers:t,signal:e}={}){throw new Error("request is not implemented")}}class Ue extends Ge{constructor(t){super(),this.response=t}get status(){return this.response.status}getHeader(t){return this.response.headers.get(t)}async getData(){return this.response.arrayBuffer?await this.response.arrayBuffer():(await this.response.buffer()).buffer}}class qe extends Be{constructor(t,e){super(t),this.credentials=e}async request({headers:t,signal:e}={}){const i=await fetch(this.url,{headers:t,credentials:this.credentials,signal:e})
return new Ue(i)}}class Ve extends Ge{constructor(t,e){super(),this.xhr=t,this.data=e}get status(){return this.xhr.status}getHeader(t){return this.xhr.getResponseHeader(t)}async getData(){return this.data}}class Ze extends Be{constructRequest(t,e){return new Promise(((i,n)=>{const r=new XMLHttpRequest
r.open("GET",this.url),r.responseType="arraybuffer"
for(const[e,o]of Object.entries(t))r.setRequestHeader(e,o)
r.onload=()=>{const t=r.response
i(new Ve(r,t))},r.onerror=n,r.onabort=()=>n(new De("Request aborted")),r.send(),e&&(e.aborted&&r.abort(),e.addEventListener("abort",(()=>r.abort())))}))}async request({headers:t,signal:e}={}){return await this.constructRequest(t,e)}}var We=i(6397),Ye=i(8012),Xe=i(6408)
class He extends Ge{constructor(t,e){super(),this.response=t,this.dataPromise=e}get status(){return this.response.statusCode}getHeader(t){return this.response.headers[t]}async getData(){return await this.dataPromise}}class $e extends Be{constructor(t){super(t),this.parsedUrl=Xe.parse(this.url),this.httpApi="http:"===this.parsedUrl.protocol?We:Ye}constructRequest(t,e){return new Promise(((i,n)=>{const r=this.httpApi.get({...this.parsedUrl,headers:t},(t=>{const e=new Promise((e=>{const i=[]
t.on("data",(t=>{i.push(t)})),t.on("end",(()=>{const t=Buffer.concat(i).buffer
e(t)})),t.on("error",n)}))
i(new He(t,e))}))
r.on("error",n),e&&(e.aborted&&r.destroy(new De("Request aborted")),e.addEventListener("abort",(()=>r.destroy(new De("Request aborted")))))}))}async request({headers:t,signal:e}={}){return await this.constructRequest(t,e)}}class Ke extends Le{constructor(t,e,i,n){super(),this.client=t,this.headers=e,this.maxRanges=i,this.allowFullFile=n,this._fileSize=null}async fetch(t,e){return this.maxRanges>=t.length?this.fetchSlices(t,e):(this.maxRanges>0&&t.length,Promise.all(t.map((t=>this.fetchSlice(t,e)))))}async fetchSlices(t,e){const i=await this.client.request({headers:{...this.headers,Range:`bytes=${t.map((({offset:t,length:e})=>`${t}-${t+e}`)).join(",")}`},signal:e})
if(i.ok){if(206===i.status){const{type:n,params:r}=function(t){const[e,...i]=t.split(";").map((t=>t.trim()))
return{type:e,params:Me(i.map((t=>t.split("="))))}}(i.getHeader("content-type"))
if("multipart/byteranges"===n){const t=function(t,e){let i=null
const n=new TextDecoder("ascii"),r=[],o=`--${e}`,s=`${o}--`
for(let a=0;a<10;++a)n.decode(new Uint8Array(t,a,o.length))===o&&(i=a)
if(null===i)throw new Error("Could not find initial boundary")
for(;i<t.byteLength;){const e=n.decode(new Uint8Array(t,i,Math.min(o.length+1024,t.byteLength-i)))
if(0===e.length||e.startsWith(s))break
if(!e.startsWith(o))throw new Error("Part does not start with boundary")
const a=e.substr(o.length+2)
if(0===a.length)break
const l=a.indexOf("\r\n\r\n"),h=Ae(a.substr(0,l)),{start:u,end:c,total:d}=Re(h["content-range"]),f=i+o.length+l+4,p=parseInt(c,10)+1-parseInt(u,10)
r.push({headers:h,data:t.slice(f,f+p),offset:u,length:p,fileSize:d}),i=f+p+4}return r}(await i.getData(),r.boundary)
return this._fileSize=t[0].fileSize||null,t}const o=await i.getData(),{start:s,end:a,total:l}=Re(i.getHeader("content-range"))
this._fileSize=l||null
const h=[{data:o,offset:s,length:a-s}]
if(t.length>1){const i=await Promise.all(t.slice(1).map((t=>this.fetchSlice(t,e))))
return h.concat(i)}return h}{if(!this.allowFullFile)throw new Error("Server responded with full file")
const t=await i.getData()
return this._fileSize=t.byteLength,[{data:t,offset:0,length:t.byteLength}]}}throw new Error("Error fetching data.")}async fetchSlice(t,e){const{offset:i,length:n}=t,r=await this.client.request({headers:{...this.headers,Range:`bytes=${i}-${i+n}`},signal:e})
if(r.ok){if(206===r.status){const t=await r.getData(),{total:e}=Re(r.getHeader("content-range"))
return this._fileSize=e||null,{data:t,offset:i,length:n}}{if(!this.allowFullFile)throw new Error("Server responded with full file")
const t=await r.getData()
return this._fileSize=t.byteLength,{data:t,offset:0,length:t.byteLength}}}throw new Error("Error fetching data.")}get fileSize(){return this._fileSize}}function Je(t,{blockSize:e,cacheSize:i}){return null===e?t:new je(t,{blockSize:e,cacheSize:i})}function Qe(t,{forceXHR:e=!1,...i}={}){return"function"!=typeof fetch||e?"undefined"!=typeof XMLHttpRequest?function(t,{headers:e={},maxRanges:i=0,allowFullFile:n=!1,...r}={}){const o=new Ze(t)
return Je(new Ke(o,e,i,n),r)}(t,i):function(t,{headers:e={},maxRanges:i=0,allowFullFile:n=!1,...r}={}){const o=new $e(t)
return Je(new Ke(o,e,i,n),r)}(t,i):function(t,{headers:e={},credentials:i,maxRanges:n=0,allowFullFile:r=!1,...o}={}){const s=new qe(t,i)
return Je(new Ke(s,e,n,r),o)}(t,i)}class ti extends Le{constructor(t){super(),this.file=t}async fetchSlice(t,e){return new Promise(((i,n)=>{const r=this.file.slice(t.offset,t.offset+t.length),o=new FileReader
o.onload=t=>i(t.target.result),o.onerror=n,o.onabort=n,o.readAsArrayBuffer(r),e&&e.addEventListener("abort",(()=>o.abort()))}))}}function ei(t){switch(t){case nt.s$.BYTE:case nt.s$.ASCII:case nt.s$.SBYTE:case nt.s$.UNDEFINED:return 1
case nt.s$.SHORT:case nt.s$.SSHORT:return 2
case nt.s$.LONG:case nt.s$.SLONG:case nt.s$.FLOAT:case nt.s$.IFD:return 4
case nt.s$.RATIONAL:case nt.s$.SRATIONAL:case nt.s$.DOUBLE:case nt.s$.LONG8:case nt.s$.SLONG8:case nt.s$.IFD8:return 8
default:throw new RangeError(`Invalid field type: ${t}`)}}function ii(t,e,i,n){let r=null,o=null
const s=ei(e)
switch(e){case nt.s$.BYTE:case nt.s$.ASCII:case nt.s$.UNDEFINED:r=new Uint8Array(i),o=t.readUint8
break
case nt.s$.SBYTE:r=new Int8Array(i),o=t.readInt8
break
case nt.s$.SHORT:r=new Uint16Array(i),o=t.readUint16
break
case nt.s$.SSHORT:r=new Int16Array(i),o=t.readInt16
break
case nt.s$.LONG:case nt.s$.IFD:r=new Uint32Array(i),o=t.readUint32
break
case nt.s$.SLONG:r=new Int32Array(i),o=t.readInt32
break
case nt.s$.LONG8:case nt.s$.IFD8:r=new Array(i),o=t.readUint64
break
case nt.s$.SLONG8:r=new Array(i),o=t.readInt64
break
case nt.s$.RATIONAL:r=new Uint32Array(2*i),o=t.readUint32
break
case nt.s$.SRATIONAL:r=new Int32Array(2*i),o=t.readInt32
break
case nt.s$.FLOAT:r=new Float32Array(i),o=t.readFloat32
break
case nt.s$.DOUBLE:r=new Float64Array(i),o=t.readFloat64
break
default:throw new RangeError(`Invalid field type: ${e}`)}if(e!==nt.s$.RATIONAL&&e!==nt.s$.SRATIONAL)for(let a=0;a<i;++a)r[a]=o.call(t,n+a*s)
else for(let a=0;a<i;a+=2)r[a]=o.call(t,n+a*s),r[a+1]=o.call(t,n+(a*s+4))
return e===nt.s$.ASCII?new TextDecoder("utf-8").decode(r):r}class ni{constructor(t,e,i){this.fileDirectory=t,this.geoKeyDirectory=e,this.nextIFDByteOffset=i}}class ri extends Error{constructor(t){super(`No image at index ${t}`),this.index=t}}class oi{async readRasters(t={}){const{window:e,width:i,height:n}=t
let{resX:r,resY:o,bbox:s}=t
const a=await this.getImage()
let l=a
const h=await this.getImageCount(),u=a.getBoundingBox()
if(e&&s)throw new Error('Both "bbox" and "window" passed.')
if(i||n){if(e){const[t,i]=a.getOrigin(),[n,r]=a.getResolution()
s=[t+e[0]*n,i+e[1]*r,t+e[2]*n,i+e[3]*r]}const t=s||u
if(i){if(r)throw new Error("Both width and resX passed")
r=(t[2]-t[0])/i}if(n){if(o)throw new Error("Both width and resY passed")
o=(t[3]-t[1])/n}}if(r||o){const t=[]
for(let e=0;e<h;++e){const i=await this.getImage(e),{SubfileType:n,NewSubfileType:r}=i.fileDirectory;(0===e||2===n||1&r)&&t.push(i)}t.sort(((t,e)=>t.getWidth()-e.getWidth()))
for(let e=0;e<t.length;++e){const i=t[e],n=(u[2]-u[0])/i.getWidth(),s=(u[3]-u[1])/i.getHeight()
if(l=i,r&&r>n||o&&o>s)break}}let c=e
if(s){const[t,e]=a.getOrigin(),[i,n]=l.getResolution(a)
c=[Math.round((s[0]-t)/i),Math.round((s[1]-e)/n),Math.round((s[2]-t)/i),Math.round((s[3]-e)/n)],c=[Math.min(c[0],c[2]),Math.min(c[1],c[3]),Math.max(c[0],c[2]),Math.max(c[1],c[3])]}return l.readRasters({...t,window:c})}}class si extends oi{constructor(t,e,i,n,r={}){super(),this.source=t,this.littleEndian=e,this.bigTiff=i,this.firstIFDOffset=n,this.cache=r.cache||!1,this.ifdRequests=[],this.ghostValues=null}async getSlice(t,e){const i=this.bigTiff?4048:1024
return new Ie((await this.source.fetch([{offset:t,length:void 0!==e?e:i}]))[0],t,this.littleEndian,this.bigTiff)}async parseFileDirectoryAt(t){const e=this.bigTiff?20:12,i=this.bigTiff?8:2
let n=await this.getSlice(t)
const r=this.bigTiff?n.readUint64(t):n.readUint16(t),o=r*e+(this.bigTiff?16:6)
n.covers(t,o)||(n=await this.getSlice(t,o))
const s={}
let a=t+(this.bigTiff?8:2)
for(let u=0;u<r;a+=e,++u){const t=n.readUint16(a),e=n.readUint16(a+2),i=this.bigTiff?n.readUint64(a+4):n.readUint32(a+4)
let r,o
const l=ei(e),h=a+(this.bigTiff?12:8)
if(l*i<=(this.bigTiff?8:4))r=ii(n,e,i,h)
else{const t=n.readOffset(h),o=ei(e)*i
r=n.covers(t,o)?ii(n,e,i,t):ii(await this.getSlice(t,o),e,i,t)}o=1===i&&-1===nt.NZ.indexOf(t)&&e!==nt.s$.RATIONAL&&e!==nt.s$.SRATIONAL?r[0]:r,s[nt.$[t]]=o}const l=function(t){const e=t.GeoKeyDirectory
if(!e)return null
const i={}
for(let n=4;n<=4*e[3];n+=4){const r=nt.Hm[e[n]],o=e[n+1]?nt.$[e[n+1]]:null,s=e[n+2],a=e[n+3]
let l=null
if(o){if(l=t[o],null==l)throw new Error(`Could not get value of geoKey '${r}'.`)
"string"==typeof l?l=l.substring(a,a+s-1):l.subarray&&(l=l.subarray(a,a+s),1===s&&(l=l[0]))}else l=a
i[r]=l}return i}(s),h=n.readOffset(t+i+e*r)
return new ni(s,l,h)}async requestIFD(t){if(this.ifdRequests[t])return this.ifdRequests[t]
if(0===t)return this.ifdRequests[t]=this.parseFileDirectoryAt(this.firstIFDOffset),this.ifdRequests[t]
if(!this.ifdRequests[t-1])try{this.ifdRequests[t-1]=this.requestIFD(t-1)}catch(e){if(e instanceof ri)throw new ri(t)
throw e}return this.ifdRequests[t]=(async()=>{const e=await this.ifdRequests[t-1]
if(0===e.nextIFDByteOffset)throw new ri(t)
return this.parseFileDirectoryAt(e.nextIFDByteOffset)})(),this.ifdRequests[t]}async getImage(t=0){const e=await this.requestIFD(t)
return new Pe(e.fileDirectory,e.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source)}async getImageCount(){let t=0,e=!0
for(;e;)try{await this.requestIFD(t),++t}catch(t){if(!(t instanceof ri))throw t
e=!1}return t}async getGhostValues(){const t=this.bigTiff?16:8
if(this.ghostValues)return this.ghostValues
let e=await this.getSlice(t,130)
if("GDAL_STRUCTURAL_METADATA_SIZE="===ii(e,nt.s$.ASCII,30,t)){const i=ii(e,nt.s$.ASCII,130,t).split("\n")[0],n=Number(i.split("=")[1].split(" ")[0])+i.length
n>130&&(e=await this.getSlice(t,n))
const r=ii(e,nt.s$.ASCII,n,t)
this.ghostValues={},r.split("\n").filter((t=>t.length>0)).map((t=>t.split("="))).forEach((([t,e])=>{this.ghostValues[t]=e}))}return this.ghostValues}static async fromSource(t,e,i){const n=(await t.fetch([{offset:0,length:1024}],i))[0],r=new Te(n),o=r.getUint16(0,0)
let s
if(18761===o)s=!0
else{if(19789!==o)throw new TypeError("Invalid byte order value.")
s=!1}const a=r.getUint16(2,s)
let l
if(42===a)l=!1
else{if(43!==a)throw new TypeError("Invalid magic number.")
if(l=!0,8!==r.getUint16(4,s))throw new Error("Unsupported offset byte-size.")}const h=l?r.getUint64(8,s):r.getUint32(4,s)
return new si(t,s,l,h,e)}close(){return"function"==typeof this.source.close&&this.source.close()}}class ai extends oi{constructor(t,e){super(),this.mainFile=t,this.overviewFiles=e,this.imageFiles=[t].concat(e),this.fileDirectoriesPerFile=null,this.fileDirectoriesPerFileParsing=null,this.imageCount=null}async parseFileDirectoriesPerFile(){const t=[this.mainFile.parseFileDirectoryAt(this.mainFile.firstIFDOffset)].concat(this.overviewFiles.map((t=>t.parseFileDirectoryAt(t.firstIFDOffset))))
return this.fileDirectoriesPerFile=await Promise.all(t),this.fileDirectoriesPerFile}async getImage(t=0){await this.getImageCount(),await this.parseFileDirectoriesPerFile()
let e=0,i=0
for(let n=0;n<this.imageFiles.length;n++){const r=this.imageFiles[n]
for(let o=0;o<this.imageCounts[n];o++){if(t===e){const t=await r.requestIFD(i)
return new Pe(t.fileDirectory,t.geoKeyDirectory,r.dataView,r.littleEndian,r.cache,r.source)}e++,i++}i=0}throw new RangeError("Invalid image index")}async getImageCount(){if(null!==this.imageCount)return this.imageCount
const t=[this.mainFile.getImageCount()].concat(this.overviewFiles.map((t=>t.getImageCount())))
return this.imageCounts=await Promise.all(t),this.imageCount=this.imageCounts.reduce(((t,e)=>t+e),0),this.imageCount}}var li=i(7307),hi=i(3311)
function ui(t,e){if(!t)return!1
if(!0===t)return!0
if(3!==e.getSamplesPerPixel())return!1
const i=e.fileDirectory.PhotometricInterpretation,n=nt.ub
return i===n.CMYK||i===n.YCbCr||i===n.CIELab||i===n.ICCLab}const ci="STATISTICS_MAXIMUM",di="STATISTICS_MINIMUM"
let fi
function pi(t){try{return t.getBoundingBox()}catch(e){return[0,0,t.getWidth(),t.getHeight()]}}function gi(t){try{return t.getOrigin().slice(0,2)}catch(e){return[0,t.getHeight()]}}function _i(t,e){try{return t.getResolution(e)}catch(i){return[e.getWidth()/t.getWidth(),e.getHeight()/t.getHeight()]}}function mi(t){const e=t.geoKeys
if(!e)return null
if(e.ProjectedCSTypeGeoKey&&32767!==e.ProjectedCSTypeGeoKey){const t="EPSG:"+e.ProjectedCSTypeGeoKey
let i=(0,v.Jt)(t)
if(!i){const n=(0,hi.q)(e.ProjLinearUnitsGeoKey)
n&&(i=new v.MF({code:t,units:n}))}return i}if(e.GeographicTypeGeoKey&&32767!==e.GeographicTypeGeoKey){const t="EPSG:"+e.GeographicTypeGeoKey
let i=(0,v.Jt)(t)
if(!i){const n=(0,hi.q)(e.GeogAngularUnitsGeoKey)
n&&(i=new v.MF({code:t,units:n}))}return i}return null}function yi(t){return t.getImageCount().then((function(e){const i=new Array(e)
for(let n=0;n<e;++n)i[n]=t.getImage(n)
return Promise.all(i)}))}function vi(t,e){let i
return i=t.blob?async function(t,e){return si.fromSource(new ti(t),void 0)}(t.blob):t.overviews?async function(t,e=[],i={},n){const r=await si.fromSource(Qe(t,i),n),o=await Promise.all(e.map((t=>si.fromSource(Qe(t,i)))))
return new ai(r,o)}(t.url,t.overviews,e):async function(t,e={},i){return si.fromSource(Qe(t,e),i)}(t.url,e),i.then(yi)}function xi(t,e,i,n,r){if(Array.isArray(t)){const o=t.length
if(!Array.isArray(e)||o!=e.length){const t=new Error(n)
throw r(t),t}for(let s=0;s<o;++s)xi(t[s],e[s],i,n,r)}else if(Math.abs(t-e)>i*t)throw new Error(n)}function bi(t){return t instanceof Int8Array?-128:t instanceof Int16Array?-32768:t instanceof Int32Array?-2147483648:t instanceof Float32Array?12e-39:0}function wi(t){return t instanceof Int8Array?127:t instanceof Uint8Array||t instanceof Uint8ClampedArray?255:t instanceof Int16Array?32767:t instanceof Uint16Array?65535:t instanceof Int32Array?2147483647:t instanceof Uint32Array?4294967295:t instanceof Float32Array?34e37:255}class Ei extends it{constructor(t){super({state:"loading",tileGrid:null,projection:t.projection||null,opaque:t.opaque,transition:t.transition,interpolate:!1!==t.interpolate,wrapX:t.wrapX}),this.sourceInfo_=t.sources
const e=this.sourceInfo_.length
this.sourceOptions_=t.sourceOptions,this.sourceImagery_=new Array(e),this.sourceMasks_=new Array(e),this.resolutionFactors_=new Array(e),this.samplesPerPixel_,this.nodataValues_,this.metadata_,this.normalize_=!1!==t.normalize,this.addAlpha_=!1,this.error_=null,this.convertToRGB_=t.convertToRGB||!1,this.setKey(this.sourceInfo_.map((t=>t.url)).join(","))
const i=this,n=new Array(e)
for(let r=0;r<e;++r)n[r]=vi(this.sourceInfo_[r],this.sourceOptions_)
Promise.all(n).then((function(t){i.configure_(t)})).catch((function(t){(0,li.z3)(t),i.error_=t,i.setState("error")}))}getError(){return this.error_}determineProjection(t){const e=t[0]
for(let i=e.length-1;i>=0;--i){const t=mi(e[i])
if(t){this.projection=t
break}}}configure_(t){let e,i,n,o,s
const a=new Array(t.length),l=new Array(t.length),h=new Array(t.length)
let u=0
const c=t.length
for(let p=0;p<c;++p){const c=[],d=[]
t[p].forEach((t=>{4&~(t.fileDirectory.NewSubfileType||0)?c.push(t):d.push(t)}))
const f=c.length
if(d.length>0&&d.length!==f)throw new Error(`Expected one mask per image found ${d.length} masks and ${f} images`)
let g,_
const m=new Array(f),y=new Array(f),v=new Array(f)
l[p]=new Array(f),h[p]=new Array(f)
for(let t=0;t<f;++t){const e=c[t],i=e.getGDALNoData()
h[p][t]=e.getGDALMetadata(0),l[p][t]=i
const n=this.sourceInfo_[p].bands
a[p]=n?n.length:e.getSamplesPerPixel()
const r=f-(t+1)
g||(g=pi(e)),_||(_=gi(e))
const o=_i(e,c[0])
v[r]=o[0]
const s=[e.getTileWidth(),e.getTileHeight()]
s[0]!==s[1]&&s[1]<256&&(s[0]=256,s[1]=256),m[r]=s
const u=o[0]/Math.abs(o[1])
y[r]=[s[0],s[1]/u]}if(e?(0,r._N)(e,g,e):e=g,i?xi(i,_,0,`Origin mismatch for source ${p}, got [${_}] but expected [${i}]`,this.viewRejector):i=_,s){s.length-u>v.length&&(u=s.length-v.length)
const t=s[s.length-1]/v[v.length-1]
this.resolutionFactors_[p]=t
const e=v.map((e=>e*t)),i=`Resolution mismatch for source ${p}, got [${e}] but expected [${s}]`
xi(s.slice(u,s.length),e,.02,i,this.viewRejector)}else s=v,this.resolutionFactors_[p]=1
n?xi(n.slice(u,n.length),y,.01,`Tile size mismatch for source ${p}`,this.viewRejector):n=y,o?xi(o.slice(u,o.length),m,0,`Tile size mismatch for source ${p}`,this.viewRejector):o=m,this.sourceImagery_[p]=c.reverse(),this.sourceMasks_[p]=d.reverse()}for(let r=0,p=this.sourceImagery_.length;r<p;++r){const t=this.sourceImagery_[r]
for(;t.length<s.length;)t.unshift(void 0)}this.getProjection()||this.determineProjection(t),this.samplesPerPixel_=a,this.nodataValues_=l,this.metadata_=h
t:for(let r=0;r<c;++r){if(void 0!==this.sourceInfo_[r].nodata){this.addAlpha_=!0
break}if(this.sourceMasks_[r].length){this.addAlpha_=!0
break}const t=l[r],e=this.sourceInfo_[r].bands
if(e){for(let i=0;i<e.length;++i)if(null!==t[e[i]-1]){this.addAlpha_=!0
break t}}else for(let i=0;i<t.length;++i)if(null!==t[i]){this.addAlpha_=!0
break t}}let d=this.addAlpha_?1:0
for(let r=0;r<c;++r)d+=a[r]
this.bandCount=d
const f=new T({extent:e,minZoom:u,origin:i,resolutions:s,tileSizes:n})
this.tileGrid=f,this.setTileSizes(o),this.setLoader(this.loadTile_.bind(this)),this.setState("ready"),2===s.length?s=[s[0],s[1],s[1]/2]:1===s.length&&(s=[2*s[0],s[0],s[0]/2]),this.viewResolver({showFullExtent:!0,projection:this.projection,resolutions:s,center:(0,v.te)((0,r.q1)(e),this.projection),extent:(0,v.JR)(e,this.projection),zoom:1})}loadTile_(t,e,i){const n=this.getTileSize(t),r=this.sourceImagery_.length,o=new Array(2*r),s=this.nodataValues_,a=this.sourceInfo_,l=(fi||(fi=new lt),fi)
for(let h=0;h<r;++h){const u=a[h],c=this.resolutionFactors_[h],d=[Math.round(e*(n[0]*c)),Math.round(i*(n[1]*c)),Math.round((e+1)*(n[0]*c)),Math.round((i+1)*(n[1]*c))],f=this.sourceImagery_[h][t]
let p,g
u.bands&&(p=u.bands.map((function(t){return t-1}))),g="nodata"in u&&null!==u.nodata?u.nodata:p?p.map((function(t){return s[h][t]})):s[h]
const _={window:d,width:n[0],height:n[1],samples:p,fillValue:g,pool:l,interleave:!1}
ui(this.convertToRGB_,f)?o[h]=f.readRGB(_):o[h]=f.readRasters(_)
const m=r+h,y=this.sourceMasks_[h][t]
o[m]=y?y.readRasters({window:d,width:n[0],height:n[1],samples:[0],pool:l,interleave:!1}):Promise.resolve(null)}return Promise.all(o).then(this.composeTile_.bind(this,n)).catch((function(t){throw(0,li.z3)(t),t}))}composeTile_(t,e){const i=this.metadata_,n=this.sourceInfo_,r=this.sourceImagery_.length,o=this.bandCount,s=this.samplesPerPixel_,a=this.nodataValues_,l=this.normalize_,h=this.addAlpha_,u=t[0]*t[1],c=u*o
let d
d=l?new Uint8Array(c):new Float32Array(c)
let f=0
for(let p=0;p<u;++p){let t=h
for(let o=0;o<r;++o){const u=n[o]
let c,g,_=u.min,m=u.max
if(l){const t=i[o][0]
void 0===_&&(_=t&&di in t?parseFloat(t[di]):bi(e[o][0])),void 0===m&&(m=t&&ci in t?parseFloat(t[ci]):wi(e[o][0])),c=255/(m-_),g=-_*c}for(let i=0;i<s[o];++i){const n=e[o][i][p]
let r
if(r=l?(0,w.qE)(c*n+g,0,255):n,h){let e=u.nodata
if(void 0===e){let t
t=u.bands?u.bands[i]-1:i,e=a[o][t]}const s=isNaN(e);(!s&&n!==e||s&&!isNaN(n))&&(t=!1,d[f]=r)}else d[f]=r
f++}if(!t){const i=e[r+o]
i&&!i[0][p]&&(t=!0)}}h&&(t||(d[f]=255),f++)}return d}}Ei.prototype.getView
const Si=Ei
var Ci=i(5548)
const Pi=class extends q{constructor(t){const e=!!t.highDpi,i=!(!0===t.overlay)
super({attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:"anonymous",interpolate:t.interpolate,opaque:i,projection:"EPSG:3857",reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:"loading",tileLoadFunction:t.tileLoadFunction,tilePixelRatio:e?2:1,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:t.zDirection}),this.apiKey_=t.key,this.error_=null
const n={mapType:t.mapType||"roadmap",language:t.language||"en-US",region:t.region||"US"}
t.imageFormat&&(n.imageFormat=t.imageFormat),t.scale&&(n.scale=t.scale),e&&(n.highDpi=!0),t.layerTypes&&(n.layerTypes=t.layerTypes),t.styles&&(n.styles=t.styles),!0===t.overlay&&(n.overlay=!0),this.sessionTokenRequest_=n,this.sessionTokenValue_,this.sessionRefreshId_,this.previousViewportAttribution_,this.previousViewportExtent_,this.createSession_()}getError(){return this.error_}fetchSessionToken(t,e){return fetch(t,e)}async createSession_(){const t="https://tile.googleapis.com/v1/createSession?key="+this.apiKey_,e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.sessionTokenRequest_)},i=await this.fetchSessionToken(t,e)
if(!i.ok){try{const t=await i.json()
this.error_=new Error(t.error.message)}catch{this.error_=new Error("Error fetching session token")}return void this.setState("error")}const n=await i.json(),r=this.getTilePixelRatio(1),o=[n.tileWidth/r,n.tileHeight/r]
this.tileGrid=M({extent:R(this.getProjection()),maxZoom:22,tileSize:o})
const s=n.session
this.sessionTokenValue_=s
const a=this.apiKey_
this.tileUrlFunction=function(t,e,i){return`https://tile.googleapis.com/v1/2dtiles/${t[0]}/${t[1]}/${t[2]}?session=${s}&key=${a}`}
const l=1e3*parseInt(n.expiry,10),h=Math.max(l-Date.now()-6e4,1)
this.sessionRefreshId_=setTimeout((()=>this.createSession_()),h),this.setAttributions(this.fetchAttributions_.bind(this)),this.setState("ready")}async fetchAttributions_(t){if(t.viewHints[Ci.A.ANIMATING]||t.viewHints[Ci.A.INTERACTING]||t.animate)return this.previousViewportAttribution_
const[e,i]=(0,v.WP)((0,r.R)(t.extent),t.viewState.projection),[n,o]=(0,v.WP)((0,r.WU)(t.extent),t.viewState.projection),s=`zoom=${this.getTileGrid().getZForResolution(t.viewState.resolution,this.zDirection)}&north=${o}&south=${i}&east=${n}&west=${e}`
if(this.previousViewportExtent_==s)return this.previousViewportAttribution_
this.previousViewportExtent_=s
const a=`https://tile.googleapis.com/tile/v1/viewport?session=${this.sessionTokenValue_}&key=${this.apiKey_}&${s}`
return this.previousViewportAttribution_=await fetch(a).then((t=>t.json())).then((t=>t.copyright)),this.previousViewportAttribution_}disposeInternal(){clearTimeout(this.sessionRefreshId_),super.disposeInternal()}}
var Ti=i(8454)
class Ii extends s.A{constructor(t,e,i,n,r,o,s){super(e,i,n,r,o,s),this.zoomifyImage_=null,this.tileSize_=t}getImage(){if(this.zoomifyImage_)return this.zoomifyImage_
const t=super.getImage()
if(this.state==c.A.LOADED){const e=this.tileSize_
if(t.width==e[0]&&t.height==e[1])return this.zoomifyImage_=t,t
const i=(0,Ti.Y)(e[0],e[1])
return i.drawImage(t,0,0),this.zoomifyImage_=i.canvas,i.canvas}return t}}const Mi=class extends q{constructor(t){const e=t.size,i=void 0!==t.tierSizeCalculation?t.tierSizeCalculation:"default",n=t.tilePixelRatio||1,o=e[0],s=e[1],a=[],l=t.tileSize||b.R
let h=l*n
switch(i){case"default":for(;o>h||s>h;)a.push([Math.ceil(o/h),Math.ceil(s/h)]),h+=h
break
case"truncated":let t=o,e=s
for(;t>h||e>h;)a.push([Math.ceil(t/h),Math.ceil(e/h)]),t>>=1,e>>=1
break
default:throw new Error("Unknown `tierSizeCalculation` configured")}a.push([1,1]),a.reverse()
const u=[n],c=[0]
for(let r=1,x=a.length;r<x;r++)u.push(n<<r),c.push(a[r-1][0]*a[r-1][1]+c[r-1])
u.reverse()
const d=new T({tileSize:l,extent:t.extent||[0,-s,o,0],resolutions:u})
let f=t.url
!f||f.includes("{TileGroup}")||f.includes("{tileIndex}")||(f+="{TileGroup}/{z}-{x}-{y}.jpg")
const p=j(f)
let g=l*n
const _=k(p.map((function(t){return function(e,i,n){if(!e)return
const r=e[0],o=e[1],s=e[2],l=o+s*a[r][0],h={z:r,x:o,y:s,tileIndex:l,TileGroup:"TileGroup"+((l+c[r])/g|0)}
return t.replace(/\{(\w+?)\}/g,(function(t,e){return h[e]}))}}))),m=Ii.bind(null,(0,C.xq)(l*n))
super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,tilePixelRatio:n,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:m,tileGrid:d,tileUrlFunction:_,transition:t.transition}),this.zDirection=t.zDirection
const y=_(d.getTileCoordForCoordAndResolution((0,r.q1)(d.getExtent()),u[u.length-1]),1,null),v=new Image
v.addEventListener("error",(()=>{g=l,this.changed()})),v.src=y}},Ai="version1",Ri="version2",Li="version3",Oi={}
Oi[Ai]={level0:{supports:[],formats:[],qualities:["native"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["native"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["native","color","grey","bitonal"]}},Oi[Ri]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByDistortedWh","sizeByWh"],formats:["jpg","png"],qualities:["default","bitonal"]}},Oi[Li]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","regionSquare","sizeByW","sizeByH","sizeByWh"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionSquare","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["default"]}},Oi.none={none:{supports:[],formats:[],qualities:[]}}
const Di={}
function Ni(t){return t.toLocaleString("en",{maximumFractionDigits:10})}Di[Ai]=function(t){let e=t.getComplianceLevelSupportedFeatures()
return void 0===e&&(e=Oi[Ai].level0),{url:void 0===t.imageInfo["@id"]?void 0:t.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),supports:e.supports,formats:[...e.formats,void 0===t.imageInfo.formats?[]:t.imageInfo.formats],qualities:[...e.qualities,void 0===t.imageInfo.qualities?[]:t.imageInfo.qualities],resolutions:t.imageInfo.scale_factors,tileSize:void 0!==t.imageInfo.tile_width?void 0!==t.imageInfo.tile_height?[t.imageInfo.tile_width,t.imageInfo.tile_height]:[t.imageInfo.tile_width,t.imageInfo.tile_width]:null!=t.imageInfo.tile_height?[t.imageInfo.tile_height,t.imageInfo.tile_height]:void 0}},Di[Ri]=function(t){const e=t.getComplianceLevelSupportedFeatures(),i=Array.isArray(t.imageInfo.profile)&&t.imageInfo.profile.length>1,n=i&&t.imageInfo.profile[1].supports?t.imageInfo.profile[1].supports:[],r=i&&t.imageInfo.profile[1].formats?t.imageInfo.profile[1].formats:[],o=i&&t.imageInfo.profile[1].qualities?t.imageInfo.profile[1].qualities:[]
return{url:t.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),sizes:void 0===t.imageInfo.sizes?void 0:t.imageInfo.sizes.map((function(t){return[t.width,t.height]})),tileSize:void 0===t.imageInfo.tiles?void 0:[t.imageInfo.tiles.map((function(t){return t.width}))[0],t.imageInfo.tiles.map((function(t){return void 0===t.height?t.width:t.height}))[0]],resolutions:void 0===t.imageInfo.tiles?void 0:t.imageInfo.tiles.map((function(t){return t.scaleFactors}))[0],supports:[...e.supports,...n],formats:[...e.formats,...r],qualities:[...e.qualities,...o]}},Di[Li]=function(t){const e=t.getComplianceLevelSupportedFeatures(),i=void 0===t.imageInfo.extraFormats?e.formats:[...e.formats,...t.imageInfo.extraFormats],n=void 0!==t.imageInfo.preferredFormats&&Array.isArray(t.imageInfo.preferredFormats)&&t.imageInfo.preferredFormats.length>0?t.imageInfo.preferredFormats.filter((function(t){return["jpg","png","gif"].includes(t)})).reduce((function(t,e){return void 0===t&&i.includes(e)?e:t}),void 0):void 0
return{url:t.imageInfo.id,sizes:void 0===t.imageInfo.sizes?void 0:t.imageInfo.sizes.map((function(t){return[t.width,t.height]})),tileSize:void 0===t.imageInfo.tiles?void 0:[t.imageInfo.tiles.map((function(t){return t.width}))[0],t.imageInfo.tiles.map((function(t){return t.height}))[0]],resolutions:void 0===t.imageInfo.tiles?void 0:t.imageInfo.tiles.map((function(t){return t.scaleFactors}))[0],supports:void 0===t.imageInfo.extraFeatures?e.supports:[...e.supports,...t.imageInfo.extraFeatures],formats:i,qualities:void 0===t.imageInfo.extraQualities?e.qualities:[...e.qualities,...t.imageInfo.extraQualities],preferredFormat:n}}
const Fi=class extends q{constructor(t){const e=t||{}
let i=e.url||""
i+=i.lastIndexOf("/")===i.length-1||""===i?"":"/"
const n=e.version||Ri,o=e.sizes||[],s=e.size;(0,y.v)(null!=s&&Array.isArray(s)&&2==s.length&&!isNaN(s[0])&&s[0]>0&&!isNaN(s[1])&&s[1]>0,"Missing or invalid `size`")
const a=s[0],l=s[1],h=e.tileSize,u=e.tilePixelRatio||1,c=e.format||"jpg",d=e.quality||(e.version==Ai?"native":"default")
let f=e.resolutions||[]
const p=e.supports||[],g=e.extent||[0,-l,a,0],_=null!=o&&Array.isArray(o)&&o.length>0,m=void 0!==h&&("number"==typeof h&&Number.isInteger(h)&&h>0||Array.isArray(h)&&h.length>0),v=null!=p&&Array.isArray(p)&&(p.includes("regionByPx")||p.includes("regionByPct"))&&(p.includes("sizeByWh")||p.includes("sizeByH")||p.includes("sizeByW")||p.includes("sizeByPct"))
let x,w,E
if(f.sort((function(t,e){return e-t})),m||v)if(null!=h&&("number"==typeof h&&Number.isInteger(h)&&h>0?(x=h,w=h):Array.isArray(h)&&h.length>0&&((1==h.length||null==h[1]&&Number.isInteger(h[0]))&&(x=h[0],w=h[0]),2==h.length&&(Number.isInteger(h[0])&&Number.isInteger(h[1])?(x=h[0],w=h[1]):null==h[0]&&Number.isInteger(h[1])&&(x=h[1],w=h[1])))),void 0!==x&&void 0!==w||(x=b.R,w=b.R),0==f.length){E=Math.max(Math.ceil(Math.log(a/x)/Math.LN2),Math.ceil(Math.log(l/w)/Math.LN2))
for(let t=E;t>=0;t--)f.push(Math.pow(2,t))}else{const t=Math.max(...f)
E=Math.round(Math.log(t)/Math.LN2)}else if(x=a,w=l,f=[],_){o.sort((function(t,e){return t[0]-e[0]})),E=-1
const t=[]
for(let e=0;e<o.length;e++){const i=a/o[e][0]
f.length>0&&f[f.length-1]==i?t.push(e):(f.push(i),E++)}if(t.length>0)for(let e=0;e<t.length;e++)o.splice(t[e]-e,1)}else f.push(1),o.push([a,l]),E=0
const S=new T({tileSize:[x,w],extent:g,origin:(0,r.Py)(g),resolutions:f}),P=Ii.bind(null,(0,C.xq)(h||256).map((function(t){return t*u})))
super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:e.state,tileClass:P,tileGrid:S,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:function(t,e,r){let s,h
const u=t[0]
if(u>E)return
const g=t[1],y=t[2],b=f[u]
if(!(void 0===g||void 0===y||void 0===b||g<0||Math.ceil(a/b/x)<=g||y<0||Math.ceil(l/b/w)<=y)){if(v||m){const t=g*x*b,e=y*w*b
let i=x*b,r=w*b,o=x,u=w
t+i>a&&(i=a-t),e+r>l&&(r=l-e),t+x*b>a&&(o=Math.floor((a-t+b-1)/b)),e+w*b>l&&(u=Math.floor((l-e+b-1)/b)),0==t&&i==a&&0==e&&r==l?s="full":!v||p.includes("regionByPx")?s=t+","+e+","+i+","+r:p.includes("regionByPct")&&(s="pct:"+Ni(t/a*100)+","+Ni(e/l*100)+","+Ni(i/a*100)+","+Ni(r/l*100)),n!=Li||v&&!p.includes("sizeByWh")?!v||p.includes("sizeByW")?h=o+",":p.includes("sizeByH")?h=","+u:p.includes("sizeByWh")?h=o+","+u:p.includes("sizeByPct")&&(h="pct:"+Ni(100/b)):h=o+","+u}else if(s="full",_){const t=o[u][0],e=o[u][1]
h=n==Li?t==a&&e==l?"max":t+","+e:t==a?"full":t+","}else h=n==Li?"max":"full"
return i+s+"/"+h+"/0/"+d+"."+c}},transition:e.transition}),this.zDirection=e.zDirection}}
var ki=i(1410),zi=i(5643),ji=i(7028),Gi=i(7486),Bi=i(6582),Ui=i(1270),qi=i(4757)
class Vi extends zi.Ay{constructor(t,e,i,n,o,s,a){let l=t.getExtent()
l&&t.canWrapX()&&(l=l.slice(),l[0]=-1/0,l[2]=1/0)
let h=e.getExtent()
h&&e.canWrapX()&&(h=h.slice(),h[0]=-1/0,h[2]=1/0)
const u=h?(0,r._N)(i,h):i,c=(0,r.q1)(u),d=(0,Bi.KQ)(t,e,c,n),f=ji.l,p=new Gi.A(t,e,u,l,d*f,n),g=p.calculateSourceExtent(),_=(0,r.Im)(g)?null:s(g,d,o),m=_?ki.A.IDLE:ki.A.EMPTY,y=_?_.getPixelRatio():1
super(i,n,y,m),this.targetProj_=e,this.maxSourceExtent_=l,this.triangulation_=p,this.targetResolution_=n,this.targetExtent_=i,this.sourceImage_=_,this.sourcePixelRatio_=y,this.interpolate_=a,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==ki.A.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const t=this.sourceImage_.getState()
if(t==ki.A.LOADED){const t=(0,r.RG)(this.targetExtent_)/this.targetResolution_,e=(0,r.Oq)(this.targetExtent_)/this.targetResolution_
this.canvas_=(0,Bi.XX)(t,e,this.sourcePixelRatio_,(0,Ui.m)(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=t,this.changed()}load(){if(this.state==ki.A.IDLE){this.state=ki.A.LOADING,this.changed()
const t=this.sourceImage_.getState()
t==ki.A.LOADED||t==ki.A.ERROR?this.reproject_():(this.sourceListenerKey_=(0,qi.KT)(this.sourceImage_,o.A.CHANGE,(function(t){const e=this.sourceImage_.getState()
e!=ki.A.LOADED&&e!=ki.A.ERROR||(this.unlistenSource_(),this.reproject_())}),this),this.sourceImage_.load())}}unlistenSource_(){(0,qi.JH)(this.sourceListenerKey_),this.sourceListenerKey_=null}}const Zi=Vi,Wi=4
class Yi extends g.Ay{constructor(t,e){super(t),this.image=e}}class Xi extends _.A{constructor(t){super({attributions:t.attributions,projection:t.projection,state:t.state,interpolate:void 0===t.interpolate||t.interpolate}),this.on,this.once,this.un,this.loader=t.loader||null,this.resolutions_=void 0!==t.resolutions?t.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=!!t.loader&&0===t.loader.length,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(t){this.resolutions_=t}findNearestResolution(t){const e=this.getResolutions()
return e&&(t=e[(0,S.FT)(e,t,0)]),t}getImage(t,e,i,n){const o=this.getProjection()
if(!o||!n||(0,v.tI)(o,n))return o&&(n=o),this.getImageInternal(t,e,i,n)
if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&(0,v.tI)(this.reprojectedImage_.getProjection(),n)&&this.reprojectedImage_.getResolution()==e&&(0,r.aI)(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_
this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new Zi(o,n,t,e,i,((t,e,i)=>this.getImageInternal(t,e,i,o)),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(t,e,i,n){if(this.loader){const s=$i(t,e,i,1),a=this.findNearestResolution(e)
if(this.image&&(this.static_||this.wantedProjection_===n&&(this.wantedExtent_&&(0,r.ms)(this.wantedExtent_,s)||(0,r.ms)(this.image.getExtent(),s))&&(this.wantedResolution_&&(0,Ui.m)(this.wantedResolution_)===a||(0,Ui.m)(this.image.getResolution())===a)))return this.image
this.wantedProjection_=n,this.wantedExtent_=s,this.wantedResolution_=a,this.image=new zi.Ay(s,a,i,this.loader),this.image.addEventListener(o.A.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(t){const e=t.target
let i
switch(e.getState()){case ki.A.LOADING:this.loading=!0,i="imageloadstart"
break
case ki.A.LOADED:this.loading=!1,i="imageloadend"
break
case ki.A.ERROR:this.loading=!1,i="imageloaderror"
break
default:return}this.hasListener(i)&&this.dispatchEvent(new Yi(i,e))}}function Hi(t,e){t.getImage().src=e}function $i(t,e,i,n){const o=e/i,s=(0,r.q1)(t),a=(0,w.mk)((0,r.RG)(t)/o,Wi),l=(0,w.mk)((0,r.Oq)(t)/o,Wi),h=a+2*(0,w.mk)((n-1)*a/2,Wi),u=l+2*(0,w.mk)((n-1)*l/2,Wi)
return(0,r.Bg)(s,o,0,[h,u])}const Ki=Xi
function Ji(t,e){const i=[]
Object.keys(e).forEach((function(t){null!==e[t]&&void 0!==e[t]&&i.push(t+"="+encodeURIComponent(e[t]))}))
const n=i.join("&")
return t=t.replace(/[?&]$/,""),(t+=t.includes("?")?"&":"?")+n}function Qi(t,e,i,n,o,s){const a=o.getCode().split(/:(?=\d+$)/).pop(),l=i/n,h=[(0,w.LI)((0,r.RG)(e)/l,Wi),(0,w.LI)((0,r.Oq)(e)/l,Wi)]
return s.SIZE=h[0]+","+h[1],s.BBOX=e.join(","),s.BBOXSR=a,s.IMAGESR=a,s.DPI=Math.round(s.DPI?s.DPI*n:90*n),Ji(t.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage"),s)}function tn(t){const e=t.load?t.load:zi.D4,i=(0,v.Jt)(t.projection||"EPSG:3857")
return function(n,o,s){s=t.hidpi?s:1
const a={F:"image",FORMAT:"PNG32",TRANSPARENT:!0}
Object.assign(a,t.params),n=$i(n,o,s,t.ratio)
const l=Qi(t.url,n,o,s,i,a),h=new Image
return null!==t.crossOrigin&&(h.crossOrigin=t.crossOrigin),e(h,l).then((t=>{const e=(0,r.RG)(n)/t.width*s
return{image:t,extent:n,resolution:e,pixelRatio:s}}))}}const en=class extends Ki{constructor(t){super({attributions:(t=t||{}).attributions,interpolate:t.interpolate,projection:t.projection,resolutions:t.resolutions}),this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null,this.hidpi_=void 0===t.hidpi||t.hidpi,this.url_=t.url,this.imageLoadFunction_=void 0!==t.imageLoadFunction?t.imageLoadFunction:Hi,this.params_=Object.assign({},t.params),this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=void 0!==t.ratio?t.ratio:1.5,this.loaderProjection_=null}getParams(){return this.params_}getImageInternal(t,e,i,n){return void 0===this.url_?null:(this.loader&&this.loaderProjection_===n||(this.loaderProjection_=n,this.loader=tn({crossOrigin:this.crossOrigin_,params:this.params_,projection:n,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(t,e)=>(this.image.setImage(t),this.imageLoadFunction_(this.image,e),(0,zi.D4)(t))})),super.getImageInternal(t,e,i,n))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(t){this.imageLoadFunction_=t,this.changed()}setUrl(t){t!=this.url_&&(this.url_=t,this.loader=null,this.changed())}updateParams(t){Object.assign(this.params_,t),this.changed()}changed(){this.image=null,super.changed()}}
var nn=i(4943)
const rn=class extends Ki{constructor(t){super({attributions:(t=t||{}).attributions,interpolate:t.interpolate,projection:t.projection,resolutions:t.resolutions,state:t.state}),this.canvasFunction_=t.canvasFunction,this.canvas_=null,this.renderedRevision_=0,this.ratio_=void 0!==t.ratio?t.ratio:1.5}getImageInternal(t,e,i,n){e=this.findNearestResolution(e)
let o=this.canvas_
if(o&&this.renderedRevision_==this.getRevision()&&o.getResolution()==e&&o.getPixelRatio()==i&&(0,r.ms)(o.getExtent(),t))return o
t=t.slice(),(0,r.Af)(t,this.ratio_)
const s=[(0,r.RG)(t)/e*i,(0,r.Oq)(t)/e*i],a=this.canvasFunction_.call(this,t,e,i,s,n)
return a&&(o=new nn.A(t,e,i,a)),this.canvas_=o,this.renderedRevision_=this.getRevision(),o}}
function on(t){const e=t.load||zi.D4
return function(i,n,o){const s=new Image
null!==t.crossOrigin&&(s.crossOrigin=t.crossOrigin),i=$i(i,n,o,t.ratio)
const a=(0,r.RG)(i)/n,l=(0,r.Oq)(i)/n,h=[a*o,l*o],u=function(t,e,i,n,o,s,a){const l=function(t,e,i,n){const o=(0,r.RG)(t),s=(0,r.Oq)(t),a=e[0],l=e[1],h=.0254/n
return l*o>a*s?o*i/(a*h):s*i/(l*h)}(i,n,s,a),h=(0,r.q1)(i),u={OPERATION:o?"GETDYNAMICMAPOVERLAYIMAGE":"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol/source/ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:a,SETDISPLAYWIDTH:Math.round(n[0]),SETDISPLAYHEIGHT:Math.round(n[1]),SETVIEWSCALE:l,SETVIEWCENTERX:h[0],SETVIEWCENTERY:h[1]}
return Object.assign(u,e),Ji(t,u)}(t.url,t.params,i,h,t.useOverlay,t.metersPerUnit||1,t.displayDpi||96)
return e(s,u).then((t=>({image:t,extent:i,pixelRatio:o})))}}const sn=class extends Ki{constructor(t){super({interpolate:t.interpolate,projection:t.projection,resolutions:t.resolutions}),this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null,this.displayDpi_=void 0!==t.displayDpi?t.displayDpi:96,this.params_=Object.assign({},t.params),this.url_=t.url,this.imageLoadFunction_=void 0!==t.imageLoadFunction?t.imageLoadFunction:Hi,this.hidpi_=void 0===t.hidpi||t.hidpi,this.metersPerUnit_=void 0!==t.metersPerUnit?t.metersPerUnit:1,this.ratio_=void 0!==t.ratio?t.ratio:1,this.useOverlay_=void 0!==t.useOverlay&&t.useOverlay,this.renderedRevision_=0,this.loaderProjection_=null}getParams(){return this.params_}getImageInternal(t,e,i,n){return void 0===this.url_?null:(this.loader&&this.loaderProjection_===n||(this.loaderProjection_=n,this.loader=on({crossOrigin:this.crossOrigin_,params:this.params_,hidpi:this.hidpi_,metersPerUnit:this.metersPerUnit_,url:this.url_,useOverlay:this.useOverlay_,ratio:this.ratio_,load:(t,e)=>(this.image.setImage(t),this.imageLoadFunction_(this.image,e),(0,zi.D4)(t))})),super.getImageInternal(t,e,i,n))}getImageLoadFunction(){return this.imageLoadFunction_}updateParams(t){Object.assign(this.params_,t),this.changed()}setImageLoadFunction(t){this.imageLoadFunction_=t,this.changed()}changed(){this.image=null,super.changed()}}
function an(t){const e=t.load||zi.D4,i=t.imageExtent,n=new Image
return null!==t.crossOrigin&&(n.crossOrigin=t.crossOrigin),()=>e(n,t.url).then((t=>{const e=(0,r.RG)(i)/t.width,n=(0,r.Oq)(i)/t.height
return{image:t,extent:i,resolution:e!==n?[e,n]:n,pixelRatio:1}}))}const ln=class extends Ki{constructor(t){const e=void 0!==t.crossOrigin?t.crossOrigin:null,i=void 0!==t.imageLoadFunction?t.imageLoadFunction:Hi
super({attributions:t.attributions,interpolate:t.interpolate,projection:(0,v.Jt)(t.projection)}),this.url_=t.url,this.imageExtent_=t.imageExtent,this.image=null,this.image=new zi.Ay(this.imageExtent_,void 0,1,an({url:t.url,imageExtent:t.imageExtent,crossOrigin:e,load:(t,e)=>(this.image.setImage(t),i(this.image,e),(0,zi.D4)(t))})),this.image.addEventListener(o.A.CHANGE,this.handleImageChange.bind(this))}getImageExtent(){return this.imageExtent_}getImageInternal(t,e,i,n){return(0,r.HY)(t,this.image.getExtent())?this.image:null}getUrl(){return this.url_}}
var hn=i(4549)
const un="1.3.0",cn=[101,101]
function dn(t,e,i,n,r){r.WIDTH=i[0],r.HEIGHT=i[1]
const o=n.getAxisOrientation()
let s
const a=(0,hn.Z)(r.VERSION,"1.3")>=0
return r[a?"CRS":"SRS"]=n.getCode(),s=a&&"ne"==o.substr(0,2)?[e[1],e[0],e[3],e[2]]:e,r.BBOX=s.join(","),Ji(t,r)}function fn(t,e,i,n,o,s,a){s=Object.assign({REQUEST:"GetMap"},s)
const l=e/i,h=[(0,w.LI)((0,r.RG)(t)/l,Wi),(0,w.LI)((0,r.Oq)(t)/l,Wi)]
if(1!=i)switch(a){case"geoserver":const t=90*i+.5|0
"FORMAT_OPTIONS"in s?s.FORMAT_OPTIONS+=";dpi:"+t:s.FORMAT_OPTIONS="dpi:"+t
break
case"mapserver":s.MAP_RESOLUTION=90*i
break
case"carmentaserver":case"qgis":s.DPI=90*i
break
default:throw new Error("Unknown `serverType` configured")}return dn(o,t,h,n,s)}function pn(t,e){return Object.assign({REQUEST:e,SERVICE:"WMS",VERSION:un,FORMAT:"image/png",STYLES:"",TRANSPARENT:!0},t)}function gn(t){const e=void 0===t.hidpi||t.hidpi,i=(0,v.Jt)(t.projection||"EPSG:3857"),n=t.ratio||1.5,r=t.load||zi.D4
return(o,s,a)=>{o=$i(o,s,a,n),1==a||e&&void 0!==t.serverType||(a=1)
const l=fn(o,s,a,i,t.url,pn(t.params,"GetMap"),t.serverType),h=new Image
return null!==t.crossOrigin&&(h.crossOrigin=t.crossOrigin),r(h,l).then((t=>({image:t,extent:o,pixelRatio:a})))}}const _n=class extends Ki{constructor(t){super({attributions:(t=t||{}).attributions,interpolate:t.interpolate,projection:t.projection,resolutions:t.resolutions}),this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null,this.url_=t.url,this.imageLoadFunction_=void 0!==t.imageLoadFunction?t.imageLoadFunction:Hi,this.params_=Object.assign({},t.params),this.serverType_=t.serverType,this.hidpi_=void 0===t.hidpi||t.hidpi,this.renderedRevision_=0,this.ratio_=void 0!==t.ratio?t.ratio:1.5,this.loaderProjection_=null}getFeatureInfoUrl(t,e,i,n){const o=(0,v.Jt)(i),s=this.getProjection()
return s&&s!==o&&(e=(0,Bi.KQ)(s,o,t,e),t=(0,v.pd)(t,o,s)),function(t,e,i){if(void 0===t.url)return
const n=(0,v.Jt)(t.projection||"EPSG:3857"),o=(0,r.Bg)(e,i,0,cn),s={QUERY_LAYERS:t.params.LAYERS,INFO_FORMAT:"application/json"}
Object.assign(s,pn(t.params,"GetFeatureInfo"),t.params)
const a=(0,w.RI)((e[0]-o[0])/i,Wi),l=(0,w.RI)((o[3]-e[1])/i,Wi),h=(0,hn.Z)(s.VERSION,"1.3")>=0
return s[h?"I":"X"]=a,s[h?"J":"Y"]=l,dn(t.url,o,cn,n,s)}({url:this.url_,params:{...this.params_,...n},projection:s||o},t,e)}getLegendUrl(t,e){return function(t,e){if(void 0===t.url)return
const i={SERVICE:"WMS",VERSION:un,REQUEST:"GetLegendGraphic",FORMAT:"image/png"}
if(void 0===t.params||void 0===t.params.LAYER){const e=t.params.LAYERS
if(Array.isArray(e)&&1!==e.length)return
i.LAYER=e}if(void 0!==e){const n=(0,v.Jt)(t.projection||"EPSG:3857").getMetersPerUnit()||1,r=28e-5
i.SCALE=e*n/r}return Object.assign(i,t.params),Ji(t.url,i)}({url:this.url_,params:{...this.params_,...e}},t)}getParams(){return this.params_}getImageInternal(t,e,i,n){return void 0===this.url_?null:(this.loader&&this.loaderProjection_===n||(this.loaderProjection_=n,this.loader=gn({crossOrigin:this.crossOrigin_,params:this.params_,projection:n,serverType:this.serverType_,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(t,e)=>(this.image.setImage(t),this.imageLoadFunction_(this.image,e),(0,zi.D4)(t))})),super.getImageInternal(t,e,i,n))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(t){this.imageLoadFunction_=t,this.changed()}setUrl(t){t!=this.url_&&(this.url_=t,this.loader=null,this.changed())}updateParams(t){Object.assign(this.params_,t),this.changed()}changed(){this.image=null,super.changed()}}
function mn(t,e,i,n){const r=document.createElement("script"),o="olc_"+(0,m.v6)(e)
function s(){delete window[o],r.parentNode.removeChild(r)}r.async=!0,r.src=t+(t.includes("?")?"&":"?")+(n||"callback")+"="+o
const a=setTimeout((function(){s(),i&&i()}),1e4)
window[o]=function(t){clearTimeout(a),s(),e(t)},document.head.appendChild(r)}class yn extends Error{constructor(t){super("Unexpected response status: "+t.status),this.name="ResponseError",this.response=t}}class vn extends Error{constructor(t){super("Failed to issue request"),this.name="ClientError",this.client=t}}function xn(t){return new Promise((function(e,i){const n=new XMLHttpRequest
n.addEventListener("load",(function(t){const n=t.target
if(!n.status||n.status>=200&&n.status<300){let r
try{r=JSON.parse(n.responseText)}catch(t){const e="Error parsing response text as JSON: "+t.message
return void i(new Error(e))}e(r)}else i(new yn(n))})),n.addEventListener("error",(function(t){i(new vn(t.target))})),n.open("GET",t),n.setRequestHeader("Accept","application/json"),n.send()}))}function bn(t,e){return e.includes("://")?e:new URL(e,t).href}const wn={"image/png":!0,"image/jpeg":!0,"image/gif":!0,"image/webp":!0},En={"application/vnd.mapbox-vector-tile":!0,"application/geo+json":!0}
function Sn(t,e,i,n){let o=t.projection
if(!o&&(o=(0,v.Jt)(e.crs),!o))throw new Error(`Unsupported CRS: ${e.crs}`)
const s=e.orderedAxes,a="en"!==(s?s.slice(0,2).map((t=>t.replace(/E|X|Lon/i,"e").replace(/N|Y|Lat/i,"n"))).join(""):o.getAxisOrientation().substr(0,2)),l=e.tileMatrices,h={}
for(let r=0;r<l.length;++r){const t=l[r]
h[t.id]=t}const u={},c=[]
if(n)for(let r=0;r<n.length;++r){const t=n[r],e=t.tileMatrix
c.push(e),u[e]=t}else for(let r=0;r<l.length;++r){const t=l[r].id
c.push(t)}const d=c.length,f=new Array(d),p=new Array(d),g=new Array(d),_=new Array(d),m=[-1/0,-1/0,1/0,1/0]
for(let v=0;v<d;++v){const t=c[v],e=h[t],i=e.pointOfOrigin
f[v]=a?[i[1],i[0]]:i,p[v]=e.cellSize,g[v]=[e.matrixWidth,e.matrixHeight],_[v]=[e.tileWidth,e.tileHeight]
const n=u[t]
if(n){const t=e.cellSize*e.tileWidth,i=f[v][0]+n.minTileCol*t,o=f[v][0]+(n.maxTileCol+1)*t,s=e.cellSize*e.tileHeight
let a,l
"bottomLeft"===e.cornerOfOrigin?(a=f[v][1]+n.minTileRow*s,l=f[v][1]+(n.maxTileRow+1)*s):(a=f[v][1]-(n.maxTileRow+1)*s,l=f[v][1]-n.minTileRow*s),(0,r._N)(m,[i,a,o,l],m)}}const y=new T({origins:f,resolutions:p,sizes:g,tileSizes:_,extent:n?m:void 0}),x=t.context,b=t.url
return{grid:y,urlTemplate:i,urlFunction:function(t,e,r){if(!t)return
const o=c[t[0]],s=h[o],a="bottomLeft"===s.cornerOfOrigin,l={tileMatrix:o,tileCol:t[1],tileRow:a?-t[2]-1:t[2]}
if(n){const t=u[s.id]
if(l.tileCol<t.minTileCol||l.tileCol>t.maxTileCol||l.tileRow<t.minTileRow||l.tileRow>t.maxTileRow)return}Object.assign(l,x)
const d=i.replace(/\{(\w+?)\}/g,(function(t,e){return l[e]}))
return bn(b,d)}}}function Cn(t){return xn(t.url).then((function(e){return function(t,e){const i=e.tileMatrixSetLimits
let n
if("map"===e.dataType)n=function(t,e){let i,n
for(let r=0;r<t.length;++r){const o=t[r]
if("item"===o.rel){if(o.type===e){i=o.href
break}(wn[o.type]||!n&&o.type.startsWith("image/"))&&(n=o.href)}}if(!i){if(!n)throw new Error('Could not find "item" link')
i=n}return i}(e.links,t.mediaType)
else{if("vector"!==e.dataType)throw new Error('Expected tileset data type to be "map" or "vector"')
n=function(t,e,i){let n,r
const o={}
for(let s=0;s<t.length;++s){const i=t[s]
if(o[i.type]=i.href,"item"===i.rel){if(i.type===e){n=i.href
break}En[i.type]&&(r=i.href)}}if(!n&&i)for(let s=0;s<i.length;++s){const t=i[s]
if(o[t]){n=o[t]
break}}if(!n){if(!r)throw new Error('Could not find "item" link')
n=r}return n}(e.links,t.mediaType,t.supportedMediaTypes)}if(e.tileMatrixSet)return Sn(t,e.tileMatrixSet,n,i)
const r=e.links.find((t=>"http://www.opengis.net/def/rel/ogc/1.0/tiling-scheme"===t.rel))
if(!r)throw new Error("Expected http://www.opengis.net/def/rel/ogc/1.0/tiling-scheme link or tileMatrixSet")
const o=r.href
return xn(bn(t.url,o)).then((function(e){return Sn(t,e,n,i)}))}(t,e)}))}const Pn=class extends q{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:"loading",tileLoadFunction:t.tileLoadFunction,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition}),Cn({url:t.url,projection:this.getProjection(),mediaType:t.mediaType,context:t.context||null}).then(this.handleTileSetInfo_.bind(this)).catch(this.handleError_.bind(this))}handleTileSetInfo_(t){this.tileGrid=t.grid,this.setTileUrlFunction(t.urlFunction,t.urlTemplate),this.setState("ready")}handleError_(t){(0,li.z3)(t),this.setState("error")}}
var Tn=i(7912)
class In extends Tn.A{constructor(t,e,i,n,r,o){super(t,e,o),this.extent=null,this.format_=n,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=r,this.url_=i,this.key=i}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==c.A.IDLE&&(this.setState(c.A.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(t,e){this.setFeatures(t)}onError(){this.setState(c.A.ERROR)}setFeatures(t){this.features_=t,this.setState(c.A.LOADED)}setLoader(t){this.loader_=t}}const Mn=In,An=[]
class Rn extends Tn.A{constructor(t,e,i,n){super(t,e,{transition:0}),this.context_={},this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=n.bind(void 0,this),this.wrappedTileCoord=i}getContext(t){const e=(0,m.v6)(t)
return e in this.context_||(this.context_[e]=(0,Ti.Y)(1,1,An)),this.context_[e]}hasContext(t){return(0,m.v6)(t)in this.context_}getImage(t){return this.hasContext(t)?this.getContext(t).canvas:null}getReplayState(t){const e=(0,m.v6)(t)
return e in this.replayState_||(this.replayState_[e]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[e]}load(){this.getSourceTiles()}release(){for(const t in this.context_){const e=this.context_[t];(0,Ti.Yg)(e),An.push(e.canvas),delete this.context_[t]}super.release()}}const Ln=Rn
var On=i(7931),Dn=i(6831)
const Nn=class extends B{constructor(t){const e=t.projection||"EPSG:3857",i=t.extent||R(e),n=t.tileGrid||M({extent:i,maxResolution:t.maxResolution,maxZoom:void 0!==t.maxZoom?t.maxZoom:22,minZoom:t.minZoom,tileSize:t.tileSize||512})
super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,interpolate:!0,opaque:!1,projection:e,state:t.state,tileGrid:n,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:Fn,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:void 0===t.zDirection?1:t.zDirection}),this.format_=t.format?t.format:null,this.sourceTileCache=new u(this.tileCache.highWaterMark),this.overlaps_=null==t.overlaps||t.overlaps,this.tileClass=t.tileClass?t.tileClass:Mn,this.tileGrids_={}}getFeaturesInExtent(t){const e=[],i=this.tileCache
if(0===i.getCount())return e
const n=(0,l.K)(i.peekFirstKey())[0],o=this.tileGrid
return i.forEach((function(i){if(i.tileCoord[0]!==n||i.getState()!==c.A.LOADED)return
const s=i.getSourceTiles()
for(let n=0,a=s.length;n<a;++n){const i=s[n],a=i.tileCoord
if((0,r.HY)(t,o.getTileCoordExtent(a))){const n=i.getFeatures()
if(n)for(let i=0,o=n.length;i<o;++i){const o=n[i],s=o.getGeometry();(0,r.HY)(t,s.getExtent())&&e.push(o)}}}})),e}getOverlaps(){return this.overlaps_}clear(){this.tileCache.clear(),this.sourceTileCache.clear()}expireCache(t,e){const i=this.getTileCacheForProjection(t),n=Object.keys(e).reduce(((t,e)=>{const n=(0,l.gr)(e),r=i.peek(n)
if(r){const e=r.sourceTiles
for(let i=0,n=e.length;i<n;++i)t[e[i].getKey()]=!0}return t}),{})
super.expireCache(t,e),this.sourceTileCache.expireCache(n)}getSourceTiles(t,e,i){if(i.getState()===c.A.IDLE){i.setState(c.A.LOADING)
const n=i.wrappedTileCoord,s=this.getTileGridForProjection(e),a=s.getTileCoordExtent(n),l=n[0],h=s.getResolution(l);(0,r.r)(a,-h,a)
const u=this.tileGrid,d=u.getExtent()
d&&(0,r._N)(a,d,a)
const f=u.getZForResolution(h,this.zDirection)
u.forEachTileCoord(a,f,(n=>{const r=this.tileUrlFunction(n,t,e),s=this.sourceTileCache.containsKey(r)?this.sourceTileCache.get(r):new this.tileClass(n,r?c.A.IDLE:c.A.EMPTY,r,this.format_,this.tileLoadFunction)
i.sourceTiles.push(s)
const a=s.getState()
if(a<c.A.LOADED){const t=e=>{this.handleTileChange(e)
const n=s.getState()
if(n===c.A.LOADED||n===c.A.ERROR){const e=s.getKey()
e in i.errorTileKeys?s.getState()===c.A.LOADED&&delete i.errorTileKeys[e]:i.loadingSourceTiles--,n===c.A.ERROR?i.errorTileKeys[e]=!0:s.removeEventListener(o.A.CHANGE,t),0===i.loadingSourceTiles&&i.setState((0,On.p)(i.errorTileKeys)?c.A.LOADED:c.A.ERROR)}}
s.addEventListener(o.A.CHANGE,t),i.loadingSourceTiles++}a===c.A.IDLE&&(s.extent=u.getTileCoordExtent(n),s.projection=e,s.resolution=u.getResolution(n[0]),this.sourceTileCache.set(r,s),s.load())})),i.loadingSourceTiles||i.setState(i.sourceTiles.some((t=>t.getState()===c.A.ERROR))?c.A.ERROR:c.A.LOADED)}return i.sourceTiles}getTile(t,e,i,n,o){const s=(0,l.dp)(t,e,i),a=this.getKey()
let h
if(this.tileCache.containsKey(s)&&(h=this.tileCache.get(s),h.key===a))return h
const u=[t,e,i]
let d=this.getTileCoordForTileUrlFunction(u,o)
const f=this.getTileGrid().getExtent(),p=this.getTileGridForProjection(o)
if(d&&f){const e=p.getTileCoordExtent(d);(0,r.r)(e,-p.getResolution(t),e),(0,r.HY)(f,e)||(d=null)}let g=!0
if(null!==d){const e=this.tileGrid,i=p.getResolution(t),s=e.getZForResolution(i,1),a=p.getTileCoordExtent(d);(0,r.r)(a,-i,a),e.forEachTileCoord(a,s,(t=>{g=g&&!this.tileUrlFunction(t,n,o)}))}const _=new Ln(u,g?c.A.EMPTY:c.A.IDLE,d,this.getSourceTiles.bind(this,n,o))
return _.key=a,h?(_.interimTile=h,_.refreshInterimChain(),this.tileCache.replace(s,_)):this.tileCache.set(s,_),_}getTileGridForProjection(t){const e=t.getCode()
let i=this.tileGrids_[e]
if(!i){const t=this.tileGrid,n=t.getResolutions().slice(),r=n.map((function(e,i){return t.getOrigin(i)})),o=n.map((function(e,i){return t.getTileSize(i)})),s=b.L+1
for(let e=n.length;e<s;++e)n.push(n[e-1]/2),r.push(r[e-1]),o.push(o[e-1])
i=new T({extent:t.getExtent(),origins:r,resolutions:n,tileSizes:o}),this.tileGrids_[e]=i}return i}getTilePixelRatio(t){return t}getTilePixelSize(t,e,i){const n=this.getTileGridForProjection(i),r=(0,C.xq)(n.getTileSize(t),this.tmpSize)
return[Math.round(r[0]*e),Math.round(r[1]*e)]}updateCacheSize(t,e){super.updateCacheSize(2*t,e),this.sourceTileCache.highWaterMark=this.getTileCacheForProjection(e).highWaterMark}}
function Fn(t,e){t.setLoader((function(i,n,r){(0,Dn.m8)(e,t.getFormat(),i,n,r,t.onLoad.bind(t),t.onError.bind(t))}))}const kn=class extends Nn{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,format:t.format,overlaps:t.overlaps,projection:t.projection,tileClass:t.tileClass,transition:t.transition,wrapX:t.wrapX,zDirection:t.zDirection,state:"loading"}),Cn({url:t.url,projection:this.getProjection(),mediaType:t.mediaType,supportedMediaTypes:t.format.supportedMediaTypes,context:t.context||null}).then(this.handleTileSetInfo_.bind(this)).catch(this.handleError_.bind(this))}handleTileSetInfo_(t){this.tileGrid=t.grid,this.setTileUrlFunction(t.urlFunction,t.urlTemplate),this.setState("ready")}handleError_(t){(0,li.z3)(t),this.setState("error")}},zn='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.',jn=class extends Z{constructor(t){let e
e=void 0!==(t=t||{}).attributions?t.attributions:[zn]
const i=void 0!==t.crossOrigin?t.crossOrigin:"anonymous",n=void 0!==t.url?t.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png"
super({attributions:e,attributionsCollapsible:!1,cacheSize:t.cacheSize,crossOrigin:i,interpolate:t.interpolate,maxZoom:void 0!==t.maxZoom?t.maxZoom:19,opaque:void 0===t.opaque||t.opaque,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:n,wrapX:t.wrapX,zDirection:t.zDirection})}}
var Gn=i(8646),Bn=i(9343),Un=i(3498),qn=i(1358),Vn=i(2282)
let Zn,Wn=!0
try{new ImageData(10,10)}catch(t){Wn=!1}function Yn(t){let e=!0
try{new ImageData(10,10)}catch(t){e=!1}function i(t,i,n){return e?new ImageData(t,i,n):{data:t,width:i,height:n}}return function(e){const n=e.buffers,r=e.meta,o=e.imageOps,s=e.width,a=e.height,l=n.length,h=n[0].byteLength
if(o){const e=new Array(l)
for(let t=0;t<l;++t)e[t]=i(new Uint8ClampedArray(n[t]),s,a)
return t(e,r).data.buffer}const u=new Uint8ClampedArray(h),c=new Array(l),d=new Array(l)
for(let t=0;t<l;++t)c[t]=new Uint8ClampedArray(n[t]),d[t]=[0,0,0,0]
for(let i=0;i<h;i+=4){for(let t=0;t<l;++t){const e=c[t]
d[t][0]=e[i],d[t][1]=e[i+1],d[t][2]=e[i+2],d[t][3]=e[i+3]}const e=t(d,r)
u[i]=e[0],u[i+1]=e[1],u[i+2]=e[2],u[i+3]=e[3]}return u.buffer}}function Xn(t,e){const i=Object.keys(t.lib||{}).map((function(e){return"const "+e+" = "+t.lib[e].toString()+";"})).concat(["const __minion__ = ("+Yn.toString()+")(",t.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),n=new Worker("undefined"==typeof Blob?"data:text/javascript;base64,"+Buffer.from(i.join("\n"),"binary").toString("base64"):URL.createObjectURL(new Blob(i,{type:"text/javascript"})))
return n.addEventListener("message",e),n}class Hn extends Gn.A{constructor(t){let e
super(),this._imageOps=!!t.imageOps,e=0===t.threads?0:this._imageOps?1:t.threads||1
const i=new Array(e)
if(e)for(let n=0;n<e;++n)i[n]=Xn(t,this._onWorkerMessage.bind(this,n))
else i[0]=function(t,e){const i=Yn(t.operation)
let n=!1
return{postMessage:function(t){setTimeout((function(){n||e({data:{buffer:i(t),meta:t.meta}})}),0)},terminate:function(){n=!0}}}(t,this._onWorkerMessage.bind(this,0))
this._workers=i,this._queue=[],this._maxQueueLength=t.queue||1/0,this._running=0,this._dataLookup={},this._job=null}process(t,e,i){this._enqueue({inputs:t,meta:e,callback:i}),this._dispatch()}_enqueue(t){for(this._queue.push(t);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)}_dispatch(){if(this._running||0===this._queue.length)return
const t=this._queue.shift()
this._job=t
const e=t.inputs[0].width,i=t.inputs[0].height,n=t.inputs.map((function(t){return t.data.buffer})),r=this._workers.length
if(this._running=r,1===r)return void this._workers[0].postMessage({buffers:n,meta:t.meta,imageOps:this._imageOps,width:e,height:i},n)
const o=t.inputs[0].data.length,s=4*Math.ceil(o/4/r)
for(let a=0;a<r;++a){const r=a*s,o=[]
for(let t=0,e=n.length;t<e;++t)o.push(n[t].slice(r,r+s))
this._workers[a].postMessage({buffers:o,meta:t.meta,imageOps:this._imageOps,width:e,height:i},o)}}_onWorkerMessage(t,e){this.disposed||(this._dataLookup[t]=e.data,--this._running,0===this._running&&this._resolveJob())}_resolveJob(){const t=this._job,e=this._workers.length
let i,n
if(1===e)i=new Uint8ClampedArray(this._dataLookup[0].buffer),n=this._dataLookup[0].meta
else{const r=t.inputs[0].data.length
i=new Uint8ClampedArray(r),n=new Array(e)
const o=4*Math.ceil(r/4/e)
for(let t=0;t<e;++t){const e=this._dataLookup[t].buffer,r=t*o
i.set(new Uint8ClampedArray(e),r),n[t]=this._dataLookup[t].meta}}this._job=null,this._dataLookup={},t.callback(null,function(t,e,i){if(Wn)return new ImageData(t,e,i)
Zn||(Zn=document.createElement("canvas").getContext("2d"))
const n=Zn.createImageData(e,i)
return n.data.set(t),n}(i,t.inputs[0].width,t.inputs[0].height),n),this._dispatch()}disposeInternal(){for(let t=0;t<this._workers.length;++t)this._workers[t].terminate()
this._workers.length=0}}class $n extends g.Ay{constructor(t,e,i){super(t),this.extent=e.extent,this.resolution=e.viewState.resolution/e.pixelRatio,this.data=i}}class Kn extends Ki{constructor(t){super({projection:null}),this.on,this.once,this.un,this.processor_=null,this.operationType_=void 0!==t.operationType?t.operationType:"pixel",this.threads_=void 0!==t.threads?t.threads:1,this.layers_=function(t){const e=t.length,i=new Array(e)
for(let n=0;n<e;++n)i[n]=tr(t[n])
return i}(t.sources)
const e=this.changed.bind(this)
for(let n=0,r=this.layers_.length;n<r;++n)this.layers_[n].addEventListener(o.A.CHANGE,e)
var i
this.useResolutions_=null!==t.resolutions,this.tileQueue_=new qn.A((function(){return 1}),this.processSources_.bind(this)),this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,coordinateToPixelTransform:(0,Vn.vt)(),declutter:null,extent:null,index:0,layerIndex:0,layerStatesArray:(i=this.layers_,i.map((function(t){return t.getLayerState()}))),pixelRatio:1,pixelToCoordinateTransform:(0,Vn.vt)(),postRenderFunctions:[],size:[0,0],tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:(0,m.v6)(this),renderTargets:{}},this.setAttributions((function(e){const i=[]
for(let n=0,r=t.sources.length;n<r;++n){const r=t.sources[n],o=r instanceof _.A?r:r.getSource()
if(!o)continue
const s=o.getAttributions()
if("function"==typeof s){const t=s(e)
i.push.apply(i,t)}}return 0!==i.length?i:null})),void 0!==t.operation&&this.setOperation(t.operation,t.lib)}setOperation(t,e){this.processor_&&this.processor_.dispose(),this.processor_=new Hn({operation:t,imageOps:"image"===this.operationType_,queue:1,lib:e,threads:this.threads_}),this.changed()}updateFrameState_(t,e,i){const n=Object.assign({},this.frameState_)
n.viewState=Object.assign({},n.viewState)
const o=(0,r.q1)(t)
n.size[0]=Math.ceil((0,r.RG)(t)/e),n.size[1]=Math.ceil((0,r.Oq)(t)/e),n.extent=[o[0]-n.size[0]*e/2,o[1]-n.size[1]*e/2,o[0]+n.size[0]*e/2,o[1]+n.size[1]*e/2],n.time=Date.now()
const s=n.viewState
return s.center=o,s.projection=i,s.resolution=e,n}allSourcesReady_(){let t,e=!0
for(let i=0,n=this.layers_.length;i<n;++i)if(t=this.layers_[i].getSource(),!t||"ready"!==t.getState()){e=!1
break}return e}getImage(t,e,i,n){if(!this.allSourcesReady_())return null
this.tileQueue_.loadMoreTiles(16,16),e=this.findNearestResolution(e)
const o=this.updateFrameState_(t,e,n)
if(this.requestedFrameState_=o,this.renderedImageCanvas_){const t=this.renderedImageCanvas_.getResolution(),i=this.renderedImageCanvas_.getExtent()
e===t&&(0,r.aI)(o.extent,i)||(this.renderedImageCanvas_=null)}return this.renderedImageCanvas_&&this.getRevision()===this.renderedRevision_||this.processSources_(),o.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}processSources_(){const t=this.requestedFrameState_,e=this.layers_.length,i=new Array(e)
for(let r=0;r<e;++r){t.layerIndex=r,t.renderTargets={}
const e=Qn(this.layers_[r],t)
if(!e)return
i[r]=e}const n={}
this.dispatchEvent(new $n("beforeoperations",t,n)),this.processor_.process(i,n,this.onWorkerComplete_.bind(this,t))}onWorkerComplete_(t,e,i,n){if(e||!i)return
const o=t.extent,s=t.viewState.resolution
if(s!==this.requestedFrameState_.viewState.resolution||!(0,r.aI)(o,this.requestedFrameState_.extent))return
let a
if(this.renderedImageCanvas_)a=this.renderedImageCanvas_.getImage().getContext("2d")
else{const t=Math.round((0,r.RG)(o)/s),e=Math.round((0,r.Oq)(o)/s)
a=(0,Ti.Y)(t,e),this.renderedImageCanvas_=new nn.A(o,s,1,a.canvas)}a.putImageData(i,0,0),t.animate?requestAnimationFrame(this.changed.bind(this)):this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new $n("afteroperations",t,n))}getResolutions(t){if(!this.useResolutions_)return null
let e=super.getResolutions()
if(!e)for(let i=0,n=this.layers_.length;i<n&&(e=this.layers_[i].getSource().getResolutions(t),!e);++i);return e}disposeInternal(){this.processor_&&this.processor_.dispose(),super.disposeInternal()}}Kn.prototype.dispose
let Jn=null
function Qn(t,e){const i=t.getRenderer()
if(!i)throw new Error("Unsupported layer type: "+t)
if(!i.prepareFrame(e))return null
const n=e.size[0],r=e.size[1]
if(0===n||0===r)return null
const o=i.renderFrame(e,null)
let s
if(o instanceof HTMLCanvasElement)s=o
else{if(o&&(s=o.firstElementChild),!(s instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+s)
if(s.width===n&&s.height===r)return s.getContext("2d").getImageData(0,0,n,r)}if(Jn){const t=Jn.canvas
t.width!==n||t.height!==r?Jn=(0,Ti.Y)(n,r,void 0,{willReadFrequently:!0}):Jn.clearRect(0,0,n,r)}else Jn=(0,Ti.Y)(n,r,void 0,{willReadFrequently:!0})
return Jn.drawImage(s,0,0,n,r),Jn.getImageData(0,0,n,r)}function tr(t){let e
return t instanceof _.A?t instanceof D?e=new Un.A({source:t}):t instanceof Ki&&(e=new Bn.A({source:t})):e=t,e}const er=Kn,ir={stamen_terrain:{extension:"png",opaque:!0},stamen_terrain_background:{extension:"png",opaque:!0},stamen_terrain_labels:{extension:"png",opaque:!1},stamen_terrain_lines:{extension:"png",opaque:!1},stamen_toner_background:{extension:"png",opaque:!0},stamen_toner:{extension:"png",opaque:!0},stamen_toner_labels:{extension:"png",opaque:!1},stamen_toner_lines:{extension:"png",opaque:!1},stamen_toner_lite:{extension:"png",opaque:!0},stamen_watercolor:{extension:"jpg",opaque:!0},alidade_smooth:{extension:"png",opaque:!0},alidade_smooth_dark:{extension:"png",opaque:!0},alidade_satellite:{extension:"png",opaque:!0},outdoors:{extension:"png",opaque:!0},osm_bright:{extension:"png",opaque:!0}},nr={stamen_terrain:{minZoom:0,maxZoom:18,retina:!0},stamen_toner:{minZoom:0,maxZoom:20,retina:!0},stamen_watercolor:{minZoom:1,maxZoom:18,retina:!1}},rr=class extends Z{constructor(t){const e=t.layer.indexOf("-"),i=-1==e?t.layer:t.layer.slice(0,e),n=nr[i]||{minZoom:0,maxZoom:20,retina:!0},r=ir[t.layer],o=t.apiKey?"?api_key="+t.apiKey:"",s=n.retina&&t.retina?"@2x":"",a=void 0!==t.url?t.url:"https://tiles.stadiamaps.com/tiles/"+t.layer+"/{z}/{x}/{y}"+s+"."+r.extension+o,l=['&copy; <a href="https://www.stadiamaps.com/" target="_blank">Stadia Maps</a>','&copy; <a href="https://openmaptiles.org/" target="_blank">OpenMapTiles</a>',zn]
t.layer.startsWith("stamen_")&&l.splice(1,0,'&copy; <a href="https://stamen.com/" target="_blank">Stamen Design</a>'),super({attributions:l,cacheSize:t.cacheSize,crossOrigin:"anonymous",interpolate:t.interpolate,maxZoom:void 0!==t.maxZoom?t.maxZoom:n.maxZoom,minZoom:void 0!==t.minZoom?t.minZoom:n.minZoom,opaque:r.opaque,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:a,tilePixelRatio:s?2:1,wrapX:t.wrapX,zDirection:t.zDirection})}},or=class extends q{constructor(t){super({attributions:(t=t||{}).attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:t.zDirection}),this.params_=Object.assign({},t.params),this.hidpi_=void 0===t.hidpi||t.hidpi,this.tmpExtent_=(0,r.S5)(),this.setKey(this.getKeyForParams_())}getKeyForParams_(){let t=0
const e=[]
for(const i in this.params_)e[t++]=i+"-"+this.params_[i]
return e.join("/")}getParams(){return this.params_}getRequestUrl_(t,e,i,n,r,o){const s=this.urls
if(!s)return
let a
return a=1==s.length?s[0]:s[(0,w.xP)((0,l.tW)(t),s.length)],Qi(a,i,(this.tileGrid||this.getTileGridForProjection(r)).getResolution(t[0]),n,r,o)}getTilePixelRatio(t){return this.hidpi_?t:1}updateParams(t){Object.assign(this.params_,t),this.setKey(this.getKeyForParams_())}tileUrlFunction(t,e,i){let n=this.getTileGrid()
if(n||(n=this.getTileGridForProjection(i)),n.getResolutions().length<=t[0])return
1==e||this.hidpi_||(e=1)
const r=n.getTileCoordExtent(t,this.tmpExtent_)
let o=(0,C.xq)(n.getTileSize(t[0]),this.tmpSize)
1!=e&&(o=(0,C.hs)(o,e,this.tmpSize))
const s={F:"image",FORMAT:"PNG32",TRANSPARENT:!0}
return Object.assign(s,this.params_),this.getRequestUrl_(t,o,r,e,i,s)}},sr=class extends Z{constructor(t){super({opaque:!1,projection:(t=t||{}).projection,tileGrid:t.tileGrid,wrapX:void 0===t.wrapX||t.wrapX,zDirection:t.zDirection,url:t.template||"z:{z} x:{x} y:{y}",tileLoadFunction:(t,e)=>{const i=t.getTileCoord()[0],n=(0,C.xq)(this.tileGrid.getTileSize(i)),r=(0,Ti.Y)(n[0],n[1])
r.strokeStyle="grey",r.strokeRect(.5,.5,n[0]+.5,n[1]+.5),r.fillStyle="grey",r.strokeStyle="white",r.textAlign="center",r.textBaseline="middle",r.font="24px sans-serif",r.lineWidth=4,r.strokeText(e,n[0]/2,n[1]/2,n[0]),r.fillText(e,n[0]/2,n[1]/2,n[0]),t.setImage(r.canvas)}})}},ar=class extends q{constructor(t){if(super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:(0,v.Jt)("EPSG:3857"),reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:"loading",tileLoadFunction:t.tileLoadFunction,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:t.zDirection}),this.tileJSON_=null,this.tileSize_=t.tileSize,t.url)if(t.jsonp)mn(t.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this))
else{const e=new XMLHttpRequest
e.addEventListener("load",this.onXHRLoad_.bind(this)),e.addEventListener("error",this.onXHRError_.bind(this)),e.open("GET",t.url),e.send()}else{if(!t.tileJSON)throw new Error("Either `url` or `tileJSON` options must be provided")
this.handleTileJSONResponse(t.tileJSON)}}onXHRLoad_(t){const e=t.target
if(!e.status||e.status>=200&&e.status<300){let i
try{i=JSON.parse(e.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(i)}else this.handleTileJSONError()}onXHRError_(t){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(t){const e=(0,v.Jt)("EPSG:4326"),i=this.getProjection()
let n
if(void 0!==t.bounds){const o=(0,v.FO)(e,i)
n=(0,r.NW)(t.bounds,o)}const o=R(i),s=t.minzoom||0,a=M({extent:o,maxZoom:t.maxzoom||22,minZoom:s,tileSize:this.tileSize_})
if(this.tileGrid=a,this.tileUrlFunction=F(t.tiles,a),t.attribution&&!this.getAttributions()){const e=void 0!==n?n:o
this.setAttributions((function(i){return(0,r.HY)(e,i.extent)?[t.attribution]:null}))}this.tileJSON_=t,this.setState("ready")}handleTileJSONError(){this.setState("error")}},lr=class extends q{constructor(t){t=t||{}
const e=Object.assign({},t.params),i=!("TRANSPARENT"in e)||e.TRANSPARENT
super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:!i,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:t.zDirection}),this.gutter_=void 0!==t.gutter?t.gutter:0,this.params_=e,this.v13_=!0,this.serverType_=t.serverType,this.hidpi_=void 0===t.hidpi||t.hidpi,this.tmpExtent_=(0,r.S5)(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(t,e,i,n){const o=(0,v.Jt)(i),s=this.getProjection()||o
let a=this.getTileGrid()
a||(a=this.getTileGridForProjection(s))
const l=(0,v.pd)(t,o,s),h=(0,Bi.KQ)(s,o,t,e),u=a.getZForResolution(h,this.zDirection),c=a.getResolution(u),d=a.getTileCoordForCoordAndZ(l,u)
if(a.getResolutions().length<=d[0])return
let f=a.getTileCoordExtent(d,this.tmpExtent_)
const p=this.gutter_
0!==p&&(f=(0,r.r)(f,c*p,f))
const g={QUERY_LAYERS:this.params_.LAYERS}
Object.assign(g,pn(this.params_,"GetFeatureInfo"),n)
const _=Math.floor((l[0]-f[0])/c),m=Math.floor((f[3]-l[1])/c)
return g[this.v13_?"I":"X"]=_,g[this.v13_?"J":"Y"]=m,this.getRequestUrl_(d,f,1,s||o,g)}getLegendUrl(t,e){if(void 0===this.urls[0])return
const i={SERVICE:"WMS",VERSION:un,REQUEST:"GetLegendGraphic",FORMAT:"image/png"}
if(void 0===e||void 0===e.LAYER){const t=this.params_.LAYERS
if(Array.isArray(t)&&1!==t.length)return
i.LAYER=t}if(void 0!==t){const e=this.getProjection()?this.getProjection().getMetersPerUnit():1,n=28e-5
i.SCALE=t*e/n}return Object.assign(i,e),Ji(this.urls[0],i)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(t,e,i,n,r){const o=this.urls
if(!o)return
let s
return s=1==o.length?o[0]:o[(0,w.xP)((0,l.tW)(t),o.length)],fn(e,(this.tileGrid||this.getTileGridForProjection(n)).getResolution(t[0]),i,n,s,r,this.serverType_)}getTilePixelRatio(t){return this.hidpi_&&void 0!==this.serverType_?t:1}getKeyForParams_(){let t=0
const e=[]
for(const i in this.params_)e[t++]=i+"-"+this.params_[i]
return e.join("/")}updateParams(t){Object.assign(this.params_,t),this.updateV13_(),this.setKey(this.getKeyForParams_())}updateV13_(){const t=this.params_.VERSION||un
this.v13_=(0,hn.Z)(t,"1.3")>=0}tileUrlFunction(t,e,i){let n=this.getTileGrid()
if(n||(n=this.getTileGridForProjection(i)),n.getResolutions().length<=t[0])return
1==e||this.hidpi_&&void 0!==this.serverType_||(e=1)
const o=n.getResolution(t[0])
let s=n.getTileCoordExtent(t,this.tmpExtent_)
const a=this.gutter_
0!==a&&(s=(0,r.r)(s,o*a,s))
const l=Object.assign({},pn(this.params_,"GetMap"))
return this.getRequestUrl_(t,s,e,i,l)}}
class hr extends Tn.A{constructor(t,e,i,n,r,o){super(t,e),this.src_=i,this.extent_=n,this.preemptive_=r,this.grid_=null,this.keys_=null,this.data_=null,this.jsonp_=o}getImage(){return null}getData(t){if(!this.grid_||!this.keys_)return null
const e=(t[0]-this.extent_[0])/(this.extent_[2]-this.extent_[0]),i=(t[1]-this.extent_[1])/(this.extent_[3]-this.extent_[1]),n=this.grid_[Math.floor((1-i)*this.grid_.length)]
if("string"!=typeof n)return null
let r=n.charCodeAt(Math.floor(e*n.length))
r>=93&&r--,r>=35&&r--,r-=32
let o=null
if(r in this.keys_){const t=this.keys_[r]
o=this.data_&&t in this.data_?this.data_[t]:t}return o}forDataAtCoordinate(t,e,i){this.state==c.A.EMPTY&&!0===i?(this.state=c.A.IDLE,(0,qi.Jz)(this,o.A.CHANGE,(function(i){e(this.getData(t))}),this),this.loadInternal_()):!0===i?setTimeout((()=>{e(this.getData(t))}),0):e(this.getData(t))}getKey(){return this.src_}handleError_(){this.state=c.A.ERROR,this.changed()}handleLoad_(t){this.grid_=t.grid,this.keys_=t.keys,this.data_=t.data,this.state=c.A.LOADED,this.changed()}loadInternal_(){if(this.state==c.A.IDLE)if(this.state=c.A.LOADING,this.jsonp_)mn(this.src_,this.handleLoad_.bind(this),this.handleError_.bind(this))
else{const t=new XMLHttpRequest
t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",this.src_),t.send()}}onXHRLoad_(t){const e=t.target
if(!e.status||e.status>=200&&e.status<300){let i
try{i=JSON.parse(e.responseText)}catch(t){return void this.handleError_()}this.handleLoad_(i)}else this.handleError_()}onXHRError_(t){this.handleError_()}load(){this.preemptive_?this.loadInternal_():this.setState(c.A.EMPTY)}}const ur=class extends D{constructor(t){if(super({projection:(0,v.Jt)("EPSG:3857"),state:"loading",wrapX:void 0===t.wrapX||t.wrapX,zDirection:t.zDirection}),this.preemptive_=void 0===t.preemptive||t.preemptive,this.tileUrlFunction_=z,this.template_=void 0,this.jsonp_=t.jsonp||!1,t.url)if(this.jsonp_)mn(t.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this))
else{const e=new XMLHttpRequest
e.addEventListener("load",this.onXHRLoad_.bind(this)),e.addEventListener("error",this.onXHRError_.bind(this)),e.open("GET",t.url),e.send()}else{if(!t.tileJSON)throw new Error("Either `url` or `tileJSON` options must be provided")
this.handleTileJSONResponse(t.tileJSON)}}onXHRLoad_(t){const e=t.target
if(!e.status||e.status>=200&&e.status<300){let i
try{i=JSON.parse(e.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(i)}else this.handleTileJSONError()}onXHRError_(t){this.handleTileJSONError()}getTemplate(){return this.template_}forDataAtCoordinateAndResolution(t,e,i,n){if(this.tileGrid){const r=this.tileGrid.getZForResolution(e,this.zDirection),o=this.tileGrid.getTileCoordForCoordAndZ(t,r)
this.getTile(o[0],o[1],o[2],1,this.getProjection()).forDataAtCoordinate(t,i,n)}else!0===n?setTimeout((function(){i(null)}),0):i(null)}handleTileJSONError(){this.setState("error")}handleTileJSONResponse(t){const e=(0,v.Jt)("EPSG:4326"),i=this.getProjection()
let n
if(void 0!==t.bounds){const o=(0,v.FO)(e,i)
n=(0,r.NW)(t.bounds,o)}const o=R(i),s=t.minzoom||0,a=M({extent:o,maxZoom:t.maxzoom||22,minZoom:s})
this.tileGrid=a,this.template_=t.template
const l=t.grids
if(l){if(this.tileUrlFunction_=F(l,a),t.attribution){const e=void 0!==n?n:o
this.setAttributions((function(i){return(0,r.HY)(e,i.extent)?[t.attribution]:null}))}this.setState("ready")}else this.setState("error")}getTile(t,e,i,n,r){const o=(0,l.dp)(t,e,i)
if(this.tileCache.containsKey(o))return this.tileCache.get(o)
const s=[t,e,i],a=this.getTileCoordForTileUrlFunction(s,r),h=this.tileUrlFunction_(a,n,r),u=new hr(s,void 0!==h?c.A.IDLE:c.A.EMPTY,void 0!==h?h:"",this.tileGrid.getTileCoordExtent(s),this.preemptive_,this.jsonp_)
return this.tileCache.set(o,u),u}useTile(t,e,i){const n=(0,l.dp)(t,e,i)
this.tileCache.containsKey(n)&&this.tileCache.get(n)}},cr=class extends q{constructor(t){const e=void 0!==t.requestEncoding?t.requestEncoding:"KVP",i=t.tileGrid
let n=t.urls
void 0===n&&void 0!==t.url&&(n=j(t.url)),super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:i,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,urls:n,wrapX:void 0!==t.wrapX&&t.wrapX,transition:t.transition,zDirection:t.zDirection}),this.version_=void 0!==t.version?t.version:"1.0.0",this.format_=void 0!==t.format?t.format:"image/jpeg",this.dimensions_=void 0!==t.dimensions?t.dimensions:{},this.layer_=t.layer,this.matrixSet_=t.matrixSet,this.style_=t.style,this.requestEncoding_=e,this.setKey(this.getKeyForDimensions_()),n&&n.length>0&&(this.tileUrlFunction=k(n.map(this.createFromWMTSTemplate.bind(this))))}setUrls(t){this.urls=t
const e=t.join("\n")
this.setTileUrlFunction(k(t.map(this.createFromWMTSTemplate.bind(this))),e)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){const t=this.urls?this.urls.slice(0):[]
for(const e in this.dimensions_)t.push(e+"-"+this.dimensions_[e])
return t.join("/")}updateDimensions(t){Object.assign(this.dimensions_,t),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(t){const e=this.requestEncoding_,i={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_}
"KVP"==e&&Object.assign(i,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),t="KVP"==e?Ji(t,i):t.replace(/\{(\w+?)\}/g,(function(t,e){return e.toLowerCase()in i?i[e.toLowerCase()]:t}))
const n=this.tileGrid,r=this.dimensions_
return function(i,o,s){if(!i)return
const a={TileMatrix:n.getMatrixId(i[0]),TileCol:i[1],TileRow:i[2]}
Object.assign(a,r)
let l=t
return l="KVP"==e?Ji(l,a):l.replace(/\{(\w+?)\}/g,(function(t,e){return a[e]})),l}}}
function dr(t,e){const i=new n.A(32),o=t.getExtent()
return function(n,s){i.expireCache(),o&&(n=(0,r._N)(o,n))
const a=t.getZForResolution(s),l=[]
return t.forEachTileCoord(n,a,(t=>{const n=t.toString()
if(!i.containsKey(n)){const r=e(t)
i.set(n,r)}l.push(i.get(n))})),l}}},4749:(t,e,i)=>{"use strict"
i.d(e,{A:()=>a})
var n=i(1051),r=i(3906)
class o extends n.A{constructor(t){super(),this.projection=(0,r.Jt)(t.projection),this.attributions_=s(t.attributions),this.attributionsCollapsible_=void 0===t.attributionsCollapsible||t.attributionsCollapsible,this.loading=!1,this.state_=void 0!==t.state?t.state:"ready",this.wrapX_=void 0!==t.wrapX&&t.wrapX,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null
const e=this
this.viewPromise_=new Promise((function(t,i){e.viewResolver=t,e.viewRejector=i}))}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=s(t),this.changed()}setState(t){this.state_=t,this.changed()}}function s(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}const a=o},9481:(t,e,i)=>{"use strict"
i.d(e,{A:()=>S})
var n=i(3844),r=i(1678),o=i(406),s=i(8638),a=i(7067),l=i(7179),h=i(3236),u=i(1736),c=i(7931)
const d=class{constructor(t){this.rbush_=new l(t),this.items_={}}insert(t,e){const i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e}
this.rbush_.insert(i),this.items_[(0,u.v6)(e)]=i}load(t,e){const i=new Array(e.length)
for(let n=0,r=e.length;n<r;n++){const r=t[n],o=e[n],s={minX:r[0],minY:r[1],maxX:r[2],maxY:r[3],value:o}
i[n]=s,this.items_[(0,u.v6)(o)]=s}this.rbush_.load(i)}remove(t){const e=(0,u.v6)(t),i=this.items_[e]
return delete this.items_[e],null!==this.rbush_.remove(i)}update(t,e){const i=this.items_[(0,u.v6)(e)],n=[i.minX,i.minY,i.maxX,i.maxY];(0,h.aI)(n,t)||(this.remove(e),this.insert(t,e))}getAll(){return this.rbush_.all().map((function(t){return t.value}))}getInExtent(t){const e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]}
return this.rbush_.search(e).map((function(t){return t.value}))}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,e){return this.forEach_(this.getInExtent(t),e)}forEach_(t,e){let i
for(let n=0,r=t.length;n<r;n++)if(i=e(t[n]),i)return i
return i}isEmpty(){return(0,c.p)(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const e=this.rbush_.toJSON()
return(0,h.N)(e.minX,e.minY,e.maxX,e.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all())
for(const e in t.items_)this.items_[e]=t.items_[e]}}
var f=i(9621),p=i(4749),g=i(8027),_=i(419)
function m(t,e){return[[-1/0,-1/0,1/0,1/0]]}i(3906)
var y=i(6249),v=i(7195),x=i(4757),b=i(6831)
class w extends o.Ay{constructor(t,e,i){super(t),this.feature=e,this.features=i}}class E extends p.A{constructor(t){super({attributions:(t=t||{}).attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===t.wrapX||t.wrapX}),this.on,this.once,this.un,this.loader_=_.tV,this.format_=t.format,this.overlaps_=void 0===t.overlaps||t.overlaps,this.url_=t.url,void 0!==t.loader?this.loader_=t.loader:void 0!==this.url_&&((0,y.v)(this.format_,"`format` must be set when `url` is set"),this.loader_=(0,b.nF)(this.url_,this.format_)),this.strategy_=void 0!==t.strategy?t.strategy:m
const e=void 0===t.useSpatialIndex||t.useSpatialIndex
let i,r
this.featuresRtree_=e?new d:null,this.loadedExtentsRtree_=new d,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(t.features)?r=t.features:t.features&&(i=t.features,r=i.getArray()),e||void 0!==i||(i=new n.A(r)),void 0!==r&&this.addFeaturesInternal(r),void 0!==i&&this.bindFeaturesCollection_(i)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){const e=(0,u.v6)(t)
if(!this.addToIndex_(e,t))return void(this.featuresCollection_&&this.featuresCollection_.remove(t))
this.setupChangeEvents_(e,t)
const i=t.getGeometry()
if(i){const e=i.getExtent()
this.featuresRtree_&&this.featuresRtree_.insert(e,t)}else this.nullGeometryFeatures_[e]=t
this.dispatchEvent(new w(g.A.ADDFEATURE,t))}setupChangeEvents_(t,e){e instanceof f.Ay||(this.featureChangeKeys_[t]=[(0,x.KT)(e,s.A.CHANGE,this.handleFeatureChange_,this),(0,x.KT)(e,a.A.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(t,e){let i=!0
if(void 0!==e.getId()){const t=String(e.getId())
if(t in this.idIndex_)if(e instanceof f.Ay){const n=this.idIndex_[t]
n instanceof f.Ay?Array.isArray(n)?n.push(e):this.idIndex_[t]=[n,e]:i=!1}else i=!1
else this.idIndex_[t]=e}return i&&((0,y.v)(!(t in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[t]=e),i}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){const e=[],i=[],n=[]
for(let r=0,o=t.length;r<o;r++){const e=t[r],n=(0,u.v6)(e)
this.addToIndex_(n,e)&&i.push(e)}for(let r=0,o=i.length;r<o;r++){const t=i[r],o=(0,u.v6)(t)
this.setupChangeEvents_(o,t)
const s=t.getGeometry()
if(s){const i=s.getExtent()
e.push(i),n.push(t)}else this.nullGeometryFeatures_[o]=t}if(this.featuresRtree_&&this.featuresRtree_.load(e,n),this.hasListener(g.A.ADDFEATURE))for(let r=0,o=i.length;r<o;r++)this.dispatchEvent(new w(g.A.ADDFEATURE,i[r]))}bindFeaturesCollection_(t){let e=!1
this.addEventListener(g.A.ADDFEATURE,(function(i){e||(e=!0,t.push(i.feature),e=!1)})),this.addEventListener(g.A.REMOVEFEATURE,(function(i){e||(e=!0,t.remove(i.feature),e=!1)})),t.addEventListener(r.A.ADD,(t=>{e||(e=!0,this.addFeature(t.element),e=!1)})),t.addEventListener(r.A.REMOVE,(t=>{e||(e=!0,this.removeFeature(t.element),e=!1)})),this.featuresCollection_=t}clear(t){if(t){for(const t in this.featureChangeKeys_)this.featureChangeKeys_[t].forEach(x.JH)
this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const t=t=>{this.removeFeatureInternal(t)}
this.featuresRtree_.forEach(t)
for(const e in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[e])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={}
const e=new w(g.A.CLEAR)
this.dispatchEvent(e),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t)
this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,e){const i=[t[0],t[1],t[0],t[1]]
return this.forEachFeatureInExtent(i,(function(i){const n=i.getGeometry()
if(n instanceof f.Ay||n.intersectsCoordinate(t))return e(i)}))}forEachFeatureInExtent(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e)
this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureIntersectingExtent(t,e){return this.forEachFeatureInExtent(t,(function(i){const n=i.getGeometry()
if(n instanceof f.Ay||n.intersectsExtent(t)){const t=e(i)
if(t)return t}}))}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t
return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),(0,c.p)(this.nullGeometryFeatures_)||(0,v.X$)(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){const e=[]
return this.forEachFeatureAtCoordinateDirect(t,(function(t){e.push(t)})),e}getFeaturesInExtent(t,e){if(this.featuresRtree_){if(!(e&&e.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t)
const i=(0,h.QJ)(t,e)
return[].concat(...i.map((t=>this.featuresRtree_.getInExtent(t))))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,e){const i=t[0],n=t[1]
let r=null
const o=[NaN,NaN]
let s=1/0
const a=[-1/0,-1/0,1/0,1/0]
return e=e||_.rT,this.featuresRtree_.forEachInExtent(a,(function(t){if(e(t)){const e=t.getGeometry(),l=s
if(s=e instanceof f.Ay?0:e.closestPointXY(i,n,o,s),s<l){r=t
const e=Math.sqrt(s)
a[0]=i-e,a[1]=n-e,a[2]=i+e,a[3]=n+e}}})),r}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){const e=this.idIndex_[t.toString()]
return void 0!==e?e:null}getFeatureByUid(t){const e=this.uidIndex_[t]
return void 0!==e?e:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const e=t.target,i=(0,u.v6)(e),n=e.getGeometry()
if(n){const t=n.getExtent()
i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(t,e)):this.featuresRtree_&&this.featuresRtree_.update(t,e)}else i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[i]=e)
const r=e.getId()
if(void 0!==r){const t=r.toString()
this.idIndex_[t]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[t]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[i]=e
this.changed(),this.dispatchEvent(new w(g.A.CHANGEFEATURE,e))}hasFeature(t){const e=t.getId()
return void 0!==e?e in this.idIndex_:(0,u.v6)(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&(0,c.p)(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}loadFeatures(t,e,i){const n=this.loadedExtentsRtree_,r=this.strategy_(t,e,i)
for(let o=0,s=r.length;o<s;++o){const t=r[o]
n.forEachInExtent(t,(function(e){return(0,h.ms)(e.extent,t)}))||(++this.loadingExtentsCount_,this.dispatchEvent(new w(g.A.FEATURESLOADSTART)),this.loader_.call(this,t,e,i,(t=>{--this.loadingExtentsCount_,this.dispatchEvent(new w(g.A.FEATURESLOADEND,void 0,t))}),(()=>{--this.loadingExtentsCount_,this.dispatchEvent(new w(g.A.FEATURESLOADERROR))})),n.insert(t,{extent:t.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){const e=this.loadedExtentsRtree_
let i
e.forEachInExtent(t,(function(e){if((0,h.aI)(e.extent,t))return i=e,!0})),i&&e.remove(i)}removeFeatures(t){const e=[]
for(let i=0,n=t.length;i<n;++i){const n=t[i],r=this.removeFeatureInternal(n)
r&&e.push(r)}e.length>0&&this.changed()}removeFeature(t){t&&this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){const e=(0,u.v6)(t)
e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t)
const i=this.featureChangeKeys_[e]
if(!i)return
i.forEach(x.JH),delete this.featureChangeKeys_[e]
const n=t.getId()
return void 0!==n&&delete this.idIndex_[n.toString()],delete this.uidIndex_[e],this.hasListener(g.A.REMOVEFEATURE)&&this.dispatchEvent(new w(g.A.REMOVEFEATURE,t)),t}removeFromIdIndex_(t){let e=!1
for(const i in this.idIndex_){const n=this.idIndex_[i]
if(t instanceof f.Ay&&Array.isArray(n)&&n.includes(t))n.splice(n.indexOf(t),1)
else if(this.idIndex_[i]===t){delete this.idIndex_[i],e=!0
break}}return e}setLoader(t){this.loader_=t}setUrl(t){(0,y.v)(this.format_,"`format` must be set when `url` is set"),this.url_=t,this.setLoader((0,b.nF)(t,this.format_))}}const S=E},8027:(t,e,i)=>{"use strict"
i.d(e,{A:()=>n})
const n={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"}},4549:(t,e,i)=>{"use strict"
function n(t,e,i){const n=void 0!==i?t.toFixed(i):""+t
let r=n.indexOf(".")
return r=-1===r?n.length:r,r>e?n:new Array(1+e-r).join("0")+n}function r(t,e){const i=(""+t).split("."),n=(""+e).split(".")
for(let r=0;r<Math.max(i.length,n.length);r++){const t=parseInt(i[r]||"0",10),e=parseInt(n[r]||"0",10)
if(t>e)return 1
if(e>t)return-1}return 0}i.d(e,{H:()=>n,Z:()=>r})},6838:(t,e,i)=>{"use strict"
i.d(e,{A:()=>r})
var n=i(6249)
const r=class{constructor(t){this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let e=this.oldest_
for(;e;)t(e.value_,e.key_,this),e=e.newer}get(t,e){const i=this.entries_[t]
return(0,n.v)(void 0!==i,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(t){const e=this.entries_[t]
return(0,n.v)(void 0!==e,"Tried to get a value for a key that does not exist in the cache"),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_}getCount(){return this.count_}getKeys(){const t=new Array(this.count_)
let e,i=0
for(e=this.newest_;e;e=e.older)t[i++]=e.key_
return t}getValues(){const t=new Array(this.count_)
let e,i=0
for(e=this.newest_;e;e=e.older)t[i++]=e.value_
return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){return this.entries_[t]?.value_}pop(){const t=this.oldest_
return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,e){this.get(t),this.entries_[t].value_=e}set(t,e){(0,n.v)(!(t in this.entries_),"Tried to set a value for a key that is used already")
const i={key_:t,newer:null,older:this.newest_,value_:e}
this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[t]=i,++this.count_}setSize(t){this.highWaterMark=t}}},5151:(t,e,i)=>{"use strict"
i.r(e),i.d(e,{Circle:()=>n.A,Fill:()=>r.A,Icon:()=>o.A,IconImage:()=>s.A,Image:()=>a.A,RegularShape:()=>l.A,Stroke:()=>h.A,Style:()=>u.Ay,Text:()=>c.A})
var n=i(6602),r=i(8343),o=i(2375),s=i(9398),a=i(2933),l=i(3247),h=i(7110),u=i(5337),c=i(9769)},6602:(t,e,i)=>{"use strict"
i.d(e,{A:()=>o})
var n=i(3247)
class r extends n.A{constructor(t){super({points:1/0,fill:(t=t||{radius:5}).fill,radius:t.radius,stroke:t.stroke,scale:void 0!==t.scale?t.scale:1,rotation:void 0!==t.rotation?t.rotation:0,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),e=new r({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})
return e.setOpacity(this.getOpacity()),e}setRadius(t){this.radius_=t,this.render()}}const o=r},8343:(t,e,i)=>{"use strict"
i.d(e,{A:()=>s})
var n=i(1410),r=i(9398)
class o{constructor(t){t=t||{},this.patternImage_=null,this.color_=null,void 0!==t.color&&this.setColor(t.color)}clone(){const t=this.getColor()
return new o({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){if(null!==t&&"object"==typeof t&&"src"in t){const e=(0,r.J)(null,t.src,"anonymous",void 0,t.offset?null:t.color?t.color:null,!(t.offset&&t.size))
e.ready().then((()=>{this.patternImage_=null})),e.getImageState()===n.A.IDLE&&e.load(),e.getImageState()===n.A.LOADING&&(this.patternImage_=e)}this.color_=t}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}const s=o},2375:(t,e,i)=>{"use strict"
i.d(e,{A:()=>d})
var n=i(8638),r=i(1410),o=i(2933),s=i(659),a=i(6249),l=i(9398),h=i(1736)
function u(t,e,i,n){return void 0!==i&&void 0!==n?[i/t,n/e]:void 0!==i?i/t:void 0!==n?n/e:1}class c extends o.A{constructor(t){const e=void 0!==(t=t||{}).opacity?t.opacity:1,i=void 0!==t.rotation?t.rotation:0,n=void 0!==t.scale?t.scale:1,o=void 0!==t.rotateWithView&&t.rotateWithView
super({opacity:e,rotation:i,scale:n,displacement:void 0!==t.displacement?t.displacement:[0,0],rotateWithView:o,declutterMode:t.declutterMode}),this.anchor_=void 0!==t.anchor?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==t.anchorOrigin?t.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==t.anchorXUnits?t.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==t.anchorYUnits?t.anchorYUnits:"fraction",this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null
const c=void 0!==t.img?t.img:null
let d,f=t.src
if((0,a.v)(!(void 0!==f&&c),"`image` and `src` cannot be provided at the same time"),void 0!==f&&0!==f.length||!c||(f=c.src||(0,h.v6)(c)),(0,a.v)(void 0!==f&&f.length>0,"A defined and non-empty `src` or `image` must be provided"),(0,a.v)(!((void 0!==t.width||void 0!==t.height)&&void 0!==t.scale),"`width` or `height` cannot be provided together with `scale`"),void 0!==t.src?d=r.A.IDLE:void 0!==c&&(d=c instanceof HTMLImageElement?c.complete?c.src?r.A.LOADED:r.A.IDLE:r.A.LOADING:r.A.LOADED),this.color_=void 0!==t.color?(0,s._j)(t.color):null,this.iconImage_=(0,l.J)(c,f,this.crossOrigin_,d,this.color_),this.offset_=void 0!==t.offset?t.offset:[0,0],this.offsetOrigin_=void 0!==t.offsetOrigin?t.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==t.size?t.size:null,void 0!==t.width||void 0!==t.height){let e,i
if(t.size)[e,i]=t.size
else{const n=this.getImage(1)
if(n.width&&n.height)e=n.width,i=n.height
else if(n instanceof HTMLImageElement){this.initialOptions_=t
const e=()=>{if(this.unlistenImageChange(e),!this.initialOptions_)return
const i=this.iconImage_.getSize()
this.setScale(u(i[0],i[1],t.width,t.height))}
return void this.listenImageChange(e)}}void 0!==e&&this.setScale(u(e,i,t.width,t.height))}}clone(){let t,e,i
return this.initialOptions_?(e=this.initialOptions_.width,i=this.initialOptions_.height):(t=this.getScale(),t=Array.isArray(t)?t.slice():t),new c({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:e,height:i,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_
if(!t){t=this.anchor_
const e=this.getSize()
if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!e)return null
t=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(t[0]*=e[0]),"fraction"==this.anchorYUnits_&&(t[1]*=e[1])}if("top-left"!=this.anchorOrigin_){if(!e)return null
t===this.anchor_&&(t=this.anchor_.slice()),"top-right"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[0]=-t[0]+e[0]),"bottom-left"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[1]=-t[1]+e[1])}this.normalizedAnchor_=t}const e=this.getDisplacement(),i=this.getScaleArray()
return[t[0]-e[0]/i[0],t[1]+e[1]/i[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_
let t=this.offset_
if("top-left"!=this.offsetOrigin_){const e=this.getSize(),i=this.iconImage_.getSize()
if(!e||!i)return null
t=t.slice(),"top-right"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[0]=i[0]-e[0]-t[0]),"bottom-left"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[1]=i[1]-e[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const t=this.getScaleArray()
return this.size_?this.size_[0]*t[0]:this.iconImage_.getImageState()==r.A.LOADED?this.iconImage_.getSize()[0]*t[0]:void 0}getHeight(){const t=this.getScaleArray()
return this.size_?this.size_[1]*t[1]:this.iconImage_.getImageState()==r.A.LOADED?this.iconImage_.getSize()[1]*t[1]:void 0}setScale(t){delete this.initialOptions_,super.setScale(t)}listenImageChange(t){this.iconImage_.addEventListener(n.A.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(n.A.CHANGE,t)}ready(){return this.iconImage_.ready()}}const d=c},9398:(t,e,i)=>{"use strict"
i.d(e,{A:()=>f,J:()=>d})
var n=i(669),r=i(8638),o=i(1410),s=i(659),a=i(8454),l=i(5643),h=i(8166)
let u=null
class c extends n.A{constructor(t,e,i,n,r){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=i,this.canvas_={},this.color_=r,this.imageState_=void 0===n?o.A.IDLE:n,this.size_=t&&t.width&&t.height?[t.width,t.height]:null,this.src_=e,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&this.imageState_===o.A.LOADED){u||(u=(0,a.Y)(1,1,void 0,{willReadFrequently:!0})),u.drawImage(this.image_,0,0)
try{u.getImageData(0,0,1,1),this.tainted_=!1}catch(t){u=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent(r.A.CHANGE)}handleImageError_(){this.imageState_=o.A.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=o.A.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],e=this.size_[1],i=(0,a.Y)(t,e)
i.fillRect(0,0,t,e),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_
return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===o.A.IDLE){this.image_||this.initializeImage_(),this.imageState_=o.A.LOADING
try{void 0!==this.src_&&(this.image_.src=this.src_)}catch(t){this.handleImageError_()}this.image_ instanceof HTMLImageElement&&(0,l.RA)(this.image_,this.src_).then((t=>{this.image_=t,this.handleImageLoad_()})).catch(this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==o.A.LOADED)return
const e=this.image_,i=document.createElement("canvas")
i.width=Math.ceil(e.width*t),i.height=Math.ceil(e.height*t)
const n=i.getContext("2d")
n.scale(t,t),n.drawImage(e,0,0),n.globalCompositeOperation="multiply",n.fillStyle=(0,s.oJ)(this.color_),n.fillRect(0,0,i.width/t,i.height/t),n.globalCompositeOperation="destination-in",n.drawImage(e,0,0),this.canvas_[t]=i}ready(){return this.ready_||(this.ready_=new Promise((t=>{this.imageState_===o.A.LOADED||this.imageState_===o.A.ERROR?t():this.addEventListener(r.A.CHANGE,(function e(){this.imageState_!==o.A.LOADED&&this.imageState_!==o.A.ERROR||(this.removeEventListener(r.A.CHANGE,e),t())}))}))),this.ready_}}function d(t,e,i,n,r,o){let s=void 0===e?void 0:h.ue.get(e,i,r)
return s||(s=new c(t,t instanceof HTMLImageElement?t.src||void 0:e,i,n,r),h.ue.set(e,i,r,s,o)),o&&s&&!h.ue.getPattern(e,i,r)&&h.ue.set(e,i,r,s,o),s}const f=c},8166:(t,e,i)=>{"use strict"
i.d(e,{ue:()=>a})
var n=i(1410),r=i(659),o=i(8454)
function s(t,e,i){return e+":"+t+":"+(i?(0,r._j)(i):"null")}const a=new class{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0
for(const e in this.cache_){const i=this.cache_[e]
3&t++||i.hasListener()||(delete this.cache_[e],delete this.patternCache_[e],--this.cacheSize_)}}}get(t,e,i){const n=s(t,e,i)
return n in this.cache_?this.cache_[n]:null}getPattern(t,e,i){const n=s(t,e,i)
return n in this.patternCache_?this.patternCache_[n]:null}set(t,e,i,r,a){const l=s(t,e,i),h=l in this.cache_
this.cache_[l]=r,a&&(r.getImageState()===n.A.IDLE&&r.load(),r.getImageState()===n.A.LOADING?r.ready().then((()=>{this.patternCache_[l]=(0,o.lr)().createPattern(r.getImage(1),"repeat")})):this.patternCache_[l]=(0,o.lr)().createPattern(r.getImage(1),"repeat")),h||++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}}},2933:(t,e,i)=>{"use strict"
i.d(e,{A:()=>s})
var n=i(1736),r=i(1673)
class o{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=(0,r.xq)(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale()
return new o({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return(0,n.b0)()}getImage(t){return(0,n.b0)()}getHitDetectionImage(){return(0,n.b0)()}getPixelRatio(t){return 1}getImageState(){return(0,n.b0)()}getImageSize(){return(0,n.b0)()}getOrigin(){return(0,n.b0)()}getSize(){return(0,n.b0)()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=(0,r.xq)(t)}listenImageChange(t){(0,n.b0)()}load(){(0,n.b0)()}unlistenImageChange(t){(0,n.b0)()}ready(){return Promise.resolve()}}const s=o},3247:(t,e,i)=>{"use strict"
i.d(e,{A:()=>u})
var n=i(1410),r=i(2933),o=i(659),s=i(7382),a=i(8454),l=i(223)
class h extends r.A{constructor(t){super({opacity:1,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,rotation:void 0!==t.rotation?t.rotation:0,scale:void 0!==t.scale?t.scale:1,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode}),this.canvases_,this.hitDetectionCanvas_=null,this.fill_=void 0!==t.fill?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius_=t.radius,this.radius2_=t.radius2,this.angle_=void 0!==t.angle?t.angle:0,this.stroke_=void 0!==t.stroke?t.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?n.A.LOADING:n.A.LOADED,this.imageState_===n.A.LOADING&&this.ready().then((()=>this.imageState_=n.A.LOADED)),this.render()}clone(){const t=this.getScale(),e=new h({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})
return e.setOpacity(this.getOpacity()),e}getAnchor(){const t=this.size_,e=this.getDisplacement(),i=this.getScaleArray()
return[t[0]/2-e[0]/i[0],t[1]/2+e[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(t){let e=this.canvases_[t]
if(!e){const i=this.renderOptions_,n=(0,a.Y)(i.size*t,i.size*t)
this.draw_(i,n,t),e=n.canvas,this.canvases_[t]=e}return e}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,e,i){if(0===e||this.points_===1/0||"bevel"!==t&&"miter"!==t)return e
let n=this.radius_,r=void 0===this.radius2_?n:this.radius2_
if(n<r){const t=n
n=r,r=t}const o=void 0===this.radius2_?this.points_:2*this.points_,s=2*Math.PI/o,a=r*Math.sin(s),l=n-Math.sqrt(r*r-a*a),h=Math.sqrt(a*a+l*l),u=h/a
if("miter"===t&&u<=i)return u*e
const c=e/2/u,d=e/2*(l/h),f=Math.sqrt((n+c)*(n+c)+d*d)-n
if(void 0===this.radius2_||"bevel"===t)return 2*f
const p=n*Math.sin(s),g=r-Math.sqrt(n*n-p*p),_=Math.sqrt(p*p+g*g)/p
if(_<=i){const t=_*e/2-r-n
return 2*Math.max(f,t)}return 2*f}createRenderOptions(){let t,e=l._m,i=l._K,n=0,r=null,o=0,a=0
this.stroke_&&(t=(0,s.F)(this.stroke_.getColor()??l.NT),a=this.stroke_.getWidth()??l.aq,r=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset()??0,i=this.stroke_.getLineJoin()??l._K,e=this.stroke_.getLineCap()??l._m,n=this.stroke_.getMiterLimit()??l.eL)
const h=this.calculateLineJoinSize_(i,a,n),u=Math.max(this.radius_,this.radius2_||0)
return{strokeStyle:t,strokeWidth:a,size:Math.ceil(2*u+h),lineCap:e,lineDash:r,lineDashOffset:o,lineJoin:i,miterLimit:n}}render(){this.renderOptions_=this.createRenderOptions()
const t=this.renderOptions_.size
this.canvases_={},this.hitDetectionCanvas_=null,this.size_=[t,t]}draw_(t,e,i){if(e.scale(i,i),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){let t=this.fill_.getColor()
null===t&&(t=l.qY),e.fillStyle=(0,s.F)(t),e.fill()}t.strokeStyle&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}createHitDetectionCanvas_(t){let e
if(this.fill_){let i=this.fill_.getColor(),n=0
"string"==typeof i&&(i=(0,o._j)(i)),null===i?n=1:Array.isArray(i)&&(n=4===i.length?i[3]:1),0===n&&(e=(0,a.Y)(t.size,t.size),this.drawHitDetectionCanvas_(t,e))}return e?e.canvas:this.getImage(1)}createPath_(t){let e=this.points_
const i=this.radius_
if(e===1/0)t.arc(0,0,i,0,2*Math.PI)
else{const n=void 0===this.radius2_?i:this.radius2_
void 0!==this.radius2_&&(e*=2)
const r=this.angle_-Math.PI/2,o=2*Math.PI/e
for(let s=0;s<e;s++){const e=r+s*o,a=s%2==0?i:n
t.lineTo(a*Math.cos(e),a*Math.sin(e))}t.closePath()}}drawHitDetectionCanvas_(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=l.qY,e.fill(),t.strokeStyle&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}const u=h},7110:(t,e,i)=>{"use strict"
i.d(e,{A:()=>r})
class n{constructor(t){t=t||{},this.color_=void 0!==t.color?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=void 0!==t.lineDash?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor()
return new n({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}const r=n},5337:(t,e,i)=>{"use strict"
i.d(e,{Ay:()=>d,d1:()=>u,mC:()=>l})
var n=i(6602),r=i(8343),o=i(7110),s=i(6249)
class a{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=c,void 0!==t.geometry&&this.setGeometry(t.geometry),this.fill_=void 0!==t.fill?t.fill:null,this.image_=void 0!==t.image?t.image:null,this.renderer_=void 0!==t.renderer?t.renderer:null,this.hitDetectionRenderer_=void 0!==t.hitDetectionRenderer?t.hitDetectionRenderer:null,this.stroke_=void 0!==t.stroke?t.stroke:null,this.text_=void 0!==t.text?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry()
return t&&"object"==typeof t&&(t=t.clone()),new a({geometry:t??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=c,this.geometry_=t}setZIndex(t){this.zIndex_=t}}function l(t){let e
if("function"==typeof t)e=t
else{let i
Array.isArray(t)?i=t:((0,s.v)("function"==typeof t.getZIndex,"Expected an `Style` or an array of `Style`"),i=[t]),e=function(){return i}}return e}let h=null
function u(t,e){if(!h){const t=new r.A({color:"rgba(255,255,255,0.4)"}),e=new o.A({color:"#3399CC",width:1.25})
h=[new a({image:new n.A({fill:t,stroke:e,radius:5}),fill:t,stroke:e})]}return h}function c(t){return t.getGeometry()}const d=a},9769:(t,e,i)=>{"use strict"
i.d(e,{A:()=>s})
var n=i(8343),r=i(1673)
class o{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.scaleArray_=(0,r.xq)(void 0!==t.scale?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.repeat_=t.repeat,this.textBaseline_=t.textBaseline,this.fill_=void 0!==t.fill?t.fill:new n.A({color:"#333"}),this.maxAngle_=void 0!==t.maxAngle?t.maxAngle:Math.PI/4,this.placement_=void 0!==t.placement?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=void 0!==t.stroke?t.stroke:null,this.offsetX_=void 0!==t.offsetX?t.offsetX:0,this.offsetY_=void 0!==t.offsetY?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=void 0===t.padding?null:t.padding,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale()
return new o({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRepeat(t){this.repeat_=t}setRotateWithView(t){this.rotateWithView_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=(0,r.xq)(void 0!==t?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}}const s=o},2695:(t,e,i)=>{"use strict"
function n(t,e,i,n){return void 0!==n?(n[0]=t,n[1]=e,n[2]=i,n):[t,e,i]}function r(t,e,i){return t+"/"+e+"/"+i}function o(t){return r(t[0],t[1],t[2])}function s(t){const[e,i,n]=t.substring(t.lastIndexOf("/")+1,t.length).split(",").map(Number)
return r(e,i,n)}function a(t){return t.split("/").map(Number)}function l(t){return(t[1]<<t[0])+t[2]}function h(t,e){const i=t[0],n=t[1],r=t[2]
if(e.getMinZoom()>i||i>e.getMaxZoom())return!1
const o=e.getFullTileRange(i)
return!o||o.containsXY(n,r)}i.d(e,{K:()=>a,N:()=>n,N5:()=>h,dp:()=>r,gr:()=>s,i7:()=>o,tW:()=>l})},9506:(t,e,i)=>{"use strict"
i.d(e,{L:()=>n,R:()=>r})
const n=42,r=256},2282:(t,e,i)=>{"use strict"
i.d(e,{Bb:()=>u,T9:()=>g,Tl:()=>f,Zz:()=>p,cL:()=>s,dI:()=>m,e$:()=>c,hs:()=>d,k3:()=>h,lw:()=>a,vt:()=>o})
var n=i(6249)
const r=new Array(6)
function o(){return[1,0,0,1,0,0]}function s(t){return l(t,1,0,0,1,0,0)}function a(t,e){const i=t[0],n=t[1],r=t[2],o=t[3],s=t[4],a=t[5],l=e[0],h=e[1],u=e[2],c=e[3],d=e[4],f=e[5]
return t[0]=i*l+r*h,t[1]=n*l+o*h,t[2]=i*u+r*c,t[3]=n*u+o*c,t[4]=i*d+r*f+s,t[5]=n*d+o*f+a,t}function l(t,e,i,n,r,o,s){return t[0]=e,t[1]=i,t[2]=n,t[3]=r,t[4]=o,t[5]=s,t}function h(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function u(t,e){const i=e[0],n=e[1]
return e[0]=t[0]*i+t[2]*n+t[4],e[1]=t[1]*i+t[3]*n+t[5],e}function c(t,e){const i=Math.cos(e),n=Math.sin(e)
return a(t,l(r,i,n,-n,i,0,0))}function d(t,e,i){return a(t,l(r,e,0,0,i,0,0))}function f(t,e,i){return a(t,l(r,1,0,0,1,e,i))}function p(t,e,i,n,r,o,s,a){const l=Math.sin(o),h=Math.cos(o)
return t[0]=n*h,t[1]=r*l,t[2]=-n*l,t[3]=r*h,t[4]=s*n*h-a*n*l+e,t[5]=s*r*l+a*r*h+i,t}function g(t,e){const i=(r=e)[0]*r[3]-r[1]*r[2]
var r;(0,n.v)(0!==i,"Transformation matrix cannot be inverted")
const o=e[0],s=e[1],a=e[2],l=e[3],h=e[4],u=e[5]
return t[0]=l/i,t[1]=-s/i,t[2]=-a/i,t[3]=o/i,t[4]=(a*u-l*h)/i,t[5]=-(o*u-s*h)/i,t}const _=[1e6,1e6,1e6,1e6,2,2]
function m(t){return"matrix("+t.map(((t,e)=>Math.round(t*_[e])/_[e])).join(", ")+")"}},1736:(t,e,i)=>{"use strict"
function n(){throw new Error("Unimplemented abstract method.")}i.d(e,{b0:()=>n,v6:()=>o})
let r=0
function o(t){return t.ol_uid||(t.ol_uid=String(++r))}}}])
