/*! For license information please see chunk.498.5f5451fc54f5a8ad2eee.js.LICENSE.txt */
(globalThis.webpackChunk_ember_auto_import_=globalThis.webpackChunk_ember_auto_import_||[]).push([[498],{747:function(t,e,n){"use strict"
var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=i(n(2045)),o=i(n(2165)),s=i(n(3703)),a=n(6303),l=n(2317)
e.default=function(t,e,n){void 0===n&&(n={})
for(var i=l.getGeom(t).coordinates,u=0,h=0;h<i.length&&!(e>=u&&h===i.length-1);h++){if(u>=e){var c=e-u
if(c){var f=r.default(i[h],i[h-1])-180
return o.default(i[h],c,f,n)}return a.point(i[h])}u+=s.default(i[h],i[h+1],n)}return a.point(i[i.length-1])}},1699:function(t,e,n){"use strict"
var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=i(n(2045)),o=n(6303),s=i(n(8975))
e.default=function(t,e,n,i){if(void 0===i&&(i={}),!o.isObject(i))throw new Error("options is invalid")
if(!t)throw new Error("startPoint is required")
if(!e)throw new Error("midPoint is required")
if(!n)throw new Error("endPoint is required")
var a=t,l=e,u=n,h=o.bearingToAzimuth(!0!==i.mercator?r.default(a,l):s.default(a,l)),c=o.bearingToAzimuth(!0!==i.mercator?r.default(u,l):s.default(u,l)),f=Math.abs(h-c)
return!0===i.explementary?360-f:f}},587:(t,e,n)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var i=n(9611),r=6378137
function o(t){var e=0
if(t&&t.length>0){e+=Math.abs(s(t[0]))
for(var n=1;n<t.length;n++)e-=Math.abs(s(t[n]))}return e}function s(t){var e,n,i,o,s,l,u=0,h=t.length
if(h>2){for(l=0;l<h;l++)l===h-2?(i=h-2,o=h-1,s=0):l===h-1?(i=h-1,o=0,s=1):(i=l,o=l+1,s=l+2),e=t[i],n=t[o],u+=(a(t[s][0])-a(e[0]))*Math.sin(a(n[1]))
u=u*r*r/2}return u}function a(t){return t*Math.PI/180}e.default=function(t){return i.geomReduce(t,(function(t,e){return t+function(t){var e,n=0
switch(t.type){case"Polygon":return o(t.coordinates)
case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)n+=o(t.coordinates[e])
return n
case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(e)}),0)}},2733:(t,e,n)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var i=n(6303),r=n(2317),o=n(8805)
function s(t,e){for(var n=[],i=0,r=t;i<r.length;i++){var s=r[i],a=o.polygonclip(s,e)
a.length>0&&(a[0][0]===a[a.length-1][0]&&a[0][1]===a[a.length-1][1]||a.push(a[0]),a.length>=4&&n.push(a))}return n}e.default=function(t,e){var n=r.getGeom(t),a=n.type,l="Feature"===t.type?t.properties:{},u=n.coordinates
switch(a){case"LineString":case"MultiLineString":var h=[]
return"LineString"===a&&(u=[u]),u.forEach((function(t){o.lineclip(t,e,h)})),1===h.length?i.lineString(h[0],l):i.multiLineString(h,l)
case"Polygon":return i.polygon(s(u,e),l)
case"MultiPolygon":return i.multiPolygon(u.map((function(t){return s(t,e)})),l)
default:throw new Error("geometry "+a+" not supported")}}},8805:(t,e)=>{"use strict"
function n(t,e,n,i){return 8&n?[t[0]+(e[0]-t[0])*(i[3]-t[1])/(e[1]-t[1]),i[3]]:4&n?[t[0]+(e[0]-t[0])*(i[1]-t[1])/(e[1]-t[1]),i[1]]:2&n?[i[2],t[1]+(e[1]-t[1])*(i[2]-t[0])/(e[0]-t[0])]:1&n?[i[0],t[1]+(e[1]-t[1])*(i[0]-t[0])/(e[0]-t[0])]:null}function i(t,e){var n=0
return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}Object.defineProperty(e,"__esModule",{value:!0}),e.lineclip=function(t,e,r){var o,s,a,l,u,h=t.length,c=i(t[0],e),f=[]
for(r||(r=[]),o=1;o<h;o++){for(l=t[o-1],s=a=i(u=t[o],e);;){if(!(c|s)){f.push(l),s!==a?(f.push(u),o<h-1&&(r.push(f),f=[])):o===h-1&&f.push(u)
break}if(c&s)break
c?c=i(l=n(l,u,c,e),e):s=i(u=n(l,u,s,e),e)}c=a}return f.length&&r.push(f),r},e.polygonclip=function(t,e){var r,o,s,a,l,u,h
for(o=1;o<=8;o*=2){for(r=[],a=!(i(s=t[t.length-1],e)&o),l=0;l<t.length;l++)(h=!(i(u=t[l],e)&o))!==a&&r.push(n(s,u,o,e)),h&&r.push(u),s=u,a=h
if(!(t=r).length)break}return r}},3779:(t,e,n)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var i=n(6303)
e.default=function(t,e){void 0===e&&(e={})
var n=Number(t[0]),r=Number(t[1]),o=Number(t[2]),s=Number(t[3])
if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions")
var a=[n,r],l=[n,s],u=[o,s],h=[o,r]
return i.polygon([[a,h,u,l,a]],e.properties,{bbox:t,id:e.id})}},463:(t,e,n)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var i=n(9611)
function r(t){var e=[1/0,1/0,-1/0,-1/0]
return i.coordEach(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}r.default=r,e.default=r},2045:(t,e,n)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var i=n(6303),r=n(2317)
e.default=function t(e,n,o){if(void 0===o&&(o={}),!0===o.final)return function(e,n){return(t(n,e)+180)%360}(e,n)
var s=r.getCoord(e),a=r.getCoord(n),l=i.degreesToRadians(s[0]),u=i.degreesToRadians(a[0]),h=i.degreesToRadians(s[1]),c=i.degreesToRadians(a[1]),f=Math.sin(u-l)*Math.cos(c),p=Math.cos(h)*Math.sin(c)-Math.sin(h)*Math.cos(c)*Math.cos(u-l)
return i.radiansToDegrees(Math.atan2(f,p))}},6571:function(t,e,n){"use strict"
var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=n(6303),o=n(2317),s=i(n(2746))
e.default=function(t,e){void 0===e&&(e={})
for(var n=e.resolution||1e4,i=e.sharpness||.85,a=[],l=o.getGeom(t).coordinates.map((function(t){return{x:t[0],y:t[1]}})),u=new s.default({duration:n,points:l,sharpness:i}),h=function(t){var e=u.pos(t)
Math.floor(t/100)%2==0&&a.push([e.x,e.y])},c=0;c<u.duration;c+=10)h(c)
return h(u.duration),r.lineString(a,e.properties)}},2746:(t,e)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var n=function(){function t(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0
for(var e=0;e<this.length;e++)this.points[e].z=this.points[e].z||0
for(e=0;e<this.length-1;e++){var n=this.points[e],i=this.points[e+1]
this.centers.push({x:(n.x+i.x)/2,y:(n.y+i.y)/2,z:(n.z+i.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),e=0;e<this.centers.length-1;e++){var r=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,o=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,s=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2
this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+r),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+s)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+r),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+s)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}return t.prototype.cacheSteps=function(t){var e=[],n=this.pos(0)
e.push(0)
for(var i=0;i<this.duration;i+=10){var r=this.pos(i)
Math.sqrt((r.x-n.x)*(r.x-n.x)+(r.y-n.y)*(r.y-n.y)+(r.z-n.z)*(r.z-n.z))>t&&(e.push(i),n=r)}return e},t.prototype.vector=function(t){var e=this.pos(t+10),n=this.pos(t-10)
return{angle:180*Math.atan2(e.y-n.y,e.x-n.x)/3.14,speed:Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)+(n.z-e.z)*(n.z-e.z))}},t.prototype.pos=function(t){var e=t-this.delay
e<0&&(e=0),e>this.duration&&(e=this.duration-1)
var n=e/this.duration
if(n>=1)return this.points[this.length-1]
var i=Math.floor((this.points.length-1)*n)
return function(t,e,n,i,r){var o=function(t){var e=t*t
return[e*t,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]}(t)
return{x:r.x*o[0]+i.x*o[1]+n.x*o[2]+e.x*o[3],y:r.y*o[0]+i.y*o[1]+n.y*o[2]+e.y*o[3],z:r.z*o[0]+i.z*o[1]+n.z*o[2]+e.z*o[3]}}((this.length-1)*n-i,this.points[i],this.controls[i][1],this.controls[i+1][0],this.points[i+1])},t}()
e.default=n},8467:(t,e,n)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var i=n(2317)
e.default=function(t){for(var e,n,r=i.getCoords(t),o=0,s=1;s<r.length;)e=n||r[0],o+=((n=r[s])[0]-e[0])*(n[1]+e[1]),s++
return o>0}},4931:function(t,e,n){"use strict"
var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=i(n(463)),o=i(n(2015)),s=i(n(4537)),a=n(2317)
function l(t,e){var n,i=!1
for(n=0;n<t.coordinates.length;n++)if(_(t.coordinates[n],e.coordinates)){i=!0
break}return i}function u(t,e){for(var n=0,i=e.coordinates;n<i.length;n++){for(var r=i[n],o=!1,s=0,a=t.coordinates;s<a.length;s++)if(_(r,a[s])){o=!0
break}if(!o)return!1}return!0}function h(t,e){for(var n=!1,i=0,r=e.coordinates;i<r.length;i++){var o=r[i]
if(s.default(o,t,{ignoreEndVertices:!0})&&(n=!0),!s.default(o,t))return!1}return!!n}function c(t,e){for(var n=0,i=e.coordinates;n<i.length;n++){var r=i[n]
if(!o.default(r,t,{ignoreBoundary:!0}))return!1}return!0}function f(t,e){for(var n=!1,i=0,r=e.coordinates;i<r.length;i++){var o=r[i]
if(s.default({type:"Point",coordinates:o},t,{ignoreEndVertices:!0})&&(n=!0),!s.default({type:"Point",coordinates:o},t,{ignoreEndVertices:!1}))return!1}return n}function p(t,e){var n=!1,i=0
if(!g(r.default(t),r.default(e)))return!1
for(;i<e.coordinates.length-1;i++){var s=m(e.coordinates[i],e.coordinates[i+1])
if(o.default({type:"Point",coordinates:s},t,{ignoreBoundary:!0})){n=!0
break}}return n}function d(t,e){if("Feature"===t.type&&null===t.geometry)return!1
if("Feature"===e.type&&null===e.geometry)return!1
if(!g(r.default(t),r.default(e)))return!1
for(var n=0,i=a.getGeom(e).coordinates;n<i.length;n++)for(var s=0,l=i[n];s<l.length;s++){var u=l[s]
if(!o.default(u,t))return!1}return!0}function g(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function _(t,e){return t[0]===e[0]&&t[1]===e[1]}function m(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}e.default=function(t,e){var n=a.getGeom(t),i=a.getGeom(e),r=n.type,g=i.type,m=n.coordinates,y=i.coordinates
switch(r){case"Point":if("Point"===g)return _(m,y)
throw new Error("feature2 "+g+" geometry not supported")
case"MultiPoint":switch(g){case"Point":return l(n,i)
case"MultiPoint":return u(n,i)
default:throw new Error("feature2 "+g+" geometry not supported")}case"LineString":switch(g){case"Point":return s.default(i,n,{ignoreEndVertices:!0})
case"LineString":return f(n,i)
case"MultiPoint":return h(n,i)
default:throw new Error("feature2 "+g+" geometry not supported")}case"Polygon":switch(g){case"Point":return o.default(i,n,{ignoreBoundary:!0})
case"LineString":return p(n,i)
case"Polygon":return d(n,i)
case"MultiPoint":return c(n,i)
default:throw new Error("feature2 "+g+" geometry not supported")}default:throw new Error("feature1 "+r+" geometry not supported")}},e.isPointInMultiPoint=l,e.isMultiPointInMultiPoint=u,e.isMultiPointOnLine=h,e.isMultiPointInPoly=c,e.isLineOnLine=f,e.isLineInPoly=p,e.isPolyInPoly=d,e.doBBoxOverlap=g,e.compareCoords=_,e.getMidpoint=m},4303:function(t,e,n){"use strict"
var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=i(n(7315)),o=n(3799),s=i(n(2015)),a=n(2317),l=n(6303)
function u(t,e){for(var n=!1,i=!1,r=t.coordinates.length,o=0;o<r&&!n&&!i;){for(var s=0;s<e.coordinates.length-1;s++){var a=!0
0!==s&&s!==e.coordinates.length-2||(a=!1),f(e.coordinates[s],e.coordinates[s+1],t.coordinates[o],a)?n=!0:i=!0}o++}return n&&i}function h(t,e){var n=o.polygonToLine(e)
return r.default(t,n).features.length>0}function c(t,e){for(var n=!1,i=!1,r=t.coordinates.length,o=0;o<r&&(!n||!i);o++)s.default(l.point(t.coordinates[o]),e)?n=!0:i=!0
return i&&n}function f(t,e,n,i){var r=n[0]-t[0],o=n[1]-t[1],s=e[0]-t[0],a=e[1]-t[1]
return 0==r*a-o*s&&(i?Math.abs(s)>=Math.abs(a)?s>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:a>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1]:Math.abs(s)>=Math.abs(a)?s>0?t[0]<n[0]&&n[0]<e[0]:e[0]<n[0]&&n[0]<t[0]:a>0?t[1]<n[1]&&n[1]<e[1]:e[1]<n[1]&&n[1]<t[1])}e.default=function(t,e){var n=a.getGeom(t),i=a.getGeom(e),o=n.type,s=i.type
switch(o){case"MultiPoint":switch(s){case"LineString":return u(n,i)
case"Polygon":return c(n,i)
default:throw new Error("feature2 "+s+" geometry not supported")}case"LineString":switch(s){case"MultiPoint":return u(i,n)
case"LineString":return function(t,e){if(r.default(t,e).features.length>0)for(var n=0;n<t.coordinates.length-1;n++)for(var i=0;i<e.coordinates.length-1;i++){var o=!0
if(0!==i&&i!==e.coordinates.length-2||(o=!1),f(t.coordinates[n],t.coordinates[n+1],e.coordinates[i],o))return!0}return!1}(n,i)
case"Polygon":return h(n,i)
default:throw new Error("feature2 "+s+" geometry not supported")}case"Polygon":switch(s){case"MultiPoint":return c(i,n)
case"LineString":return h(i,n)
default:throw new Error("feature2 "+s+" geometry not supported")}default:throw new Error("feature1 "+o+" geometry not supported")}}},7899:function(t,e,n){"use strict"
var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=i(n(2015)),o=i(n(7315)),s=n(9611),a=i(n(3799))
function l(t,e){for(var n=0;n<t.coordinates.length-1;n++)if(h(t.coordinates[n],t.coordinates[n+1],e.coordinates))return!0
return!1}function u(t,e){for(var n=0,i=e.coordinates;n<i.length;n++){var s=i[n]
if(r.default(s,t))return!0}return o.default(e,a.default(t)).features.length>0}function h(t,e,n){var i=n[0]-t[0],r=n[1]-t[1],o=e[0]-t[0],s=e[1]-t[1]
return 0==i*s-r*o&&(Math.abs(o)>=Math.abs(s)?o>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:s>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1])}e.default=function(t,e){var n=!0
return s.flattenEach(t,(function(t){s.flattenEach(e,(function(e){if(!1===n)return!1
n=function(t,e){switch(t.type){case"Point":switch(e.type){case"Point":return s=t.coordinates,h=e.coordinates,!(s[0]===h[0]&&s[1]===h[1])
case"LineString":return!l(e,t)
case"Polygon":return!r.default(t,e)}break
case"LineString":switch(e.type){case"Point":return!l(t,e)
case"LineString":return n=t,i=e,!(o.default(n,i).features.length>0)
case"Polygon":return!u(e,t)}break
case"Polygon":switch(e.type){case"Point":return!r.default(e,t)
case"LineString":return!u(t,e)
case"Polygon":return!function(t,e){for(var n=0,i=t.coordinates[0];n<i.length;n++){var s=i[n]
if(r.default(s,e))return!0}for(var l=0,u=e.coordinates[0];l<u.length;l++){var h=u[l]
if(r.default(h,t))return!0}return o.default(a.default(t),a.default(e)).features.length>0}(e,t)}}var n,i,s,h
return!1}(t.geometry,e.geometry)}))})),n}},7567:function(t,e,n){"use strict"
var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=i(n(9362)),o=i(n(2707)),s=n(2317)
e.default=function(t,e){return s.getGeom(t).type===s.getGeom(e).type&&new r.default({precision:6}).compare(o.default(t),o.default(e))}},7323:function(t,e,n){"use strict"
var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=i(n(7899)),o=n(9611)
e.default=function(t,e){var n=!1
return o.flattenEach(t,(function(t){o.flattenEach(e,(function(e){if(!0===n)return!0
n=!r.default(t.geometry,e.geometry)}))})),n}},6669:function(t,e,n){"use strict"
var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=n(9611),o=n(2317),s=i(n(1055)),a=i(n(7315)),l=i(n(9362))
e.default=function(t,e){var n=o.getGeom(t),i=o.getGeom(e),u=n.type,h=i.type
if("MultiPoint"===u&&"MultiPoint"!==h||("LineString"===u||"MultiLineString"===u)&&"LineString"!==h&&"MultiLineString"!==h||("Polygon"===u||"MultiPolygon"===u)&&"Polygon"!==h&&"MultiPolygon"!==h)throw new Error("features must be of the same type")
if("Point"===u)throw new Error("Point geometry not supported")
if(new l.default({precision:6}).compare(t,e))return!1
var c=0
switch(u){case"MultiPoint":for(var f=0;f<n.coordinates.length;f++)for(var p=0;p<i.coordinates.length;p++){var d=n.coordinates[f],g=i.coordinates[p]
if(d[0]===g[0]&&d[1]===g[1])return!0}return!1
case"LineString":case"MultiLineString":r.segmentEach(t,(function(t){r.segmentEach(e,(function(e){s.default(t,e).features.length&&c++}))}))
break
case"Polygon":case"MultiPolygon":r.segmentEach(t,(function(t){r.segmentEach(e,(function(e){a.default(t,e).features.length&&c++}))}))}return c>0}},4003:function(t,e,n){"use strict"
var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=i(n(2707)),o=i(n(8735)),s=i(n(8975)),a=n(6303)
function l(t,e){return a.bearingToAzimuth(s.default(t[0],t[1]))===a.bearingToAzimuth(s.default(e[0],e[1]))}function u(t,e){if(t.geometry&&t.geometry.type)return t.geometry.type
if(t.type)return t.type
throw new Error("Invalid GeoJSON object for "+e)}e.default=function(t,e){if(!t)throw new Error("line1 is required")
if(!e)throw new Error("line2 is required")
if("LineString"!==u(t,"line1"))throw new Error("line1 must be a LineString")
if("LineString"!==u(e,"line2"))throw new Error("line2 must be a LineString")
for(var n=o.default(r.default(t)).features,i=o.default(r.default(e)).features,s=0;s<n.length;s++){var a=n[s].geometry.coordinates
if(!i[s])break
if(!l(a,i[s].geometry.coordinates))return!1}return!0}},2015:(t,e,n)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var i=n(2317)
function r(t,e,n){var i=!1
e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1))
for(var r=0,o=e.length-1;r<e.length;o=r++){var s=e[r][0],a=e[r][1],l=e[o][0],u=e[o][1]
if(t[1]*(s-l)+a*(l-t[0])+u*(t[0]-s)==0&&(s-t[0])*(l-t[0])<=0&&(a-t[1])*(u-t[1])<=0)return!n
a>t[1]!=u>t[1]&&t[0]<(l-s)*(t[1]-a)/(u-a)+s&&(i=!i)}return i}e.default=function(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("point is required")
if(!e)throw new Error("polygon is required")
var o=i.getCoord(t),s=i.getGeom(e),a=s.type,l=e.bbox,u=s.coordinates
if(l&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(o,l))return!1
"Polygon"===a&&(u=[u])
for(var h=!1,c=0;c<u.length&&!h;c++)if(r(o,u[c][0],n.ignoreBoundary)){for(var f=!1,p=1;p<u[c].length&&!f;)r(o,u[c][p],!n.ignoreBoundary)&&(f=!0),p++
f||(h=!0)}return h}},4537:(t,e,n)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var i=n(2317)
function r(t,e,n,i,r){var o=n[0],s=n[1],a=t[0],l=t[1],u=e[0],h=e[1],c=u-a,f=h-l,p=(n[0]-a)*f-(n[1]-l)*c
if(null!==r){if(Math.abs(p)>r)return!1}else if(0!==p)return!1
return i?"start"===i?Math.abs(c)>=Math.abs(f)?c>0?a<o&&o<=u:u<=o&&o<a:f>0?l<s&&s<=h:h<=s&&s<l:"end"===i?Math.abs(c)>=Math.abs(f)?c>0?a<=o&&o<u:u<o&&o<=a:f>0?l<=s&&s<h:h<s&&s<=l:"both"===i&&(Math.abs(c)>=Math.abs(f)?c>0?a<o&&o<u:u<o&&o<a:f>0?l<s&&s<h:h<s&&s<l):Math.abs(c)>=Math.abs(f)?c>0?a<=o&&o<=u:u<=o&&o<=a:f>0?l<=s&&s<=h:h<=s&&s<=l}e.default=function(t,e,n){void 0===n&&(n={})
for(var o=i.getCoord(t),s=i.getCoords(e),a=0;a<s.length-1;a++){var l=!1
if(n.ignoreEndVertices&&(0===a&&(l="start"),a===s.length-2&&(l="end"),0===a&&a+1===s.length-1&&(l="both")),r(s[a],s[a+1],o,l,void 0===n.epsilon?null:n.epsilon))return!0}return!1}},9555:function(t,e,n){"use strict"
var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=i(n(463)),o=i(n(4537)),s=i(n(2015)),a=n(2317)
function l(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function u(t,e){return t[0]===e[0]&&t[1]===e[1]}e.default=function(t,e){var n=a.getGeom(t),i=a.getGeom(e),h=n.type,c=i.type
switch(h){case"Point":switch(c){case"MultiPoint":return function(t,e){var n,i=!1
for(n=0;n<e.coordinates.length;n++)if(u(e.coordinates[n],t.coordinates)){i=!0
break}return i}(n,i)
case"LineString":return o.default(n,i,{ignoreEndVertices:!0})
case"Polygon":case"MultiPolygon":return s.default(n,i,{ignoreBoundary:!0})
default:throw new Error("feature2 "+c+" geometry not supported")}case"MultiPoint":switch(c){case"MultiPoint":return function(t,e){for(var n=0;n<t.coordinates.length;n++){for(var i=!1,r=0;r<e.coordinates.length;r++)u(t.coordinates[n],e.coordinates[r])&&(i=!0)
if(!i)return!1}return!0}(n,i)
case"LineString":return function(t,e){for(var n=!1,i=0;i<t.coordinates.length;i++){if(!o.default(t.coordinates[i],e))return!1
n||(n=o.default(t.coordinates[i],e,{ignoreEndVertices:!0}))}return n}(n,i)
case"Polygon":case"MultiPolygon":return function(t,e){for(var n=!0,i=!1,r=0;r<t.coordinates.length;r++){if(!(i=s.default(t.coordinates[1],e))){n=!1
break}i=s.default(t.coordinates[1],e,{ignoreBoundary:!0})}return n&&i}(n,i)
default:throw new Error("feature2 "+c+" geometry not supported")}case"LineString":switch(c){case"LineString":return function(t,e){for(var n=0;n<t.coordinates.length;n++)if(!o.default(t.coordinates[n],e))return!1
return!0}(n,i)
case"Polygon":case"MultiPolygon":return function(t,e){var n,i
if(!l(r.default(e),r.default(t)))return!1
for(var o=!1,a=0;a<t.coordinates.length-1;a++){if(!s.default(t.coordinates[a],e))return!1
if(o||(o=s.default(t.coordinates[a],e,{ignoreBoundary:!0})),!o){var u=(n=t.coordinates[a],i=t.coordinates[a+1],[(n[0]+i[0])/2,(n[1]+i[1])/2])
o=s.default(u,e,{ignoreBoundary:!0})}}return o}(n,i)
default:throw new Error("feature2 "+c+" geometry not supported")}case"Polygon":switch(c){case"Polygon":case"MultiPolygon":return function(t,e){var n=r.default(t)
if(!l(r.default(e),n))return!1
for(var i=0;i<t.coordinates[0].length;i++)if(!s.default(t.coordinates[0][i],e))return!1
return!0}(n,i)
default:throw new Error("feature2 "+c+" geometry not supported")}default:throw new Error("feature1 "+h+" geometry not supported")}}},2415:(t,e,n)=>{"use strict"
var i=n(6731),r=n(3011),o=n(9611),s=n(4887),a=n(6303)
var l=function(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}(i)
function u(t,e,n){var i=(n=n||{}).units||"kilometers",r=n.steps||8
if(!t)throw new Error("geojson is required")
if("object"!=typeof n)throw new Error("options must be an object")
if("number"!=typeof r)throw new Error("steps must be an number")
if(void 0===e)throw new Error("radius is required")
if(r<=0)throw new Error("steps must be greater than 0")
var s=[]
switch(t.type){case"GeometryCollection":return o.geomEach(t,(function(t){var n=h(t,e,i,r)
n&&s.push(n)})),a.featureCollection(s)
case"FeatureCollection":return o.featureEach(t,(function(t){var n=h(t,e,i,r)
n&&o.featureEach(n,(function(t){t&&s.push(t)}))})),a.featureCollection(s)}return h(t,e,i,r)}function h(t,e,n,i){var u=t.properties||{},d="Feature"===t.type?t.geometry:t
if("GeometryCollection"===d.type){var g=[]
return o.geomEach(t,(function(t){var r=h(t,e,n,i)
r&&g.push(r)})),a.featureCollection(g)}var _=function(t){var e=l.default(t).geometry.coordinates,n=[-e[0],-e[1]]
return s.geoAzimuthalEquidistant().rotate(n).scale(a.earthRadius)}(d),m={type:d.type,coordinates:f(d.coordinates,_)},y=(new r.GeoJSONReader).read(m),v=a.radiansToLength(a.lengthToRadians(e,n),"meters"),x=r.BufferOp.bufferOp(y,v,i)
if(!c((x=(new r.GeoJSONWriter).write(x)).coordinates)){var b={type:x.type,coordinates:p(x.coordinates,_)}
return a.feature(b,u)}}function c(t){return Array.isArray(t[0])?c(t[0]):isNaN(t[0])}function f(t,e){return"object"!=typeof t[0]?e(t):t.map((function(t){return f(t,e)}))}function p(t,e){return"object"!=typeof t[0]?e.invert(t):t.map((function(t){return p(t,e)}))}t.exports=u,t.exports.default=u},3031:(t,e,n)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var i=n(9611),r=n(6303)
e.default=function(t,e){void 0===e&&(e={})
var n=0,o=0,s=0
return i.geomEach(t,(function(t,a,l){var u=e.weight?null==l?void 0:l[e.weight]:void 0
if(u=null==u?1:u,!r.isNumber(u))throw new Error("weight value must be a number for feature index "+a);(u=Number(u))>0&&i.coordEach(t,(function(t){n+=t[0]*u,o+=t[1]*u,s+=u}))})),r.point([n/s,o/s],e.properties,e)}},6577:function(t,e,n){"use strict"
var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=i(n(3031)),o=i(n(3703)),s=i(n(5335)),a=n(6303),l=n(9611)
function u(t,e,n,i,r){var s=i.tolerance||.001,h=0,c=0,f=0,p=0
if(l.featureEach(n,(function(e){var n,i=null===(n=e.properties)||void 0===n?void 0:n.weight,r=null==i?1:i
if(r=Number(r),!a.isNumber(r))throw new Error("weight value must be a number")
if(r>0){p+=1
var s=r*o.default(e,t)
0===s&&(s=1)
var l=r/s
h+=e.geometry.coordinates[0]*l,c+=e.geometry.coordinates[1]*l,f+=l}})),p<1)throw new Error("no features to measure")
var d=h/f,g=c/f
return 1===p||0===r||Math.abs(d-e[0])<s&&Math.abs(g-e[1])<s?a.point([d,g],{medianCandidates:i.medianCandidates}):(i.medianCandidates.push([d,g]),u([d,g],t,n,i,r-1))}e.default=function(t,e){if(void 0===e&&(e={}),e=e||{},!a.isObject(e))throw new Error("options is invalid")
var n=e.counter||10
if(!a.isNumber(n))throw new Error("counter must be a number")
var i=e.weight,o=r.default(t,{weight:e.weight}),h=a.featureCollection([])
l.featureEach(t,(function(t){var e
h.features.push(s.default(t,{properties:{weight:null===(e=t.properties)||void 0===e?void 0:e[i]}}))}))
var c={tolerance:e.tolerance,medianCandidates:[]}
return u(o.geometry.coordinates,[0,0],h,c,n)}},8331:function(t,e,n){"use strict"
var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=i(n(627)),o=i(n(5335)),s=n(6303),a=n(2317),l=n(9611)
e.default=function t(e,n){switch(void 0===n&&(n={}),a.getType(e)){case"Point":return s.point(a.getCoord(e),n.properties)
case"Polygon":var i=[]
l.coordEach(e,(function(t){i.push(t)}))
var u,h,c,f,p,d,g,_,m=o.default(e,{properties:n.properties}),y=m.geometry.coordinates,v=0,x=0,b=0,E=i.map((function(t){return[t[0]-y[0],t[1]-y[1]]}))
for(u=0;u<i.length-1;u++)f=(h=E[u])[0],d=h[1],p=(c=E[u+1])[0],b+=_=f*(g=c[1])-p*d,v+=(f+p)*_,x+=(d+g)*_
if(0===b)return m
var w=1/(.5*b*6)
return s.point([y[0]+w*v,y[1]+w*x],n.properties)
default:var S=r.default(e)
return S?t(S,{properties:n.properties}):o.default(e,{properties:n.properties})}}},6731:function(t,e,n){"use strict"
var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=i(n(463)),o=n(6303)
e.default=function(t,e){void 0===e&&(e={})
var n=r.default(t),i=(n[0]+n[2])/2,s=(n[1]+n[3])/2
return o.point([i,s],e.properties,e)}},5335:(t,e,n)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var i=n(9611),r=n(6303)
e.default=function(t,e){void 0===e&&(e={})
var n=0,o=0,s=0
return i.coordEach(t,(function(t){n+=t[0],o+=t[1],s++}),!0),r.point([n/s,o/s],e.properties)}},7651:function(t,e,n){"use strict"
var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=i(n(2165)),o=n(6303)
e.default=function(t,e,n){void 0===n&&(n={})
for(var i=n.steps||64,s=n.properties?n.properties:!Array.isArray(t)&&"Feature"===t.type&&t.properties?t.properties:{},a=[],l=0;l<i;l++)a.push(r.default(t,e,-360*l/i,n).geometry.coordinates)
return a.push(a[0]),o.polygon([a],s)}},2707:(t,e,n)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var i=n(6303),r=n(2317)
function o(t){var e=r.getCoords(t)
if(2===e.length&&!s(e[0],e[1]))return e
var n=[],i=e.length-1,o=n.length
n.push(e[0])
for(var l=1;l<i;l++){var u=n[n.length-1]
e[l][0]===u[0]&&e[l][1]===u[1]||(n.push(e[l]),(o=n.length)>2&&a(n[o-3],n[o-1],n[o-2])&&n.splice(n.length-2,1))}if(n.push(e[e.length-1]),o=n.length,s(e[0],e[e.length-1])&&o<4)throw new Error("invalid polygon")
return a(n[o-3],n[o-1],n[o-2])&&n.splice(n.length-2,1),n}function s(t,e){return t[0]===e[0]&&t[1]===e[1]}function a(t,e,n){var i=n[0],r=n[1],o=t[0],s=t[1],a=e[0],l=e[1],u=a-o,h=l-s
return 0==(i-o)*h-(r-s)*u&&(Math.abs(u)>=Math.abs(h)?u>0?o<=i&&i<=a:a<=i&&i<=o:h>0?s<=r&&r<=l:l<=r&&r<=s)}e.default=function(t,e){void 0===e&&(e={})
var n="object"==typeof e?e.mutate:e
if(!t)throw new Error("geojson is required")
var s=r.getType(t),a=[]
switch(s){case"LineString":a=o(t)
break
case"MultiLineString":case"Polygon":r.getCoords(t).forEach((function(t){a.push(o(t))}))
break
case"MultiPolygon":r.getCoords(t).forEach((function(t){var e=[]
t.forEach((function(t){e.push(o(t))})),a.push(e)}))
break
case"Point":return t
case"MultiPoint":var l={}
r.getCoords(t).forEach((function(t){var e=t.join("-")
Object.prototype.hasOwnProperty.call(l,e)||(a.push(t),l[e]=!0)}))
break
default:throw new Error(s+" geometry not supported")}return t.coordinates?!0===n?(t.coordinates=a,t):{type:s,coordinates:a}:!0===n?(t.geometry.coordinates=a,t):i.feature({type:s,coordinates:a},t.properties,{bbox:t.bbox,id:t.id})}},7051:(t,e)=>{"use strict"
function n(t){var e={type:"Feature"}
return Object.keys(t).forEach((function(n){switch(n){case"type":case"properties":case"geometry":return
default:e[n]=t[n]}})),e.properties=i(t.properties),e.geometry=r(t.geometry),e}function i(t){var e={}
return t?(Object.keys(t).forEach((function(n){var r=t[n]
"object"==typeof r?null===r?e[n]=null:Array.isArray(r)?e[n]=r.map((function(t){return t})):e[n]=i(r):e[n]=r})),e):e}function r(t){var e={type:t.type}
return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map((function(t){return r(t)})),e):(e.coordinates=o(t.coordinates),e)}function o(t){var e=t
return"object"!=typeof e[0]?e.slice():e.map((function(t){return o(t)}))}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if(!t)throw new Error("geojson is required")
switch(t.type){case"Feature":return n(t)
case"FeatureCollection":return function(t){var e={type:"FeatureCollection"}
return Object.keys(t).forEach((function(n){switch(n){case"type":case"features":return
default:e[n]=t[n]}})),e.features=t.features.map((function(t){return n(t)})),e}(t)
case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return r(t)
default:throw new Error("unknown GeoJSON type")}}},831:function(t,e,n){"use strict"
var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=i(n(7051)),o=i(n(3703)),s=n(9611),a=n(6303),l=i(n(7705))
e.default=function(t,e,n){void 0===n&&(n={}),!0!==n.mutate&&(t=r.default(t)),n.minPoints=n.minPoints||3
var i=new l.default.DBSCAN,u=i.run(s.coordAll(t),a.convertLength(e,n.units),n.minPoints,o.default),h=-1
return u.forEach((function(e){h++,e.forEach((function(e){var n=t.features[e]
n.properties||(n.properties={}),n.properties.cluster=h,n.properties.dbscan="core"}))})),i.noise.forEach((function(e){var n=t.features[e]
n.properties||(n.properties={}),n.properties.cluster?n.properties.dbscan="edge":n.properties.dbscan="noise"})),t}},835:function(t,e,n){"use strict"
var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=i(n(7051)),o=n(9611),s=i(n(2070))
e.default=function(t,e){void 0===e&&(e={})
var n=t.features.length
e.numberOfClusters=e.numberOfClusters||Math.round(Math.sqrt(n/2)),e.numberOfClusters>n&&(e.numberOfClusters=n),!0!==e.mutate&&(t=r.default(t))
var i=o.coordAll(t),a=i.slice(0,e.numberOfClusters),l=s.default(i,e.numberOfClusters,a),u={}
return l.centroids.forEach((function(t,e){u[e]=t})),o.featureEach(t,(function(t,e){var n=l.idxs[e]
t.properties.cluster=n,t.properties.centroid=u[n]})),t}},4523:(t,e,n)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var i=n(9611),r=n(6303)
function o(t,e,n){if(!t)throw new Error("geojson is required")
if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection")
if(null==e)throw new Error("property is required")
for(var i=s(t,e),o=Object.keys(i),a=0;a<o.length;a++){for(var l=o[a],u=i[l],h=[],c=0;c<u.length;c++)h.push(t.features[u[c]])
n(r.featureCollection(h),l,a)}}function s(t,e){var n={}
return i.featureEach(t,(function(t,i){var r=t.properties||{}
if(Object.prototype.hasOwnProperty.call(r,String(e))){var o=r[e]
Object.prototype.hasOwnProperty.call(n,o)?n[o].push(i):n[o]=[i]}})),n}function a(t,e){if(void 0===t)return!1
var n=typeof e
if("number"===n||"string"===n)return Object.prototype.hasOwnProperty.call(t,e)
if(Array.isArray(e)){for(var i=0;i<e.length;i++)if(!a(t,e[i]))return!1
return!0}return l(t,e)}function l(t,e){for(var n=Object.keys(e),i=0;i<n.length;i++){var r=n[i]
if(t[r]!==e[r])return!1}return!0}e.getCluster=function(t,e){if(!t)throw new Error("geojson is required")
if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection")
if(null==e)throw new Error("filter is required")
var n=[]
return i.featureEach(t,(function(t){a(t.properties,e)&&n.push(t)})),r.featureCollection(n)},e.clusterEach=o,e.clusterReduce=function(t,e,n,i){var r=i
return o(t,e,(function(t,e,o){r=0===o&&void 0===i?t:n(r,t,e,o)})),r},e.createBins=s,e.applyFilter=a,e.propertiesContainsFilter=l,e.filterProperties=function(t,e){if(!e)return{}
if(!e.length)return{}
for(var n={},i=0;i<e.length;i++){var r=e[i]
Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n}},3657:function(t,e,n){"use strict"
var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=i(n(463)),o=i(n(2015)),s=i(n(803))
e.default=function(t,e,n,i){var a=s.default(6),l=e.features.map((function(t){var e
return{minX:t.geometry.coordinates[0],minY:t.geometry.coordinates[1],maxX:t.geometry.coordinates[0],maxY:t.geometry.coordinates[1],property:null===(e=t.properties)||void 0===e?void 0:e[n]}}))
return a.load(l),t.features.forEach((function(t){t.properties||(t.properties={})
var e=r.default(t),n=a.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}),s=[]
n.forEach((function(e){o.default([e.minX,e.minY],t)&&s.push(e.property)})),t.properties[i]=s})),t}},2887:(t,e,n)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var i=n(6303),r=n(9611)
e.default=function(t){var e={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}}
return r.featureEach(t,(function(t){var n,i,r,o
switch(null===(o=t.geometry)||void 0===o?void 0:o.type){case"Point":e.MultiPoint.coordinates.push(t.geometry.coordinates),e.MultiPoint.properties.push(t.properties)
break
case"MultiPoint":(n=e.MultiPoint.coordinates).push.apply(n,t.geometry.coordinates),e.MultiPoint.properties.push(t.properties)
break
case"LineString":e.MultiLineString.coordinates.push(t.geometry.coordinates),e.MultiLineString.properties.push(t.properties)
break
case"MultiLineString":(i=e.MultiLineString.coordinates).push.apply(i,t.geometry.coordinates),e.MultiLineString.properties.push(t.properties)
break
case"Polygon":e.MultiPolygon.coordinates.push(t.geometry.coordinates),e.MultiPolygon.properties.push(t.properties)
break
case"MultiPolygon":(r=e.MultiPolygon.coordinates).push.apply(r,t.geometry.coordinates),e.MultiPolygon.properties.push(t.properties)}})),i.featureCollection(Object.keys(e).filter((function(t){return e[t].coordinates.length})).sort().map((function(t){var n={type:t,coordinates:e[t].coordinates},r={collectedProperties:e[t].properties}
return i.feature(n,r)})))}},8771:function(t,e,n){"use strict"
var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=i(n(3703)),o=n(6303),s=n(9611),a=i(n(1291)),l=i(n(4622))
e.default=function(t,e){void 0===e&&(e={})
var n=e.maxEdge||1/0,i=function(t){var e=[],n={}
return s.featureEach(t,(function(t){if(t.geometry){var i=t.geometry.coordinates.join("-")
Object.prototype.hasOwnProperty.call(n,i)||(e.push(t),n[i]=!0)}})),o.featureCollection(e)}(t),u=a.default(i)
if(u.features=u.features.filter((function(t){var i=t.geometry.coordinates[0][0],o=t.geometry.coordinates[0][1],s=t.geometry.coordinates[0][2],a=r.default(i,o,e),l=r.default(o,s,e),u=r.default(i,s,e)
return a<=n&&l<=n&&u<=n})),u.features.length<1)return null
var h=l.default(u)
return 1===h.coordinates.length&&(h.coordinates=h.coordinates[0],h.type="Polygon"),o.feature(h)}},4622:function(t,e,n){"use strict"
var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=i(n(7051)),o=n(6303),s=n(2317),a=n(9611),l=i(n(7247)),u=i(n(1763))
e.default=function(t,e){if(void 0===e&&(e={}),e=e||{},!o.isObject(e))throw new Error("options is invalid")
var n=e.mutate
if("FeatureCollection"!==s.getType(t))throw new Error("geojson must be a FeatureCollection")
if(!t.features.length)throw new Error("geojson is empty")
!1!==n&&void 0!==n||(t=r.default(t))
var i=function(t){var e={}
a.flattenEach(t,(function(t){e[t.geometry.type]=!0}))
var n=Object.keys(e)
return 1===n.length?n[0]:null}(t)
if(!i)throw new Error("geojson must be homogenous")
var h=t
switch(i){case"LineString":return l.default(h,e)
case"Polygon":return u.default(h,e)
default:throw new Error(i+" is not supported")}}},7247:function(t,e,n){"use strict"
var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=i(n(7051)),o=n(6303),s=n(2317),a=n(9611)
function l(t){return t[0].toString()+","+t[1].toString()}e.default=function(t,e){if(void 0===e&&(e={}),e=e||{},!o.isObject(e))throw new Error("options is invalid")
var n=e.mutate
if("FeatureCollection"!==s.getType(t))throw new Error("geojson must be a FeatureCollection")
if(!t.features.length)throw new Error("geojson is empty")
!1!==n&&void 0!==n||(t=r.default(t))
var i=[],u=a.lineReduce(t,(function(t,e){return function(t,e){var n,i=t.geometry.coordinates,r=e.geometry.coordinates,s=l(i[0]),a=l(i[i.length-1]),u=l(r[0]),h=l(r[r.length-1])
if(s===h)n=r.concat(i.slice(1))
else if(u===a)n=i.concat(r.slice(1))
else if(s===u)n=i.slice(1).reverse().concat(r)
else{if(a!==h)return null
n=i.concat(r.reverse().slice(1))}return o.lineString(n)}(t,e)||(i.push(t),e)}))
return u&&i.push(u),i.length?1===i.length?i[0]:o.multiLineString(i.map((function(t){return t.coordinates}))):null}},1763:function(t,e,n){"use strict"
var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=i(n(7051)),o=n(6303),s=n(2317),a=n(9611),l=n(1940),u=n(6698)
e.default=function(t,e){if(void 0===e&&(e={}),"FeatureCollection"!==s.getType(t))throw new Error("geojson must be a FeatureCollection")
if(!t.features.length)throw new Error("geojson is empty")
!1!==e.mutate&&void 0!==e.mutate||(t=r.default(t))
var n=[]
a.flattenEach(t,(function(t){n.push(t.geometry)}))
var i=u.topology({geoms:o.geometryCollection(n).geometry})
return l.merge(i,i.objects.geoms.geometries)}},627:function(t,e,n){"use strict"
var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=n(6303),o=n(9611),s=i(n(7505))
e.default=function(t,e){void 0===e&&(e={}),e.concavity=e.concavity||1/0
var n=[]
if(o.coordEach(t,(function(t){n.push([t[0],t[1]])})),!n.length)return null
var i=s.default(n,e.concavity)
return i.length>3?r.polygon([i]):null}},2165:(t,e,n)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var i=n(6303),r=n(2317)
e.default=function(t,e,n,o){void 0===o&&(o={})
var s=r.getCoord(t),a=i.degreesToRadians(s[0]),l=i.degreesToRadians(s[1]),u=i.degreesToRadians(n),h=i.lengthToRadians(e,o.units),c=Math.asin(Math.sin(l)*Math.cos(h)+Math.cos(l)*Math.sin(h)*Math.cos(u)),f=a+Math.atan2(Math.sin(u)*Math.sin(h)*Math.cos(l),Math.cos(h)-Math.sin(l)*Math.sin(c)),p=i.radiansToDegrees(f),d=i.radiansToDegrees(c)
return i.point([p,d],o.properties)}},9159:(t,e,n)=>{"use strict"
var i=n(6638),r=n(6303),o=n(2317)
var s=function(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}(i)
function a(t,e){var n=o.getGeom(t),i=o.getGeom(e),a=t.properties||{},l=s.default.difference(n.coordinates,i.coordinates)
return 0===l.length?null:1===l.length?r.polygon(l[0],a):r.multiPolygon(l,a)}t.exports=a,t.exports.default=a},1995:(t,e,n)=>{"use strict"
var i=n(6303),r=n(2317),o=n(9611),s=n(7365),a=n(6638)
function l(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var u=l(s),h=l(a)
function c(t,e){if(e=e||{},!i.isObject(e))throw new Error("options is invalid")
var n=e.propertyName
r.collectionOf(t,"Polygon","dissolve")
var s=[]
if(!e.propertyName)return u.default(i.multiPolygon(h.default.union.apply(null,t.features.map((function(t){return t.geometry.coordinates})))))
var a={}
o.featureEach(t,(function(t){Object.prototype.hasOwnProperty.call(a,t.properties[n])||(a[t.properties[n]]=[]),a[t.properties[n]].push(t)}))
for(var l=Object.keys(a),c=0;c<l.length;c++){var f=i.multiPolygon(h.default.union.apply(null,a[l[c]].map((function(t){return t.geometry.coordinates}))))
f.properties[n]=l[c],s.push(f)}return u.default(i.featureCollection(s))}t.exports=c,t.exports.default=c},2753:function(t,e,n){"use strict"
var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=i(n(5335)),o=n(2317),s=n(9611)
function a(t,e,n){void 0===n&&(n=2)
var i=o.getCoord(t),r=o.getCoord(e),s=i[0]-r[0],a=i[1]-r[1]
return 1===n?Math.abs(s)+Math.abs(a):Math.pow(Math.pow(s,n)+Math.pow(a,n),1/n)}e.pNormDistance=a,e.default=function(t,e){var n=(e=e||{}).threshold||1e4,i=e.p||2,o=e.binary||!1,l=e.alpha||-1,u=e.standardization||!1,h=[]
s.featureEach(t,(function(t){h.push(r.default(t))}))
for(var c=[],f=0;f<h.length;f++)c[f]=[]
for(f=0;f<h.length;f++)for(var p=f;p<h.length;p++){f===p&&(c[f][p]=0)
var d=a(h[f],h[p],i)
c[f][p]=d,c[p][f]=d}for(f=0;f<h.length;f++)for(p=0;p<h.length;p++)0!==(d=c[f][p])&&(c[f][p]=o?d<=n?1:0:d<=n?Math.pow(d,l):0)
if(u)for(f=0;f<h.length;f++){var g=c[f].reduce((function(t,e){return t+e}),0)
for(p=0;p<h.length;p++)c[f][p]=c[f][p]/g}return c}},3703:(t,e,n)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var i=n(2317),r=n(6303)
e.default=function(t,e,n){void 0===n&&(n={})
var o=i.getCoord(t),s=i.getCoord(e),a=r.degreesToRadians(s[1]-o[1]),l=r.degreesToRadians(s[0]-o[0]),u=r.degreesToRadians(o[1]),h=r.degreesToRadians(s[1]),c=Math.pow(Math.sin(a/2),2)+Math.pow(Math.sin(l/2),2)*Math.cos(u)*Math.cos(h)
return r.radiansToLength(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),n.units)}},4485:(t,e,n)=>{"use strict"
var i=n(6303),r=n(7099),o=n(9023),s=n(2317)
function a(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var l=a(r),u=a(o)
function h(t,e,n,r){var o=(r=r||{}).steps||64,a=r.units||"kilometers",h=r.angle||0,f=r.pivot||t,p=r.properties||t.properties||{}
if(!t)throw new Error("center is required")
if(!e)throw new Error("xSemiAxis is required")
if(!n)throw new Error("ySemiAxis is required")
if(!i.isObject(r))throw new Error("options must be an object")
if(!i.isNumber(o))throw new Error("steps must be a number")
if(!i.isNumber(h))throw new Error("angle must be a number")
var d=s.getCoord(t)
if("degrees"===a)var g=i.degreesToRadians(h)
else e=l.default(t,e,90,{units:a}),n=l.default(t,n,0,{units:a}),e=s.getCoord(e)[0]-d[0],n=s.getCoord(n)[1]-d[1]
for(var _=[],m=0;m<o;m+=1){var y=-360*m/o,v=e*n/Math.sqrt(Math.pow(n,2)+Math.pow(e,2)*Math.pow(c(y),2)),x=e*n/Math.sqrt(Math.pow(e,2)+Math.pow(n,2)/Math.pow(c(y),2))
if(y<-90&&y>=-270&&(v=-v),y<-180&&y>=-360&&(x=-x),"degrees"===a){var b=v*Math.cos(g)+x*Math.sin(g),E=x*Math.cos(g)-v*Math.sin(g)
v=b,x=E}_.push([v+d[0],x+d[1]])}return _.push(_[0]),"degrees"===a?i.polygon([_],p):u.default(i.polygon([_],p),h,{pivot:f})}function c(t){var e=t*Math.PI/180
return Math.tan(e)}t.exports=h,t.exports.default=h},1167:(t,e,n)=>{"use strict"
var i=n(463),r=n(3779)
function o(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var s=o(i),a=o(r)
function l(t){return a.default(s.default(t))}t.exports=l,t.exports.default=l},2107:(t,e,n)=>{"use strict"
var i=n(9611),r=n(6303)
function o(t){var e=[]
return"FeatureCollection"===t.type?i.featureEach(t,(function(t){i.coordEach(t,(function(n){e.push(r.point(n,t.properties))}))})):i.coordEach(t,(function(n){e.push(r.point(n,t.properties))})),r.featureCollection(e)}t.exports=o,t.exports.default=o},7365:(t,e,n)=>{"use strict"
var i=n(9611),r=n(6303)
function o(t){if(!t)throw new Error("geojson is required")
var e=[]
return i.flattenEach(t,(function(t){e.push(t)})),r.featureCollection(e)}t.exports=o,t.exports.default=o},1111:(t,e,n)=>{"use strict"
var i=n(9611),r=n(6303)
var o=function(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}(n(7051))
function s(t,e){if(e=e||{},!r.isObject(e))throw new Error("options is invalid")
var n=e.mutate
if(!t)throw new Error("geojson is required")
return!1!==n&&void 0!==n||(t=o.default(t)),i.coordEach(t,(function(t){var e=t[0],n=t[1]
t[0]=n,t[1]=e})),t}t.exports=s,t.exports.default=s},7391:(t,e,n)=>{"use strict"
var i=n(2317),r=Math.PI/180,o=180/Math.PI,s=function(t,e){this.lon=t,this.lat=e,this.x=r*t,this.y=r*e}
s.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},s.prototype.antipode=function(){var t=-1*this.lat,e=this.lon<0?180+this.lon:-1*(180-this.lon)
return new s(e,t)}
var a=function(){this.coords=[],this.length=0}
a.prototype.move_to=function(t){this.length++,this.coords.push(t)}
var l=function(t){this.properties=t||{},this.geometries=[]}
l.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties}
if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties}
for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords)
return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},l.prototype.wkt=function(){for(var t="",e="LINESTRING(",n=function(t){e+=t[0]+" "+t[1]+","},i=0;i<this.geometries.length;i++){if(0===this.geometries[i].coords.length)return"LINESTRING(empty)"
this.geometries[i].coords.forEach(n),t+=e.substring(0,e.length-1)+")"}return t}
var u=function(t,e,n){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties")
if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties")
this.start=new s(t.x,t.y),this.end=new s(e.x,e.y),this.properties=n||{}
var i=this.start.x-this.end.x,r=this.start.y-this.end.y,o=Math.pow(Math.sin(r/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(i/2),2)
if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite")
if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)}
function h(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid")
var r=n.properties,o=n.npoints,s=n.offset
return t=i.getCoord(t),e=i.getCoord(e),r=r||{},o=o||100,s=s||10,new u({x:t[0],y:t[1]},{x:e[0],y:e[1]},r).Arc(o,{offset:s}).json()}u.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),n=Math.sin(t*this.g)/Math.sin(this.g),i=e*Math.cos(this.start.y)*Math.cos(this.start.x)+n*Math.cos(this.end.y)*Math.cos(this.end.x),r=e*Math.cos(this.start.y)*Math.sin(this.start.x)+n*Math.cos(this.end.y)*Math.sin(this.end.x),s=e*Math.sin(this.start.y)+n*Math.sin(this.end.y),a=o*Math.atan2(s,Math.sqrt(Math.pow(i,2)+Math.pow(r,2)))
return[o*Math.atan2(r,i),a]},u.prototype.Arc=function(t,e){var n=[]
if(!t||t<=2)n.push([this.start.lon,this.start.lat]),n.push([this.end.lon,this.end.lat])
else for(var i=1/(t-1),r=0;r<t;++r){var o=i*r,s=this.interpolate(o)
n.push(s)}for(var u=!1,h=0,c=e&&e.offset?e.offset:10,f=180-c,p=-180+c,d=360-c,g=1;g<n.length;++g){var _=n[g-1][0],m=n[g][0],y=Math.abs(m-_)
y>d&&(m>f&&_<p||_>f&&m<p)?u=!0:y>h&&(h=y)}var v=[]
if(u&&h<c){var x=[]
v.push(x)
for(var b=0;b<n.length;++b){var E=parseFloat(n[b][0])
if(b>0&&Math.abs(E-n[b-1][0])>d){var w=parseFloat(n[b-1][0]),S=parseFloat(n[b-1][1]),C=parseFloat(n[b][0]),T=parseFloat(n[b][1])
if(w>-180&&w<p&&180===C&&b+1<n.length&&n[b-1][0]>-180&&n[b-1][0]<p){x.push([-180,n[b][1]]),b++,x.push([n[b][0],n[b][1]])
continue}if(w>f&&w<180&&-180===C&&b+1<n.length&&n[b-1][0]>f&&n[b-1][0]<180){x.push([180,n[b][1]]),b++,x.push([n[b][0],n[b][1]])
continue}if(w<p&&C>f){var I=w
w=C,C=I
var P=S
S=T,T=P}if(w>f&&C<p&&(C+=360),w<=180&&C>=180&&w<C){var A=(180-w)/(C-w),R=A*T+(1-A)*S
x.push([n[b-1][0]>f?180:-180,R]),(x=[]).push([n[b-1][0]>f?-180:180,R]),v.push(x)}else x=[],v.push(x)
x.push([E,n[b][1]])}else x.push([n[b][0],n[b][1]])}}else{var L=[]
v.push(L)
for(var M=0;M<n.length;++M)L.push([n[M][0],n[M][1]])}for(var O=new l(this.properties),N=0;N<v.length;++N){var D=new a
O.geometries.push(D)
for(var F=v[N],k=0;k<F.length;++k)D.move_to(F[k])}return O},t.exports=h,t.exports.default=h},6303:(t,e)=>{"use strict"
function n(t,e,n){void 0===n&&(n={})
var i={type:"Feature"}
return(0===n.id||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=e||{},i.geometry=t,i}function i(t,e,i){if(void 0===i&&(i={}),!t)throw new Error("coordinates is required")
if(!Array.isArray(t))throw new Error("coordinates must be an Array")
if(t.length<2)throw new Error("coordinates must be at least 2 numbers long")
if(!p(t[0])||!p(t[1]))throw new Error("coordinates must contain numbers")
return n({type:"Point",coordinates:t},e,i)}function r(t,e,i){void 0===i&&(i={})
for(var r=0,o=t;r<o.length;r++){var s=o[r]
if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.")
for(var a=0;a<s[s.length-1].length;a++)if(s[s.length-1][a]!==s[0][a])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:t},e,i)}function o(t,e,i){if(void 0===i&&(i={}),t.length<2)throw new Error("coordinates must be an array of two or more positions")
return n({type:"LineString",coordinates:t},e,i)}function s(t,e){void 0===e&&(e={})
var n={type:"FeatureCollection"}
return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function a(t,e,i){return void 0===i&&(i={}),n({type:"MultiLineString",coordinates:t},e,i)}function l(t,e,i){return void 0===i&&(i={}),n({type:"MultiPoint",coordinates:t},e,i)}function u(t,e,i){return void 0===i&&(i={}),n({type:"MultiPolygon",coordinates:t},e,i)}function h(t,n){void 0===n&&(n="kilometers")
var i=e.factors[n]
if(!i)throw new Error(n+" units is invalid")
return t*i}function c(t,n){void 0===n&&(n="kilometers")
var i=e.factors[n]
if(!i)throw new Error(n+" units is invalid")
return t/i}function f(t){return t%(2*Math.PI)*180/Math.PI}function p(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:1.0936*e.earthRadius},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1.0936133},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=n,e.geometry=function(t,e,n){switch(void 0===n&&(n={}),t){case"Point":return i(e).geometry
case"LineString":return o(e).geometry
case"Polygon":return r(e).geometry
case"MultiPoint":return l(e).geometry
case"MultiLineString":return a(e).geometry
case"MultiPolygon":return u(e).geometry
default:throw new Error(t+" is invalid")}},e.point=i,e.points=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return i(t,e)})),n)},e.polygon=r,e.polygons=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return r(t,e)})),n)},e.lineString=o,e.lineStrings=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return o(t,e)})),n)},e.featureCollection=s,e.multiLineString=a,e.multiPoint=l,e.multiPolygon=u,e.geometryCollection=function(t,e,i){return void 0===i&&(i={}),n({type:"GeometryCollection",geometries:t},e,i)},e.round=function(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number")
var n=Math.pow(10,e||0)
return Math.round(t*n)/n},e.radiansToLength=h,e.lengthToRadians=c,e.lengthToDegrees=function(t,e){return f(c(t,e))},e.bearingToAzimuth=function(t){var e=t%360
return e<0&&(e+=360),e},e.radiansToDegrees=f,e.degreesToRadians=function(t){return t%360*Math.PI/180},e.convertLength=function(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number")
return h(c(t,e),n)},e.convertArea=function(t,n,i){if(void 0===n&&(n="meters"),void 0===i&&(i="kilometers"),!(t>=0))throw new Error("area must be a positive number")
var r=e.areaFactors[n]
if(!r)throw new Error("invalid original units")
var o=e.areaFactors[i]
if(!o)throw new Error("invalid final units")
return t/r*o},e.isNumber=p,e.isObject=function(t){return!!t&&t.constructor===Object},e.validateBBox=function(t){if(!t)throw new Error("bbox is required")
if(!Array.isArray(t))throw new Error("bbox must be an Array")
if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers")
t.forEach((function(t){if(!p(t))throw new Error("bbox must only contain numbers")}))},e.validateId=function(t){if(!t)throw new Error("id is required")
if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}},2255:function(t,e,n){"use strict"
var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=i(n(3703)),o=i(n(5279)),s=n(6303)
function a(t,e,n,i,r,o){for(var a=[],l=0;l<6;l++){var u=t[0]+e*r[l],h=t[1]+n*o[l]
a.push([u,h])}return a.push(a[0].slice()),s.polygon([a],i)}function l(t,e,n,i,r,o){for(var a=[],l=0;l<6;l++){var u=[]
u.push(t),u.push([t[0]+e*r[l],t[1]+n*o[l]]),u.push([t[0]+e*r[(l+1)%6],t[1]+n*o[(l+1)%6]]),u.push(t),a.push(s.polygon([u],i))}return a}e.default=function(t,e,n){void 0===n&&(n={})
var i=JSON.stringify(n.properties||{}),u=t[0],h=t[1],c=t[2],f=t[3],p=(h+f)/2,d=(u+c)/2,g=2*e/r.default([u,p],[c,p],n)*(c-u),_=2*e/r.default([d,h],[d,f],n)*(f-h),m=g/2,y=2*m,v=Math.sqrt(3)/2*_,x=c-u,b=f-h,E=3/4*y,w=v,S=(x-y)/(y-m/2),C=Math.floor(S),T=(C*E-m/2-x)/2-m/2+E/2,I=Math.floor((b-v)/v),P=(b-I*v)/2,A=I*v-b>v/2
A&&(P-=v/4)
for(var R=[],L=[],M=0;M<6;M++){var O=2*Math.PI/6*M
R.push(Math.cos(O)),L.push(Math.sin(O))}for(var N=[],D=0;D<=C;D++)for(var F=0;F<=I;F++){var k=D%2==1
if(!(0===F&&k||0===F&&A)){var j=D*E+u-T,z=F*w+h+P
if(k&&(z-=v/2),!0===n.triangles)l([j,z],g/2,_/2,JSON.parse(i),R,L).forEach((function(t){n.mask?o.default(n.mask,t)&&N.push(t):N.push(t)}))
else{var G=a([j,z],g/2,_/2,JSON.parse(i),R,L)
n.mask?o.default(n.mask,G)&&N.push(G):N.push(G)}}}return s.featureCollection(N)}},3291:(t,e,n)=>{"use strict"
var i=n(463),r=n(2255),o=n(6411),s=n(3703),a=n(5335),l=n(993),u=n(4907),h=n(7051),c=n(6303),f=n(9611),p=n(2317)
function d(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var g=d(i),_=d(r),m=d(o),y=d(s),v=d(a),x=d(l),b=d(u),E=d(h)
function w(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid")
var i=n.gridType,r=n.property,o=n.weight
if(!t)throw new Error("points is required")
if(p.collectionOf(t,"Point","input must contain Points"),!e)throw new Error("cellSize is required")
if(void 0!==o&&"number"!=typeof o)throw new Error("weight must be a number")
r=r||"elevation",i=i||"square",o=o||1
var s,a=g.default(t)
switch(i){case"point":case"points":s=m.default(a,e,n)
break
case"square":case"squares":s=x.default(a,e,n)
break
case"hex":case"hexes":s=_.default(a,e,n)
break
case"triangle":case"triangles":s=b.default(a,e,n)
break
default:throw new Error("invalid gridType")}var l=[]
return f.featureEach(s,(function(e){var s=0,a=0
f.featureEach(t,(function(t){var l,u="point"===i?e:v.default(e),h=y.default(u,t,n)
if(void 0!==r&&(l=t.properties[r]),void 0===l&&(l=t.geometry.coordinates[2]),void 0===l)throw new Error("zValue is missing")
0===h&&(s=l)
var c=1/Math.pow(h,o)
a+=c,s+=c*l}))
var u=E.default(e)
u.properties[r]=s/a,l.push(u)})),c.featureCollection(l)}t.exports=w,t.exports.default=w},5279:function(t,e,n){"use strict"
var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=n(6303),o=n(2317),s=i(n(6638))
e.default=function(t,e,n){void 0===n&&(n={})
var i=o.getGeom(t),a=o.getGeom(e),l=s.default.intersection(i.coordinates,a.coordinates)
return 0===l.length?null:1===l.length?r.polygon(l[0],n.properties):r.multiPolygon(l,n.properties)}},2317:(t,e,n)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var i=n(6303)
e.getCoord=function(t){if(!t)throw new Error("coord is required")
if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates
if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t
throw new Error("coord must be GeoJSON Point or an Array of numbers")},e.getCoords=function(t){if(Array.isArray(t))return t
if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates
throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")},e.containsNumber=function t(e){if(e.length>1&&i.isNumber(e[0])&&i.isNumber(e[1]))return!0
if(Array.isArray(e[0])&&e[0].length)return t(e[0])
throw new Error("coordinates must only contain numbers")},e.geojsonType=function(t,e,n){if(!e||!n)throw new Error("type and name required")
if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)},e.featureOf=function(t,e,n){if(!t)throw new Error("No feature passed")
if(!n)throw new Error(".featureOf() requires a name")
if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required")
if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)},e.collectionOf=function(t,e,n){if(!t)throw new Error("No featureCollection passed")
if(!n)throw new Error(".collectionOf() requires a name")
if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required")
for(var i=0,r=t.features;i<r.length;i++){var o=r[i]
if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required")
if(!o.geometry||o.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+o.geometry.type)}},e.getGeom=function(t){return"Feature"===t.type?t.geometry:t},e.getType=function(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}},3751:(t,e,n)=>{"use strict"
var i=n(463),r=n(587),o=n(2015),s=n(2107),a=n(2317),l=n(6303),u=n(8017),h=n(9611)
function c(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var f=c(i),p=c(r),d=c(o),g=c(s),_=c(u),m={successCallback:null,verbose:!1,polygons:!1},y={}
function v(t,e,n,i){i=i||{}
for(var r=Object.keys(m),o=0;o<r.length;o++){var s=r[o],a=i[s]
a=null!=a?a:m[s],y[s]=a}y.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+e+":"+(e+n)+"]")
var l,u=function(t,e,n){for(var i=t.length-1,r=t[0].length-1,o={rows:i,cols:r,cells:[]},s=e+Math.abs(n),a=0;a<i;++a){o.cells[a]=[]
for(var l=0;l<r;++l){var u=0,h=t[a+1][l],c=t[a+1][l+1],f=t[a][l+1],p=t[a][l]
if(!(isNaN(h)||isNaN(c)||isNaN(f)||isNaN(p))){u|=h<e?0:h>s?128:64,u|=c<e?0:c>s?32:16,u|=f<e?0:f>s?8:4
var d=+(u|=p<e?0:p>s?2:1),g=0
if(17===u||18===u||33===u||34===u||38===u||68===u||72===u||98===u||102===u||132===u||136===u||137===u||152===u||153===u){var _=(h+c+f+p)/4
g=_>s?2:_<e?0:1,34===u?1===g?u=35:0===g&&(u=136):136===u?1===g?(u=35,g=4):0===g&&(u=34):17===u?1===g?(u=155,g=4):0===g&&(u=153):68===u?1===g?(u=103,g=4):0===g&&(u=102):153===u?1===g&&(u=155):102===u?1===g&&(u=103):152===u?g<2&&(u=156,g=1):137===u?g<2&&(u=139,g=1):98===u?g<2&&(u=99,g=1):38===u?g<2&&(u=39,g=1):18===u?g>0?(u=156,g=4):u=152:33===u?g>0?(u=139,g=4):u=137:72===u?g>0?(u=99,g=4):u=98:132===u&&(g>0?(u=39,g=4):u=38)}if(0!=u&&170!=u){var m,y,v,x,b,E,w,S
m=y=v=x=b=E=w=S=.5
var C=[]
1===u?(v=1-ct(e,f,p),S=1-ct(e,h,p),C.push(ot[u])):169===u?(v=ct(s,p,f),S=ct(s,p,h),C.push(ot[u])):4===u?(E=1-ct(e,c,f),x=ct(e,p,f),C.push(it[u])):166===u?(E=ct(s,f,c),x=1-ct(s,f,p),C.push(it[u])):16===u?(b=ct(e,f,c),y=ct(e,h,c),C.push(nt[u])):154===u?(b=1-ct(s,c,f),y=1-ct(s,c,h),C.push(nt[u])):64===u?(w=ct(e,p,h),m=1-ct(e,c,h),C.push(at[u])):106===u?(w=1-ct(s,h,p),m=ct(s,h,c),C.push(at[u])):168===u?(x=ct(s,p,f),v=ct(e,p,f),S=ct(e,p,h),w=ct(s,p,h),C.push(rt[u]),C.push(ot[u])):2===u?(x=1-ct(e,f,p),v=1-ct(s,f,p),S=1-ct(s,h,p),w=1-ct(e,h,p),C.push(rt[u]),C.push(ot[u])):162===u?(b=ct(s,f,c),E=ct(e,f,c),x=1-ct(e,f,p),v=1-ct(s,f,p),C.push(rt[u]),C.push(ot[u])):8===u?(b=1-ct(e,c,f),E=1-ct(s,c,f),x=ct(s,p,f),v=ct(e,p,f),C.push(nt[u]),C.push(it[u])):138===u?(b=1-ct(e,c,f),E=1-ct(s,c,f),m=1-ct(s,c,h),y=1-ct(e,c,h),C.push(nt[u]),C.push(it[u])):32===u?(b=ct(s,f,c),E=ct(e,f,c),m=ct(e,h,c),y=ct(s,h,c),C.push(nt[u]),C.push(it[u])):42===u?(S=1-ct(s,h,p),w=1-ct(e,h,p),m=ct(e,h,c),y=ct(s,h,c),C.push(st[u]),C.push(at[u])):128===u&&(S=ct(e,p,h),w=ct(s,p,h),m=1-ct(s,c,h),y=1-ct(e,c,h),C.push(st[u]),C.push(at[u])),5===u?(E=1-ct(e,c,f),S=1-ct(e,h,p),C.push(it[u])):165===u?(E=ct(s,f,c),S=ct(s,p,h),C.push(it[u])):20===u?(x=ct(e,p,f),y=ct(e,h,c),C.push(rt[u])):150===u?(x=1-ct(s,f,p),y=1-ct(s,c,h),C.push(rt[u])):80===u?(b=ct(e,f,c),w=ct(e,p,h),C.push(nt[u])):90===u?(b=1-ct(s,c,f),w=1-ct(s,h,p),C.push(nt[u])):65===u?(v=1-ct(e,f,p),m=1-ct(e,c,h),C.push(ot[u])):105===u?(v=ct(s,p,f),m=ct(s,h,c),C.push(ot[u])):160===u?(b=ct(s,f,c),E=ct(e,f,c),S=ct(e,p,h),w=ct(s,p,h),C.push(nt[u]),C.push(it[u])):10===u?(b=1-ct(e,c,f),E=1-ct(s,c,f),S=1-ct(s,h,p),w=1-ct(e,h,p),C.push(nt[u]),C.push(it[u])):130===u?(x=1-ct(e,f,p),v=1-ct(s,f,p),m=1-ct(s,c,h),y=1-ct(e,c,h),C.push(rt[u]),C.push(ot[u])):40===u?(x=ct(s,p,f),v=ct(e,p,f),m=ct(e,h,c),y=ct(s,h,c),C.push(rt[u]),C.push(ot[u])):101===u?(E=ct(s,f,c),m=ct(s,h,c),C.push(it[u])):69===u?(E=1-ct(e,c,f),m=1-ct(e,c,h),C.push(it[u])):149===u?(S=ct(s,p,h),y=1-ct(s,c,h),C.push(st[u])):21===u?(S=1-ct(e,h,p),y=ct(e,h,c),C.push(st[u])):86===u?(x=1-ct(s,f,p),w=1-ct(s,h,p),C.push(rt[u])):84===u?(x=ct(e,p,f),w=ct(e,p,h),C.push(rt[u])):89===u?(b=1-ct(s,c,f),v=ct(s,p,f),C.push(ot[u])):81===u?(b=ct(e,f,c),v=1-ct(e,f,p),C.push(ot[u])):96===u?(b=ct(s,f,c),E=ct(e,f,c),w=ct(e,p,h),m=ct(s,h,c),C.push(nt[u]),C.push(it[u])):74===u?(b=1-ct(e,c,f),E=1-ct(s,c,f),w=1-ct(s,h,p),m=1-ct(e,c,h),C.push(nt[u]),C.push(it[u])):24===u?(b=1-ct(s,c,f),x=ct(s,p,f),v=ct(e,p,f),y=ct(e,h,c),C.push(nt[u]),C.push(ot[u])):146===u?(b=ct(e,f,c),x=1-ct(e,f,p),v=1-ct(s,f,p),y=1-ct(s,c,h),C.push(nt[u]),C.push(ot[u])):6===u?(E=1-ct(e,c,f),x=1-ct(s,f,p),S=1-ct(s,h,p),w=1-ct(e,h,p),C.push(it[u]),C.push(rt[u])):164===u?(E=ct(s,f,c),x=ct(e,p,f),S=ct(e,p,h),w=ct(s,p,h),C.push(it[u]),C.push(rt[u])):129===u?(v=1-ct(e,f,p),S=ct(s,p,h),m=1-ct(s,c,h),y=1-ct(e,c,h),C.push(ot[u]),C.push(st[u])):41===u?(v=ct(s,p,f),S=1-ct(e,h,p),m=ct(e,h,c),y=ct(s,h,c),C.push(ot[u]),C.push(st[u])):66===u?(x=1-ct(e,f,p),v=1-ct(s,f,p),w=1-ct(s,h,p),m=1-ct(e,c,h),C.push(rt[u]),C.push(ot[u])):104===u?(x=ct(s,p,f),v=ct(e,p,f),w=ct(e,p,h),m=ct(s,h,c),C.push(ot[u]),C.push(lt[u])):144===u?(b=ct(e,f,c),S=ct(e,p,h),w=ct(s,p,h),y=1-ct(s,c,h),C.push(nt[u]),C.push(at[u])):26===u?(b=1-ct(s,c,f),S=1-ct(s,h,p),w=1-ct(e,h,p),y=ct(e,h,c),C.push(nt[u]),C.push(at[u])):36===u?(E=ct(s,f,c),x=ct(e,p,f),m=ct(e,h,c),y=ct(s,h,c),C.push(it[u]),C.push(rt[u])):134===u?(E=1-ct(e,c,f),x=1-ct(s,f,p),m=1-ct(s,c,h),y=1-ct(e,c,h),C.push(it[u]),C.push(rt[u])):9===u?(b=1-ct(e,c,f),E=1-ct(s,c,f),v=ct(s,p,f),S=1-ct(e,h,p),C.push(nt[u]),C.push(it[u])):161===u?(b=ct(s,f,c),E=ct(e,f,c),v=1-ct(e,f,p),S=ct(s,p,h),C.push(nt[u]),C.push(it[u])):37===u?(E=ct(s,f,c),S=1-ct(e,h,p),m=ct(e,h,c),y=ct(s,h,c),C.push(it[u]),C.push(st[u])):133===u?(E=1-ct(e,c,f),S=ct(s,p,h),m=1-ct(s,c,h),y=1-ct(e,c,h),C.push(it[u]),C.push(st[u])):148===u?(x=ct(e,p,f),S=ct(e,p,h),w=ct(s,p,h),y=1-ct(s,c,h),C.push(rt[u]),C.push(at[u])):22===u?(x=1-ct(s,f,p),S=1-ct(s,h,p),w=1-ct(e,h,p),y=ct(e,h,c),C.push(rt[u]),C.push(at[u])):82===u?(b=ct(e,f,c),x=1-ct(e,f,p),v=1-ct(s,f,p),w=1-ct(s,h,p),C.push(nt[u]),C.push(ot[u])):88===u?(b=1-ct(s,c,f),x=ct(s,p,f),v=ct(e,p,f),w=ct(e,p,h),C.push(nt[u]),C.push(ot[u])):73===u?(b=1-ct(e,c,f),E=1-ct(s,c,f),v=ct(s,p,f),m=1-ct(e,c,h),C.push(nt[u]),C.push(it[u])):97===u?(b=ct(s,f,c),E=ct(e,f,c),v=1-ct(e,f,p),m=ct(s,h,c),C.push(nt[u]),C.push(it[u])):145===u?(b=ct(e,f,c),v=1-ct(e,f,p),S=ct(s,p,h),y=1-ct(s,c,h),C.push(nt[u]),C.push(st[u])):25===u?(b=1-ct(s,c,f),v=ct(s,p,f),S=1-ct(e,h,p),y=ct(e,h,c),C.push(nt[u]),C.push(st[u])):70===u?(E=1-ct(e,c,f),x=1-ct(s,f,p),w=1-ct(s,h,p),m=1-ct(e,c,h),C.push(it[u]),C.push(rt[u])):100===u?(E=ct(s,f,c),x=ct(e,p,f),w=ct(e,p,h),m=ct(s,h,c),C.push(it[u]),C.push(rt[u])):34===u?(0===g?(b=1-ct(e,c,f),E=1-ct(s,c,f),x=ct(s,p,f),v=ct(e,p,f),S=ct(e,p,h),w=ct(s,p,h),m=1-ct(s,c,h),y=1-ct(e,c,h)):(b=ct(s,f,c),E=ct(e,f,c),x=1-ct(e,f,p),v=1-ct(s,f,p),S=1-ct(s,h,p),w=1-ct(e,h,p),m=ct(e,h,c),y=ct(s,h,c)),C.push(nt[u]),C.push(it[u]),C.push(st[u]),C.push(at[u])):35===u?(4===g?(b=1-ct(e,c,f),E=1-ct(s,c,f),x=ct(s,p,f),v=ct(e,p,f),S=ct(e,p,h),w=ct(s,p,h),m=1-ct(s,c,h),y=1-ct(e,c,h)):(b=ct(s,f,c),E=ct(e,f,c),x=1-ct(e,f,p),v=1-ct(s,f,p),S=1-ct(s,h,p),w=1-ct(e,h,p),m=ct(e,h,c),y=ct(s,h,c)),C.push(nt[u]),C.push(it[u]),C.push(ot[u]),C.push(at[u])):136===u?(0===g?(b=ct(s,f,c),E=ct(e,f,c),x=1-ct(e,f,p),v=1-ct(s,f,p),S=1-ct(s,h,p),w=1-ct(e,h,p),m=ct(e,h,c),y=ct(s,h,c)):(b=1-ct(e,c,f),E=1-ct(s,c,f),x=ct(s,p,f),v=ct(e,p,f),S=ct(e,p,h),w=ct(s,p,h),m=1-ct(s,c,h),y=1-ct(e,c,h)),C.push(nt[u]),C.push(it[u]),C.push(st[u]),C.push(at[u])):153===u?(0===g?(b=ct(e,f,c),v=1-ct(e,f,p),S=1-ct(e,h,p),y=ct(e,h,c)):(b=1-ct(s,c,f),v=ct(s,p,f),S=ct(s,p,h),y=1-ct(s,c,h)),C.push(nt[u]),C.push(ot[u])):102===u?(0===g?(E=1-ct(e,c,f),x=ct(e,p,f),w=ct(e,p,h),m=1-ct(e,c,h)):(E=ct(s,f,c),x=1-ct(s,f,p),w=1-ct(s,h,p),m=ct(s,h,c)),C.push(it[u]),C.push(at[u])):155===u?(4===g?(b=ct(e,f,c),v=1-ct(e,f,p),S=1-ct(e,h,p),y=ct(e,h,c)):(b=1-ct(s,c,f),v=ct(s,p,f),S=ct(s,p,h),y=1-ct(s,c,h)),C.push(nt[u]),C.push(st[u])):103===u?(4===g?(E=1-ct(e,c,f),x=ct(e,p,f),w=ct(e,p,h),m=1-ct(e,c,h)):(E=ct(s,f,c),x=1-ct(s,f,p),w=1-ct(s,h,p),m=ct(s,h,c)),C.push(it[u]),C.push(rt[u])):152===u?(0===g?(b=ct(e,f,c),x=1-ct(e,f,p),v=1-ct(s,f,p),S=1-ct(s,h,p),w=1-ct(e,h,p),y=ct(e,h,c)):(b=1-ct(s,c,f),x=ct(s,p,f),v=ct(e,p,f),S=ct(e,p,h),w=ct(s,p,h),y=1-ct(s,c,h)),C.push(nt[u]),C.push(rt[u]),C.push(ot[u])):156===u?(4===g?(b=ct(e,f,c),x=1-ct(e,f,p),v=1-ct(s,f,p),S=1-ct(s,h,p),w=1-ct(e,h,p),y=ct(e,h,c)):(b=1-ct(s,c,f),x=ct(s,p,f),v=ct(e,p,f),S=ct(e,p,h),w=ct(s,p,h),y=1-ct(s,c,h)),C.push(nt[u]),C.push(ot[u]),C.push(at[u])):137===u?(0===g?(b=ct(s,f,c),E=ct(e,f,c),v=1-ct(e,f,p),S=1-ct(e,h,p),m=ct(e,h,c),y=ct(s,h,c)):(b=1-ct(e,c,f),E=1-ct(s,c,f),v=ct(s,p,f),S=ct(s,p,h),m=1-ct(s,c,h),y=1-ct(e,c,h)),C.push(nt[u]),C.push(it[u]),C.push(ot[u])):139===u?(4===g?(b=ct(s,f,c),E=ct(e,f,c),v=1-ct(e,f,p),S=1-ct(e,h,p),m=ct(e,h,c),y=ct(s,h,c)):(b=1-ct(e,c,f),E=1-ct(s,c,f),v=ct(s,p,f),S=ct(s,p,h),m=1-ct(s,c,h),y=1-ct(e,c,h)),C.push(nt[u]),C.push(it[u]),C.push(st[u])):98===u?(0===g?(b=1-ct(e,c,f),E=1-ct(s,c,f),x=ct(s,p,f),v=ct(e,p,f),w=ct(e,p,h),m=1-ct(e,c,h)):(b=ct(s,f,c),E=ct(e,f,c),x=1-ct(e,f,p),v=1-ct(s,f,p),w=1-ct(s,h,p),m=ct(s,h,c)),C.push(nt[u]),C.push(it[u]),C.push(at[u])):99===u?(4===g?(b=1-ct(e,c,f),E=1-ct(s,c,f),x=ct(s,p,f),v=ct(e,p,f),w=ct(e,p,h),m=1-ct(e,c,h)):(b=ct(s,f,c),E=ct(e,f,c),x=1-ct(e,f,p),v=1-ct(s,f,p),w=1-ct(s,h,p),m=ct(s,h,c)),C.push(nt[u]),C.push(it[u]),C.push(ot[u])):38===u?(0===g?(E=1-ct(e,c,f),x=ct(e,p,f),S=ct(e,p,h),w=ct(s,p,h),m=1-ct(s,c,h),y=1-ct(e,c,h)):(E=ct(s,f,c),x=1-ct(s,f,p),S=1-ct(s,h,p),w=1-ct(e,h,p),m=ct(e,h,c),y=ct(s,h,c)),C.push(it[u]),C.push(st[u]),C.push(at[u])):39===u?(4===g?(E=1-ct(e,c,f),x=ct(e,p,f),S=ct(e,p,h),w=ct(s,p,h),m=1-ct(s,c,h),y=1-ct(e,c,h)):(E=ct(s,f,c),x=1-ct(s,f,p),S=1-ct(s,h,p),w=1-ct(e,h,p),m=ct(e,h,c),y=ct(s,h,c)),C.push(it[u]),C.push(rt[u]),C.push(at[u])):85===u&&(b=1,E=0,x=1,v=0,S=0,w=1,m=0,y=1),(m<0||m>1||y<0||y>1||b<0||b>1||x<0||x>1||S<0||S>1||w<0||w>1)&&console.log("MarchingSquaresJS-isoBands: "+u+" "+d+" "+h+","+c+","+f+","+p+" "+g+" "+m+" "+y+" "+b+" "+E+" "+x+" "+v+" "+S+" "+w),o.cells[a][l]={cval:u,cval_real:d,flipped:g,topleft:m,topright:y,righttop:b,rightbottom:E,bottomright:x,bottomleft:v,leftbottom:S,lefttop:w,edges:C}}}}}return o}(t,e,n)
return y.polygons?(y.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),l=function(t){var e=[],n=0
return t.cells.forEach((function(t,i){t.forEach((function(t,r){if(void 0!==t){var o=ht[t.cval](t)
"object"==typeof o&&ft(o)?"object"==typeof o[0]&&ft(o[0])?"object"==typeof o[0][0]&&ft(o[0][0])?o.forEach((function(t){t.forEach((function(t){t[0]+=r,t[1]+=i})),e[n++]=t})):(o.forEach((function(t){t[0]+=r,t[1]+=i})),e[n++]=o):console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates"):console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates")}}))})),e}(u)):(y.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),l=function(t){for(var e=[],n=t.rows,i=t.cols,r=[],o=0;o<n;o++)for(var s=0;s<i;s++)if(void 0!==t.cells[o][s]&&t.cells[o][s].edges.length>0){var a=dt(t.cells[o][s]),l=null,u=s,h=o
null!==a&&r.push([a.p[0]+u,a.p[1]+h])
do{if(null===(l=gt(t.cells[h][u],a.x,a.y,a.o)))break
if(r.push([l.p[0]+u,l.p[1]+h]),u+=l.x,a=l,(h+=l.y)<0||h>=n||u<0||u>=i||void 0===t.cells[h][u]){var c=pt(t,u-=l.x,h-=l.y,l.x,l.y,l.o)
if(null===c)break
c.path.forEach((function(t){r.push(t)})),u=c.i,h=c.j,a=c}}while(void 0!==t.cells[h][u]&&t.cells[h][u].edges.length>0)
e.push(r),r=[],t.cells[o][s].edges.length>0&&s--}return e}(u)),"function"==typeof y.successCallback&&y.successCallback(l),l}var x=64,b=16,E=4,w=1,S=[],C=[],T=[],I=[],P=[],A=[],R=[],L=[],M=[],O=[],N=[],D=[],F=[],k=[],j=[],z=[],G=[],B=[],q=[],U=[],Z=[],X=[],Y=[],V=[]
R[85]=O[85]=-1,L[85]=N[85]=0,M[85]=D[85]=1,q[85]=X[85]=1,U[85]=Y[85]=0,Z[85]=V[85]=1,S[85]=I[85]=0,C[85]=P[85]=-1,T[85]=j[85]=0,z[85]=F[85]=0,G[85]=k[85]=1,A[85]=B[85]=1,X[1]=X[169]=0,Y[1]=Y[169]=-1,V[1]=V[169]=0,F[1]=F[169]=-1,k[1]=k[169]=0,j[1]=j[169]=0,O[4]=O[166]=0,N[4]=N[166]=-1,D[4]=D[166]=1,z[4]=z[166]=1,G[4]=G[166]=0,B[4]=B[166]=0,R[16]=R[154]=0,L[16]=L[154]=1,M[16]=M[154]=1,I[16]=I[154]=1,P[16]=P[154]=0,A[16]=A[154]=1,q[64]=q[106]=0,U[64]=U[106]=1,Z[64]=Z[106]=0,S[64]=S[106]=-1,C[64]=C[106]=0,T[64]=T[106]=1,q[2]=q[168]=0,U[2]=U[168]=-1,Z[2]=Z[168]=1,X[2]=X[168]=0,Y[2]=Y[168]=-1,V[2]=V[168]=0,F[2]=F[168]=-1,k[2]=k[168]=0,j[2]=j[168]=0,z[2]=z[168]=-1,G[2]=G[168]=0,B[2]=B[168]=1,R[8]=R[162]=0,L[8]=L[162]=-1,M[8]=M[162]=0,O[8]=O[162]=0,N[8]=N[162]=-1,D[8]=D[162]=1,F[8]=F[162]=1,k[8]=k[162]=0,j[8]=j[162]=1,z[8]=z[162]=1,G[8]=G[162]=0,B[8]=B[162]=0,R[32]=R[138]=0,L[32]=L[138]=1,M[32]=M[138]=1,O[32]=O[138]=0,N[32]=N[138]=1,D[32]=D[138]=0,S[32]=S[138]=1,C[32]=C[138]=0,T[32]=T[138]=0,I[32]=I[138]=1,P[32]=P[138]=0,A[32]=A[138]=1,X[128]=X[42]=0,Y[128]=Y[42]=1,V[128]=V[42]=1,q[128]=q[42]=0,U[128]=U[42]=1,Z[128]=Z[42]=0,S[128]=S[42]=-1,C[128]=C[42]=0,T[128]=T[42]=1,I[128]=I[42]=-1,P[128]=P[42]=0,A[128]=A[42]=0,O[5]=O[165]=-1,N[5]=N[165]=0,D[5]=D[165]=0,X[5]=X[165]=1,Y[5]=Y[165]=0,V[5]=V[165]=0,z[20]=z[150]=0,G[20]=G[150]=1,B[20]=B[150]=1,I[20]=I[150]=0,P[20]=P[150]=-1,A[20]=A[150]=1,R[80]=R[90]=-1,L[80]=L[90]=0,M[80]=M[90]=1,q[80]=q[90]=1,U[80]=U[90]=0,Z[80]=Z[90]=1,F[65]=F[105]=0,k[65]=k[105]=1,j[65]=j[105]=0,S[65]=S[105]=0,C[65]=C[105]=-1,T[65]=T[105]=0,R[160]=R[10]=-1,L[160]=L[10]=0,M[160]=M[10]=1,O[160]=O[10]=-1,N[160]=N[10]=0,D[160]=D[10]=0,X[160]=X[10]=1,Y[160]=Y[10]=0,V[160]=V[10]=0,q[160]=q[10]=1,U[160]=U[10]=0,Z[160]=Z[10]=1,z[130]=z[40]=0,G[130]=G[40]=1,B[130]=B[40]=1,F[130]=F[40]=0,k[130]=k[40]=1,j[130]=j[40]=0,S[130]=S[40]=0,C[130]=C[40]=-1,T[130]=T[40]=0,I[130]=I[40]=0,P[130]=P[40]=-1,A[130]=A[40]=1,O[37]=O[133]=0,N[37]=N[133]=1,D[37]=D[133]=1,X[37]=X[133]=0,Y[37]=Y[133]=1,V[37]=V[133]=0,S[37]=S[133]=-1,C[37]=C[133]=0,T[37]=T[133]=0,I[37]=I[133]=1,P[37]=P[133]=0,A[37]=A[133]=0,z[148]=z[22]=-1,G[148]=G[22]=0,B[148]=B[22]=0,X[148]=X[22]=0,Y[148]=Y[22]=-1,V[148]=V[22]=1,q[148]=q[22]=0,U[148]=U[22]=1,Z[148]=Z[22]=1,I[148]=I[22]=-1,P[148]=P[22]=0,A[148]=A[22]=1,R[82]=R[88]=0,L[82]=L[88]=-1,M[82]=M[88]=1,z[82]=z[88]=1,G[82]=G[88]=0,B[82]=B[88]=1,F[82]=F[88]=-1,k[82]=k[88]=0,j[82]=j[88]=1,q[82]=q[88]=0,U[82]=U[88]=-1,Z[82]=Z[88]=0,R[73]=R[97]=0,L[73]=L[97]=1,M[73]=M[97]=0,O[73]=O[97]=0,N[73]=N[97]=-1,D[73]=D[97]=0,F[73]=F[97]=1,k[73]=k[97]=0,j[73]=j[97]=0,S[73]=S[97]=1,C[73]=C[97]=0,T[73]=T[97]=1,R[145]=R[25]=0,L[145]=L[25]=-1,M[145]=M[25]=0,F[145]=F[25]=1,k[145]=k[25]=0,j[145]=j[25]=1,X[145]=X[25]=0,Y[145]=Y[25]=1,V[145]=V[25]=1,I[145]=I[25]=-1,P[145]=P[25]=0,A[145]=A[25]=0,O[70]=O[100]=0,N[70]=N[100]=1,D[70]=D[100]=0,z[70]=z[100]=-1,G[70]=G[100]=0,B[70]=B[100]=1,q[70]=q[100]=0,U[70]=U[100]=-1,Z[70]=Z[100]=1,S[70]=S[100]=1,C[70]=C[100]=0,T[70]=T[100]=0,O[101]=O[69]=0,N[101]=N[69]=1,D[101]=D[69]=0,S[101]=S[69]=1,C[101]=C[69]=0,T[101]=T[69]=0,X[149]=X[21]=0,Y[149]=Y[21]=1,V[149]=V[21]=1,I[149]=I[21]=-1,P[149]=P[21]=0,A[149]=A[21]=0,z[86]=z[84]=-1,G[86]=G[84]=0,B[86]=B[84]=1,q[86]=q[84]=0,U[86]=U[84]=-1,Z[86]=Z[84]=1,R[89]=R[81]=0,L[89]=L[81]=-1,M[89]=M[81]=0,F[89]=F[81]=1,k[89]=k[81]=0,j[89]=j[81]=1,R[96]=R[74]=0,L[96]=L[74]=1,M[96]=M[74]=0,O[96]=O[74]=-1,N[96]=N[74]=0,D[96]=D[74]=1,q[96]=q[74]=1,U[96]=U[74]=0,Z[96]=Z[74]=0,S[96]=S[74]=1,C[96]=C[74]=0,T[96]=T[74]=1,R[24]=R[146]=0,L[24]=L[146]=-1,M[24]=M[146]=1,z[24]=z[146]=1,G[24]=G[146]=0,B[24]=B[146]=1,F[24]=F[146]=0,k[24]=k[146]=1,j[24]=j[146]=1,I[24]=I[146]=0,P[24]=P[146]=-1,A[24]=A[146]=0,O[6]=O[164]=-1,N[6]=N[164]=0,D[6]=D[164]=1,z[6]=z[164]=-1,G[6]=G[164]=0,B[6]=B[164]=0,X[6]=X[164]=0,Y[6]=Y[164]=-1,V[6]=V[164]=1,q[6]=q[164]=1,U[6]=U[164]=0,Z[6]=Z[164]=0,F[129]=F[41]=0,k[129]=k[41]=1,j[129]=j[41]=1,X[129]=X[41]=0,Y[129]=Y[41]=1,V[129]=V[41]=0,S[129]=S[41]=-1,C[129]=C[41]=0,T[129]=T[41]=0,I[129]=I[41]=0,P[129]=P[41]=-1,A[129]=A[41]=0,z[66]=z[104]=0,G[66]=G[104]=1,B[66]=B[104]=0,F[66]=F[104]=-1,k[66]=k[104]=0,j[66]=j[104]=1,q[66]=q[104]=0,U[66]=U[104]=-1,Z[66]=Z[104]=0,S[66]=S[104]=0,C[66]=C[104]=-1,T[66]=T[104]=1,R[144]=R[26]=-1,L[144]=L[26]=0,M[144]=M[26]=0,X[144]=X[26]=1,Y[144]=Y[26]=0,V[144]=V[26]=1,q[144]=q[26]=0,U[144]=U[26]=1,Z[144]=Z[26]=1,I[144]=I[26]=-1,P[144]=P[26]=0,A[144]=A[26]=1,O[36]=O[134]=0,N[36]=N[134]=1,D[36]=D[134]=1,z[36]=z[134]=0,G[36]=G[134]=1,B[36]=B[134]=0,S[36]=S[134]=0,C[36]=C[134]=-1,T[36]=T[134]=1,I[36]=I[134]=1,P[36]=P[134]=0,A[36]=A[134]=0,R[9]=R[161]=-1,L[9]=L[161]=0,M[9]=M[161]=0,O[9]=O[161]=0,N[9]=N[161]=-1,D[9]=D[161]=0,F[9]=F[161]=1,k[9]=k[161]=0,j[9]=j[161]=0,X[9]=X[161]=1,Y[9]=Y[161]=0,V[9]=V[161]=1,R[136]=0,L[136]=1,M[136]=1,O[136]=0,N[136]=1,D[136]=0,z[136]=-1,G[136]=0,B[136]=1,F[136]=-1,k[136]=0,j[136]=0,X[136]=0,Y[136]=-1,V[136]=0,q[136]=0,U[136]=-1,Z[136]=1,S[136]=1,C[136]=0,T[136]=0,I[136]=1,P[136]=0,A[136]=1,R[34]=0,L[34]=-1,M[34]=0,O[34]=0,N[34]=-1,D[34]=1,z[34]=1,G[34]=0,B[34]=0,F[34]=1,k[34]=0,j[34]=1,X[34]=0,Y[34]=1,V[34]=1,q[34]=0,U[34]=1,Z[34]=0,S[34]=-1,C[34]=0,T[34]=1,I[34]=-1,P[34]=0,A[34]=0,R[35]=0,L[35]=1,M[35]=1,O[35]=0,N[35]=-1,D[35]=1,z[35]=1,G[35]=0,B[35]=0,F[35]=-1,k[35]=0,j[35]=0,X[35]=0,Y[35]=-1,V[35]=0,q[35]=0,U[35]=1,Z[35]=0,S[35]=-1,C[35]=0,T[35]=1,I[35]=1,P[35]=0,A[35]=1,R[153]=0,L[153]=1,M[153]=1,F[153]=-1,k[153]=0,j[153]=0,X[153]=0,Y[153]=-1,V[153]=0,I[153]=1,P[153]=0,A[153]=1,O[102]=0,N[102]=-1,D[102]=1,z[102]=1,G[102]=0,B[102]=0,q[102]=0,U[102]=1,Z[102]=0,S[102]=-1,C[102]=0,T[102]=1,R[155]=0,L[155]=-1,M[155]=0,F[155]=1,k[155]=0,j[155]=1,X[155]=0,Y[155]=1,V[155]=1,I[155]=-1,P[155]=0,A[155]=0,O[103]=0,N[103]=1,D[103]=0,z[103]=-1,G[103]=0,B[103]=1,q[103]=0,U[103]=-1,Z[103]=1,S[103]=1,C[103]=0,T[103]=0,R[152]=0,L[152]=1,M[152]=1,z[152]=-1,G[152]=0,B[152]=1,F[152]=-1,k[152]=0,j[152]=0,X[152]=0,Y[152]=-1,V[152]=0,q[152]=0,U[152]=-1,Z[152]=1,I[152]=1,P[152]=0,A[152]=1,R[156]=0,L[156]=-1,M[156]=1,z[156]=1,G[156]=0,B[156]=1,F[156]=-1,k[156]=0,j[156]=0,X[156]=0,Y[156]=-1,V[156]=0,q[156]=0,U[156]=1,Z[156]=1,I[156]=-1,P[156]=0,A[156]=1,R[137]=0,L[137]=1,M[137]=1,O[137]=0,N[137]=1,D[137]=0,F[137]=-1,k[137]=0,j[137]=0,X[137]=0,Y[137]=-1,V[137]=0,S[137]=1,C[137]=0,T[137]=0,I[137]=1,P[137]=0,A[137]=1,R[139]=0,L[139]=1,M[139]=1,O[139]=0,N[139]=-1,D[139]=0,F[139]=1,k[139]=0,j[139]=0,X[139]=0,Y[139]=1,V[139]=0,S[139]=-1,C[139]=0,T[139]=0,I[139]=1,P[139]=0,A[139]=1,R[98]=0,L[98]=-1,M[98]=0,O[98]=0,N[98]=-1,D[98]=1,z[98]=1,G[98]=0,B[98]=0,F[98]=1,k[98]=0,j[98]=1,q[98]=0,U[98]=1,Z[98]=0,S[98]=-1,C[98]=0,T[98]=1,R[99]=0,L[99]=1,M[99]=0,O[99]=0,N[99]=-1,D[99]=1,z[99]=1,G[99]=0,B[99]=0,F[99]=-1,k[99]=0,j[99]=1,q[99]=0,U[99]=-1,Z[99]=0,S[99]=1,C[99]=0,T[99]=1,O[38]=0,N[38]=-1,D[38]=1,z[38]=1,G[38]=0,B[38]=0,X[38]=0,Y[38]=1,V[38]=1,q[38]=0,U[38]=1,Z[38]=0,S[38]=-1,C[38]=0,T[38]=1,I[38]=-1,P[38]=0,A[38]=0,O[39]=0,N[39]=1,D[39]=1,z[39]=-1,G[39]=0,B[39]=0,X[39]=0,Y[39]=-1,V[39]=1,q[39]=0,U[39]=1,Z[39]=0,S[39]=-1,C[39]=0,T[39]=1,I[39]=1,P[39]=0,A[39]=0
var W=function(t){return[[t.bottomleft,0],[0,0],[0,t.leftbottom]]},H=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0]]},$=function(t){return[[t.topright,1],[1,1],[1,t.righttop]]},K=function(t){return[[0,t.lefttop],[0,1],[t.topleft,1]]},J=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop]]},Q=function(t){return[[t.bottomright,0],[t.bottomleft,0],[1,t.righttop],[1,t.rightbottom]]},tt=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.topleft,1],[t.topright,1]]},et=function(t){return[[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},nt=[],it=[],rt=[],ot=[],st=[],at=[],lt=[],ut=[]
ot[1]=st[1]=18,ot[169]=st[169]=18,rt[4]=it[4]=12,rt[166]=it[166]=12,nt[16]=ut[16]=4,nt[154]=ut[154]=4,at[64]=lt[64]=22,at[106]=lt[106]=22,rt[2]=at[2]=17,ot[2]=st[2]=18,rt[168]=at[168]=17,ot[168]=st[168]=18,nt[8]=ot[8]=9,it[8]=rt[8]=12,nt[162]=ot[162]=9,it[162]=rt[162]=12,nt[32]=ut[32]=4,it[32]=lt[32]=1,nt[138]=ut[138]=4,it[138]=lt[138]=1,st[128]=ut[128]=21,at[128]=lt[128]=22,st[42]=ut[42]=21,at[42]=lt[42]=22,it[5]=st[5]=14,it[165]=st[165]=14,rt[20]=ut[20]=6,rt[150]=ut[150]=6,nt[80]=at[80]=11,nt[90]=at[90]=11,ot[65]=lt[65]=3,ot[105]=lt[105]=3,nt[160]=at[160]=11,it[160]=st[160]=14,nt[10]=at[10]=11,it[10]=st[10]=14,rt[130]=ut[130]=6,ot[130]=lt[130]=3,rt[40]=ut[40]=6,ot[40]=lt[40]=3,it[101]=lt[101]=1,it[69]=lt[69]=1,st[149]=ut[149]=21,st[21]=ut[21]=21,rt[86]=at[86]=17,rt[84]=at[84]=17,nt[89]=ot[89]=9,nt[81]=ot[81]=9,nt[96]=lt[96]=0,it[96]=at[96]=15,nt[74]=lt[74]=0,it[74]=at[74]=15,nt[24]=rt[24]=8,ot[24]=ut[24]=7,nt[146]=rt[146]=8,ot[146]=ut[146]=7,it[6]=at[6]=15,rt[6]=st[6]=16,it[164]=at[164]=15,rt[164]=st[164]=16,ot[129]=ut[129]=7,st[129]=lt[129]=20,ot[41]=ut[41]=7,st[41]=lt[41]=20,rt[66]=lt[66]=2,ot[66]=at[66]=19,rt[104]=lt[104]=2,ot[104]=at[104]=19,nt[144]=st[144]=10,at[144]=ut[144]=23,nt[26]=st[26]=10,at[26]=ut[26]=23,it[36]=ut[36]=5,rt[36]=lt[36]=2,it[134]=ut[134]=5,rt[134]=lt[134]=2,nt[9]=st[9]=10,it[9]=ot[9]=13,nt[161]=st[161]=10,it[161]=ot[161]=13,it[37]=ut[37]=5,st[37]=lt[37]=20,it[133]=ut[133]=5,st[133]=lt[133]=20,rt[148]=st[148]=16,at[148]=ut[148]=23,rt[22]=st[22]=16,at[22]=ut[22]=23,nt[82]=rt[82]=8,ot[82]=at[82]=19,nt[88]=rt[88]=8,ot[88]=at[88]=19,nt[73]=lt[73]=0,it[73]=ot[73]=13,nt[97]=lt[97]=0,it[97]=ot[97]=13,nt[145]=ot[145]=9,st[145]=ut[145]=21,nt[25]=ot[25]=9,st[25]=ut[25]=21,it[70]=lt[70]=1,rt[70]=at[70]=17,it[100]=lt[100]=1,rt[100]=at[100]=17,nt[34]=ot[34]=9,it[34]=rt[34]=12,st[34]=ut[34]=21,at[34]=lt[34]=22,nt[136]=ut[136]=4,it[136]=lt[136]=1,rt[136]=at[136]=17,ot[136]=st[136]=18,nt[35]=ut[35]=4,it[35]=rt[35]=12,ot[35]=st[35]=18,at[35]=lt[35]=22,nt[153]=ut[153]=4,ot[153]=st[153]=18,it[102]=rt[102]=12,at[102]=lt[102]=22,nt[155]=ot[155]=9,st[155]=ut[155]=23,it[103]=lt[103]=1,rt[103]=at[103]=17,nt[152]=ut[152]=4,rt[152]=at[152]=17,ot[152]=st[152]=18,nt[156]=rt[156]=8,ot[156]=st[156]=18,at[156]=ut[156]=23,nt[137]=ut[137]=4,it[137]=lt[137]=1,ot[137]=st[137]=18,nt[139]=ut[139]=4,it[139]=ot[139]=13,st[139]=lt[139]=20,nt[98]=ot[98]=9,it[98]=rt[98]=12,at[98]=lt[98]=22,nt[99]=lt[99]=0,it[99]=rt[99]=12,ot[99]=at[99]=19,it[38]=rt[38]=12,st[38]=ut[38]=21,at[38]=lt[38]=22,it[39]=ut[39]=5,rt[39]=st[39]=16,at[39]=lt[39]=22
var ht=[]
function ct(t,e,n){return(t-e)/(n-e)}function ft(t){return t.constructor.toString().indexOf("Array")>-1}function pt(t,e,n,i,r,o){for(var s=t.cells[n][e],a=s.cval_real,l=e+i,u=n+r,h=[],c=!1;!c;){if(void 0===t.cells[u]||void 0===t.cells[u][l])if(u-=r,l-=i,a=(s=t.cells[u][l]).cval_real,-1===r)if(0===o)if(a&w)h.push([l,u]),i=-1,r=0,o=0
else{if(!(a&E)){h.push([l+s.bottomright,u]),i=0,r=1,o=1,c=!0
break}h.push([l+1,u]),i=1,r=0,o=0}else{if(!(a&w)){if(a&E){h.push([l+s.bottomright,u]),i=0,r=1,o=1,c=!0
break}h.push([l+s.bottomleft,u]),i=0,r=1,o=0,c=!0
break}h.push([l,u]),i=-1,r=0,o=0}else if(1===r)if(0===o){if(!(a&b)){if(a&x){h.push([l+s.topleft,u+1]),i=0,r=-1,o=0,c=!0
break}h.push([l+s.topright,u+1]),i=0,r=-1,o=1,c=!0
break}h.push([l+1,u+1]),i=1,r=0,o=1}else h.push([l+1,u+1]),i=1,r=0,o=1
else if(-1===i)if(0===o){if(!(a&x)){if(a&w){h.push([l,u+s.leftbottom]),i=1,r=0,o=0,c=!0
break}h.push([l,u+s.lefttop]),i=1,r=0,o=1,c=!0
break}h.push([l,u+1]),i=0,r=1,o=0}else{if(!(a&x)){console.log("MarchingSquaresJS-isoBands: wtf")
break}h.push([l,u+1]),i=0,r=1,o=0}else{if(1!==i){console.log("MarchingSquaresJS-isoBands: we came from nowhere!")
break}if(0===o){if(!(a&E)){h.push([l+1,u+s.rightbottom]),i=-1,r=0,o=0,c=!0
break}h.push([l+1,u]),i=0,r=-1,o=1}else{if(!(a&E)){if(a&b){h.push([l+1,u+s.righttop]),i=-1,r=0,o=1
break}h.push([l+1,u+s.rightbottom]),i=-1,r=0,o=0,c=!0
break}h.push([l+1,u]),i=0,r=-1,o=1}}else if(a=(s=t.cells[u][l]).cval_real,-1===i)if(0===o)if(void 0!==t.cells[u-1]&&void 0!==t.cells[u-1][l])i=0,r=-1,o=1
else{if(!(a&w)){h.push([l+s.bottomright,u]),i=0,r=1,o=1,c=!0
break}h.push([l,u])}else{if(!(a&x)){console.log("MarchingSquaresJS-isoBands: found entry from top at "+l+","+u)
break}console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!")}else if(1===i){if(0===o){console.log("MarchingSquaresJS-isoBands: wtf")
break}if(void 0!==t.cells[u+1]&&void 0!==t.cells[u+1][l])i=0,r=1,o=0
else{if(!(a&b)){h.push([l+s.topleft,u+1]),i=0,r=-1,o=0,c=!0
break}h.push([l+1,u+1]),i=1,r=0,o=1}}else if(-1===r){if(1!==o){console.log("MarchingSquaresJS-isoBands: wtf")
break}if(void 0!==t.cells[u][l+1])i=1,r=0,o=1
else{if(!(a&E)){h.push([l+1,u+s.righttop]),i=-1,r=0,o=1,c=!0
break}h.push([l+1,u]),i=0,r=-1,o=1}}else{if(1!==r){console.log("MarchingSquaresJS-isoBands: where did we came from???")
break}if(0!==o){console.log("MarchingSquaresJS-isoBands: wtf")
break}if(void 0!==t.cells[u][l-1])i=-1,r=0,o=0
else{if(!(a&x)){h.push([l,u+s.leftbottom]),i=1,r=0,o=0,c=!0
break}h.push([l,u+1]),i=0,r=1,o=0}}if(u+=r,(l+=i)===e&&u===n)break}return{path:h,i:l,j:u,x:i,y:r,o:o}}function dt(t){if(t.edges.length>0){var e=t.edges[t.edges.length-1],n=t.cval_real
switch(e){case 0:return n&b?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0}
case 1:return n&E?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0}
case 2:return n&E?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0}
case 3:return n&w?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0}
case 4:return n&b?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1}
case 5:return n&E?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0}
case 6:return n&E?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topright,1],x:0,y:-1,o:1}
case 7:return n&w?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0}
case 8:return n&E?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.righttop],x:-1,y:0,o:1}
case 9:return n&w?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0}
case 10:return n&w?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.righttop],x:-1,y:0,o:1}
case 11:return n&x?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1}
case 12:return n&E?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0}
case 13:return n&w?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0}
case 14:return n&w?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0}
case 15:return n&x?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1}
case 16:return n&E?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.leftbottom],x:1,y:0,o:0}
case 17:return n&x?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1}
case 18:return n&w?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0}
case 19:return n&x?{p:[t.bottomleft,0],x:0,y:1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1}
case 20:return n&x?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.leftbottom],x:1,y:0,o:0}
case 21:return n&b?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.topright,1],x:0,y:-1,o:1}
case 22:return n&x?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1}
case 23:return n&b?{p:[0,t.lefttop],x:1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1}
default:console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t)}}return null}function gt(t,e,n,i){var r,o,s,a,l,u=t.cval
switch(e){case-1:0===i?(r=it[u],s=O[u],a=N[u],l=D[u]):(r=nt[u],s=R[u],a=L[u],l=M[u])
break
case 1:0===i?(r=st[u],s=X[u],a=Y[u],l=V[u]):(r=at[u],s=q[u],a=U[u],l=Z[u])
break
default:switch(n){case-1:0===i?(r=lt[u],s=S[u],a=C[u],l=T[u]):(r=ut[u],s=I[u],a=P[u],l=A[u])
break
case 1:0===i?(r=ot[u],s=F[u],a=k[u],l=j[u]):(r=rt[u],s=z[u],a=G[u],l=B[u])}}if(o=t.edges.indexOf(r),void 0===t.edges[o])return null
switch(function(t,e){delete t.edges[e]
for(var n=e+1;n<t.edges.length;n++)t.edges[n-1]=t.edges[n]
t.edges.pop()}(t,o),u=t.cval_real,r){case 0:u&b?(e=t.topleft,n=1):(e=1,n=t.righttop)
break
case 1:u&E?(e=1,n=t.rightbottom):(e=t.topleft,n=1)
break
case 2:u&E?(e=t.topleft,n=1):(e=t.bottomright,n=0)
break
case 3:u&w?(e=t.bottomleft,n=0):(e=t.topleft,n=1)
break
case 4:u&b?(e=t.topright,n=1):(e=1,n=t.righttop)
break
case 5:u&E?(e=1,n=t.rightbottom):(e=t.topright,n=1)
break
case 6:u&E?(e=t.topright,n=1):(e=t.bottomright,n=0)
break
case 7:u&w?(e=t.bottomleft,n=0):(e=t.topright,n=1)
break
case 8:u&E?(e=1,n=t.righttop):(e=t.bottomright,n=0)
break
case 9:u&w?(e=t.bottomleft,n=0):(e=1,n=t.righttop)
break
case 10:u&w?(e=1,n=t.righttop):(e=0,n=t.leftbottom)
break
case 11:u&x?(e=0,n=t.lefttop):(e=1,n=t.righttop)
break
case 12:u&E?(e=1,n=t.rightbottom):(e=t.bottomright,n=0)
break
case 13:u&w?(e=t.bottomleft,n=0):(e=1,n=t.rightbottom)
break
case 14:u&w?(e=1,n=t.rightbottom):(e=0,n=t.leftbottom)
break
case 15:u&x?(e=0,n=t.lefttop):(e=1,n=t.rightbottom)
break
case 16:u&E?(e=0,n=t.leftbottom):(e=t.bottomright,n=0)
break
case 17:u&x?(e=0,n=t.lefttop):(e=t.bottomright,n=0)
break
case 18:u&w?(e=t.bottomleft,n=0):(e=0,n=t.leftbottom)
break
case 19:u&x?(e=0,n=t.lefttop):(e=t.bottomleft,n=0)
break
case 20:u&x?(e=0,n=t.leftbottom):(e=t.topleft,n=1)
break
case 21:u&b?(e=t.topright,n=1):(e=0,n=t.leftbottom)
break
case 22:u&x?(e=0,n=t.lefttop):(e=t.topleft,n=1)
break
case 23:u&b?(e=t.topright,n=1):(e=0,n=t.lefttop)
break
default:return console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t),null}return void 0!==e&&void 0!==n&&void 0!==s&&void 0!==a&&void 0!==l||(console.log("MarchingSquaresJS-isoBands: undefined value!"),console.log(t),console.log(e+" "+n+" "+s+" "+a+" "+l)),{p:[e,n],x:s,y:a,o:l}}function _t(t,e,n){if(n=n||{},!l.isObject(n))throw new Error("options is invalid")
var i=n.zProperty||"elevation",r=n.commonProperties||{},o=n.breaksProperties||[]
if(a.collectionOf(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required")
if(!Array.isArray(e))throw new Error("breaks is not an Array")
if(!l.isObject(r))throw new Error("commonProperties is not an Object")
if(!Array.isArray(o))throw new Error("breaksProperties is not an Array")
var s=function(t,e){if(e=e||{},!l.isObject(e))throw new Error("options is invalid")
var n=e.zProperty||"elevation",i=e.flip,r=e.flags
a.collectionOf(t,"Point","input must contain Points")
for(var o=function(t,e){var n={}
return h.featureEach(t,(function(t){var e=a.getCoords(t)[1]
n[e]||(n[e]=[]),n[e].push(t)})),Object.keys(n).map((function(t){return n[t].sort((function(t,e){return a.getCoords(t)[0]-a.getCoords(e)[0]}))})).sort((function(t,n){return e?a.getCoords(t[0])[1]-a.getCoords(n[0])[1]:a.getCoords(n[0])[1]-a.getCoords(t[0])[1]}))}(t,i),s=[],u=0;u<o.length;u++){for(var c=o[u],f=[],p=0;p<c.length;p++){var d=c[p]
d.properties[n]?f.push(d.properties[n]):f.push(0),!0===r&&(d.properties.matrixPosition=[u,p])}s.push(f)}return s}(t,{zProperty:i,flip:!0}),u=function(t,e,n){for(var i=[],r=1;r<e.length;r++){var o=+e[r-1],s=+e[r],a=yt(mt(v(t,o,s-o))),l={}
l.groupedRings=a,l[n]=o+"-"+s,i.push(l)}return i}(s,e,i)
u=function(t,e,n){var i=f.default(n),r=i[2]-i[0],o=i[3]-i[1],s=i[0],a=i[1],l=e[0].length-1,u=e.length-1,h=r/l,c=o/u,p=function(t){t[0]=t[0]*h+s,t[1]=t[1]*c+a}
return t.forEach((function(t){t.groupedRings.forEach((function(t){t.forEach((function(t){t.forEach(p)}))}))})),t}(u,s,t)
var c=u.map((function(t,e){if(o[e]&&!l.isObject(o[e]))throw new Error("Each mappedProperty is required to be an Object")
var n=_.default({},r,o[e])
return n[i]=t[i],l.multiPolygon(t.groupedRings,n)}))
return l.featureCollection(c)}function mt(t){var e=[],n=[]
t.forEach((function(t){var i=p.default(l.polygon([t]))
n.push(i),e.push({ring:t,area:i})})),n.sort((function(t,e){return e-t}))
var i=[]
return n.forEach((function(t){for(var n=0;n<e.length;n++)if(e[n].area===t){i.push(e[n].ring),e.splice(n,1)
break}})),i}function yt(t){for(var e=t.map((function(t){return{lrCoordinates:t,grouped:!1}})),n=[];!xt(e);)for(var i=0;i<e.length;i++)if(!e[i].grouped){var r=[]
r.push(e[i].lrCoordinates),e[i].grouped=!0
for(var o=l.polygon([e[i].lrCoordinates]),s=i+1;s<e.length;s++)e[s].grouped||vt(l.polygon([e[s].lrCoordinates]),o)&&(r.push(e[s].lrCoordinates),e[s].grouped=!0)
n.push(r)}return n}function vt(t,e){for(var n=g.default(t),i=0;i<n.features.length;i++)if(!d.default(n.features[i],e))return!1
return!0}function xt(t){for(var e=0;e<t.length;e++)if(!1===t[e].grouped)return!1
return!0}ht[1]=ht[169]=W,ht[4]=ht[166]=H,ht[16]=ht[154]=$,ht[64]=ht[106]=K,ht[168]=ht[2]=J,ht[162]=ht[8]=Q,ht[138]=ht[32]=tt,ht[42]=ht[128]=et,ht[5]=ht[165]=function(t){return[[0,0],[0,t.leftbottom],[1,t.rightbottom],[1,0]]},ht[20]=ht[150]=function(t){return[[1,0],[t.bottomright,0],[t.topright,1],[1,1]]},ht[80]=ht[90]=function(t){return[[1,1],[1,t.righttop],[0,t.lefttop],[0,1]]},ht[65]=ht[105]=function(t){return[[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},ht[160]=ht[10]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.leftbottom],[0,t.lefttop]]},ht[130]=ht[40]=function(t){return[[t.topleft,1],[t.topright,1],[t.bottomright,0],[t.bottomleft,0]]},ht[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},ht[101]=ht[69]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,1],[t.topleft,1]]},ht[149]=ht[21]=function(t){return[[t.topright,1],[1,1],[1,0],[0,0],[0,t.leftbottom]]},ht[86]=ht[84]=function(t){return[[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[1,1]]},ht[89]=ht[81]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,1]]},ht[96]=ht[74]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.lefttop],[0,1],[t.topleft,1]]},ht[24]=ht[146]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[t.topright,1]]},ht[6]=ht[164]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop]]},ht[129]=ht[41]=function(t){return[[t.topright,1],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1]]},ht[66]=ht[104]=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},ht[144]=ht[26]=function(t){return[[1,1],[1,t.righttop],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},ht[36]=ht[134]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[t.topleft,1],[t.topright,1]]},ht[9]=ht[161]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom]]},ht[37]=ht[133]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},ht[148]=ht[22]=function(t){return[[1,1],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},ht[82]=ht[88]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1]]},ht[73]=ht[97]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},ht[145]=ht[25]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},ht[70]=ht[100]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},ht[34]=function(t){return[et(t),Q(t)]},ht[35]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},ht[136]=function(t){return[tt(t),J(t)]},ht[153]=function(t){return[$(t),W(t)]},ht[102]=function(t){return[H(t),K(t)]},ht[155]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},ht[103]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},ht[152]=function(t){return[$(t),J(t)]},ht[156]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},ht[137]=function(t){return[tt(t),W(t)]},ht[139]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},ht[98]=function(t){return[Q(t),K(t)]},ht[99]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},ht[38]=function(t){return[H(t),et(t)]},ht[39]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},t.exports=_t,t.exports.default=_t},3183:(t,e,n)=>{"use strict"
var i=n(463),r=n(9611),o=n(2317),s=n(6303),a=n(8017)
function l(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var u=l(i),h=l(a),c={successCallback:null,verbose:!1},f={}
function p(t,e,n){n=n||{}
for(var i=Object.keys(c),r=0;r<i.length;r++){var o=i[r],s=n[o]
s=null!=s?s:c[o],f[o]=s}f.verbose&&console.log("MarchingSquaresJS-isoContours: computing isocontour for "+e)
var a,l,u,h=(a=function(t,e){for(var n=t.length-1,i=t[0].length-1,r={rows:n,cols:i,cells:[]},o=0;o<n;++o){r.cells[o]=[]
for(var s=0;s<i;++s){var a=0,l=t[o+1][s],u=t[o+1][s+1],h=t[o][s+1],c=t[o][s]
if(!(isNaN(l)||isNaN(u)||isNaN(h)||isNaN(c))){a|=l>=e?8:0,a|=u>=e?4:0,a|=h>=e?2:0
var f,p,g,_,m=!1
if(5==(a|=c>=e?1:0)||10===a){var y=(l+u+h+c)/4
5===a&&y<e?(a=10,m=!0):10===a&&y<e&&(a=5,m=!0)}0!==a&&15!==a&&(f=p=g=_=.5,1===a?(g=1-d(e,l,c),p=1-d(e,h,c)):2===a?(p=d(e,c,h),_=1-d(e,u,h)):3===a?(g=1-d(e,l,c),_=1-d(e,u,h)):4===a?(f=d(e,l,u),_=d(e,h,u)):5===a?(f=d(e,l,u),_=d(e,h,u),p=1-d(e,h,c),g=1-d(e,l,c)):6===a?(p=d(e,c,h),f=d(e,l,u)):7===a?(g=1-d(e,l,c),f=d(e,l,u)):8===a?(g=d(e,c,l),f=1-d(e,u,l)):9===a?(p=1-d(e,h,c),f=1-d(e,u,l)):10===a?(f=1-d(e,u,l),_=1-d(e,u,h),p=d(e,c,h),g=d(e,c,l)):11===a?(f=1-d(e,u,l),_=1-d(e,u,h)):12===a?(g=d(e,c,l),_=d(e,h,u)):13===a?(p=1-d(e,h,c),_=d(e,h,u)):14===a?(g=d(e,c,l),p=d(e,c,h)):console.log("MarchingSquaresJS-isoContours: Illegal cval detected: "+a),r.cells[o][s]={cval:a,flipped:m,top:f,right:_,bottom:p,left:g})}}}return r}(t,e),l=[],u=0,a.cells.forEach((function(t,e){t.forEach((function(t,n){if(void 0!==t&&5!==(f=t).cval&&10!==f.cval&&!g(t)){var i=function(t,e,n){var i,r,o=t.length,s=[],a=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],l=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],u=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],h=t[e][n],c=h.cval,f=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"][c],p=m(h,f)
s.push([n+p[0],e+p[1]]),p=m(h,f=u[c]),s.push([n+p[0],e+p[1]]),_(h)
for(var d=n+a[c],g=e+l[c],y=c;d>=0&&g>=0&&g<o&&(d!=n||g!=e)&&void 0!==(h=t[g][d]);){if(0===(c=h.cval)||15===c)return{path:s,info:"mergeable"}
f=u[c],i=a[c],r=l[c],5!==c&&10!==c||(5===c?h.flipped?-1===l[y]?(f="left",i=-1,r=0):(f="right",i=1,r=0):-1===a[y]&&(f="bottom",i=0,r=-1):10===c&&(h.flipped?-1===a[y]?(f="top",i=0,r=1):(f="bottom",i=0,r=-1):1===l[y]&&(f="left",i=-1,r=0))),p=m(h,f),s.push([d+p[0],g+p[1]]),_(h),d+=i,g+=r,y=c}return{path:s,info:"closed"}}(a.cells,e,n),r=!1
if("mergeable"===i.info)for(var o=i.path[i.path.length-1][0],s=i.path[i.path.length-1][1],h=u-1;h>=0;h--)if(Math.abs(l[h][0][0]-o)<=1e-7&&Math.abs(l[h][0][1]-s)<=1e-7){for(var c=i.path.length-2;c>=0;--c)l[h].unshift(i.path[c])
r=!0
break}r||(l[u++]=i.path)}var f}))})),l)
return"function"==typeof f.successCallback&&f.successCallback(h),h}function d(t,e,n){return(t-e)/(n-e)}function g(t){return 0===t.cval||15===t.cval}function _(t){g(t)||5===t.cval||10===t.cval||(t.cval=15)}function m(t,e){return"top"===e?[t.top,1]:"bottom"===e?[t.bottom,0]:"right"===e?[1,t.right]:"left"===e?[0,t.left]:void 0}function y(t,e,n){if(n=n||{},!s.isObject(n))throw new Error("options is invalid")
var i=n.zProperty||"elevation",a=n.commonProperties||{},l=n.breaksProperties||[]
if(o.collectionOf(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required")
if(!Array.isArray(e))throw new Error("breaks must be an Array")
if(!s.isObject(a))throw new Error("commonProperties must be an Object")
if(!Array.isArray(l))throw new Error("breaksProperties must be an Array")
var c=function(t,e){if(e=e||{},!s.isObject(e))throw new Error("options is invalid")
var n=e.zProperty||"elevation",i=e.flip,a=e.flags
o.collectionOf(t,"Point","input must contain Points")
for(var l=function(t,e){var n={}
return r.featureEach(t,(function(t){var e=o.getCoords(t)[1]
n[e]||(n[e]=[]),n[e].push(t)})),Object.keys(n).map((function(t){return n[t].sort((function(t,e){return o.getCoords(t)[0]-o.getCoords(e)[0]}))})).sort((function(t,n){return e?o.getCoords(t[0])[1]-o.getCoords(n[0])[1]:o.getCoords(n[0])[1]-o.getCoords(t[0])[1]}))}(t,i),u=[],h=0;h<l.length;h++){for(var c=l[h],f=[],p=0;p<c.length;p++){var d=c[p]
d.properties[n]?f.push(d.properties[n]):f.push(0),!0===a&&(d.properties.matrixPosition=[h,p])}u.push(f)}return u}(t,{zProperty:i,flip:!0}),f=function(t,e,n,i,r){for(var o=[],a=1;a<e.length;a++){var l=+e[a],u=h.default({},i,r[a])
u[n]=l
var c=s.multiLineString(p(t,l),u)
o.push(c)}return o}(c,e,i,a,l),d=function(t,e,n){var i=u.default(n),o=i[2]-i[0],s=i[3]-i[1],a=i[0],l=i[1],h=e[0].length-1,c=e.length-1,f=o/h,p=s/c,d=function(t){t[0]=t[0]*f+a,t[1]=t[1]*p+l}
return t.forEach((function(t){r.coordEach(t,d)})),t}(f,c,t)
return s.featureCollection(d)}t.exports=y,t.exports.default=y},9:(t,e,n)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var i=n(6303)
e.default=function(t){var e,n,r={type:"FeatureCollection",features:[]}
if("LineString"===(n="Feature"===t.type?t.geometry:t).type)e=[n.coordinates]
else if("MultiLineString"===n.type)e=n.coordinates
else if("MultiPolygon"===n.type)e=[].concat.apply([],n.coordinates)
else{if("Polygon"!==n.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry")
e=n.coordinates}return e.forEach((function(t){e.forEach((function(e){for(var n=0;n<t.length-1;n++)for(var o=n;o<e.length-1;o++){if(t===e){if(1===Math.abs(n-o))continue
if(0===n&&o===t.length-2&&t[n][0]===t[t.length-1][0]&&t[n][1]===t[t.length-1][1])continue}var s=(a=t[n][0],l=t[n][1],u=t[n+1][0],h=t[n+1][1],c=e[o][0],f=e[o][1],p=e[o+1][0],void 0,_=void 0,m=void 0,y=void 0,v=void 0,v={x:null,y:null,onLine1:!1,onLine2:!1},0==(g=((d=e[o+1][1])-f)*(u-a)-(p-c)*(h-l))?null!==v.x&&null!==v.y&&v:(y=(u-a)*(_=l-f)-(h-l)*(m=a-c),_=((p-c)*_-(d-f)*m)/g,m=y/g,v.x=a+_*(u-a),v.y=l+_*(h-l),_>=0&&_<=1&&(v.onLine1=!0),m>=0&&m<=1&&(v.onLine2=!0),!(!v.onLine1||!v.onLine2)&&[v.x,v.y]))
s&&r.features.push(i.point([s[0],s[1]]))}var a,l,u,h,c,f,p,d,g,_,m,y,v}))})),r}},111:function(t,e,n){"use strict"
var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=i(n(3703)),o=n(9611)
e.default=function(t,e){return void 0===e&&(e={}),o.segmentReduce(t,(function(t,n){var i=n.geometry.coordinates
return t+r.default(i[0],i[1],e)}),0)}},5559:function(t,e,n){"use strict"
var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=i(n(7651)),o=i(n(2165)),s=n(6303)
function a(t){var e=t%360
return e<0&&(e+=360),e}e.default=function(t,e,n,i,l){void 0===l&&(l={})
var u=l.steps||64,h=a(n),c=a(i),f=Array.isArray(t)||"Feature"!==t.type?{}:t.properties
if(h===c)return s.lineString(r.default(t,e,l).geometry.coordinates[0],f)
for(var p=h,d=h<c?c:c+360,g=p,_=[],m=0;g<d;)_.push(o.default(t,e,g,l).geometry.coordinates),g=p+360*++m/u
return g>d&&_.push(o.default(t,e,d,l).geometry.coordinates),s.lineString(_,f)}},239:(t,e,n)=>{"use strict"
var i=n(111),r=n(3419),o=n(9611),s=n(6303)
function a(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var l=a(i),u=a(r)
function h(t,e,n){if(n=n||{},!s.isObject(n))throw new Error("options is invalid")
var i=n.units,r=n.reverse
if(!t)throw new Error("geojson is required")
if(e<=0)throw new Error("segmentLength must be greater than 0")
var a=[]
return o.flattenEach(t,(function(t){r&&(t.geometry.coordinates=t.geometry.coordinates.reverse()),function(t,e,n,i){var r=l.default(t,{units:n})
if(r<=e)return i(t)
var o=r/e
Number.isInteger(o)||(o=Math.floor(o)+1)
for(var s=0;s<o;s++)i(u.default(t,e*s,e*(s+1),{units:n}))}(t,e,i,(function(t){a.push(t)}))})),s.featureCollection(a)}t.exports=h,t.exports.default=h},7315:function(t,e,n){"use strict"
var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=n(6303),o=n(2317),s=i(n(8735)),a=n(9611),l=i(n(4686))
function u(t,e){var n=o.getCoords(t),i=o.getCoords(e)
if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates")
if(2!==i.length)throw new Error("<intersects> line2 must only contain 2 coordinates")
var s=n[0][0],a=n[0][1],l=n[1][0],u=n[1][1],h=i[0][0],c=i[0][1],f=i[1][0],p=i[1][1],d=(p-c)*(l-s)-(f-h)*(u-a)
if(0===d)return null
var g=((f-h)*(a-c)-(p-c)*(s-h))/d,_=((l-s)*(a-c)-(u-a)*(s-h))/d
if(g>=0&&g<=1&&_>=0&&_<=1){var m=s+g*(l-s),y=a+g*(u-a)
return r.point([m,y])}return null}e.default=function(t,e){var n={},i=[]
if("LineString"===t.type&&(t=r.feature(t)),"LineString"===e.type&&(e=r.feature(e)),"Feature"===t.type&&"Feature"===e.type&&null!==t.geometry&&null!==e.geometry&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var h=u(t,e)
return h&&i.push(h),r.featureCollection(i)}var c=l.default()
return c.load(s.default(e)),a.featureEach(s.default(t),(function(t){a.featureEach(c.search(t),(function(e){var r=u(t,e)
if(r){var s=o.getCoords(r).join(",")
n[s]||(n[s]=!0,i.push(r))}}))})),r.featureCollection(i)}},3865:(t,e,n)=>{"use strict"
var i=n(9611),r=n(2317),o=n(6303)
function s(t){var e=t[0],n=t[1]
return[n[0]-e[0],n[1]-e[1]]}function a(t,e){return t[0]*e[1]-e[0]*t[1]}function l(t,e,n){if(n=n||{},!o.isObject(n))throw new Error("options is invalid")
var s=n.units
if(!t)throw new Error("geojson is required")
if(null==e||isNaN(e))throw new Error("distance is required")
var a=r.getType(t),l=t.properties
switch(a){case"LineString":return u(t,e,s)
case"MultiLineString":var h=[]
return i.flattenEach(t,(function(t){h.push(u(t,e,s).geometry.coordinates)})),o.multiLineString(h,l)
default:throw new Error("geometry "+a+" is not supported")}}function u(t,e,n){var i=[],l=o.lengthToDegrees(e,n),u=r.getCoords(t),h=[]
return u.forEach((function(t,e){if(e!==u.length-1){var n=function(t,e,n){var i=Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])),r=t[0]+n*(e[1]-t[1])/i,o=e[0]+n*(e[1]-t[1])/i
return[[r,t[1]+n*(t[0]-e[0])/i],[o,e[1]+n*(t[0]-e[0])/i]]}(t,u[e+1],l)
if(i.push(n),e>0){var r=i[e-1],o=!function(t,e){return 0===a(s(t),s(e))}(c=n,f=r)&&function(t,e){var n,i,r=t[0],o=s(t),l=e[0],u=s(e),h=a(o,u),c=function(t,e){return[t[0]+e[0],t[1]+e[1]]}(r,function(t,e){return[t*e[0],t*e[1]]}(a((i=r,[(n=l)[0]-i[0],n[1]-i[1]]),u)/h,o))
return c}(c,f)
!1!==o&&(r[1]=o,n[0]=o),h.push(r[0]),e===u.length-2&&(h.push(n[0]),h.push(n[1]))}2===u.length&&(h.push(n[0]),h.push(n[1]))}var c,f})),o.lineString(h,t.properties)}t.exports=l,t.exports.default=l},1055:function(t,e,n){"use strict"
var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=i(n(4686)),o=i(n(8735)),s=i(n(8357)),a=i(n(4537)),l=n(2317),u=n(9611),h=n(6303),c=i(n(5941))
function f(t,e){var n=l.getCoords(e),i=l.getCoords(t),r=i[0],o=i[i.length-1],s=t.geometry.coordinates
return c.default(n[0],r)?s.unshift(n[1]):c.default(n[0],o)?s.push(n[1]):c.default(n[1],r)?s.unshift(n[0]):c.default(n[1],o)&&s.push(n[0]),t}e.default=function(t,e,n){if(void 0===n&&(n={}),n=n||{},!h.isObject(n))throw new Error("options is invalid")
var i,p=n.tolerance||0,d=[],g=r.default(),_=o.default(t)
return g.load(_),u.segmentEach(e,(function(t){var e=!1
t&&(u.featureEach(g.search(t),(function(n){if(!1===e){var r=l.getCoords(t).sort(),o=l.getCoords(n).sort()
c.default(r,o)||(0===p?a.default(r[0],n)&&a.default(r[1],n):s.default(n,r[0]).properties.dist<=p&&s.default(n,r[1]).properties.dist<=p)?(e=!0,i=i?f(i,t):t):(0===p?a.default(o[0],t)&&a.default(o[1],t):s.default(t,o[0]).properties.dist<=p&&s.default(t,o[1]).properties.dist<=p)&&(i=i?f(i,n):n)}})),!1===e&&i&&(d.push(i),i=void 0))})),i&&d.push(i),h.featureCollection(d)}},8735:(t,e,n)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var i=n(6303),r=n(2317),o=n(9611)
e.default=function(t){if(!t)throw new Error("geojson is required")
var e=[]
return o.flattenEach(t,(function(t){!function(t,e){var n=[],o=t.geometry
if(null!==o){switch(o.type){case"Polygon":n=r.getCoords(o)
break
case"LineString":n=[r.getCoords(o)]}n.forEach((function(n){var r=function(t,e){var n=[]
return t.reduce((function(t,r){var o,s,a,l,u,h,c=i.lineString([t,r],e)
return c.bbox=(s=r,a=(o=t)[0],l=o[1],[a<(u=s[0])?a:u,l<(h=s[1])?l:h,a>u?a:u,l>h?l:h]),n.push(c),r})),n}(n,t.properties)
r.forEach((function(t){t.id=e.length,e.push(t)}))}))}}(t,e)})),i.featureCollection(e)}},3419:(t,e,n)=>{"use strict"
var i=n(2045),r=n(3703),o=n(2165),s=n(6303)
function a(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var l=a(i),u=a(r),h=a(o)
function c(t,e,n,i){if(i=i||{},!s.isObject(i))throw new Error("options is invalid")
var r,o=[]
if("Feature"===t.type)r=t.geometry.coordinates
else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry")
r=t.coordinates}for(var a,c,f,p=r.length,d=0,g=0;g<r.length&&!(e>=d&&g===r.length-1);g++){if(d>e&&0===o.length){if(!(a=e-d))return o.push(r[g]),s.lineString(o)
c=l.default(r[g],r[g-1])-180,f=h.default(r[g],a,c,i),o.push(f.geometry.coordinates)}if(d>=n)return(a=n-d)?(c=l.default(r[g],r[g-1])-180,f=h.default(r[g],a,c,i),o.push(f.geometry.coordinates),s.lineString(o)):(o.push(r[g]),s.lineString(o))
if(d>=e&&o.push(r[g]),g===r.length-1)return s.lineString(o)
d+=u.default(r[g],r[g+1],i)}if(d<e&&r.length===p)throw new Error("Start position is beyond line")
var _=r[r.length-1]
return s.lineString([_,_])}t.exports=c,t.exports.default=c},5499:(t,e,n)=>{"use strict"
var i=n(2317),r=n(6303)
var o=function(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}(n(8357))
function s(t,e,n){var s=i.getCoords(n)
if("LineString"!==i.getType(n))throw new Error("line must be a LineString")
for(var a,l=o.default(n,t),u=o.default(n,e),h=[(a=l.properties.index<=u.properties.index?[l,u]:[u,l])[0].geometry.coordinates],c=a[0].properties.index+1;c<a[1].properties.index+1;c++)h.push(s[c])
return h.push(a[1].geometry.coordinates),r.lineString(h,n.properties)}t.exports=s,t.exports.default=s},5579:(t,e,n)=>{"use strict"
var i=n(4686),r=n(2083),o=n(463),s=n(9399),a=n(8735),l=n(7315),u=n(8357),h=n(2317),c=n(9611),f=n(6303)
function p(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var d=p(i),g=p(r),_=p(o),m=p(s),y=p(a),v=p(l),x=p(u)
function b(t,e){if(!t)throw new Error("line is required")
if(!e)throw new Error("splitter is required")
var n=h.getType(t),i=h.getType(e)
if("LineString"!==n)throw new Error("line must be LineString")
if("FeatureCollection"===i)throw new Error("splitter cannot be a FeatureCollection")
if("GeometryCollection"===i)throw new Error("splitter cannot be a GeometryCollection")
var r=m.default(e,{precision:7})
switch(i){case"Point":return w(t,r)
case"MultiPoint":return E(t,r)
case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return E(t,v.default(t,r))}}function E(t,e){var n=[],i=d.default()
return c.flattenEach(e,(function(e){if(n.forEach((function(t,e){t.id=e})),n.length){var r=i.search(e)
if(r.features.length){var o=S(e,r)
n=n.filter((function(t){return t.id!==o.id})),i.remove(o),c.featureEach(w(o,e),(function(t){n.push(t),i.insert(t)}))}}else(n=w(t,e).features).forEach((function(t){t.bbox||(t.bbox=g.default(_.default(t)))})),i.load(f.featureCollection(n))})),f.featureCollection(n)}function w(t,e){var n=[],i=h.getCoords(t)[0],r=h.getCoords(t)[t.geometry.coordinates.length-1]
if(C(i,h.getCoord(e))||C(r,h.getCoord(e)))return f.featureCollection([t])
var o=d.default(),s=y.default(t)
o.load(s)
var a=o.search(e)
if(!a.features.length)return f.featureCollection([t])
var l=S(e,a),u=[i],p=c.featureReduce(s,(function(t,i,r){var o=h.getCoords(i)[1],s=h.getCoord(e)
return r===l.id?(t.push(s),n.push(f.lineString(t)),C(s,o)?[s]:[s,o]):(t.push(o),t)}),u)
return p.length>1&&n.push(f.lineString(p)),f.featureCollection(n)}function S(t,e){if(!e.features.length)throw new Error("lines must contain features")
if(1===e.features.length)return e.features[0]
var n,i=1/0
return c.featureEach(e,(function(e){var r=x.default(e,t).properties.dist
r<i&&(n=e,i=r)})),n}function C(t,e){return t[0]===e[0]&&t[1]===e[1]}t.exports=b,t.exports.default=b},3643:function(t,e,n){"use strict"
var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=i(n(463)),o=n(2317),s=n(6303),a=i(n(7051))
function l(t,e,n,i){e=e||("Feature"===t.type?t.properties:{})
var a=o.getGeom(t),l=a.coordinates,h=a.type
if(!l.length)throw new Error("line must contain coordinates")
switch(h){case"LineString":return n&&(l=u(l)),s.polygon([l],e)
case"MultiLineString":var c=[],f=0
return l.forEach((function(t){if(n&&(t=u(t)),i){var e=(a=(o=r.default(s.lineString(t)))[0],l=o[1],h=o[2],p=o[3],Math.abs(a-h)*Math.abs(l-p))
e>f?(c.unshift(t),f=e):c.push(t)}else c.push(t)
var o,a,l,h,p})),s.polygon(c,e)
default:throw new Error("geometry type "+h+" is not supported")}}function u(t){var e=t[0],n=e[0],i=e[1],r=t[t.length-1],o=r[0],s=r[1]
return n===o&&i===s||t.push(e),t}e.default=function(t,e){var n,i,r
void 0===e&&(e={})
var u=e.properties,h=null===(n=e.autoComplete)||void 0===n||n,c=null===(i=e.orderCoords)||void 0===i||i
if(null!==(r=e.mutate)&&void 0!==r&&r||(t=a.default(t)),"FeatureCollection"===t.type){var f=[]
return t.features.forEach((function(t){f.push(o.getCoords(l(t,{},h,c)))})),s.multiPolygon(f,u)}return l(t,u,h,c)}},575:(t,e,n)=>{"use strict"
var i=n(6303)
var r=function(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}(n(6638))
function o(t,e){var n,o=function(t){var e=t&&t.geometry.coordinates||[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]
return i.polygon(e)}(e)
return("FeatureCollection"===t.type?s(2===(n=t).features.length?r.default.union(n.features[0].geometry.coordinates,n.features[1].geometry.coordinates):r.default.union.apply(r.default,n.features.map((function(t){return t.geometry.coordinates})))):s(r.default.union(t.geometry.coordinates))).geometry.coordinates.forEach((function(t){o.geometry.coordinates.push(t[0])})),o}function s(t){return i.multiPolygon(t)}t.exports=o,t.exports.default=o},9611:(t,e,n)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var i=n(6303)
function r(t,e,n){if(null!==t)for(var i,o,s,a,l,u,h,c,f=0,p=0,d=t.type,g="FeatureCollection"===d,_="Feature"===d,m=g?t.features.length:1,y=0;y<m;y++){l=(c=!!(h=g?t.features[y].geometry:_?t.geometry:t)&&"GeometryCollection"===h.type)?h.geometries.length:1
for(var v=0;v<l;v++){var x=0,b=0
if(null!==(a=c?h.geometries[v]:h)){u=a.coordinates
var E=a.type
switch(f=!n||"Polygon"!==E&&"MultiPolygon"!==E?0:1,E){case null:break
case"Point":if(!1===e(u,p,y,x,b))return!1
p++,x++
break
case"LineString":case"MultiPoint":for(i=0;i<u.length;i++){if(!1===e(u[i],p,y,x,b))return!1
p++,"MultiPoint"===E&&x++}"LineString"===E&&x++
break
case"Polygon":case"MultiLineString":for(i=0;i<u.length;i++){for(o=0;o<u[i].length-f;o++){if(!1===e(u[i][o],p,y,x,b))return!1
p++}"MultiLineString"===E&&x++,"Polygon"===E&&b++}"Polygon"===E&&x++
break
case"MultiPolygon":for(i=0;i<u.length;i++){for(b=0,o=0;o<u[i].length;o++){for(s=0;s<u[i][o].length-f;s++){if(!1===e(u[i][o][s],p,y,x,b))return!1
p++}b++}x++}break
case"GeometryCollection":for(i=0;i<a.geometries.length;i++)if(!1===r(a.geometries[i],e,n))return!1
break
default:throw new Error("Unknown Geometry Type")}}}}}function o(t,e){var n
switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break
case"Feature":e(t.properties,0)}}function s(t,e){if("Feature"===t.type)e(t,0)
else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function a(t,e){var n,i,r,o,s,a,l,u,h,c,f=0,p="FeatureCollection"===t.type,d="Feature"===t.type,g=p?t.features.length:1
for(n=0;n<g;n++){for(a=p?t.features[n].geometry:d?t.geometry:t,u=p?t.features[n].properties:d?t.properties:{},h=p?t.features[n].bbox:d?t.bbox:void 0,c=p?t.features[n].id:d?t.id:void 0,s=(l=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,r=0;r<s;r++)if(null!==(o=l?a.geometries[r]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,f,u,h,c))return!1
break
case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(!1===e(o.geometries[i],f,u,h,c))return!1
break
default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,f,u,h,c))return!1
f++}}function l(t,e){a(t,(function(t,n,r,o,s){var a,l=null===t?null:t.type
switch(l){case null:case"Point":case"LineString":case"Polygon":return!1!==e(i.feature(t,r,{bbox:o,id:s}),n,0)&&void 0}switch(l){case"MultiPoint":a="Point"
break
case"MultiLineString":a="LineString"
break
case"MultiPolygon":a="Polygon"}for(var u=0;u<t.coordinates.length;u++){var h={type:a,coordinates:t.coordinates[u]}
if(!1===e(i.feature(h,r),n,u))return!1}}))}function u(t,e){l(t,(function(t,n,o){var s=0
if(t.geometry){var a=t.geometry.type
if("Point"!==a&&"MultiPoint"!==a){var l,u=0,h=0,c=0
return!1!==r(t,(function(r,a,f,p,d){if(void 0===l||n>u||p>h||d>c)return l=r,u=n,h=p,c=d,void(s=0)
var g=i.lineString([l,r],t.properties)
if(!1===e(g,n,o,d,s))return!1
s++,l=r}))&&void 0}}}))}function h(t,e){if(!t)throw new Error("geojson is required")
l(t,(function(t,n,r){if(null!==t.geometry){var o=t.geometry.type,s=t.geometry.coordinates
switch(o){case"LineString":if(!1===e(t,n,r,0,0))return!1
break
case"Polygon":for(var a=0;a<s.length;a++)if(!1===e(i.lineString(s[a],t.properties),n,r,a))return!1}}}))}e.coordAll=function(t){var e=[]
return r(t,(function(t){e.push(t)})),e},e.coordEach=r,e.coordReduce=function(t,e,n,i){var o=n
return r(t,(function(t,i,r,s,a){o=0===i&&void 0===n?t:e(o,t,i,r,s,a)}),i),o},e.featureEach=s,e.featureReduce=function(t,e,n){var i=n
return s(t,(function(t,r){i=0===r&&void 0===n?t:e(i,t,r)})),i},e.findPoint=function(t,e){if(e=e||{},!i.isObject(e))throw new Error("options is invalid")
var n,r=e.featureIndex||0,o=e.multiFeatureIndex||0,s=e.geometryIndex||0,a=e.coordIndex||0,l=e.properties
switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),l=l||t.features[r].properties,n=t.features[r].geometry
break
case"Feature":l=l||t.properties,n=t.geometry
break
case"Point":case"MultiPoint":return null
case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t
break
default:throw new Error("geojson is invalid")}if(null===n)return null
var u=n.coordinates
switch(n.type){case"Point":return i.point(u,l,e)
case"MultiPoint":return o<0&&(o=u.length+o),i.point(u[o],l,e)
case"LineString":return a<0&&(a=u.length+a),i.point(u[a],l,e)
case"Polygon":return s<0&&(s=u.length+s),a<0&&(a=u[s].length+a),i.point(u[s][a],l,e)
case"MultiLineString":return o<0&&(o=u.length+o),a<0&&(a=u[o].length+a),i.point(u[o][a],l,e)
case"MultiPolygon":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s),a<0&&(a=u[o][s].length-a),i.point(u[o][s][a],l,e)}throw new Error("geojson is invalid")},e.findSegment=function(t,e){if(e=e||{},!i.isObject(e))throw new Error("options is invalid")
var n,r=e.featureIndex||0,o=e.multiFeatureIndex||0,s=e.geometryIndex||0,a=e.segmentIndex||0,l=e.properties
switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),l=l||t.features[r].properties,n=t.features[r].geometry
break
case"Feature":l=l||t.properties,n=t.geometry
break
case"Point":case"MultiPoint":return null
case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t
break
default:throw new Error("geojson is invalid")}if(null===n)return null
var u=n.coordinates
switch(n.type){case"Point":case"MultiPoint":return null
case"LineString":return a<0&&(a=u.length+a-1),i.lineString([u[a],u[a+1]],l,e)
case"Polygon":return s<0&&(s=u.length+s),a<0&&(a=u[s].length+a-1),i.lineString([u[s][a],u[s][a+1]],l,e)
case"MultiLineString":return o<0&&(o=u.length+o),a<0&&(a=u[o].length+a-1),i.lineString([u[o][a],u[o][a+1]],l,e)
case"MultiPolygon":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s),a<0&&(a=u[o][s].length-a-1),i.lineString([u[o][s][a],u[o][s][a+1]],l,e)}throw new Error("geojson is invalid")},e.flattenEach=l,e.flattenReduce=function(t,e,n){var i=n
return l(t,(function(t,r,o){i=0===r&&0===o&&void 0===n?t:e(i,t,r,o)})),i},e.geomEach=a,e.geomReduce=function(t,e,n){var i=n
return a(t,(function(t,r,o,s,a){i=0===r&&void 0===n?t:e(i,t,r,o,s,a)})),i},e.lineEach=h,e.lineReduce=function(t,e,n){var i=n
return h(t,(function(t,r,o,s){i=0===r&&void 0===n?t:e(i,t,r,o,s)})),i},e.propEach=o,e.propReduce=function(t,e,n){var i=n
return o(t,(function(t,r){i=0===r&&void 0===n?t:e(i,t,r)})),i},e.segmentEach=u,e.segmentReduce=function(t,e,n){var i=n,r=!1
return u(t,(function(t,o,s,a,l){i=!1===r&&void 0===n?t:e(i,t,o,s,a,l),r=!0})),i}},4371:(t,e,n)=>{"use strict"
var i=n(2045),r=n(2165),o=n(3703)
function s(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var a=s(i),l=s(r),u=s(o)
function h(t,e){var n=u.default(t,e),i=a.default(t,e)
return l.default(t,n/2,i)}t.exports=h,t.exports.default=h},5445:function(t,e,n){"use strict"
var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=i(n(2753)),o=n(9611)
function s(t){for(var e=0,n=0,i=t;n<i.length;n++)e+=i[n]
return e/t.length}e.default=function(t,e){var n=e.inputField,i=e.threshold||1e5,a=e.p||2,l=e.binary||!1,u=e.alpha||-1,h=e.standardization||!0,c=r.default(t,{alpha:u,binary:l,p:a,standardization:h,threshold:i}),f=[]
o.featureEach(t,(function(t){var e=t.properties||{}
f.push(e[n])}))
for(var p=s(f),d=function(t){for(var e=s(t),n=0,i=0,r=t;i<r.length;i++){var o=r[i]
n+=Math.pow(o-e,2)}return n/t.length}(f),g=0,_=0,m=0,y=0,v=c.length,x=0;x<v;x++){for(var b=0,E=0;E<v;E++)g+=c[x][E]*(f[x]-p)*(f[E]-p),_+=c[x][E],m+=Math.pow(c[x][E]+c[E][x],2),b+=c[x][E]+c[E][x]
y+=Math.pow(b,2)}var w=g/_/d,S=-1/(v-1),C=(v*v*(m*=.5)-v*y+_*_*3)/((v-1)*(v+1)*(_*_))-S*S,T=Math.sqrt(C)
return{expectedMoranIndex:S,moranIndex:w,stdNorm:T,zNorm:(w-S)/T}}},8357:function(t,e,n){"use strict"
var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=i(n(2045)),o=i(n(3703)),s=i(n(2165)),a=i(n(7315)),l=n(9611),u=n(6303),h=n(2317)
e.default=function(t,e,n){void 0===n&&(n={})
var i=u.point([1/0,1/0],{dist:1/0}),c=0
return l.flattenEach(t,(function(t){for(var l=h.getCoords(t),f=0;f<l.length-1;f++){var p=u.point(l[f])
p.properties.dist=o.default(e,p,n)
var d=u.point(l[f+1])
d.properties.dist=o.default(e,d,n)
var g=o.default(p,d,n),_=Math.max(p.properties.dist,d.properties.dist),m=r.default(p,d),y=s.default(e,_,m+90,n),v=s.default(e,_,m-90,n),x=a.default(u.lineString([y.geometry.coordinates,v.geometry.coordinates]),u.lineString([p.geometry.coordinates,d.geometry.coordinates])),b=null
x.features.length>0&&((b=x.features[0]).properties.dist=o.default(e,b,n),b.properties.location=c+o.default(p,b,n)),p.properties.dist<i.properties.dist&&((i=p).properties.index=f,i.properties.location=c),d.properties.dist<i.properties.dist&&((i=d).properties.index=f+1,i.properties.location=c+g),b&&b.properties.dist<i.properties.dist&&((i=b).properties.index=f),c+=g}})),i}},3697:function(t,e,n){"use strict"
var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=n(2317),o=n(9611),s=i(n(6287)),a=i(n(8017))
e.default=function(t,e,n){void 0===n&&(n={})
var i=n.units,l=n.properties||{},u=function(t){var e=[]
switch(t.geometry?t.geometry.type:t.type){case"GeometryCollection":return o.geomEach(t,(function(t){"Point"===t.type&&e.push({type:"Feature",properties:{},geometry:t})})),{type:"FeatureCollection",features:e}
case"FeatureCollection":return t.features=t.features.filter((function(t){return"Point"===t.geometry.type})),t
default:throw new Error("points must be a Point Collection")}}(t)
if(!u.features.length)throw new Error("points must contain features")
if(!e)throw new Error("line is required")
if("LineString"!==r.getType(e))throw new Error("line must be a LineString")
var h=1/0,c=null
return o.featureEach(u,(function(t){var n=s.default(t,e,{units:i})
n<h&&(h=n,c=t)})),c&&(c.properties=a.default({dist:h},c.properties,l)),c}},1891:function(t,e,n){"use strict"
var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=i(n(7051)),o=i(n(3703)),s=n(9611)
e.default=function(t,e){if(!t)throw new Error("targetPoint is required")
if(!e)throw new Error("points is required")
var n,i=1/0,a=0
return s.featureEach(e,(function(e,n){var r=o.default(t,e)
r<i&&(a=n,i=r)})),(n=r.default(e.features[a])).properties.featureIndex=a,n.properties.distanceToPoint=i,n}},4875:(t,e,n)=>{"use strict"
var i=n(2317)
function r(t,e){var n=i.getCoord(t),r=i.getGeom(e).coordinates[0]
if(r.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.")
var o=e.properties||{},s=o.a,a=o.b,l=o.c,u=n[0],h=n[1],c=r[0][0],f=r[0][1],p=void 0!==s?s:r[0][2],d=r[1][0],g=r[1][1],_=void 0!==a?a:r[1][2],m=r[2][0],y=r[2][1],v=void 0!==l?l:r[2][2]
return(v*(u-c)*(h-g)+p*(u-d)*(h-y)+_*(u-m)*(h-f)-_*(u-c)*(h-y)-v*(u-d)*(h-f)-p*(u-m)*(h-g))/((u-c)*(h-g)+(u-d)*(h-y)+(u-m)*(h-f)-(u-c)*(h-y)-(u-d)*(h-f)-(u-m)*(h-g))}t.exports=r,t.exports.default=r},6411:function(t,e,n){"use strict"
var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=i(n(9555)),o=i(n(3703)),s=n(6303)
e.default=function(t,e,n){void 0===n&&(n={}),n.mask&&!n.units&&(n.units="kilometers")
for(var i=[],a=t[0],l=t[1],u=t[2],h=t[3],c=e/o.default([a,l],[u,l],n)*(u-a),f=e/o.default([a,l],[a,h],n)*(h-l),p=u-a,d=h-l,g=Math.floor(p/c),_=(d-Math.floor(d/f)*f)/2,m=a+(p-g*c)/2;m<=u;){for(var y=l+_;y<=h;){var v=s.point([m,y],n.properties)
n.mask?r.default(v,n.mask)&&i.push(v):i.push(v),y+=f}m+=c}return s.featureCollection(i)}},2099:(t,e,n)=>{"use strict"
var i=n(2107),r=n(6731),o=n(1891),s=n(2015),a=n(6303)
function l(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var u=l(i),h=l(r),c=l(o),f=l(s)
function p(t){for(var e=function(t){return"FeatureCollection"!==t.type?"Feature"!==t.type?a.featureCollection([a.feature(t)]):a.featureCollection([t]):t}(t),n=h.default(e),i=!1,r=0;!i&&r<e.features.length;){var o,s=e.features[r].geometry,l=!1
if("Point"===s.type)n.geometry.coordinates[0]===s.coordinates[0]&&n.geometry.coordinates[1]===s.coordinates[1]&&(i=!0)
else if("MultiPoint"===s.type){var p=!1
for(o=0;!p&&o<s.coordinates.length;)n.geometry.coordinates[0]===s.coordinates[o][0]&&n.geometry.coordinates[1]===s.coordinates[o][1]&&(i=!0,p=!0),o++}else if("LineString"===s.type)for(o=0;!l&&o<s.coordinates.length-1;)d(n.geometry.coordinates[0],n.geometry.coordinates[1],s.coordinates[o][0],s.coordinates[o][1],s.coordinates[o+1][0],s.coordinates[o+1][1])&&(l=!0,i=!0),o++
else if("MultiLineString"===s.type)for(var g=0;g<s.coordinates.length;){l=!1,o=0
for(var _=s.coordinates[g];!l&&o<_.length-1;)d(n.geometry.coordinates[0],n.geometry.coordinates[1],_[o][0],_[o][1],_[o+1][0],_[o+1][1])&&(l=!0,i=!0),o++
g++}else"Polygon"!==s.type&&"MultiPolygon"!==s.type||f.default(n,s)&&(i=!0)
r++}if(i)return n
var m=a.featureCollection([])
for(r=0;r<e.features.length;r++)m.features=m.features.concat(u.default(e.features[r]).features)
return a.point(c.default(n,m).geometry.coordinates)}function d(t,e,n,i,r,o){return Math.sqrt((r-n)*(r-n)+(o-i)*(o-i))===Math.sqrt((t-n)*(t-n)+(e-i)*(e-i))+Math.sqrt((r-t)*(r-t)+(o-e)*(o-e))}t.exports=p,t.exports.default=p},6287:function(t,e,n){"use strict"
var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=i(n(3703)),o=n(6303),s=n(2317),a=n(9611),l=i(n(4611))
function u(t,e){return t[0]*e[0]+t[1]*e[1]}function h(t,e,n){return"planar"===n.method?l.default(t,e,n):r.default(t,e,n)}e.default=function(t,e,n){if(void 0===n&&(n={}),n.method||(n.method="geodesic"),n.units||(n.units="kilometers"),!t)throw new Error("pt is required")
if(Array.isArray(t)?t=o.point(t):"Point"===t.type?t=o.feature(t):s.featureOf(t,"Point","point"),!e)throw new Error("line is required")
Array.isArray(e)?e=o.lineString(e):"LineString"===e.type?e=o.feature(e):s.featureOf(e,"LineString","line")
var i=1/0,r=t.geometry.coordinates
return a.segmentEach(e,(function(t){var e=t.geometry.coordinates[0],o=t.geometry.coordinates[1],s=function(t,e,n,i){var r=[n[0]-e[0],n[1]-e[1]],o=u([t[0]-e[0],t[1]-e[1]],r)
if(o<=0)return h(t,e,{method:i.method,units:"degrees"})
var s=u(r,r)
if(s<=o)return h(t,n,{method:i.method,units:"degrees"})
var a=o/s
return h(t,[e[0]+a*r[0],e[1]+a*r[1]],{method:i.method,units:"degrees"})}(r,e,o,n)
s<i&&(i=s)})),o.convertLength(i,"degrees",n.units)}},4457:(t,e,n)=>{"use strict"
var i=n(2015),r=n(6303),o=n(9611)
var s=function(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}(i)
function a(t,e){var n=[]
return o.featureEach(t,(function(t){var i=!1
if("Point"===t.geometry.type)o.geomEach(e,(function(e){s.default(t,e)&&(i=!0)})),i&&n.push(t)
else{if("MultiPoint"!==t.geometry.type)throw new Error("Input geometry must be a Point or MultiPoint")
var a=[]
o.geomEach(e,(function(e){o.coordEach(t,(function(t){s.default(t,e)&&(i=!0,a.push(t))}))})),i&&n.push(r.multiPoint(a))}})),r.featureCollection(n)}t.exports=a,t.exports.default=a},7431:(t,e,n)=>{"use strict"
var i=n(9611),r=n(6303)
function o(t,e){var n=[],o=e.iterations||1
if(!t)throw new Error("inputPolys is required")
return i.geomEach(t,(function(t,e,i){var l,u,h
switch(t.type){case"Polygon":l=[[]]
for(var c=0;c<o;c++)h=[[]],u=t,c>0&&(u=r.polygon(l).geometry),s(u,h),l=h.slice(0)
n.push(r.polygon(l,i))
break
case"MultiPolygon":l=[[[]]]
for(var f=0;f<o;f++)h=[[[]]],u=t,f>0&&(u=r.multiPolygon(l).geometry),a(u,h),l=h.slice(0)
n.push(r.multiPolygon(l,i))
break
default:throw new Error("geometry is invalid, must be Polygon or MultiPolygon")}})),r.featureCollection(n)}function s(t,e){var n=0,r=0
i.coordEach(t,(function(i,o,s,a,l){l>n&&(n=l,r=o,e.push([]))
var u=o-r,h=t.coordinates[l][u+1],c=i[0],f=i[1],p=h[0],d=h[1]
e[l].push([.75*c+.25*p,.75*f+.25*d]),e[l].push([.25*c+.75*p,.25*f+.75*d])}),!0),e.forEach((function(t){t.push(t[0])}))}function a(t,e){var n=0,r=0,o=0
i.coordEach(t,(function(i,s,a,l,u){l>o&&(o=l,r=s,e.push([[]])),u>n&&(n=u,r=s,e[l].push([]))
var h=s-r,c=t.coordinates[l][u][h+1],f=i[0],p=i[1],d=c[0],g=c[1]
e[l][u].push([.75*f+.25*d,.75*p+.25*g]),e[l][u].push([.25*f+.75*d,.25*p+.75*g])}),!0),e.forEach((function(t){t.forEach((function(t){t.push(t[0])}))}))}t.exports=o,t.exports.default=o},3083:(t,e,n)=>{"use strict"
var i=n(2317),r=n(6303),o=n(463),s=n(2107),a=n(1891)
function l(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var u=l(o),h=l(s),c=l(a)
function f(t,e){var n,o,s,a,l=i.getCoords(t),f=i.getCoords(e),g=u.default(e),_=0,m=null
switch(l[0]>g[0]&&l[0]<g[2]&&l[1]>g[1]&&l[1]<g[3]&&(_=(m=c.default(t,h.default(e))).properties.featureIndex),i.getType(e)){case"Polygon":n=f[0][_],o=f[0][0],null!==m&&m.geometry.coordinates[1]<l[1]&&(o=f[0][_]),a=d(f[0][0],f[0][f[0].length-1],l)
var y=p(f[0],l,a,s,n,o)
n=y[0],o=y[1]
break
case"MultiPolygon":for(var v=0,x=0,b=0,E=0;E<f[0].length;E++){v=E
for(var w=!1,S=0;S<f[0][E].length;S++){if(x=S,b===_){w=!0
break}b++}if(w)break}n=f[0][v][x],o=f[0][v][x],a=d(f[0][0][0],f[0][0][f[0][0].length-1],l),f.forEach((function(t){var e=p(t[0],l,a,s,n,o)
n=e[0],o=e[1]}))}return r.featureCollection([r.point(n),r.point(o)])}function p(t,e,n,i,r,o){for(var s=0;s<t.length;s++){var a=t[s],l=t[s+1]
s===t.length-1&&(l=t[0]),i=d(a,l,e),n<=0&&i>0?d(e,a,r)<0||(r=a):n>0&&i<=0&&(d(e,a,o)>0||(o=a)),n=i}return[r,o]}function d(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])}t.exports=f,t.exports.default=f},3799:(t,e,n)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var i=n(6303),r=n(2317)
function o(t,e){return void 0===e&&(e={}),a(r.getGeom(t).coordinates,e.properties?e.properties:"Feature"===t.type?t.properties:{})}function s(t,e){void 0===e&&(e={})
var n=r.getGeom(t).coordinates,o=e.properties?e.properties:"Feature"===t.type?t.properties:{},s=[]
return n.forEach((function(t){s.push(a(t,o))})),i.featureCollection(s)}function a(t,e){return t.length>1?i.multiLineString(t,e):i.lineString(t[0],e)}e.default=function(t,e){void 0===e&&(e={})
var n=r.getGeom(t)
switch(e.properties||"Feature"!==t.type||(e.properties=t.properties),n.type){case"Polygon":return o(n,e)
case"MultiPolygon":return s(n,e)
default:throw new Error("invalid poly")}},e.polygonToLine=o,e.multiPolygonToLine=s,e.coordsToLine=a},2599:function(t,e,n){"use strict"
var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=n(6303),o=i(n(8463)),s=i(n(7060))
e.default=function(t){var e=o.default.fromGeoJson(t)
e.deleteDangles(),e.deleteCutEdges()
var n=[],i=[]
return e.getEdgeRings().filter((function(t){return t.isValid()})).forEach((function(t){t.isHole()?n.push(t):i.push(t)})),n.forEach((function(t){s.default.findEdgeRingContaining(t,i)&&i.push(t)})),r.featureCollection(i.map((function(t){return t.toPolygon()})))}},5946:(t,e,n)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var i=n(6303),r=n(9319),o=function(){function t(t,e){this.from=t,this.to=e,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return t.prototype.getSymetric=function(){return this.symetric||(this.symetric=new t(this.to,this.from),this.symetric.symetric=this),this.symetric},t.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},t.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},t.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},t.prototype.toLineString=function(){return i.lineString([this.from.coordinates,this.to.coordinates])},t.prototype.compareTo=function(t){return r.orientationIndex(t.from.coordinates,t.to.coordinates,this.to.coordinates)},t}()
e.default=o},7060:function(t,e,n){"use strict"
var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=n(9319),o=n(6303),s=i(n(1167)),a=i(n(2015)),l=function(){function t(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return t.prototype.push=function(t){this.edges.push(t),this.polygon=this.envelope=void 0},t.prototype.get=function(t){return this.edges[t]},Object.defineProperty(t.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.edges.forEach(t)},t.prototype.map=function(t){return this.edges.map(t)},t.prototype.some=function(t){return this.edges.some(t)},t.prototype.isValid=function(){return!0},t.prototype.isHole=function(){var t=this,e=this.edges.reduce((function(e,n,i){return n.from.coordinates[1]>t.edges[e].from.coordinates[1]&&(e=i),e}),0),n=(0===e?this.length:e)-1,i=(e+1)%this.length,o=r.orientationIndex(this.edges[n].from.coordinates,this.edges[e].from.coordinates,this.edges[i].from.coordinates)
return 0===o?this.edges[n].from.coordinates[0]>this.edges[i].from.coordinates[0]:o>0},t.prototype.toMultiPoint=function(){return o.multiPoint(this.edges.map((function(t){return t.from.coordinates})))},t.prototype.toPolygon=function(){if(this.polygon)return this.polygon
var t=this.edges.map((function(t){return t.from.coordinates}))
return t.push(this.edges[0].from.coordinates),this.polygon=o.polygon([t])},t.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=s.default(this.toPolygon())},t.findEdgeRingContaining=function(t,e){var n,i,s=t.getEnvelope()
return e.forEach((function(e){var a=e.getEnvelope()
if(i&&(n=i.getEnvelope()),!r.envelopeIsEqual(a,s)&&r.envelopeContains(a,s)){for(var l=t.map((function(t){return t.from.coordinates})),u=void 0,h=function(t){e.some((function(e){return r.coordinatesEqual(t,e.from.coordinates)}))||(u=t)},c=0,f=l;c<f.length;c++)h(f[c])
u&&e.inside(o.point(u))&&(i&&!r.envelopeContains(n,a)||(i=e))}})),i},t.prototype.inside=function(t){return a.default(t,this.toPolygon())},t}()
e.default=l},8463:function(t,e,n){"use strict"
var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=i(n(7495)),o=i(n(5946)),s=i(n(7060)),a=n(9611),l=n(2317),u=function(){function t(){this.edges=[],this.nodes={}}return t.fromGeoJson=function(e){!function(t){if(!t)throw new Error("No geojson passed")
if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw new Error("Invalid input type '"+t.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(e)
var n=new t
return a.flattenEach(e,(function(t){l.featureOf(t,"LineString","Graph::fromGeoJson"),a.coordReduce(t,(function(t,e){if(t){var i=n.getNode(t),r=n.getNode(e)
n.addEdge(i,r)}return e}))})),n},t.prototype.getNode=function(t){var e=r.default.buildId(t),n=this.nodes[e]
return n||(n=this.nodes[e]=new r.default(t)),n},t.prototype.addEdge=function(t,e){var n=new o.default(t,e),i=n.getSymetric()
this.edges.push(n),this.edges.push(i)},t.prototype.deleteDangles=function(){var t=this
Object.keys(this.nodes).map((function(e){return t.nodes[e]})).forEach((function(e){return t._removeIfDangle(e)}))},t.prototype._removeIfDangle=function(t){var e=this
if(t.innerEdges.length<=1){var n=t.getOuterEdges().map((function(t){return t.to}))
this.removeNode(t),n.forEach((function(t){return e._removeIfDangle(t)}))}},t.prototype.deleteCutEdges=function(){var t=this
this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach((function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))}))},t.prototype._computeNextCWEdges=function(t){var e=this
void 0===t?Object.keys(this.nodes).forEach((function(t){return e._computeNextCWEdges(e.nodes[t])})):t.getOuterEdges().forEach((function(e,n){t.getOuterEdge((0===n?t.getOuterEdges().length:n)-1).symetric.next=e}))},t.prototype._computeNextCCWEdges=function(t,e){for(var n,i,r=t.getOuterEdges(),o=r.length-1;o>=0;--o){var s=r[o],a=s.symetric,l=void 0,u=void 0
s.label===e&&(l=s),a.label===e&&(u=a),l&&u&&(u&&(i=u),l&&(i&&(i.next=l,i=void 0),n||(n=l)))}i&&(i.next=n)},t.prototype._findLabeledEdgeRings=function(){var t=[],e=0
return this.edges.forEach((function(n){if(!(n.label>=0)){t.push(n)
var i=n
do{i.label=e,i=i.next}while(!n.isEqual(i))
e++}})),t},t.prototype.getEdgeRings=function(){var t=this
this._computeNextCWEdges(),this.edges.forEach((function(t){t.label=void 0})),this._findLabeledEdgeRings().forEach((function(e){t._findIntersectionNodes(e).forEach((function(n){t._computeNextCCWEdges(n,e.label)}))}))
var e=[]
return this.edges.forEach((function(n){n.ring||e.push(t._findEdgeRing(n))})),e},t.prototype._findIntersectionNodes=function(t){var e=[],n=t,i=function(){var i=0
n.from.getOuterEdges().forEach((function(e){e.label===t.label&&++i})),i>1&&e.push(n.from),n=n.next}
do{i()}while(!t.isEqual(n))
return e},t.prototype._findEdgeRing=function(t){var e=t,n=new s.default
do{n.push(e),e.ring=n,e=e.next}while(!t.isEqual(e))
return n},t.prototype.removeNode=function(t){var e=this
t.getOuterEdges().forEach((function(t){return e.removeEdge(t)})),t.innerEdges.forEach((function(t){return e.removeEdge(t)})),delete this.nodes[t.id]},t.prototype.removeEdge=function(t){this.edges=this.edges.filter((function(e){return!e.isEqual(t)})),t.deleteEdge()},t}()
e.default=u},7495:(t,e,n)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var i=n(9319),r=function(){function t(e){this.id=t.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return t.buildId=function(t){return t.join(",")},t.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter((function(e){return e.from.id!==t.from.id}))},t.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter((function(e){return e.to.id!==t.to.id}))},t.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},t.prototype.sortOuterEdges=function(){var t=this
this.outerEdgesSorted||(this.outerEdges.sort((function(e,n){var r=e.to,o=n.to
if(r.coordinates[0]-t.coordinates[0]>=0&&o.coordinates[0]-t.coordinates[0]<0)return 1
if(r.coordinates[0]-t.coordinates[0]<0&&o.coordinates[0]-t.coordinates[0]>=0)return-1
if(r.coordinates[0]-t.coordinates[0]==0&&o.coordinates[0]-t.coordinates[0]==0)return r.coordinates[1]-t.coordinates[1]>=0||o.coordinates[1]-t.coordinates[1]>=0?r.coordinates[1]-o.coordinates[1]:o.coordinates[1]-r.coordinates[1]
var s=i.orientationIndex(t.coordinates,r.coordinates,o.coordinates)
return s<0?1:s>0?-1:Math.pow(r.coordinates[0]-t.coordinates[0],2)+Math.pow(r.coordinates[1]-t.coordinates[1],2)-(Math.pow(o.coordinates[0]-t.coordinates[0],2)+Math.pow(o.coordinates[1]-t.coordinates[1],2))})),this.outerEdgesSorted=!0)},t.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},t.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},t.prototype.addInnerEdge=function(t){this.innerEdges.push(t)},t}()
e.default=r},9319:function(t,e,n){"use strict"
var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=i(n(2015)),o=n(6303)
e.orientationIndex=function(t,e,n){var i,r=e[0]-t[0],o=e[1]-t[1],s=n[0]-e[0]
return((i=r*(n[1]-e[1])-s*o)>0)-(i<0)||+i},e.envelopeIsEqual=function(t,e){var n=t.geometry.coordinates[0].map((function(t){return t[0]})),i=t.geometry.coordinates[0].map((function(t){return t[1]})),r=e.geometry.coordinates[0].map((function(t){return t[0]})),o=e.geometry.coordinates[0].map((function(t){return t[1]}))
return Math.max.apply(null,n)===Math.max.apply(null,r)&&Math.max.apply(null,i)===Math.max.apply(null,o)&&Math.min.apply(null,n)===Math.min.apply(null,r)&&Math.min.apply(null,i)===Math.min.apply(null,o)},e.envelopeContains=function(t,e){return e.geometry.coordinates[0].every((function(e){return r.default(o.point(e),t)}))},e.coordinatesEqual=function(t,e){return t[0]===e[0]&&t[1]===e[1]}},4939:function(t,e,n){"use strict"
var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=n(9611),o=n(6303),s=i(n(7051))
function a(t,e,n){void 0===n&&(n={})
var i=(n=n||{}).mutate
if(!t)throw new Error("geojson is required")
return Array.isArray(t)&&o.isNumber(t[0])?t="mercator"===e?l(t):u(t):(!0!==i&&(t=s.default(t)),r.coordEach(t,(function(t){var n="mercator"===e?l(t):u(t)
t[0]=n[0],t[1]=n[1]}))),t}function l(t){var e,n=Math.PI/180,i=6378137,r=20037508.342789244,o=[i*(Math.abs(t[0])<=180?t[0]:t[0]-360*((e=t[0])<0?-1:e>0?1:0))*n,i*Math.log(Math.tan(.25*Math.PI+.5*t[1]*n))]
return o[0]>r&&(o[0]=r),o[0]<-r&&(o[0]=-r),o[1]>r&&(o[1]=r),o[1]<-r&&(o[1]=-r),o}function u(t){var e=180/Math.PI,n=6378137
return[t[0]*e/n,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/n)))*e]}e.toMercator=function(t,e){return void 0===e&&(e={}),a(t,"mercator",e)},e.toWgs84=function(t,e){return void 0===e&&(e={}),a(t,"wgs84",e)}},6543:function(t,e,n){"use strict"
var i=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length
var i=Array(t),r=0
for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,r++)i[r]=o[s]
return i}
Object.defineProperty(e,"__esModule",{value:!0})
var r=n(6303)
function o(t){return Array.isArray(t)?a(t):t&&t.bbox?a(t.bbox):[360*s(),180*s()]}function s(){return Math.random()-.5}function a(t){return[Math.random()*(t[2]-t[0])+t[0],Math.random()*(t[3]-t[1])+t[1]]}e.randomPosition=o,e.randomPoint=function(t,e){void 0===e&&(e={}),null==t&&(t=1)
for(var n=[],i=0;i<t;i++)n.push(r.point(o(e.bbox)))
return r.featureCollection(n)},e.randomPolygon=function(t,e){void 0===e&&(e={}),null==t&&(t=1),r.isNumber(e.num_vertices)&&void 0!==e.num_vertices||(e.num_vertices=10),r.isNumber(e.max_radial_length)&&void 0!==e.max_radial_length||(e.max_radial_length=10)
for(var n=[],s=function(t){var s,a=[],l=i(Array(e.num_vertices+1)).map(Math.random)
l.forEach((function(t,e,n){n[e]=e>0?t+n[e-1]:t})),l.forEach((function(t){t=2*t*Math.PI/l[l.length-1]
var n=Math.random()
a.push([n*(e.max_radial_length||10)*Math.sin(t),n*(e.max_radial_length||10)*Math.cos(t)])})),a[a.length-1]=a[0],a=a.map((s=o(e.bbox),function(t){return[t[0]+s[0],t[1]+s[1]]})),n.push(r.polygon([a]))},a=0;a<t;a++)s()
return r.featureCollection(n)},e.randomLineString=function(t,e){if(void 0===e&&(e={}),e=e||{},!r.isObject(e))throw new Error("options is invalid")
var n=e.bbox,i=e.num_vertices,s=e.max_length,a=e.max_rotation
null==t&&(t=1),(!r.isNumber(i)||void 0===i||i<2)&&(i=10),r.isNumber(s)&&void 0!==s||(s=1e-4),r.isNumber(a)&&void 0!==a||(a=Math.PI/8)
for(var l=[],u=0;u<t;u++){for(var h=[o(n)],c=0;c<i-1;c++){var f=(0===c?2*Math.random()*Math.PI:Math.tan((h[c][1]-h[c-1][1])/(h[c][0]-h[c-1][0])))+(Math.random()-.5)*a*2,p=Math.random()*s
h.push([h[c][0]+p*Math.cos(f),h[c][1]+p*Math.sin(f)])}l.push(r.lineString(h))}return r.featureCollection(l)}},5851:function(t,e,n){"use strict"
var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=i(n(7323)),o=i(n(3703)),s=n(6303)
e.default=function(t,e,n,i){void 0===i&&(i={})
for(var a=[],l=t[0],u=t[1],h=t[2],c=t[3],f=e/o.default([l,u],[h,u],i)*(h-l),p=n/o.default([l,u],[l,c],i)*(c-u),d=h-l,g=c-u,_=Math.floor(d/f),m=Math.floor(g/p),y=(g-m*p)/2,v=l+(d-_*f)/2,x=0;x<_;x++){for(var b=u+y,E=0;E<m;E++){var w=s.polygon([[[v,b],[v,b+p],[v+f,b+p],[v+f,b],[v,b]]],i.properties)
i.mask?r.default(i.mask,w)&&a.push(w):a.push(w),b+=p}v+=f}return s.featureCollection(a)}},6127:(t,e,n)=>{"use strict"
var i=n(7051),r=n(8467),o=n(9611),s=n(2317),a=n(6303)
function l(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var u=l(i),h=l(r)
function c(t,e){if(e=e||{},!a.isObject(e))throw new Error("options is invalid")
var n=e.reverse||!1,i=e.mutate||!1
if(!t)throw new Error("<geojson> is required")
if("boolean"!=typeof n)throw new Error("<reverse> must be a boolean")
if("boolean"!=typeof i)throw new Error("<mutate> must be a boolean")
!1===i&&(t=u.default(t))
var r=[]
switch(t.type){case"GeometryCollection":return o.geomEach(t,(function(t){f(t,n)})),t
case"FeatureCollection":return o.featureEach(t,(function(t){o.featureEach(f(t,n),(function(t){r.push(t)}))})),a.featureCollection(r)}return f(t,n)}function f(t,e){switch("Feature"===t.type?t.geometry.type:t.type){case"GeometryCollection":return o.geomEach(t,(function(t){f(t,e)})),t
case"LineString":return p(s.getCoords(t),e),t
case"Polygon":return d(s.getCoords(t),e),t
case"MultiLineString":return s.getCoords(t).forEach((function(t){p(t,e)})),t
case"MultiPolygon":return s.getCoords(t).forEach((function(t){d(t,e)})),t
case"Point":case"MultiPoint":return t}}function p(t,e){h.default(t)===e&&t.reverse()}function d(t,e){h.default(t[0])!==e&&t[0].reverse()
for(var n=1;n<t.length;n++)h.default(t[n])===e&&t[n].reverse()}t.exports=c,t.exports.default=c},8975:(t,e,n)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var i=n(6303),r=n(2317)
function o(t,e){var n=i.degreesToRadians(t[1]),r=i.degreesToRadians(e[1]),o=i.degreesToRadians(e[0]-t[0])
o>Math.PI&&(o-=2*Math.PI),o<-Math.PI&&(o+=2*Math.PI)
var s=Math.log(Math.tan(r/2+Math.PI/4)/Math.tan(n/2+Math.PI/4)),a=Math.atan2(o,s)
return(i.radiansToDegrees(a)+360)%360}e.default=function(t,e,n){var i
return void 0===n&&(n={}),(i=n.final?o(r.getCoord(e),r.getCoord(t)):o(r.getCoord(t),r.getCoord(e)))>180?-(360-i):i}},7099:(t,e,n)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var i=n(6303),r=n(2317)
e.default=function(t,e,n,o){void 0===o&&(o={})
var s=e<0,a=i.convertLength(Math.abs(e),o.units,"meters")
s&&(a=-Math.abs(a))
var l=r.getCoord(t),u=function(t,e,n,r){var o=e/(r=void 0===r?i.earthRadius:Number(r)),s=t[0]*Math.PI/180,a=i.degreesToRadians(t[1]),l=i.degreesToRadians(n),u=o*Math.cos(l),h=a+u
Math.abs(h)>Math.PI/2&&(h=h>0?Math.PI-h:-Math.PI-h)
var c=Math.log(Math.tan(h/2+Math.PI/4)/Math.tan(a/2+Math.PI/4)),f=Math.abs(c)>1e-11?u/c:Math.cos(a)
return[(180*(s+o*Math.sin(l)/f)/Math.PI+540)%360-180,180*h/Math.PI]}(l,a,n)
return u[0]+=u[0]-l[0]>180?-360:l[0]-u[0]>180?360:0,i.point(u,o.properties)}},4611:(t,e,n)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var i=n(6303),r=n(2317)
e.default=function(t,e,n){void 0===n&&(n={})
var o=r.getCoord(t),s=r.getCoord(e)
s[0]+=s[0]-o[0]>180?-360:o[0]-s[0]>180?360:0
var a=function(t,e,n){var r=n=void 0===n?i.earthRadius:Number(n),o=t[1]*Math.PI/180,s=e[1]*Math.PI/180,a=s-o,l=Math.abs(e[0]-t[0])*Math.PI/180
l>Math.PI&&(l-=2*Math.PI)
var u=Math.log(Math.tan(s/2+Math.PI/4)/Math.tan(o/2+Math.PI/4)),h=Math.abs(u)>1e-11?a/u:Math.cos(o)
return Math.sqrt(a*a+h*h*l*l)*r}(o,s)
return i.convertLength(a,"meters",n.units)}},3175:(t,e,n)=>{"use strict"
var i=n(6303)
function r(t,e){if(!t)throw new Error("featurecollection is required")
if(null==e)throw new Error("num is required")
if("number"!=typeof e)throw new Error("num must be a number")
return i.featureCollection(function(t,e){for(var n,i,r=t.slice(0),o=t.length,s=o-e;o-- >s;)n=r[i=Math.floor((o+1)*Math.random())],r[i]=r[o],r[o]=n
return r.slice(s)}(t.features,e))}t.exports=r,t.exports.default=r},6819:(t,e,n)=>{"use strict"
var i=n(7651),r=n(5559),o=n(9611),s=n(6303),a=n(2317)
function l(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var u=l(i),h=l(r)
function c(t,e,n,i,r){if(r=r||{},!s.isObject(r))throw new Error("options is invalid")
var l=r.properties
if(!t)throw new Error("center is required")
if(null==n)throw new Error("bearing1 is required")
if(null==i)throw new Error("bearing2 is required")
if(!e)throw new Error("radius is required")
if("object"!=typeof r)throw new Error("options must be an object")
if(f(n)===f(i))return u.default(t,e,r)
var c=a.getCoords(t),p=h.default(t,e,n,i,r),d=[[c]]
return o.coordEach(p,(function(t){d[0].push(t)})),d[0].push(c),s.polygon(d,l)}function f(t){var e=t%360
return e<0&&(e+=360),e}t.exports=c,t.exports.default=c},4217:(t,e,n)=>{"use strict"
var i=n(463),r=n(2015),o=n(3703),s=n(4067),a=n(2707),l=n(3779),u=n(2317),h=n(6303)
function c(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var f=c(i),p=c(r),d=c(o),g=c(s),_=c(a),m=c(l)
function y(t){for(var e=t,n=[];e.parent;)n.unshift(e),e=e.parent
return n}var v={search:function(t,e,n,i){t.cleanDirty()
var r=(i=i||{}).heuristic||v.heuristics.manhattan,o=i.closest||!1,s=new E((function(t){return t.f})),a=e
for(e.h=r(e,n),s.push(e);s.size()>0;){var l=s.pop()
if(l===n)return y(l)
l.closed=!0
for(var u=t.neighbors(l),h=0,c=u.length;h<c;++h){var f=u[h]
if(!f.closed&&!f.isWall()){var p=l.g+f.getCost(l),d=f.visited;(!d||p<f.g)&&(f.visited=!0,f.parent=l,f.h=f.h||r(f,n),f.g=p,f.f=f.g+f.h,t.markDirty(f),o&&(f.h<a.h||f.h===a.h&&f.g<a.g)&&(a=f),d?s.rescoreElement(f):s.push(f))}}}return o?y(a):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var n=Math.sqrt(2),i=Math.abs(e.x-t.x),r=Math.abs(e.y-t.y)
return 1*(i+r)+(n-2)*Math.min(i,r)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}}
function x(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[]
for(var n=0;n<t.length;n++){this.grid[n]=[]
for(var i=0,r=t[n];i<r.length;i++){var o=new b(n,i,r[i])
this.grid[n][i]=o,this.nodes.push(o)}}this.init()}function b(t,e,n){this.x=t,this.y=e,this.weight=n}function E(t){this.content=[],this.scoreFunction=t}function w(t,e,n){if(n=n||{},!h.isObject(n))throw new Error("options is invalid")
var i=n.resolution,r=n.minDistance,o=n.obstacles||h.featureCollection([])
if(!t)throw new Error("start is required")
if(!e)throw new Error("end is required")
if(i&&!h.isNumber(i)||i<=0)throw new Error("options.resolution must be a number, greater than 0")
if(r)throw new Error("options.minDistance is not yet implemented")
var s=u.getCoord(t),a=u.getCoord(e)
switch(t=h.point(s),e=h.point(a),u.getType(o)){case"FeatureCollection":if(0===o.features.length)return h.lineString([s,a])
break
case"Polygon":o=h.featureCollection([h.feature(u.getGeom(o))])
break
default:throw new Error("invalid obstacles")}var l=o
l.features.push(t),l.features.push(e)
var c=f.default(g.default(m.default(f.default(l)),1.15))
i||(i=d.default([c[0],c[1]],[c[2],c[1]],n)/100),l.features.pop(),l.features.pop()
for(var p=c[0],y=c[1],b=c[2],E=c[3],w=i/d.default([p,y],[b,y],n)*(b-p),C=i/d.default([p,y],[p,E],n)*(E-y),T=b-p,I=E-y,P=Math.floor(T/w),A=Math.floor(I/C),R=(T-P*w)/2,L=[],M=[],O=[],N=[],D=1/0,F=1/0,k=E-(I-A*C)/2,j=0;k>=y;){for(var z=[],G=[],B=p+R,q=0;B<=b;){var U=h.point([B,k]),Z=S(U,o)
z.push(Z?0:1),G.push(B+"|"+k)
var X=d.default(U,t)
!Z&&X<D&&(D=X,O={x:q,y:j})
var Y=d.default(U,e)
!Z&&Y<F&&(F=Y,N={x:q,y:j}),B+=w,q++}M.push(z),L.push(G),k-=C,j++}var V=new x(M,{diagonal:!0}),W=V.grid[O.y][O.x],H=V.grid[N.y][N.x],$=v.search(V,W,H),K=[s]
return $.forEach((function(t){var e=L[t.x][t.y].split("|")
K.push([+e[0],+e[1]])})),K.push(a),_.default(h.lineString(K))}function S(t,e){for(var n=0;n<e.features.length;n++)if(p.default(t,e.features[n]))return!0
return!1}x.prototype.init=function(){this.dirtyNodes=[]
for(var t=0;t<this.nodes.length;t++)v.cleanNode(this.nodes[t])},x.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)v.cleanNode(this.dirtyNodes[t])
this.dirtyNodes=[]},x.prototype.markDirty=function(t){this.dirtyNodes.push(t)},x.prototype.neighbors=function(t){var e=[],n=t.x,i=t.y,r=this.grid
return r[n-1]&&r[n-1][i]&&e.push(r[n-1][i]),r[n+1]&&r[n+1][i]&&e.push(r[n+1][i]),r[n]&&r[n][i-1]&&e.push(r[n][i-1]),r[n]&&r[n][i+1]&&e.push(r[n][i+1]),this.diagonal&&(r[n-1]&&r[n-1][i-1]&&e.push(r[n-1][i-1]),r[n+1]&&r[n+1][i-1]&&e.push(r[n+1][i-1]),r[n-1]&&r[n-1][i+1]&&e.push(r[n-1][i+1]),r[n+1]&&r[n+1][i+1]&&e.push(r[n+1][i+1])),e},x.prototype.toString=function(){for(var t,e,n,i,r=[],o=this.grid,s=0,a=o.length;s<a;s++){for(t=[],n=0,i=(e=o[s]).length;n<i;n++)t.push(e[n].weight)
r.push(t.join(" "))}return r.join("\n")},b.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},b.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},b.prototype.isWall=function(){return 0===this.weight},E.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop()
return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),n=this.content.pop()
e!==this.content.length-1&&(this.content[e]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var n=(t+1>>1)-1,i=this.content[n]
if(!(this.scoreFunction(e)<this.scoreFunction(i)))break
this.content[n]=e,this.content[t]=i,t=n}},bubbleUp:function(t){for(var e=this.content.length,n=this.content[t],i=this.scoreFunction(n);;){var r,o=t+1<<1,s=o-1,a=null
if(s<e){var l=this.content[s];(r=this.scoreFunction(l))<i&&(a=s)}if(o<e){var u=this.content[o]
this.scoreFunction(u)<(null===a?i:r)&&(a=o)}if(null===a)break
this.content[t]=this.content[a],this.content[a]=n,t=a}}},t.exports=w,t.exports.default=w},9467:(t,e,n)=>{"use strict"
var i=n(2707),r=n(7051),o=n(9611),s=n(6303)
function a(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var l=a(i),u=a(r)
function h(t,e,n){var i=e.x,r=e.y,o=n.x-i,s=n.y-r
if(0!==o||0!==s){var a=((t.x-i)*o+(t.y-r)*s)/(o*o+s*s)
a>1?(i=n.x,r=n.y):a>0&&(i+=o*a,r+=s*a)}return(o=t.x-i)*o+(s=t.y-r)*s}function c(t,e,n,i,r){for(var o,s=i,a=e+1;a<n;a++){var l=h(t[a],t[e],t[n])
l>s&&(o=a,s=l)}s>i&&(o-e>1&&c(t,e,o,i,r),r.push(t[o]),n-o>1&&c(t,o,n,i,r))}function f(t,e){var n=t.length-1,i=[t[0]]
return c(t,0,n,e,i),i.push(t[n]),i}function p(t,e,n){if(t.length<=2)return t
var i=void 0!==e?e*e:1
return t=n?t:function(t,e){for(var n,i,r,o,s,a=t[0],l=[a],u=1,h=t.length;u<h;u++)r=a,(o=(i=n=t[u]).x-r.x)*o+(s=i.y-r.y)*s>e&&(l.push(n),a=n)
return a!==n&&l.push(n),l}(t,i),f(t,i)}function d(t,e){if(e=e||{},!s.isObject(e))throw new Error("options is invalid")
var n=void 0!==e.tolerance?e.tolerance:1,i=e.highQuality||!1,r=e.mutate||!1
if(!t)throw new Error("geojson is required")
if(n&&n<0)throw new Error("invalid tolerance")
return!0!==r&&(t=u.default(t)),o.geomEach(t,(function(t){!function(t,e,n){var i=t.type
if("Point"===i||"MultiPoint"===i)return t
l.default(t,!0)
var r=t.coordinates
switch(i){case"LineString":t.coordinates=g(r,e,n)
break
case"MultiLineString":t.coordinates=r.map((function(t){return g(t,e,n)}))
break
case"Polygon":t.coordinates=_(r,e,n)
break
case"MultiPolygon":t.coordinates=r.map((function(t){return _(t,e,n)}))}}(t,n,i)})),t}function g(t,e,n){return p(t.map((function(t){return{x:t[0],y:t[1],z:t[2]}})),e,n).map((function(t){return t.z?[t.x,t.y,t.z]:[t.x,t.y]}))}function _(t,e,n){return t.map((function(t){var i=t.map((function(t){return{x:t[0],y:t[1]}}))
if(i.length<4)throw new Error("invalid polygon")
for(var r=p(i,e,n).map((function(t){return[t.x,t.y]}));!m(r);)r=p(i,e-=.01*e,n).map((function(t){return[t.x,t.y]}))
return r[r.length-1][0]===r[0][0]&&r[r.length-1][1]===r[0][1]||r.push(r[0]),r}))}function m(t){return!(t.length<3||3===t.length&&t[2][0]===t[0][0]&&t[2][1]===t[0][1])}t.exports=d,t.exports.default=d},993:function(t,e,n){"use strict"
var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=i(n(5851))
e.default=function(t,e,n){return void 0===n&&(n={}),r.default(t,e,e,n)}},2083:(t,e,n)=>{"use strict"
var i=function(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}(n(3703))
function r(t){var e=t[0],n=t[1],r=t[2],o=t[3]
if(i.default(t.slice(0,2),[r,n])>=i.default(t.slice(0,2),[e,o])){var s=(n+o)/2
return[e,s-(r-e)/2,r,s+(r-e)/2]}var a=(e+r)/2
return[a-(o-n)/2,n,a+(o-n)/2,o]}t.exports=r,t.exports.default=r},5379:(t,e,n)=>{"use strict"
var i=n(9611),r=n(2317),o=n(6303),s=n(3031),a=n(4457),l=n(4485)
function u(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var h=u(s),c=u(a),f=u(l)
function p(t,e){if(e=e||{},!o.isObject(e))throw new Error("options is invalid")
var n=e.steps||64,s=e.weight,a=e.properties||{}
if(!o.isNumber(n))throw new Error("steps must be a number")
if(!o.isObject(a))throw new Error("properties must be a number")
var l=i.coordAll(t).length,u=h.default(t,{weight:s}),p=0,g=0,_=0
i.featureEach(t,(function(t){var e=t.properties[s]||1,n=d(r.getCoords(t),r.getCoords(u))
p+=Math.pow(n.x,2)*e,g+=Math.pow(n.y,2)*e,_+=n.x*n.y*e}))
var m=p-g,y=Math.sqrt(Math.pow(m,2)+4*Math.pow(_,2)),v=2*_,x=Math.atan((m+y)/v),b=180*x/Math.PI,E=0,w=0,S=0
i.featureEach(t,(function(t){var e=t.properties[s]||1,n=d(r.getCoords(t),r.getCoords(u))
E+=Math.pow(n.x*Math.cos(x)-n.y*Math.sin(x),2)*e,w+=Math.pow(n.x*Math.sin(x)+n.y*Math.cos(x),2)*e,S+=e}))
var C=Math.sqrt(2*E/S),T=Math.sqrt(2*w/S),I=f.default(u,C,T,{units:"degrees",angle:b,steps:n,properties:a}),P=c.default(t,o.featureCollection([I])),A={meanCenterCoordinates:r.getCoords(u),semiMajorAxis:C,semiMinorAxis:T,numberOfFeatures:l,angle:b,percentageWithinEllipse:100*i.coordAll(P).length/l}
return I.properties.standardDeviationalEllipse=A,I}function d(t,e){return{x:t[0]-e[0],y:t[1]-e[1]}}t.exports=p,t.exports.default=p},877:(t,e,n)=>{"use strict"
var i=n(2015),r=n(7051),o=n(9611)
function s(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var a=s(i),l=s(r)
function u(t,e,n,i){return t=l.default(t),e=l.default(e),o.featureEach(t,(function(t){t.properties||(t.properties={}),o.featureEach(e,(function(e){void 0===t.properties[i]&&a.default(t,e)&&(t.properties[i]=e.properties[n])}))})),t}t.exports=u,t.exports.default=u},7817:(t,e,n)=>{"use strict"
var i=n(8992),r=n(6303)
var o=function(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}(i)
function s(t){if(!t.geometry||"Polygon"!==t.geometry.type&&"MultiPolygon"!==t.geometry.type)throw new Error("input must be a Polygon or MultiPolygon")
var e={type:"FeatureCollection",features:[]}
return"Polygon"===t.geometry.type?e.features=a(t.geometry.coordinates):t.geometry.coordinates.forEach((function(t){e.features=e.features.concat(a(t))})),e}function a(t){var e=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[r][o][s])
r>0&&(i+=t[r-1].length,n.holes.push(i))}return n}(t),n=o.default(e.vertices,e.holes,2),i=[],s=[]
n.forEach((function(t,i){var r=n[i]
s.push([e.vertices[2*r],e.vertices[2*r+1]])}))
for(var a=0;a<s.length;a+=3){var l=s.slice(a,a+3)
l.push(s[a]),i.push(r.polygon([l]))}return i}t.exports=s,t.exports.default=s},1291:(t,e,n)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var i=n(6303)
e.default=function(t,e){var n=!1
return i.featureCollection(function(t){if(t.length<3)return[]
t.sort(o)
for(var e,n,i,a,l,u,h=t.length-1,c=t[h].x,f=t[0].x,p=t[h].y,d=p;h--;)t[h].y<p&&(p=t[h].y),t[h].y>d&&(d=t[h].y)
var g,_=f-c,m=d-p,y=_>m?_:m,v=.5*(f+c),x=.5*(d+p),b=[new r({__sentinel:!0,x:v-20*y,y:x-y},{__sentinel:!0,x:v,y:x+20*y},{__sentinel:!0,x:v+20*y,y:x-y})],E=[],w=[]
for(h=t.length;h--;){for(w.length=0,g=b.length;g--;)(_=t[h].x-b[g].x)>0&&_*_>b[g].r?(E.push(b[g]),b.splice(g,1)):_*_+(m=t[h].y-b[g].y)*m>b[g].r||(w.push(b[g].a,b[g].b,b[g].b,b[g].c,b[g].c,b[g].a),b.splice(g,1))
for(s(w),g=w.length;g;)n=w[--g],e=w[--g],i=t[h],a=n.x-e.x,l=n.y-e.y,u=2*(a*(i.y-n.y)-l*(i.x-n.x)),Math.abs(u)>1e-12&&b.push(new r(e,n,i))}for(Array.prototype.push.apply(E,b),h=E.length;h--;)(E[h].a.__sentinel||E[h].b.__sentinel||E[h].c.__sentinel)&&E.splice(h,1)
return E}(t.features.map((function(t){var i={x:t.geometry.coordinates[0],y:t.geometry.coordinates[1]}
return e?i.z=t.properties[e]:3===t.geometry.coordinates.length&&(n=!0,i.z=t.geometry.coordinates[2]),i}))).map((function(t){var e=[t.a.x,t.a.y],r=[t.b.x,t.b.y],o=[t.c.x,t.c.y],s={}
return n?(e.push(t.a.z),r.push(t.b.z),o.push(t.c.z)):s={a:t.a.z,b:t.b.z,c:t.c.z},i.polygon([[e,r,o,e]],s)})))}
var r=function(t,e,n){this.a=t,this.b=e,this.c=n
var i,r,o=e.x-t.x,s=e.y-t.y,a=n.x-t.x,l=n.y-t.y,u=o*(t.x+e.x)+s*(t.y+e.y),h=a*(t.x+n.x)+l*(t.y+n.y),c=2*(o*(n.y-e.y)-s*(n.x-e.x))
this.x=(l*u-s*h)/c,this.y=(o*h-a*u)/c,i=this.x-t.x,r=this.y-t.y,this.r=i*i+r*r}
function o(t,e){return e.x-t.x}function s(t){var e,n,i,r,o,s=t.length
t:for(;s;)for(n=t[--s],e=t[--s],i=s;i;)if(o=t[--i],e===(r=t[--i])&&n===o||e===o&&n===r){t.splice(s,2),t.splice(i,2),s-=2
continue t}}},9023:(t,e,n)=>{"use strict"
var i=n(5335),r=n(8975),o=n(4611),s=n(7099),a=n(7051),l=n(9611),u=n(2317),h=n(6303)
function c(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var f=c(i),p=c(r),d=c(o),g=c(s),_=c(a)
function m(t,e,n){if(n=n||{},!h.isObject(n))throw new Error("options is invalid")
var i=n.pivot,r=n.mutate
if(!t)throw new Error("geojson is required")
if(null==e||isNaN(e))throw new Error("angle is required")
return 0===e||(i||(i=f.default(t)),!1!==r&&void 0!==r||(t=_.default(t)),l.coordEach(t,(function(t){var n=p.default(i,t)+e,r=d.default(i,t),o=u.getCoords(g.default(i,r,n))
t[0]=o[0],t[1]=o[1]}))),t}t.exports=m,t.exports.default=m},4067:(t,e,n)=>{"use strict"
var i=n(7051),r=n(6731),o=n(5335),s=n(463),a=n(8975),l=n(4611),u=n(7099),h=n(9611),c=n(6303),f=n(2317)
function p(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var d=p(i),g=p(r),_=p(o),m=p(s),y=p(a),v=p(l),x=p(u)
function b(t,e,n){if(n=n||{},!c.isObject(n))throw new Error("options is invalid")
var i=n.origin,r=n.mutate
if(!t)throw new Error("geojson required")
if("number"!=typeof e||0===e)throw new Error("invalid factor")
var o=Array.isArray(i)||"object"==typeof i
return!0!==r&&(t=d.default(t)),"FeatureCollection"!==t.type||o?E(t,e,i):(h.featureEach(t,(function(n,r){t.features[r]=E(n,e,i)})),t)}function E(t,e,n){var i="Point"===f.getType(t)
return n=function(t,e){if(null==e&&(e="centroid"),Array.isArray(e)||"object"==typeof e)return f.getCoord(e)
var n=t.bbox?t.bbox:m.default(t),i=n[0],r=n[1],o=n[2],s=n[3]
switch(e){case"sw":case"southwest":case"westsouth":case"bottomleft":return c.point([i,r])
case"se":case"southeast":case"eastsouth":case"bottomright":return c.point([o,r])
case"nw":case"northwest":case"westnorth":case"topleft":return c.point([i,s])
case"ne":case"northeast":case"eastnorth":case"topright":return c.point([o,s])
case"center":return g.default(t)
case void 0:case null:case"centroid":return _.default(t)
default:throw new Error("invalid origin")}}(t,n),1===e||i||h.coordEach(t,(function(t){var i=v.default(n,t),r=y.default(n,t),o=i*e,s=f.getCoords(x.default(n,o,r))
t[0]=s[0],t[1]=s[1],3===t.length&&(t[2]*=e)})),t}t.exports=b,t.exports.default=b},8171:(t,e,n)=>{"use strict"
var i=n(9611),r=n(6303),o=n(2317),s=n(7051),a=n(7099)
function l(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var u=l(s),h=l(a)
function c(t,e,n,s){if(s=s||{},!r.isObject(s))throw new Error("options is invalid")
var a=s.units,l=s.zTranslation,c=s.mutate
if(!t)throw new Error("geojson is required")
if(null==e||isNaN(e))throw new Error("distance is required")
if(l&&"number"!=typeof l&&isNaN(l))throw new Error("zTranslation is not a number")
if(l=void 0!==l?l:0,0===e&&0===l)return t
if(null==n||isNaN(n))throw new Error("direction is required")
return e<0&&(e=-e,n+=180),!1!==c&&void 0!==c||(t=u.default(t)),i.coordEach(t,(function(t){var i=o.getCoords(h.default(t,e,n,{units:a}))
t[0]=i[0],t[1]=i[1],l&&3===t.length&&(t[2]+=l)})),t}t.exports=c,t.exports.default=c},4907:function(t,e,n){"use strict"
var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=i(n(3703)),o=i(n(5279)),s=n(6303)
e.default=function(t,e,n){void 0===n&&(n={})
for(var i=[],a=e/r.default([t[0],t[1]],[t[2],t[1]],n)*(t[2]-t[0]),l=e/r.default([t[0],t[1]],[t[0],t[3]],n)*(t[3]-t[1]),u=0,h=t[0];h<=t[2];){for(var c=0,f=t[1];f<=t[3];){var p=null,d=null
u%2==0&&c%2==0?(p=s.polygon([[[h,f],[h,f+l],[h+a,f],[h,f]]],n.properties),d=s.polygon([[[h,f+l],[h+a,f+l],[h+a,f],[h,f+l]]],n.properties)):u%2==0&&c%2==1?(p=s.polygon([[[h,f],[h+a,f+l],[h+a,f],[h,f]]],n.properties),d=s.polygon([[[h,f],[h,f+l],[h+a,f+l],[h,f]]],n.properties)):c%2==0&&u%2==1?(p=s.polygon([[[h,f],[h,f+l],[h+a,f+l],[h,f]]],n.properties),d=s.polygon([[[h,f],[h+a,f+l],[h+a,f],[h,f]]],n.properties)):c%2==1&&u%2==1&&(p=s.polygon([[[h,f],[h,f+l],[h+a,f],[h,f]]],n.properties),d=s.polygon([[[h,f+l],[h+a,f+l],[h+a,f],[h,f+l]]],n.properties)),n.mask?(o.default(n.mask,p)&&i.push(p),o.default(n.mask,d)&&i.push(d)):(i.push(p),i.push(d)),f+=l,c++}u++,h+=a}return s.featureCollection(i)}},9399:(t,e,n)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var i=n(9611)
e.default=function(t,e){void 0===e&&(e={})
var n=e.precision,r=e.coordinates,o=e.mutate
if(n=null==n||isNaN(n)?6:n,r=null==r||isNaN(r)?3:r,!t)throw new Error("<geojson> is required")
if("number"!=typeof n)throw new Error("<precision> must be a number")
if("number"!=typeof r)throw new Error("<coordinates> must be a number")
!1!==o&&void 0!==o||(t=JSON.parse(JSON.stringify(t)))
var s=Math.pow(10,n)
return i.coordEach(t,(function(t){!function(t,e,n){t.length>n&&t.splice(n,t.length)
for(var i=0;i<t.length;i++)t[i]=Math.round(t[i]*e)/e}(t,s,r)})),t}},4435:(t,e,n)=>{"use strict"
Object.defineProperty(e,"__esModule",{value:!0})
var i=n(3183),r=n(627),o=n(4457),s=n(8771),a=n(3657),l=n(1111),u=n(9467),h=n(6571),c=n(877),f=n(3175),p=n(1167),d=n(2083),g=n(7651),_=n(4371),m=n(6731),y=n(8331),v=n(5335),x=n(2887),b=n(3703),E=n(2107),w=n(463),S=n(7817),C=n(3779),T=n(2015),I=n(1891),P=n(8357),A=n(3697),R=n(4875),L=n(1291),M=n(2045),O=n(2165),N=n(9),D=n(2099),F=n(587),k=n(747),j=n(111),z=n(5499),G=n(3419),B=n(6411),q=n(9399),U=n(7365),Z=n(7315),X=n(239),Y=n(9979),V=n(7391),W=n(8735),H=n(5579),$=n(5559),K=n(3799),J=n(3643),Q=n(2733),tt=n(1055),et=n(6819),nt=n(8975),it=n(4611),rt=n(7099),ot=n(3083),st=n(6127),at=n(3751),lt=n(9023),ut=n(4067),ht=n(8171),ct=n(3865),ft=n(2599),pt=n(7899),dt=n(4931),gt=n(4303),_t=n(8467),mt=n(6669),yt=n(4537),vt=n(7567),xt=n(9555),bt=n(7323),Et=n(7051),wt=n(2707),St=n(831),Ct=n(835),Tt=n(6287),It=n(4003),Pt=n(4217),At=n(6246),Rt=n(4485),Lt=n(3031),Mt=n(6577),Ot=n(5379),Nt=n(1699),Dt=n(7431),Ft=n(5445),kt=n(2753),jt=n(4939),zt=n(6543),Gt=n(4523),Bt=n(6303),qt=n(2317),Ut=n(9611),Zt=n(9159),Xt=n(2415),Yt=n(1603),Vt=n(5279),Wt=n(1995),Ht=n(2255),$t=n(575),Kt=n(993),Jt=n(4907),Qt=n(3291)
function te(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}function ee(t){if(t&&t.__esModule)return t
var e=Object.create(null)
return t&&Object.keys(t).forEach((function(n){if("default"!==n){var i=Object.getOwnPropertyDescriptor(t,n)
Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}})),e.default=t,Object.freeze(e)}var ne=te(i),ie=te(r),re=te(o),oe=te(s),se=te(a),ae=te(l),le=te(u),ue=te(h),he=te(c),ce=te(f),fe=te(p),pe=te(d),de=te(g),ge=te(_),_e=te(m),me=te(y),ye=te(v),ve=te(x),xe=te(b),be=te(E),Ee=te(w),we=te(S),Se=te(C),Ce=te(T),Te=te(I),Ie=te(P),Pe=te(A),Ae=te(R),Re=te(L),Le=te(M),Me=te(O),Oe=te(N),Ne=te(D),De=te(F),Fe=te(k),ke=te(j),je=te(z),ze=te(G),Ge=te(B),Be=te(q),qe=te(U),Ue=te(Z),Ze=te(X),Xe=te(Y),Ye=te(V),Ve=te(W),We=te(H),He=te($),$e=te(K),Ke=te(J),Je=te(Q),Qe=te(tt),tn=te(et),en=te(nt),nn=te(it),rn=te(rt),on=te(ot),sn=te(st),an=te(at),ln=te(lt),un=te(ut),hn=te(ht),cn=te(ct),fn=te(ft),pn=te(pt),dn=te(dt),gn=te(gt),_n=te(_t),mn=te(mt),yn=te(yt),vn=te(vt),xn=te(xt),bn=te(bt),En=te(Et),wn=te(wt),Sn=te(St),Cn=te(Ct),Tn=te(Tt),In=te(It),Pn=te(Pt),An=te(At),Rn=te(Rt),Ln=te(Lt),Mn=te(Mt),On=te(Ot),Nn=te(Nt),Dn=te(Dt),Fn=te(Ft),kn=te(kt),jn=ee(jt),zn=ee(zt),Gn=ee(Gt),Bn=ee(Bt),qn=ee(qt),Un=ee(Ut),Zn=te(Zt),Xn=te(Xt),Yn=te(Yt),Vn=te(Vt),Wn=te(Wt),Hn=te(Ht),$n=te($t),Kn=te(Kt),Jn=te(Jt),Qn=te(Qt)
Object.keys(jt).forEach((function(t){"default"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return jt[t]}})})),Object.keys(zt).forEach((function(t){"default"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return zt[t]}})})),Object.keys(Gt).forEach((function(t){"default"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return Gt[t]}})})),Object.keys(Bt).forEach((function(t){"default"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return Bt[t]}})})),Object.keys(qt).forEach((function(t){"default"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return qt[t]}})})),Object.keys(Ut).forEach((function(t){"default"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return Ut[t]}})})),Object.defineProperty(e,"isolines",{enumerable:!0,get:function(){return ne.default}}),Object.defineProperty(e,"convex",{enumerable:!0,get:function(){return ie.default}}),Object.defineProperty(e,"pointsWithinPolygon",{enumerable:!0,get:function(){return re.default}}),Object.defineProperty(e,"within",{enumerable:!0,get:function(){return re.default}}),Object.defineProperty(e,"concave",{enumerable:!0,get:function(){return oe.default}}),Object.defineProperty(e,"collect",{enumerable:!0,get:function(){return se.default}}),Object.defineProperty(e,"flip",{enumerable:!0,get:function(){return ae.default}}),Object.defineProperty(e,"simplify",{enumerable:!0,get:function(){return le.default}}),Object.defineProperty(e,"bezier",{enumerable:!0,get:function(){return ue.default}}),Object.defineProperty(e,"bezierSpline",{enumerable:!0,get:function(){return ue.default}}),Object.defineProperty(e,"tag",{enumerable:!0,get:function(){return he.default}}),Object.defineProperty(e,"sample",{enumerable:!0,get:function(){return ce.default}}),Object.defineProperty(e,"envelope",{enumerable:!0,get:function(){return fe.default}}),Object.defineProperty(e,"square",{enumerable:!0,get:function(){return pe.default}}),Object.defineProperty(e,"circle",{enumerable:!0,get:function(){return de.default}}),Object.defineProperty(e,"midpoint",{enumerable:!0,get:function(){return ge.default}}),Object.defineProperty(e,"center",{enumerable:!0,get:function(){return _e.default}}),Object.defineProperty(e,"centerOfMass",{enumerable:!0,get:function(){return me.default}}),Object.defineProperty(e,"centroid",{enumerable:!0,get:function(){return ye.default}}),Object.defineProperty(e,"combine",{enumerable:!0,get:function(){return ve.default}}),Object.defineProperty(e,"distance",{enumerable:!0,get:function(){return xe.default}}),Object.defineProperty(e,"explode",{enumerable:!0,get:function(){return be.default}}),Object.defineProperty(e,"bbox",{enumerable:!0,get:function(){return Ee.default}}),Object.defineProperty(e,"tesselate",{enumerable:!0,get:function(){return we.default}}),Object.defineProperty(e,"bboxPolygon",{enumerable:!0,get:function(){return Se.default}}),Object.defineProperty(e,"booleanPointInPolygon",{enumerable:!0,get:function(){return Ce.default}}),Object.defineProperty(e,"inside",{enumerable:!0,get:function(){return Ce.default}}),Object.defineProperty(e,"nearest",{enumerable:!0,get:function(){return Te.default}}),Object.defineProperty(e,"nearestPoint",{enumerable:!0,get:function(){return Te.default}}),Object.defineProperty(e,"nearestPointOnLine",{enumerable:!0,get:function(){return Ie.default}}),Object.defineProperty(e,"pointOnLine",{enumerable:!0,get:function(){return Ie.default}}),Object.defineProperty(e,"nearestPointToLine",{enumerable:!0,get:function(){return Pe.default}}),Object.defineProperty(e,"planepoint",{enumerable:!0,get:function(){return Ae.default}}),Object.defineProperty(e,"tin",{enumerable:!0,get:function(){return Re.default}}),Object.defineProperty(e,"bearing",{enumerable:!0,get:function(){return Le.default}}),Object.defineProperty(e,"destination",{enumerable:!0,get:function(){return Me.default}}),Object.defineProperty(e,"kinks",{enumerable:!0,get:function(){return Oe.default}}),Object.defineProperty(e,"pointOnFeature",{enumerable:!0,get:function(){return Ne.default}}),Object.defineProperty(e,"pointOnSurface",{enumerable:!0,get:function(){return Ne.default}}),Object.defineProperty(e,"area",{enumerable:!0,get:function(){return De.default}}),Object.defineProperty(e,"along",{enumerable:!0,get:function(){return Fe.default}}),Object.defineProperty(e,"length",{enumerable:!0,get:function(){return ke.default}}),Object.defineProperty(e,"lineDistance",{enumerable:!0,get:function(){return ke.default}}),Object.defineProperty(e,"lineSlice",{enumerable:!0,get:function(){return je.default}}),Object.defineProperty(e,"lineSliceAlong",{enumerable:!0,get:function(){return ze.default}}),Object.defineProperty(e,"pointGrid",{enumerable:!0,get:function(){return Ge.default}}),Object.defineProperty(e,"truncate",{enumerable:!0,get:function(){return Be.default}}),Object.defineProperty(e,"flatten",{enumerable:!0,get:function(){return qe.default}}),Object.defineProperty(e,"lineIntersect",{enumerable:!0,get:function(){return Ue.default}}),Object.defineProperty(e,"lineChunk",{enumerable:!0,get:function(){return Ze.default}}),Object.defineProperty(e,"unkinkPolygon",{enumerable:!0,get:function(){return Xe.default}}),Object.defineProperty(e,"greatCircle",{enumerable:!0,get:function(){return Ye.default}}),Object.defineProperty(e,"lineSegment",{enumerable:!0,get:function(){return Ve.default}}),Object.defineProperty(e,"lineSplit",{enumerable:!0,get:function(){return We.default}}),Object.defineProperty(e,"lineArc",{enumerable:!0,get:function(){return He.default}}),Object.defineProperty(e,"polygonToLine",{enumerable:!0,get:function(){return $e.default}}),Object.defineProperty(e,"polygonToLineString",{enumerable:!0,get:function(){return $e.default}}),Object.defineProperty(e,"lineStringToPolygon",{enumerable:!0,get:function(){return Ke.default}}),Object.defineProperty(e,"lineToPolygon",{enumerable:!0,get:function(){return Ke.default}}),Object.defineProperty(e,"bboxClip",{enumerable:!0,get:function(){return Je.default}}),Object.defineProperty(e,"lineOverlap",{enumerable:!0,get:function(){return Qe.default}}),Object.defineProperty(e,"sector",{enumerable:!0,get:function(){return tn.default}}),Object.defineProperty(e,"rhumbBearing",{enumerable:!0,get:function(){return en.default}}),Object.defineProperty(e,"rhumbDistance",{enumerable:!0,get:function(){return nn.default}}),Object.defineProperty(e,"rhumbDestination",{enumerable:!0,get:function(){return rn.default}}),Object.defineProperty(e,"polygonTangents",{enumerable:!0,get:function(){return on.default}}),Object.defineProperty(e,"rewind",{enumerable:!0,get:function(){return sn.default}}),Object.defineProperty(e,"isobands",{enumerable:!0,get:function(){return an.default}}),Object.defineProperty(e,"transformRotate",{enumerable:!0,get:function(){return ln.default}}),Object.defineProperty(e,"transformScale",{enumerable:!0,get:function(){return un.default}}),Object.defineProperty(e,"transformTranslate",{enumerable:!0,get:function(){return hn.default}}),Object.defineProperty(e,"lineOffset",{enumerable:!0,get:function(){return cn.default}}),Object.defineProperty(e,"polygonize",{enumerable:!0,get:function(){return fn.default}}),Object.defineProperty(e,"booleanDisjoint",{enumerable:!0,get:function(){return pn.default}}),Object.defineProperty(e,"booleanContains",{enumerable:!0,get:function(){return dn.default}}),Object.defineProperty(e,"booleanCrosses",{enumerable:!0,get:function(){return gn.default}}),Object.defineProperty(e,"booleanClockwise",{enumerable:!0,get:function(){return _n.default}}),Object.defineProperty(e,"booleanOverlap",{enumerable:!0,get:function(){return mn.default}}),Object.defineProperty(e,"booleanPointOnLine",{enumerable:!0,get:function(){return yn.default}}),Object.defineProperty(e,"booleanEqual",{enumerable:!0,get:function(){return vn.default}}),Object.defineProperty(e,"booleanWithin",{enumerable:!0,get:function(){return xn.default}}),Object.defineProperty(e,"booleanIntersects",{enumerable:!0,get:function(){return bn.default}}),Object.defineProperty(e,"clone",{enumerable:!0,get:function(){return En.default}}),Object.defineProperty(e,"cleanCoords",{enumerable:!0,get:function(){return wn.default}}),Object.defineProperty(e,"clustersDbscan",{enumerable:!0,get:function(){return Sn.default}}),Object.defineProperty(e,"clustersKmeans",{enumerable:!0,get:function(){return Cn.default}}),Object.defineProperty(e,"pointToLineDistance",{enumerable:!0,get:function(){return Tn.default}}),Object.defineProperty(e,"booleanParallel",{enumerable:!0,get:function(){return In.default}}),Object.defineProperty(e,"shortestPath",{enumerable:!0,get:function(){return Pn.default}}),Object.defineProperty(e,"voronoi",{enumerable:!0,get:function(){return An.default}}),Object.defineProperty(e,"ellipse",{enumerable:!0,get:function(){return Rn.default}}),Object.defineProperty(e,"centerMean",{enumerable:!0,get:function(){return Ln.default}}),Object.defineProperty(e,"centerMedian",{enumerable:!0,get:function(){return Mn.default}}),Object.defineProperty(e,"standardDeviationalEllipse",{enumerable:!0,get:function(){return On.default}}),Object.defineProperty(e,"angle",{enumerable:!0,get:function(){return Nn.default}}),Object.defineProperty(e,"polygonSmooth",{enumerable:!0,get:function(){return Dn.default}}),Object.defineProperty(e,"moranIndex",{enumerable:!0,get:function(){return Fn.default}}),Object.defineProperty(e,"distanceWeight",{enumerable:!0,get:function(){return kn.default}}),e.projection=jn,e.random=zn,e.clusters=Gn,Object.defineProperty(e,"bearingToAngle",{enumerable:!0,get:function(){return Bt.bearingToAzimuth}}),Object.defineProperty(e,"convertDistance",{enumerable:!0,get:function(){return Bt.convertLength}}),Object.defineProperty(e,"degrees2radians",{enumerable:!0,get:function(){return Bt.degreesToRadians}}),Object.defineProperty(e,"distanceToDegrees",{enumerable:!0,get:function(){return Bt.lengthToDegrees}}),Object.defineProperty(e,"distanceToRadians",{enumerable:!0,get:function(){return Bt.lengthToRadians}}),e.helpers=Bn,Object.defineProperty(e,"radians2degrees",{enumerable:!0,get:function(){return Bt.radiansToDegrees}}),Object.defineProperty(e,"radiansToDistance",{enumerable:!0,get:function(){return Bt.radiansToLength}}),e.invariant=qn,e.meta=Un,Object.defineProperty(e,"difference",{enumerable:!0,get:function(){return Zn.default}}),Object.defineProperty(e,"buffer",{enumerable:!0,get:function(){return Xn.default}}),Object.defineProperty(e,"union",{enumerable:!0,get:function(){return Yn.default}}),Object.defineProperty(e,"intersect",{enumerable:!0,get:function(){return Vn.default}}),Object.defineProperty(e,"dissolve",{enumerable:!0,get:function(){return Wn.default}}),Object.defineProperty(e,"hexGrid",{enumerable:!0,get:function(){return Hn.default}}),Object.defineProperty(e,"mask",{enumerable:!0,get:function(){return $n.default}}),Object.defineProperty(e,"squareGrid",{enumerable:!0,get:function(){return Kn.default}}),Object.defineProperty(e,"triangleGrid",{enumerable:!0,get:function(){return Jn.default}}),Object.defineProperty(e,"interpolate",{enumerable:!0,get:function(){return Qn.default}})},1603:function(t,e,n){"use strict"
var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}}
Object.defineProperty(e,"__esModule",{value:!0})
var r=i(n(6638)),o=n(2317),s=n(6303)
e.default=function(t,e,n){void 0===n&&(n={})
var i=o.getGeom(t),a=o.getGeom(e),l=r.default.union(i.coordinates,a.coordinates)
return 0===l.length?null:1===l.length?s.polygon(l[0],n.properties):s.multiPolygon(l,n.properties)}},9979:(t,e,n)=>{"use strict"
var i=n(9611),r=n(6303),o=n(803),s=n(587),a=n(2015)
function l(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var u=l(o),h=l(s),c=l(a)
function f(t,e){if(!t||!e)return!1
if(t.length!==e.length)return!1
for(var n=0,i=t.length;n<i;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!f(t[n],e[n]))return!1}else if(t[n]!==e[n])return!1
return!0}var p=function(t,e,n,i,r){this.coord=t,this.param=e,this.ringAndEdgeIn=n,this.ringAndEdgeOut=i,this.nxtIsectAlongEdgeIn=r},d=function(t,e,n,i,r,o,s){this.coord=t,this.ringAndEdge1=e,this.ringAndEdge2=n,this.nxtIsectAlongRingAndEdge1=i,this.nxtIsectAlongRingAndEdge2=r,this.ringAndEdge1Walkable=o,this.ringAndEdge2Walkable=s}
function g(t,e){if(void 0===e&&(e=!0),3!=t.length)throw new Error("This function requires an array of three points [x,y]")
return(t[1][0]-t[0][0])*(t[2][1]-t[0][1])-(t[1][1]-t[0][1])*(t[2][0]-t[0][0])>=0==e}function _(t){for(var e=0,n=0;n<t.length-1;n++)t[n][0]<t[e][0]&&(e=n)
if(g([t[y(e-1,t.length-1)],t[e],t[y(e+1,t.length-1)]],!0))var i=1
else i=-1
return i}function m(t,e){if(!t||!e)return!1
if(t.length!=e.length)return!1
for(var n=0,i=t.length;n<i;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!m(t[n],e[n]))return!1}else if(t[n]!=e[n])return!1
return!0}function y(t,e){return(t%e+e)%e}function v(t){var e=[]
return i.flattenEach(t,(function(t){"Polygon"===t.geometry.type&&i.featureEach(function(t){if("Feature"!=t.type)throw new Error("The input must a geojson object of type Feature")
if(void 0===t.geometry||null==t.geometry)throw new Error("The input must a geojson object with a non-empty geometry")
if("Polygon"!=t.geometry.type)throw new Error("The input must be a geojson Polygon")
for(var e=t.geometry.coordinates.length,n=[],i=0;i<e;i++){var o=t.geometry.coordinates[i]
m(o[0],o[o.length-1])||o.push(o[0]),n.push.apply(n,o.slice(0,o.length-1))}if(!function(t){for(var e={},n=1,i=0,r=t.length;i<r;++i){if(Object.prototype.hasOwnProperty.call(e,t[i])){n=0
break}e[t[i]]=1}return n}(n))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)")
var s=n.length,a=function(t,e,n){if("Polygon"!==t.geometry.type)throw new Error("The input feature must be a Polygon")
void 0===n&&(n=1)
var i=t.geometry.coordinates,r=[],o={}
if(n){for(var s=[],a=0;a<i.length;a++)for(var l=0;l<i[a].length-1;l++)s.push(m(a,l))
var h=u.default()
h.load(s)}for(var c=0;c<i.length;c++)for(var p=0;p<i[c].length-1;p++)if(n)h.search(m(c,p)).forEach((function(t){var e=t.ring,n=t.edge
_(c,p,e,n)}))
else for(var d=0;d<i.length;d++)for(var g=0;g<i[d].length-1;g++)_(c,p,d,g)
return e||(r={type:"Feature",geometry:{type:"MultiPoint",coordinates:r}}),r
function _(t,n,s,a){var l,u,h=i[t][n],c=i[t][n+1],p=i[s][a],d=i[s][a+1],g=function(t,e,n,i){if(f(t,n)||f(t,i)||f(e,n)||f(i,n))return null
var r=t[0],o=t[1],s=e[0],a=e[1],l=n[0],u=n[1],h=i[0],c=i[1],p=(r-s)*(u-c)-(o-a)*(l-h)
return 0===p?null:[((r*a-o*s)*(l-h)-(r-s)*(l*c-u*h))/p,((r*a-o*s)*(u-c)-(o-a)*(l*c-u*h))/p]}(h,c,p,d)
if(null!==g&&(l=c[0]!==h[0]?(g[0]-h[0])/(c[0]-h[0]):(g[1]-h[1])/(c[1]-h[1]),u=d[0]!==p[0]?(g[0]-p[0])/(d[0]-p[0]):(g[1]-p[1])/(d[1]-p[1]),!(l>=1||l<=0||u>=1||u<=0))){var _=g,m=!o[_]
m&&(o[_]=!0),e?r.push(e(g,t,n,h,c,l,s,a,p,d,u,m)):r.push(g)}}function m(t,e){var n,r,o,s,a=i[t][e],l=i[t][e+1]
return a[0]<l[0]?(n=a[0],r=l[0]):(n=l[0],r=a[0]),a[1]<l[1]?(o=a[1],s=l[1]):(o=l[1],s=a[1]),{minX:n,minY:o,maxX:r,maxY:s,ring:t,edge:e}}}(t,(function(t,e,n,i,r,o,s,a,l,u,h,c){return[t,e,n,i,r,o,s,a,l,u,h,c]})),l=a.length
if(0==l){var v=[]
for(i=0;i<e;i++)v.push(r.polygon([t.geometry.coordinates[i]],{parent:-1,winding:_(t.geometry.coordinates[i])}))
var x=r.featureCollection(v)
return V(),W(),x}var b=[],E=[]
for(i=0;i<e;i++){b.push([])
for(var w=0;w<t.geometry.coordinates[i].length-1;w++)b[i].push([new p(t.geometry.coordinates[i][y(w+1,t.geometry.coordinates[i].length-1)],1,[i,w],[i,y(w+1,t.geometry.coordinates[i].length-1)],void 0)]),E.push(new d(t.geometry.coordinates[i][w],[i,y(w-1,t.geometry.coordinates[i].length-1)],[i,w],void 0,void 0,!1,!0))}for(i=0;i<l;i++)b[a[i][1]][a[i][2]].push(new p(a[i][0],a[i][5],[a[i][1],a[i][2]],[a[i][6],a[i][7]],void 0)),a[i][11]&&E.push(new d(a[i][0],[a[i][1],a[i][2]],[a[i][6],a[i][7]],void 0,void 0,!0,!0))
var S=E.length
for(i=0;i<b.length;i++)for(w=0;w<b[i].length;w++)b[i][w].sort((function(t,e){return t.param<e.param?-1:1}))
var C=[]
for(i=0;i<S;i++)C.push({minX:E[i].coord[0],minY:E[i].coord[1],maxX:E[i].coord[0],maxY:E[i].coord[1],index:i})
var T=u.default()
for(T.load(C),i=0;i<b.length;i++)for(w=0;w<b[i].length;w++)for(var I=0;I<b[i][w].length;I++){A=I==b[i][w].length-1?b[i][y(w+1,t.geometry.coordinates[i].length-1)][0].coord:b[i][w][I+1].coord
var P=T.search({minX:A[0],minY:A[1],maxX:A[0],maxY:A[1]})[0]
b[i][w][I].nxtIsectAlongEdgeIn=P.index}for(i=0;i<b.length;i++)for(w=0;w<b[i].length;w++)for(I=0;I<b[i][w].length;I++){var A=b[i][w][I].coord,R=(P=T.search({minX:A[0],minY:A[1],maxX:A[0],maxY:A[1]})[0]).index
R<s?E[R].nxtIsectAlongRingAndEdge2=b[i][w][I].nxtIsectAlongEdgeIn:m(E[R].ringAndEdge1,b[i][w][I].ringAndEdgeIn)?E[R].nxtIsectAlongRingAndEdge1=b[i][w][I].nxtIsectAlongEdgeIn:E[R].nxtIsectAlongRingAndEdge2=b[i][w][I].nxtIsectAlongEdgeIn}var L=[]
for(i=0,w=0;w<e;w++){var M=i
for(I=0;I<t.geometry.coordinates[w].length-1;I++)E[i].coord[0]<E[M].coord[0]&&(M=i),i++
var O=E[M].nxtIsectAlongRingAndEdge2
for(I=0;I<E.length;I++)if(E[I].nxtIsectAlongRingAndEdge1==M||E[I].nxtIsectAlongRingAndEdge2==M){var N=I
break}var D=g([E[N].coord,E[M].coord,E[O].coord],!0)?1:-1
L.push({isect:M,parent:-1,winding:D})}for(L.sort((function(t,e){return E[t.isect].coord>E[e.isect].coord?-1:1})),v=[];L.length>0;){var F=L.pop(),k=F.isect,j=F.parent,z=F.winding,G=v.length,B=[E[k].coord],q=k
if(E[k].ringAndEdge1Walkable)var U=E[k].ringAndEdge1,Z=E[k].nxtIsectAlongRingAndEdge1
else U=E[k].ringAndEdge2,Z=E[k].nxtIsectAlongRingAndEdge2
for(;!m(E[k].coord,E[Z].coord);){B.push(E[Z].coord)
var X=void 0
for(i=0;i<L.length;i++)if(L[i].isect==Z){X=i
break}if(null!=X&&L.splice(X,1),m(U,E[Z].ringAndEdge1)){if(U=E[Z].ringAndEdge2,E[Z].ringAndEdge2Walkable=!1,E[Z].ringAndEdge1Walkable){var Y={isect:Z}
g([E[q].coord,E[Z].coord,E[E[Z].nxtIsectAlongRingAndEdge2].coord],1==z)?(Y.parent=j,Y.winding=-z):(Y.parent=G,Y.winding=z),L.push(Y)}q=Z,Z=E[Z].nxtIsectAlongRingAndEdge2}else U=E[Z].ringAndEdge1,E[Z].ringAndEdge1Walkable=!1,E[Z].ringAndEdge2Walkable&&(Y={isect:Z},g([E[q].coord,E[Z].coord,E[E[Z].nxtIsectAlongRingAndEdge1].coord],1==z)?(Y.parent=j,Y.winding=-z):(Y.parent=G,Y.winding=z),L.push(Y)),q=Z,Z=E[Z].nxtIsectAlongRingAndEdge1}B.push(E[Z].coord),v.push(r.polygon([B],{index:G,parent:j,winding:z,netWinding:void 0}))}function V(){for(var t=[],e=0;e<x.features.length;e++)-1==x.features[e].properties.parent&&t.push(e)
if(t.length>1)for(e=0;e<t.length;e++){for(var n=-1,i=1/0,r=0;r<x.features.length;r++)t[e]!=r&&c.default(x.features[t[e]].geometry.coordinates[0][0],x.features[r],{ignoreBoundary:!0})&&h.default(x.features[r])<i&&(n=r)
x.features[t[e]].properties.parent=n}}function W(){for(var t=0;t<x.features.length;t++)if(-1==x.features[t].properties.parent){var e=x.features[t].properties.winding
x.features[t].properties.netWinding=e,H(t,e)}}function H(t,e){for(var n=0;n<x.features.length;n++)if(x.features[n].properties.parent==t){var i=e+x.features[n].properties.winding
x.features[n].properties.netWinding=i,H(n,i)}}return x=r.featureCollection(v),V(),W(),x}(t),(function(n){e.push(r.polygon(n.geometry.coordinates,t.properties))}))})),r.featureCollection(e)}t.exports=v,t.exports.default=v},6246:(t,e,n)=>{"use strict"
var i=n(6303),r=n(2317),o=n(8496)
function s(t){return(t=t.slice()).push(t[0]),i.polygon([t])}function a(t,e){if(e=e||{},!i.isObject(e))throw new Error("options is invalid")
var n=e.bbox||[-180,-85,180,85]
if(!t)throw new Error("points is required")
if(!Array.isArray(n))throw new Error("bbox is invalid")
return r.collectionOf(t,"Point","points"),i.featureCollection(o.voronoi().x((function(t){return t.geometry.coordinates[0]})).y((function(t){return t.geometry.coordinates[1]})).extent([[n[0],n[1]],[n[2],n[3]]]).polygons(t.features).map(s))}t.exports=a,t.exports.default=a},8185:(t,e,n)=>{"use strict"
var i=n(8824),r=n(4649),o=r(i("String.prototype.indexOf"))
t.exports=function(t,e){var n=i(t,!!e)
return"function"==typeof n&&o(t,".prototype.")>-1?r(n):n}},4649:(t,e,n)=>{"use strict"
var i=n(9913),r=n(8824),o=n(3674),s=n(6933),a=r("%Function.prototype.apply%"),l=r("%Function.prototype.call%"),u=r("%Reflect.apply%",!0)||i.call(l,a),h=n(9836),c=r("%Math.max%")
t.exports=function(t){if("function"!=typeof t)throw new s("a function is required")
var e=u(i,l,arguments)
return o(e,1+c(0,t.length-(arguments.length-1)),!0)}
var f=function(){return u(i,a,arguments)}
h?h(t.exports,"apply",{value:f}):t.exports.apply=f},7505:(t,e,n)=>{"use strict"
var i=n(7179),r=n(3804),o=n(7267),s=n(3815).orient2d
function a(t,e,n){e=Math.max(0,void 0===e?2:e),n=n||0
var r=function(t){for(var e=t[0],n=t[0],i=t[0],r=t[0],s=0;s<t.length;s++){var a=t[s]
a[0]<e[0]&&(e=a),a[0]>i[0]&&(i=a),a[1]<n[1]&&(n=a),a[1]>r[1]&&(r=a)}var l=[e,n,i,r],u=l.slice()
for(s=0;s<t.length;s++)o(t[s],l)||u.push(t[s])
return function(t){t.sort(v)
for(var e=[],n=0;n<t.length;n++){for(;e.length>=2&&p(e[e.length-2],e[e.length-1],t[n])<=0;)e.pop()
e.push(t[n])}for(var i=[],r=t.length-1;r>=0;r--){for(;i.length>=2&&p(i[i.length-2],i[i.length-1],t[r])<=0;)i.pop()
i.push(t[r])}return i.pop(),e.pop(),e.concat(i)}(u)}(t),s=new i(16)
s.toBBox=function(t){return{minX:t[0],minY:t[1],maxX:t[0],maxY:t[1]}},s.compareMinX=function(t,e){return t[0]-e[0]},s.compareMinY=function(t,e){return t[1]-e[1]},s.load(t)
for(var a,u=[],h=0;h<r.length;h++){var c=r[h]
s.remove(c),a=g(c,a),u.push(a)}var f=new i(16)
for(h=0;h<u.length;h++)f.insert(d(u[h]))
for(var m=e*e,y=n*n;u.length;){var x=u.shift(),b=x.p,E=x.next.p,w=_(b,E)
if(!(w<y)){var S=w/m;(c=l(s,x.prev.p,b,E,x.next.next.p,S,f))&&Math.min(_(c,b),_(c,E))<=S&&(u.push(x),u.push(g(c,x)),s.remove(c),f.remove(x),f.insert(d(x)),f.insert(d(x.next)))}}x=a
var C=[]
do{C.push(x.p),x=x.next}while(x!==a)
return C.push(x.p),C}function l(t,e,n,i,o,s,a){for(var l=new r([],u),c=t.data;c;){for(var p=0;p<c.children.length;p++){var d=c.children[p],g=c.leaf?m(d,n,i):h(n,i,d)
g>s||l.push({node:d,dist:g})}for(;l.length&&!l.peek().node.children;){var _=l.pop(),y=_.node,v=m(y,e,n),x=m(y,i,o)
if(_.dist<v&&_.dist<x&&f(n,y,a)&&f(i,y,a))return y}(c=l.pop())&&(c=c.node)}return null}function u(t,e){return t.dist-e.dist}function h(t,e,n){if(c(t,n)||c(e,n))return 0
var i=y(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY)
if(0===i)return 0
var r=y(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY)
if(0===r)return 0
var o=y(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY)
if(0===o)return 0
var s=y(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY)
return 0===s?0:Math.min(i,r,o,s)}function c(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function f(t,e,n){for(var i,r,o,s,a=Math.min(t[0],e[0]),l=Math.min(t[1],e[1]),u=Math.max(t[0],e[0]),h=Math.max(t[1],e[1]),c=n.search({minX:a,minY:l,maxX:u,maxY:h}),f=0;f<c.length;f++)if(i=c[f].p,r=c[f].next.p,o=t,i!==(s=e)&&r!==o&&p(i,r,o)>0!=p(i,r,s)>0&&p(o,s,i)>0!=p(o,s,r)>0)return!1
return!0}function p(t,e,n){return s(t[0],t[1],e[0],e[1],n[0],n[1])}function d(t){var e=t.p,n=t.next.p
return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function g(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0}
return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function _(t,e){var n=t[0]-e[0],i=t[1]-e[1]
return n*n+i*i}function m(t,e,n){var i=e[0],r=e[1],o=n[0]-i,s=n[1]-r
if(0!==o||0!==s){var a=((t[0]-i)*o+(t[1]-r)*s)/(o*o+s*s)
a>1?(i=n[0],r=n[1]):a>0&&(i+=o*a,r+=s*a)}return(o=t[0]-i)*o+(s=t[1]-r)*s}function y(t,e,n,i,r,o,s,a){var l,u,h,c,f=n-t,p=i-e,d=s-r,g=a-o,_=t-r,m=e-o,y=f*f+p*p,v=f*d+p*g,x=d*d+g*g,b=f*_+p*m,E=d*_+g*m,w=y*x-v*v,S=w,C=w
0===w?(u=0,S=1,c=E,C=x):(c=y*E-v*b,(u=v*E-x*b)<0?(u=0,c=E,C=x):u>S&&(u=S,c=E+v,C=x)),c<0?(c=0,-b<0?u=0:-b>y?u=S:(u=-b,S=y)):c>C&&(c=C,-b+v<0?u=0:-b+v>y?u=S:(u=-b+v,S=y))
var T=(1-(h=0===c?0:c/C))*r+h*s-((1-(l=0===u?0:u/S))*t+l*n),I=(1-h)*o+h*a-((1-l)*e+l*i)
return T*T+I*I}function v(t,e){return t[0]===e[0]?t[1]-e[1]:t[0]-e[0]}r.default&&(r=r.default),t.exports=a,t.exports.default=a},4887:(t,e,n)=>{"use strict"
function i(){return new r}function r(){this.reset()}n.r(e),n.d(e,{geoAlbers:()=>Ei,geoAlbersUsa:()=>wi,geoArea:()=>H,geoAzimuthalEqualArea:()=>Ii,geoAzimuthalEqualAreaRaw:()=>Ti,geoAzimuthalEquidistant:()=>Ai,geoAzimuthalEquidistantRaw:()=>Pi,geoBounds:()=>Bt,geoCentroid:()=>ee,geoCircle:()=>fe,geoClipExtent:()=>Ce,geoConicConformal:()=>Di,geoConicConformalRaw:()=>Ni,geoConicEqualArea:()=>bi,geoConicEqualAreaRaw:()=>xi,geoConicEquidistant:()=>zi,geoConicEquidistantRaw:()=>ji,geoContains:()=>We,geoDistance:()=>ze,geoEquirectangular:()=>ki,geoEquirectangularRaw:()=>Fi,geoGnomonic:()=>Bi,geoGnomonicRaw:()=>Gi,geoGraticule:()=>Ke,geoGraticule10:()=>Je,geoIdentity:()=>Ui,geoInterpolate:()=>Qe,geoLength:()=>Fe,geoMercator:()=>Li,geoMercatorRaw:()=>Ri,geoNaturalEarth1:()=>Xi,geoNaturalEarth1Raw:()=>Zi,geoOrthographic:()=>Vi,geoOrthographicRaw:()=>Yi,geoPath:()=>ii,geoProjection:()=>mi,geoProjectionMutator:()=>yi,geoRotation:()=>ue,geoStereographic:()=>Hi,geoStereographicRaw:()=>Wi,geoStream:()=>F,geoTransform:()=>li,geoTransverseMercator:()=>Ki,geoTransverseMercatorRaw:()=>$i}),r.prototype={constructor:r,reset:function(){this.s=this.t=0},add:function(t){s(o,t,this.t),s(this,o.s,this.s),this.s?this.t+=o.t:this.s=o.t},valueOf:function(){return this.s}}
var o=new r
function s(t,e,n){var i=t.s=e+n,r=i-e,o=i-r
t.t=e-o+(n-r)}var a=1e-6,l=1e-12,u=Math.PI,h=u/2,c=u/4,f=2*u,p=180/u,d=u/180,g=Math.abs,_=Math.atan,m=Math.atan2,y=Math.cos,v=Math.ceil,x=Math.exp,b=(Math.floor,Math.log),E=Math.pow,w=Math.sin,S=Math.sign||function(t){return t>0?1:t<0?-1:0},C=Math.sqrt,T=Math.tan
function I(t){return t>1?0:t<-1?u:Math.acos(t)}function P(t){return t>1?h:t<-1?-h:Math.asin(t)}function A(t){return(t=w(t/2))*t}function R(){}function L(t,e){t&&O.hasOwnProperty(t.type)&&O[t.type](t,e)}var M={Feature:function(t,e){L(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)L(n[i].geometry,e)}},O={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){N(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)N(n[i],e,0)},Polygon:function(t,e){D(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)D(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)L(n[i],e)}}
function N(t,e,n){var i,r=-1,o=t.length-n
for(e.lineStart();++r<o;)i=t[r],e.point(i[0],i[1],i[2])
e.lineEnd()}function D(t,e){var n=-1,i=t.length
for(e.polygonStart();++n<i;)N(t[n],e,1)
e.polygonEnd()}function F(t,e){t&&M.hasOwnProperty(t.type)?M[t.type](t,e):L(t,e)}var k,j,z,G,B,q=i(),U=i(),Z={point:R,lineStart:R,lineEnd:R,polygonStart:function(){q.reset(),Z.lineStart=X,Z.lineEnd=Y},polygonEnd:function(){var t=+q
U.add(t<0?f+t:t),this.lineStart=this.lineEnd=this.point=R},sphere:function(){U.add(f)}}
function X(){Z.point=V}function Y(){W(k,j)}function V(t,e){Z.point=W,k=t,j=e,z=t*=d,G=y(e=(e*=d)/2+c),B=w(e)}function W(t,e){var n=(t*=d)-z,i=n>=0?1:-1,r=i*n,o=y(e=(e*=d)/2+c),s=w(e),a=B*s,l=G*o+a*y(r),u=a*i*w(r)
q.add(m(u,l)),z=t,G=o,B=s}function H(t){return U.reset(),F(t,Z),2*U}function $(t){return[m(t[1],t[0]),P(t[2])]}function K(t){var e=t[0],n=t[1],i=y(n)
return[i*y(e),i*w(e),w(n)]}function J(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Q(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function tt(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function et(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function nt(t){var e=C(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])
t[0]/=e,t[1]/=e,t[2]/=e}var it,rt,ot,st,at,lt,ut,ht,ct,ft,pt,dt,gt,_t,mt,yt,vt,xt,bt,Et,wt,St,Ct,Tt,It,Pt,At=i(),Rt={point:Lt,lineStart:Ot,lineEnd:Nt,polygonStart:function(){Rt.point=Dt,Rt.lineStart=Ft,Rt.lineEnd=kt,At.reset(),Z.polygonStart()},polygonEnd:function(){Z.polygonEnd(),Rt.point=Lt,Rt.lineStart=Ot,Rt.lineEnd=Nt,q<0?(it=-(ot=180),rt=-(st=90)):At>a?st=90:At<-a&&(rt=-90),ft[0]=it,ft[1]=ot}}
function Lt(t,e){ct.push(ft=[it=t,ot=t]),e<rt&&(rt=e),e>st&&(st=e)}function Mt(t,e){var n=K([t*d,e*d])
if(ht){var i=Q(ht,n),r=Q([i[1],-i[0],0],i)
nt(r),r=$(r)
var o,s=t-at,a=s>0?1:-1,l=r[0]*p*a,u=g(s)>180
u^(a*at<l&&l<a*t)?(o=r[1]*p)>st&&(st=o):u^(a*at<(l=(l+360)%360-180)&&l<a*t)?(o=-r[1]*p)<rt&&(rt=o):(e<rt&&(rt=e),e>st&&(st=e)),u?t<at?jt(it,t)>jt(it,ot)&&(ot=t):jt(t,ot)>jt(it,ot)&&(it=t):ot>=it?(t<it&&(it=t),t>ot&&(ot=t)):t>at?jt(it,t)>jt(it,ot)&&(ot=t):jt(t,ot)>jt(it,ot)&&(it=t)}else ct.push(ft=[it=t,ot=t])
e<rt&&(rt=e),e>st&&(st=e),ht=n,at=t}function Ot(){Rt.point=Mt}function Nt(){ft[0]=it,ft[1]=ot,Rt.point=Lt,ht=null}function Dt(t,e){if(ht){var n=t-at
At.add(g(n)>180?n+(n>0?360:-360):n)}else lt=t,ut=e
Z.point(t,e),Mt(t,e)}function Ft(){Z.lineStart()}function kt(){Dt(lt,ut),Z.lineEnd(),g(At)>a&&(it=-(ot=180)),ft[0]=it,ft[1]=ot,ht=null}function jt(t,e){return(e-=t)<0?e+360:e}function zt(t,e){return t[0]-e[0]}function Gt(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}function Bt(t){var e,n,i,r,o,s,a
if(st=ot=-(it=rt=1/0),ct=[],F(t,Rt),n=ct.length){for(ct.sort(zt),e=1,o=[i=ct[0]];e<n;++e)Gt(i,(r=ct[e])[0])||Gt(i,r[1])?(jt(i[0],r[1])>jt(i[0],i[1])&&(i[1]=r[1]),jt(r[0],i[1])>jt(i[0],i[1])&&(i[0]=r[0])):o.push(i=r)
for(s=-1/0,e=0,i=o[n=o.length-1];e<=n;i=r,++e)r=o[e],(a=jt(i[1],r[0]))>s&&(s=a,it=r[0],ot=i[1])}return ct=ft=null,it===1/0||rt===1/0?[[NaN,NaN],[NaN,NaN]]:[[it,rt],[ot,st]]}var qt,Ut,Zt={sphere:R,point:Xt,lineStart:Vt,lineEnd:$t,polygonStart:function(){Zt.lineStart=Kt,Zt.lineEnd=Jt},polygonEnd:function(){Zt.lineStart=Vt,Zt.lineEnd=$t}}
function Xt(t,e){t*=d
var n=y(e*=d)
Yt(n*y(t),n*w(t),w(e))}function Yt(t,e,n){++pt,gt+=(t-gt)/pt,_t+=(e-_t)/pt,mt+=(n-mt)/pt}function Vt(){Zt.point=Wt}function Wt(t,e){t*=d
var n=y(e*=d)
Tt=n*y(t),It=n*w(t),Pt=w(e),Zt.point=Ht,Yt(Tt,It,Pt)}function Ht(t,e){t*=d
var n=y(e*=d),i=n*y(t),r=n*w(t),o=w(e),s=m(C((s=It*o-Pt*r)*s+(s=Pt*i-Tt*o)*s+(s=Tt*r-It*i)*s),Tt*i+It*r+Pt*o)
dt+=s,yt+=s*(Tt+(Tt=i)),vt+=s*(It+(It=r)),xt+=s*(Pt+(Pt=o)),Yt(Tt,It,Pt)}function $t(){Zt.point=Xt}function Kt(){Zt.point=Qt}function Jt(){te(St,Ct),Zt.point=Xt}function Qt(t,e){St=t,Ct=e,t*=d,e*=d,Zt.point=te
var n=y(e)
Tt=n*y(t),It=n*w(t),Pt=w(e),Yt(Tt,It,Pt)}function te(t,e){t*=d
var n=y(e*=d),i=n*y(t),r=n*w(t),o=w(e),s=It*o-Pt*r,a=Pt*i-Tt*o,l=Tt*r-It*i,u=C(s*s+a*a+l*l),h=P(u),c=u&&-h/u
bt+=c*s,Et+=c*a,wt+=c*l,dt+=h,yt+=h*(Tt+(Tt=i)),vt+=h*(It+(It=r)),xt+=h*(Pt+(Pt=o)),Yt(Tt,It,Pt)}function ee(t){pt=dt=gt=_t=mt=yt=vt=xt=bt=Et=wt=0,F(t,Zt)
var e=bt,n=Et,i=wt,r=e*e+n*n+i*i
return r<l&&(e=yt,n=vt,i=xt,dt<a&&(e=gt,n=_t,i=mt),(r=e*e+n*n+i*i)<l)?[NaN,NaN]:[m(n,e)*p,P(i/C(r))*p]}function ne(t){return function(){return t}}function ie(t,e){function n(n,i){return n=t(n,i),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,i){return(n=e.invert(n,i))&&t.invert(n[0],n[1])}),n}function re(t,e){return[t>u?t-f:t<-u?t+f:t,e]}function oe(t,e,n){return(t%=f)?e||n?ie(ae(t),le(e,n)):ae(t):e||n?le(e,n):re}function se(t){return function(e,n){return[(e+=t)>u?e-f:e<-u?e+f:e,n]}}function ae(t){var e=se(t)
return e.invert=se(-t),e}function le(t,e){var n=y(t),i=w(t),r=y(e),o=w(e)
function s(t,e){var s=y(e),a=y(t)*s,l=w(t)*s,u=w(e),h=u*n+a*i
return[m(l*r-h*o,a*n-u*i),P(h*r+l*o)]}return s.invert=function(t,e){var s=y(e),a=y(t)*s,l=w(t)*s,u=w(e),h=u*r-l*o
return[m(l*r+u*o,a*n+h*i),P(h*n-a*i)]},s}function ue(t){function e(e){return(e=t(e[0]*d,e[1]*d))[0]*=p,e[1]*=p,e}return t=oe(t[0]*d,t[1]*d,t.length>2?t[2]*d:0),e.invert=function(e){return(e=t.invert(e[0]*d,e[1]*d))[0]*=p,e[1]*=p,e},e}function he(t,e,n,i,r,o){if(n){var s=y(e),a=w(e),l=i*n
null==r?(r=e+i*f,o=e-l/2):(r=ce(s,r),o=ce(s,o),(i>0?r<o:r>o)&&(r+=i*f))
for(var u,h=r;i>0?h>o:h<o;h-=l)u=$([s,-a*y(h),-a*w(h)]),t.point(u[0],u[1])}}function ce(t,e){(e=K(e))[0]-=t,nt(e)
var n=I(-e[1])
return((-e[2]<0?-n:n)+f-a)%f}function fe(){var t,e,n=ne([0,0]),i=ne(90),r=ne(6),o={point:function(n,i){t.push(n=e(n,i)),n[0]*=p,n[1]*=p}}
function s(){var s=n.apply(this,arguments),a=i.apply(this,arguments)*d,l=r.apply(this,arguments)*d
return t=[],e=oe(-s[0]*d,-s[1]*d,0).invert,he(o,a,l,1),s={type:"Polygon",coordinates:[t]},t=e=null,s}return s.center=function(t){return arguments.length?(n="function"==typeof t?t:ne([+t[0],+t[1]]),s):n},s.radius=function(t){return arguments.length?(i="function"==typeof t?t:ne(+t),s):i},s.precision=function(t){return arguments.length?(r="function"==typeof t?t:ne(+t),s):r},s}function pe(){var t,e=[]
return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:R,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e
return e=[],t=null,n}}}function de(t,e){return g(t[0]-e[0])<a&&g(t[1]-e[1])<a}function ge(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function _e(t,e,n,i,r){var o,s,a=[],l=[]
if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,i=t[0],s=t[e]
if(de(i,s)){for(r.lineStart(),o=0;o<e;++o)r.point((i=t[o])[0],i[1])
r.lineEnd()}else a.push(n=new ge(i,t,null,!0)),l.push(n.o=new ge(i,null,n,!1)),a.push(n=new ge(s,t,null,!1)),l.push(n.o=new ge(s,null,n,!0))}})),a.length){for(l.sort(e),me(a),me(l),o=0,s=l.length;o<s;++o)l[o].e=n=!n
for(var u,h,c=a[0];;){for(var f=c,p=!0;f.v;)if((f=f.n)===c)return
u=f.z,r.lineStart()
do{if(f.v=f.o.v=!0,f.e){if(p)for(o=0,s=u.length;o<s;++o)r.point((h=u[o])[0],h[1])
else i(f.x,f.n.x,1,r)
f=f.n}else{if(p)for(u=f.p.z,o=u.length-1;o>=0;--o)r.point((h=u[o])[0],h[1])
else i(f.x,f.p.x,-1,r)
f=f.p}u=(f=f.o).z,p=!p}while(!f.v)
r.lineEnd()}}}function me(t){if(e=t.length){for(var e,n,i=0,r=t[0];++i<e;)r.n=n=t[i],n.p=r,r=n
r.n=n=t[0],n.p=r}}function ye(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}re.invert=re,1===(qt=ye).length&&(Ut=qt,qt=function(t,e){return ye(Ut(t),e)})
var ve=Array.prototype
function xe(t){for(var e,n,i,r=t.length,o=-1,s=0;++o<r;)s+=t[o].length
for(n=new Array(s);--r>=0;)for(e=(i=t[r]).length;--e>=0;)n[--s]=i[e]
return n}function be(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n
for(var i=-1,r=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(r);++i<r;)o[i]=t+i*n
return o}ve.slice,ve.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2)
var Ee=1e9,we=-Ee
function Se(t,e,n,i){function r(r,o){return t<=r&&r<=n&&e<=o&&o<=i}function o(r,o,a,l){var h=0,c=0
if(null==r||(h=s(r,a))!==(c=s(o,a))||u(r,o)<0^a>0)do{l.point(0===h||3===h?t:n,h>1?i:e)}while((h=(h+a+4)%4)!==c)
else l.point(o[0],o[1])}function s(i,r){return g(i[0]-t)<a?r>0?0:3:g(i[0]-n)<a?r>0?2:1:g(i[1]-e)<a?r>0?1:0:r>0?3:2}function l(t,e){return u(t.x,e.x)}function u(t,e){var n=s(t,1),i=s(e,1)
return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){var a,u,h,c,f,p,d,g,_,m,y,v=s,x=pe(),b={point:E,lineStart:function(){b.point=w,u&&u.push(h=[]),m=!0,_=!1,d=g=NaN},lineEnd:function(){a&&(w(c,f),p&&_&&x.rejoin(),a.push(x.result())),b.point=E,_&&v.lineEnd()},polygonStart:function(){v=x,a=[],u=[],y=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,r=u.length;n<r;++n)for(var o,s,a=u[n],l=1,h=a.length,c=a[0],f=c[0],p=c[1];l<h;++l)o=f,s=p,f=(c=a[l])[0],p=c[1],s<=i?p>i&&(f-o)*(i-s)>(p-s)*(t-o)&&++e:p<=i&&(f-o)*(i-s)<(p-s)*(t-o)&&--e
return e}(),n=y&&e,r=(a=xe(a)).length;(n||r)&&(s.polygonStart(),n&&(s.lineStart(),o(null,null,1,s),s.lineEnd()),r&&_e(a,l,e,o,s),s.polygonEnd()),v=s,a=u=h=null}}
function E(t,e){r(t,e)&&v.point(t,e)}function w(o,s){var a=r(o,s)
if(u&&h.push([o,s]),m)c=o,f=s,p=a,m=!1,a&&(v.lineStart(),v.point(o,s))
else if(a&&_)v.point(o,s)
else{var l=[d=Math.max(we,Math.min(Ee,d)),g=Math.max(we,Math.min(Ee,g))],x=[o=Math.max(we,Math.min(Ee,o)),s=Math.max(we,Math.min(Ee,s))]
!function(t,e,n,i,r,o){var s,a=t[0],l=t[1],u=0,h=1,c=e[0]-a,f=e[1]-l
if(s=n-a,c||!(s>0)){if(s/=c,c<0){if(s<u)return
s<h&&(h=s)}else if(c>0){if(s>h)return
s>u&&(u=s)}if(s=r-a,c||!(s<0)){if(s/=c,c<0){if(s>h)return
s>u&&(u=s)}else if(c>0){if(s<u)return
s<h&&(h=s)}if(s=i-l,f||!(s>0)){if(s/=f,f<0){if(s<u)return
s<h&&(h=s)}else if(f>0){if(s>h)return
s>u&&(u=s)}if(s=o-l,f||!(s<0)){if(s/=f,f<0){if(s>h)return
s>u&&(u=s)}else if(f>0){if(s<u)return
s<h&&(h=s)}return u>0&&(t[0]=a+u*c,t[1]=l+u*f),h<1&&(e[0]=a+h*c,e[1]=l+h*f),!0}}}}}(l,x,t,e,n,i)?a&&(v.lineStart(),v.point(o,s),y=!1):(_||(v.lineStart(),v.point(l[0],l[1])),v.point(x[0],x[1]),a||v.lineEnd(),y=!1)}d=o,g=s,_=a}return b}}function Ce(){var t,e,n,i=0,r=0,o=960,s=500
return n={stream:function(n){return t&&e===n?t:t=Se(i,r,o,s)(e=n)},extent:function(a){return arguments.length?(i=+a[0][0],r=+a[0][1],o=+a[1][0],s=+a[1][1],t=e=null,n):[[i,r],[o,s]]}}}var Te=i()
function Ie(t,e){var n=e[0],i=e[1],r=[w(n),-y(n),0],o=0,s=0
Te.reset()
for(var l=0,h=t.length;l<h;++l)if(d=(p=t[l]).length)for(var p,d,g=p[d-1],_=g[0],v=g[1]/2+c,x=w(v),b=y(v),E=0;E<d;++E,_=C,x=I,b=A,g=S){var S=p[E],C=S[0],T=S[1]/2+c,I=w(T),A=y(T),R=C-_,L=R>=0?1:-1,M=L*R,O=M>u,N=x*I
if(Te.add(m(N*L*w(M),b*A+N*y(M))),o+=O?R+L*f:R,O^_>=n^C>=n){var D=Q(K(g),K(S))
nt(D)
var F=Q(r,D)
nt(F)
var k=(O^R>=0?-1:1)*P(F[2]);(i>k||i===k&&(D[0]||D[1]))&&(s+=O^R>=0?1:-1)}}return(o<-a||o<a&&Te<-a)^1&s}var Pe,Ae,Re,Le=i(),Me={sphere:R,point:R,lineStart:function(){Me.point=Ne,Me.lineEnd=Oe},lineEnd:R,polygonStart:R,polygonEnd:R}
function Oe(){Me.point=Me.lineEnd=R}function Ne(t,e){Pe=t*=d,Ae=w(e*=d),Re=y(e),Me.point=De}function De(t,e){t*=d
var n=w(e*=d),i=y(e),r=g(t-Pe),o=y(r),s=i*w(r),a=Re*n-Ae*i*o,l=Ae*n+Re*i*o
Le.add(m(C(s*s+a*a),l)),Pe=t,Ae=n,Re=i}function Fe(t){return Le.reset(),F(t,Me),+Le}var ke=[null,null],je={type:"LineString",coordinates:ke}
function ze(t,e){return ke[0]=t,ke[1]=e,Fe(je)}var Ge={Feature:function(t,e){return qe(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)if(qe(n[i].geometry,e))return!0
return!1}},Be={Sphere:function(){return!0},Point:function(t,e){return Ue(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)if(Ue(n[i],e))return!0
return!1},LineString:function(t,e){return Ze(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)if(Ze(n[i],e))return!0
return!1},Polygon:function(t,e){return Xe(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)if(Xe(n[i],e))return!0
return!1},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)if(qe(n[i],e))return!0
return!1}}
function qe(t,e){return!(!t||!Be.hasOwnProperty(t.type))&&Be[t.type](t,e)}function Ue(t,e){return 0===ze(t,e)}function Ze(t,e){var n=ze(t[0],t[1])
return ze(t[0],e)+ze(e,t[1])<=n+a}function Xe(t,e){return!!Ie(t.map(Ye),Ve(e))}function Ye(t){return(t=t.map(Ve)).pop(),t}function Ve(t){return[t[0]*d,t[1]*d]}function We(t,e){return(t&&Ge.hasOwnProperty(t.type)?Ge[t.type]:qe)(t,e)}function He(t,e,n){var i=be(t,e-a,n).concat(e)
return function(t){return i.map((function(e){return[t,e]}))}}function $e(t,e,n){var i=be(t,e-a,n).concat(e)
return function(t){return i.map((function(e){return[e,t]}))}}function Ke(){var t,e,n,i,r,o,s,l,u,h,c,f,p=10,d=p,_=90,m=360,y=2.5
function x(){return{type:"MultiLineString",coordinates:b()}}function b(){return be(v(i/_)*_,n,_).map(c).concat(be(v(l/m)*m,s,m).map(f)).concat(be(v(e/p)*p,t,p).filter((function(t){return g(t%_)>a})).map(u)).concat(be(v(o/d)*d,r,d).filter((function(t){return g(t%m)>a})).map(h))}return x.lines=function(){return b().map((function(t){return{type:"LineString",coordinates:t}}))},x.outline=function(){return{type:"Polygon",coordinates:[c(i).concat(f(s).slice(1),c(n).reverse().slice(1),f(l).reverse().slice(1))]}},x.extent=function(t){return arguments.length?x.extentMajor(t).extentMinor(t):x.extentMinor()},x.extentMajor=function(t){return arguments.length?(i=+t[0][0],n=+t[1][0],l=+t[0][1],s=+t[1][1],i>n&&(t=i,i=n,n=t),l>s&&(t=l,l=s,s=t),x.precision(y)):[[i,l],[n,s]]},x.extentMinor=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],o=+n[0][1],r=+n[1][1],e>t&&(n=e,e=t,t=n),o>r&&(n=o,o=r,r=n),x.precision(y)):[[e,o],[t,r]]},x.step=function(t){return arguments.length?x.stepMajor(t).stepMinor(t):x.stepMinor()},x.stepMajor=function(t){return arguments.length?(_=+t[0],m=+t[1],x):[_,m]},x.stepMinor=function(t){return arguments.length?(p=+t[0],d=+t[1],x):[p,d]},x.precision=function(a){return arguments.length?(y=+a,u=He(o,r,90),h=$e(e,t,y),c=He(l,s,90),f=$e(i,n,y),x):y},x.extentMajor([[-180,-90+a],[180,90-a]]).extentMinor([[-180,-80-a],[180,80+a]])}function Je(){return Ke()()}function Qe(t,e){var n=t[0]*d,i=t[1]*d,r=e[0]*d,o=e[1]*d,s=y(i),a=w(i),l=y(o),u=w(o),h=s*y(n),c=s*w(n),f=l*y(r),g=l*w(r),_=2*P(C(A(o-i)+s*l*A(r-n))),v=w(_),x=_?function(t){var e=w(t*=_)/v,n=w(_-t)/v,i=n*h+e*f,r=n*c+e*g,o=n*a+e*u
return[m(r,i)*p,m(o,C(i*i+r*r))*p]}:function(){return[n*p,i*p]}
return x.distance=_,x}function tn(t){return t}var en,nn,rn,on,sn=i(),an=i(),ln={point:R,lineStart:R,lineEnd:R,polygonStart:function(){ln.lineStart=un,ln.lineEnd=fn},polygonEnd:function(){ln.lineStart=ln.lineEnd=ln.point=R,sn.add(g(an)),an.reset()},result:function(){var t=sn/2
return sn.reset(),t}}
function un(){ln.point=hn}function hn(t,e){ln.point=cn,en=rn=t,nn=on=e}function cn(t,e){an.add(on*t-rn*e),rn=t,on=e}function fn(){cn(en,nn)}const pn=ln
var dn=1/0,gn=dn,_n=-dn,mn=_n,yn={point:function(t,e){t<dn&&(dn=t),t>_n&&(_n=t),e<gn&&(gn=e),e>mn&&(mn=e)},lineStart:R,lineEnd:R,polygonStart:R,polygonEnd:R,result:function(){var t=[[dn,gn],[_n,mn]]
return _n=mn=-(gn=dn=1/0),t}}
const vn=yn
var xn,bn,En,wn,Sn=0,Cn=0,Tn=0,In=0,Pn=0,An=0,Rn=0,Ln=0,Mn=0,On={point:Nn,lineStart:Dn,lineEnd:jn,polygonStart:function(){On.lineStart=zn,On.lineEnd=Gn},polygonEnd:function(){On.point=Nn,On.lineStart=Dn,On.lineEnd=jn},result:function(){var t=Mn?[Rn/Mn,Ln/Mn]:An?[In/An,Pn/An]:Tn?[Sn/Tn,Cn/Tn]:[NaN,NaN]
return Sn=Cn=Tn=In=Pn=An=Rn=Ln=Mn=0,t}}
function Nn(t,e){Sn+=t,Cn+=e,++Tn}function Dn(){On.point=Fn}function Fn(t,e){On.point=kn,Nn(En=t,wn=e)}function kn(t,e){var n=t-En,i=e-wn,r=C(n*n+i*i)
In+=r*(En+t)/2,Pn+=r*(wn+e)/2,An+=r,Nn(En=t,wn=e)}function jn(){On.point=Nn}function zn(){On.point=Bn}function Gn(){qn(xn,bn)}function Bn(t,e){On.point=qn,Nn(xn=En=t,bn=wn=e)}function qn(t,e){var n=t-En,i=e-wn,r=C(n*n+i*i)
In+=r*(En+t)/2,Pn+=r*(wn+e)/2,An+=r,Rn+=(r=wn*t-En*e)*(En+t),Ln+=r*(wn+e),Mn+=3*r,Nn(En=t,wn=e)}const Un=On
function Zn(t){this._context=t}Zn.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1
break
case 1:this._context.lineTo(t,e)
break
default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,f)}},result:R}
var Xn,Yn,Vn,Wn,Hn,$n=i(),Kn={point:R,lineStart:function(){Kn.point=Jn},lineEnd:function(){Xn&&Qn(Yn,Vn),Kn.point=R},polygonStart:function(){Xn=!0},polygonEnd:function(){Xn=null},result:function(){var t=+$n
return $n.reset(),t}}
function Jn(t,e){Kn.point=Qn,Yn=Wn=t,Vn=Hn=e}function Qn(t,e){Wn-=t,Hn-=e,$n.add(C(Wn*Wn+Hn*Hn)),Wn=t,Hn=e}const ti=Kn
function ei(){this._string=[]}function ni(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function ii(t,e){var n,i,r=4.5
function o(t){return t&&("function"==typeof r&&i.pointRadius(+r.apply(this,arguments)),F(t,n(i))),i.result()}return o.area=function(t){return F(t,n(pn)),pn.result()},o.measure=function(t){return F(t,n(ti)),ti.result()},o.bounds=function(t){return F(t,n(vn)),vn.result()},o.centroid=function(t){return F(t,n(Un)),Un.result()},o.projection=function(e){return arguments.length?(n=null==e?(t=null,tn):(t=e).stream,o):t},o.context=function(t){return arguments.length?(i=null==t?(e=null,new ei):new Zn(e=t),"function"!=typeof r&&i.pointRadius(r),o):e},o.pointRadius=function(t){return arguments.length?(r="function"==typeof t?t:(i.pointRadius(+t),+t),o):r},o.projection(t).context(e)}function ri(t,e,n,i){return function(r,o){var s,a,l,u=e(o),h=r.invert(i[0],i[1]),c=pe(),f=e(c),p=!1,d={point:g,lineStart:m,lineEnd:y,polygonStart:function(){d.point=v,d.lineStart=x,d.lineEnd=b,a=[],s=[]},polygonEnd:function(){d.point=g,d.lineStart=m,d.lineEnd=y,a=xe(a)
var t=Ie(s,h)
a.length?(p||(o.polygonStart(),p=!0),_e(a,si,t,n,o)):t&&(p||(o.polygonStart(),p=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),p&&(o.polygonEnd(),p=!1),a=s=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}}
function g(e,n){var i=r(e,n)
t(e=i[0],n=i[1])&&o.point(e,n)}function _(t,e){var n=r(t,e)
u.point(n[0],n[1])}function m(){d.point=_,u.lineStart()}function y(){d.point=g,u.lineEnd()}function v(t,e){l.push([t,e])
var n=r(t,e)
f.point(n[0],n[1])}function x(){f.lineStart(),l=[]}function b(){v(l[0][0],l[0][1]),f.lineEnd()
var t,e,n,i,r=f.clean(),u=c.result(),h=u.length
if(l.pop(),s.push(l),l=null,h)if(1&r){if((e=(n=u[0]).length-1)>0){for(p||(o.polygonStart(),p=!0),o.lineStart(),t=0;t<e;++t)o.point((i=n[t])[0],i[1])
o.lineEnd()}}else h>1&&2&r&&u.push(u.pop().concat(u.shift())),a.push(u.filter(oi))}return d}}function oi(t){return t.length>1}function si(t,e){return((t=t.x)[0]<0?t[1]-h-a:h-t[1])-((e=e.x)[0]<0?e[1]-h-a:h-e[1])}ei.prototype={_radius:4.5,_circle:ni(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1
break
case 1:this._string.push("L",t,",",e)
break
default:null==this._circle&&(this._circle=ni(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("")
return this._string=[],t}return null}}
const ai=ri((function(){return!0}),(function(t){var e,n=NaN,i=NaN,r=NaN
return{lineStart:function(){t.lineStart(),e=1},point:function(o,s){var l=o>0?u:-u,c=g(o-n)
g(c-u)<a?(t.point(n,i=(i+s)/2>0?h:-h),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(l,i),t.point(o,i),e=0):r!==l&&c>=u&&(g(n-r)<a&&(n-=r*a),g(o-l)<a&&(o-=l*a),i=function(t,e,n,i){var r,o,s=w(t-n)
return g(s)>a?_((w(e)*(o=y(i))*w(n)-w(i)*(r=y(e))*w(t))/(r*o*s)):(e+i)/2}(n,i,o,s),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(l,i),e=0),t.point(n=o,i=s),r=l},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-e}}}),(function(t,e,n,i){var r
if(null==t)r=n*h,i.point(-u,r),i.point(0,r),i.point(u,r),i.point(u,0),i.point(u,-r),i.point(0,-r),i.point(-u,-r),i.point(-u,0),i.point(-u,r)
else if(g(t[0]-e[0])>a){var o=t[0]<e[0]?u:-u
r=n*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(e[0],e[1])}),[-u,-h])
function li(t){return{stream:ui(t)}}function ui(t){return function(e){var n=new hi
for(var i in t)n[i]=t[i]
return n.stream=e,n}}function hi(){}function ci(t,e,n){var i=e[1][0]-e[0][0],r=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent()
t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),F(n,t.stream(vn))
var s=vn.result(),a=Math.min(i/(s[1][0]-s[0][0]),r/(s[1][1]-s[0][1])),l=+e[0][0]+(i-a*(s[1][0]+s[0][0]))/2,u=+e[0][1]+(r-a*(s[1][1]+s[0][1]))/2
return null!=o&&t.clipExtent(o),t.scale(150*a).translate([l,u])}function fi(t,e,n){return ci(t,[[0,0],e],n)}hi.prototype={constructor:hi,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}
var pi=16,di=y(30*d)
function gi(t,e){return+e?function(t,e){function n(i,r,o,s,l,u,h,c,f,p,d,_,y,v){var x=h-i,b=c-r,E=x*x+b*b
if(E>4*e&&y--){var w=s+p,S=l+d,T=u+_,I=C(w*w+S*S+T*T),A=P(T/=I),R=g(g(T)-1)<a||g(o-f)<a?(o+f)/2:m(S,w),L=t(R,A),M=L[0],O=L[1],N=M-i,D=O-r,F=b*N-x*D;(F*F/E>e||g((x*N+b*D)/E-.5)>.3||s*p+l*d+u*_<di)&&(n(i,r,o,s,l,u,M,O,R,w/=I,S/=I,T,y,v),v.point(M,O),n(M,O,R,w,S,T,h,c,f,p,d,_,y,v))}}return function(e){var i,r,o,s,a,l,u,h,c,f,p,d,g={point:_,lineStart:m,lineEnd:v,polygonStart:function(){e.polygonStart(),g.lineStart=x},polygonEnd:function(){e.polygonEnd(),g.lineStart=m}}
function _(n,i){n=t(n,i),e.point(n[0],n[1])}function m(){h=NaN,g.point=y,e.lineStart()}function y(i,r){var o=K([i,r]),s=t(i,r)
n(h,c,u,f,p,d,h=s[0],c=s[1],u=i,f=o[0],p=o[1],d=o[2],pi,e),e.point(h,c)}function v(){g.point=_,e.lineEnd()}function x(){m(),g.point=b,g.lineEnd=E}function b(t,e){y(i=t,e),r=h,o=c,s=f,a=p,l=d,g.point=y}function E(){n(h,c,u,f,p,d,r,o,i,s,a,l,pi,e),g.lineEnd=v,v()}return g}}(t,e):function(t){return ui({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var _i=ui({point:function(t,e){this.stream.point(t*d,e*d)}})
function mi(t){return yi((function(){return t}))()}function yi(t){var e,n,i,r,o,s,l,h,c,f,_=150,m=480,v=250,x=0,b=0,E=0,w=0,S=0,T=null,I=ai,P=null,A=tn,R=.5,L=gi(N,R)
function M(t){return[(t=o(t[0]*d,t[1]*d))[0]*_+n,i-t[1]*_]}function O(t){return(t=o.invert((t[0]-n)/_,(i-t[1])/_))&&[t[0]*p,t[1]*p]}function N(t,r){return[(t=e(t,r))[0]*_+n,i-t[1]*_]}function D(){o=ie(r=oe(E,w,S),e)
var t=e(x,b)
return n=m-t[0]*_,i=v+t[1]*_,F()}function F(){return c=f=null,M}return M.stream=function(t){return c&&f===t?c:c=_i(I(r,L(A(f=t))))},M.clipAngle=function(t){return arguments.length?(I=+t?function(t,e){var n=y(t),i=n>0,r=g(n)>a
function o(t,e){return y(t)*y(e)>n}function s(t,e,i){var r=[1,0,0],o=Q(K(t),K(e)),s=J(o,o),l=o[0],h=s-l*l
if(!h)return!i&&t
var c=n*s/h,f=-n*l/h,p=Q(r,o),d=et(r,c)
tt(d,et(o,f))
var _=p,m=J(d,_),y=J(_,_),v=m*m-y*(J(d,d)-1)
if(!(v<0)){var x=C(v),b=et(_,(-m-x)/y)
if(tt(b,d),b=$(b),!i)return b
var E,w=t[0],S=e[0],T=t[1],I=e[1]
S<w&&(E=w,w=S,S=E)
var P=S-w,A=g(P-u)<a
if(!A&&I<T&&(E=T,T=I,I=E),A||P<a?A?T+I>0^b[1]<(g(b[0]-w)<a?T:I):T<=b[1]&&b[1]<=I:P>u^(w<=b[0]&&b[0]<=S)){var R=et(_,(-m+x)/y)
return tt(R,d),[b,$(R)]}}}function l(e,n){var r=i?t:u-t,o=0
return e<-r?o|=1:e>r&&(o|=2),n<-r?o|=4:n>r&&(o|=8),o}return ri(o,(function(t){var e,n,h,c,f
return{lineStart:function(){c=h=!1,f=1},point:function(p,d){var g,_=[p,d],m=o(p,d),y=i?m?0:l(p,d):m?l(p+(p<0?u:-u),d):0
if(!e&&(c=h=m)&&t.lineStart(),m!==h&&(!(g=s(e,_))||de(e,g)||de(_,g))&&(_[0]+=a,_[1]+=a,m=o(_[0],_[1])),m!==h)f=0,m?(t.lineStart(),g=s(_,e),t.point(g[0],g[1])):(g=s(e,_),t.point(g[0],g[1]),t.lineEnd()),e=g
else if(r&&e&&i^m){var v
y&n||!(v=s(_,e,!0))||(f=0,i?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!m||e&&de(e,_)||t.point(_[0],_[1]),e=_,h=m,n=y},lineEnd:function(){h&&t.lineEnd(),e=null},clean:function(){return f|(c&&h)<<1}}}),(function(n,i,r,o){he(o,t,e,r,n,i)}),i?[0,-t]:[-u,t-u])}(T=t*d,6*d):(T=null,ai),F()):T*p},M.clipExtent=function(t){return arguments.length?(A=null==t?(P=s=l=h=null,tn):Se(P=+t[0][0],s=+t[0][1],l=+t[1][0],h=+t[1][1]),F()):null==P?null:[[P,s],[l,h]]},M.scale=function(t){return arguments.length?(_=+t,D()):_},M.translate=function(t){return arguments.length?(m=+t[0],v=+t[1],D()):[m,v]},M.center=function(t){return arguments.length?(x=t[0]%360*d,b=t[1]%360*d,D()):[x*p,b*p]},M.rotate=function(t){return arguments.length?(E=t[0]%360*d,w=t[1]%360*d,S=t.length>2?t[2]%360*d:0,D()):[E*p,w*p,S*p]},M.precision=function(t){return arguments.length?(L=gi(N,R=t*t),F()):C(R)},M.fitExtent=function(t,e){return ci(M,t,e)},M.fitSize=function(t,e){return fi(M,t,e)},function(){return e=t.apply(this,arguments),M.invert=e.invert&&O,D()}}function vi(t){var e=0,n=u/3,i=yi(t),r=i(e,n)
return r.parallels=function(t){return arguments.length?i(e=t[0]*d,n=t[1]*d):[e*p,n*p]},r}function xi(t,e){var n=w(t),i=(n+w(e))/2
if(g(i)<a)return function(t){var e=y(t)
function n(t,n){return[t*e,w(n)/e]}return n.invert=function(t,n){return[t/e,P(n*e)]},n}(t)
var r=1+n*(2*i-n),o=C(r)/i
function s(t,e){var n=C(r-2*i*w(e))/i
return[n*w(t*=i),o-n*y(t)]}return s.invert=function(t,e){var n=o-e
return[m(t,g(n))/i*S(n),P((r-(t*t+n*n)*i*i)/(2*i))]},s}function bi(){return vi(xi).scale(155.424).center([0,33.6442])}function Ei(){return bi().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function wi(){var t,e,n,i,r,o,s=Ei(),l=bi().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=bi().rotate([157,0]).center([-3,19.9]).parallels([8,18]),h={point:function(t,e){o=[t,e]}}
function c(t){var e=t[0],s=t[1]
return o=null,n.point(e,s),o||(i.point(e,s),o)||(r.point(e,s),o)}function f(){return t=e=null,c}return c.invert=function(t){var e=s.scale(),n=s.translate(),i=(t[0]-n[0])/e,r=(t[1]-n[1])/e
return(r>=.12&&r<.234&&i>=-.425&&i<-.214?l:r>=.166&&r<.234&&i>=-.214&&i<-.115?u:s).invert(t)},c.stream=function(n){return t&&e===n?t:(i=[s.stream(e=n),l.stream(n),u.stream(n)],r=i.length,t={point:function(t,e){for(var n=-1;++n<r;)i[n].point(t,e)},sphere:function(){for(var t=-1;++t<r;)i[t].sphere()},lineStart:function(){for(var t=-1;++t<r;)i[t].lineStart()},lineEnd:function(){for(var t=-1;++t<r;)i[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<r;)i[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<r;)i[t].polygonEnd()}})
var i,r},c.precision=function(t){return arguments.length?(s.precision(t),l.precision(t),u.precision(t),f()):s.precision()},c.scale=function(t){return arguments.length?(s.scale(t),l.scale(.35*t),u.scale(t),c.translate(s.translate())):s.scale()},c.translate=function(t){if(!arguments.length)return s.translate()
var e=s.scale(),o=+t[0],c=+t[1]
return n=s.translate(t).clipExtent([[o-.455*e,c-.238*e],[o+.455*e,c+.238*e]]).stream(h),i=l.translate([o-.307*e,c+.201*e]).clipExtent([[o-.425*e+a,c+.12*e+a],[o-.214*e-a,c+.234*e-a]]).stream(h),r=u.translate([o-.205*e,c+.212*e]).clipExtent([[o-.214*e+a,c+.166*e+a],[o-.115*e-a,c+.234*e-a]]).stream(h),f()},c.fitExtent=function(t,e){return ci(c,t,e)},c.fitSize=function(t,e){return fi(c,t,e)},c.scale(1070)}function Si(t){return function(e,n){var i=y(e),r=y(n),o=t(i*r)
return[o*r*w(e),o*w(n)]}}function Ci(t){return function(e,n){var i=C(e*e+n*n),r=t(i),o=w(r),s=y(r)
return[m(e*o,i*s),P(i&&n*o/i)]}}var Ti=Si((function(t){return C(2/(1+t))}))
function Ii(){return mi(Ti).scale(124.75).clipAngle(179.999)}Ti.invert=Ci((function(t){return 2*P(t/2)}))
var Pi=Si((function(t){return(t=I(t))&&t/w(t)}))
function Ai(){return mi(Pi).scale(79.4188).clipAngle(179.999)}function Ri(t,e){return[t,b(T((h+e)/2))]}function Li(){return Mi(Ri).scale(961/f)}function Mi(t){var e,n,i,r=mi(t),o=r.center,s=r.scale,a=r.translate,l=r.clipExtent,h=null
function c(){var o=u*s(),a=r(ue(r.rotate()).invert([0,0]))
return l(null==h?[[a[0]-o,a[1]-o],[a[0]+o,a[1]+o]]:t===Ri?[[Math.max(a[0]-o,h),e],[Math.min(a[0]+o,n),i]]:[[h,Math.max(a[1]-o,e)],[n,Math.min(a[1]+o,i)]])}return r.scale=function(t){return arguments.length?(s(t),c()):s()},r.translate=function(t){return arguments.length?(a(t),c()):a()},r.center=function(t){return arguments.length?(o(t),c()):o()},r.clipExtent=function(t){return arguments.length?(null==t?h=e=n=i=null:(h=+t[0][0],e=+t[0][1],n=+t[1][0],i=+t[1][1]),c()):null==h?null:[[h,e],[n,i]]},c()}function Oi(t){return T((h+t)/2)}function Ni(t,e){var n=y(t),i=t===e?w(t):b(n/y(e))/b(Oi(e)/Oi(t)),r=n*E(Oi(t),i)/i
if(!i)return Ri
function o(t,e){r>0?e<-h+a&&(e=-h+a):e>h-a&&(e=h-a)
var n=r/E(Oi(e),i)
return[n*w(i*t),r-n*y(i*t)]}return o.invert=function(t,e){var n=r-e,o=S(i)*C(t*t+n*n)
return[m(t,g(n))/i*S(n),2*_(E(r/o,1/i))-h]},o}function Di(){return vi(Ni).scale(109.5).parallels([30,30])}function Fi(t,e){return[t,e]}function ki(){return mi(Fi).scale(152.63)}function ji(t,e){var n=y(t),i=t===e?w(t):(n-y(e))/(e-t),r=n/i+t
if(g(i)<a)return Fi
function o(t,e){var n=r-e,o=i*t
return[n*w(o),r-n*y(o)]}return o.invert=function(t,e){var n=r-e
return[m(t,g(n))/i*S(n),r-S(i)*C(t*t+n*n)]},o}function zi(){return vi(ji).scale(131.154).center([0,13.9389])}function Gi(t,e){var n=y(e),i=y(t)*n
return[n*w(t)/i,w(e)/i]}function Bi(){return mi(Gi).scale(144.049).clipAngle(60)}function qi(t,e,n,i){return 1===t&&1===e&&0===n&&0===i?tn:ui({point:function(r,o){this.stream.point(r*t+n,o*e+i)}})}function Ui(){var t,e,n,i,r,o,s=1,a=0,l=0,u=1,h=1,c=tn,f=null,p=tn
function d(){return i=r=null,o}return o={stream:function(t){return i&&r===t?i:i=c(p(r=t))},clipExtent:function(i){return arguments.length?(p=null==i?(f=t=e=n=null,tn):Se(f=+i[0][0],t=+i[0][1],e=+i[1][0],n=+i[1][1]),d()):null==f?null:[[f,t],[e,n]]},scale:function(t){return arguments.length?(c=qi((s=+t)*u,s*h,a,l),d()):s},translate:function(t){return arguments.length?(c=qi(s*u,s*h,a=+t[0],l=+t[1]),d()):[a,l]},reflectX:function(t){return arguments.length?(c=qi(s*(u=t?-1:1),s*h,a,l),d()):u<0},reflectY:function(t){return arguments.length?(c=qi(s*u,s*(h=t?-1:1),a,l),d()):h<0},fitExtent:function(t,e){return ci(o,t,e)},fitSize:function(t,e){return fi(o,t,e)}}}function Zi(t,e){var n=e*e,i=n*n
return[t*(.8707-.131979*n+i*(i*(.003971*n-.001529*i)-.013791)),e*(1.007226+n*(.015085+i*(.028874*n-.044475-.005916*i)))]}function Xi(){return mi(Zi).scale(175.295)}function Yi(t,e){return[y(e)*w(t),w(e)]}function Vi(){return mi(Yi).scale(249.5).clipAngle(90+a)}function Wi(t,e){var n=y(e),i=1+y(t)*n
return[n*w(t)/i,w(e)/i]}function Hi(){return mi(Wi).scale(250).clipAngle(142)}function $i(t,e){return[b(T((h+e)/2)),-t]}function Ki(){var t=Mi($i),e=t.center,n=t.rotate
return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)}Pi.invert=Ci((function(t){return t})),Ri.invert=function(t,e){return[t,2*_(x(e))-h]},Fi.invert=Fi,Gi.invert=Ci(_),Zi.invert=function(t,e){var n,i=e,r=25
do{var o=i*i,s=o*o
i-=n=(i*(1.007226+o*(.015085+s*(.028874*o-.044475-.005916*s)))-e)/(1.007226+o*(.045255+s*(.259866*o-.311325-.005916*11*s)))}while(g(n)>a&&--r>0)
return[t/(.8707+(o=i*i)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),i]},Yi.invert=Ci(P),Wi.invert=Ci((function(t){return 2*_(t)})),$i.invert=function(t,e){return[-e,2*_(x(t))-h]}},8496:(t,e,n)=>{"use strict"
function i(t){return function(){return t}}function r(t){return t[0]}function o(t){return t[1]}function s(){this._=null}function a(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function l(t,e){var n=e,i=e.R,r=n.U
r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function u(t,e){var n=e,i=e.L,r=n.U
r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function h(t){for(;t.L;)t=t.L
return t}n.r(e),n.d(e,{voronoi:()=>B}),s.prototype={constructor:s,insert:function(t,e){var n,i,r
if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L
t.L=e}else t.R=e
n=t}else this._?(t=h(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null)
for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(i=n.U).L?(r=i.R)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.R&&(l(this,n),n=(t=n).U),n.C=!1,i.C=!0,u(this,i)):(r=i.L)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.L&&(u(this,n),n=(t=n).U),n.C=!1,i.C=!0,l(this,i)),n=t.U
this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null
var e,n,i,r=t.U,o=t.L,s=t.R
if(n=o?s?h(s):o:s,r?r.L===t?r.L=n:r.R=n:this._=n,o&&s?(i=n.C,n.C=t.C,n.L=o,o.U=n,n!==s?(r=n.U,n.U=t.U,t=n.R,r.L=t,n.R=s,s.U=n):(n.U=r,r=n,t=n.R)):(i=t.C,t=n),t&&(t.U=r),!i)if(t&&t.C)t.C=!1
else{do{if(t===this._)break
if(t===r.L){if((e=r.R).C&&(e.C=!1,r.C=!0,l(this,r),e=r.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,u(this,e),e=r.R),e.C=r.C,r.C=e.R.C=!1,l(this,r),t=this._
break}}else if((e=r.L).C&&(e.C=!1,r.C=!0,u(this,r),e=r.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,l(this,e),e=r.L),e.C=r.C,r.C=e.L.C=!1,u(this,r),t=this._
break}e.C=!0,t=r,r=r.U}while(!t.C)
t&&(t.C=!1)}}}
const c=s
function f(t,e,n,i){var r=[null,null],o=F.push(r)-1
return r.left=t,r.right=e,n&&d(r,t,e,n),i&&d(r,e,t,i),N[t.index].halfedges.push(o),N[e.index].halfedges.push(o),r}function p(t,e,n){var i=[e,n]
return i.left=t,i}function d(t,e,n,i){t[0]||t[1]?t.left===n?t[1]=i:t[0]=i:(t[0]=i,t.left=e,t.right=n)}function g(t,e,n,i,r){var o,s=t[0],a=t[1],l=s[0],u=s[1],h=0,c=1,f=a[0]-l,p=a[1]-u
if(o=e-l,f||!(o>0)){if(o/=f,f<0){if(o<h)return
o<c&&(c=o)}else if(f>0){if(o>c)return
o>h&&(h=o)}if(o=i-l,f||!(o<0)){if(o/=f,f<0){if(o>c)return
o>h&&(h=o)}else if(f>0){if(o<h)return
o<c&&(c=o)}if(o=n-u,p||!(o>0)){if(o/=p,p<0){if(o<h)return
o<c&&(c=o)}else if(p>0){if(o>c)return
o>h&&(h=o)}if(o=r-u,p||!(o<0)){if(o/=p,p<0){if(o>c)return
o>h&&(h=o)}else if(p>0){if(o<h)return
o<c&&(c=o)}return!(h>0||c<1)||(h>0&&(t[0]=[l+h*f,u+h*p]),c<1&&(t[1]=[l+c*f,u+c*p]),!0)}}}}}function _(t,e,n,i,r){var o=t[1]
if(o)return!0
var s,a,l=t[0],u=t.left,h=t.right,c=u[0],f=u[1],p=h[0],d=h[1],g=(c+p)/2,_=(f+d)/2
if(d===f){if(g<e||g>=i)return
if(c>p){if(l){if(l[1]>=r)return}else l=[g,n]
o=[g,r]}else{if(l){if(l[1]<n)return}else l=[g,r]
o=[g,n]}}else if(a=_-(s=(c-p)/(d-f))*g,s<-1||s>1)if(c>p){if(l){if(l[1]>=r)return}else l=[(n-a)/s,n]
o=[(r-a)/s,r]}else{if(l){if(l[1]<n)return}else l=[(r-a)/s,r]
o=[(n-a)/s,n]}else if(f<d){if(l){if(l[0]>=i)return}else l=[e,s*e+a]
o=[i,s*i+a]}else{if(l){if(l[0]<e)return}else l=[i,s*i+a]
o=[e,s*e+a]}return t[0]=l,t[1]=o,!0}function m(t,e){var n=t.site,i=e.left,r=e.right
return n===r&&(r=i,i=n),r?Math.atan2(r[1]-i[1],r[0]-i[0]):(n===i?(i=e[1],r=e[0]):(i=e[0],r=e[1]),Math.atan2(i[0]-r[0],r[1]-i[1]))}function y(t,e){return e[+(e.left!==t.site)]}function v(t,e){return e[+(e.left===t.site)]}var x,b=[]
function E(){a(this),this.x=this.y=this.arc=this.site=this.cy=null}function w(t){var e=t.P,n=t.N
if(e&&n){var i=e.site,r=t.site,o=n.site
if(i!==o){var s=r[0],a=r[1],l=i[0]-s,u=i[1]-a,h=o[0]-s,c=o[1]-a,f=2*(l*c-u*h)
if(!(f>=-j)){var p=l*l+u*u,d=h*h+c*c,g=(c*p-u*d)/f,_=(l*d-h*p)/f,m=b.pop()||new E
m.arc=t,m.site=r,m.x=g+s,m.y=(m.cy=_+a)+Math.sqrt(g*g+_*_),t.circle=m
for(var y=null,v=D._;v;)if(m.y<v.y||m.y===v.y&&m.x<=v.x){if(!v.L){y=v.P
break}v=v.L}else{if(!v.R){y=v
break}v=v.R}D.insert(y,m),y||(x=m)}}}}function S(t){var e=t.circle
e&&(e.P||(x=e.N),D.remove(e),b.push(e),a(e),t.circle=null)}var C=[]
function T(){a(this),this.edge=this.site=this.circle=null}function I(t){var e=C.pop()||new T
return e.site=t,e}function P(t){S(t),O.remove(t),C.push(t),a(t)}function A(t){var e=t.circle,n=e.x,i=e.cy,r=[n,i],o=t.P,s=t.N,a=[t]
P(t)
for(var l=o;l.circle&&Math.abs(n-l.circle.x)<k&&Math.abs(i-l.circle.cy)<k;)o=l.P,a.unshift(l),P(l),l=o
a.unshift(l),S(l)
for(var u=s;u.circle&&Math.abs(n-u.circle.x)<k&&Math.abs(i-u.circle.cy)<k;)s=u.N,a.push(u),P(u),u=s
a.push(u),S(u)
var h,c=a.length
for(h=1;h<c;++h)u=a[h],l=a[h-1],d(u.edge,l.site,u.site,r)
l=a[0],(u=a[c-1]).edge=f(l.site,u.site,null,r),w(l),w(u)}function R(t){for(var e,n,i,r,o=t[0],s=t[1],a=O._;a;)if((i=L(a,s)-o)>k)a=a.L
else{if(!((r=o-M(a,s))>k)){i>-k?(e=a.P,n=a):r>-k?(e=a,n=a.N):e=n=a
break}if(!a.R){e=a
break}a=a.R}!function(t){N[t.index]={site:t,halfedges:[]}}(t)
var l=I(t)
if(O.insert(e,l),e||n){if(e===n)return S(e),n=I(e.site),O.insert(l,n),l.edge=n.edge=f(e.site,l.site),w(e),void w(n)
if(n){S(e),S(n)
var u=e.site,h=u[0],c=u[1],p=t[0]-h,g=t[1]-c,_=n.site,m=_[0]-h,y=_[1]-c,v=2*(p*y-g*m),x=p*p+g*g,b=m*m+y*y,E=[(y*x-g*b)/v+h,(p*b-m*x)/v+c]
d(n.edge,u,_,E),l.edge=f(u,t,null,E),n.edge=f(t,_,null,E),w(e),w(n)}else l.edge=f(e.site,l.site)}}function L(t,e){var n=t.site,i=n[0],r=n[1],o=r-e
if(!o)return i
var s=t.P
if(!s)return-1/0
var a=(n=s.site)[0],l=n[1],u=l-e
if(!u)return a
var h=a-i,c=1/o-1/u,f=h/u
return c?(-f+Math.sqrt(f*f-2*c*(h*h/(-2*u)-l+u/2+r-o/2)))/c+i:(i+a)/2}function M(t,e){var n=t.N
if(n)return L(n,e)
var i=t.site
return i[1]===e?i[0]:1/0}var O,N,D,F,k=1e-6,j=1e-12
function z(t,e){return e[1]-t[1]||e[0]-t[0]}function G(t,e){var n,i,r,o=t.sort(z).pop()
for(F=[],N=new Array(t.length),O=new c,D=new c;;)if(r=x,o&&(!r||o[1]<r.y||o[1]===r.y&&o[0]<r.x))o[0]===n&&o[1]===i||(R(o),n=o[0],i=o[1]),o=t.pop()
else{if(!r)break
A(r.arc)}if(function(){for(var t,e,n,i,r=0,o=N.length;r<o;++r)if((t=N[r])&&(i=(e=t.halfedges).length)){var s=new Array(i),a=new Array(i)
for(n=0;n<i;++n)s[n]=n,a[n]=m(t,F[e[n]])
for(s.sort((function(t,e){return a[e]-a[t]})),n=0;n<i;++n)a[n]=e[s[n]]
for(n=0;n<i;++n)e[n]=a[n]}}(),e){var s=+e[0][0],a=+e[0][1],l=+e[1][0],u=+e[1][1]
!function(t,e,n,i){for(var r,o=F.length;o--;)_(r=F[o],t,e,n,i)&&g(r,t,e,n,i)&&(Math.abs(r[0][0]-r[1][0])>k||Math.abs(r[0][1]-r[1][1])>k)||delete F[o]}(s,a,l,u),function(t,e,n,i){var r,o,s,a,l,u,h,c,f,d,g,_,m=N.length,x=!0
for(r=0;r<m;++r)if(o=N[r]){for(s=o.site,a=(l=o.halfedges).length;a--;)F[l[a]]||l.splice(a,1)
for(a=0,u=l.length;a<u;)g=(d=v(o,F[l[a]]))[0],_=d[1],c=(h=y(o,F[l[++a%u]]))[0],f=h[1],(Math.abs(g-c)>k||Math.abs(_-f)>k)&&(l.splice(a,0,F.push(p(s,d,Math.abs(g-t)<k&&i-_>k?[t,Math.abs(c-t)<k?f:i]:Math.abs(_-i)<k&&n-g>k?[Math.abs(f-i)<k?c:n,i]:Math.abs(g-n)<k&&_-e>k?[n,Math.abs(c-n)<k?f:e]:Math.abs(_-e)<k&&g-t>k?[Math.abs(f-e)<k?c:t,e]:null))-1),++u)
u&&(x=!1)}if(x){var b,E,w,S=1/0
for(r=0,x=null;r<m;++r)(o=N[r])&&(w=(b=(s=o.site)[0]-t)*b+(E=s[1]-e)*E)<S&&(S=w,x=o)
if(x){var C=[t,e],T=[t,i],I=[n,i],P=[n,e]
x.halfedges.push(F.push(p(s=x.site,C,T))-1,F.push(p(s,T,I))-1,F.push(p(s,I,P))-1,F.push(p(s,P,C))-1)}}for(r=0;r<m;++r)(o=N[r])&&(o.halfedges.length||delete N[r])}(s,a,l,u)}this.edges=F,this.cells=N,O=D=F=N=null}function B(){var t=r,e=o,n=null
function s(i){return new G(i.map((function(n,r){var o=[Math.round(t(n,r,i)/k)*k,Math.round(e(n,r,i)/k)*k]
return o.index=r,o.data=n,o})),n)}return s.polygons=function(t){return s(t).polygons()},s.links=function(t){return s(t).links()},s.triangles=function(t){return s(t).triangles()},s.x=function(e){return arguments.length?(t="function"==typeof e?e:i(+e),s):t},s.y=function(t){return arguments.length?(e="function"==typeof t?t:i(+t),s):e},s.extent=function(t){return arguments.length?(n=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],s):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},s.size=function(t){return arguments.length?(n=null==t?null:[[0,0],[+t[0],+t[1]]],s):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},s}G.prototype={constructor:G,polygons:function(){var t=this.edges
return this.cells.map((function(e){var n=e.halfedges.map((function(n){return y(e,t[n])}))
return n.data=e.site.data,n}))},triangles:function(){var t=[],e=this.edges
return this.cells.forEach((function(n,i){if(o=(r=n.halfedges).length)for(var r,o,s,a,l,u,h=n.site,c=-1,f=e[r[o-1]],p=f.left===h?f.right:f.left;++c<o;)s=p,p=(f=e[r[c]]).left===h?f.right:f.left,s&&p&&i<s.index&&i<p.index&&(l=s,u=p,((a=h)[0]-u[0])*(l[1]-a[1])-(a[0]-l[0])*(u[1]-a[1])<0)&&t.push([h.data,s.data,p.data])})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,e,n){for(var i,r,o=this,s=o._found||0,a=o.cells.length;!(r=o.cells[s]);)if(++s>=a)return null
var l=t-r.site[0],u=e-r.site[1],h=l*l+u*u
do{r=o.cells[i=s],s=null,r.halfedges.forEach((function(n){var i=o.edges[n],a=i.left
if(a!==r.site&&a||(a=i.right)){var l=t-a[0],u=e-a[1],c=l*l+u*u
c<h&&(h=c,s=a.index)}}))}while(null!==s)
return o._found=i,null==n||h<=n*n?r.site:null}}},5941:(t,e,n)=>{var i=n(1802),r=n(9364),o=n(473),s=n(7191),a=n(5401),l=n(9967),u=Date.prototype.getTime
function h(t){return null==t}function c(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||t.length>0&&"number"!=typeof t[0])}t.exports=function t(e,n,f){var p=f||{}
return!!(p.strict?o(e,n):e===n)||(!e||!n||"object"!=typeof e&&"object"!=typeof n?p.strict?o(e,n):e==n:function(e,n,o){var f,p
if(typeof e!=typeof n)return!1
if(h(e)||h(n))return!1
if(e.prototype!==n.prototype)return!1
if(r(e)!==r(n))return!1
var d=s(e),g=s(n)
if(d!==g)return!1
if(d||g)return e.source===n.source&&a(e)===a(n)
if(l(e)&&l(n))return u.call(e)===u.call(n)
var _=c(e),m=c(n)
if(_!==m)return!1
if(_||m){if(e.length!==n.length)return!1
for(f=0;f<e.length;f++)if(e[f]!==n[f])return!1
return!0}if(typeof e!=typeof n)return!1
try{var y=i(e),v=i(n)}catch(t){return!1}if(y.length!==v.length)return!1
for(y.sort(),v.sort(),f=y.length-1;f>=0;f--)if(y[f]!=v[f])return!1
for(f=y.length-1;f>=0;f--)if(!t(e[p=y[f]],n[p],o))return!1
return!0}(e,n,p))}},2451:(t,e,n)=>{"use strict"
var i=n(9836),r=n(462),o=n(6933),s=n(6627)
t.exports=function(t,e,n){if(!t||"object"!=typeof t&&"function"!=typeof t)throw new o("`obj` must be an object or a function`")
if("string"!=typeof e&&"symbol"!=typeof e)throw new o("`property` must be a string or a symbol`")
if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new o("`nonEnumerable`, if provided, must be a boolean or null")
if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new o("`nonWritable`, if provided, must be a boolean or null")
if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new o("`nonConfigurable`, if provided, must be a boolean or null")
if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new o("`loose`, if provided, must be a boolean")
var a=arguments.length>3?arguments[3]:null,l=arguments.length>4?arguments[4]:null,u=arguments.length>5?arguments[5]:null,h=arguments.length>6&&arguments[6],c=!!s&&s(t,e)
if(i)i(t,e,{configurable:null===u&&c?c.configurable:!u,enumerable:null===a&&c?c.enumerable:!a,value:n,writable:null===l&&c?c.writable:!l})
else{if(!h&&(a||l||u))throw new r("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")
t[e]=n}}},5967:(t,e,n)=>{"use strict"
var i=n(1802),r="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),o=Object.prototype.toString,s=Array.prototype.concat,a=n(2451),l=n(7214)(),u=function(t,e,n,i){if(e in t)if(!0===i){if(t[e]===n)return}else if("function"!=typeof(r=i)||"[object Function]"!==o.call(r)||!i())return
var r
l?a(t,e,n,!0):a(t,e,n)},h=function(t,e){var n=arguments.length>2?arguments[2]:{},o=i(e)
r&&(o=s.call(o,Object.getOwnPropertySymbols(e)))
for(var a=0;a<o.length;a+=1)u(t,o[a],e[o[a]],n[o[a]])}
h.supportsDescriptors=!!l,t.exports=h},9194:t=>{function e(t,e,n,i){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,e,n,i)}e.prototype.run=function(t,e,n,i){this._init(t,e,n,i)
for(var r=0;r<this._datasetLength;r++)if(1!==this._visited[r]){this._visited[r]=1
var o=this._regionQuery(r)
if(o.length<this.minPts)this.noise.push(r)
else{var s=this.clusters.length
this.clusters.push([]),this._addToCluster(r,s),this._expandCluster(s,o)}}return this.clusters},e.prototype._init=function(t,e,n,i){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given")
this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}e&&(this.epsilon=e),n&&(this.minPts=n),i&&(this.distance=i)},e.prototype._expandCluster=function(t,e){for(var n=0;n<e.length;n++){var i=e[n]
if(1!==this._visited[i]){this._visited[i]=1
var r=this._regionQuery(i)
r.length>=this.minPts&&(e=this._mergeArrays(e,r))}1!==this._assigned[i]&&this._addToCluster(i,t)}},e.prototype._addToCluster=function(t,e){this.clusters[e].push(t),this._assigned[t]=1},e.prototype._regionQuery=function(t){for(var e=[],n=0;n<this._datasetLength;n++)this.distance(this.dataset[t],this.dataset[n])<this.epsilon&&e.push(n)
return e},e.prototype._mergeArrays=function(t,e){for(var n=e.length,i=0;i<n;i++){var r=e[i]
t.indexOf(r)<0&&t.push(r)}return t},e.prototype._euclideanDistance=function(t,e){for(var n=0,i=Math.min(t.length,e.length);i--;)n+=(t[i]-e[i])*(t[i]-e[i])
return Math.sqrt(n)},t.exports&&(t.exports=e)},7020:t=>{function e(t,e,n){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,e,n)}e.prototype.init=function(t,e,n){this.assignments=[],this.centroids=[],void 0!==t&&(this.dataset=t),void 0!==e&&(this.k=e),void 0!==n&&(this.distance=n)},e.prototype.run=function(t,e){this.init(t,e)
for(var n=this.dataset.length,i=0;i<this.k;i++)this.centroids[i]=this.randomCentroid()
for(var r=!0;r;){r=this.assign()
for(var o=0;o<this.k;o++){for(var s=new Array(h),a=0,l=0;l<h;l++)s[l]=0
for(var u=0;u<n;u++){var h=this.dataset[u].length
if(o===this.assignments[u]){for(l=0;l<h;l++)s[l]+=this.dataset[u][l]
a++}}if(a>0){for(l=0;l<h;l++)s[l]/=a
this.centroids[o]=s}else this.centroids[o]=this.randomCentroid(),r=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var t,e,n=this.dataset.length-1
do{e=Math.round(Math.random()*n),t=this.dataset[e]}while(this.centroids.indexOf(t)>=0)
return t},e.prototype.assign=function(){for(var t,e=!1,n=this.dataset.length,i=0;i<n;i++)(t=this.argmin(this.dataset[i],this.centroids,this.distance))!=this.assignments[i]&&(this.assignments[i]=t,e=!0)
return e},e.prototype.getClusters=function(){for(var t,e=new Array(this.k),n=0;n<this.assignments.length;n++)void 0===e[t=this.assignments[n]]&&(e[t]=[]),e[t].push(n)
return e},e.prototype.argmin=function(t,e,n){for(var i,r=Number.MAX_VALUE,o=0,s=e.length,a=0;a<s;a++)(i=n(t,e[a]))<r&&(r=i,o=a)
return o},e.prototype.distance=function(t,e){for(var n=0,i=Math.min(t.length,e.length);i--;){var r=t[i]-e[i]
n+=r*r}return Math.sqrt(n)},t.exports&&(t.exports=e)},5915:(t,e,n)=>{if(t.exports)var i=n(3914)
function r(t,e,n,i){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,e,n,i)}r.prototype.run=function(t,e,n,r){this._init(t,e,n,r)
for(var o=0,s=this.dataset.length;o<s;o++)if(1!==this._processed[o]){this._processed[o]=1,this.clusters.push([o])
var a=this.clusters.length-1
this._orderedList.push(o)
var l=new i(null,null,"asc"),u=this._regionQuery(o)
void 0!==this._distanceToCore(o)&&(this._updateQueue(o,u,l),this._expandCluster(a,l))}return this.clusters},r.prototype.getReachabilityPlot=function(){for(var t=[],e=0,n=this._orderedList.length;e<n;e++){var i=this._orderedList[e],r=this._reachability[i]
t.push([i,r])}return t},r.prototype._init=function(t,e,n,i){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given")
this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}e&&(this.epsilon=e),n&&(this.minPts=n),i&&(this.distance=i)},r.prototype._updateQueue=function(t,e,n){var i=this
this._coreDistance=this._distanceToCore(t),e.forEach((function(e){if(void 0===i._processed[e]){var r=i.distance(i.dataset[t],i.dataset[e]),o=Math.max(i._coreDistance,r)
void 0===i._reachability[e]?(i._reachability[e]=o,n.insert(e,o)):o<i._reachability[e]&&(i._reachability[e]=o,n.remove(e),n.insert(e,o))}}))},r.prototype._expandCluster=function(t,e){for(var n=e.getElements(),i=0,r=n.length;i<r;i++){var o=n[i]
if(void 0===this._processed[o]){var s=this._regionQuery(o)
this._processed[o]=1,this.clusters[t].push(o),this._orderedList.push(o),void 0!==this._distanceToCore(o)&&(this._updateQueue(o,s,e),this._expandCluster(t,e))}}},r.prototype._distanceToCore=function(t){for(var e=this.epsilon,n=0;n<e;n++)if(this._regionQuery(t,n).length>=this.minPts)return n},r.prototype._regionQuery=function(t,e){e=e||this.epsilon
for(var n=[],i=0,r=this.dataset.length;i<r;i++)this.distance(this.dataset[t],this.dataset[i])<e&&n.push(i)
return n},r.prototype._euclideanDistance=function(t,e){for(var n=0,i=Math.min(t.length,e.length);i--;)n+=(t[i]-e[i])*(t[i]-e[i])
return Math.sqrt(n)},t.exports&&(t.exports=r)},3914:t=>{function e(t,e,n){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,e,n)}e.prototype.insert=function(t,e){for(var n=this._queue.length,i=n;i--;){var r=this._priorities[i]
"desc"===this._sorting?e>r&&(n=i):e<r&&(n=i)}this._insertAt(t,e,n)},e.prototype.remove=function(t){for(var e=this._queue.length;e--;)if(t===this._queue[e]){this._queue.splice(e,1),this._priorities.splice(e,1)
break}},e.prototype.forEach=function(t){this._queue.forEach(t)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(t){return this._priorities[t]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var t=[],e=0,n=this._queue.length;e<n;e++)t.push([this._queue[e],this._priorities[e]])
return t},e.prototype._init=function(t,e,n){if(t&&e){if(this._queue=[],this._priorities=[],t.length!==e.length)throw new Error("Arrays must have the same length")
for(var i=0;i<t.length;i++)this.insert(t[i],e[i])}n&&(this._sorting=n)},e.prototype._insertAt=function(t,e,n){this._queue.length===n?(this._queue.push(t),this._priorities.push(e)):(this._queue.splice(n,0,t),this._priorities.splice(n,0,e))},t.exports&&(t.exports=e)},7705:(t,e,n)=>{t.exports&&(t.exports={DBSCAN:n(9194),KMEANS:n(7020),OPTICS:n(5915),PriorityQueue:n(3914)})},8992:t=>{"use strict"
function e(t,e,i){i=i||2
var o,s,a,l,c,f,d,g=e&&e.length,_=g?e[0]*i:t.length,m=n(t,0,_,i,!0),y=[]
if(!m||m.next===m.prev)return y
if(g&&(m=function(t,e,i,r){var o,s,a,l=[]
for(o=0,s=e.length;o<s;o++)(a=n(t,e[o]*r,o<s-1?e[o+1]*r:t.length,r,!1))===a.next&&(a.steiner=!0),l.push(p(a))
for(l.sort(u),o=0;o<l.length;o++)i=h(l[o],i)
return i}(t,e,m,i)),t.length>80*i){o=a=t[0],s=l=t[1]
for(var v=i;v<_;v+=i)(c=t[v])<o&&(o=c),(f=t[v+1])<s&&(s=f),c>a&&(a=c),f>l&&(l=f)
d=0!==(d=Math.max(a-o,l-s))?32767/d:0}return r(m,y,i,o,s,d,0),y}function n(t,e,n,i,r){var o,s
if(r===T(t,e,n,i)>0)for(o=e;o<n;o+=i)s=w(o,t[o],t[o+1],s)
else for(o=n-i;o>=e;o-=i)s=w(o,t[o],t[o+1],s)
return s&&m(s,s.next)&&(S(s),s=s.next),s}function i(t,e){if(!t)return t
e||(e=t)
var n,i=t
do{if(n=!1,i.steiner||!m(i,i.next)&&0!==_(i.prev,i,i.next))i=i.next
else{if(S(i),(i=e=i.prev)===i.next)break
n=!0}}while(n||i!==e)
return e}function r(t,e,n,u,h,c,p){if(t){!p&&c&&function(t,e,n,i){var r=t
do{0===r.z&&(r.z=f(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t)
r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,n,i,r,o,s,a,l,u=1
do{for(n=t,t=null,o=null,s=0;n;){for(s++,i=n,a=0,e=0;e<u&&(a++,i=i.nextZ);e++);for(l=u;a>0||l>0&&i;)0!==a&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,l--),o?o.nextZ=r:t=r,r.prevZ=o,o=r
n=i}o.nextZ=null,u*=2}while(s>1)}(r)}(t,u,h,c)
for(var d,g,_=t;t.prev!==t.next;)if(d=t.prev,g=t.next,c?s(t,u,h,c):o(t))e.push(d.i/n|0),e.push(t.i/n|0),e.push(g.i/n|0),S(t),t=g.next,_=g.next
else if((t=g)===_){p?1===p?r(t=a(i(t),e,n),e,n,u,h,c,2):2===p&&l(t,e,n,u,h,c):r(i(t),e,n,u,h,c,1)
break}}}function o(t){var e=t.prev,n=t,i=t.next
if(_(e,n,i)>=0)return!1
for(var r=e.x,o=n.x,s=i.x,a=e.y,l=n.y,u=i.y,h=r<o?r<s?r:s:o<s?o:s,c=a<l?a<u?a:u:l<u?l:u,f=r>o?r>s?r:s:o>s?o:s,p=a>l?a>u?a:u:l>u?l:u,g=i.next;g!==e;){if(g.x>=h&&g.x<=f&&g.y>=c&&g.y<=p&&d(r,a,o,l,s,u,g.x,g.y)&&_(g.prev,g,g.next)>=0)return!1
g=g.next}return!0}function s(t,e,n,i){var r=t.prev,o=t,s=t.next
if(_(r,o,s)>=0)return!1
for(var a=r.x,l=o.x,u=s.x,h=r.y,c=o.y,p=s.y,g=a<l?a<u?a:u:l<u?l:u,m=h<c?h<p?h:p:c<p?c:p,y=a>l?a>u?a:u:l>u?l:u,v=h>c?h>p?h:p:c>p?c:p,x=f(g,m,e,n,i),b=f(y,v,e,n,i),E=t.prevZ,w=t.nextZ;E&&E.z>=x&&w&&w.z<=b;){if(E.x>=g&&E.x<=y&&E.y>=m&&E.y<=v&&E!==r&&E!==s&&d(a,h,l,c,u,p,E.x,E.y)&&_(E.prev,E,E.next)>=0)return!1
if(E=E.prevZ,w.x>=g&&w.x<=y&&w.y>=m&&w.y<=v&&w!==r&&w!==s&&d(a,h,l,c,u,p,w.x,w.y)&&_(w.prev,w,w.next)>=0)return!1
w=w.nextZ}for(;E&&E.z>=x;){if(E.x>=g&&E.x<=y&&E.y>=m&&E.y<=v&&E!==r&&E!==s&&d(a,h,l,c,u,p,E.x,E.y)&&_(E.prev,E,E.next)>=0)return!1
E=E.prevZ}for(;w&&w.z<=b;){if(w.x>=g&&w.x<=y&&w.y>=m&&w.y<=v&&w!==r&&w!==s&&d(a,h,l,c,u,p,w.x,w.y)&&_(w.prev,w,w.next)>=0)return!1
w=w.nextZ}return!0}function a(t,e,n){var r=t
do{var o=r.prev,s=r.next.next
!m(o,s)&&y(o,r,r.next,s)&&b(o,s)&&b(s,o)&&(e.push(o.i/n|0),e.push(r.i/n|0),e.push(s.i/n|0),S(r),S(r.next),r=t=s),r=r.next}while(r!==t)
return i(r)}function l(t,e,n,o,s,a){var l=t
do{for(var u=l.next.next;u!==l.prev;){if(l.i!==u.i&&g(l,u)){var h=E(l,u)
return l=i(l,l.next),h=i(h,h.next),r(l,e,n,o,s,a,0),void r(h,e,n,o,s,a,0)}u=u.next}l=l.next}while(l!==t)}function u(t,e){return t.x-e.x}function h(t,e){var n=function(t,e){var n,i=e,r=t.x,o=t.y,s=-1/0
do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var a=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y)
if(a<=r&&a>s&&(s=a,n=i.x<i.next.x?i:i.next,a===r))return n}i=i.next}while(i!==e)
if(!n)return null
var l,u=n,h=n.x,f=n.y,p=1/0
i=n
do{r>=i.x&&i.x>=h&&r!==i.x&&d(o<f?r:s,o,h,f,o<f?s:r,o,i.x,i.y)&&(l=Math.abs(o-i.y)/(r-i.x),b(i,t)&&(l<p||l===p&&(i.x>n.x||i.x===n.x&&c(n,i)))&&(n=i,p=l)),i=i.next}while(i!==u)
return n}(t,e)
if(!n)return e
var r=E(n,t)
return i(r,r.next),i(n,n.next)}function c(t,e){return _(t.prev,t,e.prev)<0&&_(e.next,t,t.next)<0}function f(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-i)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function p(t){var e=t,n=t
do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t)
return n}function d(t,e,n,i,r,o,s,a){return(r-s)*(e-a)>=(t-s)*(o-a)&&(t-s)*(i-a)>=(n-s)*(e-a)&&(n-s)*(o-a)>=(r-s)*(i-a)}function g(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t
do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&y(n,n.next,t,e))return!0
n=n.next}while(n!==t)
return!1}(t,e)&&(b(t,e)&&b(e,t)&&function(t,e){var n=t,i=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2
do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t)
return i}(t,e)&&(_(t.prev,t,e.prev)||_(t,e.prev,e))||m(t,e)&&_(t.prev,t,t.next)>0&&_(e.prev,e,e.next)>0)}function _(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function m(t,e){return t.x===e.x&&t.y===e.y}function y(t,e,n,i){var r=x(_(t,e,n)),o=x(_(t,e,i)),s=x(_(n,i,t)),a=x(_(n,i,e))
return r!==o&&s!==a||!(0!==r||!v(t,n,e))||!(0!==o||!v(t,i,e))||!(0!==s||!v(n,t,i))||!(0!==a||!v(n,e,i))}function v(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function x(t){return t>0?1:t<0?-1:0}function b(t,e){return _(t.prev,t,t.next)<0?_(t,e,t.next)>=0&&_(t,t.prev,e)>=0:_(t,e,t.prev)<0||_(t,t.next,e)<0}function E(t,e){var n=new C(t.i,t.x,t.y),i=new C(e.i,e.x,e.y),r=t.next,o=e.prev
return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function w(t,e,n,i){var r=new C(t,e,n)
return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function S(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function C(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function T(t,e,n,i){for(var r=0,o=e,s=n-i;o<n;o+=i)r+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o
return r}t.exports=e,t.exports.default=e,e.deviation=function(t,e,n,i){var r=e&&e.length,o=r?e[0]*n:t.length,s=Math.abs(T(t,0,o,n))
if(r)for(var a=0,l=e.length;a<l;a++){var u=e[a]*n,h=a<l-1?e[a+1]*n:t.length
s-=Math.abs(T(t,u,h,n))}var c=0
for(a=0;a<i.length;a+=3){var f=i[a]*n,p=i[a+1]*n,d=i[a+2]*n
c+=Math.abs((t[f]-t[d])*(t[p+1]-t[f+1])-(t[f]-t[p])*(t[d+1]-t[f+1]))}return 0===s&&0===c?0:Math.abs((c-s)/s)},e.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[r][o][s])
r>0&&(i+=t[r-1].length,n.holes.push(i))}return n}},4606:(t,e,n)=>{"use strict"
n.r(e),n.d(e,{default:()=>l,modifier:()=>h})
var i=n(2294),r=n(2377),o=n(1130)
function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class a{constructor(t){this.owner=t,s(this,"capabilities",(0,r.capabilities)("3.22"))}createModifier(t,e){return{instance:new t(this.owner,e),element:null}}installModifier(t,e,n){const i=function(t,e){const n=t
return n.element=e,n}(t,e)
i.instance.modify(e,n.positional,n.named)}updateModifier(t,e){t.instance.modify(t.element,e.positional,e.named)}destroyModifier({instance:t}){(0,o.destroy)(t)}}class l{constructor(t,e){(0,i.setOwner)(this,t)}modify(t,e,n){}}(0,r.setModifierManager)((t=>new a(t)),l)
const u=new class{constructor(){s(this,"capabilities",(0,r.capabilities)("3.22"))}createModifier(t){return{element:null,instance:t}}installModifier(t,e,n){const i=function(t,e){const n=t
return n.element=e,n}(t,e),{positional:r,named:o}=n,s=t.instance(e,r,o)
"function"==typeof s&&(i.teardown=s)}updateModifier(t,e){"function"==typeof t.teardown&&t.teardown()
const n=t.instance(t.element,e.positional,e.named)
"function"==typeof n&&(t.teardown=n)}destroyModifier(t){"function"==typeof t.teardown&&t.teardown()}}
function h(t){return(0,r.setModifierManager)((()=>u),t)}},2945:(t,e,n)=>{"use strict"
function i(t,e,n){return(e="symbol"==typeof(i=function(t,e){if("object"!=typeof t||!t)return t
var n=t[Symbol.toPrimitive]
if(void 0!==n){var i=n.call(t,"string")
if("object"!=typeof i)return i
throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e))?i:String(i))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t
var i}function r(t,e,n,i){n&&Object.defineProperty(t,e,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function o(t,e,n,i,r){var o={}
return Object.keys(i).forEach((function(t){o[t]=i[t]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,i){return i(t,e,n)||n}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}n.d(e,{_:()=>o,a:()=>r,b:()=>i})},7842:(t,e,n)=>{"use strict"
n.r(e),n.d(e,{default:()=>c})
var i,r,o,s=n(2945),a=n(2735),l=n(336),u=n.n(l),h=n(4666)
let c=(i=(0,a.inject)("page-title"),r=class extends(u()){constructor(t){super(t),(0,s.a)(this,"tokens",o,this),(0,s.b)(this,"tokenId",(0,h.guidFor)(this)),this.tokens.push({id:this.tokenId})}compute(t,e){const n={...e,id:this.tokenId,title:t.join("")}
return this.tokens.push(n),this.tokens.scheduleTitleUpdate(),""}willDestroy(){super.willDestroy(),this.tokens.remove(this.tokenId),this.tokens.scheduleTitleUpdate()}},o=(0,s._)(r.prototype,"tokens",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),r)},5283:(t,e,n)=>{"use strict"
n.r(e),n.d(e,{default:()=>m})
var i,r,o,s,a,l=n(2945),u=n(1223),h=n(2735),c=n.n(h),f=n(9553),p=n(3984)
const d="undefined"!=typeof FastBoot,g="routeDidChange",_=["separator","prepend","replace"]
let m=(i=(0,h.inject)("router"),r=(0,h.inject)("-document"),o=class extends(c()){constructor(t){if(super(t),(0,l.a)(this,"router",s,this),(0,l.a)(this,"document",a,this),(0,l.b)(this,"tokens",[]),(0,l.b)(this,"_defaultConfig",{separator:" | ",prepend:!0,replace:null}),(0,l.b)(this,"scheduleTitleUpdate",(()=>{(0,u.scheduleOnce)("afterRender",this,this._updateTitle)})),this._validateExistingTitleElement(),function(t){return"resolveRegistration"in t}(t)){const n=t.resolveRegistration("config:environment")
"object"==typeof(e=n)&&null!==e&&"pageTitle"in e&&_.forEach((t=>{if(!(0,f.isEmpty)(n.pageTitle[t])){const e=n.pageTitle[t]
this._defaultConfig[t]=e}}))}var e
this.router.on(g,this.scheduleTitleUpdate)}applyTokenDefaults(t){const e=this._defaultConfig.separator,n=this._defaultConfig.prepend,i=this._defaultConfig.replace
t.previous??=null,t.next??=null,null==t.separator&&(t.separator=e),null==t.prepend&&null!=n&&(t.prepend=n),null==t.replace&&null!=i&&(t.replace=i)}inheritFromPrevious(t){const e=t.previous
e&&(null==t.separator&&(t.separator=e.separator),null==t.prepend&&(t.prepend=e.prepend))}push(t){const e=this._findTokenById(t.id)
if(e){const n=this.tokens.indexOf(e),i=[...this.tokens],r=e.previous
return t.previous=r,t.next=e.next,this.inheritFromPrevious(t),this.applyTokenDefaults(t),i.splice(n,1,t),void(this.tokens=i)}const n=this.tokens.slice(-1)[0]
n&&(t.previous=n??null,n.next=t,this.inheritFromPrevious(t)),this.applyTokenDefaults(t),this.tokens=[...this.tokens,t]}remove(t){const e=this._findTokenById(t)
if(!e)return
const{next:n,previous:i}=e
n&&(n.previous=i),i&&(i.next=n),e.previous=e.next=null
const r=[...this.tokens]
r.splice(r.indexOf(e),1),this.tokens=r}get visibleTokens(){const t=this.tokens
let e=t?t.length:0
const n=[]
for(;e--;){const i=t[e]
if(i){if(i.replace){n.unshift(i)
break}n.unshift(i)}}return n}get sortedTokens(){const t=this.visibleTokens
if(!t)return[]
let e=!0,n=[]
const i=[n],r=[]
return t.forEach((t=>{if(t.front)r.unshift(t)
else if(t.prepend){e&&(e=!1,n=[],i.push(n))
const r=n[0]
r&&((t={...t}).separator=r.separator),n.unshift(t)}else e||(e=!0,n=[],i.push(n)),n.push(t)})),r.concat(i.reduce(((t,e)=>t.concat(e)),[]))}toString(){const t=this.sortedTokens,e=[]
for(let n=0,i=t.length;n<i;n++){const r=t[n]
r&&r.title&&(e.push(r.title),n+1<i&&e.push(r.separator))}return e.join("")}willDestroy(){super.willDestroy(),this.router.off(g,this.scheduleTitleUpdate)}_updateTitle(){const t=this.toString()
d?this.updateFastbootTitle(t):this.document.title=t,this.titleDidUpdate(t)}_validateExistingTitleElement(){d||(0,p.assert)("[ember-page-title]: Multiple title elements found. Check for other addons like ember-cli-head updating <title> as well.",document.head.querySelectorAll("title").length<=1)}_findTokenById(t){return this.tokens.find((e=>e.id===t))}updateFastbootTitle(t){if(!d)return
const e=this.document.head,n=e.childNodes
for(let o=0;o<n.length;o++){const t=n[o]
t&&"title"===t.nodeName.toLowerCase()&&e.removeChild(t)}const i=this.document.createElement("title"),r=this.document.createTextNode(t)
i.appendChild(r),e.appendChild(i)}titleDidUpdate(t){}},s=(0,l._)(o.prototype,"router",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a=(0,l._)(o.prototype,"document",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o)},9836:(t,e,n)=>{"use strict"
var i=n(8824)("%Object.defineProperty%",!0)||!1
if(i)try{i({},"a",{value:1})}catch(t){i=!1}t.exports=i},6939:t=>{"use strict"
t.exports=EvalError},769:t=>{"use strict"
t.exports=Error},2876:t=>{"use strict"
t.exports=RangeError},9480:t=>{"use strict"
t.exports=ReferenceError},462:t=>{"use strict"
t.exports=SyntaxError},6933:t=>{"use strict"
t.exports=TypeError},27:t=>{"use strict"
t.exports=URIError},2799:t=>{"use strict"
var e=Object.prototype.toString,n=Math.max,i=function(t,e){for(var n=[],i=0;i<t.length;i+=1)n[i]=t[i]
for(var r=0;r<e.length;r+=1)n[r+t.length]=e[r]
return n}
t.exports=function(t){var r=this
if("function"!=typeof r||"[object Function]"!==e.apply(r))throw new TypeError("Function.prototype.bind called on incompatible "+r)
for(var o,s=function(t,e){for(var n=[],i=1,r=0;i<t.length;i+=1,r+=1)n[r]=t[i]
return n}(arguments),a=n(0,r.length-s.length),l=[],u=0;u<a;u++)l[u]="$"+u
if(o=Function("binder","return function ("+function(t,e){for(var n="",i=0;i<t.length;i+=1)n+=t[i],i+1<t.length&&(n+=",")
return n}(l)+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof o){var e=r.apply(this,i(s,arguments))
return Object(e)===e?e:this}return r.apply(t,i(s,arguments))})),r.prototype){var h=function(){}
h.prototype=r.prototype,o.prototype=new h,h.prototype=null}return o}},9913:(t,e,n)=>{"use strict"
var i=n(2799)
t.exports=Function.prototype.bind||i},2275:t=>{"use strict"
var e=function(){return"string"==typeof function(){}.name},n=Object.getOwnPropertyDescriptor
if(n)try{n([],"length")}catch(t){n=null}e.functionsHaveConfigurableNames=function(){if(!e()||!n)return!1
var t=n((function(){}),"name")
return!!t&&!!t.configurable}
var i=Function.prototype.bind
e.boundFunctionsHaveNames=function(){return e()&&"function"==typeof i&&""!==function(){}.bind().name},t.exports=e},9362:(t,e,n)=>{var i=n(5941),r=function(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:a}
function o(t){return t.coordinates.map((function(e){return{type:t.type.replace("Multi",""),coordinates:e}}))}function s(t,e){return t.hasOwnProperty("coordinates")?t.coordinates.length===e.coordinates.length:t.length===e.length}function a(t,e){return i(t,e,{strict:!0})}r.prototype.compare=function(t,e){if(t.type!==e.type||!s(t,e))return!1
switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates)
case"LineString":return this.compareLine(t.coordinates,e.coordinates,0,!1)
case"Polygon":return this.comparePolygon(t,e)
case"Feature":return this.compareFeature(t,e)
default:if(0===t.type.indexOf("Multi")){var n=this,i=o(t),r=o(e)
return i.every((function(t){return this.some((function(e){return n.compare(t,e)}))}),r)}}return!1},r.prototype.compareCoord=function(t,e){if(t.length!==e.length)return!1
for(var n=0;n<t.length;n++)if(t[n].toFixed(this.precision)!==e[n].toFixed(this.precision))return!1
return!0},r.prototype.compareLine=function(t,e,n,i){if(!s(t,e))return!1
var r=this.pseudoNode?t:this.removePseudo(t),o=this.pseudoNode?e:this.removePseudo(e)
if(!i||this.compareCoord(r[0],o[0])||(o=this.fixStartIndex(o,r))){var a=this.compareCoord(r[n],o[n])
return this.direction||a?this.comparePath(r,o):!!this.compareCoord(r[n],o[o.length-(1+n)])&&this.comparePath(r.slice().reverse(),o)}},r.prototype.fixStartIndex=function(t,e){for(var n,i=-1,r=0;r<t.length;r++)if(this.compareCoord(t[r],e[0])){i=r
break}return i>=0&&(n=[].concat(t.slice(i,t.length),t.slice(1,i+1))),n},r.prototype.comparePath=function(t,e){var n=this
return t.every((function(t,e){return n.compareCoord(t,this[e])}),e)},r.prototype.comparePolygon=function(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var n=t.coordinates.slice(1,t.coordinates.length),i=e.coordinates.slice(1,e.coordinates.length),r=this
return n.every((function(t){return this.some((function(e){return r.compareLine(t,e,1,!0)}))}),i)}return!1},r.prototype.compareFeature=function(t,e){return!(t.id!==e.id||!this.objectComparator(t.properties,e.properties)||!this.compareBBox(t,e))&&this.compare(t.geometry,e.geometry)},r.prototype.compareBBox=function(t,e){return!!(!t.bbox&&!e.bbox||t.bbox&&e.bbox&&this.compareCoord(t.bbox,e.bbox))},r.prototype.removePseudo=function(t){return t},t.exports=r},4686:(t,e,n)=>{var i=n(7179),r=n(6303),o=n(9611),s=n(463).default,a=o.featureEach,l=(o.coordEach,r.polygon,r.featureCollection)
function u(t){var e=new i(t)
return e.insert=function(t){if("Feature"!==t.type)throw new Error("invalid feature")
return t.bbox=t.bbox?t.bbox:s(t),i.prototype.insert.call(this,t)},e.load=function(t){var e=[]
return Array.isArray(t)?t.forEach((function(t){if("Feature"!==t.type)throw new Error("invalid features")
t.bbox=t.bbox?t.bbox:s(t),e.push(t)})):a(t,(function(t){if("Feature"!==t.type)throw new Error("invalid features")
t.bbox=t.bbox?t.bbox:s(t),e.push(t)})),i.prototype.load.call(this,e)},e.remove=function(t,e){if("Feature"!==t.type)throw new Error("invalid feature")
return t.bbox=t.bbox?t.bbox:s(t),i.prototype.remove.call(this,t,e)},e.clear=function(){return i.prototype.clear.call(this)},e.search=function(t){var e=i.prototype.search.call(this,this.toBBox(t))
return l(e)},e.collides=function(t){return i.prototype.collides.call(this,this.toBBox(t))},e.all=function(){var t=i.prototype.all.call(this)
return l(t)},e.toJSON=function(){return i.prototype.toJSON.call(this)},e.fromJSON=function(t){return i.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e
if(t.bbox)e=t.bbox
else if(Array.isArray(t)&&4===t.length)e=t
else if(Array.isArray(t)&&6===t.length)e=[t[0],t[1],t[3],t[4]]
else if("Feature"===t.type)e=s(t)
else{if("FeatureCollection"!==t.type)throw new Error("invalid geojson")
e=s(t)}return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}t.exports=u,t.exports.default=u},8824:(t,e,n)=>{"use strict"
var i,r=n(769),o=n(6939),s=n(2876),a=n(9480),l=n(462),u=n(6933),h=n(27),c=Function,f=function(t){try{return c('"use strict"; return ('+t+").constructor;")()}catch(t){}},p=Object.getOwnPropertyDescriptor
if(p)try{p({},"")}catch(t){p=null}var d=function(){throw new u},g=p?function(){try{return d}catch(t){try{return p(arguments,"callee").get}catch(t){return d}}}():d,_=n(4589)(),m=n(2423)(),y=Object.getPrototypeOf||(m?function(t){return t.__proto__}:null),v={},x="undefined"!=typeof Uint8Array&&y?y(Uint8Array):i,b={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?i:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?i:ArrayBuffer,"%ArrayIteratorPrototype%":_&&y?y([][Symbol.iterator]()):i,"%AsyncFromSyncIteratorPrototype%":i,"%AsyncFunction%":v,"%AsyncGenerator%":v,"%AsyncGeneratorFunction%":v,"%AsyncIteratorPrototype%":v,"%Atomics%":"undefined"==typeof Atomics?i:Atomics,"%BigInt%":"undefined"==typeof BigInt?i:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?i:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?i:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?i:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":r,"%eval%":eval,"%EvalError%":o,"%Float32Array%":"undefined"==typeof Float32Array?i:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?i:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?i:FinalizationRegistry,"%Function%":c,"%GeneratorFunction%":v,"%Int8Array%":"undefined"==typeof Int8Array?i:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?i:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?i:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":_&&y?y(y([][Symbol.iterator]())):i,"%JSON%":"object"==typeof JSON?JSON:i,"%Map%":"undefined"==typeof Map?i:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&_&&y?y((new Map)[Symbol.iterator]()):i,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?i:Promise,"%Proxy%":"undefined"==typeof Proxy?i:Proxy,"%RangeError%":s,"%ReferenceError%":a,"%Reflect%":"undefined"==typeof Reflect?i:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?i:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&_&&y?y((new Set)[Symbol.iterator]()):i,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?i:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":_&&y?y(""[Symbol.iterator]()):i,"%Symbol%":_?Symbol:i,"%SyntaxError%":l,"%ThrowTypeError%":g,"%TypedArray%":x,"%TypeError%":u,"%Uint8Array%":"undefined"==typeof Uint8Array?i:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?i:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?i:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?i:Uint32Array,"%URIError%":h,"%WeakMap%":"undefined"==typeof WeakMap?i:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?i:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?i:WeakSet}
if(y)try{null.error}catch(t){var E=y(y(t))
b["%Error.prototype%"]=E}var w=function t(e){var n
if("%AsyncFunction%"===e)n=f("async function () {}")
else if("%GeneratorFunction%"===e)n=f("function* () {}")
else if("%AsyncGeneratorFunction%"===e)n=f("async function* () {}")
else if("%AsyncGenerator%"===e){var i=t("%AsyncGeneratorFunction%")
i&&(n=i.prototype)}else if("%AsyncIteratorPrototype%"===e){var r=t("%AsyncGenerator%")
r&&y&&(n=y(r.prototype))}return b[e]=n,n},S={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},C=n(9913),T=n(8907),I=C.call(Function.call,Array.prototype.concat),P=C.call(Function.apply,Array.prototype.splice),A=C.call(Function.call,String.prototype.replace),R=C.call(Function.call,String.prototype.slice),L=C.call(Function.call,RegExp.prototype.exec),M=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,O=/\\(\\)?/g,N=function(t,e){var n,i=t
if(T(S,i)&&(i="%"+(n=S[i])[0]+"%"),T(b,i)){var r=b[i]
if(r===v&&(r=w(i)),void 0===r&&!e)throw new u("intrinsic "+t+" exists, but is not available. Please file an issue!")
return{alias:n,name:i,value:r}}throw new l("intrinsic "+t+" does not exist!")}
t.exports=function(t,e){if("string"!=typeof t||0===t.length)throw new u("intrinsic name must be a non-empty string")
if(arguments.length>1&&"boolean"!=typeof e)throw new u('"allowMissing" argument must be a boolean')
if(null===L(/^%?[^%]*%?$/,t))throw new l("`%` may not be present anywhere but at the beginning and end of the intrinsic name")
var n=function(t){var e=R(t,0,1),n=R(t,-1)
if("%"===e&&"%"!==n)throw new l("invalid intrinsic syntax, expected closing `%`")
if("%"===n&&"%"!==e)throw new l("invalid intrinsic syntax, expected opening `%`")
var i=[]
return A(t,M,(function(t,e,n,r){i[i.length]=n?A(r,O,"$1"):e||t})),i}(t),i=n.length>0?n[0]:"",r=N("%"+i+"%",e),o=r.name,s=r.value,a=!1,h=r.alias
h&&(i=h[0],P(n,I([0,1],h)))
for(var c=1,f=!0;c<n.length;c+=1){var d=n[c],g=R(d,0,1),_=R(d,-1)
if(('"'===g||"'"===g||"`"===g||'"'===_||"'"===_||"`"===_)&&g!==_)throw new l("property names with quotes must have matching quotes")
if("constructor"!==d&&f||(a=!0),T(b,o="%"+(i+="."+d)+"%"))s=b[o]
else if(null!=s){if(!(d in s)){if(!e)throw new u("base intrinsic for "+t+" exists, but the property is not available.")
return}if(p&&c+1>=n.length){var m=p(s,d)
s=(f=!!m)&&"get"in m&&!("originalValue"in m.get)?m.get:s[d]}else f=T(s,d),s=s[d]
f&&!a&&(b[o]=s)}}return s}},6627:(t,e,n)=>{"use strict"
var i=n(8824)("%Object.getOwnPropertyDescriptor%",!0)
if(i)try{i([],"length")}catch(t){i=null}t.exports=i},7214:(t,e,n)=>{"use strict"
var i=n(9836),r=function(){return!!i}
r.hasArrayLengthDefineBug=function(){if(!i)return null
try{return 1!==i([],"length",{value:1}).length}catch(t){return!0}},t.exports=r},2423:t=>{"use strict"
var e={__proto__:null,foo:{}},n=Object
t.exports=function(){return{__proto__:e}.foo===e.foo&&!(e instanceof n)}},4589:(t,e,n)=>{"use strict"
var i="undefined"!=typeof Symbol&&Symbol,r=n(9199)
t.exports=function(){return"function"==typeof i&&"function"==typeof Symbol&&"symbol"==typeof i("foo")&&"symbol"==typeof Symbol("bar")&&r()}},9199:t=>{"use strict"
t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1
if("symbol"==typeof Symbol.iterator)return!0
var t={},e=Symbol("test"),n=Object(e)
if("string"==typeof e)return!1
if("[object Symbol]"!==Object.prototype.toString.call(e))return!1
if("[object Symbol]"!==Object.prototype.toString.call(n))return!1
for(e in t[e]=42,t)return!1
if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1
if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1
var i=Object.getOwnPropertySymbols(t)
if(1!==i.length||i[0]!==e)return!1
if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1
if("function"==typeof Object.getOwnPropertyDescriptor){var r=Object.getOwnPropertyDescriptor(t,e)
if(42!==r.value||!0!==r.enumerable)return!1}return!0}},584:(t,e,n)=>{"use strict"
var i=n(9199)
t.exports=function(){return i()&&!!Symbol.toStringTag}},8907:(t,e,n)=>{"use strict"
var i=Function.prototype.call,r=Object.prototype.hasOwnProperty,o=n(9913)
t.exports=o.call(i,r)},9364:(t,e,n)=>{"use strict"
var i=n(584)(),r=n(8185)("Object.prototype.toString"),o=function(t){return!(i&&t&&"object"==typeof t&&Symbol.toStringTag in t)&&"[object Arguments]"===r(t)},s=function(t){return!!o(t)||null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Array]"!==r(t)&&"[object Function]"===r(t.callee)},a=function(){return o(arguments)}()
o.isLegacyArguments=s,t.exports=a?o:s},9967:(t,e,n)=>{"use strict"
var i=Date.prototype.getDay,r=Object.prototype.toString,o=n(584)()
t.exports=function(t){return"object"==typeof t&&null!==t&&(o?function(t){try{return i.call(t),!0}catch(t){return!1}}(t):"[object Date]"===r.call(t))}},7191:(t,e,n)=>{"use strict"
var i,r,o,s,a=n(8185),l=n(584)()
if(l){i=a("Object.prototype.hasOwnProperty"),r=a("RegExp.prototype.exec"),o={}
var u=function(){throw o}
s={toString:u,valueOf:u},"symbol"==typeof Symbol.toPrimitive&&(s[Symbol.toPrimitive]=u)}var h=a("Object.prototype.toString"),c=Object.getOwnPropertyDescriptor
t.exports=l?function(t){if(!t||"object"!=typeof t)return!1
var e=c(t,"lastIndex")
if(!e||!i(e,"value"))return!1
try{r(t,s)}catch(t){return t===o}}:function(t){return!(!t||"object"!=typeof t&&"function"!=typeof t)&&"[object RegExp]"===h(t)}},8984:function(t,e){!function(t){"use strict"
function e(t){var e,n,i,r
for(n=1,i=arguments.length;n<i;n++)for(e in r=arguments[n])t[e]=r[e]
return t}var n=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}()
function i(t,e){var n=Array.prototype.slice
if(t.bind)return t.bind.apply(t,n.call(arguments,1))
var i=n.call(arguments,2)
return function(){return t.apply(e,i.length?i.concat(n.call(arguments)):arguments)}}var r=0
function o(t){return"_leaflet_id"in t||(t._leaflet_id=++r),t._leaflet_id}function s(t,e,n){var i,r,o,s
return s=function(){i=!1,r&&(o.apply(n,r),r=!1)},o=function(){i?r=arguments:(t.apply(n,arguments),setTimeout(s,e),i=!0)},o}function a(t,e,n){var i=e[1],r=e[0],o=i-r
return t===i&&n?t:((t-r)%o+o)%o+r}function l(){return!1}function u(t,e){if(!1===e)return t
var n=Math.pow(10,void 0===e?6:e)
return Math.round(t*n)/n}function h(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function c(t){return h(t).split(/\s+/)}function f(t,e){for(var i in Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?n(t.options):{}),e)t.options[i]=e[i]
return t.options}function p(t,e,n){var i=[]
for(var r in t)i.push(encodeURIComponent(n?r.toUpperCase():r)+"="+encodeURIComponent(t[r]))
return(e&&-1!==e.indexOf("?")?"&":"?")+i.join("&")}var d=/\{ *([\w_ -]+) *\}/g
function g(t,e){return t.replace(d,(function(t,n){var i=e[n]
if(void 0===i)throw new Error("No value provided for variable "+t)
return"function"==typeof i&&(i=i(e)),i}))}var _=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}
function m(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n
return-1}var y="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="
function v(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var x=0
function b(t){var e=+new Date,n=Math.max(0,16-(e-x))
return x=e+n,window.setTimeout(t,n)}var E=window.requestAnimationFrame||v("RequestAnimationFrame")||b,w=window.cancelAnimationFrame||v("CancelAnimationFrame")||v("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)}
function S(t,e,n){if(!n||E!==b)return E.call(window,i(t,e))
t.call(e)}function C(t){t&&w.call(window,t)}var T={__proto__:null,extend:e,create:n,bind:i,get lastId(){return r},stamp:o,throttle:s,wrapNum:a,falseFn:l,formatNum:u,trim:h,splitWords:c,setOptions:f,getParamString:p,template:g,isArray:_,indexOf:m,emptyImageUrl:y,requestFn:E,cancelFn:w,requestAnimFrame:S,cancelAnimFrame:C}
function I(){}I.extend=function(t){var i=function(){f(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},r=i.__super__=this.prototype,o=n(r)
for(var s in o.constructor=i,i.prototype=o,this)Object.prototype.hasOwnProperty.call(this,s)&&"prototype"!==s&&"__super__"!==s&&(i[s]=this[s])
return t.statics&&e(i,t.statics),t.includes&&(function(t){if("undefined"!=typeof L&&L&&L.Mixin){t=_(t)?t:[t]
for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(t.includes),e.apply(null,[o].concat(t.includes))),e(o,t),delete o.statics,delete o.includes,o.options&&(o.options=r.options?n(r.options):{},e(o.options,t.options)),o._initHooks=[],o.callInitHooks=function(){if(!this._initHooksCalled){r.callInitHooks&&r.callInitHooks.call(this),this._initHooksCalled=!0
for(var t=0,e=o._initHooks.length;t<e;t++)o._initHooks[t].call(this)}},i},I.include=function(t){var n=this.prototype.options
return e(this.prototype,t),t.options&&(this.prototype.options=n,this.mergeOptions(t.options)),this},I.mergeOptions=function(t){return e(this.prototype.options,t),this},I.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"==typeof t?t:function(){this[t].apply(this,e)}
return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this}
var P={on:function(t,e,n){if("object"==typeof t)for(var i in t)this._on(i,t[i],e)
else for(var r=0,o=(t=c(t)).length;r<o;r++)this._on(t[r],e,n)
return this},off:function(t,e,n){if(arguments.length)if("object"==typeof t)for(var i in t)this._off(i,t[i],e)
else{t=c(t)
for(var r=1===arguments.length,o=0,s=t.length;o<s;o++)r?this._off(t[o]):this._off(t[o],e,n)}else delete this._events
return this},_on:function(t,e,n,i){if("function"==typeof e){if(!1===this._listens(t,e,n)){n===this&&(n=void 0)
var r={fn:e,ctx:n}
i&&(r.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(r)}}else console.warn("wrong listener type: "+typeof e)},_off:function(t,e,n){var i,r,o
if(this._events&&(i=this._events[t]))if(1!==arguments.length)if("function"==typeof e){var s=this._listens(t,e,n)
if(!1!==s){var a=i[s]
this._firingCount&&(a.fn=l,this._events[t]=i=i.slice()),i.splice(s,1)}}else console.warn("wrong listener type: "+typeof e)
else{if(this._firingCount)for(r=0,o=i.length;r<o;r++)i[r].fn=l
delete this._events[t]}},fire:function(t,n,i){if(!this.listens(t,i))return this
var r=e({},n,{type:t,target:this,sourceTarget:n&&n.sourceTarget||this})
if(this._events){var o=this._events[t]
if(o){this._firingCount=this._firingCount+1||1
for(var s=0,a=o.length;s<a;s++){var l=o[s],u=l.fn
l.once&&this.off(t,u,l.ctx),u.call(l.ctx||this,r)}this._firingCount--}}return i&&this._propagateEvent(r),this},listens:function(t,e,n,i){"string"!=typeof t&&console.warn('"string" type argument expected')
var r=e
"function"!=typeof e&&(i=!!e,r=void 0,n=void 0)
var o=this._events&&this._events[t]
if(o&&o.length&&!1!==this._listens(t,r,n))return!0
if(i)for(var s in this._eventParents)if(this._eventParents[s].listens(t,e,n,i))return!0
return!1},_listens:function(t,e,n){if(!this._events)return!1
var i=this._events[t]||[]
if(!e)return!!i.length
n===this&&(n=void 0)
for(var r=0,o=i.length;r<o;r++)if(i[r].fn===e&&i[r].ctx===n)return r
return!1},once:function(t,e,n){if("object"==typeof t)for(var i in t)this._on(i,t[i],e,!0)
else for(var r=0,o=(t=c(t)).length;r<o;r++)this._on(t[r],e,n,!0)
return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[o(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[o(t)],this},_propagateEvent:function(t){for(var n in this._eventParents)this._eventParents[n].fire(t.type,e({layer:t.target,propagatedFrom:t.target},t),!0)}}
P.addEventListener=P.on,P.removeEventListener=P.clearAllEventListeners=P.off,P.addOneTimeEventListener=P.once,P.fireEvent=P.fire,P.hasEventListeners=P.listens
var A=I.extend(P)
function R(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e}var M=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)}
function O(t,e,n){return t instanceof R?t:_(t)?new R(t[0],t[1]):null==t?t:"object"==typeof t&&"x"in t&&"y"in t?new R(t.x,t.y):new R(t,e,n)}function N(t,e){if(t)for(var n=e?[t,e]:t,i=0,r=n.length;i<r;i++)this.extend(n[i])}function D(t,e){return!t||t instanceof N?t:new N(t,e)}function F(t,e){if(t)for(var n=e?[t,e]:t,i=0,r=n.length;i<r;i++)this.extend(n[i])}function k(t,e){return t instanceof F?t:new F(t,e)}function j(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")")
this.lat=+t,this.lng=+e,void 0!==n&&(this.alt=+n)}function z(t,e,n){return t instanceof j?t:_(t)&&"object"!=typeof t[0]?3===t.length?new j(t[0],t[1],t[2]):2===t.length?new j(t[0],t[1]):null:null==t?t:"object"==typeof t&&"lat"in t?new j(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new j(t,e,n)}R.prototype={clone:function(){return new R(this.x,this.y)},add:function(t){return this.clone()._add(O(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(O(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new R(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new R(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=M(this.x),this.y=M(this.y),this},distanceTo:function(t){var e=(t=O(t)).x-this.x,n=t.y-this.y
return Math.sqrt(e*e+n*n)},equals:function(t){return(t=O(t)).x===this.x&&t.y===this.y},contains:function(t){return t=O(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+u(this.x)+", "+u(this.y)+")"}},N.prototype={extend:function(t){var e,n
if(!t)return this
if(t instanceof R||"number"==typeof t[0]||"x"in t)e=n=O(t)
else if(e=(t=D(t)).min,n=t.max,!e||!n)return this
return this.min||this.max?(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(n.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(n.y,this.max.y)):(this.min=e.clone(),this.max=n.clone()),this},getCenter:function(t){return O((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return O(this.min.x,this.max.y)},getTopRight:function(){return O(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n
return(t="number"==typeof t[0]||t instanceof R?O(t):D(t))instanceof N?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=D(t)
var e=this.min,n=this.max,i=t.min,r=t.max,o=r.x>=e.x&&i.x<=n.x,s=r.y>=e.y&&i.y<=n.y
return o&&s},overlaps:function(t){t=D(t)
var e=this.min,n=this.max,i=t.min,r=t.max,o=r.x>e.x&&i.x<n.x,s=r.y>e.y&&i.y<n.y
return o&&s},isValid:function(){return!(!this.min||!this.max)},pad:function(t){var e=this.min,n=this.max,i=Math.abs(e.x-n.x)*t,r=Math.abs(e.y-n.y)*t
return D(O(e.x-i,e.y-r),O(n.x+i,n.y+r))},equals:function(t){return!!t&&(t=D(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight()))}},F.prototype={extend:function(t){var e,n,i=this._southWest,r=this._northEast
if(t instanceof j)e=t,n=t
else{if(!(t instanceof F))return t?this.extend(z(t)||k(t)):this
if(e=t._southWest,n=t._northEast,!e||!n)return this}return i||r?(i.lat=Math.min(e.lat,i.lat),i.lng=Math.min(e.lng,i.lng),r.lat=Math.max(n.lat,r.lat),r.lng=Math.max(n.lng,r.lng)):(this._southWest=new j(e.lat,e.lng),this._northEast=new j(n.lat,n.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,i=Math.abs(e.lat-n.lat)*t,r=Math.abs(e.lng-n.lng)*t
return new F(new j(e.lat-i,e.lng-r),new j(n.lat+i,n.lng+r))},getCenter:function(){return new j((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new j(this.getNorth(),this.getWest())},getSouthEast:function(){return new j(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof j||"lat"in t?z(t):k(t)
var e,n,i=this._southWest,r=this._northEast
return t instanceof F?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=i.lat&&n.lat<=r.lat&&e.lng>=i.lng&&n.lng<=r.lng},intersects:function(t){t=k(t)
var e=this._southWest,n=this._northEast,i=t.getSouthWest(),r=t.getNorthEast(),o=r.lat>=e.lat&&i.lat<=n.lat,s=r.lng>=e.lng&&i.lng<=n.lng
return o&&s},overlaps:function(t){t=k(t)
var e=this._southWest,n=this._northEast,i=t.getSouthWest(),r=t.getNorthEast(),o=r.lat>e.lat&&i.lat<n.lat,s=r.lng>e.lng&&i.lng<n.lng
return o&&s},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=k(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}},j.prototype={equals:function(t,e){return!!t&&(t=z(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+u(this.lat,t)+", "+u(this.lng,t)+")"},distanceTo:function(t){return q.distance(this,z(t))},wrap:function(){return q.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,n=e/Math.cos(Math.PI/180*this.lat)
return k([this.lat-e,this.lng-n],[this.lat+e,this.lng+n])},clone:function(){return new j(this.lat,this.lng,this.alt)}}
var G,B={latLngToPoint:function(t,e){var n=this.projection.project(t),i=this.scale(e)
return this.transformation._transform(n,i)},pointToLatLng:function(t,e){var n=this.scale(e),i=this.transformation.untransform(t,n)
return this.projection.unproject(i)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null
var e=this.projection.bounds,n=this.scale(t)
return new N(this.transformation.transform(e.min,n),this.transformation.transform(e.max,n))},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?a(t.lng,this.wrapLng,!0):t.lng
return new j(this.wrapLat?a(t.lat,this.wrapLat,!0):t.lat,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),n=this.wrapLatLng(e),i=e.lat-n.lat,r=e.lng-n.lng
if(0===i&&0===r)return t
var o=t.getSouthWest(),s=t.getNorthEast()
return new F(new j(o.lat-i,o.lng-r),new j(s.lat-i,s.lng-r))}},q=e({},B,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,i=t.lat*n,r=e.lat*n,o=Math.sin((e.lat-t.lat)*n/2),s=Math.sin((e.lng-t.lng)*n/2),a=o*o+Math.cos(i)*Math.cos(r)*s*s,l=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))
return this.R*l}}),U=6378137,Z={R:U,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,t.lat),-n),r=Math.sin(i*e)
return new R(this.R*t.lng*e,this.R*Math.log((1+r)/(1-r))/2)},unproject:function(t){var e=180/Math.PI
return new j((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:(G=U*Math.PI,new N([-G,-G],[G,G]))}
function X(t,e,n,i){if(_(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3])
this._a=t,this._b=e,this._c=n,this._d=i}function Y(t,e,n,i){return new X(t,e,n,i)}X.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new R((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}}
var V=e({},q,{code:"EPSG:3857",projection:Z,transformation:function(){var t=.5/(Math.PI*Z.R)
return Y(t,.5,-t,.5)}()}),W=e({},V,{code:"EPSG:900913"})
function H(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function $(t,e){var n,i,r,o,s,a,l=""
for(n=0,r=t.length;n<r;n++){for(i=0,o=(s=t[n]).length;i<o;i++)l+=(i?"L":"M")+(a=s[i]).x+" "+a.y
l+=e?Nt.svg?"z":"x":""}return l||"M0 0"}var K,J=document.documentElement.style,Q="ActiveXObject"in window,tt=Q&&!document.addEventListener,et="msLaunchUri"in navigator&&!("documentMode"in document),nt=Ot("webkit"),it=Ot("android"),rt=Ot("android 2")||Ot("android 3"),ot=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),st=it&&Ot("Google")&&ot<537&&!("AudioNode"in window),at=!!window.opera,lt=!et&&Ot("chrome"),ut=Ot("gecko")&&!nt&&!at&&!Q,ht=!lt&&Ot("safari"),ct=Ot("phantom"),ft="OTransition"in J,pt=0===navigator.platform.indexOf("Win"),dt=Q&&"transition"in J,gt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!rt,_t="MozPerspective"in J,mt=!window.L_DISABLE_3D&&(dt||gt||_t)&&!ft&&!ct,yt="undefined"!=typeof orientation||Ot("mobile"),vt=yt&&nt,xt=yt&&gt,bt=!window.PointerEvent&&window.MSPointerEvent,Et=!(!window.PointerEvent&&!bt),wt="ontouchstart"in window||!!window.TouchEvent,St=!window.L_NO_TOUCH&&(wt||Et),Ct=yt&&at,Tt=yt&&ut,It=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Pt=function(){var t=!1
try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}})
window.addEventListener("testPassiveEventSupport",l,e),window.removeEventListener("testPassiveEventSupport",l,e)}catch(t){}return t}(),At=!!document.createElement("canvas").getContext,Rt=!(!document.createElementNS||!H("svg").createSVGRect),Lt=!!Rt&&((K=document.createElement("div")).innerHTML="<svg/>","http://www.w3.org/2000/svg"===(K.firstChild&&K.firstChild.namespaceURI)),Mt=!Rt&&function(){try{var t=document.createElement("div")
t.innerHTML='<v:shape adj="1"/>'
var e=t.firstChild
return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(t){return!1}}()
function Ot(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var Nt={ie:Q,ielt9:tt,edge:et,webkit:nt,android:it,android23:rt,androidStock:st,opera:at,chrome:lt,gecko:ut,safari:ht,phantom:ct,opera12:ft,win:pt,ie3d:dt,webkit3d:gt,gecko3d:_t,any3d:mt,mobile:yt,mobileWebkit:vt,mobileWebkit3d:xt,msPointer:bt,pointer:Et,touch:St,touchNative:wt,mobileOpera:Ct,mobileGecko:Tt,retina:It,passiveEvents:Pt,canvas:At,svg:Rt,vml:Mt,inlineSvg:Lt,mac:0===navigator.platform.indexOf("Mac"),linux:0===navigator.platform.indexOf("Linux")},Dt=Nt.msPointer?"MSPointerDown":"pointerdown",Ft=Nt.msPointer?"MSPointerMove":"pointermove",kt=Nt.msPointer?"MSPointerUp":"pointerup",jt=Nt.msPointer?"MSPointerCancel":"pointercancel",zt={touchstart:Dt,touchmove:Ft,touchend:kt,touchcancel:jt},Gt={touchstart:function(t,e){e.MSPOINTER_TYPE_TOUCH&&e.pointerType===e.MSPOINTER_TYPE_TOUCH&&ke(e),Yt(t,e)},touchmove:Yt,touchend:Yt,touchcancel:Yt},Bt={},qt=!1
function Ut(t){Bt[t.pointerId]=t}function Zt(t){Bt[t.pointerId]&&(Bt[t.pointerId]=t)}function Xt(t){delete Bt[t.pointerId]}function Yt(t,e){if(e.pointerType!==(e.MSPOINTER_TYPE_MOUSE||"mouse")){for(var n in e.touches=[],Bt)e.touches.push(Bt[n])
e.changedTouches=[e],t(e)}}var Vt,Wt,Ht,$t,Kt,Jt=200,Qt=ge(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),te=ge(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ee="webkitTransition"===te||"OTransition"===te?te+"End":"transitionend"
function ne(t){return"string"==typeof t?document.getElementById(t):t}function ie(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e]
if((!n||"auto"===n)&&document.defaultView){var i=document.defaultView.getComputedStyle(t,null)
n=i?i[e]:null}return"auto"===n?null:n}function re(t,e,n){var i=document.createElement(t)
return i.className=e||"",n&&n.appendChild(i),i}function oe(t){var e=t.parentNode
e&&e.removeChild(t)}function se(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function ae(t){var e=t.parentNode
e&&e.lastChild!==t&&e.appendChild(t)}function le(t){var e=t.parentNode
e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function ue(t,e){if(void 0!==t.classList)return t.classList.contains(e)
var n=pe(t)
return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)}function he(t,e){if(void 0!==t.classList)for(var n=c(e),i=0,r=n.length;i<r;i++)t.classList.add(n[i])
else if(!ue(t,e)){var o=pe(t)
fe(t,(o?o+" ":"")+e)}}function ce(t,e){void 0!==t.classList?t.classList.remove(e):fe(t,h((" "+pe(t)+" ").replace(" "+e+" "," ")))}function fe(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function pe(t){return t.correspondingElement&&(t=t.correspondingElement),void 0===t.className.baseVal?t.className:t.className.baseVal}function de(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&function(t,e){var n=!1,i="DXImageTransform.Microsoft.Alpha"
try{n=t.filters.item(i)}catch(t){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+i+"(opacity="+e+")"}(t,e)}function ge(t){for(var e=document.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n]
return!1}function _e(t,e,n){var i=e||new R(0,0)
t.style[Qt]=(Nt.ie3d?"translate("+i.x+"px,"+i.y+"px)":"translate3d("+i.x+"px,"+i.y+"px,0)")+(n?" scale("+n+")":"")}function me(t,e){t._leaflet_pos=e,Nt.any3d?_e(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function ye(t){return t._leaflet_pos||new R(0,0)}if("onselectstart"in document)Vt=function(){Ie(window,"selectstart",ke)},Wt=function(){Ae(window,"selectstart",ke)}
else{var ve=ge(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"])
Vt=function(){if(ve){var t=document.documentElement.style
Ht=t[ve],t[ve]="none"}},Wt=function(){ve&&(document.documentElement.style[ve]=Ht,Ht=void 0)}}function xe(){Ie(window,"dragstart",ke)}function be(){Ae(window,"dragstart",ke)}function Ee(t){for(;-1===t.tabIndex;)t=t.parentNode
t.style&&(we(),$t=t,Kt=t.style.outlineStyle,t.style.outlineStyle="none",Ie(window,"keydown",we))}function we(){$t&&($t.style.outlineStyle=Kt,$t=void 0,Kt=void 0,Ae(window,"keydown",we))}function Se(t){do{t=t.parentNode}while(!(t.offsetWidth&&t.offsetHeight||t===document.body))
return t}function Ce(t){var e=t.getBoundingClientRect()
return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var Te={__proto__:null,TRANSFORM:Qt,TRANSITION:te,TRANSITION_END:ee,get:ne,getStyle:ie,create:re,remove:oe,empty:se,toFront:ae,toBack:le,hasClass:ue,addClass:he,removeClass:ce,setClass:fe,getClass:pe,setOpacity:de,testProp:ge,setTransform:_e,setPosition:me,getPosition:ye,get disableTextSelection(){return Vt},get enableTextSelection(){return Wt},disableImageDrag:xe,enableImageDrag:be,preventOutline:Ee,restoreOutline:we,getSizedParentNode:Se,getScale:Ce}
function Ie(t,e,n,i){if(e&&"object"==typeof e)for(var r in e)Me(t,r,e[r],n)
else for(var o=0,s=(e=c(e)).length;o<s;o++)Me(t,e[o],n,i)
return this}var Pe="_leaflet_events"
function Ae(t,e,n,i){if(1===arguments.length)Re(t),delete t[Pe]
else if(e&&"object"==typeof e)for(var r in e)Oe(t,r,e[r],n)
else if(e=c(e),2===arguments.length)Re(t,(function(t){return-1!==m(e,t)}))
else for(var o=0,s=e.length;o<s;o++)Oe(t,e[o],n,i)
return this}function Re(t,e){for(var n in t[Pe]){var i=n.split(/\d/)[0]
e&&!e(i)||Oe(t,i,null,null,n)}}var Le={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"}
function Me(t,e,n,i){var r=e+o(n)+(i?"_"+o(i):"")
if(t[Pe]&&t[Pe][r])return this
var s=function(e){return n.call(i||t,e||window.event)},a=s
!Nt.touchNative&&Nt.pointer&&0===e.indexOf("touch")?s=function(t,e,n){return"touchstart"===e&&(qt||(document.addEventListener(Dt,Ut,!0),document.addEventListener(Ft,Zt,!0),document.addEventListener(kt,Xt,!0),document.addEventListener(jt,Xt,!0),qt=!0)),Gt[e]?(n=Gt[e].bind(this,n),t.addEventListener(zt[e],n,!1),n):(console.warn("wrong event specified:",e),l)}(t,e,s):Nt.touch&&"dblclick"===e?s=function(t,e){t.addEventListener("dblclick",e)
var n,i=0
function r(t){if(1===t.detail){if("mouse"!==t.pointerType&&(!t.sourceCapabilities||t.sourceCapabilities.firesTouchEvents)){var r=ze(t)
if(!r.some((function(t){return t instanceof HTMLLabelElement&&t.attributes.for}))||r.some((function(t){return t instanceof HTMLInputElement||t instanceof HTMLSelectElement}))){var o=Date.now()
o-i<=Jt?2==++n&&e(function(t){var e,n,i={}
for(n in t)e=t[n],i[n]=e&&e.bind?e.bind(t):e
return t=i,i.type="dblclick",i.detail=2,i.isTrusted=!1,i._simulated=!0,i}(t)):n=1,i=o}}}else n=t.detail}return t.addEventListener("click",r),{dblclick:e,simDblclick:r}}(t,s):"addEventListener"in t?"touchstart"===e||"touchmove"===e||"wheel"===e||"mousewheel"===e?t.addEventListener(Le[e]||e,s,!!Nt.passiveEvents&&{passive:!1}):"mouseenter"===e||"mouseleave"===e?(s=function(e){e=e||window.event,Ue(t,e)&&a(e)},t.addEventListener(Le[e],s,!1)):t.addEventListener(e,a,!1):t.attachEvent("on"+e,s),t[Pe]=t[Pe]||{},t[Pe][r]=s}function Oe(t,e,n,i,r){r=r||e+o(n)+(i?"_"+o(i):"")
var s=t[Pe]&&t[Pe][r]
if(!s)return this
!Nt.touchNative&&Nt.pointer&&0===e.indexOf("touch")?function(t,e,n){zt[e]?t.removeEventListener(zt[e],n,!1):console.warn("wrong event specified:",e)}(t,e,s):Nt.touch&&"dblclick"===e?function(t,e){t.removeEventListener("dblclick",e.dblclick),t.removeEventListener("click",e.simDblclick)}(t,s):"removeEventListener"in t?t.removeEventListener(Le[e]||e,s,!1):t.detachEvent("on"+e,s),t[Pe][r]=null}function Ne(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function De(t){return Me(t,"wheel",Ne),this}function Fe(t){return Ie(t,"mousedown touchstart dblclick contextmenu",Ne),t._leaflet_disable_click=!0,this}function ke(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function je(t){return ke(t),Ne(t),this}function ze(t){if(t.composedPath)return t.composedPath()
for(var e=[],n=t.target;n;)e.push(n),n=n.parentNode
return e}function Ge(t,e){if(!e)return new R(t.clientX,t.clientY)
var n=Ce(e),i=n.boundingClientRect
return new R((t.clientX-i.left)/n.x-e.clientLeft,(t.clientY-i.top)/n.y-e.clientTop)}var Be=Nt.linux&&Nt.chrome?window.devicePixelRatio:Nt.mac?3*window.devicePixelRatio:window.devicePixelRatio>0?2*window.devicePixelRatio:1
function qe(t){return Nt.edge?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/Be:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}function Ue(t,e){var n=e.relatedTarget
if(!n)return!0
try{for(;n&&n!==t;)n=n.parentNode}catch(t){return!1}return n!==t}var Ze={__proto__:null,on:Ie,off:Ae,stopPropagation:Ne,disableScrollPropagation:De,disableClickPropagation:Fe,preventDefault:ke,stop:je,getPropagationPath:ze,getMousePosition:Ge,getWheelDelta:qe,isExternalTarget:Ue,addListener:Ie,removeListener:Ae},Xe=A.extend({run:function(t,e,n,i){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(i||.5,.2),this._startPos=ye(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=S(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,n=1e3*this._duration
e<n?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var n=this._startPos.add(this._offset.multiplyBy(t))
e&&n._round(),me(this._el,n),this.fire("step")},_complete:function(){C(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Ye=A.extend({options:{crs:V,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=f(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=i(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(z(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=te&&Nt.any3d&&!Nt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ie(this._proxy,ee,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,n,i){return n=void 0===n?this._zoom:this._limitZoom(n),t=this._limitCenter(z(t),n,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&!0!==i&&(void 0!==i.animate&&(i.zoom=e({animate:i.animate},i.zoom),i.pan=e({animate:i.animate,duration:i.duration},i.pan)),this._zoom!==n?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,n,i.zoom):this._tryAnimatedPan(t,i.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(t,n,i.pan&&i.pan.noMoveStart),this)},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(Nt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(Nt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,n){var i=this.getZoomScale(e),r=this.getSize().divideBy(2),o=(t instanceof R?t:this.latLngToContainerPoint(t)).subtract(r).multiplyBy(1-1/i),s=this.containerPointToLatLng(r.add(o))
return this.setView(s,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():k(t)
var n=O(e.paddingTopLeft||e.padding||[0,0]),i=O(e.paddingBottomRight||e.padding||[0,0]),r=this.getBoundsZoom(t,!1,n.add(i))
if((r="number"==typeof e.maxZoom?Math.min(e.maxZoom,r):r)===1/0)return{center:t.getCenter(),zoom:r}
var o=i.subtract(n).divideBy(2),s=this.project(t.getSouthWest(),r),a=this.project(t.getNorthEast(),r)
return{center:this.unproject(s.add(a).divideBy(2).add(o),r),zoom:r}},fitBounds:function(t,e){if(!(t=k(t)).isValid())throw new Error("Bounds are not valid.")
var n=this._getBoundsCenterZoom(t,e)
return this.setView(n.center,n.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(e=e||{},!(t=O(t).round()).x&&!t.y)return this.fire("moveend")
if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this
if(this._panAnim||(this._panAnim=new Xe,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){he(this._mapPane,"leaflet-pan-anim")
var n=this._getMapPanePos().subtract(t).round()
this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend")
return this},flyTo:function(t,e,n){if(!1===(n=n||{}).animate||!Nt.any3d)return this.setView(t,e,n)
this._stop()
var i=this.project(this.getCenter()),r=this.project(t),o=this.getSize(),s=this._zoom
t=z(t),e=void 0===e?s:e
var a=Math.max(o.x,o.y),l=a*this.getZoomScale(s,e),u=r.distanceTo(i)||1,h=1.42,c=h*h
function f(t){var e=(l*l-a*a+(t?-1:1)*c*c*u*u)/(2*(t?l:a)*c*u),n=Math.sqrt(e*e+1)-e
return n<1e-9?-18:Math.log(n)}function p(t){return(Math.exp(t)-Math.exp(-t))/2}function d(t){return(Math.exp(t)+Math.exp(-t))/2}var g=f(0)
var _=Date.now(),m=(f(1)-g)/h,y=n.duration?1e3*n.duration:1e3*m*.8
return this._moveStart(!0,n.noMoveStart),function n(){var o=(Date.now()-_)/y,l=function(t){return 1-Math.pow(1-t,1.5)}(o)*m
o<=1?(this._flyToFrame=S(n,this),this._move(this.unproject(i.add(r.subtract(i).multiplyBy(function(t){return a*(d(g)*(p(e=g+h*t)/d(e))-p(g))/c
var e}(l)/u)),s),this.getScaleZoom(a/function(t){return a*(d(g)/d(g+h*t))}(l),s),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}.call(this),this},flyToBounds:function(t,e){var n=this._getBoundsCenterZoom(t,e)
return this.flyTo(n.center,n.zoom,e)},setMaxBounds:function(t){return t=k(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var e=this.options.minZoom
return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom
return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0
var n=this.getCenter(),i=this._limitCenter(n,this._zoom,k(t))
return n.equals(i)||this.panTo(i,e),this._enforcingBounds=!1,this},panInside:function(t,e){var n=O((e=e||{}).paddingTopLeft||e.padding||[0,0]),i=O(e.paddingBottomRight||e.padding||[0,0]),r=this.project(this.getCenter()),o=this.project(t),s=this.getPixelBounds(),a=D([s.min.add(n),s.max.subtract(i)]),l=a.getSize()
if(!a.contains(o)){this._enforcingBounds=!0
var u=o.subtract(a.getCenter()),h=a.extend(o).getSize().subtract(l)
r.x+=u.x<0?-h.x:h.x,r.y+=u.y<0?-h.y:h.y,this.panTo(this.unproject(r),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this
t=e({animate:!1,pan:!0},!0===t?{animate:!0}:t)
var n=this.getSize()
this._sizeChanged=!0,this._lastCenter=null
var r=this.getSize(),o=n.divideBy(2).round(),s=r.divideBy(2).round(),a=o.subtract(s)
return a.x||a.y?(t.animate&&t.pan?this.panBy(a):(t.pan&&this._rawPanBy(a),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(i(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:n,newSize:r})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=e({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this
var n=i(this._handleGeolocationResponse,this),r=i(this._handleGeolocationError,this)
return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(n,r,t):navigator.geolocation.getCurrentPosition(n,r,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout")
this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var e=new j(t.coords.latitude,t.coords.longitude),n=e.toBounds(2*t.coords.accuracy),i=this._locateOptions
if(i.setView){var r=this.getBoundsZoom(n)
this.setView(e,i.maxZoom?Math.min(r,i.maxZoom):r)}var o={latlng:e,bounds:n,timestamp:t.timestamp}
for(var s in t.coords)"number"==typeof t.coords[s]&&(o[s]=t.coords[s])
this.fire("locationfound",o)}},addHandler:function(t,e){if(!e)return this
var n=this[t]=new e(this)
return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance")
try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}var t
for(t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),oe(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(C(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove()
for(t in this._panes)oe(this._panes[t])
return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var n=re("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),e||this._mapPane)
return t&&(this._panes[t]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds()
return new F(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=k(t),n=O(n||[0,0])
var i=this.getZoom()||0,r=this.getMinZoom(),o=this.getMaxZoom(),s=t.getNorthWest(),a=t.getSouthEast(),l=this.getSize().subtract(n),u=D(this.project(a,i),this.project(s,i)).getSize(),h=Nt.any3d?this.options.zoomSnap:1,c=l.x/u.x,f=l.y/u.y,p=e?Math.max(c,f):Math.min(c,f)
return i=this.getScaleZoom(p,i),h&&(i=Math.round(i/(h/100))*(h/100),i=e?Math.ceil(i/h)*h:Math.floor(i/h)*h),Math.max(r,Math.min(o,i))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new R(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var n=this._getTopLeftPoint(t,e)
return new N(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs
return e=void 0===e?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs
e=void 0===e?this._zoom:e
var i=n.zoom(t*n.scale(e))
return isNaN(i)?1/0:i},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(z(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(O(t),e)},layerPointToLatLng:function(t){var e=O(t).add(this.getPixelOrigin())
return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(z(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(z(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(k(t))},distance:function(t,e){return this.options.crs.distance(z(t),z(e))},containerPointToLayerPoint:function(t){return O(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return O(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(O(t))
return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(z(t)))},mouseEventToContainerPoint:function(t){return Ge(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=ne(t)
if(!e)throw new Error("Map container not found.")
if(e._leaflet_id)throw new Error("Map container is already initialized.")
Ie(e,"scroll",this._onScroll,this),this._containerId=o(e)},_initLayout:function(){var t=this._container
this._fadeAnimated=this.options.fadeAnimation&&Nt.any3d,he(t,"leaflet-container"+(Nt.touch?" leaflet-touch":"")+(Nt.retina?" leaflet-retina":"")+(Nt.ielt9?" leaflet-oldie":"")+(Nt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""))
var e=ie(t,"position")
"absolute"!==e&&"relative"!==e&&"fixed"!==e&&"sticky"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={}
this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),me(this._mapPane,new R(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(he(t.markerPane,"leaflet-zoom-hide"),he(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e,n){me(this._mapPane,new R(0,0))
var i=!this._loaded
this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset")
var r=this._zoom!==e
this._moveStart(r,n)._move(t,e)._moveEnd(r),this.fire("viewreset"),i&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,n,i){void 0===e&&(e=this._zoom)
var r=this._zoom!==e
return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),i?n&&n.pinch&&this.fire("zoom",n):((r||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return C(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){me(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[o(this._container)]=this
var e=t?Ae:Ie
e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),Nt.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){C(this._resizeRequest),this._resizeRequest=S((function(){this.invalidateSize({debounceMoveend:!0})}),this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos()
Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n,i=[],r="mouseout"===e||"mouseover"===e,s=t.target||t.srcElement,a=!1;s;){if((n=this._targets[o(s)])&&("click"===e||"preclick"===e)&&this._draggableMoved(n)){a=!0
break}if(n&&n.listens(e,!0)){if(r&&!Ue(s,t))break
if(i.push(n),r)break}if(s===this._container)break
s=s.parentNode}return i.length||a||r||!this.listens(e,!0)||(i=[this]),i},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0
t=t.parentNode}},_handleDOMEvent:function(t){var e=t.target||t.srcElement
if(!(!this._loaded||e._leaflet_disable_events||"click"===t.type&&this._isClickDisabled(e))){var n=t.type
"mousedown"===n&&Ee(e),this._fireDOMEvent(t,n)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,n,i){if("click"===t.type){var r=e({},t)
r.type="preclick",this._fireDOMEvent(r,r.type,i)}var o=this._findEventTargets(t,n)
if(i){for(var s=[],a=0;a<i.length;a++)i[a].listens(n,!0)&&s.push(i[a])
o=s.concat(o)}if(o.length){"contextmenu"===n&&ke(t)
var l=o[0],u={originalEvent:t}
if("keypress"!==t.type&&"keydown"!==t.type&&"keyup"!==t.type){var h=l.getLatLng&&(!l._radius||l._radius<=10)
u.containerPoint=h?this.latLngToContainerPoint(l.getLatLng()):this.mouseEventToContainerPoint(t),u.layerPoint=this.containerPointToLayerPoint(u.containerPoint),u.latlng=h?l.getLatLng():this.layerPointToLatLng(u.layerPoint)}for(a=0;a<o.length;a++)if(o[a].fire(n,u,!0),u.originalEvent._stopped||!1===o[a].options.bubblingMouseEvents&&-1!==m(this._mouseEvents,n))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return ye(this._mapPane)||new R(0,0)},_moved:function(){var t=this._getMapPanePos()
return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2)
return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){var i=this._getNewPixelOrigin(n,e)
return this.project(t,e)._subtract(i)},_latLngBoundsToNewLayerBounds:function(t,e,n){var i=this._getNewPixelOrigin(n,e)
return D([this.project(t.getSouthWest(),e)._subtract(i),this.project(t.getNorthWest(),e)._subtract(i),this.project(t.getSouthEast(),e)._subtract(i),this.project(t.getNorthEast(),e)._subtract(i)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t
var i=this.project(t,e),r=this.getSize().divideBy(2),o=new N(i.subtract(r),i.add(r)),s=this._getBoundsOffset(o,n,e)
return Math.abs(s.x)<=1&&Math.abs(s.y)<=1?t:this.unproject(i.add(s),e)},_limitOffset:function(t,e){if(!e)return t
var n=this.getPixelBounds(),i=new N(n.min.add(t),n.max.add(t))
return t.add(this._getBoundsOffset(i,e))},_getBoundsOffset:function(t,e,n){var i=D(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n)),r=i.min.subtract(t.min),o=i.max.subtract(t.max)
return new R(this._rebound(r.x,-o.x),this._rebound(r.y,-o.y))},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),i=Nt.any3d?this.options.zoomSnap:1
return i&&(t=Math.round(t/i)*i),Math.max(e,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ce(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._trunc()
return!(!0!==(e&&e.animate)&&!this.getSize().contains(n)||(this.panBy(n,e),0))},_createAnimProxy:function(){var t=this._proxy=re("div","leaflet-proxy leaflet-zoom-animated")
this._panes.mapPane.appendChild(t),this.on("zoomanim",(function(t){var e=Qt,n=this._proxy.style[e]
_e(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),n===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()}),this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){oe(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom()
_e(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0
if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1
var i=this.getZoomScale(e),r=this._getCenterOffset(t)._divideBy(1-1/i)
return!(!0!==n.animate&&!this.getSize().contains(r)||(S((function(){this._moveStart(!0,n.noMoveStart||!1)._animateZoom(t,e,!0)}),this),0))},_animateZoom:function(t,e,n,r){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,he(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:r}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(i(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ce(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}}),Ve=I.extend({options:{position:"topright"},initialize:function(t){f(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map
return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t
var e=this._container=this.onAdd(t),n=this.getPosition(),i=t._controlCorners[n]
return he(e,"leaflet-control"),-1!==n.indexOf("bottom")?i.insertBefore(e,i.firstChild):i.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(oe(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),We=function(t){return new Ve(t)}
Ye.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",n=this._controlContainer=re("div",e+"control-container",this._container)
function i(i,r){var o=e+i+" "+e+r
t[i+r]=re("div",o,n)}i("top","left"),i("top","right"),i("bottom","left"),i("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)oe(this._controlCorners[t])
oe(this._controlContainer),delete this._controlCorners,delete this._controlContainer}})
var He=Ve.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,n,i){return n<i?-1:i<n?1:0}},initialize:function(t,e,n){for(var i in f(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1,t)this._addLayer(t[i],i)
for(i in e)this._addLayer(e[i],i,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this)
for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this)
return this._container},addTo:function(t){return Ve.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this)
for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this)
var e=this._getLayer(o(t))
return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){he(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null
var t=this._map.getSize().y-(this._container.offsetTop+50)
return t<this._section.clientHeight?(he(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):ce(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ce(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=re("div",t),n=this.options.collapsed
e.setAttribute("aria-haspopup",!0),Fe(e),De(e)
var i=this._section=re("section",t+"-list")
n&&(this._map.on("click",this.collapse,this),Ie(e,{mouseenter:this._expandSafely,mouseleave:this.collapse},this))
var r=this._layersLink=re("a",t+"-toggle",e)
r.href="#",r.title="Layers",r.setAttribute("role","button"),Ie(r,{keydown:function(t){13===t.keyCode&&this._expandSafely()},click:function(t){ke(t),this._expandSafely()}},this),n||this.expand(),this._baseLayersList=re("div",t+"-base",i),this._separator=re("div",t+"-separator",i),this._overlaysList=re("div",t+"-overlays",i),e.appendChild(i)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&o(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,n){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:n}),this.options.sortLayers&&this._layers.sort(i((function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)}),this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this
se(this._baseLayersList),se(this._overlaysList),this._layerControlInputs=[]
var t,e,n,i,r=0
for(n=0;n<this._layers.length;n++)i=this._layers[n],this._addItem(i),e=e||i.overlay,t=t||!i.overlay,r+=i.overlay?0:1
return this.options.hideSingleBase&&(t=t&&r>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update()
var e=this._getLayer(o(t.target)),n=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null
n&&this._map.fire(n,e)},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",i=document.createElement("div")
return i.innerHTML=n,i.firstChild},_addItem:function(t){var e,n=document.createElement("label"),i=this._map.hasLayer(t.layer)
t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=i):e=this._createRadioElement("leaflet-base-layers_"+o(this),i),this._layerControlInputs.push(e),e.layerId=o(t.layer),Ie(e,"click",this._onInputClick,this)
var r=document.createElement("span")
r.innerHTML=" "+t.name
var s=document.createElement("span")
return n.appendChild(s),s.appendChild(e),s.appendChild(r),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){if(!this._preventClick){var t,e,n=this._layerControlInputs,i=[],r=[]
this._handlingClick=!0
for(var o=n.length-1;o>=0;o--)t=n[o],e=this._getLayer(t.layerId).layer,t.checked?i.push(e):t.checked||r.push(e)
for(o=0;o<r.length;o++)this._map.hasLayer(r[o])&&this._map.removeLayer(r[o])
for(o=0;o<i.length;o++)this._map.hasLayer(i[o])||this._map.addLayer(i[o])
this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t,e,n=this._layerControlInputs,i=this._map.getZoom(),r=n.length-1;r>=0;r--)t=n[r],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&i<e.options.minZoom||void 0!==e.options.maxZoom&&i>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section
this._preventClick=!0,Ie(t,"click",ke),this.expand()
var e=this
setTimeout((function(){Ae(t,"click",ke),e._preventClick=!1}))}}),$e=Ve.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=re("div",e+" leaflet-bar"),i=this.options
return this._zoomInButton=this._createButton(i.zoomInText,i.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(i.zoomOutText,i.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,i,r){var o=re("a",n,i)
return o.innerHTML=t,o.href="#",o.title=e,o.setAttribute("role","button"),o.setAttribute("aria-label",e),Fe(o),Ie(o,"click",je),Ie(o,"click",r,this),Ie(o,"click",this._refocusOnMap,this),o},_updateDisabled:function(){var t=this._map,e="leaflet-disabled"
ce(this._zoomInButton,e),ce(this._zoomOutButton,e),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(he(this._zoomOutButton,e),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(he(this._zoomInButton,e),this._zoomInButton.setAttribute("aria-disabled","true"))}})
Ye.mergeOptions({zoomControl:!0}),Ye.addInitHook((function(){this.options.zoomControl&&(this.zoomControl=new $e,this.addControl(this.zoomControl))}))
var Ke=Ve.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",n=re("div",e),i=this.options
return this._addScales(i,e+"-line",n),t.on(i.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),n},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=re("div",e,n)),t.imperial&&(this._iScale=re("div",e,n))},_update:function(){var t=this._map,e=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]))
this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),n=e<1e3?e+" m":e/1e3+" km"
this._updateScale(this._mScale,n,e/t)},_updateImperial:function(t){var e,n,i,r=3.2808399*t
r>5280?(e=r/5280,n=this._getRoundNum(e),this._updateScale(this._iScale,n+" mi",n/e)):(i=this._getRoundNum(r),this._updateScale(this._iScale,i+" ft",i/r))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e
return e*(n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}}),Je=Ve.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Nt.inlineSvg?'<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg> ':"")+"Leaflet</a>"},initialize:function(t){f(this,t),this._attributions={}},onAdd:function(t){for(var e in t.attributionControl=this,this._container=re("div","leaflet-control-attribution"),Fe(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution())
return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",(function(){this.removeAttribution(t.layer.getAttribution())}),this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[]
for(var e in this._attributions)this._attributions[e]&&t.push(e)
var n=[]
this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(' <span aria-hidden="true">|</span> ')}}})
Ye.mergeOptions({attributionControl:!0}),Ye.addInitHook((function(){this.options.attributionControl&&(new Je).addTo(this)})),Ve.Layers=He,Ve.Zoom=$e,Ve.Scale=Ke,Ve.Attribution=Je,We.layers=function(t,e,n){return new He(t,e,n)},We.zoom=function(t){return new $e(t)},We.scale=function(t){return new Ke(t)},We.attribution=function(t){return new Je(t)}
var Qe=I.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}})
Qe.addTo=function(t,e){return t.addHandler(e,this),this}
var tn={Events:P},en=Nt.touch?"touchstart mousedown":"mousedown",nn=A.extend({options:{clickTolerance:3},initialize:function(t,e,n,i){f(this,i),this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||(Ie(this._dragStartTarget,en,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(nn._dragging===this&&this.finishDrag(!0),Ae(this._dragStartTarget,en,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!ue(this._element,"leaflet-zoom-anim")))if(t.touches&&1!==t.touches.length)nn._dragging===this&&this.finishDrag()
else if(!(nn._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(nn._dragging=this,this._preventOutline&&Ee(this._element),xe(),Vt(),this._moving))){this.fire("down")
var e=t.touches?t.touches[0]:t,n=Se(this._element)
this._startPoint=new R(e.clientX,e.clientY),this._startPos=ye(this._element),this._parentScale=Ce(n)
var i="mousedown"===t.type
Ie(document,i?"mousemove":"touchmove",this._onMove,this),Ie(document,i?"mouseup":"touchend touchcancel",this._onUp,this)}},_onMove:function(t){if(this._enabled)if(t.touches&&t.touches.length>1)this._moved=!0
else{var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=new R(e.clientX,e.clientY)._subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,ke(t),this._moved||(this.fire("dragstart"),this._moved=!0,he(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),he(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,this._lastEvent=t,this._updatePosition()))}},_updatePosition:function(){var t={originalEvent:this._lastEvent}
this.fire("predrag",t),me(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){ce(document.body,"leaflet-dragging"),this._lastTarget&&(ce(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ae(document,"mousemove touchmove",this._onMove,this),Ae(document,"mouseup touchend touchcancel",this._onUp,this),be(),Wt()
var e=this._moved&&this._moving
this._moving=!1,nn._dragging=!1,e&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}})
function rn(t,e,n){var i,r,o,s,a,l,u,h,c,f=[1,4,2,8]
for(r=0,u=t.length;r<u;r++)t[r]._code=dn(t[r],e)
for(s=0;s<4;s++){for(h=f[s],i=[],r=0,o=(u=t.length)-1;r<u;o=r++)a=t[r],l=t[o],a._code&h?l._code&h||((c=pn(l,a,h,e,n))._code=dn(c,e),i.push(c)):(l._code&h&&((c=pn(l,a,h,e,n))._code=dn(c,e),i.push(c)),i.push(a))
t=i}return t}function on(t,e){var n,i,r,o,s,a,l,u,h
if(!t||0===t.length)throw new Error("latlngs not passed")
mn(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0])
var c=z([0,0]),f=k(t)
f.getNorthWest().distanceTo(f.getSouthWest())*f.getNorthEast().distanceTo(f.getNorthWest())<1700&&(c=sn(t))
var p=t.length,d=[]
for(n=0;n<p;n++){var g=z(t[n])
d.push(e.project(z([g.lat-c.lat,g.lng-c.lng])))}for(a=l=u=0,n=0,i=p-1;n<p;i=n++)r=d[n],o=d[i],s=r.y*o.x-o.y*r.x,l+=(r.x+o.x)*s,u+=(r.y+o.y)*s,a+=3*s
h=0===a?d[0]:[l/a,u/a]
var _=e.unproject(O(h))
return z([_.lat+c.lat,_.lng+c.lng])}function sn(t){for(var e=0,n=0,i=0,r=0;r<t.length;r++){var o=z(t[r])
e+=o.lat,n+=o.lng,i++}return z([e/i,n/i])}var an,ln={__proto__:null,clipPolygon:rn,polygonCenter:on,centroid:sn}
function un(t,e){if(!e||!t.length)return t.slice()
var n=e*e
return function(t,e){var n=t.length,i=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(n)
i[0]=i[n-1]=1,cn(t,i,e,0,n-1)
var r,o=[]
for(r=0;r<n;r++)i[r]&&o.push(t[r])
return o}(t=function(t,e){for(var n=[t[0]],i=1,r=0,o=t.length;i<o;i++)gn(t[i],t[r])>e&&(n.push(t[i]),r=i)
return r<o-1&&n.push(t[o-1]),n}(t,n),n)}function hn(t,e,n){return Math.sqrt(_n(t,e,n,!0))}function cn(t,e,n,i,r){var o,s,a,l=0
for(s=i+1;s<=r-1;s++)(a=_n(t[s],t[i],t[r],!0))>l&&(o=s,l=a)
l>n&&(e[o]=1,cn(t,e,n,i,o),cn(t,e,n,o,r))}function fn(t,e,n,i,r){var o,s,a,l=i?an:dn(t,n),u=dn(e,n)
for(an=u;;){if(!(l|u))return[t,e]
if(l&u)return!1
a=dn(s=pn(t,e,o=l||u,n,r),n),o===l?(t=s,l=a):(e=s,u=a)}}function pn(t,e,n,i,r){var o,s,a=e.x-t.x,l=e.y-t.y,u=i.min,h=i.max
return 8&n?(o=t.x+a*(h.y-t.y)/l,s=h.y):4&n?(o=t.x+a*(u.y-t.y)/l,s=u.y):2&n?(o=h.x,s=t.y+l*(h.x-t.x)/a):1&n&&(o=u.x,s=t.y+l*(u.x-t.x)/a),new R(o,s,r)}function dn(t,e){var n=0
return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n}function gn(t,e){var n=e.x-t.x,i=e.y-t.y
return n*n+i*i}function _n(t,e,n,i){var r,o=e.x,s=e.y,a=n.x-o,l=n.y-s,u=a*a+l*l
return u>0&&((r=((t.x-o)*a+(t.y-s)*l)/u)>1?(o=n.x,s=n.y):r>0&&(o+=a*r,s+=l*r)),a=t.x-o,l=t.y-s,i?a*a+l*l:new R(o,s)}function mn(t){return!_(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]}function yn(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),mn(t)}function vn(t,e){var n,i,r,o,s,a,l,u
if(!t||0===t.length)throw new Error("latlngs not passed")
mn(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0])
var h=z([0,0]),c=k(t)
c.getNorthWest().distanceTo(c.getSouthWest())*c.getNorthEast().distanceTo(c.getNorthWest())<1700&&(h=sn(t))
var f=t.length,p=[]
for(n=0;n<f;n++){var d=z(t[n])
p.push(e.project(z([d.lat-h.lat,d.lng-h.lng])))}for(n=0,i=0;n<f-1;n++)i+=p[n].distanceTo(p[n+1])/2
if(0===i)u=p[0]
else for(n=0,o=0;n<f-1;n++)if(s=p[n],a=p[n+1],(o+=r=s.distanceTo(a))>i){l=(o-i)/r,u=[a.x-l*(a.x-s.x),a.y-l*(a.y-s.y)]
break}var g=e.unproject(O(u))
return z([g.lat+h.lat,g.lng+h.lng])}var xn={__proto__:null,simplify:un,pointToSegmentDistance:hn,closestPointOnSegment:function(t,e,n){return _n(t,e,n)},clipSegment:fn,_getEdgeIntersection:pn,_getBitCode:dn,_sqClosestPointOnSegment:_n,isFlat:mn,_flat:yn,polylineCenter:vn},bn={project:function(t){return new R(t.lng,t.lat)},unproject:function(t){return new j(t.y,t.x)},bounds:new N([-180,-90],[180,90])},En={R:6378137,R_MINOR:6356752.314245179,bounds:new N([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,n=this.R,i=t.lat*e,r=this.R_MINOR/n,o=Math.sqrt(1-r*r),s=o*Math.sin(i),a=Math.tan(Math.PI/4-i/2)/Math.pow((1-s)/(1+s),o/2)
return i=-n*Math.log(Math.max(a,1e-10)),new R(t.lng*e*n,i)},unproject:function(t){for(var e,n=180/Math.PI,i=this.R,r=this.R_MINOR/i,o=Math.sqrt(1-r*r),s=Math.exp(-t.y/i),a=Math.PI/2-2*Math.atan(s),l=0,u=.1;l<15&&Math.abs(u)>1e-7;l++)e=o*Math.sin(a),e=Math.pow((1-e)/(1+e),o/2),a+=u=Math.PI/2-2*Math.atan(s*e)-a
return new j(a*n,t.x*n/i)}},wn={__proto__:null,LonLat:bn,Mercator:En,SphericalMercator:Z},Sn=e({},q,{code:"EPSG:3395",projection:En,transformation:function(){var t=.5/(Math.PI*En.R)
return Y(t,.5,-t,.5)}()}),Cn=e({},q,{code:"EPSG:4326",projection:bn,transformation:Y(1/180,1,-1/180,.5)}),Tn=e({},B,{projection:bn,transformation:Y(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,i=e.lat-t.lat
return Math.sqrt(n*n+i*i)},infinite:!0})
B.Earth=q,B.EPSG3395=Sn,B.EPSG3857=V,B.EPSG900913=W,B.EPSG4326=Cn,B.Simple=Tn
var In=A.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[o(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[o(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target
if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var n=this.getEvents()
e.on(n,this),this.once("remove",(function(){e.off(n,this)}),this)}this.onAdd(e),this.fire("add"),e.fire("layeradd",{layer:this})}}})
Ye.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.")
var e=o(t)
return this._layers[e]||(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t)),this},removeLayer:function(t){var e=o(t)
return this._layers[e]?(this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return o(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n])
return this},_addLayers:function(t){for(var e=0,n=(t=t?_(t)?t:[t]:[]).length;e<n;e++)this.addLayer(t[e])},_addZoomLimit:function(t){isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[o(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=o(t)
this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,n=this._getZoomSpan()
for(var i in this._zoomBoundLayers){var r=this._zoomBoundLayers[i].options
t=void 0===r.minZoom?t:Math.min(t,r.minZoom),e=void 0===r.maxZoom?e:Math.max(e,r.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}})
var Pn=In.extend({initialize:function(t,e){var n,i
if(f(this,e),this._layers={},t)for(n=0,i=t.length;n<i;n++)this.addLayer(t[n])},addLayer:function(t){var e=this.getLayerId(t)
return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t)
return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return("number"==typeof t?t:this.getLayerId(t))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,n,i=Array.prototype.slice.call(arguments,1)
for(e in this._layers)(n=this._layers[e])[t]&&n[t].apply(n,i)
return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n])
return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[]
return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return o(t)}}),An=Pn.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Pn.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Pn.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new F
for(var e in this._layers){var n=this._layers[e]
t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),Rn=I.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){f(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t)
if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).")
return null}var i=this._createImg(n,e&&"IMG"===e.tagName?e:null)
return this._setIconStyles(i,t),(this.options.crossOrigin||""===this.options.crossOrigin)&&(i.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),i},_setIconStyles:function(t,e){var n=this.options,i=n[e+"Size"]
"number"==typeof i&&(i=[i,i])
var r=O(i),o=O("shadow"===e&&n.shadowAnchor||n.iconAnchor||r&&r.divideBy(2,!0))
t.className="leaflet-marker-"+e+" "+(n.className||""),o&&(t.style.marginLeft=-o.x+"px",t.style.marginTop=-o.y+"px"),r&&(t.style.width=r.x+"px",t.style.height=r.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return Nt.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}}),Ln=Rn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return"string"!=typeof Ln.imagePath&&(Ln.imagePath=this._detectIconPath()),(this.options.imagePath||Ln.imagePath)+Rn.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var e=function(t,e,n){var i=e.exec(t)
return i&&i[n]}
return(t=e(t,/^url\((['"])?(.+)\1\)$/,2))&&e(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=re("div","leaflet-default-icon-path",document.body),e=ie(t,"background-image")||ie(t,"backgroundImage")
if(document.body.removeChild(t),e=this._stripUrl(e))return e
var n=document.querySelector('link[href$="leaflet-821d81876c8bde7940ea781cc212d03b.css"]')
return n?n.href.substring(0,n.href.length-11-1):""}}),Mn=Qe.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon
this._draggable||(this._draggable=new nn(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),he(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ce(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,n=e._map,i=this._marker.options.autoPanSpeed,r=this._marker.options.autoPanPadding,o=ye(e._icon),s=n.getPixelBounds(),a=n.getPixelOrigin(),l=D(s.min._subtract(a).add(r),s.max._subtract(a).subtract(r))
if(!l.contains(o)){var u=O((Math.max(l.max.x,o.x)-l.max.x)/(s.max.x-l.max.x)-(Math.min(l.min.x,o.x)-l.min.x)/(s.min.x-l.min.x),(Math.max(l.max.y,o.y)-l.max.y)/(s.max.y-l.max.y)-(Math.min(l.min.y,o.y)-l.min.y)/(s.min.y-l.min.y)).multiplyBy(i)
n.panBy(u,{animate:!1}),this._draggable._newPos._add(u),this._draggable._startPos._add(u),me(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=S(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(C(this._panRequest),this._panRequest=S(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,n=e._shadow,i=ye(e._icon),r=e._map.layerPointToLatLng(i)
n&&me(n,i),e._latlng=r,t.latlng=r,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){C(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),On=In.extend({options:{icon:new Ln,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){f(this,e),this._latlng=z(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng
return this._latlng=z(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round()
this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),i=!1
n!==this._icon&&(this._icon&&this._removeIcon(),i=!0,t.title&&(n.title=t.title),"IMG"===n.tagName&&(n.alt=t.alt||"")),he(n,e),t.keyboard&&(n.tabIndex="0",n.setAttribute("role","button")),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ie(n,"focus",this._panOnFocus,this)
var r=t.icon.createShadow(this._shadow),o=!1
r!==this._shadow&&(this._removeShadow(),o=!0),r&&(he(r,e),r.alt=""),this._shadow=r,t.opacity<1&&this._updateOpacity(),i&&this.getPane().appendChild(this._icon),this._initInteraction(),r&&o&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ae(this._icon,"focus",this._panOnFocus,this),oe(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&oe(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&me(this._icon,t),this._shadow&&me(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round()
this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(he(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Mn)){var t=this.options.draggable
this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Mn(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity
this._icon&&de(this._icon,t),this._shadow&&de(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map
if(t){var e=this.options.icon.options,n=e.iconSize?O(e.iconSize):O(0,0),i=e.iconAnchor?O(e.iconAnchor):O(0,0)
t.panInside(this._latlng,{paddingTopLeft:i,paddingBottomRight:n.subtract(i)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}}),Nn=In.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return f(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Dn=Nn.extend({options:{fill:!0,radius:10},initialize:function(t,e){f(this,e),this._latlng=z(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng
return this._latlng=z(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius
return Nn.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),i=[t+n,e+n]
this._pxBounds=new N(this._point.subtract(i),this._point.add(i))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}}),Fn=Dn.extend({initialize:function(t,n,i){if("number"==typeof n&&(n=e({},i,{radius:n})),f(this,n),this._latlng=z(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN")
this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius]
return new F(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Nn.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,n=this._map,i=n.options.crs
if(i.distance===q.distance){var r=Math.PI/180,o=this._mRadius/q.R/r,s=n.project([e+o,t]),a=n.project([e-o,t]),l=s.add(a).divideBy(2),u=n.unproject(l).lat,h=Math.acos((Math.cos(o*r)-Math.sin(e*r)*Math.sin(u*r))/(Math.cos(e*r)*Math.cos(u*r)))/r;(isNaN(h)||0===h)&&(h=o/Math.cos(Math.PI/180*e)),this._point=l.subtract(n.getPixelOrigin()),this._radius=isNaN(h)?0:l.x-n.project([u,t-h]).x,this._radiusY=l.y-s.y}else{var c=i.unproject(i.project(this._latlng).subtract([this._mRadius,0]))
this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(c).x}this._updateBounds()}}),kn=Nn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){f(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,n,i=1/0,r=null,o=_n,s=0,a=this._parts.length;s<a;s++)for(var l=this._parts[s],u=1,h=l.length;u<h;u++){var c=o(t,e=l[u-1],n=l[u],!0)
c<i&&(i=c,r=o(t,e,n))}return r&&(r.distance=Math.sqrt(i)),r},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()")
return vn(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=z(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new F,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return mn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=mn(t),i=0,r=t.length;i<r;i++)n?(e[i]=z(t[i]),this._bounds.extend(e[i])):e[i]=this._convertLatLngs(t[i])
return e},_project:function(){var t=new N
this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new R(t,t)
this._rawPxBounds&&(this._pxBounds=new N([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)]))},_projectLatlngs:function(t,e,n){var i,r,o=t[0]instanceof j,s=t.length
if(o){for(r=[],i=0;i<s;i++)r[i]=this._map.latLngToLayerPoint(t[i]),n.extend(r[i])
e.push(r)}else for(i=0;i<s;i++)this._projectLatlngs(t[i],e,n)},_clipPoints:function(){var t=this._renderer._bounds
if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings
else{var e,n,i,r,o,s,a,l=this._parts
for(e=0,i=0,r=this._rings.length;e<r;e++)for(n=0,o=(a=this._rings[e]).length;n<o-1;n++)(s=fn(a[n],a[n+1],t,n,!0))&&(l[i]=l[i]||[],l[i].push(s[0]),s[1]===a[n+1]&&n!==o-2||(l[i].push(s[1]),i++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,i=t.length;n<i;n++)t[n]=un(t[n],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var n,i,r,o,s,a,l=this._clickTolerance()
if(!this._pxBounds||!this._pxBounds.contains(t))return!1
for(n=0,o=this._parts.length;n<o;n++)for(i=0,r=(s=(a=this._parts[n]).length)-1;i<s;r=i++)if((e||0!==i)&&hn(t,a[r],a[i])<=l)return!0
return!1}})
kn._flat=yn
var jn=kn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()")
return on(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var e=kn.prototype._convertLatLngs.call(this,t),n=e.length
return n>=2&&e[0]instanceof j&&e[0].equals(e[n-1])&&e.pop(),e},_setLatLngs:function(t){kn.prototype._setLatLngs.call(this,t),mn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return mn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,n=new R(e,e)
if(t=new N(t.min.subtract(n),t.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings
else for(var i,r=0,o=this._rings.length;r<o;r++)(i=rn(this._rings[r],t,!0)).length&&this._parts.push(i)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,n,i,r,o,s,a,l,u=!1
if(!this._pxBounds||!this._pxBounds.contains(t))return!1
for(r=0,a=this._parts.length;r<a;r++)for(o=0,s=(l=(e=this._parts[r]).length)-1;o<l;s=o++)n=e[o],i=e[s],n.y>t.y!=i.y>t.y&&t.x<(i.x-n.x)*(t.y-n.y)/(i.y-n.y)+n.x&&(u=!u)
return u||kn.prototype._containsPoint.call(this,t,!0)}}),zn=An.extend({initialize:function(t,e){f(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,i,r=_(t)?t:t.features
if(r){for(e=0,n=r.length;e<n;e++)((i=r[e]).geometries||i.geometry||i.features||i.coordinates)&&this.addData(i)
return this}var o=this.options
if(o.filter&&!o.filter(t))return this
var s=Gn(t,o)
return s?(s.feature=Vn(t),s.defaultOptions=s.options,this.resetStyle(s),o.onEachFeature&&o.onEachFeature(t,s),this.addLayer(s)):this},resetStyle:function(t){return void 0===t?this.eachLayer(this.resetStyle,this):(t.options=e({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer((function(e){this._setLayerStyle(e,t)}),this)},_setLayerStyle:function(t,e){t.setStyle&&("function"==typeof e&&(e=e(t.feature)),t.setStyle(e))}})
function Gn(t,e){var n,i,r,o,s="Feature"===t.type?t.geometry:t,a=s?s.coordinates:null,l=[],u=e&&e.pointToLayer,h=e&&e.coordsToLatLng||qn
if(!a&&!s)return null
switch(s.type){case"Point":return Bn(u,t,n=h(a),e)
case"MultiPoint":for(r=0,o=a.length;r<o;r++)n=h(a[r]),l.push(Bn(u,t,n,e))
return new An(l)
case"LineString":case"MultiLineString":return i=Un(a,"LineString"===s.type?0:1,h),new kn(i,e)
case"Polygon":case"MultiPolygon":return i=Un(a,"Polygon"===s.type?1:2,h),new jn(i,e)
case"GeometryCollection":for(r=0,o=s.geometries.length;r<o;r++){var c=Gn({geometry:s.geometries[r],type:"Feature",properties:t.properties},e)
c&&l.push(c)}return new An(l)
case"FeatureCollection":for(r=0,o=s.features.length;r<o;r++){var f=Gn(s.features[r],e)
f&&l.push(f)}return new An(l)
default:throw new Error("Invalid GeoJSON object.")}}function Bn(t,e,n,i){return t?t(e,n):new On(n,i&&i.markersInheritOptions&&i)}function qn(t){return new j(t[1],t[0],t[2])}function Un(t,e,n){for(var i,r=[],o=0,s=t.length;o<s;o++)i=e?Un(t[o],e-1,n):(n||qn)(t[o]),r.push(i)
return r}function Zn(t,e){return void 0!==(t=z(t)).alt?[u(t.lng,e),u(t.lat,e),u(t.alt,e)]:[u(t.lng,e),u(t.lat,e)]}function Xn(t,e,n,i){for(var r=[],o=0,s=t.length;o<s;o++)r.push(e?Xn(t[o],mn(t[o])?0:e-1,n,i):Zn(t[o],i))
return!e&&n&&r.length>0&&r.push(r[0].slice()),r}function Yn(t,n){return t.feature?e({},t.feature,{geometry:n}):Vn(n)}function Vn(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}var Wn={toGeoJSON:function(t){return Yn(this,{type:"Point",coordinates:Zn(this.getLatLng(),t)})}}
function Hn(t,e){return new zn(t,e)}On.include(Wn),Fn.include(Wn),Dn.include(Wn),kn.include({toGeoJSON:function(t){var e=!mn(this._latlngs)
return Yn(this,{type:(e?"Multi":"")+"LineString",coordinates:Xn(this._latlngs,e?1:0,!1,t)})}}),jn.include({toGeoJSON:function(t){var e=!mn(this._latlngs),n=e&&!mn(this._latlngs[0]),i=Xn(this._latlngs,n?2:e?1:0,!0,t)
return e||(i=[i]),Yn(this,{type:(n?"Multi":"")+"Polygon",coordinates:i})}}),Pn.include({toMultiPoint:function(t){var e=[]
return this.eachLayer((function(n){e.push(n.toGeoJSON(t).geometry.coordinates)})),Yn(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type
if("MultiPoint"===e)return this.toMultiPoint(t)
var n="GeometryCollection"===e,i=[]
return this.eachLayer((function(e){if(e.toGeoJSON){var r=e.toGeoJSON(t)
if(n)i.push(r.geometry)
else{var o=Vn(r)
"FeatureCollection"===o.type?i.push.apply(i,o.features):i.push(o)}}})),n?Yn(this,{geometries:i,type:"GeometryCollection"}):{type:"FeatureCollection",features:i}}})
var $n=Hn,Kn=In.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,n){this._url=t,this._bounds=k(e),f(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(he(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){oe(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&ae(this._image),this},bringToBack:function(){return this._map&&le(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=k(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset}
return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:re("img")
he(e,"leaflet-image-layer"),this._zoomAnimated&&he(e,"leaflet-zoom-animated"),this.options.className&&he(e,this.options.className),e.onselectstart=l,e.onmousemove=l,e.onload=i(this.fire,this,"load"),e.onerror=i(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(e.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t?this._url=e.src:(e.src=this._url,e.alt=this.options.alt)},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min
_e(this._image,n,e)},_reset:function(){var t=this._image,e=new N(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize()
me(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){de(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error")
var t=this.options.errorOverlayUrl
t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),Jn=Kn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:re("video")
if(he(e,"leaflet-image-layer"),this._zoomAnimated&&he(e,"leaflet-zoom-animated"),this.options.className&&he(e,this.options.className),e.onselectstart=l,e.onmousemove=l,e.onloadeddata=i(this.fire,this,"load"),t){for(var n=e.getElementsByTagName("source"),r=[],o=0;o<n.length;o++)r.push(n[o].src)
this._url=n.length>0?r:[e.src]}else{_(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted,e.playsInline=!!this.options.playsInline
for(var s=0;s<this._url.length;s++){var a=re("source")
a.src=this._url[s],e.appendChild(a)}}}}),Qn=Kn.extend({_initImage:function(){var t=this._image=this._url
he(t,"leaflet-image-layer"),this._zoomAnimated&&he(t,"leaflet-zoom-animated"),this.options.className&&he(t,this.options.className),t.onselectstart=l,t.onmousemove=l}}),ti=In.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,e){t&&(t instanceof j||_(t))?(this._latlng=z(t),f(this,e)):(f(this,t),this._source=e),this.options.content&&(this._content=this.options.content)},openOn:function(t){return(t=arguments.length?t:this._source._map).hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&de(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&de(this._container,1),this.bringToFront(),this.options.interactive&&(he(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(de(this._container,0),this._removeTimeout=setTimeout(i(oe,void 0,this._container),200)):oe(this._container),this.options.interactive&&(ce(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=z(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition}
return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ae(this._container),this},bringToBack:function(){return this._map&&le(this._container),this},_prepareOpen:function(t){var e=this._source
if(!e._map)return!1
if(e instanceof An){e=null
var n=this._source._layers
for(var i in n)if(n[i]._map){e=n[i]
break}if(!e)return!1
this._source=e}if(!t)if(e.getCenter)t=e.getCenter()
else if(e.getLatLng)t=e.getLatLng()
else{if(!e.getBounds)throw new Error("Unable to get source layer LatLng.")
t=e.getBounds().getCenter()}return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content
if("string"==typeof e)t.innerHTML=e
else{for(;t.hasChildNodes();)t.removeChild(t.firstChild)
t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=O(this.options.offset),n=this._getAnchor()
this._zoomAnimated?me(this._container,t.add(n)):e=e.add(t).add(n)
var i=this._containerBottom=-e.y,r=this._containerLeft=-Math.round(this._containerWidth/2)+e.x
this._container.style.bottom=i+"px",this._container.style.left=r+"px"}},_getAnchor:function(){return[0,0]}})
Ye.include({_initOverlay:function(t,e,n,i){var r=e
return r instanceof t||(r=new t(i).setContent(e)),n&&r.setLatLng(n),r}}),In.include({_initOverlay:function(t,e,n,i){var r=n
return r instanceof t?(f(r,i),r._source=this):(r=e&&!i?e:new t(i,this)).setContent(n),r}})
var ei=ti.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return!(t=arguments.length?t:this._source._map).hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,ti.prototype.openOn.call(this,t)},onAdd:function(t){ti.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Nn||this._source.on("preclick",Ne))},onRemove:function(t){ti.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Nn||this._source.off("preclick",Ne))},getEvents:function(){var t=ti.prototype.getEvents.call(this)
return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",e=this._container=re("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=re("div",t+"-content-wrapper",e)
if(this._contentNode=re("div",t+"-content",n),Fe(e),De(this._contentNode),Ie(e,"contextmenu",Ne),this._tipContainer=re("div",t+"-tip-container",e),this._tip=re("div",t+"-tip",this._tipContainer),this.options.closeButton){var i=this._closeButton=re("a",t+"-close-button",e)
i.setAttribute("role","button"),i.setAttribute("aria-label","Close popup"),i.href="#close",i.innerHTML='<span aria-hidden="true">&#215;</span>',Ie(i,"click",(function(t){ke(t),this.close()}),this)}},_updateLayout:function(){var t=this._contentNode,e=t.style
e.width="",e.whiteSpace="nowrap"
var n=t.offsetWidth
n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height=""
var i=t.offsetHeight,r=this.options.maxHeight,o="leaflet-popup-scrolled"
r&&i>r?(e.height=r+"px",he(t,o)):ce(t,o),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor()
me(this._container,e.add(n))},_adjustPan:function(){if(this.options.autoPan)if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning)this._autopanning=!1
else{var t=this._map,e=parseInt(ie(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+e,i=this._containerWidth,r=new R(this._containerLeft,-n-this._containerBottom)
r._add(ye(this._container))
var o=t.layerPointToContainerPoint(r),s=O(this.options.autoPanPadding),a=O(this.options.autoPanPaddingTopLeft||s),l=O(this.options.autoPanPaddingBottomRight||s),u=t.getSize(),h=0,c=0
o.x+i+l.x>u.x&&(h=o.x+i-u.x+l.x),o.x-h-a.x<0&&(h=o.x-a.x),o.y+n+l.y>u.y&&(c=o.y+n-u.y+l.y),o.y-c-a.y<0&&(c=o.y-a.y),(h||c)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([h,c]))}},_getAnchor:function(){return O(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}})
Ye.mergeOptions({closePopupOnClick:!0}),Ye.include({openPopup:function(t,e,n){return this._initOverlay(ei,t,e,n).openOn(this),this},closePopup:function(t){return(t=arguments.length?t:this._popup)&&t.close(),this}}),In.include({bindPopup:function(t,e){return this._popup=this._initOverlay(ei,this._popup,t,e),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof An||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(this._popup&&this._map){je(t)
var e=t.layer||t.target
this._popup._source!==e||e instanceof Nn?(this._popup._source=e,this.openPopup(t.latlng)):this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}})
var ni=ti.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){ti.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){ti.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=ti.prototype.getEvents.call(this)
return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide")
this._contentNode=this._container=re("div",t),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+o(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,n,i=this._map,r=this._container,o=i.latLngToContainerPoint(i.getCenter()),s=i.layerPointToContainerPoint(t),a=this.options.direction,l=r.offsetWidth,u=r.offsetHeight,h=O(this.options.offset),c=this._getAnchor()
"top"===a?(e=l/2,n=u):"bottom"===a?(e=l/2,n=0):"center"===a?(e=l/2,n=u/2):"right"===a?(e=0,n=u/2):"left"===a?(e=l,n=u/2):s.x<o.x?(a="right",e=0,n=u/2):(a="left",e=l+2*(h.x+c.x),n=u/2),t=t.subtract(O(e,n,!0)).add(h).add(c),ce(r,"leaflet-tooltip-right"),ce(r,"leaflet-tooltip-left"),ce(r,"leaflet-tooltip-top"),ce(r,"leaflet-tooltip-bottom"),he(r,"leaflet-tooltip-"+a),me(r,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng)
this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&de(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center)
this._setPosition(e)},_getAnchor:function(){return O(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}})
Ye.include({openTooltip:function(t,e,n){return this._initOverlay(ni,t,e,n).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),In.include({bindTooltip:function(t,e){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ni,this._tooltip,t,e),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip}
this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,n.click=this._openTooltip,this._map?this._addFocusListeners():n.add=this._addFocusListeners),this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),this[e](n),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof An||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var e="function"==typeof t.getElement&&t.getElement()
e&&(Ie(e,"focus",(function(){this._tooltip._source=t,this.openTooltip()}),this),Ie(e,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var e="function"==typeof t.getElement&&t.getElement()
e&&e.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(this._tooltip&&this._map)if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0
var e=this
this._map.once("moveend",(function(){e._openOnceFlag=!1,e._openTooltip(t)}))}else this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e,n,i=t.latlng
this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),n=this._map.containerPointToLayerPoint(e),i=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(i)}})
var ii=Rn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),n=this.options
if(n.html instanceof Element?(se(e),e.appendChild(n.html)):e.innerHTML=!1!==n.html?n.html:"",n.bgPos){var i=O(n.bgPos)
e.style.backgroundPosition=-i.x+"px "+-i.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}})
Rn.Default=Ln
var ri=In.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Nt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){f(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),oe(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ae(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(le(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles()
var t=this._clampZoom(this._map.getZoom())
t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd}
return this.options.updateWhenIdle||(this._onMove||(this._onMove=s(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize
return t instanceof R?t:new R(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,n=this.getPane().children,i=-t(-1/0,1/0),r=0,o=n.length;r<o;r++)e=n[r].style.zIndex,n[r]!==this._container&&e&&(i=t(i,+e))
isFinite(i)&&(this.options.zIndex=i+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Nt.ielt9){de(this._container,this.options.opacity)
var t=+new Date,e=!1,n=!1
for(var i in this._tiles){var r=this._tiles[i]
if(r.current&&r.loaded){var o=Math.min(1,(t-r.loaded)/200)
de(r.el,o),o<1?e=!0:(r.active?n=!0:this._onOpaqueTile(r),r.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),e&&(C(this._fadeFrame),this._fadeFrame=S(this._updateOpacity,this))}},_onOpaqueTile:l,_initContainer:function(){this._container||(this._container=re("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom
if(void 0!==t){for(var n in this._levels)n=Number(n),this._levels[n].el.children.length||n===t?(this._levels[n].el.style.zIndex=e-Math.abs(t-n),this._onUpdateLevel(n)):(oe(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n])
var i=this._levels[t],r=this._map
return i||((i=this._levels[t]={}).el=re("div","leaflet-tile-container leaflet-zoom-animated",this._container),i.el.style.zIndex=e,i.origin=r.project(r.unproject(r.getPixelOrigin()),t).round(),i.zoom=t,this._setZoomTransform(i,r.getCenter(),r.getZoom()),i.el.offsetWidth,this._onCreateLevel(i)),this._level=i,i}},_onUpdateLevel:l,_onRemoveLevel:l,_onCreateLevel:l,_pruneTiles:function(){if(this._map){var t,e,n=this._map.getZoom()
if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles()
else{for(t in this._tiles)(e=this._tiles[t]).retain=e.current
for(t in this._tiles)if((e=this._tiles[t]).current&&!e.active){var i=e.coords
this._retainParent(i.x,i.y,i.z,i.z-5)||this._retainChildren(i.x,i.y,i.z,i.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)oe(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t]
this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,n,i){var r=Math.floor(t/2),o=Math.floor(e/2),s=n-1,a=new R(+r,+o)
a.z=+s
var l=this._tileCoordsToKey(a),u=this._tiles[l]
return u&&u.active?(u.retain=!0,!0):(u&&u.loaded&&(u.retain=!0),s>i&&this._retainParent(r,o,s,i))},_retainChildren:function(t,e,n,i){for(var r=2*t;r<2*t+2;r++)for(var o=2*e;o<2*e+2;o++){var s=new R(r,o)
s.z=n+1
var a=this._tileCoordsToKey(s),l=this._tiles[a]
l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),n+1<i&&this._retainChildren(r,o,n+1,i))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo)
this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options
return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,n,i){var r=Math.round(e)
r=void 0!==this.options.maxZoom&&r>this.options.maxZoom||void 0!==this.options.minZoom&&r<this.options.minZoom?void 0:this._clampZoom(r)
var o=this.options.updateWhenZooming&&r!==this._tileZoom
i&&!o||(this._tileZoom=r,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==r&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var i=this._map.getZoomScale(n,t.zoom),r=t.origin.multiplyBy(i).subtract(this._map._getNewPixelOrigin(e,n)).round()
Nt.any3d?_e(t.el,r,i):me(t.el,r)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),i=this._tileZoom,r=this._map.getPixelWorldBounds(this._tileZoom)
r&&(this._globalTileRange=this._pxBoundsToTileRange(r)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],i).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],i).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],i).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],i).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),i=e.getZoomScale(n,this._tileZoom),r=e.project(t,this._tileZoom).floor(),o=e.getSize().divideBy(2*i)
return new N(r.subtract(o),r.add(o))},_update:function(t){var e=this._map
if(e){var n=this._clampZoom(e.getZoom())
if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var i=this._getTiledPixelBounds(t),r=this._pxBoundsToTileRange(i),o=r.getCenter(),s=[],a=this.options.keepBuffer,l=new N(r.getBottomLeft().subtract([a,-a]),r.getTopRight().add([a,-a]))
if(!(isFinite(r.min.x)&&isFinite(r.min.y)&&isFinite(r.max.x)&&isFinite(r.max.y)))throw new Error("Attempted to load an infinite number of tiles")
for(var u in this._tiles){var h=this._tiles[u].coords
h.z===this._tileZoom&&l.contains(new R(h.x,h.y))||(this._tiles[u].current=!1)}if(Math.abs(n-this._tileZoom)>1)this._setView(t,n)
else{for(var c=r.min.y;c<=r.max.y;c++)for(var f=r.min.x;f<=r.max.x;f++){var p=new R(f,c)
if(p.z=this._tileZoom,this._isValidTile(p)){var d=this._tiles[this._tileCoordsToKey(p)]
d?d.current=!0:s.push(p)}}if(s.sort((function(t,e){return t.distanceTo(o)-e.distanceTo(o)})),0!==s.length){this._loading||(this._loading=!0,this.fire("loading"))
var g=document.createDocumentFragment()
for(f=0;f<s.length;f++)this._addTile(s[f],g)
this._level.el.appendChild(g)}}}}},_isValidTile:function(t){var e=this._map.options.crs
if(!e.infinite){var n=this._globalTileRange
if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0
var i=this._tileCoordsToBounds(t)
return k(this.options.bounds).overlaps(i)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,n=this.getTileSize(),i=t.scaleBy(n),r=i.add(n)
return[e.unproject(i,t.z),e.unproject(r,t.z)]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),n=new F(e[0],e[1])
return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),n=new R(+e[0],+e[1])
return n.z=+e[2],n},_removeTile:function(t){var e=this._tiles[t]
e&&(oe(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){he(t,"leaflet-tile")
var e=this.getTileSize()
t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=l,t.onmousemove=l,Nt.ielt9&&this.options.opacity<1&&de(t,this.options.opacity)},_addTile:function(t,e){var n=this._getTilePos(t),r=this._tileCoordsToKey(t),o=this.createTile(this._wrapCoords(t),i(this._tileReady,this,t))
this._initTile(o),this.createTile.length<2&&S(i(this._tileReady,this,t,null,o)),me(o,n),this._tiles[r]={el:o,coords:t,current:!0},e.appendChild(o),this.fire("tileloadstart",{tile:o,coords:t})},_tileReady:function(t,e,n){e&&this.fire("tileerror",{error:e,tile:n,coords:t})
var r=this._tileCoordsToKey(t);(n=this._tiles[r])&&(n.loaded=+new Date,this._map._fadeAnimated?(de(n.el,0),C(this._fadeFrame),this._fadeFrame=S(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),e||(he(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Nt.ielt9||!this._map._fadeAnimated?S(this._pruneTiles,this):setTimeout(i(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new R(this._wrapX?a(t.x,this._wrapX):t.x,this._wrapY?a(t.y,this._wrapY):t.y)
return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize()
return new N(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1
return!0}}),oi=ri.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,e){this._url=t,(e=f(this,e)).detectRetina&&Nt.retina&&e.maxZoom>0?(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom=Math.min(e.maxZoom,e.minZoom+1)):(e.zoomOffset++,e.maxZoom=Math.max(e.minZoom,e.maxZoom-1)),e.minZoom=Math.max(0,e.minZoom)):e.zoomReverse?e.minZoom=Math.min(e.maxZoom,e.minZoom):e.maxZoom=Math.max(e.minZoom,e.maxZoom),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&void 0===e&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var n=document.createElement("img")
return Ie(n,"load",i(this._tileOnLoad,this,e,n)),Ie(n,"error",i(this._tileOnError,this,e,n)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),"string"==typeof this.options.referrerPolicy&&(n.referrerPolicy=this.options.referrerPolicy),n.alt="",n.src=this.getTileUrl(t),n},getTileUrl:function(t){var n={r:Nt.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()}
if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-t.y
this.options.tms&&(n.y=i),n["-y"]=i}return g(this._url,e(n,this.options))},_tileOnLoad:function(t,e){Nt.ielt9?setTimeout(i(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var i=this.options.errorTileUrl
i&&e.getAttribute("src")!==i&&(e.src=i),t(n,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom
return this.options.zoomReverse&&(t=e-t),t+this.options.zoomOffset},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length
return this.options.subdomains[e]},_abortLoading:function(){var t,e
for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=l,e.onerror=l,!e.complete)){e.src=y
var n=this._tiles[t].coords
oe(e),delete this._tiles[t],this.fire("tileabort",{tile:e,coords:n})}},_removeTile:function(t){var e=this._tiles[t]
if(e)return e.el.setAttribute("src",y),ri.prototype._removeTile.call(this,t)},_tileReady:function(t,e,n){if(this._map&&(!n||n.getAttribute("src")!==y))return ri.prototype._tileReady.call(this,t,e,n)}})
function si(t,e){return new oi(t,e)}var ai=oi.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,n){this._url=t
var i=e({},this.defaultWmsParams)
for(var r in n)r in this.options||(i[r]=n[r])
var o=(n=f(this,n)).detectRetina&&Nt.retina?2:1,s=this.getTileSize()
i.width=s.x*o,i.height=s.y*o,this.wmsParams=i},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version)
var e=this._wmsVersion>=1.3?"crs":"srs"
this.wmsParams[e]=this._crs.code,oi.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),n=this._crs,i=D(n.project(e[0]),n.project(e[1])),r=i.min,o=i.max,s=(this._wmsVersion>=1.3&&this._crs===Cn?[r.y,r.x,o.y,o.x]:[r.x,r.y,o.x,o.y]).join(","),a=oi.prototype.getTileUrl.call(this,t)
return a+p(this.wmsParams,a,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+s},setParams:function(t,n){return e(this.wmsParams,t),n||this.redraw(),this}})
oi.WMS=ai,si.wms=function(t,e){return new ai(t,e)}
var li=In.extend({options:{padding:.1},initialize:function(t){f(this,t),o(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),he(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd}
return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),i=this._map.getSize().multiplyBy(.5+this.options.padding),r=this._map.project(this._center,e),o=i.multiplyBy(-n).add(r).subtract(this._map._getNewPixelOrigin(t,e))
Nt.any3d?_e(this._container,o,n):me(this._container,o)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round()
this._bounds=new N(n,n.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ui=li.extend({options:{tolerance:0},getEvents:function(){var t=li.prototype.getEvents.call(this)
return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){li.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas")
Ie(t,"mousemove",this._onMouseMove,this),Ie(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ie(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){C(this._redrawRequest),delete this._ctx,oe(this._container),Ae(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update()
this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){li.prototype._update.call(this)
var t=this._bounds,e=this._container,n=t.getSize(),i=Nt.retina?2:1
me(e,t.min),e.width=i*n.x,e.height=i*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",Nt.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){li.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[o(t)]=t
var e=t._order={layer:t,prev:this._drawLast,next:null}
this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,n=e.next,i=e.prev
n?n.prev=i:this._drawLast=i,i?i.next=n:this._drawFirst=n,delete t._order,delete this._layers[o(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if("string"==typeof t.options.dashArray){var e,n,i=t.options.dashArray.split(/[, ]+/),r=[]
for(n=0;n<i.length;n++){if(e=Number(i[n]),isNaN(e))return
r.push(e)}t.options._dashArray=r}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||S(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1
this._redrawBounds=this._redrawBounds||new N,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds
if(t){var e=t.getSize()
this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,e=this._redrawBounds
if(this._ctx.save(),e){var n=e.getSize()
this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0
for(var i=this._drawFirst;i;i=i.next)t=i.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath()
this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var n,i,r,o,s=t._parts,a=s.length,l=this._ctx
if(a){for(l.beginPath(),n=0;n<a;n++){for(i=0,r=s[n].length;i<r;i++)o=s[n][i],l[i?"lineTo":"moveTo"](o.x,o.y)
e&&l.closePath()}this._fillStroke(l,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,n=this._ctx,i=Math.max(Math.round(t._radius),1),r=(Math.max(Math.round(t._radiusY),1)||i)/i
1!==r&&(n.save(),n.scale(1,r)),n.beginPath(),n.arc(e.x,e.y/r,i,0,2*Math.PI,!1),1!==r&&n.restore(),this._fillStroke(n,t)}},_fillStroke:function(t,e){var n=e.options
n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var e,n,i=this._map.mouseEventToLayerPoint(t),r=this._drawFirst;r;r=r.next)(e=r.layer).options.interactive&&e._containsPoint(i)&&("click"!==t.type&&"preclick"!==t.type||!this._map._draggableMoved(e))&&(n=e)
this._fireEvent(!!n&&[n],t)},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t)
this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer
e&&(ce(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var n,r,o=this._drawFirst;o;o=o.next)(n=o.layer).options.interactive&&n._containsPoint(e)&&(r=n)
r!==this._hoveredLayer&&(this._handleMouseOut(t),r&&(he(this._container,"leaflet-interactive"),this._fireEvent([r],t,"mouseover"),this._hoveredLayer=r)),this._fireEvent(!!this._hoveredLayer&&[this._hoveredLayer],t),this._mouseHoverThrottled=!0,setTimeout(i((function(){this._mouseHoverThrottled=!1}),this),32)}},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:function(t){var e=t._order
if(e){var n=e.next,i=e.prev
n&&(n.prev=i,i?i.next=n:n&&(this._drawFirst=n),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t))}},_bringToBack:function(t){var e=t._order
if(e){var n=e.next,i=e.prev
i&&(i.next=n,n?n.prev=i:i&&(this._drawLast=i),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}}})
function hi(t){return Nt.canvas?new ui(t):null}var ci=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),fi={_initContainer:function(){this._container=re("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(li.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=ci("shape")
he(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=ci("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[o(t)]=t},_addPath:function(t){var e=t._container
this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container
oe(e),t.removeInteractiveTarget(e),delete this._layers[o(t)]},_updateStyle:function(t){var e=t._stroke,n=t._fill,i=t.options,r=t._container
r.stroked=!!i.stroke,r.filled=!!i.fill,i.stroke?(e||(e=t._stroke=ci("stroke")),r.appendChild(e),e.weight=i.weight+"px",e.color=i.color,e.opacity=i.opacity,i.dashArray?e.dashStyle=_(i.dashArray)?i.dashArray.join(" "):i.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=i.lineCap.replace("butt","flat"),e.joinstyle=i.lineJoin):e&&(r.removeChild(e),t._stroke=null),i.fill?(n||(n=t._fill=ci("fill")),r.appendChild(n),n.color=i.fillColor||i.color,n.opacity=i.fillOpacity):n&&(r.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),i=Math.round(t._radiusY||n)
this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+i+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){ae(t._container)},_bringToBack:function(t){le(t._container)}},pi=Nt.vml?ci:H,di=li.extend({_initContainer:function(){this._container=pi("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=pi("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){oe(this._container),Ae(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!this._map._animatingZoom||!this._bounds){li.prototype._update.call(this)
var t=this._bounds,e=t.getSize(),n=this._container
this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),me(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=pi("path")
t.options.className&&he(e,t.options.className),t.options.interactive&&he(e,"leaflet-interactive"),this._updateStyle(t),this._layers[o(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){oe(t._path),t.removeInteractiveTarget(t._path),delete this._layers[o(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,n=t.options
e&&(n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",n.weight),e.setAttribute("stroke-linecap",n.lineCap),e.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?e.setAttribute("stroke-dasharray",n.dashArray):e.removeAttribute("stroke-dasharray"),n.dashOffset?e.setAttribute("stroke-dashoffset",n.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity),e.setAttribute("fill-rule",n.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,$(t._parts,e))},_updateCircle:function(t){var e=t._point,n=Math.max(Math.round(t._radius),1),i="a"+n+","+(Math.max(Math.round(t._radiusY),1)||n)+" 0 1,0 ",r=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+i+2*n+",0 "+i+2*-n+",0 "
this._setPath(t,r)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){ae(t._path)},_bringToBack:function(t){le(t._path)}})
function gi(t){return Nt.svg||Nt.vml?new di(t):null}Nt.vml&&di.include(fi),Ye.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer
return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1
var e=this._paneRenderers[t]
return void 0===e&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&hi(t)||gi(t)}})
var _i=jn.extend({initialize:function(t,e){jn.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=k(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}})
di.create=pi,di.pointsToPath=$,zn.geometryToLayer=Gn,zn.coordsToLatLng=qn,zn.coordsToLatLngs=Un,zn.latLngToCoords=Zn,zn.latLngsToCoords=Xn,zn.getFeature=Yn,zn.asFeature=Vn,Ye.mergeOptions({boxZoom:!0})
var mi=Qe.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){Ie(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ae(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){oe(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1
this._clearDeferredResetState(),this._resetState(),Vt(),xe(),this._startPoint=this._map.mouseEventToContainerPoint(t),Ie(document,{contextmenu:je,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=re("div","leaflet-zoom-box",this._container),he(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t)
var e=new N(this._point,this._startPoint),n=e.getSize()
me(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(oe(this._box),ce(this._container,"leaflet-crosshair")),Wt(),be(),Ae(document,{contextmenu:je,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(i(this._resetState,this),0)
var e=new F(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point))
this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&(this._finish(),this._clearDeferredResetState(),this._resetState())}})
Ye.addInitHook("addHandler","boxZoom",mi),Ye.mergeOptions({doubleClickZoom:!0})
var yi=Qe.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),i=e.options.zoomDelta,r=t.originalEvent.shiftKey?n-i:n+i
"center"===e.options.doubleClickZoom?e.setZoom(r):e.setZoomAround(t.containerPoint,r)}})
Ye.addInitHook("addHandler","doubleClickZoom",yi),Ye.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0})
var vi=Qe.extend({addHooks:function(){if(!this._draggable){var t=this._map
this._draggable=new nn(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}he(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ce(this._map._container,"leaflet-grab"),ce(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map
if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=k(this._map.options.maxBounds)
this._offsetLimit=D(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null
t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos
this._positions.push(n),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0])
this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit
t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,i=this._draggable._newPos.x,r=(i-e+n)%t+e-n,o=(i+e+n)%t-e-n,s=Math.abs(r+n)<Math.abs(o+n)?r:o
this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=s},_onDragEnd:function(t){var e=this._map,n=e.options,i=!n.inertia||t.noInertia||this._times.length<2
if(e.fire("dragend",t),i)e.fire("moveend")
else{this._prunePositions(+new Date)
var r=this._lastPos.subtract(this._positions[0]),o=(this._lastTime-this._times[0])/1e3,s=n.easeLinearity,a=r.multiplyBy(s/o),l=a.distanceTo([0,0]),u=Math.min(n.inertiaMaxSpeed,l),h=a.multiplyBy(u/l),c=u/(n.inertiaDeceleration*s),f=h.multiplyBy(-c/2).round()
f.x||f.y?(f=e._limitOffset(f,e.options.maxBounds),S((function(){e.panBy(f,{duration:c,easeLinearity:s,noMoveStart:!0,animate:!0})}))):e.fire("moveend")}}})
Ye.addInitHook("addHandler","dragging",vi),Ye.mergeOptions({keyboard:!0,keyboardPanDelta:80})
var xi=Qe.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container
t.tabIndex<=0&&(t.tabIndex="0"),Ie(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ae(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,n=t.scrollTop||e.scrollTop,i=t.scrollLeft||e.scrollLeft
this._map._container.focus(),window.scrollTo(i,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,n,i=this._panKeys={},r=this.keyCodes
for(e=0,n=r.left.length;e<n;e++)i[r.left[e]]=[-1*t,0]
for(e=0,n=r.right.length;e<n;e++)i[r.right[e]]=[t,0]
for(e=0,n=r.down.length;e<n;e++)i[r.down[e]]=[0,t]
for(e=0,n=r.up.length;e<n;e++)i[r.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,n,i=this._zoomKeys={},r=this.keyCodes
for(e=0,n=r.zoomIn.length;e<n;e++)i[r.zoomIn[e]]=t
for(e=0,n=r.zoomOut.length;e<n;e++)i[r.zoomOut[e]]=-t},_addHooks:function(){Ie(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ae(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,n=t.keyCode,i=this._map
if(n in this._panKeys){if(!i._panAnim||!i._panAnim._inProgress)if(e=this._panKeys[n],t.shiftKey&&(e=O(e).multiplyBy(3)),i.options.maxBounds&&(e=i._limitOffset(O(e),i.options.maxBounds)),i.options.worldCopyJump){var r=i.wrapLatLng(i.unproject(i.project(i.getCenter()).add(e)))
i.panTo(r)}else i.panBy(e)}else if(n in this._zoomKeys)i.setZoom(i.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[n])
else{if(27!==n||!i._popup||!i._popup.options.closeOnEscapeKey)return
i.closePopup()}je(t)}}})
Ye.addInitHook("addHandler","keyboard",xi),Ye.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60})
var bi=Qe.extend({addHooks:function(){Ie(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ae(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=qe(t),n=this._map.options.wheelDebounceTime
this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date)
var r=Math.max(n-(+new Date-this._startTime),0)
clearTimeout(this._timer),this._timer=setTimeout(i(this._performZoom,this),r),je(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0
t._stop()
var i=this._delta/(4*this._map.options.wheelPxPerZoomLevel),r=4*Math.log(2/(1+Math.exp(-Math.abs(i))))/Math.LN2,o=n?Math.ceil(r/n)*n:r,s=t._limitZoom(e+(this._delta>0?o:-o))-e
this._delta=0,this._startTime=null,s&&("center"===t.options.scrollWheelZoom?t.setZoom(e+s):t.setZoomAround(this._lastMousePos,e+s))}})
Ye.addInitHook("addHandler","scrollWheelZoom",bi),Ye.mergeOptions({tapHold:Nt.touchNative&&Nt.safari&&Nt.mobile,tapTolerance:15})
var Ei=Qe.extend({addHooks:function(){Ie(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ae(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),1===t.touches.length){var e=t.touches[0]
this._startPos=this._newPos=new R(e.clientX,e.clientY),this._holdTimeout=setTimeout(i((function(){this._cancel(),this._isTapValid()&&(Ie(document,"touchend",ke),Ie(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",e))}),this),600),Ie(document,"touchend touchcancel contextmenu",this._cancel,this),Ie(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){Ae(document,"touchend",ke),Ae(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),Ae(document,"touchend touchcancel contextmenu",this._cancel,this),Ae(document,"touchmove",this._onMove,this)},_onMove:function(t){var e=t.touches[0]
this._newPos=new R(e.clientX,e.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,e){var n=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY})
n._simulated=!0,e.target.dispatchEvent(n)}})
Ye.addInitHook("addHandler","tapHold",Ei),Ye.mergeOptions({touchZoom:Nt.touch,bounceAtZoomLimits:!0})
var wi=Qe.extend({addHooks:function(){he(this._map._container,"leaflet-touch-zoom"),Ie(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ce(this._map._container,"leaflet-touch-zoom"),Ae(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map
if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var n=e.mouseEventToContainerPoint(t.touches[0]),i=e.mouseEventToContainerPoint(t.touches[1])
this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(i)._divideBy(2))),this._startDist=n.distanceTo(i),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),Ie(document,"touchmove",this._onTouchMove,this),Ie(document,"touchend touchcancel",this._onTouchEnd,this),ke(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,n=e.mouseEventToContainerPoint(t.touches[0]),r=e.mouseEventToContainerPoint(t.touches[1]),o=n.distanceTo(r)/this._startDist
if(this._zoom=e.getScaleZoom(o,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&o<1||this._zoom>e.getMaxZoom()&&o>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===o)return}else{var s=n._add(r)._divideBy(2)._subtract(this._centerPoint)
if(1===o&&0===s.x&&0===s.y)return
this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(s),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),C(this._animRequest)
var a=i(e._move,e,this._center,this._zoom,{pinch:!0,round:!1},void 0)
this._animRequest=S(a,this,!0),ke(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,C(this._animRequest),Ae(document,"touchmove",this._onTouchMove,this),Ae(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}})
Ye.addInitHook("addHandler","touchZoom",wi),Ye.BoxZoom=mi,Ye.DoubleClickZoom=yi,Ye.Drag=vi,Ye.Keyboard=xi,Ye.ScrollWheelZoom=bi,Ye.TapHold=Ei,Ye.TouchZoom=wi,t.Bounds=N,t.Browser=Nt,t.CRS=B,t.Canvas=ui,t.Circle=Fn,t.CircleMarker=Dn,t.Class=I,t.Control=Ve,t.DivIcon=ii,t.DivOverlay=ti,t.DomEvent=Ze,t.DomUtil=Te,t.Draggable=nn,t.Evented=A,t.FeatureGroup=An,t.GeoJSON=zn,t.GridLayer=ri,t.Handler=Qe,t.Icon=Rn,t.ImageOverlay=Kn,t.LatLng=j,t.LatLngBounds=F,t.Layer=In,t.LayerGroup=Pn,t.LineUtil=xn,t.Map=Ye,t.Marker=On,t.Mixin=tn,t.Path=Nn,t.Point=R,t.PolyUtil=ln,t.Polygon=jn,t.Polyline=kn,t.Popup=ei,t.PosAnimation=Xe,t.Projection=wn,t.Rectangle=_i,t.Renderer=li,t.SVG=di,t.SVGOverlay=Qn,t.TileLayer=oi,t.Tooltip=ni,t.Transformation=X,t.Util=T,t.VideoOverlay=Jn,t.bind=i,t.bounds=D,t.canvas=hi,t.circle=function(t,e,n){return new Fn(t,e,n)},t.circleMarker=function(t,e){return new Dn(t,e)},t.control=We,t.divIcon=function(t){return new ii(t)},t.extend=e,t.featureGroup=function(t,e){return new An(t,e)},t.geoJSON=Hn,t.geoJson=$n,t.gridLayer=function(t){return new ri(t)},t.icon=function(t){return new Rn(t)},t.imageOverlay=function(t,e,n){return new Kn(t,e,n)},t.latLng=z,t.latLngBounds=k,t.layerGroup=function(t,e){return new Pn(t,e)},t.map=function(t,e){return new Ye(t,e)},t.marker=function(t,e){return new On(t,e)},t.point=O,t.polygon=function(t,e){return new jn(t,e)},t.polyline=function(t,e){return new kn(t,e)},t.popup=function(t,e){return new ei(t,e)},t.rectangle=function(t,e){return new _i(t,e)},t.setOptions=f,t.stamp=o,t.svg=gi,t.svgOverlay=function(t,e,n){return new Qn(t,e,n)},t.tileLayer=si,t.tooltip=function(t,e){return new ni(t,e)},t.transformation=Y,t.version="1.9.4",t.videoOverlay=function(t,e,n){return new Jn(t,e,n)}
var Si=window.L
t.noConflict=function(){return window.L=Si,this},window.L=t}(e)},8017:t=>{"use strict"
var e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable
t.exports=function(){try{if(!Object.assign)return!1
var t=new String("abc")
if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1
for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n
if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1
var i={}
return"abcdefghijklmnopqrst".split("").forEach((function(t){i[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(t){return!1}}()?Object.assign:function(t,r){for(var o,s,a=function(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined")
return Object(t)}(t),l=1;l<arguments.length;l++){for(var u in o=Object(arguments[l]))n.call(o,u)&&(a[u]=o[u])
if(e){s=e(o)
for(var h=0;h<s.length;h++)i.call(o,s[h])&&(a[s[h]]=o[s[h]])}}return a}},5839:t=>{"use strict"
var e=function(t){return t!=t}
t.exports=function(t,n){return 0===t&&0===n?1/t==1/n:t===n||!(!e(t)||!e(n))}},473:(t,e,n)=>{"use strict"
var i=n(5967),r=n(4649),o=n(5839),s=n(4654),a=n(5996),l=r(s(),Object)
i(l,{getPolyfill:s,implementation:o,shim:a}),t.exports=l},4654:(t,e,n)=>{"use strict"
var i=n(5839)
t.exports=function(){return"function"==typeof Object.is?Object.is:i}},5996:(t,e,n)=>{"use strict"
var i=n(4654),r=n(5967)
t.exports=function(){var t=i()
return r(Object,{is:t},{is:function(){return Object.is!==t}}),t}},2914:(t,e,n)=>{"use strict"
var i
if(!Object.keys){var r=Object.prototype.hasOwnProperty,o=Object.prototype.toString,s=n(6710),a=Object.prototype.propertyIsEnumerable,l=!a.call({toString:null},"toString"),u=a.call((function(){}),"prototype"),h=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],c=function(t){var e=t.constructor
return e&&e.prototype===t},f={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},p=function(){if("undefined"==typeof window)return!1
for(var t in window)try{if(!f["$"+t]&&r.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{c(window[t])}catch(t){return!0}}catch(t){return!0}return!1}()
i=function(t){var e=null!==t&&"object"==typeof t,n="[object Function]"===o.call(t),i=s(t),a=e&&"[object String]"===o.call(t),f=[]
if(!e&&!n&&!i)throw new TypeError("Object.keys called on a non-object")
var d=u&&n
if(a&&t.length>0&&!r.call(t,0))for(var g=0;g<t.length;++g)f.push(String(g))
if(i&&t.length>0)for(var _=0;_<t.length;++_)f.push(String(_))
else for(var m in t)d&&"prototype"===m||!r.call(t,m)||f.push(String(m))
if(l)for(var y=function(t){if("undefined"==typeof window||!p)return c(t)
try{return c(t)}catch(t){return!1}}(t),v=0;v<h.length;++v)y&&"constructor"===h[v]||!r.call(t,h[v])||f.push(h[v])
return f}}t.exports=i},1802:(t,e,n)=>{"use strict"
var i=Array.prototype.slice,r=n(6710),o=Object.keys,s=o?function(t){return o(t)}:n(2914),a=Object.keys
s.shim=function(){if(Object.keys){var t=function(){var t=Object.keys(arguments)
return t&&t.length===arguments.length}(1,2)
t||(Object.keys=function(t){return r(t)?a(i.call(t)):a(t)})}else Object.keys=s
return Object.keys||s},t.exports=s},6710:t=>{"use strict"
var e=Object.prototype.toString
t.exports=function(t){var n=e.call(t),i="[object Arguments]"===n
return i||(i="[object Array]"!==n&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===e.call(t.callee)),i}},9748:t=>{t.exports=function(t,e,n,i){var r=t[0],o=t[1],s=!1
void 0===n&&(n=0),void 0===i&&(i=e.length)
for(var a=(i-n)/2,l=0,u=a-1;l<a;u=l++){var h=e[n+2*l+0],c=e[n+2*l+1],f=e[n+2*u+0],p=e[n+2*u+1]
c>o!=p>o&&r<(f-h)*(o-c)/(p-c)+h&&(s=!s)}return s}},7267:(t,e,n)=>{var i=n(9748),r=n(6728)
t.exports=function(t,e,n,o){return e.length>0&&Array.isArray(e[0])?r(t,e,n,o):i(t,e,n,o)},t.exports.nested=r,t.exports.flat=i},6728:t=>{t.exports=function(t,e,n,i){var r=t[0],o=t[1],s=!1
void 0===n&&(n=0),void 0===i&&(i=e.length)
for(var a=i-n,l=0,u=a-1;l<a;u=l++){var h=e[l+n][0],c=e[l+n][1],f=e[u+n][0],p=e[u+n][1]
c>o!=p>o&&r<(f-h)*(o-c)/(p-c)+h&&(s=!s)}return s}},6638:function(t){t.exports=function(){"use strict"
var t=function(t,e){this.next=null,this.key=t,this.data=e,this.left=null,this.right=null}
function e(t,e){return t>e?1:t<e?-1:0}function n(e,n,i){for(var r=new t(null,null),o=r,s=r;;){var a=i(e,n.key)
if(a<0){if(null===n.left)break
if(i(e,n.left.key)<0){var l=n.left
if(n.left=l.right,l.right=n,null===(n=l).left)break}s.left=n,s=n,n=n.left}else{if(!(a>0))break
if(null===n.right)break
if(i(e,n.right.key)>0&&(l=n.right,n.right=l.left,l.left=n,null===(n=l).right))break
o.right=n,o=n,n=n.right}}return o.right=n.left,s.left=n.right,n.left=r.right,n.right=r.left,n}function i(e,i,r,o){var s=new t(e,i)
if(null===r)return s.left=s.right=null,s
var a=o(e,(r=n(e,r,o)).key)
return a<0?(s.left=r.left,s.right=r,r.left=null):a>=0&&(s.right=r.right,s.left=r,r.right=null),s}function r(t,e,i){var r=null,o=null
if(e){var s=i((e=n(t,e,i)).key,t)
0===s?(r=e.left,o=e.right):s<0?(o=e.right,e.right=null,r=e):(r=e.left,e.left=null,o=e)}return{left:r,right:o}}function o(t,e,n,i,r){if(t){i(e+(n?" ":" ")+r(t)+"\n")
var s=e+(n?"    ":"   ")
t.left&&o(t.left,s,!1,i,r),t.right&&o(t.right,s,!0,i,r)}}var s=function(){function s(t){void 0===t&&(t=e),this._root=null,this._size=0,this._comparator=t}return s.prototype.insert=function(t,e){return this._size++,this._root=i(t,e,this._root,this._comparator)},s.prototype.add=function(e,i){var r=new t(e,i)
null===this._root&&(r.left=r.right=null,this._size++,this._root=r)
var o=this._comparator,s=n(e,this._root,o),a=o(e,s.key)
return 0===a?this._root=s:(a<0?(r.left=s.left,r.right=s,s.left=null):a>0&&(r.right=s.right,r.left=s,s.right=null),this._size++,this._root=r),this._root},s.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},s.prototype._remove=function(t,e,i){var r
return null===e?null:0===i(t,(e=n(t,e,i)).key)?(null===e.left?r=e.right:(r=n(t,e.left,i)).right=e.right,this._size--,r):e},s.prototype.pop=function(){var t=this._root
if(t){for(;t.left;)t=t.left
return this._root=n(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},s.prototype.findStatic=function(t){for(var e=this._root,n=this._comparator;e;){var i=n(t,e.key)
if(0===i)return e
e=i<0?e.left:e.right}return null},s.prototype.find=function(t){return this._root&&(this._root=n(t,this._root,this._comparator),0!==this._comparator(t,this._root.key))?null:this._root},s.prototype.contains=function(t){for(var e=this._root,n=this._comparator;e;){var i=n(t,e.key)
if(0===i)return!0
e=i<0?e.left:e.right}return!1},s.prototype.forEach=function(t,e){for(var n=this._root,i=[],r=!1;!r;)null!==n?(i.push(n),n=n.left):0!==i.length?(n=i.pop(),t.call(e,n),n=n.right):r=!0
return this},s.prototype.range=function(t,e,n,i){for(var r=[],o=this._comparator,s=this._root;0!==r.length||s;)if(s)r.push(s),s=s.left
else{if(o((s=r.pop()).key,e)>0)break
if(o(s.key,t)>=0&&n.call(i,s))return this
s=s.right}return this},s.prototype.keys=function(){var t=[]
return this.forEach((function(e){var n=e.key
return t.push(n)})),t},s.prototype.values=function(){var t=[]
return this.forEach((function(e){var n=e.data
return t.push(n)})),t},s.prototype.min=function(){return this._root?this.minNode(this._root).key:null},s.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},s.prototype.minNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.left;)t=t.left
return t},s.prototype.maxNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.right;)t=t.right
return t},s.prototype.at=function(t){for(var e=this._root,n=!1,i=0,r=[];!n;)if(e)r.push(e),e=e.left
else if(r.length>0){if(e=r.pop(),i===t)return e
i++,e=e.right}else n=!0
return null},s.prototype.next=function(t){var e=this._root,n=null
if(t.right){for(n=t.right;n.left;)n=n.left
return n}for(var i=this._comparator;e;){var r=i(t.key,e.key)
if(0===r)break
r<0?(n=e,e=e.left):e=e.right}return n},s.prototype.prev=function(t){var e=this._root,n=null
if(null!==t.left){for(n=t.left;n.right;)n=n.right
return n}for(var i=this._comparator;e;){var r=i(t.key,e.key)
if(0===r)break
r<0?e=e.left:(n=e,e=e.right)}return n},s.prototype.clear=function(){return this._root=null,this._size=0,this},s.prototype.toList=function(){return function(e){for(var n=e,i=[],r=!1,o=new t(null,null),s=o;!r;)n?(i.push(n),n=n.left):i.length>0?n=(n=s=s.next=i.pop()).right:r=!0
return s.next=null,o.next}(this._root)},s.prototype.load=function(e,n,i){void 0===n&&(n=[]),void 0===i&&(i=!1)
var r=e.length,o=this._comparator
if(i&&u(e,n,0,r-1,o),null===this._root)this._root=a(e,n,0,r),this._size=r
else{var s=function(e,n,i){for(var r=new t(null,null),o=r,s=e,a=n;null!==s&&null!==a;)i(s.key,a.key)<0?(o.next=s,s=s.next):(o.next=a,a=a.next),o=o.next
return null!==s?o.next=s:null!==a&&(o.next=a),r.next}(this.toList(),function(e,n){for(var i=new t(null,null),r=i,o=0;o<e.length;o++)r=r.next=new t(e[o],n[o])
return r.next=null,i.next}(e,n),o)
r=this._size+r,this._root=l({head:s},0,r)}return this},s.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(s.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),s.prototype.toString=function(t){void 0===t&&(t=function(t){return String(t.key)})
var e=[]
return o(this._root,"",!0,(function(t){return e.push(t)}),t),e.join("")},s.prototype.update=function(t,e,o){var s=this._comparator,a=r(t,this._root,s),l=a.left,u=a.right
s(t,e)<0?u=i(e,o,u,s):l=i(e,o,l,s),this._root=function(t,e,i){return null===e?t:(null===t||((e=n(t.key,e,i)).left=t),e)}(l,u,s)},s.prototype.split=function(t){return r(t,this._root,this._comparator)},s.prototype[Symbol.iterator]=function(){var t,e,n
return function(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1]
return r[1]},trys:[],ops:[]}
return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o
function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.")
for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r
switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o
break
case 4:return s.label++,{value:o[1],done:!1}
case 5:s.label++,i=o[1],o=[0]
continue
case 7:o=s.ops.pop(),s.trys.pop()
continue
default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0
continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1]
break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o
break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o)
break}r[2]&&s.ops.pop(),s.trys.pop()
continue}o=e.call(t,s)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1]
return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(i){switch(i.label){case 0:t=this._root,e=[],n=!1,i.label=1
case 1:return n?[3,6]:null===t?[3,2]:(e.push(t),t=t.left,[3,5])
case 2:return 0===e.length?[3,4]:[4,t=e.pop()]
case 3:return i.sent(),t=t.right,[3,5]
case 4:n=!0,i.label=5
case 5:return[3,1]
case 6:return[2]}}))},s}()
function a(e,n,i,r){var o=r-i
if(o>0){var s=i+Math.floor(o/2),l=e[s],u=n[s],h=new t(l,u)
return h.left=a(e,n,i,s),h.right=a(e,n,s+1,r),h}return null}function l(t,e,n){var i=n-e
if(i>0){var r=e+Math.floor(i/2),o=l(t,e,r),s=t.head
return s.left=o,t.head=t.head.next,s.right=l(t,r+1,n),s}return null}function u(t,e,n,i,r){if(!(n>=i)){for(var o=t[n+i>>1],s=n-1,a=i+1;;){do{s++}while(r(t[s],o)<0)
do{a--}while(r(t[a],o)>0)
if(s>=a)break
var l=t[s]
t[s]=t[a],t[a]=l,l=e[s],e[s]=e[a],e[a]=l}u(t,e,n,a,r),u(t,e,a+1,i,r)}}const h=(t,e)=>t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y,c=(t,e)=>{if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null
const n=t.ll.x<e.ll.x?e.ll.x:t.ll.x,i=t.ur.x<e.ur.x?t.ur.x:e.ur.x
return{ll:{x:n,y:t.ll.y<e.ll.y?e.ll.y:t.ll.y},ur:{x:i,y:t.ur.y<e.ur.y?t.ur.y:e.ur.y}}}
let f=Number.EPSILON
void 0===f&&(f=Math.pow(2,-52))
const p=f*f,d=(t,e)=>{if(-f<t&&t<f&&-f<e&&e<f)return 0
const n=t-e
return n*n<p*t*e?0:t<e?-1:1}
class g{constructor(){this.tree=new s,this.round(0)}round(t){const e=this.tree.add(t),n=this.tree.prev(e)
if(null!==n&&0===d(e.key,n.key))return this.tree.remove(t),n.key
const i=this.tree.next(e)
return null!==i&&0===d(e.key,i.key)?(this.tree.remove(t),i.key):t}}const _=new class{constructor(){this.reset()}reset(){this.xRounder=new g,this.yRounder=new g}round(t,e){return{x:this.xRounder.round(t),y:this.yRounder.round(e)}}},m=11102230246251565e-32,y=134217729,v=(3+8*m)*m
function x(t,e,n,i,r){let o,s,a,l,u=e[0],h=i[0],c=0,f=0
h>u==h>-u?(o=u,u=e[++c]):(o=h,h=i[++f])
let p=0
if(c<t&&f<n)for(h>u==h>-u?(s=u+o,a=o-(s-u),u=e[++c]):(s=h+o,a=o-(s-h),h=i[++f]),o=s,0!==a&&(r[p++]=a);c<t&&f<n;)h>u==h>-u?(s=o+u,l=s-o,a=o-(s-l)+(u-l),u=e[++c]):(s=o+h,l=s-o,a=o-(s-l)+(h-l),h=i[++f]),o=s,0!==a&&(r[p++]=a)
for(;c<t;)s=o+u,l=s-o,a=o-(s-l)+(u-l),u=e[++c],o=s,0!==a&&(r[p++]=a)
for(;f<n;)s=o+h,l=s-o,a=o-(s-l)+(h-l),h=i[++f],o=s,0!==a&&(r[p++]=a)
return 0===o&&0!==p||(r[p++]=o),p}function b(t){return new Float64Array(t)}const E=b(4),w=b(8),S=b(12),C=b(16),T=b(4)
const I=(t,e)=>t.x*e.y-t.y*e.x,P=(t,e)=>t.x*e.x+t.y*e.y,A=(t,e,n)=>{const i=function(t,e,n,i,r,o){const s=(e-o)*(n-r),a=(t-r)*(i-o),l=s-a,u=Math.abs(s+a)
return Math.abs(l)>=33306690738754716e-32*u?l:-function(t,e,n,i,r,o,s){let a,l,u,h,c,f,p,d,g,_,m,b,I,P,A,R,L,M
const O=t-r,N=n-r,D=e-o,F=i-o
P=O*F,f=y*O,p=f-(f-O),d=O-p,f=y*F,g=f-(f-F),_=F-g,A=d*_-(P-p*g-d*g-p*_),R=D*N,f=y*D,p=f-(f-D),d=D-p,f=y*N,g=f-(f-N),_=N-g,L=d*_-(R-p*g-d*g-p*_),m=A-L,c=A-m,E[0]=A-(m+c)+(c-L),b=P+m,c=b-P,I=P-(b-c)+(m-c),m=I-R,c=I-m,E[1]=I-(m+c)+(c-R),M=b+m,c=M-b,E[2]=b-(M-c)+(m-c),E[3]=M
let k=function(t,e){let n=e[0]
for(let i=1;i<4;i++)n+=e[i]
return n}(0,E),j=22204460492503146e-32*s
if(k>=j||-k>=j)return k
if(c=t-O,a=t-(O+c)+(c-r),c=n-N,u=n-(N+c)+(c-r),c=e-D,l=e-(D+c)+(c-o),c=i-F,h=i-(F+c)+(c-o),0===a&&0===l&&0===u&&0===h)return k
if(j=11093356479670487e-47*s+v*Math.abs(k),k+=O*h+F*a-(D*u+N*l),k>=j||-k>=j)return k
P=a*F,f=y*a,p=f-(f-a),d=a-p,f=y*F,g=f-(f-F),_=F-g,A=d*_-(P-p*g-d*g-p*_),R=l*N,f=y*l,p=f-(f-l),d=l-p,f=y*N,g=f-(f-N),_=N-g,L=d*_-(R-p*g-d*g-p*_),m=A-L,c=A-m,T[0]=A-(m+c)+(c-L),b=P+m,c=b-P,I=P-(b-c)+(m-c),m=I-R,c=I-m,T[1]=I-(m+c)+(c-R),M=b+m,c=M-b,T[2]=b-(M-c)+(m-c),T[3]=M
const z=x(4,E,4,T,w)
P=O*h,f=y*O,p=f-(f-O),d=O-p,f=y*h,g=f-(f-h),_=h-g,A=d*_-(P-p*g-d*g-p*_),R=D*u,f=y*D,p=f-(f-D),d=D-p,f=y*u,g=f-(f-u),_=u-g,L=d*_-(R-p*g-d*g-p*_),m=A-L,c=A-m,T[0]=A-(m+c)+(c-L),b=P+m,c=b-P,I=P-(b-c)+(m-c),m=I-R,c=I-m,T[1]=I-(m+c)+(c-R),M=b+m,c=M-b,T[2]=b-(M-c)+(m-c),T[3]=M
const G=x(z,w,4,T,S)
P=a*h,f=y*a,p=f-(f-a),d=a-p,f=y*h,g=f-(f-h),_=h-g,A=d*_-(P-p*g-d*g-p*_),R=l*u,f=y*l,p=f-(f-l),d=l-p,f=y*u,g=f-(f-u),_=u-g,L=d*_-(R-p*g-d*g-p*_),m=A-L,c=A-m,T[0]=A-(m+c)+(c-L),b=P+m,c=b-P,I=P-(b-c)+(m-c),m=I-R,c=I-m,T[1]=I-(m+c)+(c-R),M=b+m,c=M-b,T[2]=b-(M-c)+(m-c),T[3]=M
const B=x(G,S,4,T,C)
return C[B-1]}(t,e,n,i,r,o,u)}(t.x,t.y,e.x,e.y,n.x,n.y)
return i>0?-1:i<0?1:0},R=t=>Math.sqrt(P(t,t)),L=(t,e,n)=>{const i={x:e.x-t.x,y:e.y-t.y},r={x:n.x-t.x,y:n.y-t.y}
return I(r,i)/R(r)/R(i)},M=(t,e,n)=>{const i={x:e.x-t.x,y:e.y-t.y},r={x:n.x-t.x,y:n.y-t.y}
return P(r,i)/R(r)/R(i)},O=(t,e,n)=>0===e.y?null:{x:t.x+e.x/e.y*(n-t.y),y:n},N=(t,e,n)=>0===e.x?null:{x:n,y:t.y+e.y/e.x*(n-t.x)}
class D{static compare(t,e){const n=D.comparePoints(t.point,e.point)
return 0!==n?n:(t.point!==e.point&&t.link(e),t.isLeft!==e.isLeft?t.isLeft?1:-1:k.compare(t.segment,e.segment))}static comparePoints(t,e){return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y>e.y?1:0}constructor(t,e){void 0===t.events?t.events=[this]:t.events.push(this),this.point=t,this.isLeft=e}link(t){if(t.point===this.point)throw new Error("Tried to link already linked events")
const e=t.point.events
for(let n=0,i=e.length;n<i;n++){const t=e[n]
this.point.events.push(t),t.point=this.point}this.checkForConsuming()}checkForConsuming(){const t=this.point.events.length
for(let e=0;e<t;e++){const n=this.point.events[e]
if(void 0===n.segment.consumedBy)for(let i=e+1;i<t;i++){const t=this.point.events[i]
void 0===t.consumedBy&&n.otherSE.point.events===t.otherSE.point.events&&n.segment.consume(t.segment)}}}getAvailableLinkedEvents(){const t=[]
for(let e=0,n=this.point.events.length;e<n;e++){const n=this.point.events[e]
n!==this&&!n.segment.ringOut&&n.segment.isInResult()&&t.push(n)}return t}getLeftmostComparator(t){const e=new Map,n=n=>{const i=n.otherSE
e.set(n,{sine:L(this.point,t.point,i.point),cosine:M(this.point,t.point,i.point)})}
return(t,i)=>{e.has(t)||n(t),e.has(i)||n(i)
const{sine:r,cosine:o}=e.get(t),{sine:s,cosine:a}=e.get(i)
return r>=0&&s>=0?o<a?1:o>a?-1:0:r<0&&s<0?o<a?-1:o>a?1:0:s<r?-1:s>r?1:0}}}let F=0
class k{static compare(t,e){const n=t.leftSE.point.x,i=e.leftSE.point.x,r=t.rightSE.point.x,o=e.rightSE.point.x
if(o<n)return 1
if(r<i)return-1
const s=t.leftSE.point.y,a=e.leftSE.point.y,l=t.rightSE.point.y,u=e.rightSE.point.y
if(n<i){if(a<s&&a<l)return 1
if(a>s&&a>l)return-1
const n=t.comparePoint(e.leftSE.point)
if(n<0)return 1
if(n>0)return-1
const i=e.comparePoint(t.rightSE.point)
return 0!==i?i:-1}if(n>i){if(s<a&&s<u)return-1
if(s>a&&s>u)return 1
const n=e.comparePoint(t.leftSE.point)
if(0!==n)return n
const i=t.comparePoint(e.rightSE.point)
return i<0?1:i>0?-1:1}if(s<a)return-1
if(s>a)return 1
if(r<o){const n=e.comparePoint(t.rightSE.point)
if(0!==n)return n}if(r>o){const n=t.comparePoint(e.rightSE.point)
if(n<0)return 1
if(n>0)return-1}if(r!==o){const t=l-s,e=r-n,h=u-a,c=o-i
if(t>e&&h<c)return 1
if(t<e&&h>c)return-1}return r>o?1:r<o||l<u?-1:l>u?1:t.id<e.id?-1:t.id>e.id?1:0}constructor(t,e,n,i){this.id=++F,this.leftSE=t,t.segment=this,t.otherSE=e,this.rightSE=e,e.segment=this,e.otherSE=t,this.rings=n,this.windings=i}static fromRing(t,e,n){let i,r,o
const s=D.comparePoints(t,e)
if(s<0)i=t,r=e,o=1
else{if(!(s>0))throw new Error(`Tried to create degenerate segment at [${t.x}, ${t.y}]`)
i=e,r=t,o=-1}const a=new D(i,!0),l=new D(r,!1)
return new k(a,l,[n],[o])}replaceRightSE(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const t=this.leftSE.point.y,e=this.rightSE.point.y
return{ll:{x:this.leftSE.point.x,y:t<e?t:e},ur:{x:this.rightSE.point.x,y:t>e?t:e}}}vector(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}isAnEndpoint(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}comparePoint(t){if(this.isAnEndpoint(t))return 0
const e=this.leftSE.point,n=this.rightSE.point,i=this.vector()
if(e.x===n.x)return t.x===e.x?0:t.x<e.x?1:-1
const r=(t.y-e.y)/i.y,o=e.x+r*i.x
if(t.x===o)return 0
const s=(t.x-e.x)/i.x,a=e.y+s*i.y
return t.y===a?0:t.y<a?-1:1}getIntersection(t){const e=this.bbox(),n=t.bbox(),i=c(e,n)
if(null===i)return null
const r=this.leftSE.point,o=this.rightSE.point,s=t.leftSE.point,a=t.rightSE.point,l=h(e,s)&&0===this.comparePoint(s),u=h(n,r)&&0===t.comparePoint(r),f=h(e,a)&&0===this.comparePoint(a),p=h(n,o)&&0===t.comparePoint(o)
if(u&&l)return p&&!f?o:!p&&f?a:null
if(u)return f&&r.x===a.x&&r.y===a.y?null:r
if(l)return p&&o.x===s.x&&o.y===s.y?null:s
if(p&&f)return null
if(p)return o
if(f)return a
const d=((t,e,n,i)=>{if(0===e.x)return N(n,i,t.x)
if(0===i.x)return N(t,e,n.x)
if(0===e.y)return O(n,i,t.y)
if(0===i.y)return O(t,e,n.y)
const r=I(e,i)
if(0==r)return null
const o={x:n.x-t.x,y:n.y-t.y},s=I(o,e)/r,a=I(o,i)/r
return{x:(t.x+a*e.x+(n.x+s*i.x))/2,y:(t.y+a*e.y+(n.y+s*i.y))/2}})(r,this.vector(),s,t.vector())
return null===d?null:h(i,d)?_.round(d.x,d.y):null}split(t){const e=[],n=void 0!==t.events,i=new D(t,!0),r=new D(t,!1),o=this.rightSE
this.replaceRightSE(r),e.push(r),e.push(i)
const s=new k(i,o,this.rings.slice(),this.windings.slice())
return D.comparePoints(s.leftSE.point,s.rightSE.point)>0&&s.swapEvents(),D.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),n&&(i.checkForConsuming(),r.checkForConsuming()),e}swapEvents(){const t=this.rightSE
this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1
for(let e=0,n=this.windings.length;e<n;e++)this.windings[e]*=-1}consume(t){let e=this,n=t
for(;e.consumedBy;)e=e.consumedBy
for(;n.consumedBy;)n=n.consumedBy
const i=k.compare(e,n)
if(0!==i){if(i>0){const t=e
e=n,n=t}if(e.prev===n){const t=e
e=n,n=t}for(let t=0,i=n.rings.length;t<i;t++){const i=n.rings[t],r=n.windings[t],o=e.rings.indexOf(i);-1===o?(e.rings.push(i),e.windings.push(r)):e.windings[o]+=r}n.rings=null,n.windings=null,n.consumedBy=e,n.leftSE.consumedBy=e.leftSE,n.rightSE.consumedBy=e.rightSE}}prevInResult(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}beforeState(){if(void 0!==this._beforeState)return this._beforeState
if(this.prev){const t=this.prev.consumedBy||this.prev
this._beforeState=t.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]}
return this._beforeState}afterState(){if(void 0!==this._afterState)return this._afterState
const t=this.beforeState()
this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]}
const e=this._afterState.rings,n=this._afterState.windings,i=this._afterState.multiPolys
for(let s=0,a=this.rings.length;s<a;s++){const t=this.rings[s],i=this.windings[s],r=e.indexOf(t);-1===r?(e.push(t),n.push(i)):n[r]+=i}const r=[],o=[]
for(let s=0,a=e.length;s<a;s++){if(0===n[s])continue
const t=e[s],i=t.poly
if(-1===o.indexOf(i))if(t.isExterior)r.push(i)
else{-1===o.indexOf(i)&&o.push(i)
const e=r.indexOf(t.poly);-1!==e&&r.splice(e,1)}}for(let s=0,a=r.length;s<a;s++){const t=r[s].multiPoly;-1===i.indexOf(t)&&i.push(t)}return this._afterState}isInResult(){if(this.consumedBy)return!1
if(void 0!==this._isInResult)return this._isInResult
const t=this.beforeState().multiPolys,e=this.afterState().multiPolys
switch(V.type){case"union":{const n=0===t.length,i=0===e.length
this._isInResult=n!==i
break}case"intersection":{let n,i
t.length<e.length?(n=t.length,i=e.length):(n=e.length,i=t.length),this._isInResult=i===V.numMultiPolys&&n<i
break}case"xor":{const n=Math.abs(t.length-e.length)
this._isInResult=n%2==1
break}case"difference":{const n=t=>1===t.length&&t[0].isSubject
this._isInResult=n(t)!==n(e)
break}default:throw new Error(`Unrecognized operation type found ${V.type}`)}return this._isInResult}}class j{constructor(t,e,n){if(!Array.isArray(t)||0===t.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon")
if(this.poly=e,this.isExterior=n,this.segments=[],"number"!=typeof t[0][0]||"number"!=typeof t[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon")
const i=_.round(t[0][0],t[0][1])
this.bbox={ll:{x:i.x,y:i.y},ur:{x:i.x,y:i.y}}
let r=i
for(let o=1,s=t.length;o<s;o++){if("number"!=typeof t[o][0]||"number"!=typeof t[o][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon")
let e=_.round(t[o][0],t[o][1])
e.x===r.x&&e.y===r.y||(this.segments.push(k.fromRing(r,e,this)),e.x<this.bbox.ll.x&&(this.bbox.ll.x=e.x),e.y<this.bbox.ll.y&&(this.bbox.ll.y=e.y),e.x>this.bbox.ur.x&&(this.bbox.ur.x=e.x),e.y>this.bbox.ur.y&&(this.bbox.ur.y=e.y),r=e)}i.x===r.x&&i.y===r.y||this.segments.push(k.fromRing(r,i,this))}getSweepEvents(){const t=[]
for(let e=0,n=this.segments.length;e<n;e++){const n=this.segments[e]
t.push(n.leftSE),t.push(n.rightSE)}return t}}class z{constructor(t,e){if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon")
this.exteriorRing=new j(t[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[]
for(let n=1,i=t.length;n<i;n++){const e=new j(t[n],this,!1)
e.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=e.bbox.ll.x),e.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=e.bbox.ll.y),e.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=e.bbox.ur.x),e.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=e.bbox.ur.y),this.interiorRings.push(e)}this.multiPoly=e}getSweepEvents(){const t=this.exteriorRing.getSweepEvents()
for(let e=0,n=this.interiorRings.length;e<n;e++){const n=this.interiorRings[e].getSweepEvents()
for(let e=0,i=n.length;e<i;e++)t.push(n[e])}return t}}class G{constructor(t,e){if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon")
try{"number"==typeof t[0][0][0]&&(t=[t])}catch(t){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}}
for(let n=0,i=t.length;n<i;n++){const e=new z(t[n],this)
e.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=e.bbox.ll.x),e.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=e.bbox.ll.y),e.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=e.bbox.ur.x),e.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=e.bbox.ur.y),this.polys.push(e)}this.isSubject=e}getSweepEvents(){const t=[]
for(let e=0,n=this.polys.length;e<n;e++){const n=this.polys[e].getSweepEvents()
for(let e=0,i=n.length;e<i;e++)t.push(n[e])}return t}}class B{static factory(t){const e=[]
for(let n=0,i=t.length;n<i;n++){const i=t[n]
if(!i.isInResult()||i.ringOut)continue
let r=null,o=i.leftSE,s=i.rightSE
const a=[o],l=o.point,u=[]
for(;r=o,o=s,a.push(o),o.point!==l;)for(;;){const t=o.getAvailableLinkedEvents()
if(0===t.length){const t=a[0].point,e=a[a.length-1].point
throw new Error(`Unable to complete output ring starting at [${t.x}, ${t.y}]. Last matching segment found ends at [${e.x}, ${e.y}].`)}if(1===t.length){s=t[0].otherSE
break}let n=null
for(let e=0,r=u.length;e<r;e++)if(u[e].point===o.point){n=e
break}if(null!==n){const t=u.splice(n)[0],i=a.splice(t.index)
i.unshift(i[0].otherSE),e.push(new B(i.reverse()))
continue}u.push({index:a.length,point:o.point})
const i=o.getLeftmostComparator(r)
s=t.sort(i)[0].otherSE
break}e.push(new B(a))}return e}constructor(t){this.events=t
for(let e=0,n=t.length;e<n;e++)t[e].segment.ringOut=this
this.poly=null}getGeom(){let t=this.events[0].point
const e=[t]
for(let l=1,u=this.events.length-1;l<u;l++){const n=this.events[l].point,i=this.events[l+1].point
0!==A(n,t,i)&&(e.push(n),t=n)}if(1===e.length)return null
const n=e[0],i=e[1]
0===A(n,t,i)&&e.shift(),e.push(e[0])
const r=this.isExteriorRing()?1:-1,o=this.isExteriorRing()?0:e.length-1,s=this.isExteriorRing()?e.length:-1,a=[]
for(let l=o;l!=s;l+=r)a.push([e[l].x,e[l].y])
return a}isExteriorRing(){if(void 0===this._isExteriorRing){const t=this.enclosingRing()
this._isExteriorRing=!t||!t.isExteriorRing()}return this._isExteriorRing}enclosingRing(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){let t=this.events[0]
for(let i=1,r=this.events.length;i<r;i++){const e=this.events[i]
D.compare(t,e)>0&&(t=e)}let e=t.segment.prevInResult(),n=e?e.prevInResult():null
for(;;){if(!e)return null
if(!n)return e.ringOut
if(n.ringOut!==e.ringOut)return n.ringOut.enclosingRing()!==e.ringOut?e.ringOut:e.ringOut.enclosingRing()
e=n.prevInResult(),n=e?e.prevInResult():null}}}class q{constructor(t){this.exteriorRing=t,t.poly=this,this.interiorRings=[]}addInterior(t){this.interiorRings.push(t),t.poly=this}getGeom(){const t=[this.exteriorRing.getGeom()]
if(null===t[0])return null
for(let e=0,n=this.interiorRings.length;e<n;e++){const n=this.interiorRings[e].getGeom()
null!==n&&t.push(n)}return t}}class U{constructor(t){this.rings=t,this.polys=this._composePolys(t)}getGeom(){const t=[]
for(let e=0,n=this.polys.length;e<n;e++){const n=this.polys[e].getGeom()
null!==n&&t.push(n)}return t}_composePolys(t){const e=[]
for(let n=0,i=t.length;n<i;n++){const i=t[n]
if(!i.poly)if(i.isExteriorRing())e.push(new q(i))
else{const t=i.enclosingRing()
t.poly||e.push(new q(t)),t.poly.addInterior(i)}}return e}}class Z{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k.compare
this.queue=t,this.tree=new s(e),this.segments=[]}process(t){const e=t.segment,n=[]
if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(e),n
const i=t.isLeft?this.tree.add(e):this.tree.find(e)
if(!i)throw new Error(`Unable to find segment #${e.id} [${e.leftSE.point.x}, ${e.leftSE.point.y}] -> [${e.rightSE.point.x}, ${e.rightSE.point.y}] in SweepLine tree.`)
let r,o,s=i,a=i
for(;void 0===r;)s=this.tree.prev(s),null===s?r=null:void 0===s.key.consumedBy&&(r=s.key)
for(;void 0===o;)a=this.tree.next(a),null===a?o=null:void 0===a.key.consumedBy&&(o=a.key)
if(t.isLeft){let i=null
if(r){const t=r.getIntersection(e)
if(null!==t&&(e.isAnEndpoint(t)||(i=t),!r.isAnEndpoint(t))){const e=this._splitSafely(r,t)
for(let t=0,i=e.length;t<i;t++)n.push(e[t])}}let s=null
if(o){const t=o.getIntersection(e)
if(null!==t&&(e.isAnEndpoint(t)||(s=t),!o.isAnEndpoint(t))){const e=this._splitSafely(o,t)
for(let t=0,i=e.length;t<i;t++)n.push(e[t])}}if(null!==i||null!==s){let t=null
t=null===i?s:null===s||D.comparePoints(i,s)<=0?i:s,this.queue.remove(e.rightSE),n.push(e.rightSE)
const r=e.split(t)
for(let e=0,i=r.length;e<i;e++)n.push(r[e])}n.length>0?(this.tree.remove(e),n.push(t)):(this.segments.push(e),e.prev=r)}else{if(r&&o){const t=r.getIntersection(o)
if(null!==t){if(!r.isAnEndpoint(t)){const e=this._splitSafely(r,t)
for(let t=0,i=e.length;t<i;t++)n.push(e[t])}if(!o.isAnEndpoint(t)){const e=this._splitSafely(o,t)
for(let t=0,i=e.length;t<i;t++)n.push(e[t])}}}this.tree.remove(e)}return n}_splitSafely(t,e){this.tree.remove(t)
const n=t.rightSE
this.queue.remove(n)
const i=t.split(e)
return i.push(n),void 0===t.consumedBy&&this.tree.add(t),i}}const X="undefined"!=typeof process&&process.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Y="undefined"!=typeof process&&process.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,V=new class{run(t,e,n){V.type=t,_.reset()
const i=[new G(e,!0)]
for(let s=0,h=n.length;s<h;s++)i.push(new G(n[s],!1))
if(V.numMultiPolys=i.length,"difference"===V.type){const t=i[0]
let e=1
for(;e<i.length;)null!==c(i[e].bbox,t.bbox)?e++:i.splice(e,1)}if("intersection"===V.type)for(let s=0,h=i.length;s<h;s++){const t=i[s]
for(let e=s+1,n=i.length;e<n;e++)if(null===c(t.bbox,i[e].bbox))return[]}const r=new s(D.compare)
for(let s=0,h=i.length;s<h;s++){const t=i[s].getSweepEvents()
for(let e=0,n=t.length;e<n;e++)if(r.insert(t[e]),r.size>X)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big).")}const o=new Z(r)
let a=r.size,l=r.pop()
for(;l;){const t=l.key
if(r.size===a){const e=t.segment
throw new Error(`Unable to pop() ${t.isLeft?"left":"right"} SweepEvent [${t.point.x}, ${t.point.y}] from segment #${e.id} [${e.leftSE.point.x}, ${e.leftSE.point.y}] -> [${e.rightSE.point.x}, ${e.rightSE.point.y}] from queue.`)}if(r.size>X)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big).")
if(o.segments.length>Y)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments).")
const e=o.process(t)
for(let n=0,i=e.length;n<i;n++){const t=e[n]
void 0===t.consumedBy&&r.insert(t)}a=r.size,l=r.pop()}_.reset()
const u=B.factory(o.segments)
return new U(u).getGeom()}}
return{union:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i]
return V.run("union",t,n)},intersection:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i]
return V.run("intersection",t,n)},xor:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i]
return V.run("xor",t,n)},difference:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i]
return V.run("difference",t,n)}}}()},6839:function(t){t.exports=function(){"use strict"
function t(n,i,r,o,s){for(;o>r;){if(o-r>600){var a=o-r+1,l=i-r+1,u=Math.log(a),h=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*h*(a-h)/a)*(l-a/2<0?-1:1)
t(n,i,Math.max(r,Math.floor(i-l*h/a+c)),Math.min(o,Math.floor(i+(a-l)*h/a+c)),s)}var f=n[i],p=r,d=o
for(e(n,r,i),s(n[o],f)>0&&e(n,r,o);p<d;){for(e(n,p,d),p++,d--;s(n[p],f)<0;)p++
for(;s(n[d],f)>0;)d--}0===s(n[r],f)?e(n,r,d):e(n,++d,o),d<=i&&(r=d+1),i<=d&&(o=d-1)}}function e(t,e,n){var i=t[e]
t[e]=t[n],t[n]=i}function n(t,e){return t<e?-1:t>e?1:0}return function(e,i,r,o,s){t(e,i,r||0,o||e.length-1,s||n)}}()},803:(t,e,n)=>{"use strict"
t.exports=r,t.exports.default=r
var i=n(6839)
function r(t,e){if(!(this instanceof r))return new r(t,e)
this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function o(t,e,n){if(!n)return e.indexOf(t)
for(var i=0;i<e.length;i++)if(n(t,e[i]))return i
return-1}function s(t,e){a(t,0,t.children.length,e,t)}function a(t,e,n,i,r){r||(r=g(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0
for(var o,s=e;s<n;s++)o=t.children[s],l(r,t.leaf?i(o):o)
return r}function l(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function u(t,e){return t.minX-e.minX}function h(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function f(t){return t.maxX-t.minX+(t.maxY-t.minY)}function p(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function d(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function g(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function _(t,e,n,r,o){for(var s,a=[e,n];a.length;)(n=a.pop())-(e=a.pop())<=r||(s=e+Math.ceil((n-e)/r/2)*r,i(t,s,e,n,o),a.push(e,s,s,n))}r.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],i=this.toBBox
if(!d(t,e))return n
for(var r,o,s,a,l=[];e;){for(r=0,o=e.children.length;r<o;r++)s=e.children[r],d(t,a=e.leaf?i(s):s)&&(e.leaf?n.push(s):p(t,a)?this._all(s,n):l.push(s))
e=l.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox
if(!d(t,e))return!1
for(var i,r,o,s,a=[];e;){for(i=0,r=e.children.length;i<r;i++)if(o=e.children[i],d(t,s=e.leaf?n(o):o)){if(e.leaf||p(t,s))return!0
a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this
if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e])
return this}var i=this._build(t.slice(),0,t.length-1,0)
if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i)
else{if(this.data.height<i.height){var r=this.data
this.data=i,i=r}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i
return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=g([]),this},remove:function(t,e){if(!t)return this
for(var n,i,r,s,a=this.data,l=this.toBBox(t),u=[],h=[];a||u.length;){if(a||(a=u.pop(),i=u[u.length-1],n=h.pop(),s=!0),a.leaf&&-1!==(r=o(t,a.children,e)))return a.children.splice(r,1),u.push(a),this._condense(u),this
s||a.leaf||!p(a,l)?i?(n++,a=i.children[n],s=!1):a=null:(u.push(a),h.push(n),n=0,i=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:u,compareMinY:h,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop()
return e},_build:function(t,e,n,i){var r,o=n-e+1,a=this._maxEntries
if(o<=a)return s(r=g(t.slice(e,n+1)),this.toBBox),r
i||(i=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,i-1))),(r=g([])).leaf=!1,r.height=i
var l,u,h,c,f=Math.ceil(o/a),p=f*Math.ceil(Math.sqrt(a))
for(_(t,e,n,p,this.compareMinX),l=e;l<=n;l+=p)for(_(t,l,h=Math.min(l+p-1,n),f,this.compareMinY),u=l;u<=h;u+=f)c=Math.min(u+f-1,h),r.children.push(this._build(t,u,c,i-1))
return s(r,this.toBBox),r},_chooseSubtree:function(t,e,n,i){for(var r,o,s,a,l,u,h,f,p,d;i.push(e),!e.leaf&&i.length-1!==n;){for(h=f=1/0,r=0,o=e.children.length;r<o;r++)l=c(s=e.children[r]),p=t,d=s,(u=(Math.max(d.maxX,p.maxX)-Math.min(d.minX,p.minX))*(Math.max(d.maxY,p.maxY)-Math.min(d.minY,p.minY))-l)<f?(f=u,h=l<h?l:h,a=s):u===f&&l<h&&(h=l,a=s)
e=a||e.children[0]}return e},_insert:function(t,e,n){var i=this.toBBox,r=n?t:i(t),o=[],s=this._chooseSubtree(r,this.data,e,o)
for(s.children.push(t),l(s,r);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--
this._adjustParentBBoxes(r,o,e)},_split:function(t,e){var n=t[e],i=n.children.length,r=this._minEntries
this._chooseSplitAxis(n,r,i)
var o=this._chooseSplitIndex(n,r,i),a=g(n.children.splice(o,n.children.length-o))
a.height=n.height,a.leaf=n.leaf,s(n,this.toBBox),s(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},_splitRoot:function(t,e){this.data=g([t,e]),this.data.height=t.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var i,r,o,s,l,u,h,f,p,d,g,_,m,y
for(u=h=1/0,i=e;i<=n-e;i++)p=r=a(t,0,i,this.toBBox),d=o=a(t,i,n,this.toBBox),g=Math.max(p.minX,d.minX),_=Math.max(p.minY,d.minY),m=Math.min(p.maxX,d.maxX),y=Math.min(p.maxY,d.maxY),s=Math.max(0,m-g)*Math.max(0,y-_),l=c(r)+c(o),s<u?(u=s,f=i,h=l<h?l:h):s===u&&l<h&&(h=l,f=i)
return f},_chooseSplitAxis:function(t,e,n){var i=t.leaf?this.compareMinX:u,r=t.leaf?this.compareMinY:h
this._allDistMargin(t,e,n,i)<this._allDistMargin(t,e,n,r)&&t.children.sort(i)},_allDistMargin:function(t,e,n,i){t.children.sort(i)
var r,o,s=this.toBBox,u=a(t,0,e,s),h=a(t,n-e,n,s),c=f(u)+f(h)
for(r=e;r<n-e;r++)o=t.children[r],l(u,t.leaf?s(o):o),c+=f(u)
for(r=n-e-1;r>=e;r--)o=t.children[r],l(h,t.leaf?s(o):o),c+=f(h)
return c},_adjustParentBBoxes:function(t,e,n){for(var i=n;i>=0;i--)l(e[i],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():s(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"]
this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},7179:function(t){t.exports=function(){"use strict"
function t(t,i,r,o,s){!function t(n,i,r,o,s){for(;o>r;){if(o-r>600){var a=o-r+1,l=i-r+1,u=Math.log(a),h=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*h*(a-h)/a)*(l-a/2<0?-1:1)
t(n,i,Math.max(r,Math.floor(i-l*h/a+c)),Math.min(o,Math.floor(i+(a-l)*h/a+c)),s)}var f=n[i],p=r,d=o
for(e(n,r,i),s(n[o],f)>0&&e(n,r,o);p<d;){for(e(n,p,d),p++,d--;s(n[p],f)<0;)p++
for(;s(n[d],f)>0;)d--}0===s(n[r],f)?e(n,r,d):e(n,++d,o),d<=i&&(r=d+1),i<=d&&(o=d-1)}}(t,i,r||0,o||t.length-1,s||n)}function e(t,e,n){var i=t[e]
t[e]=t[n],t[n]=i}function n(t,e){return t<e?-1:t>e?1:0}var i=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}
function r(t,e,n){if(!n)return e.indexOf(t)
for(var i=0;i<e.length;i++)if(n(t,e[i]))return i
return-1}function o(t,e){s(t,0,t.children.length,e,t)}function s(t,e,n,i,r){r||(r=d(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0
for(var o=e;o<n;o++){var s=t.children[o]
a(r,t.leaf?i(s):s)}return r}function a(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function u(t,e){return t.minY-e.minY}function h(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function c(t){return t.maxX-t.minX+(t.maxY-t.minY)}function f(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function p(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function d(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function g(e,n,i,r,o){for(var s=[n,i];s.length;)if(!((i=s.pop())-(n=s.pop())<=r)){var a=n+Math.ceil((i-n)/r/2)*r
t(e,a,n,i,o),s.push(n,a,a,i)}}return i.prototype.all=function(){return this._all(this.data,[])},i.prototype.search=function(t){var e=this.data,n=[]
if(!p(t,e))return n
for(var i=this.toBBox,r=[];e;){for(var o=0;o<e.children.length;o++){var s=e.children[o],a=e.leaf?i(s):s
p(t,a)&&(e.leaf?n.push(s):f(t,a)?this._all(s,n):r.push(s))}e=r.pop()}return n},i.prototype.collides=function(t){var e=this.data
if(!p(t,e))return!1
for(var n=[];e;){for(var i=0;i<e.children.length;i++){var r=e.children[i],o=e.leaf?this.toBBox(r):r
if(p(t,o)){if(e.leaf||f(t,o))return!0
n.push(r)}}e=n.pop()}return!1},i.prototype.load=function(t){if(!t||!t.length)return this
if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e])
return this}var n=this._build(t.slice(),0,t.length-1,0)
if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n)
else{if(this.data.height<n.height){var i=this.data
this.data=n,n=i}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n
return this},i.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},i.prototype.clear=function(){return this.data=d([]),this},i.prototype.remove=function(t,e){if(!t)return this
for(var n,i,o,s=this.data,a=this.toBBox(t),l=[],u=[];s||l.length;){if(s||(s=l.pop(),i=l[l.length-1],n=u.pop(),o=!0),s.leaf){var h=r(t,s.children,e)
if(-1!==h)return s.children.splice(h,1),l.push(s),this._condense(l),this}o||s.leaf||!f(s,a)?i?(n++,s=i.children[n],o=!1):s=null:(l.push(s),u.push(n),n=0,i=s,s=s.children[0])}return this},i.prototype.toBBox=function(t){return t},i.prototype.compareMinX=function(t,e){return t.minX-e.minX},i.prototype.compareMinY=function(t,e){return t.minY-e.minY},i.prototype.toJSON=function(){return this.data},i.prototype.fromJSON=function(t){return this.data=t,this},i.prototype._all=function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop()
return e},i.prototype._build=function(t,e,n,i){var r,s=n-e+1,a=this._maxEntries
if(s<=a)return o(r=d(t.slice(e,n+1)),this.toBBox),r
i||(i=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,i-1))),(r=d([])).leaf=!1,r.height=i
var l=Math.ceil(s/a),u=l*Math.ceil(Math.sqrt(a))
g(t,e,n,u,this.compareMinX)
for(var h=e;h<=n;h+=u){var c=Math.min(h+u-1,n)
g(t,h,c,l,this.compareMinY)
for(var f=h;f<=c;f+=l){var p=Math.min(f+l-1,c)
r.children.push(this._build(t,f,p,i-1))}}return o(r,this.toBBox),r},i.prototype._chooseSubtree=function(t,e,n,i){for(;i.push(e),!e.leaf&&i.length-1!==n;){for(var r=1/0,o=1/0,s=void 0,a=0;a<e.children.length;a++){var l=e.children[a],u=h(l),c=(f=t,p=l,(Math.max(p.maxX,f.maxX)-Math.min(p.minX,f.minX))*(Math.max(p.maxY,f.maxY)-Math.min(p.minY,f.minY))-u)
c<o?(o=c,r=u<r?u:r,s=l):c===o&&u<r&&(r=u,s=l)}e=s||e.children[0]}var f,p
return e},i.prototype._insert=function(t,e,n){var i=n?t:this.toBBox(t),r=[],o=this._chooseSubtree(i,this.data,e,r)
for(o.children.push(t),a(o,i);e>=0&&r[e].children.length>this._maxEntries;)this._split(r,e),e--
this._adjustParentBBoxes(i,r,e)},i.prototype._split=function(t,e){var n=t[e],i=n.children.length,r=this._minEntries
this._chooseSplitAxis(n,r,i)
var s=this._chooseSplitIndex(n,r,i),a=d(n.children.splice(s,n.children.length-s))
a.height=n.height,a.leaf=n.leaf,o(n,this.toBBox),o(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},i.prototype._splitRoot=function(t,e){this.data=d([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},i.prototype._chooseSplitIndex=function(t,e,n){for(var i,r,o,a,l,u,c,f=1/0,p=1/0,d=e;d<=n-e;d++){var g=s(t,0,d,this.toBBox),_=s(t,d,n,this.toBBox),m=(r=g,o=_,a=Math.max(r.minX,o.minX),l=Math.max(r.minY,o.minY),u=Math.min(r.maxX,o.maxX),c=Math.min(r.maxY,o.maxY),Math.max(0,u-a)*Math.max(0,c-l)),y=h(g)+h(_)
m<f?(f=m,i=d,p=y<p?y:p):m===f&&y<p&&(p=y,i=d)}return i||n-e},i.prototype._chooseSplitAxis=function(t,e,n){var i=t.leaf?this.compareMinX:l,r=t.leaf?this.compareMinY:u
this._allDistMargin(t,e,n,i)<this._allDistMargin(t,e,n,r)&&t.children.sort(i)},i.prototype._allDistMargin=function(t,e,n,i){t.children.sort(i)
for(var r=this.toBBox,o=s(t,0,e,r),l=s(t,n-e,n,r),u=c(o)+c(l),h=e;h<n-e;h++){var f=t.children[h]
a(o,t.leaf?r(f):f),u+=c(o)}for(var p=n-e-1;p>=e;p--){var d=t.children[p]
a(l,t.leaf?r(d):d),u+=c(l)}return u},i.prototype._adjustParentBBoxes=function(t,e,n){for(var i=n;i>=0;i--)a(e[i],t)},i.prototype._condense=function(t){for(var e=t.length-1,n=void 0;e>=0;e--)0===t[e].children.length?e>0?(n=t[e-1].children).splice(n.indexOf(t[e]),1):this.clear():o(t[e],this.toBBox)},i}()},335:(t,e,n)=>{"use strict"
var i=n(3561),r=n(6933),o=Object
t.exports=i((function(){if(null==this||this!==o(this))throw new r("RegExp.prototype.flags getter called on non-object")
var t=""
return this.hasIndices&&(t+="d"),this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.dotAll&&(t+="s"),this.unicode&&(t+="u"),this.unicodeSets&&(t+="v"),this.sticky&&(t+="y"),t}),"get flags",!0)},5401:(t,e,n)=>{"use strict"
var i=n(5967),r=n(4649),o=n(335),s=n(8606),a=n(284),l=r(s())
i(l,{getPolyfill:s,implementation:o,shim:a}),t.exports=l},8606:(t,e,n)=>{"use strict"
var i=n(335),r=n(5967).supportsDescriptors,o=Object.getOwnPropertyDescriptor
t.exports=function(){if(r&&"gim"===/a/gim.flags){var t=o(RegExp.prototype,"flags")
if(t&&"function"==typeof t.get&&"boolean"==typeof RegExp.prototype.dotAll&&"boolean"==typeof RegExp.prototype.hasIndices){var e="",n={}
if(Object.defineProperty(n,"hasIndices",{get:function(){e+="d"}}),Object.defineProperty(n,"sticky",{get:function(){e+="y"}}),"dy"===e)return t.get}}return i}},284:(t,e,n)=>{"use strict"
var i=n(5967).supportsDescriptors,r=n(8606),o=Object.getOwnPropertyDescriptor,s=Object.defineProperty,a=TypeError,l=Object.getPrototypeOf,u=/a/
t.exports=function(){if(!i||!l)throw new a("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors")
var t=r(),e=l(u),n=o(e,"flags")
return n&&n.get===t||s(e,"flags",{configurable:!0,enumerable:!1,get:t}),t}},3815:function(t,e){!function(t){"use strict"
const e=134217729
function n(t,e,n,i,r){let o,s,a,l,u=e[0],h=i[0],c=0,f=0
h>u==h>-u?(o=u,u=e[++c]):(o=h,h=i[++f])
let p=0
if(c<t&&f<n)for(h>u==h>-u?(a=o-((s=u+o)-u),u=e[++c]):(a=o-((s=h+o)-h),h=i[++f]),o=s,0!==a&&(r[p++]=a);c<t&&f<n;)h>u==h>-u?(a=o-((s=o+u)-(l=s-o))+(u-l),u=e[++c]):(a=o-((s=o+h)-(l=s-o))+(h-l),h=i[++f]),o=s,0!==a&&(r[p++]=a)
for(;c<t;)a=o-((s=o+u)-(l=s-o))+(u-l),u=e[++c],o=s,0!==a&&(r[p++]=a)
for(;f<n;)a=o-((s=o+h)-(l=s-o))+(h-l),h=i[++f],o=s,0!==a&&(r[p++]=a)
return 0===o&&0!==p||(r[p++]=o),p}function i(t){return new Float64Array(t)}const r=i(4),o=i(8),s=i(12),a=i(16),l=i(4)
t.orient2d=function(t,i,u,h,c,f){const p=(i-f)*(u-c),d=(t-c)*(h-f),g=p-d
if(0===p||0===d||p>0!=d>0)return g
const _=Math.abs(p+d)
return Math.abs(g)>=33306690738754716e-32*_?g:-function(t,i,u,h,c,f,p){let d,g,_,m,y,v,x,b,E,w,S,C,T,I,P,A,R,L
const M=t-c,O=u-c,N=i-f,D=h-f
y=(P=(b=M-(x=(v=e*M)-(v-M)))*(w=D-(E=(v=e*D)-(v-D)))-((I=M*D)-x*E-b*E-x*w))-(S=P-(R=(b=N-(x=(v=e*N)-(v-N)))*(w=O-(E=(v=e*O)-(v-O)))-((A=N*O)-x*E-b*E-x*w))),r[0]=P-(S+y)+(y-R),y=(T=I-((C=I+S)-(y=C-I))+(S-y))-(S=T-A),r[1]=T-(S+y)+(y-A),y=(L=C+S)-C,r[2]=C-(L-y)+(S-y),r[3]=L
let F=function(t,e){let n=e[0]
for(let i=1;i<4;i++)n+=e[i]
return n}(0,r),k=22204460492503146e-32*p
if(F>=k||-F>=k)return F
if(d=t-(M+(y=t-M))+(y-c),_=u-(O+(y=u-O))+(y-c),g=i-(N+(y=i-N))+(y-f),m=h-(D+(y=h-D))+(y-f),0===d&&0===g&&0===_&&0===m)return F
if(k=11093356479670487e-47*p+33306690738754706e-32*Math.abs(F),(F+=M*m+D*d-(N*_+O*g))>=k||-F>=k)return F
y=(P=(b=d-(x=(v=e*d)-(v-d)))*(w=D-(E=(v=e*D)-(v-D)))-((I=d*D)-x*E-b*E-x*w))-(S=P-(R=(b=g-(x=(v=e*g)-(v-g)))*(w=O-(E=(v=e*O)-(v-O)))-((A=g*O)-x*E-b*E-x*w))),l[0]=P-(S+y)+(y-R),y=(T=I-((C=I+S)-(y=C-I))+(S-y))-(S=T-A),l[1]=T-(S+y)+(y-A),y=(L=C+S)-C,l[2]=C-(L-y)+(S-y),l[3]=L
const j=n(4,r,4,l,o)
y=(P=(b=M-(x=(v=e*M)-(v-M)))*(w=m-(E=(v=e*m)-(v-m)))-((I=M*m)-x*E-b*E-x*w))-(S=P-(R=(b=N-(x=(v=e*N)-(v-N)))*(w=_-(E=(v=e*_)-(v-_)))-((A=N*_)-x*E-b*E-x*w))),l[0]=P-(S+y)+(y-R),y=(T=I-((C=I+S)-(y=C-I))+(S-y))-(S=T-A),l[1]=T-(S+y)+(y-A),y=(L=C+S)-C,l[2]=C-(L-y)+(S-y),l[3]=L
const z=n(j,o,4,l,s)
y=(P=(b=d-(x=(v=e*d)-(v-d)))*(w=m-(E=(v=e*m)-(v-m)))-((I=d*m)-x*E-b*E-x*w))-(S=P-(R=(b=g-(x=(v=e*g)-(v-g)))*(w=_-(E=(v=e*_)-(v-_)))-((A=g*_)-x*E-b*E-x*w))),l[0]=P-(S+y)+(y-R),y=(T=I-((C=I+S)-(y=C-I))+(S-y))-(S=T-A),l[1]=T-(S+y)+(y-A),y=(L=C+S)-C,l[2]=C-(L-y)+(S-y),l[3]=L
const G=n(z,s,4,l,a)
return a[G-1]}(t,i,u,h,c,f,_)},t.orient2dfast=function(t,e,n,i,r,o){return(e-o)*(n-r)-(t-r)*(i-o)},Object.defineProperty(t,"__esModule",{value:!0})}(e)},3674:(t,e,n)=>{"use strict"
var i=n(8824),r=n(2451),o=n(7214)(),s=n(6627),a=n(6933),l=i("%Math.floor%")
t.exports=function(t,e){if("function"!=typeof t)throw new a("`fn` is not a function")
if("number"!=typeof e||e<0||e>4294967295||l(e)!==e)throw new a("`length` must be a positive 32-bit integer")
var n=arguments.length>2&&!!arguments[2],i=!0,u=!0
if("length"in t&&s){var h=s(t,"length")
h&&!h.configurable&&(i=!1),h&&!h.writable&&(u=!1)}return(i||u||!n)&&(o?r(t,"length",e,!0,!0):r(t,"length",e)),t}},3561:(t,e,n)=>{"use strict"
var i=n(2451),r=n(7214)(),o=n(2275).functionsHaveConfigurableNames(),s=n(6933)
t.exports=function(t,e){if("function"!=typeof t)throw new s("`fn` is not a function")
return arguments.length>2&&!!arguments[2]&&!o||(r?i(t,"name",e,!0,!0):i(t,"name",e)),t}},8264:t=>{"use strict"
t.exports={eudist:function(t,e,n){for(var i=t.length,r=0,o=0;o<i;o++){var s=(t[o]||0)-(e[o]||0)
r+=s*s}return n?Math.sqrt(r):r},mandist:function(t,e,n){for(var i=t.length,r=0,o=0;o<i;o++)r+=Math.abs((t[o]||0)-(e[o]||0))
return n?Math.sqrt(r):r},dist:function(t,e,n){var i=Math.abs(t-e)
return n?i:i*i}}},9036:(t,e,n)=>{"use strict"
var i=n(8264),r=i.eudist,o=i.dist
t.exports={kmrand:function(t,e){for(var n={},i=[],r=e<<2,o=t.length,s=t[0].length>0;i.length<e&&r-- >0;){var a=t[Math.floor(Math.random()*o)],l=s?a.join("_"):""+a
n[l]||(n[l]=!0,i.push(a))}if(i.length<e)throw new Error("Error initializating clusters")
return i},kmpp:function(t,e){var n=t[0].length?r:o,i=[],s=t.length,a=t[0].length>0,l=t[Math.floor(Math.random()*s)]
for(a&&l.join("_"),i.push(l);i.length<e;){for(var u=[],h=i.length,c=0,f=[],p=0;p<s;p++){for(var d=1/0,g=0;g<h;g++){var _=n(t[p],i[g])
_<=d&&(d=_)}u[p]=d}for(var m=0;m<s;m++)c+=u[m]
for(var y=0;y<s;y++)f[y]={i:y,v:t[y],pr:u[y]/c,cs:0}
f.sort((function(t,e){return t.pr-e.pr})),f[0].cs=f[0].pr
for(var v=1;v<s;v++)f[v].cs=f[v-1].cs+f[v].pr
for(var x=Math.random(),b=0;b<s-1&&f[b++].cs<x;);i.push(f[b-1].v)}return i}}},2070:(t,e,n)=>{"use strict"
var i=n(8264),r=n(9036),o=i.eudist,s=(i.mandist,i.dist,r.kmrand),a=r.kmpp
function l(t,e,n){n=n||[]
for(var i=0;i<t;i++)n[i]=e
return n}t.exports=function(t,e,n,i){var r=[],u=[],h=[],c=[],f=!1,p=i||1e4,d=t.length,g=t[0].length,_=g>0,m=[]
if(n)r="kmrand"==n?s(t,e):"kmpp"==n?a(t,e):n
else for(var y={};r.length<e;){var v=Math.floor(Math.random()*d)
y[v]||(y[v]=!0,r.push(t[v]))}do{l(e,0,m)
for(var x=0;x<d;x++){for(var b=1/0,E=0,w=0;w<e;w++)(c=_?o(t[x],r[w]):Math.abs(t[x]-r[w]))<=b&&(b=c,E=w)
h[x]=E,m[E]++}for(var S=[],C=(u=[],0);C<e;C++)S[C]=_?l(g,0,S[C]):0,u[C]=r[C]
if(_){for(var T=0;T<e;T++)r[T]=[]
for(var I=0;I<d;I++)for(var P=S[h[I]],A=t[I],R=0;R<g;R++)P[R]+=A[R]
f=!0
for(var L=0;L<e;L++){for(var M=r[L],O=S[L],N=u[L],D=m[L],F=0;F<g;F++)M[F]=O[F]/D||0
if(f)for(var k=0;k<g;k++)if(N[k]!=M[k]){f=!1
break}}}else{for(var j=0;j<d;j++)S[h[j]]+=t[j]
for(var z=0;z<e;z++)r[z]=S[z]/m[z]||0
f=!0
for(var G=0;G<e;G++)if(u[G]!=r[G]){f=!1
break}}f=f||--p<=0}while(!f)
return{it:1e4-p,k:e,idxs:h,centroids:r}}},3804:(t,e,n)=>{"use strict"
n.r(e),n.d(e,{default:()=>i})
class i{constructor(t=[],e=r){if(this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return
const t=this.data[0],e=this.data.pop()
return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:e,compare:n}=this,i=e[t]
for(;t>0;){const r=t-1>>1,o=e[r]
if(n(i,o)>=0)break
e[t]=o,t=r}e[t]=i}_down(t){const{data:e,compare:n}=this,i=this.length>>1,r=e[t]
for(;t<i;){let i=1+(t<<1),o=e[i]
const s=i+1
if(s<this.length&&n(e[s],o)<0&&(i=s,o=e[s]),n(o,r)>=0)break
e[t]=o,t=i}e[t]=r}}function r(t,e){return t<e?-1:t>e?1:0}},1940:(t,e,n)=>{"use strict"
function i(t){return t}function r(t){if(null==t)return i
var e,n,r=t.scale[0],o=t.scale[1],s=t.translate[0],a=t.translate[1]
return function(t,i){i||(e=n=0)
var l=2,u=t.length,h=new Array(u)
for(h[0]=(e+=t[0])*r+s,h[1]=(n+=t[1])*o+a;l<u;)h[l]=t[l],++l
return h}}function o(t){var e,n=r(t.transform),i=1/0,o=i,s=-i,a=-i
function l(t){(t=n(t))[0]<i&&(i=t[0]),t[0]>s&&(s=t[0]),t[1]<o&&(o=t[1]),t[1]>a&&(a=t[1])}function u(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(u)
break
case"Point":l(t.coordinates)
break
case"MultiPoint":t.coordinates.forEach(l)}}for(e in t.arcs.forEach((function(t){for(var e,r=-1,l=t.length;++r<l;)(e=n(t[r],r))[0]<i&&(i=e[0]),e[0]>s&&(s=e[0]),e[1]<o&&(o=e[1]),e[1]>a&&(a=e[1])})),t.objects)u(t.objects[e])
return[i,o,s,a]}function s(t,e){return"string"==typeof e&&(e=t.objects[e]),"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map((function(e){return a(t,e)}))}:a(t,e)}function a(t,e){var n=e.id,i=e.bbox,r=null==e.properties?{}:e.properties,o=l(t,e)
return null==n&&null==i?{type:"Feature",properties:r,geometry:o}:null==i?{type:"Feature",id:n,properties:r,geometry:o}:{type:"Feature",id:n,bbox:i,properties:r,geometry:o}}function l(t,e){var n=r(t.transform),i=t.arcs
function o(t,e){e.length&&e.pop()
for(var r=i[t<0?~t:t],o=0,s=r.length;o<s;++o)e.push(n(r[o],o))
t<0&&function(t,e){for(var n,i=t.length,r=i-e;r<--i;)n=t[r],t[r++]=t[i],t[i]=n}(e,s)}function s(t){return n(t)}function a(t){for(var e=[],n=0,i=t.length;n<i;++n)o(t[n],e)
return e.length<2&&e.push(e[0]),e}function l(t){for(var e=a(t);e.length<4;)e.push(e[0])
return e}function u(t){return t.map(l)}return function t(e){var n,i=e.type
switch(i){case"GeometryCollection":return{type:i,geometries:e.geometries.map(t)}
case"Point":n=s(e.coordinates)
break
case"MultiPoint":n=e.coordinates.map(s)
break
case"LineString":n=a(e.arcs)
break
case"MultiLineString":n=e.arcs.map(a)
break
case"Polygon":n=u(e.arcs)
break
case"MultiPolygon":n=e.arcs.map(u)
break
default:return null}return{type:i,coordinates:n}}(e)}function u(t,e){var n={},i={},r={},o=[],s=-1
function a(t,e){for(var i in t){var r=t[i]
delete e[r.start],delete r.start,delete r.end,r.forEach((function(t){n[t<0?~t:t]=1})),o.push(r)}}return e.forEach((function(n,i){var r,o=t.arcs[n<0?~n:n]
o.length<3&&!o[1][0]&&!o[1][1]&&(r=e[++s],e[s]=n,e[i]=r)})),e.forEach((function(e){var n,o,s=function(e){var n,i=t.arcs[e<0?~e:e],r=i[0]
return t.transform?(n=[0,0],i.forEach((function(t){n[0]+=t[0],n[1]+=t[1]}))):n=i[i.length-1],e<0?[n,r]:[r,n]}(e),a=s[0],l=s[1]
if(n=r[a])if(delete r[n.end],n.push(e),n.end=l,o=i[l]){delete i[o.start]
var u=o===n?n:n.concat(o)
i[u.start=n.start]=r[u.end=o.end]=u}else i[n.start]=r[n.end]=n
else if(n=i[l])if(delete i[n.start],n.unshift(e),n.start=a,o=r[a]){delete r[o.end]
var h=o===n?n:o.concat(n)
i[h.start=o.start]=r[h.end=n.end]=h}else i[n.start]=r[n.end]=n
else i[(n=[e]).start=a]=r[n.end=l]=n})),a(r,i),a(i,r),e.forEach((function(t){n[t<0?~t:t]||o.push([t])})),o}function h(t){return l(t,c.apply(this,arguments))}function c(t,e,n){var i,r,o
if(arguments.length>1)i=function(t,e,n){var i,r=[],o=[]
function s(t){var e=t<0?~t:t;(o[e]||(o[e]=[])).push({i:t,g:i})}function a(t){t.forEach(s)}function l(t){t.forEach(a)}return function t(e){switch(i=e,e.type){case"GeometryCollection":e.geometries.forEach(t)
break
case"LineString":a(e.arcs)
break
case"MultiLineString":case"Polygon":l(e.arcs)
break
case"MultiPolygon":!function(t){t.forEach(l)}(e.arcs)}}(e),o.forEach(null==n?function(t){r.push(t[0].i)}:function(t){n(t[0].g,t[t.length-1].g)&&r.push(t[0].i)}),r}(0,e,n)
else for(r=0,i=new Array(o=t.arcs.length);r<o;++r)i[r]=r
return{type:"MultiLineString",arcs:u(t,i)}}function f(t){return l(t,p.apply(this,arguments))}function p(t,e){var n={},i=[],r=[]
function o(t){t.forEach((function(e){e.forEach((function(e){(n[e=e<0?~e:e]||(n[e]=[])).push(t)}))})),i.push(t)}function s(e){return function(t){for(var e,n=-1,i=t.length,r=t[i-1],o=0;++n<i;)e=r,r=t[n],o+=e[0]*r[1]-e[1]*r[0]
return Math.abs(o)}(l(t,{type:"Polygon",arcs:[e]}).coordinates[0])}return e.forEach((function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t)
break
case"Polygon":o(e.arcs)
break
case"MultiPolygon":e.arcs.forEach(o)}})),i.forEach((function(t){if(!t._){var e=[],i=[t]
for(t._=1,r.push(e);t=i.pop();)e.push(t),t.forEach((function(t){t.forEach((function(t){n[t<0?~t:t].forEach((function(t){t._||(t._=1,i.push(t))}))}))}))}})),i.forEach((function(t){delete t._})),{type:"MultiPolygon",arcs:r.map((function(e){var i,r=[]
if(e.forEach((function(t){t.forEach((function(t){t.forEach((function(t){n[t<0?~t:t].length<2&&r.push(t)}))}))})),(i=(r=u(t,r)).length)>1)for(var o,a,l=1,h=s(r[0]);l<i;++l)(o=s(r[l]))>h&&(a=r[0],r[0]=r[l],r[l]=a,h=o)
return r})).filter((function(t){return t.length>0}))}}function d(t,e){for(var n=0,i=t.length;n<i;){var r=n+i>>>1
t[r]<e?n=r+1:i=r}return n}function g(t){var e={},n=t.map((function(){return[]}))
function i(t,n){t.forEach((function(t){t<0&&(t=~t)
var i=e[t]
i?i.push(n):e[t]=[n]}))}function r(t,e){t.forEach((function(t){i(t,e)}))}var o={LineString:i,MultiLineString:r,Polygon:r,MultiPolygon:function(t,e){t.forEach((function(t){r(t,e)}))}}
for(var s in t.forEach((function t(e,n){"GeometryCollection"===e.type?e.geometries.forEach((function(e){t(e,n)})):e.type in o&&o[e.type](e.arcs,n)})),e)for(var a=e[s],l=a.length,u=0;u<l;++u)for(var h=u+1;h<l;++h){var c,f=a[u],p=a[h];(c=n[f])[s=d(c,p)]!==p&&c.splice(s,0,p),(c=n[p])[s=d(c,f)]!==f&&c.splice(s,0,f)}return n}function _(t){if(null==t)return i
var e,n,r=t.scale[0],o=t.scale[1],s=t.translate[0],a=t.translate[1]
return function(t,i){i||(e=n=0)
var l=2,u=t.length,h=new Array(u),c=Math.round((t[0]-s)/r),f=Math.round((t[1]-a)/o)
for(h[0]=c-e,e=c,h[1]=f-n,n=f;l<u;)h[l]=t[l],++l
return h}}function m(t,e){if(t.transform)throw new Error("already quantized")
if(e&&e.scale)l=t.bbox
else{if(!((n=Math.floor(e))>=2))throw new Error("n must be 2")
var n,i=(l=t.bbox||o(t))[0],r=l[1],s=l[2],a=l[3]
e={scale:[s-i?(s-i)/(n-1):1,a-r?(a-r)/(n-1):1],translate:[i,r]}}var l,u,h=_(e),c=t.objects,f={}
function p(t){return h(t)}function d(t){var e
switch(t.type){case"GeometryCollection":e={type:"GeometryCollection",geometries:t.geometries.map(d)}
break
case"Point":e={type:"Point",coordinates:p(t.coordinates)}
break
case"MultiPoint":e={type:"MultiPoint",coordinates:t.coordinates.map(p)}
break
default:return t}return null!=t.id&&(e.id=t.id),null!=t.bbox&&(e.bbox=t.bbox),null!=t.properties&&(e.properties=t.properties),e}for(u in c)f[u]=d(c[u])
return{type:"Topology",bbox:l,transform:e,objects:f,arcs:t.arcs.map((function(t){var e,n=0,i=1,r=t.length,o=new Array(r)
for(o[0]=h(t[0],0);++n<r;)((e=h(t[n],n))[0]||e[1])&&(o[i++]=e)
return 1===i&&(o[i++]=[0,0]),o.length=i,o}))}}n.r(e),n.d(e,{bbox:()=>o,feature:()=>s,merge:()=>f,mergeArcs:()=>p,mesh:()=>h,meshArcs:()=>c,neighbors:()=>g,quantize:()=>m,transform:()=>r,untransform:()=>_})},6698:(t,e,n)=>{"use strict"
n.r(e),n.d(e,{topology:()=>d})
var i=Object.prototype.hasOwnProperty
function r(t,e,n,i,r,o){3===arguments.length&&(i=o=Array,r=null)
for(var s=new i(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),a=new o(t),l=t-1,u=0;u<t;++u)s[u]=r
return{set:function(i,o){for(var u=e(i)&l,h=s[u],c=0;h!=r;){if(n(h,i))return a[u]=o
if(++c>=t)throw new Error("full hashmap")
h=s[u=u+1&l]}return s[u]=i,a[u]=o,o},maybeSet:function(i,o){for(var u=e(i)&l,h=s[u],c=0;h!=r;){if(n(h,i))return a[u]
if(++c>=t)throw new Error("full hashmap")
h=s[u=u+1&l]}return s[u]=i,a[u]=o,o},get:function(i,o){for(var u=e(i)&l,h=s[u],c=0;h!=r;){if(n(h,i))return a[u]
if(++c>=t)break
h=s[u=u+1&l]}return o},keys:function(){for(var t=[],e=0,n=s.length;e<n;++e){var i=s[e]
i!=r&&t.push(i)}return t}}}function o(t,e){return t[0]===e[0]&&t[1]===e[1]}var s=new ArrayBuffer(16),a=new Float64Array(s),l=new Uint32Array(s)
function u(t){a[0]=t[0],a[1]=t[1]
var e=l[0]^l[1]
return 2147483647&(e<<5^e>>7^l[2]^l[3])}function h(t,e,n){for(var i,r=e+(n---e>>1);e<r;++e,--n)i=t[e],t[e]=t[n],t[n]=i}function c(t){var e={type:"GeometryCollection",geometries:t.features.map(f)}
return null!=t.bbox&&(e.bbox=t.bbox),e}function f(t){var e,n=p(t.geometry)
for(e in null!=t.id&&(n.id=t.id),null!=t.bbox&&(n.bbox=t.bbox),t.properties){n.properties=t.properties
break}return n}function p(t){if(null==t)return{type:null}
var e="GeometryCollection"===t.type?{type:"GeometryCollection",geometries:t.geometries.map(p)}:"Point"===t.type||"MultiPoint"===t.type?{type:t.type,coordinates:t.coordinates}:{type:t.type,arcs:t.coordinates}
return null!=t.bbox&&(e.bbox=t.bbox),e}function d(t,e){var n=function(t){var e=1/0,n=1/0,r=-1/0,o=-1/0
function s(t){null!=t&&i.call(a,t.type)&&a[t.type](t)}var a={GeometryCollection:function(t){t.geometries.forEach(s)},Point:function(t){l(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(l)},LineString:function(t){u(t.arcs)},MultiLineString:function(t){t.arcs.forEach(u)},Polygon:function(t){t.arcs.forEach(u)},MultiPolygon:function(t){t.arcs.forEach(h)}}
function l(t){var i=t[0],s=t[1]
i<e&&(e=i),i>r&&(r=i),s<n&&(n=s),s>o&&(o=s)}function u(t){t.forEach(l)}function h(t){t.forEach(u)}for(var c in t)s(t[c])
return r>=e&&o>=n?[e,n,r,o]:void 0}(t=function(t){var e,n,i={}
for(e in t)i[e]=null==(n=t[e])?{type:null}:("FeatureCollection"===n.type?c:"Feature"===n.type?f:p)(n)
return i}(t)),s=e>0&&n&&function(t,e,n){var r=e[0],o=e[1],s=e[2],a=e[3],l=s-r?(n-1)/(s-r):1,u=a-o?(n-1)/(a-o):1
function h(t){return[Math.round((t[0]-r)*l),Math.round((t[1]-o)*u)]}function c(t,e){for(var n,i,s,a,h,c=-1,f=0,p=t.length,d=new Array(p);++c<p;)n=t[c],a=Math.round((n[0]-r)*l),h=Math.round((n[1]-o)*u),a===i&&h===s||(d[f++]=[i=a,s=h])
for(d.length=f;f<e;)f=d.push([d[0][0],d[0][1]])
return d}function f(t){return c(t,2)}function p(t){return c(t,4)}function d(t){return t.map(p)}function g(t){null!=t&&i.call(_,t.type)&&_[t.type](t)}var _={GeometryCollection:function(t){t.geometries.forEach(g)},Point:function(t){t.coordinates=h(t.coordinates)},MultiPoint:function(t){t.coordinates=t.coordinates.map(h)},LineString:function(t){t.arcs=f(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(f)},Polygon:function(t){t.arcs=d(t.arcs)},MultiPolygon:function(t){t.arcs=t.arcs.map(d)}}
for(var m in t)g(t[m])
return{scale:[1/l,1/u],translate:[r,o]}}(t,n,e),a=function(t){var e,n,i,s,a=t.coordinates,l=t.lines,h=t.rings,c=l.length+h.length
for(delete t.lines,delete t.rings,i=0,s=l.length;i<s;++i)for(e=l[i];e=e.next;)++c
for(i=0,s=h.length;i<s;++i)for(n=h[i];n=n.next;)++c
var f=r(2*c*1.4,u,o),p=t.arcs=[]
for(i=0,s=l.length;i<s;++i){e=l[i]
do{d(e)}while(e=e.next)}for(i=0,s=h.length;i<s;++i)if((n=h[i]).next)do{d(n)}while(n=n.next)
else g(n)
function d(t){var e,n,i,r,o,s,l,u
if(i=f.get(e=a[t[0]]))for(l=0,u=i.length;l<u;++l)if(_(r=i[l],t))return t[0]=r[0],void(t[1]=r[1])
if(o=f.get(n=a[t[1]]))for(l=0,u=o.length;l<u;++l)if(m(s=o[l],t))return t[1]=s[0],void(t[0]=s[1])
i?i.push(t):f.set(e,[t]),o?o.push(t):f.set(n,[t]),p.push(t)}function g(t){var e,n,i,r,o
if(n=f.get(a[t[0]]))for(r=0,o=n.length;r<o;++r){if(y(i=n[r],t))return t[0]=i[0],void(t[1]=i[1])
if(v(i,t))return t[0]=i[1],void(t[1]=i[0])}if(n=f.get(e=a[t[0]+x(t)]))for(r=0,o=n.length;r<o;++r){if(y(i=n[r],t))return t[0]=i[0],void(t[1]=i[1])
if(v(i,t))return t[0]=i[1],void(t[1]=i[0])}n?n.push(t):f.set(e,[t]),p.push(t)}function _(t,e){var n=t[0],i=e[0],r=t[1]
if(n-r!=i-e[1])return!1
for(;n<=r;++n,++i)if(!o(a[n],a[i]))return!1
return!0}function m(t,e){var n=t[0],i=e[0],r=t[1],s=e[1]
if(n-r!=i-s)return!1
for(;n<=r;++n,--s)if(!o(a[n],a[s]))return!1
return!0}function y(t,e){var n=t[0],i=e[0],r=t[1]-n
if(r!==e[1]-i)return!1
for(var s=x(t),l=x(e),u=0;u<r;++u)if(!o(a[n+(u+s)%r],a[i+(u+l)%r]))return!1
return!0}function v(t,e){var n=t[0],i=e[0],r=t[1],s=e[1],l=r-n
if(l!==s-i)return!1
for(var u=x(t),h=l-x(e),c=0;c<l;++c)if(!o(a[n+(c+u)%l],a[s-(c+h)%l]))return!1
return!0}function x(t){for(var e=t[0],n=t[1],i=e,r=i,o=a[i];++i<n;){var s=a[i];(s[0]<o[0]||s[0]===o[0]&&s[1]<o[1])&&(r=i,o=s)}return r-e}return t}(function(t){var e,n,i,s,a,l,c,f=function(t){var e,n,i,s,a=t.coordinates,l=t.lines,h=t.rings,c=function(){for(var t=r(1.4*a.length,S,C,Int32Array,-1,Int32Array),e=new Int32Array(a.length),n=0,i=a.length;n<i;++n)e[n]=t.maybeSet(n,n)
return e}(),f=new Int32Array(a.length),p=new Int32Array(a.length),d=new Int32Array(a.length),g=new Int8Array(a.length),_=0
for(e=0,n=a.length;e<n;++e)f[e]=p[e]=d[e]=-1
for(e=0,n=l.length;e<n;++e){var m=l[e],y=m[0],v=m[1]
for(i=c[y],s=c[++y],++_,g[i]=1;++y<=v;)w(e,i,i=s,s=c[y]);++_,g[s]=1}for(e=0,n=a.length;e<n;++e)f[e]=-1
for(e=0,n=h.length;e<n;++e){var x=h[e],b=x[0]+1,E=x[1]
for(w(e,c[E-1],i=c[b-1],s=c[b]);++b<=E;)w(e,i,i=s,s=c[b])}function w(t,e,n,i){if(f[n]!==t){f[n]=t
var r=p[n]
if(r>=0){var o=d[n]
r===e&&o===i||r===i&&o===e||(++_,g[n]=1)}else p[n]=e,d[n]=i}}function S(t){return u(a[t])}function C(t,e){return o(a[t],a[e])}f=p=d=null
var T,I=function(t,e,n,i,r){3===arguments.length&&(i=Array,r=null)
for(var o=new i(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),s=t-1,a=0;a<t;++a)o[a]=r
return{add:function(i){for(var a=e(i)&s,l=o[a],u=0;l!=r;){if(n(l,i))return!0
if(++u>=t)throw new Error("full hashset")
l=o[a=a+1&s]}return o[a]=i,!0},has:function(i){for(var a=e(i)&s,l=o[a],u=0;l!=r;){if(n(l,i))return!0
if(++u>=t)break
l=o[a=a+1&s]}return!1},values:function(){for(var t=[],e=0,n=o.length;e<n;++e){var i=o[e]
i!=r&&t.push(i)}return t}}}(1.4*_,u,o)
for(e=0,n=a.length;e<n;++e)g[T=c[e]]&&I.add(a[T])
return I}(t),p=t.coordinates,d=t.lines,g=t.rings
for(n=0,i=d.length;n<i;++n)for(var _=d[n],m=_[0],y=_[1];++m<y;)f.has(p[m])&&(e={0:m,1:_[1]},_[1]=m,_=_.next=e)
for(n=0,i=g.length;n<i;++n)for(var v=g[n],x=v[0],b=x,E=v[1],w=f.has(p[x]);++b<E;)f.has(p[b])&&(w?(e={0:b,1:v[1]},v[1]=b,v=v.next=e):(c=E-b,h(s=p,a=x,l=E),h(s,a,a+c),h(s,a+c,l),p[E]=p[x],w=!0,b=x))
return t}(function(t){var e=-1,n=[],r=[],o=[]
function s(t){t&&i.call(a,t.type)&&a[t.type](t)}var a={GeometryCollection:function(t){t.geometries.forEach(s)},LineString:function(t){t.arcs=l(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(l)},Polygon:function(t){t.arcs=t.arcs.map(u)},MultiPolygon:function(t){t.arcs=t.arcs.map(h)}}
function l(t){for(var i=0,r=t.length;i<r;++i)o[++e]=t[i]
var s={0:e-r+1,1:e}
return n.push(s),s}function u(t){for(var n=0,i=t.length;n<i;++n)o[++e]=t[n]
var s={0:e-i+1,1:e}
return r.push(s),s}function h(t){return t.map(u)}for(var c in t)s(t[c])
return{type:"Topology",coordinates:o,lines:n,rings:r,objects:t}}(t))),l=a.coordinates,d=r(1.4*a.arcs.length,g,_)
function m(t){t&&i.call(y,t.type)&&y[t.type](t)}t=a.objects,a.bbox=n,a.arcs=a.arcs.map((function(t,e){return d.set(t,e),l.slice(t[0],t[1]+1)})),delete a.coordinates,l=null
var y={GeometryCollection:function(t){t.geometries.forEach(m)},LineString:function(t){t.arcs=v(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(v)},Polygon:function(t){t.arcs=t.arcs.map(v)},MultiPolygon:function(t){t.arcs=t.arcs.map(x)}}
function v(t){var e=[]
do{var n=d.get(t)
e.push(t[0]<t[1]?n:~n)}while(t=t.next)
return e}function x(t){return t.map(v)}for(var b in t)m(t[b])
return s&&(a.transform=s,a.arcs=function(t){for(var e=-1,n=t.length;++e<n;){for(var i,r,o=t[e],s=0,a=1,l=o.length,u=o[0],h=u[0],c=u[1];++s<l;)i=(u=o[s])[0],r=u[1],i===h&&r===c||(o[a++]=[i-h,r-c],h=i,c=r)
1===a&&(o[a++]=[0,0]),o.length=a}return t}(a.arcs)),a}function g(t){var e,n=t[0],i=t[1]
return i<n&&(e=n,n=i,i=e),n+31*i}function _(t,e){var n,i=t[0],r=t[1],o=e[0],s=e[1]
return r<i&&(n=i,i=r,r=n),s<o&&(n=o,o=s,s=n),i===o&&r===s}},3011:function(t,e){!function(t){"use strict"
function e(){}function n(t){this.message=t||""}function i(t){this.message=t||""}function r(t){this.message=t||""}function o(){}function s(t){return null===t?Nt:t.color}function a(t){return null===t?null:t.parent}function l(t,e){null!==t&&(t.color=e)}function u(t){return null===t?null:t.left}function h(t){return null===t?null:t.right}function c(){this.root_=null,this.size_=0}function f(){}function p(){this.array_=[],arguments[0]instanceof xt&&this.addAll(arguments[0])}function d(){}function g(t){this.message=t||""}function _(){this.array_=[]}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object")
var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,i=1 in arguments&&parseInt(Number(arguments[1]),10)||0
i=i<0?Math.max(n+i,0):Math.min(i,n)
var r=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n
for(r=r<0?Math.max(n+arguments[2],0):Math.min(r,n);i<r;)e[i]=t,++i
return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)}
var m=function(){}
m.prototype.interfaces_=function(){return[]},m.prototype.getClass=function(){return m},m.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n}
var y=function(t){function e(e){t.call(this,e),this.name="IllegalArgumentException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),v=function(){},x={MAX_VALUE:{configurable:!0}}
v.isNaN=function(t){return Number.isNaN(t)},v.doubleToLongBits=function(t){return t},v.longBitsToDouble=function(t){return t},v.isInfinite=function(t){return!Number.isFinite(t)},x.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(v,x)
var b=function(){},E=function(){},w=function(){},S=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE
else if(1===arguments.length){var e=arguments[0]
this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},C={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}}
S.prototype.setOrdinate=function(t,e){switch(t){case S.X:this.x=e
break
case S.Y:this.y=e
break
case S.Z:this.z=e
break
default:throw new y("Invalid ordinate index: "+t)}},S.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0]
return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1]
return!!m.equalsWithTolerance(this.x,e.x,n)&&!!m.equalsWithTolerance(this.y,e.y,n)}},S.prototype.getOrdinate=function(t){switch(t){case S.X:return this.x
case S.Y:return this.y
case S.Z:return this.z}throw new y("Invalid ordinate index: "+t)},S.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||v.isNaN(this.z))&&v.isNaN(t.z)},S.prototype.equals=function(t){return t instanceof S&&this.equals2D(t)},S.prototype.equalInZ=function(t,e){return m.equalsWithTolerance(this.z,t.z,e)},S.prototype.compareTo=function(t){var e=t
return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},S.prototype.clone=function(){},S.prototype.copy=function(){return new S(this)},S.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},S.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,i=this.z-t.z
return Math.sqrt(e*e+n*n+i*i)},S.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y
return Math.sqrt(e*e+n*n)},S.prototype.hashCode=function(){var t=17
return 37*(t=37*t+S.hashCode(this.x))+S.hashCode(this.y)},S.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},S.prototype.interfaces_=function(){return[b,E,e]},S.prototype.getClass=function(){return S},S.hashCode=function(){if(1===arguments.length)return v.doubleToLongBits(arguments[0]),Math.trunc(0)},C.DimensionalComparator.get=function(){return T},C.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},C.NULL_ORDINATE.get=function(){return v.NaN},C.X.get=function(){return 0},C.Y.get=function(){return 1},C.Z.get=function(){return 2},Object.defineProperties(S,C)
var T=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0]
if(2!==e&&3!==e)throw new y("only 2 or 3 dimensions may be specified")
this._dimensionsToTest=e}}
T.prototype.compare=function(t,e){var n=t,i=e,r=T.compare(n.x,i.x)
if(0!==r)return r
var o=T.compare(n.y,i.y)
return 0!==o?o:this._dimensionsToTest<=2?0:T.compare(n.z,i.z)},T.prototype.interfaces_=function(){return[w]},T.prototype.getClass=function(){return T},T.compare=function(t,e){return t<e?-1:t>e?1:v.isNaN(t)?v.isNaN(e)?0:-1:v.isNaN(e)?1:0}
var I=function(){}
I.prototype.create=function(){},I.prototype.interfaces_=function(){return[]},I.prototype.getClass=function(){return I}
var P=function(){},A={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}}
P.prototype.interfaces_=function(){return[]},P.prototype.getClass=function(){return P},P.toLocationSymbol=function(t){switch(t){case P.EXTERIOR:return"e"
case P.BOUNDARY:return"b"
case P.INTERIOR:return"i"
case P.NONE:return"-"}throw new y("Unknown location value: "+t)},A.INTERIOR.get=function(){return 0},A.BOUNDARY.get=function(){return 1},A.EXTERIOR.get=function(){return 2},A.NONE.get=function(){return-1},Object.defineProperties(P,A)
var R=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},L=function(){},M={LOG_10:{configurable:!0}}
L.prototype.interfaces_=function(){return[]},L.prototype.getClass=function(){return L},L.log10=function(t){var e=Math.log(t)
return v.isInfinite(e)||v.isNaN(e)?e:e/L.LOG_10},L.min=function(t,e,n,i){var r=t
return e<r&&(r=e),n<r&&(r=n),i<r&&(r=i),r},L.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2]
return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var i=arguments[0],r=arguments[1],o=arguments[2]
return i<r?r:i>o?o:i}},L.wrap=function(t,e){return t<0?e- -t%e:t%e},L.max=function(){if(3===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[0]
return t>n&&(n=t),e>n&&(n=e),n}if(4===arguments.length){var i=arguments[1],r=arguments[2],o=arguments[3],s=arguments[0]
return i>s&&(s=i),r>s&&(s=r),o>s&&(s=o),s}},L.average=function(t,e){return(t+e)/2},M.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(L,M)
var O=function(t){this.str=t}
O.prototype.append=function(t){this.str+=t},O.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},O.prototype.toString=function(t){return this.str}
var N=function(t){this.value=t}
N.prototype.intValue=function(){return this.value},N.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},N.isNaN=function(t){return Number.isNaN(t)}
var D=function(){}
D.isWhitespace=function(t){return t<=32&&t>=0||127===t},D.toUpperCase=function(t){return t.toUpperCase()}
var F=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0)
else if(1===arguments.length)if("number"==typeof arguments[0]){var e=arguments[0]
this.init(e)}else if(arguments[0]instanceof t){var n=arguments[0]
this.init(n)}else"string"==typeof arguments[0]&&t.call(this,t.parse(arguments[0]))
else if(2===arguments.length){var i=arguments[0],r=arguments[1]
this.init(i,r)}},k={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}}
F.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},F.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),i=F.magnitude(n._hi),r=F.TEN.pow(i);(n=n.divide(r)).gt(F.TEN)?(n=n.divide(F.TEN),i+=1):n.lt(F.ONE)&&(n=n.multiply(F.TEN),i-=1)
for(var o=i+1,s=new O,a=F.MAX_PRINT_DIGITS-1,l=0;l<=a;l++){t&&l===o&&s.append(".")
var u=Math.trunc(n._hi)
if(u<0)break
var h=!1,c=0
u>9?(h=!0,c="9"):c="0"+u,s.append(c),n=n.subtract(F.valueOf(u)).multiply(F.TEN),h&&n.selfAdd(F.TEN)
var f=!0,p=F.magnitude(n._hi)
if(p<0&&Math.abs(p)>=a-l&&(f=!1),!f)break}return e[0]=i,s.toString()},F.prototype.sqr=function(){return this.multiply(this)},F.prototype.doubleValue=function(){return this._hi+this._lo},F.prototype.subtract=function(){if(arguments[0]instanceof F){var t=arguments[0]
return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0]
return this.add(-e)}},F.prototype.equals=function(){if(1===arguments.length){var t=arguments[0]
return this._hi===t._hi&&this._lo===t._lo}},F.prototype.isZero=function(){return 0===this._hi&&0===this._lo},F.prototype.selfSubtract=function(){if(arguments[0]instanceof F){var t=arguments[0]
return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0]
return this.isNaN()?this:this.selfAdd(-e,0)}},F.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},F.prototype.min=function(t){return this.le(t)?this:t},F.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof F){var t=arguments[0]
return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0]
return this.selfDivide(e,0)}}else if(2===arguments.length){var n,i,r,o,s=arguments[0],a=arguments[1],l=null,u=null,h=null,c=null
return r=this._hi/s,c=(l=(h=F.SPLIT*r)-(l=h-r))*(u=(c=F.SPLIT*s)-(u=c-s))-(o=r*s)+l*(i=s-u)+(n=r-l)*u+n*i,c=r+(h=(this._hi-o-c+this._lo-r*a)/s),this._hi=c,this._lo=r-c+h,this}},F.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},F.prototype.divide=function(){if(arguments[0]instanceof F){var t,e,n,i,r=arguments[0],o=null,s=null,a=null,l=null
return t=(n=this._hi/r._hi)-(o=(a=F.SPLIT*n)-(o=a-n)),l=o*(s=(l=F.SPLIT*r._hi)-(s=l-r._hi))-(i=n*r._hi)+o*(e=r._hi-s)+t*s+t*e,a=(this._hi-i-l+this._lo-n*r._lo)/r._hi,new F(l=n+a,n-l+a)}if("number"==typeof arguments[0]){var u=arguments[0]
return v.isNaN(u)?F.createNaN():F.copy(this).selfDivide(u,0)}},F.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},F.prototype.pow=function(t){if(0===t)return F.valueOf(1)
var e=new F(this),n=F.valueOf(1),i=Math.abs(t)
if(i>1)for(;i>0;)i%2==1&&n.selfMultiply(e),(i/=2)>0&&(e=e.sqr())
else n=e
return t<0?n.reciprocal():n},F.prototype.ceil=function(){if(this.isNaN())return F.NaN
var t=Math.ceil(this._hi),e=0
return t===this._hi&&(e=Math.ceil(this._lo)),new F(t,e)},F.prototype.compareTo=function(t){var e=t
return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},F.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},F.prototype.setValue=function(){if(arguments[0]instanceof F){var t=arguments[0]
return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0]
return this.init(e),this}},F.prototype.max=function(t){return this.ge(t)?this:t},F.prototype.sqrt=function(){if(this.isZero())return F.valueOf(0)
if(this.isNegative())return F.NaN
var t=1/Math.sqrt(this._hi),e=this._hi*t,n=F.valueOf(e),i=this.subtract(n.sqr())._hi*(.5*t)
return n.add(i)},F.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof F){var t=arguments[0]
return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e,n,i,r,o,s=arguments[0],a=null
return a=(i=this._hi+s)-(r=i-this._hi),n=(o=(a=s-r+(this._hi-a))+this._lo)+(i-(e=i+o)),this._hi=e+n,this._lo=n+(e-this._hi),this}}else if(2===arguments.length){var l,u,h,c,f=arguments[0],p=arguments[1],d=null,g=null,_=null
h=this._hi+f,u=this._lo+p,g=h-(_=h-this._hi),d=u-(c=u-this._lo)
var m=(l=h+(_=(g=f-_+(this._hi-g))+u))+(_=(d=p-c+(this._lo-d))+(_+(h-l))),y=_+(l-m)
return this._hi=m,this._lo=y,this}},F.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof F){var t=arguments[0]
return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0]
return this.selfMultiply(e,0)}}else if(2===arguments.length){var n,i,r=arguments[0],o=arguments[1],s=null,a=null,l=null,u=null
s=(l=F.SPLIT*this._hi)-this._hi,u=F.SPLIT*r,s=l-s,n=this._hi-s,a=u-r
var h=(l=this._hi*r)+(u=s*(a=u-a)-l+s*(i=r-a)+n*a+n*i+(this._hi*o+this._lo*r)),c=u+(s=l-h)
return this._hi=h,this._lo=c,this}},F.prototype.selfSqr=function(){return this.selfMultiply(this)},F.prototype.floor=function(){if(this.isNaN())return F.NaN
var t=Math.floor(this._hi),e=0
return t===this._hi&&(e=Math.floor(this._lo)),new F(t,e)},F.prototype.negate=function(){return this.isNaN()?this:new F(-this._hi,-this._lo)},F.prototype.clone=function(){},F.prototype.multiply=function(){if(arguments[0]instanceof F){var t=arguments[0]
return t.isNaN()?F.createNaN():F.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0]
return v.isNaN(e)?F.createNaN():F.copy(this).selfMultiply(e,0)}},F.prototype.isNaN=function(){return v.isNaN(this._hi)},F.prototype.intValue=function(){return Math.trunc(this._hi)},F.prototype.toString=function(){var t=F.magnitude(this._hi)
return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},F.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString()
if(null!==t)return t
var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),i=e[0]+1,r=n
if("."===n.charAt(0))r="0"+n
else if(i<0)r="0."+F.stringOfChar("0",-i)+n
else if(-1===n.indexOf(".")){var o=i-n.length
r=n+F.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+r:r},F.prototype.reciprocal=function(){var t,e,n,i,r=null,o=null,s=null,a=null
t=(n=1/this._hi)-(r=(s=F.SPLIT*n)-(r=s-n)),o=(a=F.SPLIT*this._hi)-this._hi
var l=n+(s=(1-(i=n*this._hi)-(a=r*(o=a-o)-i+r*(e=this._hi-o)+t*o+t*e)-n*this._lo)/this._hi)
return new F(l,n-l+s)},F.prototype.toSciNotation=function(){if(this.isZero())return F.SCI_NOT_ZERO
var t=this.getSpecialNumberString()
if(null!==t)return t
var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),i=F.SCI_NOT_EXPONENT_CHAR+e[0]
if("0"===n.charAt(0))throw new Error("Found leading zero: "+n)
var r=""
n.length>1&&(r=n.substring(1))
var o=n.charAt(0)+"."+r
return this.isNegative()?"-"+o+i:o+i},F.prototype.abs=function(){return this.isNaN()?F.NaN:this.isNegative()?this.negate():new F(this)},F.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},F.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},F.prototype.add=function(){if(arguments[0]instanceof F){var t=arguments[0]
return F.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0]
return F.copy(this).selfAdd(e)}},F.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0]
this._hi=t,this._lo=0}else if(arguments[0]instanceof F){var e=arguments[0]
this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[0],i=arguments[1]
this._hi=n,this._lo=i}},F.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},F.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},F.prototype.trunc=function(){return this.isNaN()?F.NaN:this.isPositive()?this.floor():this.ceil()},F.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},F.prototype.interfaces_=function(){return[e,b,E]},F.prototype.getClass=function(){return F},F.sqr=function(t){return F.valueOf(t).selfMultiply(t)},F.valueOf=function(){return"string"==typeof arguments[0]?F.parse(arguments[0]):"number"==typeof arguments[0]?new F(arguments[0]):void 0},F.sqrt=function(t){return F.valueOf(t).sqrt()},F.parse=function(t){for(var e=0,n=t.length;D.isWhitespace(t.charAt(e));)e++
var i=!1
if(e<n){var r=t.charAt(e)
"-"!==r&&"+"!==r||(e++,"-"===r&&(i=!0))}for(var o=new F,s=0,a=0,l=0;!(e>=n);){var u=t.charAt(e)
if(e++,D.isDigit(u)){var h=u-"0"
o.selfMultiply(F.TEN),o.selfAdd(h),s++}else{if("."!==u){if("e"===u||"E"===u){var c=t.substring(e)
try{l=N.parseInt(c)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+c+" in string "+t):e}break}throw new Error("Unexpected character '"+u+"' at position "+e+" in string "+t)}a=s}}var f=o,p=s-a-l
if(0===p)f=o
else if(p>0){var d=F.TEN.pow(p)
f=o.divide(d)}else if(p<0){var g=F.TEN.pow(-p)
f=o.multiply(g)}return i?f.negate():f},F.createNaN=function(){return new F(v.NaN,v.NaN)},F.copy=function(t){return new F(t)},F.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),i=Math.trunc(Math.floor(n))
return 10*Math.pow(10,i)<=e&&(i+=1),i},F.stringOfChar=function(t,e){for(var n=new O,i=0;i<e;i++)n.append(t)
return n.toString()},k.PI.get=function(){return new F(3.141592653589793,12246467991473532e-32)},k.TWO_PI.get=function(){return new F(6.283185307179586,24492935982947064e-32)},k.PI_2.get=function(){return new F(1.5707963267948966,6123233995736766e-32)},k.E.get=function(){return new F(2.718281828459045,14456468917292502e-32)},k.NaN.get=function(){return new F(v.NaN,v.NaN)},k.EPS.get=function(){return 123259516440783e-46},k.SPLIT.get=function(){return 134217729},k.MAX_PRINT_DIGITS.get=function(){return 32},k.TEN.get=function(){return F.valueOf(10)},k.ONE.get=function(){return F.valueOf(1)},k.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},k.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(F,k)
var j=function(){},z={DP_SAFE_EPSILON:{configurable:!0}}
j.prototype.interfaces_=function(){return[]},j.prototype.getClass=function(){return j},j.orientationIndex=function(t,e,n){var i=j.orientationIndexFilter(t,e,n)
if(i<=1)return i
var r=F.valueOf(e.x).selfAdd(-t.x),o=F.valueOf(e.y).selfAdd(-t.y),s=F.valueOf(n.x).selfAdd(-e.x),a=F.valueOf(n.y).selfAdd(-e.y)
return r.selfMultiply(a).selfSubtract(o.selfMultiply(s)).signum()},j.signOfDet2x2=function(t,e,n,i){return t.multiply(i).selfSubtract(e.multiply(n)).signum()},j.intersection=function(t,e,n,i){var r=F.valueOf(i.y).selfSubtract(n.y).selfMultiply(F.valueOf(e.x).selfSubtract(t.x)),o=F.valueOf(i.x).selfSubtract(n.x).selfMultiply(F.valueOf(e.y).selfSubtract(t.y)),s=r.subtract(o),a=F.valueOf(i.x).selfSubtract(n.x).selfMultiply(F.valueOf(t.y).selfSubtract(n.y)),l=F.valueOf(i.y).selfSubtract(n.y).selfMultiply(F.valueOf(t.x).selfSubtract(n.x)),u=a.subtract(l).selfDivide(s).doubleValue(),h=F.valueOf(t.x).selfAdd(F.valueOf(e.x).selfSubtract(t.x).selfMultiply(u)).doubleValue(),c=F.valueOf(e.x).selfSubtract(t.x).selfMultiply(F.valueOf(t.y).selfSubtract(n.y)),f=F.valueOf(e.y).selfSubtract(t.y).selfMultiply(F.valueOf(t.x).selfSubtract(n.x)),p=c.subtract(f).selfDivide(s).doubleValue(),d=F.valueOf(n.y).selfAdd(F.valueOf(i.y).selfSubtract(n.y).selfMultiply(p)).doubleValue()
return new S(h,d)},j.orientationIndexFilter=function(t,e,n){var i=null,r=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),s=r-o
if(r>0){if(o<=0)return j.signum(s)
i=r+o}else{if(!(r<0))return j.signum(s)
if(o>=0)return j.signum(s)
i=-r-o}var a=j.DP_SAFE_EPSILON*i
return s>=a||-s>=a?j.signum(s):2},j.signum=function(t){return t>0?1:t<0?-1:0},z.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(j,z)
var G=function(){},B={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}}
B.X.get=function(){return 0},B.Y.get=function(){return 1},B.Z.get=function(){return 2},B.M.get=function(){return 3},G.prototype.setOrdinate=function(t,e,n){},G.prototype.size=function(){},G.prototype.getOrdinate=function(t,e){},G.prototype.getCoordinate=function(){},G.prototype.getCoordinateCopy=function(t){},G.prototype.getDimension=function(){},G.prototype.getX=function(t){},G.prototype.clone=function(){},G.prototype.expandEnvelope=function(t){},G.prototype.copy=function(){},G.prototype.getY=function(t){},G.prototype.toCoordinateArray=function(){},G.prototype.interfaces_=function(){return[E]},G.prototype.getClass=function(){return G},Object.defineProperties(G,B)
var q=function(){},U=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(q),Z=function(){}
Z.arraycopy=function(t,e,n,i,r){for(var o=0,s=e;s<e+r;s++)n[i+o]=t[s],o++},Z.getProperty=function(t){return{"line.separator":"\n"}[t]}
var X=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1
else if(1===arguments.length){var e=arguments[0]
this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],i=arguments[1]
this.x=n,this.y=i,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var r=arguments[0],o=arguments[1]
this.x=r.y*o.w-o.y*r.w,this.y=o.x*r.w-r.x*o.w,this.w=r.x*o.y-o.x*r.y}else if(arguments[0]instanceof S&&arguments[1]instanceof S){var s=arguments[0],a=arguments[1]
this.x=s.y-a.y,this.y=a.x-s.x,this.w=s.x*a.y-a.x*s.y}}else if(3===arguments.length){var l=arguments[0],u=arguments[1],h=arguments[2]
this.x=l,this.y=u,this.w=h}else if(4===arguments.length){var c=arguments[0],f=arguments[1],p=arguments[2],d=arguments[3],g=c.y-f.y,_=f.x-c.x,m=c.x*f.y-f.x*c.y,y=p.y-d.y,v=d.x-p.x,x=p.x*d.y-d.x*p.y
this.x=_*x-v*m,this.y=y*m-g*x,this.w=g*v-y*_}}
X.prototype.getY=function(){var t=this.y/this.w
if(v.isNaN(t)||v.isInfinite(t))throw new U
return t},X.prototype.getX=function(){var t=this.x/this.w
if(v.isNaN(t)||v.isInfinite(t))throw new U
return t},X.prototype.getCoordinate=function(){var t=new S
return t.x=this.getX(),t.y=this.getY(),t},X.prototype.interfaces_=function(){return[]},X.prototype.getClass=function(){return X},X.intersection=function(t,e,n,i){var r=t.y-e.y,o=e.x-t.x,s=t.x*e.y-e.x*t.y,a=n.y-i.y,l=i.x-n.x,u=n.x*i.y-i.x*n.y,h=r*l-a*o,c=(o*u-l*s)/h,f=(a*s-r*u)/h
if(v.isNaN(c)||v.isInfinite(c)||v.isNaN(f)||v.isInfinite(f))throw new U
return new S(c,f)}
var Y=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init()
else if(1===arguments.length){if(arguments[0]instanceof S){var e=arguments[0]
this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0]
this.init(n)}}else if(2===arguments.length){var i=arguments[0],r=arguments[1]
this.init(i.x,r.x,i.y,r.y)}else if(4===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],l=arguments[3]
this.init(o,s,a,l)}},V={serialVersionUID:{configurable:!0}}
Y.prototype.getArea=function(){return this.getWidth()*this.getHeight()},Y.prototype.equals=function(t){if(!(t instanceof Y))return!1
var e=t
return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},Y.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new Y
var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,i=this._maxx<t._maxx?this._maxx:t._maxx,r=this._maxy<t._maxy?this._maxy:t._maxy
return new Y(e,i,n,r)},Y.prototype.isNull=function(){return this._maxx<this._minx},Y.prototype.getMaxX=function(){return this._maxx},Y.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof S){var t=arguments[0]
return this.covers(t.x,t.y)}if(arguments[0]instanceof Y){var e=arguments[0]
return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],i=arguments[1]
return!this.isNull()&&n>=this._minx&&n<=this._maxx&&i>=this._miny&&i<=this._maxy}},Y.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof Y){var t=arguments[0]
return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof S){var e=arguments[0]
return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1]
return!this.isNull()&&!(n>this._maxx||n<this._minx||i>this._maxy||i<this._miny)}},Y.prototype.getMinY=function(){return this._miny},Y.prototype.getMinX=function(){return this._minx},Y.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof S){var t=arguments[0]
this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof Y){var e=arguments[0]
if(e.isNull())return null
this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],i=arguments[1]
this.isNull()?(this._minx=n,this._maxx=n,this._miny=i,this._maxy=i):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),i<this._miny&&(this._miny=i),i>this._maxy&&(this._maxy=i))}},Y.prototype.minExtent=function(){if(this.isNull())return 0
var t=this.getWidth(),e=this.getHeight()
return t<e?t:e},Y.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},Y.prototype.compareTo=function(t){var e=t
return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},Y.prototype.translate=function(t,e){if(this.isNull())return null
this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},Y.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},Y.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},Y.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},Y.prototype.maxExtent=function(){if(this.isNull())return 0
var t=this.getWidth(),e=this.getHeight()
return t>e?t:e},Y.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0]
this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1]
if(this.isNull())return null
this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},Y.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof Y){var t=arguments[0]
return this.covers(t)}if(arguments[0]instanceof S){var e=arguments[0]
return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1]
return this.covers(n,i)}},Y.prototype.centre=function(){return this.isNull()?null:new S((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},Y.prototype.init=function(){if(0===arguments.length)this.setToNull()
else if(1===arguments.length){if(arguments[0]instanceof S){var t=arguments[0]
this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof Y){var e=arguments[0]
this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],i=arguments[1]
this.init(n.x,i.x,n.y,i.y)}else if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3]
r<o?(this._minx=r,this._maxx=o):(this._minx=o,this._maxx=r),s<a?(this._miny=s,this._maxy=a):(this._miny=a,this._maxy=s)}},Y.prototype.getMaxY=function(){return this._maxy},Y.prototype.distance=function(t){if(this.intersects(t))return 0
var e=0
this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx)
var n=0
return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},Y.prototype.hashCode=function(){var t=17
return 37*(t=37*(t=37*(t=37*t+S.hashCode(this._minx))+S.hashCode(this._maxx))+S.hashCode(this._miny))+S.hashCode(this._maxy)},Y.prototype.interfaces_=function(){return[b,e]},Y.prototype.getClass=function(){return Y},Y.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2]
return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],s=arguments[3],a=Math.min(o.x,s.x),l=Math.max(o.x,s.x),u=Math.min(i.x,r.x),h=Math.max(i.x,r.x)
return!(u>l||h<a||(a=Math.min(o.y,s.y),l=Math.max(o.y,s.y),u=Math.min(i.y,r.y),h=Math.max(i.y,r.y),u>l||h<a))}},V.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(Y,V)
var W={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},H=function(t){this.geometryFactory=t||new me}
H.prototype.read=function(t){var e,n,i
t=t.replace(/[\n\r]/g," ")
var r=W.typeStr.exec(t)
if(-1!==t.search("EMPTY")&&((r=W.emptyTypeStr.exec(t))[2]=void 0),r&&(n=r[1].toLowerCase(),i=r[2],K[n]&&(e=K[n].apply(this,[i]))),void 0===e)throw new Error("Could not parse WKT "+t)
return e},H.prototype.write=function(t){return this.extractGeometry(t)},H.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase()
if(!$[e])return null
var n=e.toUpperCase()
return t.isEmpty()?n+" EMPTY":n+"("+$[e].apply(this,[t])+")"}
var $={coordinate:function(t){return t.x+" "+t.y},point:function(t){return $.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push("("+$.point.apply(this,[t._geometries[n]])+")")
return e.join(",")},linestring:function(t){for(var e=[],n=0,i=t._points._coordinates.length;n<i;++n)e.push($.coordinate.apply(this,[t._points._coordinates[n]]))
return e.join(",")},linearring:function(t){for(var e=[],n=0,i=t._points._coordinates.length;n<i;++n)e.push($.coordinate.apply(this,[t._points._coordinates[n]]))
return e.join(",")},multilinestring:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push("("+$.linestring.apply(this,[t._geometries[n]])+")")
return e.join(",")},polygon:function(t){var e=[]
e.push("("+$.linestring.apply(this,[t._shell])+")")
for(var n=0,i=t._holes.length;n<i;++n)e.push("("+$.linestring.apply(this,[t._holes[n]])+")")
return e.join(",")},multipolygon:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push("("+$.polygon.apply(this,[t._geometries[n]])+")")
return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push(this.extractGeometry(t._geometries[n]))
return e.join(",")}},K={point:function(t){if(void 0===t)return this.geometryFactory.createPoint()
var e=t.trim().split(W.spaces)
return this.geometryFactory.createPoint(new S(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint()
for(var e,n=t.trim().split(","),i=[],r=0,o=n.length;r<o;++r)e=n[r].replace(W.trimParens,"$1"),i.push(K.point.apply(this,[e]))
return this.geometryFactory.createMultiPoint(i)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString()
for(var e,n=t.trim().split(","),i=[],r=0,o=n.length;r<o;++r)e=n[r].trim().split(W.spaces),i.push(new S(Number.parseFloat(e[0]),Number.parseFloat(e[1])))
return this.geometryFactory.createLineString(i)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing()
for(var e,n=t.trim().split(","),i=[],r=0,o=n.length;r<o;++r)e=n[r].trim().split(W.spaces),i.push(new S(Number.parseFloat(e[0]),Number.parseFloat(e[1])))
return this.geometryFactory.createLinearRing(i)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString()
for(var e,n=t.trim().split(W.parenComma),i=[],r=0,o=n.length;r<o;++r)e=n[r].replace(W.trimParens,"$1"),i.push(K.linestring.apply(this,[e]))
return this.geometryFactory.createMultiLineString(i)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon()
for(var e,n,i,r,o=t.trim().split(W.parenComma),s=[],a=0,l=o.length;a<l;++a)e=o[a].replace(W.trimParens,"$1"),n=K.linestring.apply(this,[e]),i=this.geometryFactory.createLinearRing(n._points),0===a?r=i:s.push(i)
return this.geometryFactory.createPolygon(r,s)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon()
for(var e,n=t.trim().split(W.doubleParenComma),i=[],r=0,o=n.length;r<o;++r)e=n[r].replace(W.trimParens,"$1"),i.push(K.polygon.apply(this,[e]))
return this.geometryFactory.createMultiPolygon(i)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection()
for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],i=0,r=e.length;i<r;++i)n.push(this.read(e[i]))
return this.geometryFactory.createGeometryCollection(n)}},J=function(t){this.parser=new H(t)}
J.prototype.write=function(t){return this.parser.write(t)},J.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented")
return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"}
var Q=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),tt=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this)
else if(1===arguments.length){var e=arguments[0]
t.call(this,e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Q),et=function(){}
et.prototype.interfaces_=function(){return[]},et.prototype.getClass=function(){return et},et.shouldNeverReachHere=function(){if(0===arguments.length)et.shouldNeverReachHere(null)
else if(1===arguments.length){var t=arguments[0]
throw new tt("Should never reach here"+(null!==t?": "+t:""))}},et.isTrue=function(){var t
if(1===arguments.length)et.isTrue(arguments[0],null)
else if(2===arguments.length&&(t=arguments[1],!arguments[0]))throw null===t?new tt:new tt(t)},et.equals=function(){var t,e,n
if(2===arguments.length)et.equals(t=arguments[0],e=arguments[1],null)
else if(3===arguments.length&&(t=arguments[0],n=arguments[2],!(e=arguments[1]).equals(t)))throw new tt("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))}
var nt=function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new S,this._intPt[1]=new S,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},it={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}}
nt.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},nt.prototype.getTopologySummary=function(){var t=new O
return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},nt.prototype.computeIntersection=function(t,e,n,i){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=i,this._result=this.computeIntersect(t,e,n,i)},nt.prototype.getIntersectionNum=function(){return this._result},nt.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1))
else if(1===arguments.length){var t=arguments[0]
this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},nt.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},nt.prototype.setPrecisionModel=function(t){this._precisionModel=t},nt.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1)
if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0
return!1}},nt.prototype.getIntersection=function(t){return this._intPt[t]},nt.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},nt.prototype.hasIntersection=function(){return this._result!==nt.NO_INTERSECTION},nt.prototype.getEdgeDistance=function(t,e){return nt.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},nt.prototype.isCollinear=function(){return this._result===nt.COLLINEAR_INTERSECTION},nt.prototype.toString=function(){return J.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+J.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},nt.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},nt.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0
return!1},nt.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},nt.prototype.interfaces_=function(){return[]},nt.prototype.getClass=function(){return nt},nt.computeEdgeDistance=function(t,e,n){var i=Math.abs(n.x-e.x),r=Math.abs(n.y-e.y),o=-1
if(t.equals(e))o=0
else if(t.equals(n))o=i>r?i:r
else{var s=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y)
0!==(o=i>r?s:a)||t.equals(e)||(o=Math.max(s,a))}return et.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},nt.nonRobustComputeEdgeDistance=function(t,e,n){var i=t.x-e.x,r=t.y-e.y,o=Math.sqrt(i*i+r*r)
return et.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},it.DONT_INTERSECT.get=function(){return 0},it.DO_INTERSECT.get=function(){return 1},it.COLLINEAR.get=function(){return 2},it.NO_INTERSECTION.get=function(){return 0},it.POINT_INTERSECTION.get=function(){return 1},it.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(nt,it)
var rt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new Y(this._inputLines[0][0],this._inputLines[0][1]),n=new Y(this._inputLines[1][0],this._inputLines[1][1])
return e.contains(t)&&n.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments)
var e=arguments[0],n=arguments[1],i=arguments[2]
if(this._isProper=!1,Y.intersects(n,i,e)&&0===at.orientationIndex(n,i,e)&&0===at.orientationIndex(i,n,e))return this._isProper=!0,(e.equals(n)||e.equals(i))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null
this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,n,i,r){r.x=this.smallestInAbsValue(t.x,e.x,n.x,i.x),r.y=this.smallestInAbsValue(t.y,e.y,n.y,i.y),t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,n.x-=r.x,n.y-=r.y,i.x-=r.x,i.y-=r.y},e.prototype.safeHCoordinateIntersection=function(t,n,i,r){var o=null
try{o=X.intersection(t,n,i,r)}catch(s){if(!(s instanceof U))throw s
o=e.nearestEndpoint(t,n,i,r)}return o},e.prototype.intersection=function(t,n,i,r){var o=this.intersectionWithNormalization(t,n,i,r)
return this.isInSegmentEnvelopes(o)||(o=new S(e.nearestEndpoint(t,n,i,r))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,n,i){var r=t,o=Math.abs(r)
return Math.abs(e)<o&&(r=e,o=Math.abs(e)),Math.abs(n)<o&&(r=n,o=Math.abs(n)),Math.abs(i)<o&&(r=i),r},e.prototype.checkDD=function(t,e,n,i,r){var o=j.intersection(t,e,n,i),s=this.isInSegmentEnvelopes(o)
Z.out.println("DD in env = "+s+"  --------------------- "+o),r.distance(o)>1e-4&&Z.out.println("Distance = "+r.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,n,i){var r=new S(t),o=new S(e),s=new S(n),a=new S(i),l=new S
this.normalizeToEnvCentre(r,o,s,a,l)
var u=this.safeHCoordinateIntersection(r,o,s,a)
return u.x+=l.x,u.y+=l.y,u},e.prototype.computeCollinearIntersection=function(e,n,i,r){var o=Y.intersects(e,n,i),s=Y.intersects(e,n,r),a=Y.intersects(i,r,e),l=Y.intersects(i,r,n)
return o&&s?(this._intPt[0]=i,this._intPt[1]=r,t.COLLINEAR_INTERSECTION):a&&l?(this._intPt[0]=e,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):o&&a?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||s||l?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&l?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||s||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&a?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||o||l?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&l?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||o||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,n,i,r){var o=t.x<e.x?t.x:e.x,s=t.y<e.y?t.y:e.y,a=t.x>e.x?t.x:e.x,l=t.y>e.y?t.y:e.y,u=n.x<i.x?n.x:i.x,h=n.y<i.y?n.y:i.y,c=n.x>i.x?n.x:i.x,f=n.y>i.y?n.y:i.y,p=((o>u?o:u)+(a<c?a:c))/2,d=((s>h?s:h)+(l<f?l:f))/2
r.x=p,r.y=d,t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,n.x-=r.x,n.y-=r.y,i.x-=r.x,i.y-=r.y},e.prototype.computeIntersect=function(e,n,i,r){if(this._isProper=!1,!Y.intersects(e,n,i,r))return t.NO_INTERSECTION
var o=at.orientationIndex(e,n,i),s=at.orientationIndex(e,n,r)
if(o>0&&s>0||o<0&&s<0)return t.NO_INTERSECTION
var a=at.orientationIndex(i,r,e),l=at.orientationIndex(i,r,n)
return a>0&&l>0||a<0&&l<0?t.NO_INTERSECTION:0===o&&0===s&&0===a&&0===l?this.computeCollinearIntersection(e,n,i,r):(0===o||0===s||0===a||0===l?(this._isProper=!1,e.equals2D(i)||e.equals2D(r)?this._intPt[0]=e:n.equals2D(i)||n.equals2D(r)?this._intPt[0]=n:0===o?this._intPt[0]=new S(i):0===s?this._intPt[0]=new S(r):0===a?this._intPt[0]=new S(e):0===l&&(this._intPt[0]=new S(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,i,r)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,n,i){var r=t,o=at.distancePointLine(t,n,i),s=at.distancePointLine(e,n,i)
return s<o&&(o=s,r=e),(s=at.distancePointLine(n,t,e))<o&&(o=s,r=n),(s=at.distancePointLine(i,t,e))<o&&(o=s,r=i),r},e}(nt),ot=function(){}
ot.prototype.interfaces_=function(){return[]},ot.prototype.getClass=function(){return ot},ot.orientationIndex=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,o=n.x-e.x,s=n.y-e.y
return ot.signOfDet2x2(i,r,o,s)},ot.signOfDet2x2=function(t,e,n,i){var r=null,o=null,s=null
if(r=1,0===t||0===i)return 0===e||0===n?0:e>0?n>0?-r:r:n>0?r:-r
if(0===e||0===n)return i>0?t>0?r:-r:t>0?-r:r
if(e>0?i>0?e<=i||(r=-r,o=t,t=n,n=o,o=e,e=i,i=o):e<=-i?(r=-r,n=-n,i=-i):(o=t,t=-n,n=o,o=e,e=-i,i=o):i>0?-e<=i?(r=-r,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=i,i=o):e>=i?(t=-t,e=-e,n=-n,i=-i):(r=-r,o=-t,t=-n,n=o,o=-e,e=-i,i=o),t>0){if(!(n>0))return r
if(!(t<=n))return r}else{if(n>0)return-r
if(!(t>=n))return-r
r=-r,t=-t,n=-n}for(;;){if((i-=(s=Math.floor(n/t))*e)<0)return-r
if(i>e)return r
if(t>(n-=s*t)+n){if(e<i+i)return r}else{if(e>i+i)return-r
n=t-n,i=e-i,r=-r}if(0===i)return 0===n?0:-r
if(0===n)return r
if((e-=(s=Math.floor(t/n))*i)<0)return r
if(e>i)return-r
if(n>(t-=s*n)+t){if(i<e+e)return-r}else{if(i>e+e)return r
t=n-t,e=i-e,r=-r}if(0===e)return 0===t?0:r
if(0===t)return-r}}
var st=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1
var t=arguments[0]
this._p=t}
st.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null
if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null
if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,i=e.x
return n>i&&(n=e.x,i=t.x),this._p.x>=n&&this._p.x<=i&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var r=t.x-this._p.x,o=t.y-this._p.y,s=e.x-this._p.x,a=e.y-this._p.y,l=ot.signOfDet2x2(r,o,s,a)
if(0===l)return this._isPointOnSegment=!0,null
a<o&&(l=-l),l>0&&this._crossingCount++}},st.prototype.isPointInPolygon=function(){return this.getLocation()!==P.EXTERIOR},st.prototype.getLocation=function(){return this._isPointOnSegment?P.BOUNDARY:this._crossingCount%2==1?P.INTERIOR:P.EXTERIOR},st.prototype.isOnSegment=function(){return this._isPointOnSegment},st.prototype.interfaces_=function(){return[]},st.prototype.getClass=function(){return st},st.locatePointInRing=function(){if(arguments[0]instanceof S&&R(arguments[1],G)){for(var t=arguments[1],e=new st(arguments[0]),n=new S,i=new S,r=1;r<t.size();r++)if(t.getCoordinate(r,n),t.getCoordinate(r-1,i),e.countSegment(n,i),e.isOnSegment())return e.getLocation()
return e.getLocation()}if(arguments[0]instanceof S&&arguments[1]instanceof Array){for(var o=arguments[1],s=new st(arguments[0]),a=1;a<o.length;a++){var l=o[a],u=o[a-1]
if(s.countSegment(l,u),s.isOnSegment())return s.getLocation()}return s.getLocation()}}
var at=function(){},lt={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}}
at.prototype.interfaces_=function(){return[]},at.prototype.getClass=function(){return at},at.orientationIndex=function(t,e,n){return j.orientationIndex(t,e,n)},at.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0]
if(t.length<3)return 0
for(var e=0,n=t[0].x,i=1;i<t.length-1;i++){var r=t[i].x-n,o=t[i+1].y
e+=r*(t[i-1].y-o)}return e/2}if(R(arguments[0],G)){var s=arguments[0],a=s.size()
if(a<3)return 0
var l=new S,u=new S,h=new S
s.getCoordinate(0,u),s.getCoordinate(1,h)
var c=u.x
h.x-=c
for(var f=0,p=1;p<a-1;p++)l.y=u.y,u.x=h.x,u.y=h.y,s.getCoordinate(p+1,h),h.x-=c,f+=u.x*(l.y-h.y)
return f/2}},at.distanceLineLine=function(t,e,n,i){if(t.equals(e))return at.distancePointLine(t,n,i)
if(n.equals(i))return at.distancePointLine(i,t,e)
var r=!1
if(Y.intersects(t,e,n,i)){var o=(e.x-t.x)*(i.y-n.y)-(e.y-t.y)*(i.x-n.x)
if(0===o)r=!0
else{var s=(t.y-n.y)*(i.x-n.x)-(t.x-n.x)*(i.y-n.y),a=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,l=s/o;(l<0||l>1||a<0||a>1)&&(r=!0)}}else r=!0
return r?L.min(at.distancePointLine(t,n,i),at.distancePointLine(e,n,i),at.distancePointLine(n,t,e),at.distancePointLine(i,t,e)):0},at.isPointInRing=function(t,e){return at.locatePointInRing(t,e)!==P.EXTERIOR},at.computeLength=function(t){var e=t.size()
if(e<=1)return 0
var n=0,i=new S
t.getCoordinate(0,i)
for(var r=i.x,o=i.y,s=1;s<e;s++){t.getCoordinate(s,i)
var a=i.x,l=i.y,u=a-r,h=l-o
n+=Math.sqrt(u*u+h*h),r=a,o=l}return n},at.isCCW=function(t){var e=t.length-1
if(e<3)throw new y("Ring has fewer than 4 points, so orientation cannot be determined")
for(var n=t[0],i=0,r=1;r<=e;r++){var o=t[r]
o.y>n.y&&(n=o,i=r)}var s=i
do{(s-=1)<0&&(s=e)}while(t[s].equals2D(n)&&s!==i)
var a=i
do{a=(a+1)%e}while(t[a].equals2D(n)&&a!==i)
var l=t[s],u=t[a]
if(l.equals2D(n)||u.equals2D(n)||l.equals2D(u))return!1
var h=at.computeOrientation(l,n,u)
return 0===h?l.x>u.x:h>0},at.locatePointInRing=function(t,e){return st.locatePointInRing(t,e)},at.distancePointLinePerpendicular=function(t,e,n){var i=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),r=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/i
return Math.abs(r)*Math.sqrt(i)},at.computeOrientation=function(t,e,n){return at.orientationIndex(t,e,n)},at.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1]
if(0===e.length)throw new y("Line array must contain at least one vertex")
for(var n=t.distance(e[0]),i=0;i<e.length-1;i++){var r=at.distancePointLine(t,e[i],e[i+1])
r<n&&(n=r)}return n}if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2]
if(s.x===a.x&&s.y===a.y)return o.distance(s)
var l=(a.x-s.x)*(a.x-s.x)+(a.y-s.y)*(a.y-s.y),u=((o.x-s.x)*(a.x-s.x)+(o.y-s.y)*(a.y-s.y))/l
if(u<=0)return o.distance(s)
if(u>=1)return o.distance(a)
var h=((s.y-o.y)*(a.x-s.x)-(s.x-o.x)*(a.y-s.y))/l
return Math.abs(h)*Math.sqrt(l)}},at.isOnLine=function(t,e){for(var n=new rt,i=1;i<e.length;i++){var r=e[i-1],o=e[i]
if(n.computeIntersection(t,r,o),n.hasIntersection())return!0}return!1},lt.CLOCKWISE.get=function(){return-1},lt.RIGHT.get=function(){return at.CLOCKWISE},lt.COUNTERCLOCKWISE.get=function(){return 1},lt.LEFT.get=function(){return at.COUNTERCLOCKWISE},lt.COLLINEAR.get=function(){return 0},lt.STRAIGHT.get=function(){return at.COLLINEAR},Object.defineProperties(at,lt)
var ut=function(){}
ut.prototype.filter=function(t){},ut.prototype.interfaces_=function(){return[]},ut.prototype.getClass=function(){return ut}
var ht=function(){var t=arguments[0]
this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},ct={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}}
ht.prototype.isGeometryCollection=function(){return this.getSortIndex()===ht.SORTINDEX_GEOMETRYCOLLECTION},ht.prototype.getFactory=function(){return this._factory},ht.prototype.getGeometryN=function(t){return this},ht.prototype.getArea=function(){return 0},ht.prototype.isRectangle=function(){return!1},ht.prototype.equals=function(){if(arguments[0]instanceof ht){var t=arguments[0]
return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0]
if(!(e instanceof ht))return!1
var n=e
return this.equalsExact(n)}},ht.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},ht.prototype.geometryChanged=function(){this.apply(ht.geometryChangedFilter)},ht.prototype.geometryChangedAction=function(){this._envelope=null},ht.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},ht.prototype.getLength=function(){return 0},ht.prototype.getNumGeometries=function(){return 1},ht.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t
return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],i=arguments[1]
return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,i)}},ht.prototype.getUserData=function(){return this._userData},ht.prototype.getSRID=function(){return this._SRID},ht.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},ht.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===ht.SORTINDEX_GEOMETRYCOLLECTION)throw new y("This method does not support GeometryCollection arguments")},ht.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},ht.prototype.norm=function(){var t=this.copy()
return t.normalize(),t},ht.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},ht.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new Y(this._envelope)},ht.prototype.setSRID=function(t){this._SRID=t},ht.prototype.setUserData=function(t){this._userData=t},ht.prototype.compare=function(t,e){for(var n=t.iterator(),i=e.iterator();n.hasNext()&&i.hasNext();){var r=n.next(),o=i.next(),s=r.compareTo(o)
if(0!==s)return s}return n.hasNext()?1:i.hasNext()?-1:0},ht.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},ht.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===ht.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===ht.SORTINDEX_MULTIPOINT||this.getSortIndex()===ht.SORTINDEX_MULTILINESTRING||this.getSortIndex()===ht.SORTINDEX_MULTIPOLYGON},ht.prototype.interfaces_=function(){return[E,b,e]},ht.prototype.getClass=function(){return ht},ht.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0
return!1},ht.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0
return!1},ct.serialVersionUID.get=function(){return 0x799ea46522854c00},ct.SORTINDEX_POINT.get=function(){return 0},ct.SORTINDEX_MULTIPOINT.get=function(){return 1},ct.SORTINDEX_LINESTRING.get=function(){return 2},ct.SORTINDEX_LINEARRING.get=function(){return 3},ct.SORTINDEX_MULTILINESTRING.get=function(){return 4},ct.SORTINDEX_POLYGON.get=function(){return 5},ct.SORTINDEX_MULTIPOLYGON.get=function(){return 6},ct.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},ct.geometryChangedFilter.get=function(){return ft},Object.defineProperties(ht,ct)
var ft=function(){}
ft.interfaces_=function(){return[ut]},ft.filter=function(t){t.geometryChangedAction()}
var pt=function(){}
pt.prototype.filter=function(t){},pt.prototype.interfaces_=function(){return[]},pt.prototype.getClass=function(){return pt}
var dt=function(){},gt={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}}
dt.prototype.isInBoundary=function(t){},dt.prototype.interfaces_=function(){return[]},dt.prototype.getClass=function(){return dt},gt.Mod2BoundaryNodeRule.get=function(){return _t},gt.EndPointBoundaryNodeRule.get=function(){return mt},gt.MultiValentEndPointBoundaryNodeRule.get=function(){return yt},gt.MonoValentEndPointBoundaryNodeRule.get=function(){return vt},gt.MOD2_BOUNDARY_RULE.get=function(){return new _t},gt.ENDPOINT_BOUNDARY_RULE.get=function(){return new mt},gt.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new yt},gt.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new vt},gt.OGC_SFS_BOUNDARY_RULE.get=function(){return dt.MOD2_BOUNDARY_RULE},Object.defineProperties(dt,gt)
var _t=function(){}
_t.prototype.isInBoundary=function(t){return t%2==1},_t.prototype.interfaces_=function(){return[dt]},_t.prototype.getClass=function(){return _t}
var mt=function(){}
mt.prototype.isInBoundary=function(t){return t>0},mt.prototype.interfaces_=function(){return[dt]},mt.prototype.getClass=function(){return mt}
var yt=function(){}
yt.prototype.isInBoundary=function(t){return t>1},yt.prototype.interfaces_=function(){return[dt]},yt.prototype.getClass=function(){return yt}
var vt=function(){}
vt.prototype.isInBoundary=function(t){return 1===t},vt.prototype.interfaces_=function(){return[dt]},vt.prototype.getClass=function(){return vt}
var xt=function(){}
xt.prototype.add=function(){},xt.prototype.addAll=function(){},xt.prototype.isEmpty=function(){},xt.prototype.iterator=function(){},xt.prototype.size=function(){},xt.prototype.toArray=function(){},xt.prototype.remove=function(){},(n.prototype=new Error).name="IndexOutOfBoundsException"
var bt=function(){}
bt.prototype.hasNext=function(){},bt.prototype.next=function(){},bt.prototype.remove=function(){}
var Et=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(xt);(i.prototype=new Error).name="NoSuchElementException"
var wt=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof xt&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,xt]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())
return!0},e.prototype.set=function(t,e){var n=this.array_[t]
return this.array_[t]=e,n},e.prototype.iterator=function(){return new St(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new n
return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e])
return t},e.prototype.remove=function(t){for(var e=!1,n=0,i=this.array_.length;n<i;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0
break}return e},e}(Et),St=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new i
return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(bt),Ct=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0]
this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],i=arguments[1]
this.ensureCapacity(n.length),this.add(n,i)}}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e
var n={coordArrayType:{configurable:!0}}
return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){if(2===arguments.length){for(var e=arguments[1],n=!1,i=arguments[0].iterator();i.hasNext();)this.add(i.next(),e),n=!0
return n}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy())
return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){if(1===arguments.length){var e=arguments[0]
t.prototype.add.call(this,e)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var n=arguments[0],i=arguments[1]
return this.add(n,i,!0),!0}if(arguments[0]instanceof S&&"boolean"==typeof arguments[1]){var r=arguments[0]
if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(r))return null
t.prototype.add.call(this,r)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var o=arguments[0],s=arguments[1]
return this.add(o,s),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var a=arguments[0],l=arguments[1]
if(arguments[2])for(var u=0;u<a.length;u++)this.add(a[u],l)
else for(var h=a.length-1;h>=0;h--)this.add(a[h],l)
return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof S){var c=arguments[0],f=arguments[1]
if(!arguments[2]){var p=this.size()
if(p>0){if(c>0&&this.get(c-1).equals2D(f))return null
if(c<p&&this.get(c).equals2D(f))return null}}t.prototype.add.call(this,c,f)}}else if(4===arguments.length){var d=arguments[0],g=arguments[1],_=arguments[2],m=arguments[3],y=1
_>m&&(y=-1)
for(var v=_;v!==m;v+=y)this.add(d[v],g)
return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new S(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(wt),Tt=function(){},It={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}}
It.ForwardComparator.get=function(){return Pt},It.BidirectionalComparator.get=function(){return At},It.coordArrayType.get=function(){return new Array(0).fill(null)},Tt.prototype.interfaces_=function(){return[]},Tt.prototype.getClass=function(){return Tt},Tt.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},Tt.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var i=t[n]
if(Tt.indexOf(i,e)<0)return i}return null},Tt.scroll=function(t,e){var n=Tt.indexOf(e,t)
if(n<0)return null
var i=new Array(t.length).fill(null)
Z.arraycopy(t,n,i,0,t.length-n),Z.arraycopy(t,0,i,t.length-n,n),Z.arraycopy(i,0,t,0,t.length)},Tt.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1]
if(t===e)return!0
if(null===t||null===e)return!1
if(t.length!==e.length)return!1
for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1
return!0}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2]
if(i===r)return!0
if(null===i||null===r)return!1
if(i.length!==r.length)return!1
for(var s=0;s<i.length;s++)if(0!==o.compare(i[s],r[s]))return!1
return!0}},Tt.intersection=function(t,e){for(var n=new Ct,i=0;i<t.length;i++)e.intersects(t[i])&&n.add(t[i],!0)
return n.toCoordinateArray()},Tt.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0
return!1},Tt.removeRepeatedPoints=function(t){return Tt.hasRepeatedPoints(t)?new Ct(t,!1).toCoordinateArray():t},Tt.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),i=0;i<=n;i++){var r=t[i]
t[i]=t[e-i],t[e-i]=r}},Tt.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++
var i=new Array(e).fill(null)
if(0===e)return i
for(var r=0,o=0;o<t.length;o++)null!==t[o]&&(i[r++]=t[o])
return i},Tt.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new S(t[n])
return e}if(5===arguments.length)for(var i=arguments[0],r=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4],l=0;l<a;l++)o[s+l]=new S(i[r+l])},Tt.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=e[t.length-n-1]
if(0!==i.compareTo(r))return!1}return!0},Tt.envelope=function(t){for(var e=new Y,n=0;n<t.length;n++)e.expandToInclude(t[n])
return e},Tt.toCoordinateArray=function(t){return t.toArray(Tt.coordArrayType)},Tt.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},Tt.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n
return-1},Tt.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,i=t[e].compareTo(t[n])
if(0!==i)return i}return 1},Tt.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var i=t[n].compareTo(e[n])
if(0!==i)return i
n++}return n<e.length?-1:n<t.length?1:0},Tt.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n])
return e},Tt.extract=function(t,e,n){e=L.clamp(e,0,t.length)
var i=(n=L.clamp(n,-1,t.length))-e+1
n<0&&(i=0),e>=t.length&&(i=0),n<e&&(i=0)
var r=new Array(i).fill(null)
if(0===i)return r
for(var o=0,s=e;s<=n;s++)r[o++]=t[s]
return r},Object.defineProperties(Tt,It)
var Pt=function(){}
Pt.prototype.compare=function(t,e){return Tt.compare(t,e)},Pt.prototype.interfaces_=function(){return[w]},Pt.prototype.getClass=function(){return Pt}
var At=function(){}
At.prototype.compare=function(t,e){var n=t,i=e
if(n.length<i.length)return-1
if(n.length>i.length)return 1
if(0===n.length)return 0
var r=Tt.compare(n,i)
return Tt.isEqualReversed(n,i)?0:r},At.prototype.OLDcompare=function(t,e){var n=t,i=e
if(n.length<i.length)return-1
if(n.length>i.length)return 1
if(0===n.length)return 0
for(var r=Tt.increasingDirection(n),o=Tt.increasingDirection(i),s=r>0?0:n.length-1,a=o>0?0:n.length-1,l=0;l<n.length;l++){var u=n[s].compareTo(i[a])
if(0!==u)return u
s+=r,a+=o}return 0},At.prototype.interfaces_=function(){return[w]},At.prototype.getClass=function(){return At}
var Rt=function(){}
Rt.prototype.get=function(){},Rt.prototype.put=function(){},Rt.prototype.size=function(){},Rt.prototype.values=function(){},Rt.prototype.entrySet=function(){}
var Lt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Rt);(r.prototype=new Error).name="OperationNotSupported",(o.prototype=new xt).contains=function(){}
var Mt=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof xt&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0
return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())
return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e])
return t},e.prototype.iterator=function(){return new Ot(this)},e}(o),Ot=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new i
return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new r},e}(bt),Nt=0;(c.prototype=new Lt).get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key)
if(n<0)e=e.left
else{if(!(n>0))return e.value
e=e.right}}return null},c.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:Nt,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null
var n,i,r=this.root_
do{if(n=r,(i=t.compareTo(r.key))<0)r=r.left
else{if(!(i>0)){var o=r.value
return r.value=e,o}r=r.right}}while(null!==r)
var s={key:t,left:null,right:null,value:e,parent:n,color:Nt,getValue:function(){return this.value},getKey:function(){return this.key}}
return i<0?n.left=s:n.right=s,this.fixAfterInsertion(s),this.size_++,null},c.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(a(t)===u(a(a(t)))){var e=h(a(a(t)))
1===s(e)?(l(a(t),Nt),l(e,Nt),l(a(a(t)),1),t=a(a(t))):(t===h(a(t))&&(t=a(t),this.rotateLeft(t)),l(a(t),Nt),l(a(a(t)),1),this.rotateRight(a(a(t))))}else{var n=u(a(a(t)))
1===s(n)?(l(a(t),Nt),l(n,Nt),l(a(a(t)),1),t=a(a(t))):(t===u(a(t))&&(t=a(t),this.rotateRight(t)),l(a(t),Nt),l(a(a(t)),1),this.rotateLeft(a(a(t))))}this.root_.color=Nt},c.prototype.values=function(){var t=new wt,e=this.getFirstEntry()
if(null!==e)for(t.add(e.value);null!==(e=c.successor(e));)t.add(e.value)
return t},c.prototype.entrySet=function(){var t=new Mt,e=this.getFirstEntry()
if(null!==e)for(t.add(e);null!==(e=c.successor(e));)t.add(e)
return t},c.prototype.rotateLeft=function(t){if(null!=t){var e=t.right
t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},c.prototype.rotateRight=function(t){if(null!=t){var e=t.left
t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},c.prototype.getFirstEntry=function(){var t=this.root_
if(null!=t)for(;null!=t.left;)t=t.left
return t},c.successor=function(t){if(null===t)return null
if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left
return e}for(var n=t.parent,i=t;null!==n&&i===n.right;)i=n,n=n.parent
return n},c.prototype.size=function(){return this.size_}
var Dt=function(){}
Dt.prototype.interfaces_=function(){return[]},Dt.prototype.getClass=function(){return Dt},f.prototype=new o,(p.prototype=new f).contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0
return!1},p.prototype.add=function(t){if(this.contains(t))return!1
for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0
return this.array_.push(t),!0},p.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())
return!0},p.prototype.remove=function(t){throw new r},p.prototype.size=function(){return this.array_.length},p.prototype.isEmpty=function(){return 0===this.array_.length},p.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e])
return t},p.prototype.iterator=function(){return new Ft(this)}
var Ft=function(t){this.treeSet_=t,this.position_=0}
Ft.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new i
return this.treeSet_.array_[this.position_++]},Ft.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Ft.prototype.remove=function(){throw new r}
var kt=function(){}
kt.sort=function(){var t,e,n,i,r=arguments[0]
if(1===arguments.length)i=function(t,e){return t.compareTo(e)},r.sort(i)
else if(2===arguments.length)n=arguments[1],i=function(t,e){return n.compare(t,e)},r.sort(i)
else if(3===arguments.length){(e=r.slice(arguments[1],arguments[2])).sort()
var o=r.slice(0,arguments[1]).concat(e,r.slice(arguments[2],r.length))
for(r.splice(0,r.length),t=0;t<o.length;t++)r.push(o[t])}else if(4===arguments.length)for(e=r.slice(arguments[1],arguments[2]),n=arguments[3],i=function(t,e){return n.compare(t,e)},e.sort(i),o=r.slice(0,arguments[1]).concat(e,r.slice(arguments[2],r.length)),r.splice(0,r.length),t=0;t<o.length;t++)r.push(o[t])},kt.asList=function(t){for(var e=new wt,n=0,i=t.length;n<i;n++)e.add(t[n])
return e}
var jt=function(){},zt={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}}
zt.P.get=function(){return 0},zt.L.get=function(){return 1},zt.A.get=function(){return 2},zt.FALSE.get=function(){return-1},zt.TRUE.get=function(){return-2},zt.DONTCARE.get=function(){return-3},zt.SYM_FALSE.get=function(){return"F"},zt.SYM_TRUE.get=function(){return"T"},zt.SYM_DONTCARE.get=function(){return"*"},zt.SYM_P.get=function(){return"0"},zt.SYM_L.get=function(){return"1"},zt.SYM_A.get=function(){return"2"},jt.prototype.interfaces_=function(){return[]},jt.prototype.getClass=function(){return jt},jt.toDimensionSymbol=function(t){switch(t){case jt.FALSE:return jt.SYM_FALSE
case jt.TRUE:return jt.SYM_TRUE
case jt.DONTCARE:return jt.SYM_DONTCARE
case jt.P:return jt.SYM_P
case jt.L:return jt.SYM_L
case jt.A:return jt.SYM_A}throw new y("Unknown dimension value: "+t)},jt.toDimensionValue=function(t){switch(D.toUpperCase(t)){case jt.SYM_FALSE:return jt.FALSE
case jt.SYM_TRUE:return jt.TRUE
case jt.SYM_DONTCARE:return jt.DONTCARE
case jt.SYM_P:return jt.P
case jt.SYM_L:return jt.L
case jt.SYM_A:return jt.A}throw new y("Unknown dimension symbol: "+t)},Object.defineProperties(jt,zt)
var Gt=function(){}
Gt.prototype.filter=function(t){},Gt.prototype.interfaces_=function(){return[]},Gt.prototype.getClass=function(){return Gt}
var Bt=function(){}
Bt.prototype.filter=function(t,e){},Bt.prototype.isDone=function(){},Bt.prototype.isGeometryChanged=function(){},Bt.prototype.interfaces_=function(){return[]},Bt.prototype.getClass=function(){return Bt}
var qt=function(t){function e(e,n){if(t.call(this,n),this._geometries=e||[],t.hasNullElements(this._geometries))throw new y("geometries must not contain null elements")}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e
var n={serialVersionUID:{configurable:!0}}
return e.prototype.computeEnvelopeInternal=function(){for(var t=new Y,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal())
return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var i=this._geometries[n].getCoordinates(),r=0;r<i.length;r++)t[++e]=i[r]
return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea()
return t},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1]
if(!this.isEquivalentClass(e))return!1
var i=e
if(this._geometries.length!==i._geometries.length)return!1
for(var r=0;r<this._geometries.length;r++)if(!this._geometries[r].equalsExact(i._geometries[r],n))return!1
return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize()
kt.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=jt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension())
return t},e.prototype.getDimension=function(){for(var t=jt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension())
return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength()
return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints()
return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse()
return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=new p(kt.asList(this._geometries)),n=new p(kt.asList(t._geometries))
return this.compare(e,n)}if(2===arguments.length){for(var i=arguments[1],r=arguments[0],o=this.getNumGeometries(),s=r.getNumGeometries(),a=0;a<o&&a<s;){var l=this.getGeometryN(a),u=r.getGeometryN(a),h=l.compareToSameClass(u,i)
if(0!==h)return h
a++}return a<o?1:a<s?-1:0}},e.prototype.apply=function(){if(R(arguments[0],pt))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t)
else if(R(arguments[0],Bt)){var n=arguments[0]
if(0===this._geometries.length)return null
for(var i=0;i<this._geometries.length&&(this._geometries[i].apply(n),!n.isDone());i++);n.isGeometryChanged()&&this.geometryChanged()}else if(R(arguments[0],Gt)){var r=arguments[0]
r.filter(this)
for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(r)}else if(R(arguments[0],ut)){var s=arguments[0]
s.filter(this)
for(var a=0;a<this._geometries.length;a++)this._geometries[a].apply(s)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),et.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this)
e._geometries=new Array(this._geometries.length).fill(null)
for(var n=0;n<this._geometries.length;n++)e._geometries[n]=this._geometries[n].clone()
return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy()
return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1
return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}(ht),Ut=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e
var n={serialVersionUID:{configurable:!0}}
return e.prototype.getSortIndex=function(){return ht.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1]
return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?jt.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1
for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1
return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse()
return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new Zt(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy()
return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Dt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}(qt),Zt=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=dt.MOD2_BOUNDARY_RULE
this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],i=arguments[1]
this._geom=n,this._geomFact=n.getFactory(),this._bnRule=i}}
Zt.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint()
var e=this.computeBoundaryCoordinates(t)
return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},Zt.prototype.getBoundary=function(){return this._geom instanceof Ht?this.boundaryLineString(this._geom):this._geom instanceof Ut?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},Zt.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},Zt.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},Zt.prototype.computeBoundaryCoordinates=function(t){var e=new wt
this._endpointMap=new c
for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n)
0!==i.getNumPoints()&&(this.addEndpoint(i.getCoordinateN(0)),this.addEndpoint(i.getCoordinateN(i.getNumPoints()-1)))}for(var r=this._endpointMap.entrySet().iterator();r.hasNext();){var o=r.next(),s=o.getValue().count
this._bnRule.isInBoundary(s)&&e.add(o.getKey())}return Tt.toCoordinateArray(e)},Zt.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t)
null===e&&(e=new Xt,this._endpointMap.put(t,e)),e.count++},Zt.prototype.interfaces_=function(){return[]},Zt.prototype.getClass=function(){return Zt},Zt.getBoundary=function(){return 1===arguments.length?new Zt(arguments[0]).getBoundary():2===arguments.length?new Zt(arguments[0],arguments[1]).getBoundary():void 0}
var Xt=function(){this.count=null}
Xt.prototype.interfaces_=function(){return[]},Xt.prototype.getClass=function(){return Xt}
var Yt=function(){},Vt={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}}
Yt.prototype.interfaces_=function(){return[]},Yt.prototype.getClass=function(){return Yt},Yt.chars=function(t,e){for(var n=new Array(e).fill(null),i=0;i<e;i++)n[i]=t
return String(n)},Yt.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new function(){},n=new function(){}(e)
return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var i=arguments[1],r="",o=new function(){}(new function(){}(Yt.getStackTrace(arguments[0]))),s=0;s<i;s++)try{r+=o.readLine()+Yt.NEWLINE}catch(t){if(!(t instanceof d))throw t
et.shouldNeverReachHere()}return r}},Yt.split=function(t,e){for(var n=e.length,i=new wt,r=""+t,o=r.indexOf(e);o>=0;){var s=r.substring(0,o)
i.add(s),o=(r=r.substring(o+n)).indexOf(e)}r.length>0&&i.add(r)
for(var a=new Array(i.size()).fill(null),l=0;l<a.length;l++)a[l]=i.get(l)
return a},Yt.toString=function(){if(1===arguments.length){var t=arguments[0]
return Yt.SIMPLE_ORDINATE_FORMAT.format(t)}},Yt.spaces=function(t){return Yt.chars(" ",t)},Vt.NEWLINE.get=function(){return Z.getProperty("line.separator")},Vt.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(Yt,Vt)
var Wt=function(){}
Wt.prototype.interfaces_=function(){return[]},Wt.prototype.getClass=function(){return Wt},Wt.copyCoord=function(t,e,n,i){for(var r=Math.min(t.getDimension(),n.getDimension()),o=0;o<r;o++)n.setOrdinate(i,o,t.getOrdinate(e,o))},Wt.isRing=function(t){var e=t.size()
return 0===e||!(e<=3)&&t.getOrdinate(0,G.X)===t.getOrdinate(e-1,G.X)&&t.getOrdinate(0,G.Y)===t.getOrdinate(e-1,G.Y)},Wt.isEqual=function(t,e){var n=t.size()
if(n!==e.size())return!1
for(var i=Math.min(t.getDimension(),e.getDimension()),r=0;r<n;r++)for(var o=0;o<i;o++){var s=t.getOrdinate(r,o),a=e.getOrdinate(r,o)
if(!(t.getOrdinate(r,o)===e.getOrdinate(r,o)||v.isNaN(s)&&v.isNaN(a)))return!1}return!0},Wt.extend=function(t,e,n){var i=t.create(n,e.getDimension()),r=e.size()
if(Wt.copy(e,0,i,0,r),r>0)for(var o=r;o<n;o++)Wt.copy(e,r-1,i,o,1)
return i},Wt.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),i=0;i<=n;i++)Wt.swap(t,i,e-i)},Wt.swap=function(t,e,n){if(e===n)return null
for(var i=0;i<t.getDimension();i++){var r=t.getOrdinate(e,i)
t.setOrdinate(e,i,t.getOrdinate(n,i)),t.setOrdinate(n,i,r)}},Wt.copy=function(t,e,n,i,r){for(var o=0;o<r;o++)Wt.copyCoord(t,e+o,n,i+o)},Wt.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size()
if(0===e)return"()"
var n=t.getDimension(),i=new O
i.append("(")
for(var r=0;r<e;r++){r>0&&i.append(" ")
for(var o=0;o<n;o++)o>0&&i.append(","),i.append(Yt.toString(t.getOrdinate(r,o)))}return i.append(")"),i.toString()}},Wt.ensureValidRing=function(t,e){var n=e.size()
return 0===n?e:n<=3?Wt.createClosedRing(t,e,4):e.getOrdinate(0,G.X)===e.getOrdinate(n-1,G.X)&&e.getOrdinate(0,G.Y)===e.getOrdinate(n-1,G.Y)?e:Wt.createClosedRing(t,e,n+1)},Wt.createClosedRing=function(t,e,n){var i=t.create(n,e.getDimension()),r=e.size()
Wt.copy(e,0,i,0,r)
for(var o=r;o<n;o++)Wt.copy(e,0,i,o,1)
return i}
var Ht=function(t){function e(e,n){t.call(this,n),this._points=null,this.init(e)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e
var n={serialVersionUID:{configurable:!0}}
return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new Y:this._points.expandEnvelope(new Y)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1]
if(!this.isEquivalentClass(e))return!1
var i=e
if(this._points.size()!==i._points.size())return!1
for(var r=0;r<this._points.size();r++)if(!this.equal(this._points.getCoordinate(r),i._points.getCoordinate(r),n))return!1
return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t
if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e)))return this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0&&Wt.reverse(this._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?jt.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return at.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy()
return Wt.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this._points.size()&&n<t._points.size();){var i=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n))
if(0!==i)return i
e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length){var r=arguments[0]
return arguments[1].compare(this._points,r._points)}},e.prototype.apply=function(){if(R(arguments[0],pt))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e))
else if(R(arguments[0],Bt)){var n=arguments[0]
if(0===this._points.size())return null
for(var i=0;i<this._points.size()&&(n.filter(this._points,i),!n.isDone());i++);n.isGeometryChanged()&&this.geometryChanged()}else(R(arguments[0],Gt)||R(arguments[0],ut))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new Zt(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this)
return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new y("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)")
this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0
return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[Dt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(ht),$t=function(){}
$t.prototype.interfaces_=function(){return[]},$t.prototype.getClass=function(){return $t}
var Kt=function(t){function e(e,n){t.call(this,n),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e
var n={serialVersionUID:{configurable:!0}}
return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new Y
var t=new Y
return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1]
return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return jt.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point")
return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0]
return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0]
return arguments[1].compare(this._coordinates,e._coordinates)}},e.prototype.apply=function(){if(R(arguments[0],pt)){var t=arguments[0]
if(this.isEmpty())return null
t.filter(this.getCoordinate())}else if(R(arguments[0],Bt)){var e=arguments[0]
if(this.isEmpty())return null
e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else(R(arguments[0],Gt)||R(arguments[0],ut))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this)
return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point")
return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),et.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[$t]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}(ht),Jt=function(){}
Jt.prototype.interfaces_=function(){return[]},Jt.prototype.getClass=function(){return Jt}
var Qt=function(t){function e(e,n,i){if(t.call(this,i),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),t.hasNullElements(n))throw new y("holes must not contain null elements")
if(e.isEmpty()&&t.hasNonEmptyElements(n))throw new y("shell is empty but holes are not")
this._shell=e,this._holes=n}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e
var n={serialVersionUID:{configurable:!0}}
return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[]
for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),i=0;i<n.length;i++)t[++e]=n[i]
for(var r=0;r<this._holes.length;r++)for(var o=this._holes[r].getCoordinates(),s=0;s<o.length;s++)t[++e]=o[s]
return t},e.prototype.getArea=function(){var t=0
t+=Math.abs(at.signedArea(this._shell.getCoordinateSequence()))
for(var e=0;e<this._holes.length;e++)t-=Math.abs(at.signedArea(this._holes[e].getCoordinateSequence()))
return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1
if(null===this._shell)return!1
if(5!==this._shell.getNumPoints())return!1
for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var i=t.getX(n)
if(i!==e.getMinX()&&i!==e.getMaxX())return!1
var r=t.getY(n)
if(r!==e.getMinY()&&r!==e.getMaxY())return!1}for(var o=t.getX(0),s=t.getY(0),a=1;a<=4;a++){var l=t.getX(a),u=t.getY(a)
if(l!==o==(u!==s))return!1
o=l,s=u}return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1]
if(!this.isEquivalentClass(e))return!1
var i=e,r=this._shell,o=i._shell
if(!r.equalsExact(o,n))return!1
if(this._holes.length!==i._holes.length)return!1
for(var s=0;s<this._holes.length;s++)if(!this._holes[s].equalsExact(i._holes[s],n))return!1
return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0)
for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1)
kt.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1]
if(e.isEmpty())return null
var i=new Array(e.getCoordinates().length-1).fill(null)
Z.arraycopy(e.getCoordinates(),0,i,0,i.length)
var r=Tt.minCoordinate(e.getCoordinates())
Tt.scroll(i,r),Z.arraycopy(i,0,e.getCoordinates(),0,i.length),e.getCoordinates()[i.length]=i[0],at.isCCW(e.getCoordinates())===n&&Tt.reverse(e.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0
t+=this._shell.getLength()
for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength()
return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints()
return t},e.prototype.reverse=function(){var t=this.copy()
t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null)
for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse()
return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=this._shell,n=t._shell
return e.compareToSameClass(n)}if(2===arguments.length){var i=arguments[1],r=arguments[0],o=this._shell,s=r._shell,a=o.compareToSameClass(s,i)
if(0!==a)return a
for(var l=this.getNumInteriorRing(),u=r.getNumInteriorRing(),h=0;h<l&&h<u;){var c=this.getInteriorRingN(h),f=r.getInteriorRingN(h),p=c.compareToSameClass(f,i)
if(0!==p)return p
h++}return h<l?1:h<u?-1:0}},e.prototype.apply=function(t){if(R(t,pt)){this._shell.apply(t)
for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(R(t,Bt)){if(this._shell.apply(t),!t.isDone())for(var n=0;n<this._holes.length&&(this._holes[n].apply(t),!t.isDone());n++);t.isGeometryChanged()&&this.geometryChanged()}else if(R(t,Gt))t.filter(this)
else if(R(t,ut)){t.filter(this),this._shell.apply(t)
for(var i=0;i<this._holes.length;i++)this._holes[i].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString()
var t=new Array(this._holes.length+1).fill(null)
t[0]=this._shell
for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e]
return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this)
e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null)
for(var n=0;n<this._holes.length;n++)e._holes[n]=this._holes[n].clone()
return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),n=new Array(this._holes.length).fill(null),i=0;i<n.length;i++)n[i]=this._holes[i].copy()
return new e(t,n,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[Jt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(ht),te=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e
var n={serialVersionUID:{configurable:!0}}
return e.prototype.getSortIndex=function(){return ht.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1]
return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0]
return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return jt.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy()
return new e(t,this._factory)},e.prototype.interfaces_=function(){return[$t]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}(qt),ee=function(t){function e(e,n){e instanceof S&&n instanceof me&&(e=n.getCoordinateSequenceFactory().create(e)),t.call(this,e,n),this.validateConstruction()}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e
var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}}
return e.prototype.getSortIndex=function(){return ht.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return jt.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy()
return Wt.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new y("Points of LinearRing do not form a closed linestring")
if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new y("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}(Ht),ne=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e
var n={serialVersionUID:{configurable:!0}}
return e.prototype.getSortIndex=function(){return ht.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1]
return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse()
return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString()
for(var t=new wt,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),i=0;i<n.getNumGeometries();i++)t.add(n.getGeometryN(i))
var r=new Array(t.size()).fill(null)
return this.getFactory().createMultiLineString(t.toArray(r))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy()
return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Jt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(qt),ie=function(t){this._factory=t||null,this._isUserDataCopied=!1},re={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}}
ie.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},ie.prototype.edit=function(t,e){if(null===t)return null
var n=this.editInternal(t,e)
return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},ie.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof qt?this.editGeometryCollection(t,e):t instanceof Qt?this.editPolygon(t,e):t instanceof Kt||t instanceof Ht?e.edit(t,this._factory):(et.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},ie.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),i=new wt,r=0;r<n.getNumGeometries();r++){var o=this.edit(n.getGeometryN(r),e)
null===o||o.isEmpty()||i.add(o)}return n.getClass()===te?this._factory.createMultiPoint(i.toArray([])):n.getClass()===Ut?this._factory.createMultiLineString(i.toArray([])):n.getClass()===ne?this._factory.createMultiPolygon(i.toArray([])):this._factory.createGeometryCollection(i.toArray([]))},ie.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory)
if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n
var i=this.edit(n.getExteriorRing(),e)
if(null===i||i.isEmpty())return this._factory.createPolygon()
for(var r=new wt,o=0;o<n.getNumInteriorRing();o++){var s=this.edit(n.getInteriorRingN(o),e)
null===s||s.isEmpty()||r.add(s)}return this._factory.createPolygon(i,r.toArray([]))},ie.prototype.interfaces_=function(){return[]},ie.prototype.getClass=function(){return ie},ie.GeometryEditorOperation=function(){},re.NoOpGeometryOperation.get=function(){return oe},re.CoordinateOperation.get=function(){return se},re.CoordinateSequenceOperation.get=function(){return ae},Object.defineProperties(ie,re)
var oe=function(){}
oe.prototype.edit=function(t,e){return t},oe.prototype.interfaces_=function(){return[ie.GeometryEditorOperation]},oe.prototype.getClass=function(){return oe}
var se=function(){}
se.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t)
return null===n?t:t instanceof ee?e.createLinearRing(n):t instanceof Ht?e.createLineString(n):t instanceof Kt?n.length>0?e.createPoint(n[0]):e.createPoint():t},se.prototype.interfaces_=function(){return[ie.GeometryEditorOperation]},se.prototype.getClass=function(){return se}
var ae=function(){}
ae.prototype.edit=function(t,e){return t instanceof ee?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Ht?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Kt?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},ae.prototype.interfaces_=function(){return[ie.GeometryEditorOperation]},ae.prototype.getClass=function(){return ae}
var le=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3
else if(Number.isInteger(arguments[0])){var t=arguments[0]
this._coordinates=new Array(t).fill(null)
for(var e=0;e<t;e++)this._coordinates[e]=new S}else if(R(arguments[0],G)){var n=arguments[0]
if(null===n)return this._coordinates=new Array(0).fill(null),null
this._dimension=n.getDimension(),this._coordinates=new Array(n.size()).fill(null)
for(var i=0;i<this._coordinates.length;i++)this._coordinates[i]=n.getCoordinateCopy(i)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var r=arguments[0],o=arguments[1]
this._coordinates=r,this._dimension=o,null===r&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var s=arguments[0],a=arguments[1]
this._coordinates=new Array(s).fill(null),this._dimension=a
for(var l=0;l<s;l++)this._coordinates[l]=new S}},ue={serialVersionUID:{configurable:!0}}
le.prototype.setOrdinate=function(t,e,n){switch(e){case G.X:this._coordinates[t].x=n
break
case G.Y:this._coordinates[t].y=n
break
case G.Z:this._coordinates[t].z=n
break
default:throw new y("invalid ordinateIndex")}},le.prototype.size=function(){return this._coordinates.length},le.prototype.getOrdinate=function(t,e){switch(e){case G.X:return this._coordinates[t].x
case G.Y:return this._coordinates[t].y
case G.Z:return this._coordinates[t].z}return v.NaN},le.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0]
return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1]
n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},le.prototype.getCoordinateCopy=function(t){return new S(this._coordinates[t])},le.prototype.getDimension=function(){return this._dimension},le.prototype.getX=function(t){return this._coordinates[t].x},le.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone()
return new le(t,this._dimension)},le.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e])
return t},le.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy()
return new le(t,this._dimension)},le.prototype.toString=function(){if(this._coordinates.length>0){var t=new O(17*this._coordinates.length)
t.append("("),t.append(this._coordinates[0])
for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e])
return t.append(")"),t.toString()}return"()"},le.prototype.getY=function(t){return this._coordinates[t].y},le.prototype.toCoordinateArray=function(){return this._coordinates},le.prototype.interfaces_=function(){return[G,e]},le.prototype.getClass=function(){return le},ue.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(le,ue)
var he=function(){},ce={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}}
he.prototype.readResolve=function(){return he.instance()},he.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new le(arguments[0])
if(R(arguments[0],G))return new le(arguments[0])}else if(2===arguments.length){var t=arguments[0],e=arguments[1]
return e>3&&(e=3),e<2?new le(t):new le(t,e)}},he.prototype.interfaces_=function(){return[I,e]},he.prototype.getClass=function(){return he},he.instance=function(){return he.instanceObject},ce.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},ce.instanceObject.get=function(){return new he},Object.defineProperties(he,ce)
var fe=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new wt,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next()
return t},e.prototype.entrySet=function(){var t=new Mt
return this.map_.entries().forEach((function(e){return t.add(e)})),t},e.prototype.size=function(){return this.map_.size()},e}(Rt),pe=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING
else if(1===arguments.length)if(arguments[0]instanceof ge){var e=arguments[0]
this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0]
this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var i=arguments[0]
this._modelType=i._modelType,this._scale=i._scale}},de={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}}
pe.prototype.equals=function(t){if(!(t instanceof pe))return!1
var e=t
return this._modelType===e._modelType&&this._scale===e._scale},pe.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),i=e.getMaximumSignificantDigits()
return new N(n).compareTo(new N(i))},pe.prototype.getScale=function(){return this._scale},pe.prototype.isFloating=function(){return this._modelType===pe.FLOATING||this._modelType===pe.FLOATING_SINGLE},pe.prototype.getType=function(){return this._modelType},pe.prototype.toString=function(){var t="UNKNOWN"
return this._modelType===pe.FLOATING?t="Floating":this._modelType===pe.FLOATING_SINGLE?t="Floating-Single":this._modelType===pe.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},pe.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0]
return v.isNaN(t)||this._modelType===pe.FLOATING_SINGLE?t:this._modelType===pe.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof S){var e=arguments[0]
if(this._modelType===pe.FLOATING)return null
e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},pe.prototype.getMaximumSignificantDigits=function(){var t=16
return this._modelType===pe.FLOATING?t=16:this._modelType===pe.FLOATING_SINGLE?t=6:this._modelType===pe.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},pe.prototype.setScale=function(t){this._scale=Math.abs(t)},pe.prototype.interfaces_=function(){return[e,b]},pe.prototype.getClass=function(){return pe},pe.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},de.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},de.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(pe,de)
var ge=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},_e={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}}
ge.prototype.readResolve=function(){return ge.nameToTypeMap.get(this._name)},ge.prototype.toString=function(){return this._name},ge.prototype.interfaces_=function(){return[e]},ge.prototype.getClass=function(){return ge},_e.serialVersionUID.get=function(){return-552860263173159e4},_e.nameToTypeMap.get=function(){return new fe},Object.defineProperties(ge,_e),pe.Type=ge,pe.FIXED=new ge("FIXED"),pe.FLOATING=new ge("FLOATING"),pe.FLOATING_SINGLE=new ge("FLOATING SINGLE")
var me=function t(){this._precisionModel=new pe,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?R(arguments[0],I)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof pe&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},ye={serialVersionUID:{configurable:!0}}
me.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new S(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new S(t.getMinX(),t.getMinY()),new S(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new S(t.getMinX(),t.getMinY()),new S(t.getMinX(),t.getMaxY()),new S(t.getMaxX(),t.getMaxY()),new S(t.getMaxX(),t.getMinY()),new S(t.getMinX(),t.getMinY())]),null)},me.prototype.createLineString=function(t){return t?t instanceof Array?new Ht(this.getCoordinateSequenceFactory().create(t),this):R(t,G)?new Ht(t,this):void 0:new Ht(this.getCoordinateSequenceFactory().create([]),this)},me.prototype.createMultiLineString=function(){return 0===arguments.length?new Ut(null,this):1===arguments.length?new Ut(arguments[0],this):void 0},me.prototype.buildGeometry=function(t){for(var e=null,n=!1,i=!1,r=t.iterator();r.hasNext();){var o=r.next(),s=o.getClass()
null===e&&(e=s),s!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(i=!0)}if(null===e)return this.createGeometryCollection()
if(n||i)return this.createGeometryCollection(me.toGeometryArray(t))
var a=t.iterator().next()
if(t.size()>1){if(a instanceof Qt)return this.createMultiPolygon(me.toPolygonArray(t))
if(a instanceof Ht)return this.createMultiLineString(me.toLineStringArray(t))
if(a instanceof Kt)return this.createMultiPoint(me.toPointArray(t))
et.shouldNeverReachHere("Unhandled class: "+a.getClass().getName())}return a},me.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},me.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]))
if(1===arguments.length){if(arguments[0]instanceof S){var t=arguments[0]
return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(R(arguments[0],G))return new Kt(arguments[0],this)}},me.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},me.prototype.createPolygon=function(){if(0===arguments.length)return new Qt(null,null,this)
if(1===arguments.length){if(R(arguments[0],G)){var t=arguments[0]
return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0]
return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof ee){var n=arguments[0]
return this.createPolygon(n,null)}}else if(2===arguments.length)return new Qt(arguments[0],arguments[1],this)},me.prototype.getSRID=function(){return this._SRID},me.prototype.createGeometryCollection=function(){return 0===arguments.length?new qt(null,this):1===arguments.length?new qt(arguments[0],this):void 0},me.prototype.createGeometry=function(t){return new ie(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0]
return this._coordinateSequenceFactory.create(t)}}})},me.prototype.getPrecisionModel=function(){return this._precisionModel},me.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]))
if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0]
return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(R(arguments[0],G))return new ee(arguments[0],this)}},me.prototype.createMultiPolygon=function(){return 0===arguments.length?new ne(null,this):1===arguments.length?new ne(arguments[0],this):void 0},me.prototype.createMultiPoint=function(){if(0===arguments.length)return new te(null,this)
if(1===arguments.length){if(arguments[0]instanceof Array)return new te(arguments[0],this)
if(arguments[0]instanceof Array){var t=arguments[0]
return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(R(arguments[0],G)){var e=arguments[0]
if(null===e)return this.createMultiPoint(new Array(0).fill(null))
for(var n=new Array(e.size()).fill(null),i=0;i<e.size();i++){var r=this.getCoordinateSequenceFactory().create(1,e.getDimension())
Wt.copy(e,i,r,0,1),n[i]=this.createPoint(r)}return this.createMultiPoint(n)}}},me.prototype.interfaces_=function(){return[e]},me.prototype.getClass=function(){return me},me.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null)
return t.toArray(e)},me.toGeometryArray=function(t){if(null===t)return null
var e=new Array(t.size()).fill(null)
return t.toArray(e)},me.getDefaultCoordinateSequenceFactory=function(){return he.instance()},me.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null)
return t.toArray(e)},me.toLineStringArray=function(t){var e=new Array(t.size()).fill(null)
return t.toArray(e)},me.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null)
return t.toArray(e)},me.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null)
return t.toArray(e)},me.toPointArray=function(t){var e=new Array(t.size()).fill(null)
return t.toArray(e)},me.toPolygonArray=function(t){var e=new Array(t.size()).fill(null)
return t.toArray(e)},me.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},ye.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(me,ye)
var ve=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],xe=function(t){this.geometryFactory=t||new me}
xe.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type
if(!be[n])throw new Error("Unknown GeoJSON type: "+e.type)
return-1!==ve.indexOf(n)?be[n].apply(this,[e.coordinates]):"GeometryCollection"===n?be[n].apply(this,[e.geometries]):be[n].apply(this,[e])},xe.prototype.write=function(t){var e=t.getGeometryType()
if(!Ee[e])throw new Error("Geometry is not supported")
return Ee[e].apply(this,[t])}
var be={Feature:function(t){var e={}
for(var n in t)e[n]=t[n]
if(t.geometry){var i=t.geometry.type
if(!be[i])throw new Error("Unknown GeoJSON type: "+t.type)
e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=be.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={}
if(t.features){e.features=[]
for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n]
e.push(new S(i[0],i[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new S(t[0],t[1]),new S(t[2],t[1]),new S(t[2],t[3]),new S(t[0],t[3]),new S(t[0],t[1])])},Point:function(t){var e=new S(t[0],t[1])
return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(be.Point.apply(this,[t[n]]))
return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=be.coordinates.apply(this,[t])
return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(be.LineString.apply(this,[t[n]]))
return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=be.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),i=[],r=1;r<t.length;++r){var o=t[r],s=be.coordinates.apply(this,[o]),a=this.geometryFactory.createLinearRing(s)
i.push(a)}return this.geometryFactory.createPolygon(n,i)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n]
e.push(be.Polygon.apply(this,[i]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n]
e.push(this.read(i))}return this.geometryFactory.createGeometryCollection(e)}},Ee={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:Ee.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=Ee.Point.apply(this,[i])
e.push(r.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),i=0;i<n.length;++i){var r=n[i]
e.push(Ee.coordinate.apply(this,[r]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=Ee.LineString.apply(this,[i])
e.push(r.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=Ee.LineString.apply(this,[t._shell])
e.push(n.coordinates)
for(var i=0;i<t._holes.length;++i){var r=t._holes[i],o=Ee.LineString.apply(this,[r])
e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=Ee.Polygon.apply(this,[i])
e.push(r.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=i.getGeometryType()
e.push(Ee[r].apply(this,[i]))}return{type:"GeometryCollection",geometries:e}}},we=function(t){this.geometryFactory=t||new me,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new xe(this.geometryFactory)}
we.prototype.read=function(t){var e=this.parser.read(t)
return this.precisionModel.getType()===pe.FIXED&&this.reducePrecision(e),e},we.prototype.reducePrecision=function(t){var e,n
if(t.coordinate)this.precisionModel.makePrecise(t.coordinate)
else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e])
else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])}
var Se=function(){this.parser=new xe(this.geometryFactory)}
Se.prototype.write=function(t){return this.parser.write(t)}
var Ce=function(){},Te={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}}
Ce.prototype.interfaces_=function(){return[]},Ce.prototype.getClass=function(){return Ce},Ce.opposite=function(t){return t===Ce.LEFT?Ce.RIGHT:t===Ce.RIGHT?Ce.LEFT:t},Te.ON.get=function(){return 0},Te.LEFT.get=function(){return 1},Te.RIGHT.get=function(){return 2},Object.defineProperties(Ce,Te),(g.prototype=new Error).name="EmptyStackException",(_.prototype=new Et).add=function(t){return this.array_.push(t),!0},_.prototype.get=function(t){if(t<0||t>=this.size())throw new Error
return this.array_[t]},_.prototype.push=function(t){return this.array_.push(t),t},_.prototype.pop=function(t){if(0===this.array_.length)throw new g
return this.array_.pop()},_.prototype.peek=function(){if(0===this.array_.length)throw new g
return this.array_[this.array_.length-1]},_.prototype.empty=function(){return 0===this.array_.length},_.prototype.isEmpty=function(){return this.empty()},_.prototype.search=function(t){return this.array_.indexOf(t)},_.prototype.size=function(){return this.array_.length},_.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e])
return t}
var Ie=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null}
Ie.prototype.getCoordinate=function(){return this._minCoord},Ie.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e)
return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},Ie.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates()
et.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge")
var e=t[this._minIndex-1],n=t[this._minIndex+1],i=at.computeOrientation(this._minCoord,n,e),r=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&i===at.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&i===at.CLOCKWISE)&&(r=!0),r&&(this._minIndex=this._minIndex-1)},Ie.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates()
if(e<0||e+1>=n.length)return-1
if(n[e].y===n[e+1].y)return-1
var i=Ce.LEFT
return n[e].y<n[e+1].y&&(i=Ce.RIGHT),i},Ie.prototype.getEdge=function(){return this._orientedDe},Ie.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this._minCoord||e[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=e[n])},Ie.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges()
this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Ie.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next()
n.isForward()&&this.checkForRightmostCoordinate(n)}et.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Ce.LEFT&&(this._orientedDe=this._minDe.getSym())},Ie.prototype.interfaces_=function(){return[]},Ie.prototype.getClass=function(){return Ie}
var Pe=function(t){function e(n,i){t.call(this,e.msgWithCoord(n,i)),this.pt=i?new S(i):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}(Q),Ae=function(){this.array_=[]}
Ae.prototype.addLast=function(t){this.array_.push(t)},Ae.prototype.removeFirst=function(){return this.array_.shift()},Ae.prototype.isEmpty=function(){return 0===this.array_.length}
var Re=function(){this._finder=null,this._dirEdgeList=new wt,this._nodes=new wt,this._rightMostCoord=null,this._env=null,this._finder=new Ie}
Re.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},Re.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Re.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var i=n.next()
if(i.isVisited()||i.getSym().isVisited()){e=i
break}}if(null===e)throw new Pe("unable to find edge to compute depths at "+t.getCoordinate())
t.getEdges().computeDepths(e)
for(var r=t.getEdges().iterator();r.hasNext();){var o=r.next()
o.setVisited(!0),this.copySymDepths(o)}},Re.prototype.computeDepth=function(t){this.clearVisitedEdges()
var e=this._finder.getEdge()
e.setEdgeDepths(Ce.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},Re.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Re.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next()
e.getDepth(Ce.RIGHT)>=1&&e.getDepth(Ce.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},Re.prototype.computeDepths=function(t){var e=new Mt,n=new Ae,i=t.getNode()
for(n.addLast(i),e.add(i),t.setVisited(!0);!n.isEmpty();){var r=n.removeFirst()
e.add(r),this.computeNodeDepth(r)
for(var o=r.getEdges().iterator();o.hasNext();){var s=o.next().getSym()
if(!s.isVisited()){var a=s.getNode()
e.contains(a)||(n.addLast(a),e.add(a))}}}},Re.prototype.compareTo=function(t){var e=t
return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},Re.prototype.getEnvelope=function(){if(null===this._env){for(var t=new Y,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),i=0;i<n.length-1;i++)t.expandToInclude(n[i])
this._env=t}return this._env},Re.prototype.addReachable=function(t){var e=new _
for(e.add(t);!e.empty();){var n=e.pop()
this.add(n,e)}},Re.prototype.copySymDepths=function(t){var e=t.getSym()
e.setDepth(Ce.LEFT,t.getDepth(Ce.RIGHT)),e.setDepth(Ce.RIGHT,t.getDepth(Ce.LEFT))},Re.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t)
for(var n=t.getEdges().iterator();n.hasNext();){var i=n.next()
this._dirEdgeList.add(i)
var r=i.getSym().getNode()
r.isVisited()||e.push(r)}},Re.prototype.getNodes=function(){return this._nodes},Re.prototype.getDirectedEdges=function(){return this._dirEdgeList},Re.prototype.interfaces_=function(){return[b]},Re.prototype.getClass=function(){return Re}
var Le=function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0]
this.init(e.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0]
this.init(1),this.location[Ce.ON]=n}else if(arguments[0]instanceof t){var i=arguments[0]
if(this.init(i.location.length),null!==i)for(var r=0;r<this.location.length;r++)this.location[r]=i.location[r]}}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2]
this.init(3),this.location[Ce.ON]=o,this.location[Ce.LEFT]=s,this.location[Ce.RIGHT]=a}}
Le.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Le.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==P.NONE)return!1
return!0},Le.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===P.NONE&&(this.location[e]=t)},Le.prototype.isLine=function(){return 1===this.location.length},Le.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null)
e[Ce.ON]=this.location[Ce.ON],e[Ce.LEFT]=P.NONE,e[Ce.RIGHT]=P.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===P.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},Le.prototype.getLocations=function(){return this.location},Le.prototype.flip=function(){if(this.location.length<=1)return null
var t=this.location[Ce.LEFT]
this.location[Ce.LEFT]=this.location[Ce.RIGHT],this.location[Ce.RIGHT]=t},Le.prototype.toString=function(){var t=new O
return this.location.length>1&&t.append(P.toLocationSymbol(this.location[Ce.LEFT])),t.append(P.toLocationSymbol(this.location[Ce.ON])),this.location.length>1&&t.append(P.toLocationSymbol(this.location[Ce.RIGHT])),t.toString()},Le.prototype.setLocations=function(t,e,n){this.location[Ce.ON]=t,this.location[Ce.LEFT]=e,this.location[Ce.RIGHT]=n},Le.prototype.get=function(t){return t<this.location.length?this.location[t]:P.NONE},Le.prototype.isArea=function(){return this.location.length>1},Le.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===P.NONE)return!0
return!1},Le.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0]
this.setLocation(Ce.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1]
this.location[e]=n}},Le.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(P.NONE)},Le.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Le.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1
return!0},Le.prototype.interfaces_=function(){return[]},Le.prototype.getClass=function(){return Le}
var Me=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0]
this.elt[0]=new Le(e),this.elt[1]=new Le(e)}else if(arguments[0]instanceof t){var n=arguments[0]
this.elt[0]=new Le(n.elt[0]),this.elt[1]=new Le(n.elt[1])}}else if(2===arguments.length){var i=arguments[0],r=arguments[1]
this.elt[0]=new Le(P.NONE),this.elt[1]=new Le(P.NONE),this.elt[i].setLocation(r)}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2]
this.elt[0]=new Le(o,s,a),this.elt[1]=new Le(o,s,a)}else if(4===arguments.length){var l=arguments[0],u=arguments[1],h=arguments[2],c=arguments[3]
this.elt[0]=new Le(P.NONE,P.NONE,P.NONE),this.elt[1]=new Le(P.NONE,P.NONE,P.NONE),this.elt[l].setLocations(u,h,c)}}
Me.prototype.getGeometryCount=function(){var t=0
return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},Me.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},Me.prototype.isNull=function(t){return this.elt[t].isNull()},Me.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0]
this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1]
this.elt[e].setAllLocationsIfNull(n)}},Me.prototype.isLine=function(t){return this.elt[t].isLine()},Me.prototype.merge=function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new Le(t.elt[e]):this.elt[e].merge(t.elt[e])},Me.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Me.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0]
return this.elt[t].get(Ce.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1]
return this.elt[e].get(n)}},Me.prototype.toString=function(){var t=new O
return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},Me.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea()
if(1===arguments.length){var t=arguments[0]
return this.elt[t].isArea()}},Me.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},Me.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1]
this.elt[t].setLocation(Ce.ON,e)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2]
this.elt[n].setLocation(i,r)}},Me.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},Me.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},Me.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Le(this.elt[t].location[0]))},Me.prototype.interfaces_=function(){return[]},Me.prototype.getClass=function(){return Me},Me.toLineLabel=function(t){for(var e=new Me(P.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n))
return e}
var Oe=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new wt,this._pts=new wt,this._label=new Me(P.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new wt,this._geometryFactory=null
var t=arguments[0],e=arguments[1]
this._geometryFactory=e,this.computePoints(t),this.computeRing()}
Oe.prototype.computeRing=function(){if(null!==this._ring)return null
for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e)
this._ring=this._geometryFactory.createLinearRing(t),this._isHole=at.isCCW(this._ring.getCoordinates())},Oe.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},Oe.prototype.computePoints=function(t){this._startDe=t
var e=t,n=!0
do{if(null===e)throw new Pe("Found null DirectedEdge")
if(e.getEdgeRing()===this)throw new Pe("Directed Edge visited twice during ring-building at "+e.getCoordinate())
this._edges.add(e)
var i=e.getLabel()
et.isTrue(i.isArea()),this.mergeLabel(i),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)},Oe.prototype.getLinearRing=function(){return this._ring},Oe.prototype.getCoordinate=function(t){return this._pts.get(t)},Oe.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0
var t=this._startDe
do{var e=t.getNode().getEdges().getOutgoingDegree(this)
e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe)
this._maxNodeDegree*=2},Oe.prototype.addPoints=function(t,e,n){var i=t.getCoordinates()
if(e){var r=1
n&&(r=0)
for(var o=r;o<i.length;o++)this._pts.add(i[o])}else{var s=i.length-2
n&&(s=i.length-1)
for(var a=s;a>=0;a--)this._pts.add(i[a])}},Oe.prototype.isHole=function(){return this._isHole},Oe.prototype.setInResult=function(){var t=this._startDe
do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},Oe.prototype.containsPoint=function(t){var e=this.getLinearRing()
if(!e.getEnvelopeInternal().contains(t))return!1
if(!at.isPointInRing(t,e.getCoordinates()))return!1
for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1
return!0},Oe.prototype.addHole=function(t){this._holes.add(t)},Oe.prototype.isShell=function(){return null===this._shell},Oe.prototype.getLabel=function(){return this._label},Oe.prototype.getEdges=function(){return this._edges},Oe.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Oe.prototype.getShell=function(){return this._shell},Oe.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0]
this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[1],n=arguments[0].getLocation(e,Ce.RIGHT)
if(n===P.NONE)return null
if(this._label.getLocation(e)===P.NONE)return this._label.setLocation(e,n),null}},Oe.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},Oe.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing()
return t.createPolygon(this.getLinearRing(),e)},Oe.prototype.interfaces_=function(){return[]},Oe.prototype.getClass=function(){return Oe}
var Ne=function(t){function e(){var e=arguments[0],n=arguments[1]
t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Oe),De=function(t){function e(){var e=arguments[0],n=arguments[1]
t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new wt,e=this._startDe
do{if(null===e.getMinEdgeRing()){var n=new Ne(e,this._geometryFactory)
t.add(n)}e=e.getNext()}while(e!==this._startDe)
return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe
do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Oe),Fe=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0]
this._label=t}}
Fe.prototype.setVisited=function(t){this._isVisited=t},Fe.prototype.setInResult=function(t){this._isInResult=t},Fe.prototype.isCovered=function(){return this._isCovered},Fe.prototype.isCoveredSet=function(){return this._isCoveredSet},Fe.prototype.setLabel=function(t){this._label=t},Fe.prototype.getLabel=function(){return this._label},Fe.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},Fe.prototype.updateIM=function(t){et.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},Fe.prototype.isInResult=function(){return this._isInResult},Fe.prototype.isVisited=function(){return this._isVisited},Fe.prototype.interfaces_=function(){return[]},Fe.prototype.getClass=function(){return Fe}
var ke=function(t){function e(){t.call(this),this._coord=null,this._edges=null
var e=arguments[0],n=arguments[1]
this._coord=e,this._edges=n,this._label=new Me(0,P.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0
return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var n=P.NONE
if(n=this._label.getLocation(e),!t.isNull(e)){var i=t.getLocation(e)
n!==P.BOUNDARY&&(n=i)}return n},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments)
var e=arguments[0],n=arguments[1]
null===this._label?this._label=new Me(e,n):this._label.setLocation(e,n)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){if(arguments[0]instanceof e){var t=arguments[0]
this.mergeLabel(t._label)}else if(arguments[0]instanceof Me)for(var n=arguments[0],i=0;i<2;i++){var r=this.computeMergedLocation(n,i)
this._label.getLocation(i)===P.NONE&&this._label.setLocation(i,r)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null
var e=P.NONE
null!==this._label&&(e=this._label.getLocation(t))
var n=null
n=e===P.BOUNDARY?P.INTERIOR:P.BOUNDARY,this._label.setLocation(t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Fe),je=function(){this.nodeMap=new c,this.nodeFact=null
var t=arguments[0]
this.nodeFact=t}
je.prototype.find=function(t){return this.nodeMap.get(t)},je.prototype.addNode=function(){if(arguments[0]instanceof S){var t=arguments[0],e=this.nodeMap.get(t)
return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof ke){var n=arguments[0],i=this.nodeMap.get(n.getCoordinate())
return null===i?(this.nodeMap.put(n.getCoordinate(),n),n):(i.mergeLabel(n),i)}},je.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},je.prototype.iterator=function(){return this.nodeMap.values().iterator()},je.prototype.values=function(){return this.nodeMap.values()},je.prototype.getBoundaryNodes=function(t){for(var e=new wt,n=this.iterator();n.hasNext();){var i=n.next()
i.getLabel().getLocation(t)===P.BOUNDARY&&e.add(i)}return e},je.prototype.add=function(t){var e=t.getCoordinate()
this.addNode(e).add(t)},je.prototype.interfaces_=function(){return[]},je.prototype.getClass=function(){return je}
var ze=function(){},Ge={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}}
ze.prototype.interfaces_=function(){return[]},ze.prototype.getClass=function(){return ze},ze.isNorthern=function(t){return t===ze.NE||t===ze.NW},ze.isOpposite=function(t,e){return t!==e&&2==(t-e+4)%4},ze.commonHalfPlane=function(t,e){if(t===e)return t
if(2==(t-e+4)%4)return-1
var n=t<e?t:e
return 0===n&&3===(t>e?t:e)?3:n},ze.isInHalfPlane=function(t,e){return e===ze.SE?t===ze.SE||t===ze.SW:t===e||t===e+1},ze.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1]
if(0===t&&0===e)throw new y("Cannot compute the quadrant for point ( "+t+", "+e+" )")
return t>=0?e>=0?ze.NE:ze.SE:e>=0?ze.NW:ze.SW}if(arguments[0]instanceof S&&arguments[1]instanceof S){var n=arguments[0],i=arguments[1]
if(i.x===n.x&&i.y===n.y)throw new y("Cannot compute the quadrant for two identical points "+n)
return i.x>=n.x?i.y>=n.y?ze.NE:ze.SE:i.y>=n.y?ze.NW:ze.SW}},Ge.NE.get=function(){return 0},Ge.NW.get=function(){return 1},Ge.SW.get=function(){return 2},Ge.SE.get=function(){return 3},Object.defineProperties(ze,Ge)
var Be=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0]
this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2]
this._edge=e,this.init(n,i),this._label=null}else if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3]
this._edge=r,this.init(o,s),this._label=a}}
Be.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:at.computeOrientation(t._p0,t._p1,this._p1)},Be.prototype.getDy=function(){return this._dy},Be.prototype.getCoordinate=function(){return this._p0},Be.prototype.setNode=function(t){this._node=t},Be.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),i=n.lastIndexOf("."),r=n.substring(i+1)
t.print("  "+r+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},Be.prototype.compareTo=function(t){var e=t
return this.compareDirection(e)},Be.prototype.getDirectedCoordinate=function(){return this._p1},Be.prototype.getDx=function(){return this._dx},Be.prototype.getLabel=function(){return this._label},Be.prototype.getEdge=function(){return this._edge},Be.prototype.getQuadrant=function(){return this._quadrant},Be.prototype.getNode=function(){return this._node},Be.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".")
return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},Be.prototype.computeLabel=function(t){},Be.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=ze.quadrant(this._dx,this._dy),et.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},Be.prototype.interfaces_=function(){return[b]},Be.prototype.getClass=function(){return Be}
var qe=function(t){function e(){var e=arguments[0],n=arguments[1]
if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1))
else{var i=e.getNumPoints()-1
this.init(e.getCoordinate(i),e.getCoordinate(i-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new Me(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Pe("assigned depths do not match",this.getCoordinate())
this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,Ce.LEFT)===P.INTERIOR&&this._label.getLocation(e,Ce.RIGHT)===P.INTERIOR||(t=!1)
return t},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[Ce.LEFT]+"/"+this._depth[Ce.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,P.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,P.EXTERIOR)
return t&&e&&n},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta()
return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta()
this._isForward||(n=-n)
var i=1
t===Ce.LEFT&&(i=-1)
var r=Ce.opposite(t),o=e+n*i
this.setDepth(t,e),this.setDepth(r,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===P.EXTERIOR&&e===P.INTERIOR?1:t===P.INTERIOR&&e===P.EXTERIOR?-1:0},e}(Be),Ue=function(){}
Ue.prototype.createNode=function(t){return new ke(t,null)},Ue.prototype.interfaces_=function(){return[]},Ue.prototype.getClass=function(){return Ue}
var Ze=function(){if(this._edges=new wt,this._nodes=null,this._edgeEndList=new wt,0===arguments.length)this._nodes=new je(new Ue)
else if(1===arguments.length){var t=arguments[0]
this._nodes=new je(t)}}
Ze.prototype.printEdges=function(t){t.println("Edges:")
for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":")
var n=this._edges.get(e)
n.print(t),n.eiList.print(t)}},Ze.prototype.find=function(t){return this._nodes.find(t)},Ze.prototype.addNode=function(){if(arguments[0]instanceof ke){var t=arguments[0]
return this._nodes.addNode(t)}if(arguments[0]instanceof S){var e=arguments[0]
return this._nodes.addNode(e)}},Ze.prototype.getNodeIterator=function(){return this._nodes.iterator()},Ze.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},Ze.prototype.debugPrintln=function(t){Z.out.println(t)},Ze.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e)
if(null===n)return!1
var i=n.getLabel()
return null!==i&&i.getLocation(t)===P.BOUNDARY},Ze.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},Ze.prototype.matchInSameDirection=function(t,e,n,i){return!!t.equals(n)&&at.computeOrientation(t,e,i)===at.COLLINEAR&&ze.quadrant(t,e)===ze.quadrant(n,i)},Ze.prototype.getEdgeEnds=function(){return this._edgeEndList},Ze.prototype.debugPrint=function(t){Z.out.print(t)},Ze.prototype.getEdgeIterator=function(){return this._edges.iterator()},Ze.prototype.findEdgeInSameDirection=function(t,e){for(var n=0;n<this._edges.size();n++){var i=this._edges.get(n),r=i.getCoordinates()
if(this.matchInSameDirection(t,e,r[0],r[1]))return i
if(this.matchInSameDirection(t,e,r[r.length-1],r[r.length-2]))return i}return null},Ze.prototype.insertEdge=function(t){this._edges.add(t)},Ze.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next()
if(n.getEdge()===t)return n}return null},Ze.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next()
this._edges.add(n)
var i=new qe(n,!0),r=new qe(n,!1)
i.setSym(r),r.setSym(i),this.add(i),this.add(r)}},Ze.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},Ze.prototype.getNodes=function(){return this._nodes.values()},Ze.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var i=this._edges.get(n),r=i.getCoordinates()
if(t.equals(r[0])&&e.equals(r[1]))return i}return null},Ze.prototype.interfaces_=function(){return[]},Ze.prototype.getClass=function(){return Ze},Ze.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()}
var Xe=function(){this._geometryFactory=null,this._shellList=new wt
var t=arguments[0]
this._geometryFactory=t}
Xe.prototype.sortShellsAndHoles=function(t,e,n){for(var i=t.iterator();i.hasNext();){var r=i.next()
r.isHole()?n.add(r):e.add(r)}},Xe.prototype.computePolygons=function(t){for(var e=new wt,n=t.iterator();n.hasNext();){var i=n.next().toPolygon(this._geometryFactory)
e.add(i)}return e},Xe.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next()
if(null===i.getShell()){var r=this.findEdgeRingContaining(i,t)
if(null===r)throw new Pe("unable to assign hole to a shell",i.getCoordinate(0))
i.setShell(r)}}},Xe.prototype.buildMinimalEdgeRings=function(t,e,n){for(var i=new wt,r=t.iterator();r.hasNext();){var o=r.next()
if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings()
var s=o.buildMinimalRings(),a=this.findShell(s)
null!==a?(this.placePolygonHoles(a,s),e.add(a)):n.addAll(s)}else i.add(o)}return i},Xe.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0
return!1},Xe.prototype.buildMaximalEdgeRings=function(t){for(var e=new wt,n=t.iterator();n.hasNext();){var i=n.next()
if(i.isInResult()&&i.getLabel().isArea()&&null===i.getEdgeRing()){var r=new De(i,this._geometryFactory)
e.add(r),r.setInResult()}}return e},Xe.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next()
i.isHole()&&i.setShell(t)}},Xe.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Xe.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),i=n.getEnvelopeInternal(),r=n.getCoordinateN(0),o=null,s=null,a=e.iterator();a.hasNext();){var l=a.next(),u=l.getLinearRing(),h=u.getEnvelopeInternal()
null!==o&&(s=o.getLinearRing().getEnvelopeInternal())
var c=!1
h.contains(i)&&at.isPointInRing(r,u.getCoordinates())&&(c=!0),c&&(null===o||s.contains(h))&&(o=l)}return o},Xe.prototype.findShell=function(t){for(var e=0,n=null,i=t.iterator();i.hasNext();){var r=i.next()
r.isHole()||(n=r,e++)}return et.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},Xe.prototype.add=function(){if(1===arguments.length){var t=arguments[0]
this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0]
Ze.linkResultDirectedEdges(arguments[1])
var n=this.buildMaximalEdgeRings(e),i=new wt,r=this.buildMinimalEdgeRings(n,this._shellList,i)
this.sortShellsAndHoles(r,this._shellList,i),this.placeFreeHoles(this._shellList,i)}},Xe.prototype.interfaces_=function(){return[]},Xe.prototype.getClass=function(){return Xe}
var Ye=function(){}
Ye.prototype.getBounds=function(){},Ye.prototype.interfaces_=function(){return[]},Ye.prototype.getClass=function(){return Ye}
var Ve=function(){this._bounds=null,this._item=null
var t=arguments[0],e=arguments[1]
this._bounds=t,this._item=e}
Ve.prototype.getItem=function(){return this._item},Ve.prototype.getBounds=function(){return this._bounds},Ve.prototype.interfaces_=function(){return[Ye,e]},Ve.prototype.getClass=function(){return Ve}
var We=function(){this._size=null,this._items=null,this._size=0,this._items=new wt,this._items.add(null)}
We.prototype.poll=function(){if(this.isEmpty())return null
var t=this._items.get(1)
return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},We.prototype.size=function(){return this._size},We.prototype.reorder=function(t){for(var e=null,n=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e))
this._items.set(t,n)},We.prototype.clear=function(){this._size=0,this._items.clear()},We.prototype.isEmpty=function(){return 0===this._size},We.prototype.add=function(t){this._items.add(null),this._size+=1
var e=this._size
for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)))
this._items.set(e,t)},We.prototype.interfaces_=function(){return[]},We.prototype.getClass=function(){return We}
var He=function(){}
He.prototype.visitItem=function(t){},He.prototype.interfaces_=function(){return[]},He.prototype.getClass=function(){return He}
var $e=function(){}
$e.prototype.insert=function(t,e){},$e.prototype.remove=function(t,e){},$e.prototype.query=function(){},$e.prototype.interfaces_=function(){return[]},$e.prototype.getClass=function(){return $e}
var Ke=function(){if(this._childBoundables=new wt,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0]
this._level=t}},Je={serialVersionUID:{configurable:!0}}
Ke.prototype.getLevel=function(){return this._level},Ke.prototype.size=function(){return this._childBoundables.size()},Ke.prototype.getChildBoundables=function(){return this._childBoundables},Ke.prototype.addChildBoundable=function(t){et.isTrue(null===this._bounds),this._childBoundables.add(t)},Ke.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Ke.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Ke.prototype.interfaces_=function(){return[Ye,e]},Ke.prototype.getClass=function(){return Ke},Je.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Ke,Je)
var Qe=function(){}
Qe.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},Qe.min=function(t){return Qe.sort(t),t.get(0)},Qe.sort=function(t,e){var n=t.toArray()
e?kt.sort(n,e):kt.sort(n)
for(var i=t.iterator(),r=0,o=n.length;r<o;r++)i.next(),i.set(n[r])},Qe.singletonList=function(t){var e=new wt
return e.add(t),e}
var tn=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null
var t=arguments[0],e=arguments[1],n=arguments[2]
this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()}
tn.prototype.expandToQueue=function(t,e){var n=tn.isComposite(this._boundable1),i=tn.isComposite(this._boundable2)
if(n&&i)return tn.area(this._boundable1)>tn.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null)
if(n)return this.expand(this._boundable1,this._boundable2,t,e),null
if(i)return this.expand(this._boundable2,this._boundable1,t,e),null
throw new y("neither boundable is composite")},tn.prototype.isLeaves=function(){return!(tn.isComposite(this._boundable1)||tn.isComposite(this._boundable2))},tn.prototype.compareTo=function(t){var e=t
return this._distance<e._distance?-1:this._distance>e._distance?1:0},tn.prototype.expand=function(t,e,n,i){for(var r=t.getChildBoundables().iterator();r.hasNext();){var o=r.next(),s=new tn(o,e,this._itemDistance)
s.getDistance()<i&&n.add(s)}},tn.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},tn.prototype.getDistance=function(){return this._distance},tn.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},tn.prototype.interfaces_=function(){return[b]},tn.prototype.getClass=function(){return tn},tn.area=function(t){return t.getBounds().getArea()},tn.isComposite=function(t){return t instanceof Ke}
var en=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new wt,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY
this._nodeCapacity=e}else if(1===arguments.length){var n=arguments[0]
et.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},nn={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}}
en.prototype.getNodeCapacity=function(){return this._nodeCapacity},en.prototype.lastNode=function(t){return t.get(t.size()-1)},en.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root))
if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next()
n instanceof Ke?t+=this.size(n):n instanceof Ve&&(t+=1)}return t}},en.prototype.removeItem=function(t,e){for(var n=null,i=t.getChildBoundables().iterator();i.hasNext();){var r=i.next()
r instanceof Ve&&r.getItem()===e&&(n=r)}return null!==n&&(t.getChildBoundables().remove(n),!0)},en.prototype.itemsTree=function(){if(0===arguments.length){this.build()
var t=this.itemsTree(this._root)
return null===t?new wt:t}if(1===arguments.length){for(var e=arguments[0],n=new wt,i=e.getChildBoundables().iterator();i.hasNext();){var r=i.next()
if(r instanceof Ke){var o=this.itemsTree(r)
null!==o&&n.add(o)}else r instanceof Ve?n.add(r.getItem()):et.shouldNeverReachHere()}return n.size()<=0?null:n}},en.prototype.insert=function(t,e){et.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Ve(t,e))},en.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new wt
return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2]
if(et.isTrue(n>-2),i.getLevel()===n)return r.add(i),null
for(var o=i.getChildBoundables().iterator();o.hasNext();){var s=o.next()
s instanceof Ke?this.boundablesAtLevel(n,s,r):(et.isTrue(s instanceof Ve),-1===n&&r.add(s))}return null}},en.prototype.query=function(){if(1===arguments.length){var t=arguments[0]
this.build()
var e=new wt
return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,e),e}if(2===arguments.length){var n=arguments[0],i=arguments[1]
if(this.build(),this.isEmpty())return null
this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.query(n,this._root,i)}else if(3===arguments.length)if(R(arguments[2],He)&&arguments[0]instanceof Object&&arguments[1]instanceof Ke)for(var r=arguments[0],o=arguments[2],s=arguments[1].getChildBoundables(),a=0;a<s.size();a++){var l=s.get(a)
this.getIntersectsOp().intersects(l.getBounds(),r)&&(l instanceof Ke?this.query(r,l,o):l instanceof Ve?o.visitItem(l.getItem()):et.shouldNeverReachHere())}else if(R(arguments[2],Et)&&arguments[0]instanceof Object&&arguments[1]instanceof Ke)for(var u=arguments[0],h=arguments[2],c=arguments[1].getChildBoundables(),f=0;f<c.size();f++){var p=c.get(f)
this.getIntersectsOp().intersects(p.getBounds(),u)&&(p instanceof Ke?this.query(u,p,h):p instanceof Ve?h.add(p.getItem()):et.shouldNeverReachHere())}},en.prototype.build=function(){if(this._built)return null
this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},en.prototype.getRoot=function(){return this.build(),this._root},en.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1]
return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=this.removeItem(i,r)
if(o)return!0
for(var s=null,a=i.getChildBoundables().iterator();a.hasNext();){var l=a.next()
if(this.getIntersectsOp().intersects(l.getBounds(),n)&&l instanceof Ke&&(o=this.remove(n,l,r))){s=l
break}}return null!==s&&s.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(s),o}},en.prototype.createHigherLevels=function(t,e){et.isTrue(!t.isEmpty())
var n=this.createParentBoundables(t,e+1)
return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},en.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root))
if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next()
if(n instanceof Ke){var i=this.depth(n)
i>t&&(t=i)}}return t+1}},en.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty())
var n=new wt
n.add(this.createNode(e))
var i=new wt(t)
Qe.sort(i,this.getComparator())
for(var r=i.iterator();r.hasNext();){var o=r.next()
this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n},en.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},en.prototype.interfaces_=function(){return[e]},en.prototype.getClass=function(){return en},en.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},nn.IntersectsOp.get=function(){return rn},nn.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},nn.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(en,nn)
var rn=function(){},on=function(){}
on.prototype.distance=function(t,e){},on.prototype.interfaces_=function(){return[]},on.prototype.getClass=function(){return on}
var sn=function(t){function n(e){e=e||n.DEFAULT_NODE_CAPACITY,t.call(this,e)}t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n
var i={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}}
return n.prototype.createParentBoundablesFromVerticalSlices=function(t,e){et.isTrue(t.length>0)
for(var n=new wt,i=0;i<t.length;i++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[i],e))
return n},n.prototype.createNode=function(t){return new an(t)},n.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},n.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments)
var e=arguments[0],n=arguments[1]
if(e.isNull())return null
t.prototype.insert.call(this,e,n)},n.prototype.getIntersectsOp=function(){return n.intersectsOp},n.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),i=new Array(e).fill(null),r=t.iterator(),o=0;o<e;o++){i[o]=new wt
for(var s=0;r.hasNext()&&s<n;){var a=r.next()
i[o].add(a),s++}}return i},n.prototype.query=function(){if(1===arguments.length){var e=arguments[0]
return t.prototype.query.call(this,e)}if(2===arguments.length){var n=arguments[0],i=arguments[1]
t.prototype.query.call(this,n,i)}else if(3===arguments.length)if(R(arguments[2],He)&&arguments[0]instanceof Object&&arguments[1]instanceof Ke){var r=arguments[0],o=arguments[1],s=arguments[2]
t.prototype.query.call(this,r,o,s)}else if(R(arguments[2],Et)&&arguments[0]instanceof Object&&arguments[1]instanceof Ke){var a=arguments[0],l=arguments[1],u=arguments[2]
t.prototype.query.call(this,a,l,u)}},n.prototype.getComparator=function(){return n.yComparator},n.prototype.createParentBoundablesFromVerticalSlice=function(e,n){return t.prototype.createParentBoundables.call(this,e,n)},n.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1]
return t.prototype.remove.call(this,e,n)}return t.prototype.remove.apply(this,arguments)},n.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},n.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty())
var i=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),r=new wt(t)
Qe.sort(r,n.xComparator)
var o=this.verticalSlices(r,Math.trunc(Math.ceil(Math.sqrt(i))))
return this.createParentBoundablesFromVerticalSlices(o,e)},n.prototype.nearestNeighbour=function(){if(1===arguments.length){if(R(arguments[0],on)){var t=arguments[0],e=new tn(this.getRoot(),this.getRoot(),t)
return this.nearestNeighbour(e)}if(arguments[0]instanceof tn){var i=arguments[0]
return this.nearestNeighbour(i,v.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof n&&R(arguments[1],on)){var r=arguments[0],o=arguments[1],s=new tn(this.getRoot(),r.getRoot(),o)
return this.nearestNeighbour(s)}if(arguments[0]instanceof tn&&"number"==typeof arguments[1]){var a=arguments[0],l=arguments[1],u=null,h=new We
for(h.add(a);!h.isEmpty()&&l>0;){var c=h.poll(),f=c.getDistance()
if(f>=l)break
c.isLeaves()?(l=f,u=c):c.expandToQueue(h,l)}return[u.getBoundable(0).getItem(),u.getBoundable(1).getItem()]}}else if(3===arguments.length){var p=arguments[2],d=new Ve(arguments[0],arguments[1]),g=new tn(this.getRoot(),d,p)
return this.nearestNeighbour(g)[0]}},n.prototype.interfaces_=function(){return[$e,e]},n.prototype.getClass=function(){return n},n.centreX=function(t){return n.avg(t.getMinX(),t.getMaxX())},n.avg=function(t,e){return(t+e)/2},n.centreY=function(t){return n.avg(t.getMinY(),t.getMaxY())},i.STRtreeNode.get=function(){return an},i.serialVersionUID.get=function(){return 0x39920f7d5f261e0},i.xComparator.get=function(){return{interfaces_:function(){return[w]},compare:function(e,i){return t.compareDoubles(n.centreX(e.getBounds()),n.centreX(i.getBounds()))}}},i.yComparator.get=function(){return{interfaces_:function(){return[w]},compare:function(e,i){return t.compareDoubles(n.centreY(e.getBounds()),n.centreY(i.getBounds()))}}},i.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},i.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(n,i),n}(en),an=function(t){function e(){var e=arguments[0]
t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next()
null===t?t=new Y(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ke),ln=function(){}
ln.prototype.interfaces_=function(){return[]},ln.prototype.getClass=function(){return ln},ln.relativeSign=function(t,e){return t<e?-1:t>e?1:0},ln.compare=function(t,e,n){if(e.equals2D(n))return 0
var i=ln.relativeSign(e.x,n.x),r=ln.relativeSign(e.y,n.y)
switch(t){case 0:return ln.compareValue(i,r)
case 1:return ln.compareValue(r,i)
case 2:return ln.compareValue(r,-i)
case 3:return ln.compareValue(-i,r)
case 4:return ln.compareValue(-i,-r)
case 5:return ln.compareValue(-r,-i)
case 6:return ln.compareValue(-r,i)
case 7:return ln.compareValue(i,-r)}return et.shouldNeverReachHere("invalid octant value"),0},ln.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0}
var un=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null
var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3]
this._segString=t,this.coord=new S(e),this.segmentIndex=n,this._segmentOctant=i,this._isInterior=!e.equals2D(t.getCoordinate(n))}
un.prototype.getCoordinate=function(){return this.coord},un.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},un.prototype.compareTo=function(t){var e=t
return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:ln.compare(this._segmentOctant,this.coord,e.coord)},un.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},un.prototype.isInterior=function(){return this._isInterior},un.prototype.interfaces_=function(){return[b]},un.prototype.getClass=function(){return un}
var hn=function(){this._nodeMap=new c,this._edge=null
var t=arguments[0]
this._edge=t}
hn.prototype.getSplitCoordinates=function(){var t=new Ct
this.addEndpoints()
for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next()
this.addEdgeCoordinates(n,i,t),n=i}return t.toCoordinateArray()},hn.prototype.addCollapsedNodes=function(){var t=new wt
this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t)
for(var e=t.iterator();e.hasNext();){var n=e.next().intValue()
this.add(this._edge.getCoordinate(n),n)}},hn.prototype.print=function(t){t.println("Intersections:")
for(var e=this.iterator();e.hasNext();)e.next().print(t)},hn.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),i=this._edge.getCoordinate(e+2)
n.equals2D(i)&&t.add(new N(e+1))}},hn.prototype.addEdgeCoordinates=function(t,e,n){var i=this._edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(i)
n.add(new S(t.coord),!1)
for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o))
r&&n.add(new S(e.coord))},hn.prototype.iterator=function(){return this._nodeMap.values().iterator()},hn.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes()
for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i)
t.add(r),n=i}},hn.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1
var i=e.segmentIndex-t.segmentIndex
return e.isInterior()||i--,1===i&&(n[0]=t.segmentIndex+1,!0)},hn.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),i=n.next();n.hasNext();){var r=n.next()
this.findCollapseIndex(i,r,e)&&t.add(new N(e[0])),i=r}},hn.prototype.getEdge=function(){return this._edge},hn.prototype.addEndpoints=function(){var t=this._edge.size()-1
this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},hn.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=this._edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(i)
r||n--
var o=new Array(n).fill(null),s=0
o[s++]=new S(t.coord)
for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this._edge.getCoordinate(a)
return r&&(o[s]=new S(e.coord)),new dn(o,this._edge.getData())},hn.prototype.add=function(t,e){var n=new un(this._edge,t,e,this._edge.getSegmentOctant(e)),i=this._nodeMap.get(n)
return null!==i?(et.isTrue(i.coord.equals2D(t),"Found equal nodes with different coordinates"),i):(this._nodeMap.put(n,n),n)},hn.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0)
if(!n.equals2D(e[0]))throw new Q("bad split edge start point at "+n)
var i=t.get(t.size()-1).getCoordinates(),r=i[i.length-1]
if(!r.equals2D(e[e.length-1]))throw new Q("bad split edge end point at "+r)},hn.prototype.interfaces_=function(){return[]},hn.prototype.getClass=function(){return hn}
var cn=function(){}
cn.prototype.interfaces_=function(){return[]},cn.prototype.getClass=function(){return cn},cn.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1]
if(0===t&&0===e)throw new y("Cannot compute the octant for point ( "+t+", "+e+" )")
var n=Math.abs(t),i=Math.abs(e)
return t>=0?e>=0?n>=i?0:1:n>=i?7:6:e>=0?n>=i?3:2:n>=i?4:5}if(arguments[0]instanceof S&&arguments[1]instanceof S){var r=arguments[0],o=arguments[1],s=o.x-r.x,a=o.y-r.y
if(0===s&&0===a)throw new y("Cannot compute the octant for two identical points "+r)
return cn.octant(s,a)}}
var fn=function(){}
fn.prototype.getCoordinates=function(){},fn.prototype.size=function(){},fn.prototype.getCoordinate=function(t){},fn.prototype.isClosed=function(){},fn.prototype.setData=function(t){},fn.prototype.getData=function(){},fn.prototype.interfaces_=function(){return[]},fn.prototype.getClass=function(){return fn}
var pn=function(){}
pn.prototype.addIntersection=function(t,e){},pn.prototype.interfaces_=function(){return[fn]},pn.prototype.getClass=function(){return pn}
var dn=function(){this._nodeList=new hn(this),this._pts=null,this._data=null
var t=arguments[0],e=arguments[1]
this._pts=t,this._data=e}
dn.prototype.getCoordinates=function(){return this._pts},dn.prototype.size=function(){return this._pts.length},dn.prototype.getCoordinate=function(t){return this._pts[t]},dn.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},dn.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},dn.prototype.setData=function(t){this._data=t},dn.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:cn.octant(t,e)},dn.prototype.getData=function(){return this._data},dn.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1]
this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[1],i=arguments[3],r=new S(arguments[0].getIntersection(i))
this.addIntersection(r,n)}},dn.prototype.toString=function(){return J.toLineString(new le(this._pts))},dn.prototype.getNodeList=function(){return this._nodeList},dn.prototype.addIntersectionNode=function(t,e){var n=e,i=n+1
if(i<this._pts.length){var r=this._pts[i]
t.equals2D(r)&&(n=i)}return this._nodeList.add(t,n)},dn.prototype.addIntersections=function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)},dn.prototype.interfaces_=function(){return[pn]},dn.prototype.getClass=function(){return dn},dn.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new wt
return dn.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[1],i=arguments[0].iterator();i.hasNext();)i.next().getNodeList().addSplitEdges(n)}
var gn=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new S,this.p1=new S
else if(1===arguments.length){var t=arguments[0]
this.p0=new S(t.p0),this.p1=new S(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1]
else if(4===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2],r=arguments[3]
this.p0=new S(e,n),this.p1=new S(i,r)}},_n={serialVersionUID:{configurable:!0}}
gn.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},gn.prototype.orientationIndex=function(){if(arguments[0]instanceof gn){var t=arguments[0],e=at.orientationIndex(this.p0,this.p1,t.p0),n=at.orientationIndex(this.p0,this.p1,t.p1)
return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof S){var i=arguments[0]
return at.orientationIndex(this.p0,this.p1,i)}},gn.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},gn.prototype.isVertical=function(){return this.p0.x===this.p1.x},gn.prototype.equals=function(t){if(!(t instanceof gn))return!1
var e=t
return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},gn.prototype.intersection=function(t){var e=new rt
return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},gn.prototype.project=function(){if(arguments[0]instanceof S){var t=arguments[0]
if(t.equals(this.p0)||t.equals(this.p1))return new S(t)
var e=this.projectionFactor(t),n=new S
return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof gn){var i=arguments[0],r=this.projectionFactor(i.p0),o=this.projectionFactor(i.p1)
if(r>=1&&o>=1)return null
if(r<=0&&o<=0)return null
var s=this.project(i.p0)
r<0&&(s=this.p0),r>1&&(s=this.p1)
var a=this.project(i.p1)
return o<0&&(a=this.p0),o>1&&(a=this.p1),new gn(s,a)}},gn.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},gn.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},gn.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},gn.prototype.distancePerpendicular=function(t){return at.distancePointLinePerpendicular(t,this.p0,this.p1)},gn.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},gn.prototype.midPoint=function(){return gn.midPoint(this.p0,this.p1)},gn.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0
if(t.equals(this.p1))return 1
var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,i=e*e+n*n
return i<=0?v.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/i},gn.prototype.closestPoints=function(t){var e=this.intersection(t)
if(null!==e)return[e,e]
var n=new Array(2).fill(null),i=v.MAX_VALUE,r=null,o=this.closestPoint(t.p0)
i=o.distance(t.p0),n[0]=o,n[1]=t.p0
var s=this.closestPoint(t.p1);(r=s.distance(t.p1))<i&&(i=r,n[0]=s,n[1]=t.p1)
var a=t.closestPoint(this.p0);(r=a.distance(this.p0))<i&&(i=r,n[0]=this.p0,n[1]=a)
var l=t.closestPoint(this.p1)
return(r=l.distance(this.p1))<i&&(i=r,n[0]=this.p1,n[1]=l),n},gn.prototype.closestPoint=function(t){var e=this.projectionFactor(t)
return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},gn.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},gn.prototype.getLength=function(){return this.p0.distance(this.p1)},gn.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0)
return 0!==n?n:this.p1.compareTo(e.p1)},gn.prototype.reverse=function(){var t=this.p0
this.p0=this.p1,this.p1=t},gn.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},gn.prototype.lineIntersection=function(t){try{return X.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof U))throw t}return null},gn.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},gn.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),i=this.p0.y+t*(this.p1.y-this.p0.y),r=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,s=Math.sqrt(r*r+o*o),a=0,l=0
if(0!==e){if(s<=0)throw new Error("Cannot compute offset from zero-length line segment")
a=e*r/s,l=e*o/s}return new S(n-l,i+a)},gn.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0]
this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1]
this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},gn.prototype.segmentFraction=function(t){var e=this.projectionFactor(t)
return e<0?e=0:(e>1||v.isNaN(e))&&(e=1),e},gn.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},gn.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},gn.prototype.distance=function(){if(arguments[0]instanceof gn){var t=arguments[0]
return at.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof S){var e=arguments[0]
return at.distancePointLine(e,this.p0,this.p1)}},gn.prototype.pointAlong=function(t){var e=new S
return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},gn.prototype.hashCode=function(){var t=v.doubleToLongBits(this.p0.x)
t^=31*v.doubleToLongBits(this.p0.y)
var e=Math.trunc(t)^Math.trunc(t>>32),n=v.doubleToLongBits(this.p1.x)
return n^=31*v.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)},gn.prototype.interfaces_=function(){return[b,e]},gn.prototype.getClass=function(){return gn},gn.midPoint=function(t,e){return new S((t.x+e.x)/2,(t.y+e.y)/2)},_n.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(gn,_n)
var mn=function(){this.tempEnv1=new Y,this.tempEnv2=new Y,this._overlapSeg1=new gn,this._overlapSeg2=new gn}
mn.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[3]
arguments[0].getLineSegment(t,this._overlapSeg1),e.getLineSegment(n,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},mn.prototype.interfaces_=function(){return[]},mn.prototype.getClass=function(){return mn}
var yn=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null
var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3]
this._pts=t,this._start=e,this._end=n,this._context=i}
yn.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},yn.prototype.computeSelect=function(t,e,n,i){var r=this._pts[e],o=this._pts[n]
if(i.tempEnv1.init(r,o),n-e==1)return i.select(this,e),null
if(!t.intersects(i.tempEnv1))return null
var s=Math.trunc((e+n)/2)
e<s&&this.computeSelect(t,e,s,i),s<n&&this.computeSelect(t,s,n,i)},yn.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n]
return t},yn.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},yn.prototype.setId=function(t){this._id=t},yn.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},yn.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end]
this._env=new Y(t,e)}return this._env},yn.prototype.getEndIndex=function(){return this._end},yn.prototype.getStartIndex=function(){return this._start},yn.prototype.getContext=function(){return this._context},yn.prototype.getId=function(){return this._id},yn.prototype.computeOverlapsInternal=function(t,e,n,i,r,o){var s=this._pts[t],a=this._pts[e],l=n._pts[i],u=n._pts[r]
if(e-t==1&&r-i==1)return o.overlap(this,t,n,i),null
if(o.tempEnv1.init(s,a),o.tempEnv2.init(l,u),!o.tempEnv1.intersects(o.tempEnv2))return null
var h=Math.trunc((t+e)/2),c=Math.trunc((i+r)/2)
t<h&&(i<c&&this.computeOverlapsInternal(t,h,n,i,c,o),c<r&&this.computeOverlapsInternal(t,h,n,c,r,o)),h<e&&(i<c&&this.computeOverlapsInternal(h,e,n,i,c,o),c<r&&this.computeOverlapsInternal(h,e,n,c,r,o))},yn.prototype.interfaces_=function(){return[]},yn.prototype.getClass=function(){return yn}
var vn=function(){}
vn.prototype.interfaces_=function(){return[]},vn.prototype.getClass=function(){return vn},vn.getChainStartIndices=function(t){var e=0,n=new wt
n.add(new N(e))
do{var i=vn.findChainEnd(t,e)
n.add(new N(i)),e=i}while(e<t.length-1)
return vn.toIntArray(n)},vn.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++
if(n>=t.length-1)return t.length-1
for(var i=ze.quadrant(t[n],t[n+1]),r=e+1;r<t.length&&(t[r-1].equals2D(t[r])||ze.quadrant(t[r-1],t[r])===i);)r++
return r-1},vn.getChains=function(){if(1===arguments.length)return vn.getChains(arguments[0],null)
if(2===arguments.length){for(var t=arguments[0],e=arguments[1],n=new wt,i=vn.getChainStartIndices(t),r=0;r<i.length-1;r++){var o=new yn(t,i[r],i[r+1],e)
n.add(o)}return n}},vn.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue()
return e}
var xn=function(){}
xn.prototype.computeNodes=function(t){},xn.prototype.getNodedSubstrings=function(){},xn.prototype.interfaces_=function(){return[]},xn.prototype.getClass=function(){return xn}
var bn=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0]
this.setSegmentIntersector(t)}}
bn.prototype.setSegmentIntersector=function(t){this._segInt=t},bn.prototype.interfaces_=function(){return[xn]},bn.prototype.getClass=function(){return bn}
var En=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new wt,this._index=new sn,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e
var n={SegmentOverlapAction:{configurable:!0}}
return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return dn.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=vn.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next()
n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t
for(var e=t.iterator();e.hasNext();)this.add(e.next())
this.intersectChains()},e.prototype.intersectChains=function(){for(var t=new wn(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var n=e.next(),i=this._index.query(n.getEnvelope()).iterator();i.hasNext();){var r=i.next()
if(r.getId()>n.getId()&&(n.computeOverlaps(r,t),this._nOverlaps++),this._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return wn},Object.defineProperties(e,n),e}(bn),wn=function(t){function e(){t.call(this),this._si=null
var e=arguments[0]
this._si=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments)
var e=arguments[1],n=arguments[2],i=arguments[3],r=arguments[0].getContext(),o=n.getContext()
this._si.processIntersections(r,e,o,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(mn),Sn=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0]
this.setQuadrantSegments(e)}else if(2===arguments.length){var n=arguments[0],i=arguments[1]
this.setQuadrantSegments(n),this.setEndCapStyle(i)}else if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3]
this.setQuadrantSegments(r),this.setEndCapStyle(o),this.setJoinStyle(s),this.setMitreLimit(a)}},Cn={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}}
Sn.prototype.getEndCapStyle=function(){return this._endCapStyle},Sn.prototype.isSingleSided=function(){return this._isSingleSided},Sn.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=Sn.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Sn.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Sn.JOIN_ROUND&&(this._quadrantSegments=Sn.DEFAULT_QUADRANT_SEGMENTS)},Sn.prototype.getJoinStyle=function(){return this._joinStyle},Sn.prototype.setJoinStyle=function(t){this._joinStyle=t},Sn.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},Sn.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Sn.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Sn.prototype.setEndCapStyle=function(t){this._endCapStyle=t},Sn.prototype.getMitreLimit=function(){return this._mitreLimit},Sn.prototype.setMitreLimit=function(t){this._mitreLimit=t},Sn.prototype.setSingleSided=function(t){this._isSingleSided=t},Sn.prototype.interfaces_=function(){return[]},Sn.prototype.getClass=function(){return Sn},Sn.bufferDistanceError=function(t){var e=Math.PI/2/t
return 1-Math.cos(e/2)},Cn.CAP_ROUND.get=function(){return 1},Cn.CAP_FLAT.get=function(){return 2},Cn.CAP_SQUARE.get=function(){return 3},Cn.JOIN_ROUND.get=function(){return 1},Cn.JOIN_MITRE.get=function(){return 2},Cn.JOIN_BEVEL.get=function(){return 3},Cn.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},Cn.DEFAULT_MITRE_LIMIT.get=function(){return 5},Cn.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(Sn,Cn)
var Tn=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=at.COUNTERCLOCKWISE,this._inputLine=t||null},In={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}}
Tn.prototype.isDeletable=function(t,e,n,i){var r=this._inputLine[t],o=this._inputLine[e],s=this._inputLine[n]
return!!this.isConcave(r,o,s)&&!!this.isShallow(r,o,s,i)&&this.isShallowSampled(r,o,t,n,i)},Tn.prototype.deleteShallowConcavities=function(){for(var t=1,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e),i=!1;n<this._inputLine.length;){var r=!1
this.isDeletable(t,e,n,this._distanceTol)&&(this._isDeleted[e]=Tn.DELETE,r=!0,i=!0),t=r?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return i},Tn.prototype.isShallowConcavity=function(t,e,n,i){return at.computeOrientation(t,e,n)===this._angleOrientation&&at.distancePointLine(e,t,n)<i},Tn.prototype.isShallowSampled=function(t,e,n,i,r){var o=Math.trunc((i-n)/Tn.NUM_PTS_TO_CHECK)
o<=0&&(o=1)
for(var s=n;s<i;s+=o)if(!this.isShallow(t,e,this._inputLine[s],r))return!1
return!0},Tn.prototype.isConcave=function(t,e,n){return at.computeOrientation(t,e,n)===this._angleOrientation},Tn.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=at.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null)
var e=!1
do{e=this.deleteShallowConcavities()}while(e)
return this.collapseLine()},Tn.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===Tn.DELETE;)e++
return e},Tn.prototype.isShallow=function(t,e,n,i){return at.distancePointLine(e,t,n)<i},Tn.prototype.collapseLine=function(){for(var t=new Ct,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Tn.DELETE&&t.add(this._inputLine[e])
return t.toCoordinateArray()},Tn.prototype.interfaces_=function(){return[]},Tn.prototype.getClass=function(){return Tn},Tn.simplify=function(t,e){return new Tn(t).simplify(e)},In.INIT.get=function(){return 0},In.DELETE.get=function(){return 1},In.KEEP.get=function(){return 1},In.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Tn,In)
var Pn=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new wt},An={COORDINATE_ARRAY_TYPE:{configurable:!0}}
Pn.prototype.getCoordinates=function(){return this._ptList.toArray(Pn.COORDINATE_ARRAY_TYPE)},Pn.prototype.setPrecisionModel=function(t){this._precisionModel=t},Pn.prototype.addPt=function(t){var e=new S(t)
if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null
this._ptList.add(e)},Pn.prototype.revere=function(){},Pn.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n])
else for(var i=t.length-1;i>=0;i--)this.addPt(t[i])},Pn.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1
var e=this._ptList.get(this._ptList.size()-1)
return t.distance(e)<this._minimimVertexDistance},Pn.prototype.toString=function(){return(new me).createLineString(this.getCoordinates()).toString()},Pn.prototype.closeRing=function(){if(this._ptList.size()<1)return null
var t=new S(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1)
if(t.equals(e))return null
this._ptList.add(t)},Pn.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},Pn.prototype.interfaces_=function(){return[]},Pn.prototype.getClass=function(){return Pn},An.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Pn,An)
var Rn=function(){},Ln={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}}
Rn.prototype.interfaces_=function(){return[]},Rn.prototype.getClass=function(){return Rn},Rn.toDegrees=function(t){return 180*t/Math.PI},Rn.normalize=function(t){for(;t>Math.PI;)t-=Rn.PI_TIMES_2
for(;t<=-Math.PI;)t+=Rn.PI_TIMES_2
return t},Rn.angle=function(){if(1===arguments.length){var t=arguments[0]
return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],i=n.x-e.x,r=n.y-e.y
return Math.atan2(r,i)}},Rn.isAcute=function(t,e,n){var i=t.x-e.x,r=t.y-e.y
return i*(n.x-e.x)+r*(n.y-e.y)>0},Rn.isObtuse=function(t,e,n){var i=t.x-e.x,r=t.y-e.y
return i*(n.x-e.x)+r*(n.y-e.y)<0},Rn.interiorAngle=function(t,e,n){var i=Rn.angle(e,t),r=Rn.angle(e,n)
return Math.abs(r-i)},Rn.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Rn.PI_TIMES_2
t>=Rn.PI_TIMES_2&&(t=0)}else{for(;t>=Rn.PI_TIMES_2;)t-=Rn.PI_TIMES_2
t<0&&(t=0)}return t},Rn.angleBetween=function(t,e,n){var i=Rn.angle(e,t),r=Rn.angle(e,n)
return Rn.diff(i,r)},Rn.diff=function(t,e){var n=null
return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},Rn.toRadians=function(t){return t*Math.PI/180},Rn.getTurn=function(t,e){var n=Math.sin(e-t)
return n>0?Rn.COUNTERCLOCKWISE:n<0?Rn.CLOCKWISE:Rn.NONE},Rn.angleBetweenOriented=function(t,e,n){var i=Rn.angle(e,t),r=Rn.angle(e,n)-i
return r<=-Math.PI?r+Rn.PI_TIMES_2:r>Math.PI?r-Rn.PI_TIMES_2:r},Ln.PI_TIMES_2.get=function(){return 2*Math.PI},Ln.PI_OVER_2.get=function(){return Math.PI/2},Ln.PI_OVER_4.get=function(){return Math.PI/4},Ln.COUNTERCLOCKWISE.get=function(){return at.COUNTERCLOCKWISE},Ln.CLOCKWISE.get=function(){return at.CLOCKWISE},Ln.NONE.get=function(){return at.COLLINEAR},Object.defineProperties(Rn,Ln)
var Mn=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new gn,this._seg1=new gn,this._offset0=new gn,this._offset1=new gn,this._side=0,this._hasNarrowConcaveAngle=!1
var e=arguments[0],n=arguments[1],i=arguments[2]
this._precisionModel=e,this._bufParams=n,this._li=new rt,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===Sn.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(i)},On={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}}
Mn.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null
var n=at.computeOrientation(this._s0,this._s1,this._s2),i=n===at.CLOCKWISE&&this._side===Ce.LEFT||n===at.COUNTERCLOCKWISE&&this._side===Ce.RIGHT
0===n?this.addCollinear(e):i?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},Mn.prototype.addLineEndCap=function(t,e){var n=new gn(t,e),i=new gn
this.computeOffsetSegment(n,Ce.LEFT,this._distance,i)
var r=new gn
this.computeOffsetSegment(n,Ce.RIGHT,this._distance,r)
var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o)
switch(this._bufParams.getEndCapStyle()){case Sn.CAP_ROUND:this._segList.addPt(i.p1),this.addFilletArc(e,a+Math.PI/2,a-Math.PI/2,at.CLOCKWISE,this._distance),this._segList.addPt(r.p1)
break
case Sn.CAP_FLAT:this._segList.addPt(i.p1),this._segList.addPt(r.p1)
break
case Sn.CAP_SQUARE:var l=new S
l.x=Math.abs(this._distance)*Math.cos(a),l.y=Math.abs(this._distance)*Math.sin(a)
var u=new S(i.p1.x+l.x,i.p1.y+l.y),h=new S(r.p1.x+l.x,r.p1.y+l.y)
this._segList.addPt(u),this._segList.addPt(h)}},Mn.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Mn.prototype.addMitreJoin=function(t,e,n,i){var r=!0,o=null
try{o=X.intersection(e.p0,e.p1,n.p0,n.p1),(i<=0?1:o.distance(t)/Math.abs(i))>this._bufParams.getMitreLimit()&&(r=!1)}catch(t){if(!(t instanceof U))throw t
o=new S(0,0),r=!1}r?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,i,this._bufParams.getMitreLimit())},Mn.prototype.addFilletCorner=function(t,e,n,i,r){var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o),l=n.x-t.x,u=n.y-t.y,h=Math.atan2(u,l)
i===at.CLOCKWISE?a<=h&&(a+=2*Math.PI):a>=h&&(a-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,a,h,i,r),this._segList.addPt(n)},Mn.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Mn.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null
this._bufParams.getJoinStyle()===Sn.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Sn.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},Mn.prototype.createSquare=function(t){this._segList.addPt(new S(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new S(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new S(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new S(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},Mn.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},Mn.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Mn.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Mn.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},Mn.prototype.addLimitedMitreJoin=function(t,e,n,i){var r=this._seg0.p1,o=Rn.angle(r,this._seg0.p0),s=Rn.angleBetweenOriented(this._seg0.p0,r,this._seg1.p1)/2,a=Rn.normalize(o+s),l=Rn.normalize(a+Math.PI),u=i*n,h=n-u*Math.abs(Math.sin(s)),c=r.x+u*Math.cos(l),f=r.y+u*Math.sin(l),p=new S(c,f),d=new gn(r,p),g=d.pointAlongOffset(1,h),_=d.pointAlongOffset(1,-h)
this._side===Ce.LEFT?(this._segList.addPt(g),this._segList.addPt(_)):(this._segList.addPt(_),this._segList.addPt(g))},Mn.prototype.computeOffsetSegment=function(t,e,n,i){var r=e===Ce.LEFT?1:-1,o=t.p1.x-t.p0.x,s=t.p1.y-t.p0.y,a=Math.sqrt(o*o+s*s),l=r*n*o/a,u=r*n*s/a
i.p0.x=t.p0.x-u,i.p0.y=t.p0.y+l,i.p1.x=t.p1.x-u,i.p1.y=t.p1.y+l},Mn.prototype.addFilletArc=function(t,e,n,i,r){var o=i===at.CLOCKWISE?-1:1,s=Math.abs(e-n),a=Math.trunc(s/this._filletAngleQuantum+.5)
if(a<1)return null
for(var l=s/a,u=0,h=new S;u<s;){var c=e+o*u
h.x=t.x+r*Math.cos(c),h.y=t.y+r*Math.sin(c),this._segList.addPt(h),u+=l}},Mn.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0))
else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Mn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1)
else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new S((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1))
this._segList.addPt(n)
var i=new S((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1))
this._segList.addPt(i)}else this._segList.addPt(this._s1)
this._segList.addPt(this._offset1.p0)}},Mn.prototype.createCircle=function(t){var e=new S(t.x+this._distance,t.y)
this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Mn.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},Mn.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Pn,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*Mn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Mn.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Sn.JOIN_BEVEL||this._bufParams.getJoinStyle()===Sn.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,at.CLOCKWISE,this._distance))},Mn.prototype.closeRing=function(){this._segList.closeRing()},Mn.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Mn.prototype.interfaces_=function(){return[]},Mn.prototype.getClass=function(){return Mn},On.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},On.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},On.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},On.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Mn,On)
var Nn=function(){this._distance=0,this._precisionModel=null,this._bufParams=null
var t=arguments[0],e=arguments[1]
this._precisionModel=t,this._bufParams=e}
Nn.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null
var n=e<0,i=Math.abs(e),r=this.getSegGen(i)
t.length<=1?this.computePointCurve(t[0],r):this.computeOffsetCurve(t,n,r)
var o=r.getCoordinates()
return n&&Tt.reverse(o),o},Nn.prototype.computeSingleSidedBufferCurve=function(t,e,n){var i=this.simplifyTolerance(this._distance)
if(e){n.addSegments(t,!0)
var r=Tn.simplify(t,-i),o=r.length-1
n.initSideSegments(r[o],r[o-1],Ce.LEFT),n.addFirstSegment()
for(var s=o-2;s>=0;s--)n.addNextSegment(r[s],!0)}else{n.addSegments(t,!1)
var a=Tn.simplify(t,i),l=a.length-1
n.initSideSegments(a[0],a[1],Ce.LEFT),n.addFirstSegment()
for(var u=2;u<=l;u++)n.addNextSegment(a[u],!0)}n.addLastSegment(),n.closeRing()},Nn.prototype.computeRingBufferCurve=function(t,e,n){var i=this.simplifyTolerance(this._distance)
e===Ce.RIGHT&&(i=-i)
var r=Tn.simplify(t,i),o=r.length-1
n.initSideSegments(r[o-1],r[0],e)
for(var s=1;s<=o;s++){var a=1!==s
n.addNextSegment(r[s],a)}n.closeRing()},Nn.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),i=Tn.simplify(t,n),r=i.length-1
e.initSideSegments(i[0],i[1],Ce.LEFT)
for(var o=2;o<=r;o++)e.addNextSegment(i[o],!0)
e.addLastSegment(),e.addLineEndCap(i[r-1],i[r])
var s=Tn.simplify(t,-n),a=s.length-1
e.initSideSegments(s[a],s[a-1],Ce.LEFT)
for(var l=a-2;l>=0;l--)e.addNextSegment(s[l],!0)
e.addLastSegment(),e.addLineEndCap(s[1],s[0]),e.closeRing()},Nn.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case Sn.CAP_ROUND:e.createCircle(t)
break
case Sn.CAP_SQUARE:e.createSquare(t)}},Nn.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null
if(0===e)return null
var n=Math.abs(e),i=this.getSegGen(n)
if(t.length<=1)this.computePointCurve(t[0],i)
else if(this._bufParams.isSingleSided()){var r=e<0
this.computeSingleSidedBufferCurve(t,r,i)}else this.computeLineBufferCurve(t,i)
return i.getCoordinates()},Nn.prototype.getBufferParameters=function(){return this._bufParams},Nn.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},Nn.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n)
if(0===n)return Nn.copyCoordinates(t)
var i=this.getSegGen(n)
return this.computeRingBufferCurve(t,e,i),i.getCoordinates()},Nn.prototype.computeOffsetCurve=function(t,e,n){var i=this.simplifyTolerance(this._distance)
if(e){var r=Tn.simplify(t,-i),o=r.length-1
n.initSideSegments(r[o],r[o-1],Ce.LEFT),n.addFirstSegment()
for(var s=o-2;s>=0;s--)n.addNextSegment(r[s],!0)}else{var a=Tn.simplify(t,i),l=a.length-1
n.initSideSegments(a[0],a[1],Ce.LEFT),n.addFirstSegment()
for(var u=2;u<=l;u++)n.addNextSegment(a[u],!0)}n.addLastSegment()},Nn.prototype.getSegGen=function(t){return new Mn(this._precisionModel,this._bufParams,t)},Nn.prototype.interfaces_=function(){return[]},Nn.prototype.getClass=function(){return Nn},Nn.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new S(t[n])
return e}
var Dn=function(){this._subgraphs=null,this._seg=new gn,this._cga=new at
var t=arguments[0]
this._subgraphs=t},Fn={DepthSegment:{configurable:!0}}
Dn.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=new wt,n=this._subgraphs.iterator();n.hasNext();){var i=n.next(),r=i.getEnvelope()
t.y<r.getMinY()||t.y>r.getMaxY()||this.findStabbedSegments(t,i.getDirectedEdges(),e)}return e}if(3===arguments.length)if(R(arguments[2],Et)&&arguments[0]instanceof S&&arguments[1]instanceof qe){for(var o=arguments[0],s=arguments[1],a=arguments[2],l=s.getEdge().getCoordinates(),u=0;u<l.length-1;u++)if(this._seg.p0=l[u],this._seg.p1=l[u+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x||this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||at.computeOrientation(this._seg.p0,this._seg.p1,o)===at.RIGHT)){var h=s.getDepth(Ce.LEFT)
this._seg.p0.equals(l[u])||(h=s.getDepth(Ce.RIGHT))
var c=new kn(this._seg,h)
a.add(c)}}else if(R(arguments[2],Et)&&arguments[0]instanceof S&&R(arguments[1],Et))for(var f=arguments[0],p=arguments[2],d=arguments[1].iterator();d.hasNext();){var g=d.next()
g.isForward()&&this.findStabbedSegments(f,g,p)}},Dn.prototype.getDepth=function(t){var e=this.findStabbedSegments(t)
return 0===e.size()?0:Qe.min(e)._leftDepth},Dn.prototype.interfaces_=function(){return[]},Dn.prototype.getClass=function(){return Dn},Fn.DepthSegment.get=function(){return kn},Object.defineProperties(Dn,Fn)
var kn=function(){this._upwardSeg=null,this._leftDepth=null
var t=arguments[0],e=arguments[1]
this._upwardSeg=new gn(t),this._leftDepth=e}
kn.prototype.compareTo=function(t){var e=t
if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1
if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1
var n=this._upwardSeg.orientationIndex(e._upwardSeg)
return 0!==n||0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},kn.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0)
return 0!==n?n:t.p1.compareTo(e.p1)},kn.prototype.toString=function(){return this._upwardSeg.toString()},kn.prototype.interfaces_=function(){return[b]},kn.prototype.getClass=function(){return kn}
var jn=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null}
jn.prototype.area=function(){return jn.area(this.p0,this.p1,this.p2)},jn.prototype.signedArea=function(){return jn.signedArea(this.p0,this.p1,this.p2)},jn.prototype.interpolateZ=function(t){if(null===t)throw new y("Supplied point is null.")
return jn.interpolateZ(t,this.p0,this.p1,this.p2)},jn.prototype.longestSideLength=function(){return jn.longestSideLength(this.p0,this.p1,this.p2)},jn.prototype.isAcute=function(){return jn.isAcute(this.p0,this.p1,this.p2)},jn.prototype.circumcentre=function(){return jn.circumcentre(this.p0,this.p1,this.p2)},jn.prototype.area3D=function(){return jn.area3D(this.p0,this.p1,this.p2)},jn.prototype.centroid=function(){return jn.centroid(this.p0,this.p1,this.p2)},jn.prototype.inCentre=function(){return jn.inCentre(this.p0,this.p1,this.p2)},jn.prototype.interfaces_=function(){return[]},jn.prototype.getClass=function(){return jn},jn.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},jn.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},jn.det=function(t,e,n,i){return t*i-e*n},jn.interpolateZ=function(t,e,n,i){var r=e.x,o=e.y,s=n.x-r,a=i.x-r,l=n.y-o,u=i.y-o,h=s*u-a*l,c=t.x-r,f=t.y-o,p=(u*c-a*f)/h,d=(-l*c+s*f)/h
return e.z+p*(n.z-e.z)+d*(i.z-e.z)},jn.longestSideLength=function(t,e,n){var i=t.distance(e),r=e.distance(n),o=n.distance(t),s=i
return r>s&&(s=r),o>s&&(s=o),s},jn.isAcute=function(t,e,n){return!!Rn.isAcute(t,e,n)&&!!Rn.isAcute(e,n,t)&&!!Rn.isAcute(n,t,e)},jn.circumcentre=function(t,e,n){var i=n.x,r=n.y,o=t.x-i,s=t.y-r,a=e.x-i,l=e.y-r,u=2*jn.det(o,s,a,l),h=jn.det(s,o*o+s*s,l,a*a+l*l),c=jn.det(o,o*o+s*s,a,a*a+l*l)
return new S(i-h/u,r+c/u)},jn.perpendicularBisector=function(t,e){var n=e.x-t.x,i=e.y-t.y,r=new X(t.x+n/2,t.y+i/2,1),o=new X(t.x-i+n/2,t.y+n+i/2,1)
return new X(r,o)},jn.angleBisector=function(t,e,n){var i=e.distance(t),r=i/(i+e.distance(n)),o=n.x-t.x,s=n.y-t.y
return new S(t.x+r*o,t.y+r*s)},jn.area3D=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,o=e.z-t.z,s=n.x-t.x,a=n.y-t.y,l=n.z-t.z,u=r*l-o*a,h=o*s-i*l,c=i*a-r*s,f=u*u+h*h+c*c
return Math.sqrt(f)/2},jn.centroid=function(t,e,n){var i=(t.x+e.x+n.x)/3,r=(t.y+e.y+n.y)/3
return new S(i,r)},jn.inCentre=function(t,e,n){var i=e.distance(n),r=t.distance(n),o=t.distance(e),s=i+r+o,a=(i*t.x+r*e.x+o*n.x)/s,l=(i*t.y+r*e.y+o*n.y)/s
return new S(a,l)}
var zn=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new wt
var t=arguments[0],e=arguments[1],n=arguments[2]
this._inputGeom=t,this._distance=e,this._curveBuilder=n}
zn.prototype.addPoint=function(t){if(this._distance<=0)return null
var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance)
this.addCurve(n,P.EXTERIOR,P.INTERIOR)},zn.prototype.addPolygon=function(t){var e=this._distance,n=Ce.LEFT
this._distance<0&&(e=-this._distance,n=Ce.RIGHT)
var i=t.getExteriorRing(),r=Tt.removeRepeatedPoints(i.getCoordinates())
if(this._distance<0&&this.isErodedCompletely(i,this._distance))return null
if(this._distance<=0&&r.length<3)return null
this.addPolygonRing(r,e,n,P.EXTERIOR,P.INTERIOR)
for(var o=0;o<t.getNumInteriorRing();o++){var s=t.getInteriorRingN(o),a=Tt.removeRepeatedPoints(s.getCoordinates())
this._distance>0&&this.isErodedCompletely(s,-this._distance)||this.addPolygonRing(a,e,Ce.opposite(n),P.INTERIOR,P.EXTERIOR)}},zn.prototype.isTriangleErodedCompletely=function(t,e){var n=new jn(t[0],t[1],t[2]),i=n.inCentre()
return at.distancePointLine(i,n.p0,n.p1)<Math.abs(e)},zn.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null
var e=Tt.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance)
this.addCurve(n,P.EXTERIOR,P.INTERIOR)},zn.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null
var i=new dn(t,new Me(0,P.BOUNDARY,e,n))
this._curveList.add(i)},zn.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},zn.prototype.addPolygonRing=function(t,e,n,i,r){if(0===e&&t.length<ee.MINIMUM_VALID_SIZE)return null
var o=i,s=r
t.length>=ee.MINIMUM_VALID_SIZE&&at.isCCW(t)&&(o=r,s=i,n=Ce.opposite(n))
var a=this._curveBuilder.getRingCurve(t,n,e)
this.addCurve(a,o,s)},zn.prototype.add=function(t){if(t.isEmpty())return null
t instanceof Qt?this.addPolygon(t):t instanceof Ht?this.addLineString(t):t instanceof Kt?this.addPoint(t):(t instanceof te||t instanceof Ut||t instanceof ne||t instanceof qt)&&this.addCollection(t)},zn.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates()
if(n.length<4)return e<0
if(4===n.length)return this.isTriangleErodedCompletely(n,e)
var i=t.getEnvelopeInternal(),r=Math.min(i.getHeight(),i.getWidth())
return e<0&&2*Math.abs(e)>r},zn.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e)
this.add(n)}},zn.prototype.interfaces_=function(){return[]},zn.prototype.getClass=function(){return zn}
var Gn=function(){}
Gn.prototype.locate=function(t){},Gn.prototype.interfaces_=function(){return[]},Gn.prototype.getClass=function(){return Gn}
var Bn=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null
var t=arguments[0]
this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()}
Bn.prototype.next=function(){if(this._atStart)return this._atStart=!1,Bn.isAtomic(this._parent)&&this._index++,this._parent
if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next()
this._subcollectionIterator=null}if(this._index>=this._max)throw new i
var t=this._parent.getGeometryN(this._index++)
return t instanceof qt?(this._subcollectionIterator=new Bn(t),this._subcollectionIterator.next()):t},Bn.prototype.remove=function(){throw new Error(this.getClass().getName())},Bn.prototype.hasNext=function(){if(this._atStart)return!0
if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0
this._subcollectionIterator=null}return!(this._index>=this._max)},Bn.prototype.interfaces_=function(){return[bt]},Bn.prototype.getClass=function(){return Bn},Bn.isAtomic=function(t){return!(t instanceof qt)}
var qn=function(){this._geom=null
var t=arguments[0]
this._geom=t}
qn.prototype.locate=function(t){return qn.locate(t,this._geom)},qn.prototype.interfaces_=function(){return[Gn]},qn.prototype.getClass=function(){return qn},qn.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&at.isPointInRing(t,e.getCoordinates())},qn.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1
var n=e.getExteriorRing()
if(!qn.isPointInRing(t,n))return!1
for(var i=0;i<e.getNumInteriorRing();i++){var r=e.getInteriorRingN(i)
if(qn.isPointInRing(t,r))return!1}return!0},qn.containsPoint=function(t,e){if(e instanceof Qt)return qn.containsPointInPolygon(t,e)
if(e instanceof qt)for(var n=new Bn(e);n.hasNext();){var i=n.next()
if(i!==e&&qn.containsPoint(t,i))return!0}return!1},qn.locate=function(t,e){return e.isEmpty()?P.EXTERIOR:qn.containsPoint(t,e)?P.INTERIOR:P.EXTERIOR}
var Un=function(){this._edgeMap=new c,this._edgeList=null,this._ptInAreaLocation=[P.NONE,P.NONE]}
Un.prototype.getNextCW=function(t){this.getEdges()
var e=this._edgeList.indexOf(t),n=e-1
return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},Un.prototype.propagateSideLabels=function(t){for(var e=P.NONE,n=this.iterator();n.hasNext();){var i=n.next().getLabel()
i.isArea(t)&&i.getLocation(t,Ce.LEFT)!==P.NONE&&(e=i.getLocation(t,Ce.LEFT))}if(e===P.NONE)return null
for(var r=e,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getLabel()
if(a.getLocation(t,Ce.ON)===P.NONE&&a.setLocation(t,Ce.ON,r),a.isArea(t)){var l=a.getLocation(t,Ce.LEFT),u=a.getLocation(t,Ce.RIGHT)
if(u!==P.NONE){if(u!==r)throw new Pe("side location conflict",s.getCoordinate())
l===P.NONE&&et.shouldNeverReachHere("found single null side (at "+s.getCoordinate()+")"),r=l}else et.isTrue(a.getLocation(t,Ce.LEFT)===P.NONE,"found single null side"),a.setLocation(t,Ce.RIGHT,r),a.setLocation(t,Ce.LEFT,r)}}},Un.prototype.getCoordinate=function(){var t=this.iterator()
return t.hasNext()?t.next().getCoordinate():null},Un.prototype.print=function(t){Z.out.println("EdgeEndStar:   "+this.getCoordinate())
for(var e=this.iterator();e.hasNext();)e.next().print(t)},Un.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},Un.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges()
if(e.size()<=0)return!0
var n=e.size()-1,i=e.get(n).getLabel().getLocation(t,Ce.LEFT)
et.isTrue(i!==P.NONE,"Found unlabelled area edge")
for(var r=i,o=this.iterator();o.hasNext();){var s=o.next().getLabel()
et.isTrue(s.isArea(t),"Found non-area edge")
var a=s.getLocation(t,Ce.LEFT),l=s.getLocation(t,Ce.RIGHT)
if(a===l)return!1
if(l!==r)return!1
r=a}return!0},Un.prototype.findIndex=function(t){this.iterator()
for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e
return-1},Un.prototype.iterator=function(){return this.getEdges().iterator()},Un.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new wt(this._edgeMap.values())),this._edgeList},Un.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===P.NONE&&(this._ptInAreaLocation[t]=qn.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},Un.prototype.toString=function(){var t=new O
t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n")
for(var e=this.iterator();e.hasNext();){var n=e.next()
t.append(n),t.append("\n")}return t.toString()},Un.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},Un.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1)
for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var i=n.next().getLabel(),r=0;r<2;r++)i.isLine(r)&&i.getLocation(r)===P.BOUNDARY&&(e[r]=!0)
for(var o=this.iterator();o.hasNext();)for(var s=o.next(),a=s.getLabel(),l=0;l<2;l++)if(a.isAnyNull(l)){var u=P.NONE
if(e[l])u=P.EXTERIOR
else{var h=s.getCoordinate()
u=this.getLocation(l,h,t)}a.setAllLocationsIfNull(l,u)}},Un.prototype.getDegree=function(){return this._edgeMap.size()},Un.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},Un.prototype.interfaces_=function(){return[]},Un.prototype.getClass=function(){return Un}
var Zn=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges()
for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,i=0;i<this._resultAreaEdgeList.size();i++){var r=this._resultAreaEdgeList.get(i),o=r.getSym()
if(r.getLabel().isArea())switch(null===t&&r.isInResult()&&(t=r),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue
e=o,n=this._LINKING_TO_OUTGOING
break
case this._LINKING_TO_OUTGOING:if(!r.isInResult())continue
e.setNext(r),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new Pe("no outgoing dirEdge found",this.getCoordinate())
et.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},e.prototype.insert=function(t){var e=t
this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size()
if(e<1)return null
var n=t.get(0)
if(1===e)return n
var i=t.get(e-1),r=n.getQuadrant(),o=i.getQuadrant()
return ze.isNorthern(r)&&ze.isNorthern(o)?n:ze.isNorthern(r)||ze.isNorthern(o)?0!==n.getDy()?n:0!==i.getDy()?i:(et.shouldNeverReachHere("found two horizontal edges incident on node"),null):i},e.prototype.print=function(t){Z.out.println("DirectedEdgeStar: "+this.getCoordinate())
for(var e=this.iterator();e.hasNext();){var n=e.next()
t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList
this._resultAreaEdgeList=new wt
for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel()
n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges()
for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var i=this._edgeList.get(n),r=i.getSym()
null===e&&(e=r),null!==t&&r.setNext(t),t=i}e.setNext(t)},e.prototype.computeDepths=function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth(Ce.LEFT),i=t.getDepth(Ce.RIGHT),r=this.computeDepths(e+1,this._edgeList.size(),n)
if(this.computeDepths(0,e,r)!==i)throw new Pe("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[1],s=arguments[2],a=arguments[0];a<o;a++){var l=this._edgeList.get(a)
l.setEdgeDepths(Ce.RIGHT,s),s=l.getDepth(Ce.LEFT)}return s}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next()
e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,n=null,i=this._SCANNING_FOR_INCOMING,r=this._resultAreaEdgeList.size()-1;r>=0;r--){var o=this._resultAreaEdgeList.get(r),s=o.getSym()
switch(null===e&&o.getEdgeRing()===t&&(e=o),i){case this._SCANNING_FOR_INCOMING:if(s.getEdgeRing()!==t)continue
n=s,i=this._LINKING_TO_OUTGOING
break
case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue
n.setNextMin(o),i=this._SCANNING_FOR_INCOMING}}i===this._LINKING_TO_OUTGOING&&(et.isTrue(null!==e,"found null for first outgoing dirEdge"),et.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++
return t}if(1===arguments.length){for(var n=arguments[0],i=0,r=this.iterator();r.hasNext();)r.next().getEdgeRing()===n&&i++
return i}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=P.NONE,e=this.iterator();e.hasNext();){var n=e.next(),i=n.getSym()
if(!n.isLineEdge()){if(n.isInResult()){t=P.INTERIOR
break}if(i.isInResult()){t=P.EXTERIOR
break}}}if(t===P.NONE)return null
for(var r=t,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getSym()
s.isLineEdge()?s.getEdge().setCovered(r===P.INTERIOR):(s.isInResult()&&(r=P.EXTERIOR),a.isInResult()&&(r=P.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new Me(P.NONE)
for(var n=this.iterator();n.hasNext();)for(var i=n.next().getEdge().getLabel(),r=0;r<2;r++){var o=i.getLocation(r)
o!==P.INTERIOR&&o!==P.BOUNDARY||this._label.setLocation(r,P.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Un),Xn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new ke(t,new Zn)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ue),Yn=function t(){this._pts=null,this._orientation=null
var e=arguments[0]
this._pts=e,this._orientation=t.orientation(e)}
Yn.prototype.compareTo=function(t){var e=t
return Yn.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},Yn.prototype.interfaces_=function(){return[b]},Yn.prototype.getClass=function(){return Yn},Yn.orientation=function(t){return 1===Tt.increasingDirection(t)},Yn.compareOriented=function(t,e,n,i){for(var r=e?1:-1,o=i?1:-1,s=e?t.length:-1,a=i?n.length:-1,l=e?0:t.length-1,u=i?0:n.length-1;;){var h=t[l].compareTo(n[u])
if(0!==h)return h
var c=(l+=r)===s,f=(u+=o)===a
if(c&&!f)return-1
if(!c&&f)return 1
if(c&&f)return 0}}
var Vn=function(){this._edges=new wt,this._ocaMap=new c}
Vn.prototype.print=function(t){t.print("MULTILINESTRING ( ")
for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e)
e>0&&t.print(","),t.print("(")
for(var i=n.getCoordinates(),r=0;r<i.length;r++)r>0&&t.print(","),t.print(i[r].x+" "+i[r].y)
t.println(")")}t.print(")  ")},Vn.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},Vn.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e
return-1},Vn.prototype.iterator=function(){return this._edges.iterator()},Vn.prototype.getEdges=function(){return this._edges},Vn.prototype.get=function(t){return this._edges.get(t)},Vn.prototype.findEqualEdge=function(t){var e=new Yn(t.getCoordinates())
return this._ocaMap.get(e)},Vn.prototype.add=function(t){this._edges.add(t)
var e=new Yn(t.getCoordinates())
this._ocaMap.put(e,t)},Vn.prototype.interfaces_=function(){return[]},Vn.prototype.getClass=function(){return Vn}
var Wn=function(){}
Wn.prototype.processIntersections=function(t,e,n,i){},Wn.prototype.isDone=function(){},Wn.prototype.interfaces_=function(){return[]},Wn.prototype.getClass=function(){return Wn}
var Hn=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0
var t=arguments[0]
this._li=t}
Hn.prototype.isTrivialIntersection=function(t,e,n,i){if(t===n&&1===this._li.getIntersectionNum()){if(Hn.isAdjacentSegments(e,i))return!0
if(t.isClosed()){var r=t.size()-1
if(0===e&&i===r||0===i&&e===r)return!0}}return!1},Hn.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Hn.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Hn.prototype.getLineIntersector=function(){return this._li},Hn.prototype.hasProperIntersection=function(){return this._hasProper},Hn.prototype.processIntersections=function(t,e,n,i){if(t===n&&e===i)return null
this.numTests++
var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1]
this._li.computeIntersection(r,o,s,a),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Hn.prototype.hasIntersection=function(){return this._hasIntersection},Hn.prototype.isDone=function(){return!1},Hn.prototype.hasInteriorIntersection=function(){return this._hasInterior},Hn.prototype.interfaces_=function(){return[Wn]},Hn.prototype.getClass=function(){return Hn},Hn.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)}
var $n=function(){this.coord=null,this.segmentIndex=null,this.dist=null
var t=arguments[0],e=arguments[1],n=arguments[2]
this.coord=new S(t),this.segmentIndex=e,this.dist=n}
$n.prototype.getSegmentIndex=function(){return this.segmentIndex},$n.prototype.getCoordinate=function(){return this.coord},$n.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},$n.prototype.compareTo=function(t){var e=t
return this.compare(e.segmentIndex,e.dist)},$n.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},$n.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},$n.prototype.getDistance=function(){return this.dist},$n.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},$n.prototype.interfaces_=function(){return[b]},$n.prototype.getClass=function(){return $n}
var Kn=function(){this._nodeMap=new c,this.edge=null
var t=arguments[0]
this.edge=t}
Kn.prototype.print=function(t){t.println("Intersections:")
for(var e=this.iterator();e.hasNext();)e.next().print(t)},Kn.prototype.iterator=function(){return this._nodeMap.values().iterator()},Kn.prototype.addSplitEdges=function(t){this.addEndpoints()
for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i)
t.add(r),n=i}},Kn.prototype.addEndpoints=function(){var t=this.edge.pts.length-1
this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},Kn.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=this.edge.pts[e.segmentIndex],r=e.dist>0||!e.coord.equals2D(i)
r||n--
var o=new Array(n).fill(null),s=0
o[s++]=new S(t.coord)
for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this.edge.pts[a]
return r&&(o[s]=e.coord),new ni(o,new Me(this.edge._label))},Kn.prototype.add=function(t,e,n){var i=new $n(t,e,n),r=this._nodeMap.get(i)
return null!==r?r:(this._nodeMap.put(i,i),i)},Kn.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0
return!1},Kn.prototype.interfaces_=function(){return[]},Kn.prototype.getClass=function(){return Kn}
var Jn=function(){}
Jn.prototype.getChainStartIndices=function(t){var e=0,n=new wt
n.add(new N(e))
do{var i=this.findChainEnd(t,e)
n.add(new N(i)),e=i}while(e<t.length-1)
return Jn.toIntArray(n)},Jn.prototype.findChainEnd=function(t,e){for(var n=ze.quadrant(t[e],t[e+1]),i=e+1;i<t.length&&ze.quadrant(t[i-1],t[i])===n;)i++
return i-1},Jn.prototype.interfaces_=function(){return[]},Jn.prototype.getClass=function(){return Jn},Jn.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue()
return e}
var Qn=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new Y,this.env2=new Y
var t=arguments[0]
this.e=t,this.pts=t.getCoordinates()
var e=new Jn
this.startIndex=e.getChainStartIndices(this.pts)}
Qn.prototype.getCoordinates=function(){return this.pts},Qn.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x
return e>n?e:n},Qn.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x
return e<n?e:n},Qn.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3]
this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],i)}else if(6===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],l=arguments[4],u=arguments[5],h=this.pts[r],c=this.pts[o],f=s.pts[a],p=s.pts[l]
if(o-r==1&&l-a==1)return u.addIntersections(this.e,r,s.e,a),null
if(this.env1.init(h,c),this.env2.init(f,p),!this.env1.intersects(this.env2))return null
var d=Math.trunc((r+o)/2),g=Math.trunc((a+l)/2)
r<d&&(a<g&&this.computeIntersectsForChain(r,d,s,a,g,u),g<l&&this.computeIntersectsForChain(r,d,s,g,l,u)),d<o&&(a<g&&this.computeIntersectsForChain(d,o,s,a,g,u),g<l&&this.computeIntersectsForChain(d,o,s,g,l,u))}},Qn.prototype.getStartIndexes=function(){return this.startIndex},Qn.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var i=0;i<t.startIndex.length-1;i++)this.computeIntersectsForChain(n,t,i,e)},Qn.prototype.interfaces_=function(){return[]},Qn.prototype.getClass=function(){return Qn}
var ti=function t(){this._depth=Array(2).fill().map((function(){return Array(3)}))
for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},ei={NULL_VALUE:{configurable:!0}}
ti.prototype.getDepth=function(t,e){return this._depth[t][e]},ti.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},ti.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==ti.NULL_VALUE)return!1
return!0}if(1===arguments.length){var n=arguments[0]
return this._depth[n][1]===ti.NULL_VALUE}if(2===arguments.length){var i=arguments[0],r=arguments[1]
return this._depth[i][r]===ti.NULL_VALUE}},ti.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1]
this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0)
for(var n=1;n<3;n++){var i=0
this._depth[t][n]>e&&(i=1),this._depth[t][n]=i}}},ti.prototype.getDelta=function(t){return this._depth[t][Ce.RIGHT]-this._depth[t][Ce.LEFT]},ti.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?P.EXTERIOR:P.INTERIOR},ti.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},ti.prototype.add=function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var i=t.getLocation(e,n)
i!==P.EXTERIOR&&i!==P.INTERIOR||(this.isNull(e,n)?this._depth[e][n]=ti.depthAtLocation(i):this._depth[e][n]+=ti.depthAtLocation(i))}else if(3===arguments.length){var r=arguments[0],o=arguments[1]
arguments[2]===P.INTERIOR&&this._depth[r][o]++}},ti.prototype.interfaces_=function(){return[]},ti.prototype.getClass=function(){return ti},ti.depthAtLocation=function(t){return t===P.EXTERIOR?0:t===P.INTERIOR?1:ti.NULL_VALUE},ei.NULL_VALUE.get=function(){return-1},Object.defineProperties(ti,ei)
var ni=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new Kn(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new ti,this._depthDelta=0,1===arguments.length){var n=arguments[0]
e.call(this,n,null)}else if(2===arguments.length){var i=arguments[0],r=arguments[1]
this.pts=i,this._label=r}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null)
return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,Me.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1
var n=t
if(this.pts.length!==n.pts.length)return!1
for(var i=!0,r=!0,o=this.pts.length,s=0;s<this.pts.length;s++)if(this.pts[s].equals2D(n.pts[s])||(i=!1),this.pts[s].equals2D(n.pts[--o])||(r=!1),!i&&!r)return!1
return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null
if(1===arguments.length){var t=arguments[0]
return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (")
for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y)
t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ")
for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ")
t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new Qn(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new Y
for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,n,i){var r=new S(t.getIntersection(i)),o=e,s=t.getEdgeDistance(n,i),a=o+1
if(a<this.pts.length){var l=this.pts[a]
r.equals2D(l)&&(o=a,s=0)}this.eiList.add(r,o,s)},e.prototype.toString=function(){var t=new O
t.append("edge "+this._name+": "),t.append("LINESTRING (")
for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y)
return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1
for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1
return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments)
var e=arguments[0],n=arguments[1]
n.setAtLeastIfValid(e.getLocation(0,Ce.ON),e.getLocation(1,Ce.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,Ce.LEFT),e.getLocation(1,Ce.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,Ce.RIGHT),e.getLocation(1,Ce.RIGHT),2))},e}(Fe),ii=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Vn,this._bufParams=t||null}
ii.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},ii.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t)
if(null!==e){var n=e.getLabel(),i=t.getLabel()
e.isPointwiseEqual(t)||(i=new Me(t.getLabel())).flip(),n.merge(i)
var r=ii.depthDelta(i),o=e.getDepthDelta()+r
e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(ii.depthDelta(t.getLabel()))},ii.prototype.buildSubgraphs=function(t,e){for(var n=new wt,i=t.iterator();i.hasNext();){var r=i.next(),o=r.getRightmostCoordinate(),s=new Dn(n).getDepth(o)
r.computeDepth(s),r.findResultEdges(),n.add(r),e.add(r.getDirectedEdges(),r.getNodes())}},ii.prototype.createSubgraphs=function(t){for(var e=new wt,n=t.getNodes().iterator();n.hasNext();){var i=n.next()
if(!i.isVisited()){var r=new Re
r.create(i),e.add(r)}}return Qe.sort(e,Qe.reverseOrder()),e},ii.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},ii.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder
var e=new En,n=new rt
return n.setPrecisionModel(t),e.setSegmentIntersector(new Hn(n)),e},ii.prototype.buffer=function(t,e){var n=this._workingPrecisionModel
null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory()
var i=new Nn(n,this._bufParams),r=new zn(t,e,i).getCurves()
if(r.size()<=0)return this.createEmptyResultGeometry()
this.computeNodedEdges(r,n),this._graph=new Ze(new Xn),this._graph.addEdges(this._edgeList.getEdges())
var o=this.createSubgraphs(this._graph),s=new Xe(this._geomFact)
this.buildSubgraphs(o,s)
var a=s.getPolygons()
return a.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(a)},ii.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e)
n.computeNodes(t)
for(var i=n.getNodedSubstrings().iterator();i.hasNext();){var r=i.next(),o=r.getCoordinates()
if(2!==o.length||!o[0].equals2D(o[1])){var s=r.getData(),a=new ni(r.getCoordinates(),new Me(s))
this.insertUniqueEdge(a)}}},ii.prototype.setNoder=function(t){this._workingNoder=t},ii.prototype.interfaces_=function(){return[]},ii.prototype.getClass=function(){return ii},ii.depthDelta=function(t){var e=t.getLocation(0,Ce.LEFT),n=t.getLocation(0,Ce.RIGHT)
return e===P.INTERIOR&&n===P.EXTERIOR?1:e===P.EXTERIOR&&n===P.INTERIOR?-1:0},ii.convertSegStrings=function(t){for(var e=new me,n=new wt;t.hasNext();){var i=t.next(),r=e.createLineString(i.getCoordinates())
n.add(r)}return e.buildGeometry(n)}
var ri=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1]
this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=arguments[3]
this._noder=n,this._scaleFactor=i,this._offsetX=r,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}}
ri.prototype.rescale=function(){if(R(arguments[0],xt))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next()
this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],i=0;i<n.length;i++)n[i].x=n[i].x/this._scaleFactor+this._offsetX,n[i].y=n[i].y/this._scaleFactor+this._offsetY
2===n.length&&n[0].equals2D(n[1])&&Z.out.println(n)}},ri.prototype.scale=function(){if(R(arguments[0],xt)){for(var t=arguments[0],e=new wt,n=t.iterator();n.hasNext();){var i=n.next()
e.add(new dn(this.scale(i.getCoordinates()),i.getData()))}return e}if(arguments[0]instanceof Array){for(var r=arguments[0],o=new Array(r.length).fill(null),s=0;s<r.length;s++)o[s]=new S(Math.round((r[s].x-this._offsetX)*this._scaleFactor),Math.round((r[s].y-this._offsetY)*this._scaleFactor),r[s].z)
return Tt.removeRepeatedPoints(o)}},ri.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},ri.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings()
return this._isScaled&&this.rescale(t),t},ri.prototype.computeNodes=function(t){var e=t
this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},ri.prototype.interfaces_=function(){return[xn]},ri.prototype.getClass=function(){return ri}
var oi=function(){this._li=new rt,this._segStrings=null
var t=arguments[0]
this._segStrings=t},si={fact:{configurable:!0}}
oi.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates()
this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],i=arguments[1].iterator();i.hasNext();)for(var r=i.next().getCoordinates(),o=1;o<r.length-1;o++)if(r[o].equals(n))throw new Q("found endpt/interior pt intersection at index "+o+" :pt "+n)},oi.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var i=n.next()
this.checkInteriorIntersections(e,i)}else if(2===arguments.length)for(var r=arguments[0],o=arguments[1],s=r.getCoordinates(),a=o.getCoordinates(),l=0;l<s.length-1;l++)for(var u=0;u<a.length-1;u++)this.checkInteriorIntersections(r,l,o,u)
else if(4===arguments.length){var h=arguments[0],c=arguments[1],f=arguments[2],p=arguments[3]
if(h===f&&c===p)return null
var d=h.getCoordinates()[c],g=h.getCoordinates()[c+1],_=f.getCoordinates()[p],m=f.getCoordinates()[p+1]
if(this._li.computeIntersection(d,g,_,m),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,d,g)||this.hasInteriorIntersection(this._li,_,m)))throw new Q("found non-noded intersection at "+d+"-"+g+" and "+_+"-"+m)}},oi.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},oi.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next()
this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),i=0;i<n.length-2;i++)this.checkCollapse(n[i],n[i+1],n[i+2])},oi.prototype.hasInteriorIntersection=function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++){var r=t.getIntersection(i)
if(!r.equals(e)&&!r.equals(n))return!0}return!1},oi.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new Q("found non-noded collapse at "+oi.fact.createLineString([t,e,n]))},oi.prototype.interfaces_=function(){return[]},oi.prototype.getClass=function(){return oi},si.fact.get=function(){return new me},Object.defineProperties(oi,si)
var ai=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null
var t=arguments[0],e=arguments[1],n=arguments[2]
if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new y("Scale factor must be non-zero")
1!==e&&(this._pt=new S(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new S,this._p1Scaled=new S),this.initCorners(this._pt)},li={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}}
ai.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),i=Math.max(t.x,e.x),r=Math.min(t.y,e.y),o=Math.max(t.y,e.y),s=this._maxx<n||this._minx>i||this._maxy<r||this._miny>o
if(s)return!1
var a=this.intersectsToleranceSquare(t,e)
return et.isTrue(!(s&&a),"Found bad envelope test"),a},ai.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new S(this._maxx,this._maxy),this._corner[1]=new S(this._minx,this._maxy),this._corner[2]=new S(this._minx,this._miny),this._corner[3]=new S(this._maxx,this._miny)},ai.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},ai.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},ai.prototype.getCoordinate=function(){return this._originalPt},ai.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},ai.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=ai.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor
this._safeEnv=new Y(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},ai.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},ai.prototype.intersectsToleranceSquare=function(t,e){var n=!1,i=!1
return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(i=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||n&&i||t.equals(this._pt)||e.equals(this._pt)))))},ai.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),i=t.getCoordinate(e+1)
return!!this.intersects(n,i)&&(t.addIntersection(this.getCoordinate(),e),!0)},ai.prototype.interfaces_=function(){return[]},ai.prototype.getClass=function(){return ai},li.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(ai,li)
var ui=function(){this.tempEnv1=new Y,this.selectedSegment=new gn}
ui.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[1]
arguments[0].getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment)}},ui.prototype.interfaces_=function(){return[]},ui.prototype.getClass=function(){return ui}
var hi=function(){this._index=null
var t=arguments[0]
this._index=t},ci={HotPixelSnapAction:{configurable:!0}}
hi.prototype.snap=function(){if(1===arguments.length){var t=arguments[0]
return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2],r=e.getSafeEnvelope(),o=new fi(e,n,i)
return this._index.query(r,{interfaces_:function(){return[He]},visitItem:function(t){t.select(r,o)}}),o.isNodeAdded()}},hi.prototype.interfaces_=function(){return[]},hi.prototype.getClass=function(){return hi},ci.HotPixelSnapAction.get=function(){return fi},Object.defineProperties(hi,ci)
var fi=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1
var e=arguments[0],n=arguments[1],i=arguments[2]
this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments)
var e=arguments[1],n=arguments[0].getContext()
if(null!==this._parentEdge&&n===this._parentEdge&&e===this._hotPixelVertexIndex)return null
this._isNodeAdded=this._hotPixel.addSnappedNode(n,e)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ui),pi=function(){this._li=null,this._interiorIntersections=null
var t=arguments[0]
this._li=t,this._interiorIntersections=new wt}
pi.prototype.processIntersections=function(t,e,n,i){if(t===n&&e===i)return null
var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1]
if(this._li.computeIntersection(r,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var l=0;l<this._li.getIntersectionNum();l++)this._interiorIntersections.add(this._li.getIntersection(l))
t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1)}},pi.prototype.isDone=function(){return!1},pi.prototype.getInteriorIntersections=function(){return this._interiorIntersections},pi.prototype.interfaces_=function(){return[Wn]},pi.prototype.getClass=function(){return pi}
var di=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null
var t=arguments[0]
this._pm=t,this._li=new rt,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()}
di.prototype.checkCorrectness=function(t){var e=dn.getNodedSubstrings(t),n=new oi(e)
try{n.checkValid()}catch(t){if(!(t instanceof q))throw t
t.printStackTrace()}},di.prototype.getNodedSubstrings=function(){return dn.getNodedSubstrings(this._nodedSegStrings)},di.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e)
this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},di.prototype.findInteriorIntersections=function(t,e){var n=new pi(e)
return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},di.prototype.computeVertexSnaps=function(){if(R(arguments[0],xt))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next()
this.computeVertexSnaps(e)}else if(arguments[0]instanceof dn)for(var n=arguments[0],i=n.getCoordinates(),r=0;r<i.length;r++){var o=new ai(i[r],this._scaleFactor,this._li)
this._pointSnapper.snap(o,n,r)&&n.addIntersection(i[r],r)}},di.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new En,this._pointSnapper=new hi(this._noder.getIndex()),this.snapRound(t,this._li)},di.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=new ai(n,this._scaleFactor,this._li)
this._pointSnapper.snap(i)}},di.prototype.interfaces_=function(){return[xn]},di.prototype.getClass=function(){return di}
var gi=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Sn,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0]
this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1]
this._argGeom=e,this._bufParams=n}},_i={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}}
gi.prototype.bufferFixedPrecision=function(t){var e=new ri(new di(new pe(1)),t.getScale()),n=new ii(this._bufParams)
n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},gi.prototype.bufferReducedPrecision=function(){var t=this
if(0===arguments.length){for(var e=gi.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Pe))throw e
t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],i=gi.precisionScaleFactor(this._argGeom,this._distance,n),r=new pe(i)
this.bufferFixedPrecision(r)}},gi.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null
var t=this._argGeom.getFactory().getPrecisionModel()
t.getType()===pe.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},gi.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},gi.prototype.bufferOriginalPrecision=function(){try{var t=new ii(this._bufParams)
this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof Q))throw t
this._saveException=t}},gi.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},gi.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},gi.prototype.interfaces_=function(){return[]},gi.prototype.getClass=function(){return gi},gi.bufferOp=function(){if(2===arguments.length){var t=arguments[1]
return new gi(arguments[0]).getResultGeometry(t)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof ht&&"number"==typeof arguments[1]){var e=arguments[1],n=arguments[2],i=new gi(arguments[0])
return i.setQuadrantSegments(n),i.getResultGeometry(e)}if(arguments[2]instanceof Sn&&arguments[0]instanceof ht&&"number"==typeof arguments[1]){var r=arguments[1]
return new gi(arguments[0],arguments[2]).getResultGeometry(r)}}else if(4===arguments.length){var o=arguments[1],s=arguments[2],a=arguments[3],l=new gi(arguments[0])
return l.setQuadrantSegments(s),l.setEndCapStyle(a),l.getResultGeometry(o)}},gi.precisionScaleFactor=function(t,e,n){var i=t.getEnvelopeInternal(),r=L.max(Math.abs(i.getMaxX()),Math.abs(i.getMaxY()),Math.abs(i.getMinX()),Math.abs(i.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(r)/Math.log(10)+1)
return Math.pow(10,o)},_i.CAP_ROUND.get=function(){return Sn.CAP_ROUND},_i.CAP_BUTT.get=function(){return Sn.CAP_FLAT},_i.CAP_FLAT.get=function(){return Sn.CAP_FLAT},_i.CAP_SQUARE.get=function(){return Sn.CAP_SQUARE},_i.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(gi,_i)
var mi=function(){this._pt=[new S,new S],this._distance=v.NaN,this._isNull=!0}
mi.prototype.getCoordinates=function(){return this._pt},mi.prototype.getCoordinate=function(t){return this._pt[t]},mi.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0]
this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1]
if(this._isNull)return this.initialize(e,n),null
var i=e.distance(n)
i<this._distance&&this.initialize(e,n,i)}},mi.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0
else if(2===arguments.length){var t=arguments[0],e=arguments[1]
this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2]
this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(i),this._distance=r,this._isNull=!1}},mi.prototype.getDistance=function(){return this._distance},mi.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0]
this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1]
if(this._isNull)return this.initialize(e,n),null
var i=e.distance(n)
i>this._distance&&this.initialize(e,n,i)}},mi.prototype.interfaces_=function(){return[]},mi.prototype.getClass=function(){return mi}
var yi=function(){}
yi.prototype.interfaces_=function(){return[]},yi.prototype.getClass=function(){return yi},yi.computeDistance=function(){if(arguments[2]instanceof mi&&arguments[0]instanceof Ht&&arguments[1]instanceof S)for(var t=arguments[1],e=arguments[2],n=arguments[0].getCoordinates(),i=new gn,r=0;r<n.length-1;r++){i.setCoordinates(n[r],n[r+1])
var o=i.closestPoint(t)
e.setMinimum(o,t)}else if(arguments[2]instanceof mi&&arguments[0]instanceof Qt&&arguments[1]instanceof S){var s=arguments[0],a=arguments[1],l=arguments[2]
yi.computeDistance(s.getExteriorRing(),a,l)
for(var u=0;u<s.getNumInteriorRing();u++)yi.computeDistance(s.getInteriorRingN(u),a,l)}else if(arguments[2]instanceof mi&&arguments[0]instanceof ht&&arguments[1]instanceof S){var h=arguments[0],c=arguments[1],f=arguments[2]
if(h instanceof Ht)yi.computeDistance(h,c,f)
else if(h instanceof Qt)yi.computeDistance(h,c,f)
else if(h instanceof qt)for(var p=h,d=0;d<p.getNumGeometries();d++){var g=p.getGeometryN(d)
yi.computeDistance(g,c,f)}else f.setMinimum(h.getCoordinate(),c)}else if(arguments[2]instanceof mi&&arguments[0]instanceof gn&&arguments[1]instanceof S){var _=arguments[1],m=arguments[2],y=arguments[0].closestPoint(_)
m.setMinimum(y,_)}}
var vi=function(t){this._maxPtDist=new mi,this._inputGeom=t||null},xi={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}}
vi.prototype.computeMaxMidpointDistance=function(t){var e=new Ei(this._inputGeom)
t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},vi.prototype.computeMaxVertexDistance=function(t){var e=new bi(this._inputGeom)
t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},vi.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},vi.prototype.getDistancePoints=function(){return this._maxPtDist},vi.prototype.interfaces_=function(){return[]},vi.prototype.getClass=function(){return vi},xi.MaxPointDistanceFilter.get=function(){return bi},xi.MaxMidpointDistanceFilter.get=function(){return Ei},Object.defineProperties(vi,xi)
var bi=function(t){this._maxPtDist=new mi,this._minPtDist=new mi,this._geom=t||null}
bi.prototype.filter=function(t){this._minPtDist.initialize(),yi.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},bi.prototype.getMaxPointDistance=function(){return this._maxPtDist},bi.prototype.interfaces_=function(){return[pt]},bi.prototype.getClass=function(){return bi}
var Ei=function(t){this._maxPtDist=new mi,this._minPtDist=new mi,this._geom=t||null}
Ei.prototype.filter=function(t,e){if(0===e)return null
var n=t.getCoordinate(e-1),i=t.getCoordinate(e),r=new S((n.x+i.x)/2,(n.y+i.y)/2)
this._minPtDist.initialize(),yi.computeDistance(this._geom,r,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Ei.prototype.isDone=function(){return!1},Ei.prototype.isGeometryChanged=function(){return!1},Ei.prototype.getMaxPointDistance=function(){return this._maxPtDist},Ei.prototype.interfaces_=function(){return[Bt]},Ei.prototype.getClass=function(){return Ei}
var wi=function(t){this._comps=t||null}
wi.prototype.filter=function(t){t instanceof Qt&&this._comps.add(t)},wi.prototype.interfaces_=function(){return[Gt]},wi.prototype.getClass=function(){return wi},wi.getPolygons=function(){if(1===arguments.length)return wi.getPolygons(arguments[0],new wt)
if(2===arguments.length){var t=arguments[0],e=arguments[1]
return t instanceof Qt?e.add(t):t instanceof qt&&t.apply(new wi(e)),e}}
var Si=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0]
this._lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1]
this._lines=e,this._isForcedToLineString=n}}
Si.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof ee){var e=t.getFactory().createLineString(t.getCoordinateSequence())
return this._lines.add(e),null}t instanceof Ht&&this._lines.add(t)},Si.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},Si.prototype.interfaces_=function(){return[ut]},Si.prototype.getClass=function(){return Si},Si.getGeometry=function(){if(1===arguments.length){var t=arguments[0]
return t.getFactory().buildGeometry(Si.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1]
return e.getFactory().buildGeometry(Si.getLines(e,n))}},Si.getLines=function(){if(1===arguments.length)return Si.getLines(arguments[0],!1)
if(2===arguments.length){if(R(arguments[0],xt)&&R(arguments[1],xt)){for(var t=arguments[1],e=arguments[0].iterator();e.hasNext();){var n=e.next()
Si.getLines(n,t)}return t}if(arguments[0]instanceof ht&&"boolean"==typeof arguments[1]){var i=arguments[0],r=arguments[1],o=new wt
return i.apply(new Si(o,r)),o}if(arguments[0]instanceof ht&&R(arguments[1],xt)){var s=arguments[0],a=arguments[1]
return s instanceof Ht?a.add(s):s.apply(new Si(a)),a}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&R(arguments[0],xt)&&R(arguments[1],xt)){for(var l=arguments[1],u=arguments[2],h=arguments[0].iterator();h.hasNext();){var c=h.next()
Si.getLines(c,l,u)}return l}if("boolean"==typeof arguments[2]&&arguments[0]instanceof ht&&R(arguments[1],xt)){var f=arguments[1],p=arguments[2]
return arguments[0].apply(new Si(f,p)),f}}}
var Ci=function(){if(this._boundaryRule=dt.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0]
if(null===t)throw new y("Rule must be non-null")
this._boundaryRule=t}}
Ci.prototype.locateInternal=function(){if(arguments[0]instanceof S&&arguments[1]instanceof Qt){var t=arguments[0],e=arguments[1]
if(e.isEmpty())return P.EXTERIOR
var n=e.getExteriorRing(),i=this.locateInPolygonRing(t,n)
if(i===P.EXTERIOR)return P.EXTERIOR
if(i===P.BOUNDARY)return P.BOUNDARY
for(var r=0;r<e.getNumInteriorRing();r++){var o=e.getInteriorRingN(r),s=this.locateInPolygonRing(t,o)
if(s===P.INTERIOR)return P.EXTERIOR
if(s===P.BOUNDARY)return P.BOUNDARY}return P.INTERIOR}if(arguments[0]instanceof S&&arguments[1]instanceof Ht){var a=arguments[0],l=arguments[1]
if(!l.getEnvelopeInternal().intersects(a))return P.EXTERIOR
var u=l.getCoordinates()
return l.isClosed()||!a.equals(u[0])&&!a.equals(u[u.length-1])?at.isOnLine(a,u)?P.INTERIOR:P.EXTERIOR:P.BOUNDARY}if(arguments[0]instanceof S&&arguments[1]instanceof Kt){var h=arguments[0]
return arguments[1].getCoordinate().equals2D(h)?P.INTERIOR:P.EXTERIOR}},Ci.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?at.locatePointInRing(t,e.getCoordinates()):P.EXTERIOR},Ci.prototype.intersects=function(t,e){return this.locate(t,e)!==P.EXTERIOR},Ci.prototype.updateLocationInfo=function(t){t===P.INTERIOR&&(this._isIn=!0),t===P.BOUNDARY&&this._numBoundaries++},Ci.prototype.computeLocation=function(t,e){if(e instanceof Kt&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof Ht)this.updateLocationInfo(this.locateInternal(t,e))
else if(e instanceof Qt)this.updateLocationInfo(this.locateInternal(t,e))
else if(e instanceof Ut)for(var n=e,i=0;i<n.getNumGeometries();i++){var r=n.getGeometryN(i)
this.updateLocationInfo(this.locateInternal(t,r))}else if(e instanceof ne)for(var o=e,s=0;s<o.getNumGeometries();s++){var a=o.getGeometryN(s)
this.updateLocationInfo(this.locateInternal(t,a))}else if(e instanceof qt)for(var l=new Bn(e);l.hasNext();){var u=l.next()
u!==e&&this.computeLocation(t,u)}},Ci.prototype.locate=function(t,e){return e.isEmpty()?P.EXTERIOR:e instanceof Ht||e instanceof Qt?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?P.BOUNDARY:this._numBoundaries>0||this._isIn?P.INTERIOR:P.EXTERIOR)},Ci.prototype.interfaces_=function(){return[]},Ci.prototype.getClass=function(){return Ci}
var Ti=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length)t.call(this,arguments[0],t.INSIDE_AREA,arguments[1])
else if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2]
this._component=e,this._segIndex=n,this._pt=i}},Ii={INSIDE_AREA:{configurable:!0}}
Ti.prototype.isInsideArea=function(){return this._segIndex===Ti.INSIDE_AREA},Ti.prototype.getCoordinate=function(){return this._pt},Ti.prototype.getGeometryComponent=function(){return this._component},Ti.prototype.getSegmentIndex=function(){return this._segIndex},Ti.prototype.interfaces_=function(){return[]},Ti.prototype.getClass=function(){return Ti},Ii.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Ti,Ii)
var Pi=function(t){this._pts=t||null}
Pi.prototype.filter=function(t){t instanceof Kt&&this._pts.add(t)},Pi.prototype.interfaces_=function(){return[Gt]},Pi.prototype.getClass=function(){return Pi},Pi.getPoints=function(){if(1===arguments.length){var t=arguments[0]
return t instanceof Kt?Qe.singletonList(t):Pi.getPoints(t,new wt)}if(2===arguments.length){var e=arguments[0],n=arguments[1]
return e instanceof Kt?n.add(e):e instanceof qt&&e.apply(new Pi(n)),n}}
var Ai=function(){this._locations=null
var t=arguments[0]
this._locations=t}
Ai.prototype.filter=function(t){(t instanceof Kt||t instanceof Ht||t instanceof Qt)&&this._locations.add(new Ti(t,0,t.getCoordinate()))},Ai.prototype.interfaces_=function(){return[Gt]},Ai.prototype.getClass=function(){return Ai},Ai.getLocations=function(t){var e=new wt
return t.apply(new Ai(e)),e}
var Ri=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Ci,this._minDistanceLocation=null,this._minDistance=v.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1]
this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2]
this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=i,this._terminateDistance=r}}
Ri.prototype.computeContainmentDistance=function(){if(0===arguments.length){var t=new Array(2).fill(null)
if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null
this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=1-e,r=wi.getPolygons(this._geom[e])
if(r.size()>0){var o=Ai.getLocations(this._geom[i])
if(this.computeContainmentDistance(o,r,n),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[i]=n[0],this._minDistanceLocation[e]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&R(arguments[0],Et)&&R(arguments[1],Et)){for(var s=arguments[0],a=arguments[1],l=arguments[2],u=0;u<s.size();u++)for(var h=s.get(u),c=0;c<a.size();c++)if(this.computeContainmentDistance(h,a.get(c),l),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Ti&&arguments[1]instanceof Qt){var f=arguments[0],p=arguments[1],d=arguments[2],g=f.getCoordinate()
if(P.EXTERIOR!==this._ptLocator.locate(g,p))return this._minDistance=0,d[0]=f,d[1]=new Ti(p,g),null}},Ri.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),o=0;o<e.size();o++){var s=e.get(o)
if(this.computeMinDistance(r,s,n),this._minDistance<=this._terminateDistance)return null}},Ri.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=Si.getLines(this._geom[0]),n=Si.getLines(this._geom[1]),i=Pi.getPoints(this._geom[0]),r=Pi.getPoints(this._geom[1])
return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,r,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,i,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(i,r,t),void this.updateMinDistance(t,!1))))},Ri.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Ri.prototype.updateMinDistance=function(t,e){if(null===t[0])return null
e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},Ri.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Ri.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation)return null
if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null
this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Ht&&arguments[1]instanceof Kt){var t=arguments[0],e=arguments[1],n=arguments[2]
if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null
for(var i=t.getCoordinates(),r=e.getCoordinate(),o=0;o<i.length-1;o++){var s=at.distancePointLine(r,i[o],i[o+1])
if(s<this._minDistance){this._minDistance=s
var a=new gn(i[o],i[o+1]).closestPoint(r)
n[0]=new Ti(t,o,a),n[1]=new Ti(e,0,r)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Ht&&arguments[1]instanceof Ht){var l=arguments[0],u=arguments[1],h=arguments[2]
if(l.getEnvelopeInternal().distance(u.getEnvelopeInternal())>this._minDistance)return null
for(var c=l.getCoordinates(),f=u.getCoordinates(),p=0;p<c.length-1;p++)for(var d=0;d<f.length-1;d++){var g=at.distanceLineLine(c[p],c[p+1],f[d],f[d+1])
if(g<this._minDistance){this._minDistance=g
var _=new gn(c[p],c[p+1]),m=new gn(f[d],f[d+1]),y=_.closestPoints(m)
h[0]=new Ti(l,p,y[0]),h[1]=new Ti(u,d,y[1])}if(this._minDistance<=this._terminateDistance)return null}}},Ri.prototype.computeMinDistancePoints=function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),o=0;o<e.size();o++){var s=e.get(o),a=r.getCoordinate().distance(s.getCoordinate())
if(a<this._minDistance&&(this._minDistance=a,n[0]=new Ti(r,0,r.getCoordinate()),n[1]=new Ti(s,0,s.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},Ri.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new y("null geometries are not supported")
return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Ri.prototype.computeMinDistanceLines=function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),o=0;o<e.size();o++){var s=e.get(o)
if(this.computeMinDistance(r,s,n),this._minDistance<=this._terminateDistance)return null}},Ri.prototype.interfaces_=function(){return[]},Ri.prototype.getClass=function(){return Ri},Ri.distance=function(t,e){return new Ri(t,e).distance()},Ri.isWithinDistance=function(t,e,n){return new Ri(t,e,n).distance()<=n},Ri.nearestPoints=function(t,e){return new Ri(t,e).nearestPoints()}
var Li=function(){this._pt=[new S,new S],this._distance=v.NaN,this._isNull=!0}
Li.prototype.getCoordinates=function(){return this._pt},Li.prototype.getCoordinate=function(t){return this._pt[t]},Li.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0]
this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1]
if(this._isNull)return this.initialize(e,n),null
var i=e.distance(n)
i<this._distance&&this.initialize(e,n,i)}},Li.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0
else if(2===arguments.length){var t=arguments[0],e=arguments[1]
this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2]
this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(i),this._distance=r,this._isNull=!1}},Li.prototype.toString=function(){return J.toLineString(this._pt[0],this._pt[1])},Li.prototype.getDistance=function(){return this._distance},Li.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0]
this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1]
if(this._isNull)return this.initialize(e,n),null
var i=e.distance(n)
i>this._distance&&this.initialize(e,n,i)}},Li.prototype.interfaces_=function(){return[]},Li.prototype.getClass=function(){return Li}
var Mi=function(){}
Mi.prototype.interfaces_=function(){return[]},Mi.prototype.getClass=function(){return Mi},Mi.computeDistance=function(){if(arguments[2]instanceof Li&&arguments[0]instanceof Ht&&arguments[1]instanceof S)for(var t=arguments[0],e=arguments[1],n=arguments[2],i=new gn,r=t.getCoordinates(),o=0;o<r.length-1;o++){i.setCoordinates(r[o],r[o+1])
var s=i.closestPoint(e)
n.setMinimum(s,e)}else if(arguments[2]instanceof Li&&arguments[0]instanceof Qt&&arguments[1]instanceof S){var a=arguments[0],l=arguments[1],u=arguments[2]
Mi.computeDistance(a.getExteriorRing(),l,u)
for(var h=0;h<a.getNumInteriorRing();h++)Mi.computeDistance(a.getInteriorRingN(h),l,u)}else if(arguments[2]instanceof Li&&arguments[0]instanceof ht&&arguments[1]instanceof S){var c=arguments[0],f=arguments[1],p=arguments[2]
if(c instanceof Ht)Mi.computeDistance(c,f,p)
else if(c instanceof Qt)Mi.computeDistance(c,f,p)
else if(c instanceof qt)for(var d=c,g=0;g<d.getNumGeometries();g++){var _=d.getGeometryN(g)
Mi.computeDistance(_,f,p)}else p.setMinimum(c.getCoordinate(),f)}else if(arguments[2]instanceof Li&&arguments[0]instanceof gn&&arguments[1]instanceof S){var m=arguments[1],y=arguments[2],v=arguments[0].closestPoint(m)
y.setMinimum(v,m)}}
var Oi=function(){this._g0=null,this._g1=null,this._ptDist=new Li,this._densifyFrac=0
var t=arguments[0],e=arguments[1]
this._g0=t,this._g1=e},Ni={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}}
Oi.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Oi.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new y("Fraction is not in range (0.0 - 1.0]")
this._densifyFrac=t},Oi.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},Oi.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Oi.prototype.computeOrientedDistance=function(t,e,n){var i=new Di(e)
if(t.apply(i),n.setMaximum(i.getMaxPointDistance()),this._densifyFrac>0){var r=new Fi(e,this._densifyFrac)
t.apply(r),n.setMaximum(r.getMaxPointDistance())}},Oi.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Oi.prototype.interfaces_=function(){return[]},Oi.prototype.getClass=function(){return Oi},Oi.distance=function(){if(2===arguments.length)return new Oi(arguments[0],arguments[1]).distance()
if(3===arguments.length){var t=arguments[2],e=new Oi(arguments[0],arguments[1])
return e.setDensifyFraction(t),e.distance()}},Ni.MaxPointDistanceFilter.get=function(){return Di},Ni.MaxDensifiedByFractionDistanceFilter.get=function(){return Fi},Object.defineProperties(Oi,Ni)
var Di=function(){this._maxPtDist=new Li,this._minPtDist=new Li,this._euclideanDist=new Mi,this._geom=null
var t=arguments[0]
this._geom=t}
Di.prototype.filter=function(t){this._minPtDist.initialize(),Mi.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Di.prototype.getMaxPointDistance=function(){return this._maxPtDist},Di.prototype.interfaces_=function(){return[pt]},Di.prototype.getClass=function(){return Di}
var Fi=function(){this._maxPtDist=new Li,this._minPtDist=new Li,this._geom=null,this._numSubSegs=0
var t=arguments[0],e=arguments[1]
this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))}
Fi.prototype.filter=function(t,e){if(0===e)return null
for(var n=t.getCoordinate(e-1),i=t.getCoordinate(e),r=(i.x-n.x)/this._numSubSegs,o=(i.y-n.y)/this._numSubSegs,s=0;s<this._numSubSegs;s++){var a=n.x+s*r,l=n.y+s*o,u=new S(a,l)
this._minPtDist.initialize(),Mi.computeDistance(this._geom,u,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},Fi.prototype.isDone=function(){return!1},Fi.prototype.isGeometryChanged=function(){return!1},Fi.prototype.getMaxPointDistance=function(){return this._maxPtDist},Fi.prototype.interfaces_=function(){return[Bt]},Fi.prototype.getClass=function(){return Fi}
var ki=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},ji={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}}
ki.prototype.checkMaximumDistance=function(t,e,n){var i=new Oi(e,t)
if(i.setDensifyFraction(.25),this._maxDistanceFound=i.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1
var r=i.getCoordinates()
this._errorLocation=r[1],this._errorIndicator=t.getFactory().createLineString(r),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+J.toLineString(r[0],r[1])+")"}},ki.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=ki.MAX_DISTANCE_DIFF_FRAC*t
return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),ki.VERBOSE&&Z.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},ki.prototype.checkNegativeValid=function(){if(!(this._input instanceof Qt||this._input instanceof ne||this._input instanceof qt))return null
var t=this.getPolygonLines(this._input)
if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null
this.checkMaximumDistance(t,this._result,this._maxValidDistance)},ki.prototype.getErrorIndicator=function(){return this._errorIndicator},ki.prototype.checkMinimumDistance=function(t,e,n){var i=new Ri(t,e,n)
if(this._minDistanceFound=i.distance(),this._minDistanceFound<n){this._isValid=!1
var r=i.nearestPoints()
this._errorLocation=i.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(r),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+J.toLineString(r[0],r[1])+" )"}},ki.prototype.checkPositiveValid=function(){var t=this._result.getBoundary()
if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null
this.checkMaximumDistance(this._input,t,this._maxValidDistance)},ki.prototype.getErrorLocation=function(){return this._errorLocation},ki.prototype.getPolygonLines=function(t){for(var e=new wt,n=new Si(e),i=wi.getPolygons(t).iterator();i.hasNext();)i.next().apply(n)
return t.getFactory().buildGeometry(e)},ki.prototype.getErrorMessage=function(){return this._errMsg},ki.prototype.interfaces_=function(){return[]},ki.prototype.getClass=function(){return ki},ji.VERBOSE.get=function(){return!1},ji.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(ki,ji)
var zi=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},Gi={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}}
zi.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},zi.prototype.checkEnvelope=function(){if(this._distance<0)return null
var t=this._distance*zi.MAX_ENV_DIFF_FRAC
0===t&&(t=.001)
var e=new Y(this._input.getEnvelopeInternal())
e.expandBy(this._distance)
var n=new Y(this._result.getEnvelopeInternal())
n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},zi.prototype.checkDistance=function(){var t=new ki(this._input,this._distance,this._result)
t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},zi.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea()
this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},zi.prototype.checkPolygonal=function(){this._result instanceof Qt||this._result instanceof ne||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},zi.prototype.getErrorIndicator=function(){return this._errorIndicator},zi.prototype.getErrorLocation=function(){return this._errorLocation},zi.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},zi.prototype.report=function(t){if(!zi.VERBOSE)return null
Z.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},zi.prototype.getErrorMessage=function(){return this._errorMsg},zi.prototype.interfaces_=function(){return[]},zi.prototype.getClass=function(){return zi},zi.isValidMsg=function(t,e,n){var i=new zi(t,e,n)
return i.isValid()?null:i.getErrorMessage()},zi.isValid=function(t,e,n){return!!new zi(t,e,n).isValid()},Gi.VERBOSE.get=function(){return!1},Gi.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(zi,Gi)
var Bi=function(){this._pts=null,this._data=null
var t=arguments[0],e=arguments[1]
this._pts=t,this._data=e}
Bi.prototype.getCoordinates=function(){return this._pts},Bi.prototype.size=function(){return this._pts.length},Bi.prototype.getCoordinate=function(t){return this._pts[t]},Bi.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Bi.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:cn.octant(this.getCoordinate(t),this.getCoordinate(t+1))},Bi.prototype.setData=function(t){this._data=t},Bi.prototype.getData=function(){return this._data},Bi.prototype.toString=function(){return J.toLineString(new le(this._pts))},Bi.prototype.interfaces_=function(){return[fn]},Bi.prototype.getClass=function(){return Bi}
var qi=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new wt,this._intersectionCount=0,this._keepIntersections=!0
var t=arguments[0]
this._li=t,this._interiorIntersection=null}
qi.prototype.getInteriorIntersection=function(){return this._interiorIntersection},qi.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},qi.prototype.getIntersectionSegments=function(){return this._intSegments},qi.prototype.count=function(){return this._intersectionCount},qi.prototype.getIntersections=function(){return this._intersections},qi.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},qi.prototype.setKeepIntersections=function(t){this._keepIntersections=t},qi.prototype.processIntersections=function(t,e,n,i){if(!this._findAllIntersections&&this.hasIntersection())return null
if(t===n&&e===i)return null
if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,i))return null
var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1]
this._li.computeIntersection(r,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=r,this._intSegments[1]=o,this._intSegments[2]=s,this._intSegments[3]=a,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},qi.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},qi.prototype.hasIntersection=function(){return null!==this._interiorIntersection},qi.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},qi.prototype.interfaces_=function(){return[Wn]},qi.prototype.getClass=function(){return qi},qi.createAllIntersectionsFinder=function(t){var e=new qi(t)
return e.setFindAllIntersections(!0),e},qi.createAnyIntersectionFinder=function(t){return new qi(t)},qi.createIntersectionCounter=function(t){var e=new qi(t)
return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e}
var Ui=function(){this._li=new rt,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0
var t=arguments[0]
this._segStrings=t}
Ui.prototype.execute=function(){if(null!==this._segInt)return null
this.checkInteriorIntersections()},Ui.prototype.getIntersections=function(){return this._segInt.getIntersections()},Ui.prototype.isValid=function(){return this.execute(),this._isValid},Ui.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Ui.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new qi(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections)
var t=new En
if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},Ui.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Pe(this.getErrorMessage(),this._segInt.getInteriorIntersection())},Ui.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found"
var t=this._segInt.getIntersectionSegments()
return"found non-noded intersection between "+J.toLineString(t[0],t[1])+" and "+J.toLineString(t[2],t[3])},Ui.prototype.interfaces_=function(){return[]},Ui.prototype.getClass=function(){return Ui},Ui.computeIntersections=function(t){var e=new Ui(t)
return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()}
var Zi=function t(){this._nv=null
var e=arguments[0]
this._nv=new Ui(t.toSegmentStrings(e))}
Zi.prototype.checkValid=function(){this._nv.checkValid()},Zi.prototype.interfaces_=function(){return[]},Zi.prototype.getClass=function(){return Zi},Zi.toSegmentStrings=function(t){for(var e=new wt,n=t.iterator();n.hasNext();){var i=n.next()
e.add(new Bi(i.getCoordinates(),i))}return e},Zi.checkValid=function(t){new Zi(t).checkValid()}
var Xi=function(t){this._mapOp=t}
Xi.prototype.map=function(t){for(var e=new wt,n=0;n<t.getNumGeometries();n++){var i=this._mapOp.map(t.getGeometryN(n))
i.isEmpty()||e.add(i)}return t.getFactory().createGeometryCollection(me.toGeometryArray(e))},Xi.prototype.interfaces_=function(){return[]},Xi.prototype.getClass=function(){return Xi},Xi.map=function(t,e){return new Xi(e).map(t)}
var Yi=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new wt,this._resultLineList=new wt
var t=arguments[0],e=arguments[1],n=arguments[2]
this._op=t,this._geometryFactory=e,this._ptLocator=n}
Yi.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next()
this.collectLineEdge(n,t,this._lineEdgesList),this.collectBoundaryTouchEdge(n,t,this._lineEdgesList)}},Yi.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e))
t.getLabel().setLocation(e,n)},Yi.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},Yi.prototype.collectLineEdge=function(t,e,n){var i=t.getLabel(),r=t.getEdge()
t.isLineEdge()&&(t.isVisited()||!Tr.isResultOfOp(i,e)||r.isCovered()||(n.add(r),t.setVisitedEdge(!0)))},Yi.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges()
for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),i=n.getEdge()
if(n.isLineEdge()&&!i.isCoveredSet()){var r=this._op.isCoveredByA(n.getCoordinate())
i.setCovered(r)}}},Yi.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=n.getLabel()
n.isIsolated()&&(i.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},Yi.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),i=this._geometryFactory.createLineString(n.getCoordinates())
this._resultLineList.add(i),n.setInResult(!0)}},Yi.prototype.collectBoundaryTouchEdge=function(t,e,n){var i=t.getLabel()
return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(et.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Tr.isResultOfOp(i,e)&&e===Tr.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},Yi.prototype.interfaces_=function(){return[]},Yi.prototype.getClass=function(){return Yi}
var Vi=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new wt
var t=arguments[0],e=arguments[1]
this._op=t,this._geometryFactory=e}
Vi.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate()
if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e)
this._resultPointList.add(n)}},Vi.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next()
if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&t!==Tr.INTERSECTION)){var i=n.getLabel()
Tr.isResultOfOp(i,t)&&this.filterCoveredNodeToPoint(n)}}},Vi.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},Vi.prototype.interfaces_=function(){return[]},Vi.prototype.getClass=function(){return Vi}
var Wi=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1}
Wi.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Wi.prototype.transformPolygon=function(t,e){var n=!0,i=this.transformLinearRing(t.getExteriorRing(),t)
null!==i&&i instanceof ee&&!i.isEmpty()||(n=!1)
for(var r=new wt,o=0;o<t.getNumInteriorRing();o++){var s=this.transformLinearRing(t.getInteriorRingN(o),t)
null===s||s.isEmpty()||(s instanceof ee||(n=!1),r.add(s))}if(n)return this._factory.createPolygon(i,r.toArray([]))
var a=new wt
return null!==i&&a.add(i),a.addAll(r),this._factory.buildGeometry(a)},Wi.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Wi.prototype.getInputGeometry=function(){return this._inputGeom},Wi.prototype.transformMultiLineString=function(t,e){for(var n=new wt,i=0;i<t.getNumGeometries();i++){var r=this.transformLineString(t.getGeometryN(i),t)
null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)},Wi.prototype.transformCoordinates=function(t,e){return this.copy(t)},Wi.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Wi.prototype.transformMultiPoint=function(t,e){for(var n=new wt,i=0;i<t.getNumGeometries();i++){var r=this.transformPoint(t.getGeometryN(i),t)
null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)},Wi.prototype.transformMultiPolygon=function(t,e){for(var n=new wt,i=0;i<t.getNumGeometries();i++){var r=this.transformPolygon(t.getGeometryN(i),t)
null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)},Wi.prototype.copy=function(t){return t.copy()},Wi.prototype.transformGeometryCollection=function(t,e){for(var n=new wt,i=0;i<t.getNumGeometries();i++){var r=this.transform(t.getGeometryN(i))
null!==r&&(this._pruneEmptyGeometry&&r.isEmpty()||n.add(r))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(me.toGeometryArray(n)):this._factory.buildGeometry(n)},Wi.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof Kt)return this.transformPoint(t,null)
if(t instanceof te)return this.transformMultiPoint(t,null)
if(t instanceof ee)return this.transformLinearRing(t,null)
if(t instanceof Ht)return this.transformLineString(t,null)
if(t instanceof Ut)return this.transformMultiLineString(t,null)
if(t instanceof Qt)return this.transformPolygon(t,null)
if(t instanceof ne)return this.transformMultiPolygon(t,null)
if(t instanceof qt)return this.transformGeometryCollection(t,null)
throw new y("Unknown Geometry subtype: "+t.getClass().getName())},Wi.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t)
if(null===n)return this._factory.createLinearRing(null)
var i=n.size()
return i>0&&i<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},Wi.prototype.interfaces_=function(){return[]},Wi.prototype.getClass=function(){return Wi}
var Hi=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new gn,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Ht&&"number"==typeof arguments[1]){var e=arguments[1]
t.call(this,arguments[0].getCoordinates(),e)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var n=arguments[0],i=arguments[1]
this._srcPts=n,this._isClosed=t.isClosed(n),this._snapTolerance=i}}
Hi.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),i=0;i<n;i++){var r=t.get(i),o=this.findSnapForVertex(r,e)
null!==o&&(t.set(i,new S(o)),0===i&&this._isClosed&&t.set(t.size()-1,new S(o)))}},Hi.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null
if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},Hi.prototype.snapTo=function(t){var e=new Ct(this._srcPts)
return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},Hi.prototype.snapSegments=function(t,e){if(0===e.length)return null
var n=e.length
e[0].equals2D(e[e.length-1])&&(n=e.length-1)
for(var i=0;i<n;i++){var r=e[i],o=this.findSegmentIndexToSnap(r,t)
o>=0&&t.add(o+1,new S(r),!1)}},Hi.prototype.findSegmentIndexToSnap=function(t,e){for(var n=v.MAX_VALUE,i=-1,r=0;r<e.size()-1;r++){if(this._seg.p0=e.get(r),this._seg.p1=e.get(r+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue
return-1}var o=this._seg.distance(t)
o<this._snapTolerance&&o<n&&(n=o,i=r)}return i},Hi.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},Hi.prototype.interfaces_=function(){return[]},Hi.prototype.getClass=function(){return Hi},Hi.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])}
var $i=function(t){this._srcGeom=t||null},Ki={SNAP_PRECISION_FACTOR:{configurable:!0}}
$i.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t)
return new Ji(e,n).transform(this._srcGeom)},$i.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),i=new Ji(t,n,!0).transform(this._srcGeom),r=i
return e&&R(r,Jt)&&(r=i.buffer(0)),r},$i.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},$i.prototype.extractTargetCoordinates=function(t){for(var e=new p,n=t.getCoordinates(),i=0;i<n.length;i++)e.add(n[i])
return e.toArray(new Array(0).fill(null))},$i.prototype.computeMinimumSegmentLength=function(t){for(var e=v.MAX_VALUE,n=0;n<t.length-1;n++){var i=t[n].distance(t[n+1])
i<e&&(e=i)}return e},$i.prototype.interfaces_=function(){return[]},$i.prototype.getClass=function(){return $i},$i.snap=function(t,e,n){var i=new Array(2).fill(null),r=new $i(t)
i[0]=r.snapTo(e,n)
var o=new $i(e)
return i[1]=o.snapTo(i[0],n),i},$i.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=$i.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel()
if(n.getType()===pe.FIXED){var i=1/n.getScale()*2/1.415
i>e&&(e=i)}return e}if(2===arguments.length){var r=arguments[0],o=arguments[1]
return Math.min($i.computeOverlaySnapTolerance(r),$i.computeOverlaySnapTolerance(o))}},$i.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal()
return Math.min(e.getHeight(),e.getWidth())*$i.SNAP_PRECISION_FACTOR},$i.snapToSelf=function(t,e,n){return new $i(t).snapToSelf(e,n)},Ki.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties($i,Ki)
var Ji=function(t){function e(e,n,i){t.call(this),this._snapTolerance=e||null,this._snapPts=n||null,this._isSelfSnap=void 0!==i&&i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var n=new Hi(t,this._snapTolerance)
return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),i=this.snapLine(n,this._snapPts)
return this._factory.getCoordinateSequenceFactory().create(i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Wi),Qi=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null}
Qi.prototype.getCommon=function(){return v.longBitsToDouble(this._commonBits)},Qi.prototype.add=function(t){var e=v.doubleToLongBits(t)
return this._isFirst?(this._commonBits=e,this._commonSignExp=Qi.signExpBits(this._commonBits),this._isFirst=!1,null):Qi.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=Qi.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=Qi.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},Qi.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=v.longBitsToDouble(t),n="0000000000000000000000000000000000000000000000000000000000000000"+v.toBinaryString(t),i=n.substring(n.length-64)
return i.substring(0,1)+"  "+i.substring(1,12)+"(exp) "+i.substring(12)+" [ "+e+" ]"}},Qi.prototype.interfaces_=function(){return[]},Qi.prototype.getClass=function(){return Qi},Qi.getBit=function(t,e){return t&1<<e?1:0},Qi.signExpBits=function(t){return t>>52},Qi.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},Qi.numCommonMostSigMantissaBits=function(t,e){for(var n=0,i=52;i>=0;i--){if(Qi.getBit(t,i)!==Qi.getBit(e,i))return n
n++}return 52}
var tr=function(){this._commonCoord=null,this._ccFilter=new nr},er={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}}
tr.prototype.addCommonBits=function(t){var e=new ir(this._commonCoord)
t.apply(e),t.geometryChanged()},tr.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t
var e=new S(this._commonCoord)
e.x=-e.x,e.y=-e.y
var n=new ir(e)
return t.apply(n),t.geometryChanged(),t},tr.prototype.getCommonCoordinate=function(){return this._commonCoord},tr.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},tr.prototype.interfaces_=function(){return[]},tr.prototype.getClass=function(){return tr},er.CommonCoordinateFilter.get=function(){return nr},er.Translater.get=function(){return ir},Object.defineProperties(tr,er)
var nr=function(){this._commonBitsX=new Qi,this._commonBitsY=new Qi}
nr.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},nr.prototype.getCommonCoordinate=function(){return new S(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},nr.prototype.interfaces_=function(){return[pt]},nr.prototype.getClass=function(){return nr}
var ir=function(){this.trans=null
var t=arguments[0]
this.trans=t}
ir.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,i=t.getOrdinate(e,1)+this.trans.y
t.setOrdinate(e,0,n),t.setOrdinate(e,1,i)},ir.prototype.isDone=function(){return!1},ir.prototype.isGeometryChanged=function(){return!0},ir.prototype.interfaces_=function(){return[Bt]},ir.prototype.getClass=function(){return ir}
var rr=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()}
rr.prototype.selfSnap=function(t){return new $i(t).snapTo(t,this._snapTolerance)},rr.prototype.removeCommonBits=function(t){this._cbr=new tr,this._cbr.add(t[0]),this._cbr.add(t[1])
var e=new Array(2).fill(null)
return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},rr.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},rr.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=Tr.overlayOp(e[0],e[1],t)
return this.prepareResult(n)},rr.prototype.checkValid=function(t){t.isValid()||Z.out.println("Snapped geometry is invalid")},rr.prototype.computeSnapTolerance=function(){this._snapTolerance=$i.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},rr.prototype.snap=function(t){var e=this.removeCommonBits(t)
return $i.snap(e[0],e[1],this._snapTolerance)},rr.prototype.interfaces_=function(){return[]},rr.prototype.getClass=function(){return rr},rr.overlayOp=function(t,e,n){return new rr(t,e).getResultGeometry(n)},rr.union=function(t,e){return rr.overlayOp(t,e,Tr.UNION)},rr.intersection=function(t,e){return rr.overlayOp(t,e,Tr.INTERSECTION)},rr.symDifference=function(t,e){return rr.overlayOp(t,e,Tr.SYMDIFFERENCE)},rr.difference=function(t,e){return rr.overlayOp(t,e,Tr.DIFFERENCE)}
var or=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e}
or.prototype.getResultGeometry=function(t){var e=null,n=!1,i=null
try{e=Tr.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof Q))throw t
i=t}if(!n)try{e=rr.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof Q?i:t}return e},or.prototype.interfaces_=function(){return[]},or.prototype.getClass=function(){return or},or.overlayOp=function(t,e,n){return new or(t,e).getResultGeometry(n)},or.union=function(t,e){return or.overlayOp(t,e,Tr.UNION)},or.intersection=function(t,e){return or.overlayOp(t,e,Tr.INTERSECTION)},or.symDifference=function(t,e){return or.overlayOp(t,e,Tr.SYMDIFFERENCE)},or.difference=function(t,e){return or.overlayOp(t,e,Tr.DIFFERENCE)}
var sr=function(){this.mce=null,this.chainIndex=null
var t=arguments[0],e=arguments[1]
this.mce=t,this.chainIndex=e}
sr.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},sr.prototype.interfaces_=function(){return[]},sr.prototype.getClass=function(){return sr}
var ar=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1]
this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2]
this._eventType=t.INSERT,this._label=i,this._xValue=r,this._obj=o}},lr={INSERT:{configurable:!0},DELETE:{configurable:!0}}
ar.prototype.isDelete=function(){return this._eventType===ar.DELETE},ar.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},ar.prototype.getObject=function(){return this._obj},ar.prototype.compareTo=function(t){var e=t
return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},ar.prototype.getInsertEvent=function(){return this._insertEvent},ar.prototype.isInsert=function(){return this._eventType===ar.INSERT},ar.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},ar.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},ar.prototype.interfaces_=function(){return[b]},ar.prototype.getClass=function(){return ar},lr.INSERT.get=function(){return 1},lr.DELETE.get=function(){return 2},Object.defineProperties(ar,lr)
var ur=function(){}
ur.prototype.interfaces_=function(){return[]},ur.prototype.getClass=function(){return ur}
var hr=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1
var t=arguments[0],e=arguments[1],n=arguments[2]
this._li=t,this._includeProper=e,this._recordIsolated=n}
hr.prototype.isTrivialIntersection=function(t,e,n,i){if(t===n&&1===this._li.getIntersectionNum()){if(hr.isAdjacentSegments(e,i))return!0
if(t.isClosed()){var r=t.getNumPoints()-1
if(0===e&&i===r||0===i&&e===r)return!0}}return!1},hr.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},hr.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},hr.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},hr.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next().getCoordinate()
if(t.isIntersection(i))return!0}return!1},hr.prototype.hasProperIntersection=function(){return this._hasProper},hr.prototype.hasIntersection=function(){return this._hasIntersection},hr.prototype.isDone=function(){return this._isDone},hr.prototype.isBoundaryPoint=function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},hr.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},hr.prototype.addIntersections=function(t,e,n,i){if(t===n&&e===i)return null
this.numTests++
var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1]
this._li.computeIntersection(r,o,s,a),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},hr.prototype.interfaces_=function(){return[]},hr.prototype.getClass=function(){return hr},hr.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)}
var cr=function(t){function e(){t.call(this),this.events=new wt,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){Qe.sort(this.events)
for(var t=0;t<this.events.size();t++){var e=this.events.get(t)
e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var t=arguments[0]
this.nOverlaps=0,this.prepareEvents()
for(var e=0;e<this.events.size();e++){var n=this.events.get(e)
if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof hr&&R(arguments[0],Et)&&R(arguments[1],Et)){var i=arguments[0],r=arguments[1],o=arguments[2]
this.addEdges(i,i),this.addEdges(r,r),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&R(arguments[0],Et)&&arguments[1]instanceof hr){var s=arguments[0],a=arguments[1]
arguments[2]?this.addEdges(s,null):this.addEdges(s),this.computeIntersections(a)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),i=n.getStartIndexes(),r=0;r<i.length-1;r++){var o=new sr(n,r),s=new ar(e,n.getMinX(r),o)
this.events.add(s),this.events.add(new ar(n.getMaxX(r),s))}},e.prototype.processOverlaps=function(t,e,n,i){for(var r=n.getObject(),o=t;o<e;o++){var s=this.events.get(o)
if(s.isInsert()){var a=s.getObject()
n.isSameLabel(s)||(r.computeIntersections(a,i),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next()
this.addEdge(e,e)}else if(2===arguments.length)for(var n=arguments[1],i=arguments[0].iterator();i.hasNext();){var r=i.next()
this.addEdge(r,n)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ur),fr=function(){this._min=v.POSITIVE_INFINITY,this._max=v.NEGATIVE_INFINITY},pr={NodeComparator:{configurable:!0}}
fr.prototype.getMin=function(){return this._min},fr.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},fr.prototype.getMax=function(){return this._max},fr.prototype.toString=function(){return J.toLineString(new S(this._min,0),new S(this._max,0))},fr.prototype.interfaces_=function(){return[]},fr.prototype.getClass=function(){return fr},pr.NodeComparator.get=function(){return dr},Object.defineProperties(fr,pr)
var dr=function(){}
dr.prototype.compare=function(t,e){var n=t,i=e,r=(n._min+n._max)/2,o=(i._min+i._max)/2
return r<o?-1:r>o?1:0},dr.prototype.interfaces_=function(){return[w]},dr.prototype.getClass=function(){return dr}
var gr=function(t){function e(){t.call(this),this._item=null
var e=arguments[0],n=arguments[1],i=arguments[2]
this._min=e,this._max=n,this._item=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null
n.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(fr),_r=function(t){function e(){t.call(this),this._node1=null,this._node2=null
var e=arguments[0],n=arguments[1]
this._node1=e,this._node2=n,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null
null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(fr),mr=function(){this._leaves=new wt,this._root=null,this._level=0}
mr.prototype.buildTree=function(){Qe.sort(this._leaves,new fr.NodeComparator)
for(var t=this._leaves,e=null,n=new wt;;){if(this.buildLevel(t,n),1===n.size())return n.get(0)
e=t,t=n,n=e}},mr.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried")
this._leaves.add(new gr(t,e,n))},mr.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},mr.prototype.buildRoot=function(){if(null!==this._root)return null
this._root=this.buildTree()},mr.prototype.printNode=function(t){Z.out.println(J.toLineString(new S(t._min,this._level),new S(t._max,this._level)))},mr.prototype.init=function(){if(null!==this._root)return null
this.buildRoot()},mr.prototype.buildLevel=function(t,e){this._level++,e.clear()
for(var n=0;n<t.size();n+=2){var i=t.get(n)
if(null===(n+1<t.size()?t.get(n):null))e.add(i)
else{var r=new _r(t.get(n),t.get(n+1))
e.add(r)}}},mr.prototype.interfaces_=function(){return[]},mr.prototype.getClass=function(){return mr}
var yr=function(){this._items=new wt}
yr.prototype.visitItem=function(t){this._items.add(t)},yr.prototype.getItems=function(){return this._items},yr.prototype.interfaces_=function(){return[He]},yr.prototype.getClass=function(){return yr}
var vr=function(){this._index=null
var t=arguments[0]
if(!R(t,Jt))throw new y("Argument must be Polygonal")
this._index=new Er(t)},xr={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}}
vr.prototype.locate=function(t){var e=new st(t),n=new br(e)
return this._index.query(t.y,t.y,n),e.getLocation()},vr.prototype.interfaces_=function(){return[Gn]},vr.prototype.getClass=function(){return vr},xr.SegmentVisitor.get=function(){return br},xr.IntervalIndexedGeometry.get=function(){return Er},Object.defineProperties(vr,xr)
var br=function(){this._counter=null
var t=arguments[0]
this._counter=t}
br.prototype.visitItem=function(t){var e=t
this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},br.prototype.interfaces_=function(){return[He]},br.prototype.getClass=function(){return br}
var Er=function(){this._index=new mr
var t=arguments[0]
this.init(t)}
Er.prototype.init=function(t){for(var e=Si.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates()
this.addLine(n)}},Er.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new gn(t[e-1],t[e]),i=Math.min(n.p0.y,n.p1.y),r=Math.max(n.p0.y,n.p1.y)
this._index.insert(i,r,n)}},Er.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new yr
return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2]
this._index.query(i,r,o)}},Er.prototype.interfaces_=function(){return[]},Er.prototype.getClass=function(){return Er}
var wr=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new fe,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Ci,2===arguments.length){var e=arguments[0],n=arguments[1],i=dt.OGC_SFS_BOUNDARY_RULE
this._argIndex=e,this._parentGeom=n,this._boundaryNodeRule=i,null!==n&&this.add(n)}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2]
this._argIndex=r,this._parentGeom=o,this._boundaryNodeRule=s,null!==o&&this.add(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,n){var i=this._nodes.addNode(n).getLabel(),r=1
i.getLocation(t,Ce.ON)===P.BOUNDARY&&r++
var o=e.determineBoundary(this._boundaryNodeRule,r)
i.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1]
return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[1],i=arguments[2],r=new hr(arguments[0],!0,!1)
r.setIsDoneIfProperInt(i)
var o=this.createEdgeSetIntersector(),s=this._parentGeom instanceof ee||this._parentGeom instanceof Qt||this._parentGeom instanceof ne,a=n||!s
return o.computeIntersections(this._edges,r,a),this.addSelfIntersectionNodes(this._argIndex),r}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,n){var i=new hr(e,n,!0)
return i.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,i),i},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof Kt){var t=arguments[0].getCoordinate()
this.insertPoint(this._argIndex,t,P.INTERIOR)}else if(arguments[0]instanceof S){var e=arguments[0]
this.insertPoint(this._argIndex,e,P.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),P.EXTERIOR,P.INTERIOR)
for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e)
this.addPolygonRing(n,P.INTERIOR,P.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t)
var e=t.getCoordinates()
this.insertPoint(this._argIndex,e[0],P.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],P.BOUNDARY)},e.prototype.addLineString=function(t){var e=Tt.removeRepeatedPoints(t.getCoordinates())
if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null
var n=new ni(e,new Me(this._argIndex,P.INTERIOR))
this._lineEdgeMap.put(t,n),this.insertEdge(n),et.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,i=t.iterator();i.hasNext();){var r=i.next()
e[n++]=r.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null
n===P.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null
var i=Tt.removeRepeatedPoints(t.getCoordinates())
if(i.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=i[0],null
var r=e,o=n
at.isCCW(i)&&(r=n,o=e)
var s=new ni(i,new Me(this._argIndex,P.BOUNDARY,r,o))
this._lineEdgeMap.put(t,s),this.insertEdge(s),this.insertPoint(this._argIndex,i[0],P.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var i=this._nodes.addNode(e),r=i.getLabel()
null===r?i._label=new Me(t,n):r.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new cr},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),i=n.getLabel().getLocation(t),r=n.eiList.iterator();r.hasNext();){var o=r.next()
this.addSelfIntersectionNode(t,o.coord,i)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments)
var e=arguments[0]
if(e.isEmpty())return null
if(e instanceof ne&&(this._useBoundaryDeterminationRule=!1),e instanceof Qt)this.addPolygon(e)
else if(e instanceof Ht)this.addLineString(e)
else if(e instanceof Kt)this.addPoint(e)
else if(e instanceof te)this.addCollection(e)
else if(e instanceof Ut)this.addCollection(e)
else if(e instanceof ne)this.addCollection(e)
else{if(!(e instanceof qt))throw new Error(e.getClass().getName())
this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e)
this.add(n)}},e.prototype.locate=function(t){return R(this._parentGeom,Jt)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new vr(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0]
return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?P.BOUNDARY:P.INTERIOR},e}(Ze),Sr=function(){if(this._li=new rt,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0]
this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new wr(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=dt.OGC_SFS_BOUNDARY_RULE
e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new wr(0,e,i),this._arg[1]=new wr(1,n,i)}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2]
r.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(r.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new wr(0,r,s),this._arg[1]=new wr(1,o,s)}}
Sr.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},Sr.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},Sr.prototype.interfaces_=function(){return[]},Sr.prototype.getClass=function(){return Sr}
var Cr=function(){}
Cr.prototype.interfaces_=function(){return[]},Cr.prototype.getClass=function(){return Cr},Cr.map=function(){if(arguments[0]instanceof ht&&R(arguments[1],Cr.MapOp)){for(var t=arguments[0],e=arguments[1],n=new wt,i=0;i<t.getNumGeometries();i++){var r=e.map(t.getGeometryN(i))
null!==r&&n.add(r)}return t.getFactory().buildGeometry(n)}if(R(arguments[0],xt)&&R(arguments[1],Cr.MapOp)){for(var o=arguments[0],s=arguments[1],a=new wt,l=o.iterator();l.hasNext();){var u=l.next(),h=s.map(u)
null!==h&&a.add(h)}return a}},Cr.MapOp=function(){}
var Tr=function(t){function e(){var e=arguments[0],n=arguments[1]
t.call(this,e,n),this._ptLocator=new Ci,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Vn,this._resultPolyList=new wt,this._resultLineList=new wt,this._resultPointList=new wt,this._graph=new Ze(new Xn),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t)
if(null!==e){var n=e.getLabel(),i=t.getLabel()
e.isPointwiseEqual(t)||(i=new Me(t.getLabel())).flip()
var r=e.getDepth()
r.isNull()&&r.add(n),r.add(i),n.merge(i)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym()
e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,n,i,r){var o=new wt
return o.addAll(t),o.addAll(n),o.addAll(i),o.isEmpty()?e.createEmptyResult(r,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next()
if(this._ptLocator.locate(t,i)!==P.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new wt,e=this._edgeList.iterator();e.hasNext();){var n=e.next()
n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel()
e.getLabel().merge(n)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next()
this.insertUniqueEdge(n)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0)
var e=new wt
this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Zi.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges()
var n=new Xe(this._geomFact)
n.add(this._graph),this._resultPolyList=n.getPolygons()
var i=new Yi(this,this._geomFact,this._ptLocator)
this._resultLineList=i.build(t)
var r=new Vi(this,this._geomFact,this._ptLocator)
this._resultPointList=r.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry())
t.getLabel().setLocation(e,n)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next()
this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var i=n.next(),r=i.getLabel()
r.isArea()&&!i.isInteriorAreaEdge()&&e.isResultOfOp(r.getLocation(0,Ce.RIGHT),r.getLocation(1,Ce.RIGHT),t)&&i.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),i=e.getDepth()
if(!i.isNull()){i.normalize()
for(var r=0;r<2;r++)n.isNull(r)||!n.isArea()||i.isNull(r)||(0===i.getDelta(r)?n.toLine(r):(et.isTrue(!i.isNull(r,Ce.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(r,Ce.LEFT,i.getLocation(r,Ce.LEFT)),et.isTrue(!i.isNull(r,Ce.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(r,Ce.RIGHT,i.getLocation(r,Ce.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg)
this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel()
e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Sr)
Tr.overlayOp=function(t,e,n){return new Tr(t,e).getResultGeometry(n)},Tr.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Tr.createEmptyResult(Tr.INTERSECTION,t,e,t.getFactory())
if(t.isGeometryCollection()){var n=e
return Xi.map(t,{interfaces_:function(){return[Cr.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),or.overlayOp(t,e,Tr.INTERSECTION)},Tr.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Tr.createEmptyResult(Tr.SYMDIFFERENCE,t,e,t.getFactory())
if(t.isEmpty())return e.copy()
if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),or.overlayOp(t,e,Tr.SYMDIFFERENCE)},Tr.resultDimension=function(t,e,n){var i=e.getDimension(),r=n.getDimension(),o=-1
switch(t){case Tr.INTERSECTION:o=Math.min(i,r)
break
case Tr.UNION:o=Math.max(i,r)
break
case Tr.DIFFERENCE:o=i
break
case Tr.SYMDIFFERENCE:o=Math.max(i,r)}return o},Tr.createEmptyResult=function(t,e,n,i){var r=null
switch(Tr.resultDimension(t,e,n)){case-1:r=i.createGeometryCollection(new Array(0).fill(null))
break
case 0:r=i.createPoint()
break
case 1:r=i.createLineString()
break
case 2:r=i.createPolygon()}return r},Tr.difference=function(t,e){return t.isEmpty()?Tr.createEmptyResult(Tr.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),or.overlayOp(t,e,Tr.DIFFERENCE))},Tr.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),i=t.getLocation(1)
return Tr.isResultOfOp(n,i,e)}if(3===arguments.length){var r=arguments[0],o=arguments[1]
switch(r===P.BOUNDARY&&(r=P.INTERIOR),o===P.BOUNDARY&&(o=P.INTERIOR),arguments[2]){case Tr.INTERSECTION:return r===P.INTERIOR&&o===P.INTERIOR
case Tr.UNION:return r===P.INTERIOR||o===P.INTERIOR
case Tr.DIFFERENCE:return r===P.INTERIOR&&o!==P.INTERIOR
case Tr.SYMDIFFERENCE:return r===P.INTERIOR&&o!==P.INTERIOR||r!==P.INTERIOR&&o===P.INTERIOR}return!1}},Tr.INTERSECTION=1,Tr.UNION=2,Tr.DIFFERENCE=3,Tr.SYMDIFFERENCE=4
var Ir=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Ci,this._seg=new gn
var t=arguments[0],e=arguments[1]
this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)}
Ir.prototype.isWithinToleranceOfBoundary=function(t){for(var e=0;e<this._linework.getNumGeometries();e++)for(var n=this._linework.getGeometryN(e).getCoordinateSequence(),i=0;i<n.size()-1;i++)if(n.getCoordinate(i,this._seg.p0),n.getCoordinate(i+1,this._seg.p1),this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0
return!1},Ir.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?P.BOUNDARY:this._ptLocator.locate(t,this._g)},Ir.prototype.extractLinework=function(t){var e=new Pr
t.apply(e)
var n=e.getLinework(),i=me.toLineStringArray(n)
return t.getFactory().createMultiLineString(i)},Ir.prototype.interfaces_=function(){return[]},Ir.prototype.getClass=function(){return Ir}
var Pr=function(){this._linework=null,this._linework=new wt}
Pr.prototype.getLinework=function(){return this._linework},Pr.prototype.filter=function(t){if(t instanceof Qt){var e=t
this._linework.add(e.getExteriorRing())
for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},Pr.prototype.interfaces_=function(){return[Gt]},Pr.prototype.getClass=function(){return Pr}
var Ar=function(){this._g=null,this._doLeft=!0,this._doRight=!0
var t=arguments[0]
this._g=t}
Ar.prototype.extractPoints=function(t,e,n){for(var i=t.getCoordinates(),r=0;r<i.length-1;r++)this.computeOffsetPoints(i[r],i[r+1],e,n)},Ar.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Ar.prototype.getPoints=function(t){for(var e=new wt,n=Si.getLines(this._g).iterator();n.hasNext();){var i=n.next()
this.extractPoints(i,t,e)}return e},Ar.prototype.computeOffsetPoints=function(t,e,n,i){var r=e.x-t.x,o=e.y-t.y,s=Math.sqrt(r*r+o*o),a=n*r/s,l=n*o/s,u=(e.x+t.x)/2,h=(e.y+t.y)/2
if(this._doLeft){var c=new S(u-l,h+a)
i.add(c)}if(this._doRight){var f=new S(u+l,h-a)
i.add(f)}},Ar.prototype.interfaces_=function(){return[]},Ar.prototype.getClass=function(){return Ar}
var Rr=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new wt
var e=arguments[0],n=arguments[1],i=arguments[2]
this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,i],this._locFinder=[new Ir(this._geom[0],this._boundaryDistanceTolerance),new Ir(this._geom[1],this._boundaryDistanceTolerance),new Ir(this._geom[2],this._boundaryDistanceTolerance)]},Lr={TOLERANCE:{configurable:!0}}
Rr.prototype.reportResult=function(t,e,n){Z.out.println("Overlay result invalid - A:"+P.toLocationSymbol(e[0])+" B:"+P.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+P.toLocationSymbol(e[2]))},Rr.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},Rr.prototype.checkValid=function(){if(1===arguments.length){for(var t=arguments[0],e=0;e<this._testCoords.size();e++){var n=this._testCoords.get(e)
if(!this.checkValid(t,n))return this._invalidLocation=n,!1}return!0}if(2===arguments.length){var i=arguments[0],r=arguments[1]
return this._location[0]=this._locFinder[0].getLocation(r),this._location[1]=this._locFinder[1].getLocation(r),this._location[2]=this._locFinder[2].getLocation(r),!!Rr.hasLocation(this._location,P.BOUNDARY)||this.isValidResult(i,this._location)}},Rr.prototype.addTestPts=function(t){var e=new Ar(t)
this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Rr.prototype.isValidResult=function(t,e){var n=Tr.isResultOfOp(e[0],e[1],t),i=!(n^e[2]===P.INTERIOR)
return i||this.reportResult(t,e,n),i},Rr.prototype.getInvalidLocation=function(){return this._invalidLocation},Rr.prototype.interfaces_=function(){return[]},Rr.prototype.getClass=function(){return Rr},Rr.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0
return!1},Rr.computeBoundaryDistanceTolerance=function(t,e){return Math.min($i.computeSizeBasedSnapTolerance(t),$i.computeSizeBasedSnapTolerance(e))},Rr.isValid=function(t,e,n,i){return new Rr(t,e,i).isValid(n)},Lr.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Rr,Lr)
var Mr=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e}
Mr.prototype.extractElements=function(t,e){if(null===t)return null
for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n)
this._skipEmpty&&i.isEmpty()||e.add(i)}},Mr.prototype.combine=function(){for(var t=new wt,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next()
this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Mr.prototype.interfaces_=function(){return[]},Mr.prototype.getClass=function(){return Mr},Mr.combine=function(){return 1===arguments.length?new Mr(arguments[0]).combine():2===arguments.length?new Mr(Mr.createList(arguments[0],arguments[1])).combine():3===arguments.length?new Mr(Mr.createList(arguments[0],arguments[1],arguments[2])).combine():void 0},Mr.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Mr.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new wt
return n.add(t),n.add(e),n}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],s=new wt
return s.add(i),s.add(r),s.add(o),s}}
var Or=function(){this._inputPolys=null,this._geomFactory=null
var t=arguments[0]
this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new wt)},Nr={STRTREE_NODE_CAPACITY:{configurable:!0}}
Or.prototype.reduceToGeometries=function(t){for(var e=new wt,n=t.iterator();n.hasNext();){var i=n.next(),r=null
R(i,Et)?r=this.unionTree(i):i instanceof ht&&(r=i),e.add(r)}return e},Or.prototype.extractByEnvelope=function(t,e,n){for(var i=new wt,r=0;r<e.getNumGeometries();r++){var o=e.getGeometryN(r)
o.getEnvelopeInternal().intersects(t)?i.add(o):n.add(o)}return this._geomFactory.buildGeometry(i)},Or.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),i=e.getEnvelopeInternal()
if(!n.intersects(i))return Mr.combine(t,e)
if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e)
var r=n.intersection(i)
return this.unionUsingEnvelopeIntersection(t,e,r)},Or.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice")
if(this._inputPolys.isEmpty())return null
this._geomFactory=this._inputPolys.iterator().next().getFactory()
for(var t=new sn(Or.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next()
t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null
var i=t.itemsTree()
return this.unionTree(i)},Or.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0]
return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2]
if(i-n<=1){var r=Or.getGeometry(e,n)
return this.unionSafe(r,null)}if(i-n==2)return this.unionSafe(Or.getGeometry(e,n),Or.getGeometry(e,n+1))
var o=Math.trunc((i+n)/2),s=this.binaryUnion(e,n,o),a=this.binaryUnion(e,o,i)
return this.unionSafe(s,a)}},Or.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var i=n.next()
e=null===e?i.copy():e.union(i)}return e},Or.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},Or.prototype.unionActual=function(t,e){return Or.restrictToPolygons(t.union(e))},Or.prototype.unionTree=function(t){var e=this.reduceToGeometries(t)
return this.binaryUnion(e)},Or.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var i=new wt,r=this.extractByEnvelope(n,t,i),o=this.extractByEnvelope(n,e,i),s=this.unionActual(r,o)
return i.add(s),Mr.combine(i)},Or.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0]
return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],n=arguments[1]
return e.getFactory().createGeometryCollection([e,n]).buffer(0)}},Or.prototype.interfaces_=function(){return[]},Or.prototype.getClass=function(){return Or},Or.restrictToPolygons=function(t){if(R(t,Jt))return t
var e=wi.getPolygons(t)
return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(me.toPolygonArray(e))},Or.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Or.union=function(t){return new Or(t).union()},Nr.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Or,Nr)
var Dr=function(){}
Dr.prototype.interfaces_=function(){return[]},Dr.prototype.getClass=function(){return Dr},Dr.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Tr.createEmptyResult(Tr.UNION,t,e,t.getFactory())
if(t.isEmpty())return e.copy()
if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),or.overlayOp(t,e,Tr.UNION)},t.GeoJSONReader=we,t.GeoJSONWriter=Se,t.OverlayOp=Tr,t.UnionOp=Dr,t.BufferOp=gi,Object.defineProperty(t,"__esModule",{value:!0})}(e)},9889:t=>{function e(t,e){const n=new RegExp(e,"g"),i=t.match(n)
return i?i.length:0}t.exports=e,t.exports.default=e},5950:(t,e,n)=>{const i=n(4852),r=n(1744),o=n(9889)
function s(t,e,n){const s=n&&n.debug||!1,a=!(n&&!1===typeof n.nested),l=n&&n.startIndex||0
s&&console.log("[xml-utils] starting findTagByName with",e," and ",n)
const u=i(t,`<${e}[ \n>/]`,l)
if(s&&console.log("[xml-utils] start:",u),-1===u)return
const h=t.slice(u+e.length)
let c=r(h,"^[^<]*[ /]>",0)
const f=-1!==c&&"/"===h[c-1]
if(s&&console.log("[xml-utils] selfClosing:",f),!1===f)if(a){let t=0,n=1,i=0
for(;-1!==(c=r(h,"[ /]"+e+">",t));){const r=h.substring(t,c+1)
if(n+=o(r,"<"+e+"[ \n\t>]"),i+=o(r,"</"+e+">"),i>=n)break
t=c}}else c=r(h,"[ /]"+e+">",0)
const p=u+e.length+c+1
if(s&&console.log("[xml-utils] end:",p),-1===p)return
const d=t.slice(u,p)
let g
return g=f?null:d.slice(d.indexOf(">")+1,d.lastIndexOf("<")),{inner:g,outer:d,start:u,end:p}}t.exports=s,t.exports.default=s},3197:(t,e,n)=>{const i=n(5950)
function r(t,e,n){const r=[],o=n&&n.debug||!1,s=!n||"boolean"!=typeof n.nested||n.nested
let a,l=n&&n.startIndex||0
for(;a=i(t,e,{debug:o,startIndex:l});)l=s?a.start+1+e.length:a.end,r.push(a)
return o&&console.log("findTagsByName found",r.length,"tags"),r}t.exports=r,t.exports.default=r},5633:t=>{function e(t,e,n){const i=n&&n.debug||!1
i&&console.log("[xml-utils] getting "+e+" in "+t)
const r="object"==typeof t?t.outer:t,o=r.slice(0,r.indexOf(">")+1),s=['"',"'"]
for(let a=0;a<s.length;a++){const t=s[a],n=e+"\\="+t+"([^"+t+"]*)"+t
i&&console.log("[xml-utils] pattern:",n)
const r=new RegExp(n).exec(o)
if(i&&console.log("[xml-utils] match:",r),r)return r[1]}}t.exports=e,t.exports.default=e},1744:t=>{function e(t,e,n){const i=new RegExp(e).exec(t.slice(n))
return i?n+i.index+i[0].length-1:-1}t.exports=e,t.exports.default=e},4852:t=>{function e(t,e,n){const i=new RegExp(e).exec(t.slice(n))
return i?n+i.index:-1}t.exports=e,t.exports.default=e},7242:(t,e,n)=>{"use strict"
n.d(e,{$:()=>i,AC:()=>u,Hm:()=>f,NZ:()=>o,S3:()=>c,TZ:()=>h,s$:()=>a,ub:()=>l})
const i={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},r={}
for(const d in i)i.hasOwnProperty(d)&&(r[i[d]]=parseInt(d,10))
const o=[r.BitsPerSample,r.ExtraSamples,r.SampleFormat,r.StripByteCounts,r.StripOffsets,r.StripRowCounts,r.TileByteCounts,r.TileOffsets,r.SubIFDs],s={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},a={}
for(const d in s)s.hasOwnProperty(d)&&(a[s[d]]=parseInt(d,10))
const l={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,TransparencyMask:4,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9},u={Unspecified:0,Assocalpha:1,Unassalpha:2},h={Version:0,AddCompression:1},c={None:0,Deflate:1,Zstandard:2},f={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"},p={}
for(const d in f)f.hasOwnProperty(d)&&(p[f[d]]=parseInt(d,10))},3844:(t,e,n)=>{"use strict"
n.d(e,{A:()=>u})
var i=n(1051),r=n(1678),o=n(406)
const s="length"
class a extends o.Ay{constructor(t,e,n){super(t),this.element=e,this.index=n}}class l extends i.A{constructor(t,e){if(super(),this.on,this.once,this.un,e=e||{},this.unique_=!!e.unique,this.array_=t||[],this.unique_)for(let n=0,i=this.array_.length;n<i;++n)this.assertUnique_(this.array_[n],n)
this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let e=0,n=t.length;e<n;++e)this.push(t[e])
return this}forEach(t){const e=this.array_
for(let n=0,i=e.length;n<i;++n)t(e[n],n,e)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(s)}insertAt(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t)
this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new a(r.A.ADD,e,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t)
const e=this.getLength()
return this.insertAt(e,t),this.getLength()}remove(t){const e=this.array_
for(let n=0,i=e.length;n<i;++n)if(e[n]===t)return this.removeAt(n)}removeAt(t){if(t<0||t>=this.getLength())return
const e=this.array_[t]
return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new a(r.A.REMOVE,e,t)),e}setAt(t,e){if(t>=this.getLength())return void this.insertAt(t,e)
if(t<0)throw new Error("Index out of bounds: "+t)
this.unique_&&this.assertUnique_(e,t)
const n=this.array_[t]
this.array_[t]=e,this.dispatchEvent(new a(r.A.REMOVE,n,t)),this.dispatchEvent(new a(r.A.ADD,e,t))}updateLength_(){this.set(s,this.array_.length)}assertUnique_(t,e){for(let n=0,i=this.array_.length;n<i;++n)if(this.array_[n]===t&&n!==e)throw new Error("Duplicate item added to a unique collection")}}const u=l},1678:(t,e,n)=>{"use strict"
n.d(e,{A:()=>i})
const i={ADD:"add",REMOVE:"remove"}},2272:(t,e,n)=>{"use strict"
n.d(e,{$r:()=>u,Ay:()=>f,bL:()=>a,xo:()=>s})
var i=n(7912),r=n(699),o=n(8454)
function s(t){return t instanceof Image||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageBitmap?t:null}function a(t){return t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Float32Array||t instanceof DataView?t:null}let l=null
function u(t){l||(l=(0,o.Y)(t.width,t.height,void 0,{willReadFrequently:!0}))
const e=l.canvas,n=t.width
e.width!==n&&(e.width=n)
const i=t.height
return e.height!==i&&(e.height=i),l.clearRect(0,0,n,i),l.drawImage(t,0,0),l.getImageData(0,0,n,i).data}const h=[256,256]
class c extends i.A{constructor(t){const e=r.A.IDLE
super(t.tileCoord,e,{transition:t.transition,interpolate:t.interpolate}),this.loader_=t.loader,this.data_=null,this.error_=null,this.size_=t.size||null}getSize(){if(this.size_)return this.size_
const t=s(this.data_)
return t?[t.width,t.height]:h}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==r.A.IDLE&&this.state!==r.A.ERROR)return
this.state=r.A.LOADING,this.changed()
const t=this
this.loader_().then((function(e){t.data_=e,t.state=r.A.LOADED,t.changed()})).catch((function(e){t.error_=e,t.state=r.A.ERROR,t.changed()}))}}const f=c},8646:(t,e,n)=>{"use strict"
n.d(e,{A:()=>i})
const i=class{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}},9656:(t,e,n)=>{"use strict"
n.d(e,{A:()=>l})
var i=n(1051),r=n(8638),o=n(6249),s=n(4757)
class a extends i.A{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if("function"==typeof t.getSimplifiedGeometry){const e=t
this.setGeometry(e)}else{const e=t
this.setProperties(e)}}clone(){const t=new a(this.hasProperties()?this.getProperties():null)
t.setGeometryName(this.getGeometryName())
const e=this.getGeometry()
e&&t.setGeometry(e.clone())
const n=this.getStyle()
return n&&t.setStyle(n),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&((0,s.JH)(this.geometryChangeKey_),this.geometryChangeKey_=null)
const t=this.getGeometry()
t&&(this.geometryChangeKey_=(0,s.KT)(t,r.A.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?function(t){if("function"==typeof t)return t
let e
return Array.isArray(t)?e=t:((0,o.v)("function"==typeof t.getZIndex,"Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[t]),function(){return e}}(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}const l=a},5643:(t,e,n)=>{"use strict"
n.d(e,{Ay:()=>p,D4:()=>f,RA:()=>c,f6:()=>h})
var i=n(669),r=n(8638),o=n(1410),s=n(1622),a=n(4757),l=n(419)
class u extends i.A{constructor(t,e,n,i){super(),this.extent=t,this.pixelRatio_=n,this.resolution=e,this.state="function"==typeof i?o.A.IDLE:i,this.image_=null,this.loader="function"==typeof i?i:null}changed(){this.dispatchEvent(r.A.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==o.A.IDLE&&this.loader){this.state=o.A.LOADING,this.changed()
const t=this.getResolution(),e=Array.isArray(t)?t[0]:t;(0,l.hq)((()=>this.loader(this.getExtent(),e,this.getPixelRatio()))).then((t=>{"image"in t&&(this.image_=t.image),"extent"in t&&(this.extent=t.extent),"resolution"in t&&(this.resolution=t.resolution),"pixelRatio"in t&&(this.pixelRatio_=t.pixelRatio),(t instanceof HTMLImageElement||t instanceof ImageBitmap||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement)&&(this.image_=t),this.state=o.A.LOADED})).catch((t=>{this.state=o.A.ERROR,console.error(t)})).finally((()=>this.changed()))}}setImage(t){this.image_=t}setResolution(t){this.resolution=t}}function h(t,e,n){const i=t
let o=!0,l=!1,u=!1
const h=[(0,a.Jz)(i,r.A.LOAD,(function(){u=!0,l||e()}))]
return i.src&&s.DT?(l=!0,i.decode().then((function(){o&&e()})).catch((function(t){o&&(u?e():n())}))):h.push((0,a.Jz)(i,r.A.ERROR,n)),function(){o=!1,h.forEach(a.JH)}}function c(t,e){return e&&(t.src=e),t.src&&s.DT?new Promise(((e,n)=>t.decode().then((()=>e(t))).catch((i=>t.complete&&t.width?e(t):n(i))))):function(t,e){return new Promise(((e,n)=>{function i(){o(),e(t)}function r(){o(),n(new Error("Image load error"))}function o(){t.removeEventListener("load",i),t.removeEventListener("error",r)}t.addEventListener("load",i),t.addEventListener("error",r)}))}(t)}function f(t,e){return e&&(t.src=e),t.src&&s.DT&&s.XM?t.decode().then((()=>createImageBitmap(t))).catch((e=>{if(t.complete&&t.width)return t
throw e})):c(t)}const p=u},4943:(t,e,n)=>{"use strict"
n.d(e,{A:()=>s})
var i=n(1410),r=n(5643)
class o extends r.Ay{constructor(t,e,n,r,o){super(t,e,n,void 0!==o?i.A.IDLE:i.A.LOADED),this.loader_=void 0!==o?o:null,this.canvas_=r,this.error_=null}getError(){return this.error_}handleLoad_(t){t?(this.error_=t,this.state=i.A.ERROR):this.state=i.A.LOADED,this.changed()}load(){this.state==i.A.IDLE&&(this.state=i.A.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}const s=o},1410:(t,e,n)=>{"use strict"
n.d(e,{A:()=>i})
const i={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},519:(t,e,n)=>{"use strict"
n.d(e,{A:()=>l})
var i=n(7912),r=n(699),o=n(8454),s=n(5643)
class a extends i.A{constructor(t,e,n,i,r,o){super(t,e,o),this.crossOrigin_=i,this.src_=n,this.key=n,this.image_=new Image,null!==i&&(this.image_.crossOrigin=i),this.unlisten_=null,this.tileLoadFunction_=r}getImage(){return this.image_}setImage(t){this.image_=t,this.state=r.A.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=r.A.ERROR,this.unlistenImage_(),this.image_=function(){const t=(0,o.Y)(1,1)
return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}(),this.changed()}handleImageLoad_(){const t=this.image_
t.naturalWidth&&t.naturalHeight?this.state=r.A.LOADED:this.state=r.A.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==r.A.ERROR&&(this.state=r.A.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==r.A.IDLE&&(this.state=r.A.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=(0,s.f6)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}const l=a},3041:(t,e,n)=>{"use strict"
n.r(e),n.d(e,{default:()=>Zt})
var i=n(1051),r=n(3844),o=n(1678),s=n(6789),a=n(8646),l=n(419),u=n(1736),h=n(2282),c=n(3236),f=n(8166),p=n(1257),d=n(8474)
class g extends a.A{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,e){(0,u.b0)()}calculateMatrices2D(t){const e=t.viewState,n=t.coordinateToPixelTransform,i=t.pixelToCoordinateTransform;(0,h.Zz)(n,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),(0,h.T9)(i,n)}forEachFeatureAtCoordinate(t,e,n,i,r,o,s,a){let l
const u=e.viewState
function h(t,e,n,i){return r.call(o,e,t?n:null,i)}const f=u.projection,g=(0,d.Li)(t.slice(),f),_=[[0,0]]
if(f.canWrapX()&&i){const t=f.getExtent(),e=(0,c.RG)(t)
_.push([-e,0],[e,0])}const m=e.layerStatesArray,y=m.length,v=[],x=[]
for(let c=0;c<_.length;c++)for(let i=y-1;i>=0;--i){const r=m[i],o=r.layer
if(o.hasRenderer()&&(0,p.l)(r,u)&&s.call(a,o)){const i=o.getRenderer(),s=o.getSource()
if(i&&s){const o=s.getWrapX()?g:t,a=h.bind(null,r.managed)
x[0]=o[0]+_[c][0],x[1]=o[1]+_[c][1],l=i.forEachFeatureAtCoordinate(x,e,n,a,v)}if(l)return l}}if(0===v.length)return
const b=1/v.length
return v.forEach(((t,e)=>t.distanceSq+=e*b)),v.sort(((t,e)=>t.distanceSq-e.distanceSq)),v.some((t=>l=t.callback(t.feature,t.layer,t.geometry))),l}hasFeatureAtCoordinate(t,e,n,i,r,o){return void 0!==this.forEachFeatureAtCoordinate(t,e,n,i,l.rT,this,r,o)}getMap(){return this.map_}renderFrame(t){(0,u.b0)()}scheduleExpireIconCache(t){f.ue.canExpireCache()&&t.postRenderFunctions.push(_)}}function _(t,e){f.ue.expire()}const m=g
var y=n(7067),v=n(7683),x=n(8411),b=n(8877),E=n(223),w=n(4757),S=n(8454)
const C=class extends m{constructor(t){super(t),this.fontChangeListenerKey_=(0,w.KT)(E.yY,y.A.PROPERTYCHANGE,t.redrawText.bind(t)),this.element_=document.createElement("div")
const e=this.element_.style
e.position="absolute",e.width="100%",e.height="100%",e.zIndex="0",this.element_.className=b.XI+" ol-layers"
const n=t.getViewport()
n.insertBefore(this.element_,n.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(t,e){const n=this.getMap()
if(n.hasListener(t)){const i=new v.A(t,void 0,e)
n.dispatchEvent(i)}}disposeInternal(){(0,w.JH)(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(t){if(!t)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1))
this.calculateMatrices2D(t),this.dispatchRenderEvent(x.A.PRECOMPOSE,t)
const e=t.layerStatesArray.sort((function(t,e){return t.zIndex-e.zIndex}))
e.some((t=>t.layer instanceof s.A&&t.layer.getDeclutter()))&&(t.declutter={})
const n=t.viewState
this.children_.length=0
const i=[]
let r=null
for(let o=0,s=e.length;o<s;++o){const s=e[o]
t.layerIndex=o
const a=s.layer,l=a.getSourceState()
if(!(0,p.l)(s,n)||"ready"!=l&&"undefined"!=l){a.unrender()
continue}const u=a.render(t,r)
u&&(u!==r&&(this.children_.push(u),r=u),i.push(s))}this.declutter(t,i),(0,S.WM)(this.element_,this.children_),this.dispatchRenderEvent(x.A.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}declutter(t,e){for(let n=e.length-1;n>=0;--n){const i=e[n],r=i.layer
r.getDeclutter()&&r.renderDeclutter(t,i)}e.forEach((e=>e.layer.renderDeferred(t)))}}
var T=n(8638),I=n(1971),P=n(406)
class A extends P.Ay{constructor(t,e,n){super(t),this.map=e,this.frameState=void 0!==n?n:null}}const R=A,L=class extends R{constructor(t,e,n,i,r,o){super(t,e,r),this.originalEvent=n,this.pixel_=null,this.coordinate_=null,this.dragging=void 0!==i&&i,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}},M={SINGLECLICK:"singleclick",CLICK:T.A.CLICK,DBLCLICK:T.A.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},O="pointerdown"
var N=n(669),D=n(1622)
class F extends N.A{constructor(t,e){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=void 0===e?1:e,this.down_=null
const n=this.map_.getViewport()
this.activePointers_=[],this.trackedTouches_={},this.element_=n,this.pointerdownListenerKey_=(0,w.KT)(n,O,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=(0,w.KT)(n,"pointermove",this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(T.A.TOUCHMOVE,this.boundHandleTouchMove_,!!D.FT&&{passive:!1})}emulateClick_(t){let e=new L(M.CLICK,this.map_,t)
this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new L(M.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout((()=>{this.clickTimeoutId_=void 0
const e=new L(M.SINGLECLICK,this.map_,t)
this.dispatchEvent(e)}),250)}updateActivePointers_(t){const e=t,n=e.pointerId
if(e.type==M.POINTERUP||e.type==M.POINTERCANCEL){delete this.trackedTouches_[n]
for(const t in this.trackedTouches_)if(this.trackedTouches_[t].target!==e.target){delete this.trackedTouches_[t]
break}}else e.type!=M.POINTERDOWN&&e.type!=M.POINTERMOVE||(this.trackedTouches_[n]=e)
this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t)
const e=new L(M.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_)
this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(w.JH),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return 0===t.button}handlePointerDown_(t){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(t)
const e=new L(M.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_)
if(this.dispatchEvent(e),this.down_=new PointerEvent(t.type,t),Object.defineProperty(this.down_,"target",{writable:!1,value:t.target}),0===this.dragListenerKeys_.length){const t=this.map_.getOwnerDocument()
this.dragListenerKeys_.push((0,w.KT)(t,M.POINTERMOVE,this.handlePointerMove_,this),(0,w.KT)(t,M.POINTERUP,this.handlePointerUp_,this),(0,w.KT)(this.element_,M.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==t&&this.dragListenerKeys_.push((0,w.KT)(this.element_.getRootNode(),M.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0
const e=new L(M.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_)
this.dispatchEvent(e)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t
const e=!(!this.down_||!this.isMoving_(t))
this.dispatchEvent(new L(M.POINTERMOVE,this.map_,t,e))}handleTouchMove_(t){const e=this.originalPointerMoveEvent_
e&&!e.defaultPrevented||"boolean"==typeof t.cancelable&&!0!==t.cancelable||t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&((0,w.JH)(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(T.A.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&((0,w.JH)(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(w.JH),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const k=F,j="postrender",z="loadstart",G="loadend",B="layergroup",q="size",U="target",Z="view"
var X=n(1358),Y=n(5714),V=n(5548),W=n(6249)
class H extends i.A{constructor(t){super()
const e=t.element
!e||t.target||e.style.pointerEvents||(e.style.pointerEvents="auto"),this.element=e||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){(0,S.bf)(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&&(0,S.bf)(this.element)
for(let e=0,n=this.listenerKeys.length;e<n;++e)(0,w.JH)(this.listenerKeys[e])
this.listenerKeys.length=0,this.map_=t,t&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==l.tV&&this.listenerKeys.push((0,w.KT)(t,j,this.render,this)),t.render())}render(t){}setTarget(t){this.target_="string"==typeof t?document.getElementById(t):t}}const $=H
var K=n(7195)
const J=class extends ${constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===t.collapsed||t.collapsed,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=void 0!==t.collapsible,this.collapsible_=void 0===t.collapsible||t.collapsible,this.collapsible_||(this.collapsed_=!1)
const e=void 0!==t.className?t.className:"ol-attribution",n=void 0!==t.tipLabel?t.tipLabel:"Attributions",i=void 0!==t.expandClassName?t.expandClassName:e+"-expand",r=void 0!==t.collapseLabel?t.collapseLabel:"",o=void 0!==t.collapseClassName?t.collapseClassName:e+"-collapse"
"string"==typeof r?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=r,this.collapseLabel_.className=o):this.collapseLabel_=r
const s=void 0!==t.label?t.label:"i"
"string"==typeof s?(this.label_=document.createElement("span"),this.label_.textContent=s,this.label_.className=i):this.label_=s
const a=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_
this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=n,this.toggleButton_.appendChild(a),this.toggleButton_.addEventListener(T.A.CLICK,this.handleClick_.bind(this),!1)
const l=e+" "+b.XI+" "+b.$N+(this.collapsed_&&this.collapsible_?" "+b.nT:"")+(this.collapsible_?"":" ol-uncollapsible"),u=this.element
u.className=l,u.appendChild(this.toggleButton_),u.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const e=Array.from(new Set(this.getMap().getAllLayers().flatMap((e=>e.getAttributions(t))))),n=!this.getMap().getAllLayers().some((t=>t.getSource()&&!1===t.getSource().getAttributionsCollapsible()))
return this.overrideCollapsible_||this.setCollapsible(n),e}async updateElement_(t){if(!t)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1))
const e=await Promise.all(this.collectSourceAttributions_(t).map((t=>(0,l.hq)((()=>t))))),n=e.length>0
if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!(0,K.aI)(e,this.renderedAttributions_)){(0,S.gS)(this.ulElement_)
for(let t=0,n=e.length;t<n;++t){const n=document.createElement("li")
n.innerHTML=e[t],this.ulElement_.appendChild(n)}this.renderedAttributions_=e}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(b.nT),this.collapsed_?(0,S.fo)(this.collapseLabel_,this.label_):(0,S.fo)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}}
var Q=n(7849)
const tt=class extends ${constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target})
const e=void 0!==t.className?t.className:"ol-rotate",n=void 0!==t.label?t.label:"",i=void 0!==t.compassClassName?t.compassClassName:"ol-compass"
this.label_=null,"string"==typeof n?(this.label_=document.createElement("span"),this.label_.className=i,this.label_.textContent=n):(this.label_=n,this.label_.classList.add(i))
const r=t.tipLabel?t.tipLabel:"Reset rotation",o=document.createElement("button")
o.className=e+"-reset",o.setAttribute("type","button"),o.title=r,o.appendChild(this.label_),o.addEventListener(T.A.CLICK,this.handleClick_.bind(this),!1)
const s=e+" "+b.XI+" "+b.$N,a=this.element
a.className=s,a.appendChild(o),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=void 0!==t.duration?t.duration:250,this.autoHide_=void 0===t.autoHide||t.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(b.Si)}handleClick_(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView()
if(!t)return
const e=t.getRotation()
void 0!==e&&(this.duration_>0&&e%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:Q.vT}):t.setRotation(0))}render(t){const e=t.frameState
if(!e)return
const n=e.viewState.rotation
if(n!=this.rotation_){const t="rotate("+n+"rad)"
if(this.autoHide_){const t=this.element.classList.contains(b.Si)
t||0!==n?t&&0!==n&&this.element.classList.remove(b.Si):this.element.classList.add(b.Si)}this.label_.style.transform=t}this.rotation_=n}},et=class extends ${constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target})
const e=void 0!==t.className?t.className:"ol-zoom",n=void 0!==t.delta?t.delta:1,i=void 0!==t.zoomInClassName?t.zoomInClassName:e+"-in",r=void 0!==t.zoomOutClassName?t.zoomOutClassName:e+"-out",o=void 0!==t.zoomInLabel?t.zoomInLabel:"+",s=void 0!==t.zoomOutLabel?t.zoomOutLabel:"",a=void 0!==t.zoomInTipLabel?t.zoomInTipLabel:"Zoom in",l=void 0!==t.zoomOutTipLabel?t.zoomOutTipLabel:"Zoom out",u=document.createElement("button")
u.className=i,u.setAttribute("type","button"),u.title=a,u.appendChild("string"==typeof o?document.createTextNode(o):o),u.addEventListener(T.A.CLICK,this.handleClick_.bind(this,n),!1)
const h=document.createElement("button")
h.className=r,h.setAttribute("type","button"),h.title=l,h.appendChild("string"==typeof s?document.createTextNode(s):s),h.addEventListener(T.A.CLICK,this.handleClick_.bind(this,-n),!1)
const c=e+" "+b.XI+" "+b.$N,f=this.element
f.className=c,f.appendChild(u),f.appendChild(h),this.duration_=void 0!==t.duration?t.duration:250}handleClick_(t,e){e.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const e=this.getMap().getView()
if(!e)return
const n=e.getZoom()
if(void 0!==n){const i=e.getConstrainedZoom(n+t)
this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:i,duration:this.duration_,easing:Q.vT})):e.setZoom(i)}}},nt="active"
class it extends i.A{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(nt)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(nt,t)}setMap(t){this.map_=t}}function rt(t,e,n,i){const r=t.getZoom()
if(void 0===r)return
const o=t.getConstrainedZoom(r+e),s=t.getResolutionForZoom(o)
t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:s,anchor:n,duration:void 0!==i?i:250,easing:Q.vT})}const ot=it,st=class extends ot{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:250}handleEvent(t){let e=!1
if(t.type==M.DBLCLICK){const n=t.originalEvent,i=t.map,r=t.coordinate,o=n.shiftKey?-this.delta_:this.delta_
rt(i.getView(),o,r,this.duration_),n.preventDefault(),e=!0}return!e}}
function at(t){const e=t.length
let n=0,i=0
for(let r=0;r<e;r++)n+=t[r].clientX,i+=t[r].clientY
return{clientX:n/e,clientY:i/e}}const lt=class extends ot{constructor(t){super(t=t||{}),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0
let e=!1
if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==M.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault()
else if(t.type==M.POINTERUP){const e=this.handleUpEvent(t)
this.handlingDownUpSequence=e&&this.targetPointers.length>0}}else if(t.type==M.POINTERDOWN){const n=this.handleDownEvent(t)
this.handlingDownUpSequence=n,e=this.stopDown(n)}else t.type==M.POINTERMOVE&&this.handleMoveEvent(t)
return!e}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}}
function ut(t){const e=arguments
return function(t){let n=!0
for(let i=0,r=e.length;i<r&&(n=n&&e[i](t),n);++i);return n}}const ht=function(t){const e=t.originalEvent
return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},ct=function(t){return!t.map.getTargetElement().hasAttribute("tabindex")||function(t){const e=t.map.getTargetElement(),n=t.map.getOwnerDocument().activeElement
return e.contains(n)}(t)},ft=l.rT,pt=function(t){const e=t.originalEvent
return 0==e.button&&!(D.j&&D.ew&&e.ctrlKey)},dt=function(t){const e=t.originalEvent
return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},gt=function(t){const e=t.originalEvent
return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},_t=function(t){const e=t.originalEvent,n=e.target.tagName
return"INPUT"!==n&&"SELECT"!==n&&"TEXTAREA"!==n&&!e.target.isContentEditable},mt=function(t){const e=t.originalEvent
return(0,W.v)(void 0!==e,"mapBrowserEvent must originate from a pointer event"),"mouse"==e.pointerType},yt=function(t){const e=t.originalEvent
return(0,W.v)(void 0!==e,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&0===e.button},vt=class extends lt{constructor(t){super({stopDown:l.W8}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1
const e=t.condition?t.condition:ut(dt,yt)
this.condition_=t.onFocusOnly?ut(ct,e):e,this.noKinetic_=!1}handleDragEvent(t){const e=t.map
this.panning_||(this.panning_=!0,e.getView().beginInteraction())
const n=this.targetPointers,i=e.getEventPixel(at(n))
if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){const e=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],n=t.map.getView();(0,d.hs)(e,n.getResolution()),(0,d.e$)(e,n.getRotation()),n.adjustCenterInternal(e)}}else this.kinetic_&&this.kinetic_.begin()
this.lastCentroid=i,this.lastPointersCount_=n.length,t.originalEvent.preventDefault()}handleUpEvent(t){const e=t.map,n=e.getView()
if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const t=this.kinetic_.getDistance(),i=this.kinetic_.getAngle(),r=n.getCenterInternal(),o=e.getPixelFromCoordinateInternal(r),s=e.getCoordinateFromPixelInternal([o[0]-t*Math.cos(i),o[1]-t*Math.sin(i)])
n.animateInternal({center:n.getConstrainedCenter(s),duration:500,easing:Q.vT})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const e=t.map.getView()
return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}
var xt=n(3513)
const bt=class extends lt{constructor(t){t=t||{},super({stopDown:l.W8}),this.condition_=t.condition?t.condition:ht,this.lastAngle_=void 0,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(t){if(!mt(t))return
const e=t.map,n=e.getView()
if(n.getConstraints().rotation===xt.b8)return
const i=e.getSize(),r=t.pixel,o=Math.atan2(i[1]/2-r[1],r[0]-i[0]/2)
if(void 0!==this.lastAngle_){const t=o-this.lastAngle_
n.adjustRotationInternal(-t)}this.lastAngle_=o}handleUpEvent(t){return!mt(t)||(t.map.getView().endInteraction(this.duration_),!1)}handleDownEvent(t){return!(!mt(t)||!pt(t)||!this.condition_(t)||(t.map.getView().beginInteraction(),this.lastAngle_=void 0,0))}}
var Et=n(5631)
class wt extends a.A{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,e=this.endPixel_,n="px",i=this.element_.style
i.left=Math.min(t[0],e[0])+n,i.top=Math.min(t[1],e[1])+n,i.width=Math.abs(e[0]-t[0])+n,i.height=Math.abs(e[1]-t[1])+n}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_)
const t=this.element_.style
t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const t=this.startPixel_,e=this.endPixel_,n=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_)
n[4]=n[0].slice(),this.geometry_?this.geometry_.setCoordinates([n]):this.geometry_=new Et.Ay([n])}getGeometry(){return this.geometry_}}const St=wt
class Ct extends P.Ay{constructor(t,e,n){super(t),this.coordinate=e,this.mapBrowserEvent=n}}const Tt=class extends lt{constructor(t){super(),this.on,this.once,this.un,t=t||{},this.box_=new St(t.className||"ol-dragbox"),this.minArea_=void 0!==t.minArea?t.minArea:64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition?t.condition:pt,this.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(t,e,n){const i=n[0]-e[0],r=n[1]-e[1]
return i*i+r*r>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Ct("boxdrag",t.coordinate,t))}handleUpEvent(t){this.box_.setMap(null)
const e=this.boxEndCondition_(t,this.startPixel_,t.pixel)
return e&&this.onBoxEnd(t),this.dispatchEvent(new Ct(e?"boxend":"boxcancel",t.coordinate,t)),!1}handleDownEvent(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Ct("boxstart",t.coordinate,t)),!0)}onBoxEnd(t){}},It=class extends Tt{constructor(t){super({condition:(t=t||{}).condition?t.condition:gt,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=void 0!==t.duration?t.duration:200,this.out_=void 0!==t.out&&t.out}onBoxEnd(t){const e=this.getMap().getView()
let n=this.getGeometry()
if(this.out_){const t=e.rotatedExtentForGeometry(n),i=e.getResolutionForExtentInternal(t),r=e.getResolution()/i
n=n.clone(),n.scale(r*r)}e.fitInternal(n,{duration:this.duration_,easing:Q.vT})}},Pt="ArrowLeft",At="ArrowRight",Rt="ArrowDown",Lt=class extends ot{constructor(t){super(),t=t||{},this.defaultCondition_=function(t){return dt(t)&&_t(t)},this.condition_=void 0!==t.condition?t.condition:this.defaultCondition_,this.duration_=void 0!==t.duration?t.duration:100,this.pixelDelta_=void 0!==t.pixelDelta?t.pixelDelta:128}handleEvent(t){let e=!1
if(t.type==T.A.KEYDOWN){const n=t.originalEvent,i=n.key
if(this.condition_(t)&&(i==Rt||i==Pt||i==At||"ArrowUp"==i)){const r=t.map.getView(),o=r.getResolution()*this.pixelDelta_
let s=0,a=0
i==Rt?a=-o:i==Pt?s=-o:i==At?s=o:a=o
const l=[s,a];(0,d.e$)(l,r.getRotation()),function(t,e,n){const i=t.getCenterInternal()
if(i){const r=[i[0]+e[0],i[1]+e[1]]
t.animateInternal({duration:void 0!==n?n:250,easing:Q.sn,center:t.getConstrainedCenter(r)})}}(r,l,this.duration_),n.preventDefault(),e=!0}}return!e}},Mt=class extends ot{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:function(t){return!function(t){const e=t.originalEvent
return D.ew?e.metaKey:e.ctrlKey}(t)&&_t(t)},this.delta_=t.delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:100}handleEvent(t){let e=!1
if(t.type==T.A.KEYDOWN||t.type==T.A.KEYPRESS){const n=t.originalEvent,i=n.key
if(this.condition_(t)&&("+"===i||"-"===i)){const r=t.map,o="+"===i?this.delta_:-this.delta_
rt(r.getView(),o,void 0,this.duration_),n.preventDefault(),e=!0}}return!e}},Ot=class{constructor(t,e,n){this.decay_=t,this.minVelocity_=e,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,e){this.points_.push(t,e,Date.now())}end(){if(this.points_.length<6)return!1
const t=Date.now()-this.delay_,e=this.points_.length-3
if(this.points_[e+2]<t)return!1
let n=e-3
for(;n>0&&this.points_[n+2]>t;)n-=3
const i=this.points_[e+2]-this.points_[n+2]
if(i<1e3/60)return!1
const r=this.points_[e]-this.points_[n],o=this.points_[e+1]-this.points_[n+1]
return this.angle_=Math.atan2(o,r),this.initialVelocity_=Math.sqrt(r*r+o*o)/i,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}
var Nt=n(5306)
const Dt=class extends ot{constructor(t){super(t=t||{}),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=void 0!==t.maxDelta?t.maxDelta:1,this.duration_=void 0!==t.duration?t.duration:250,this.timeout_=void 0!==t.timeout?t.timeout:80,this.useAnchor_=void 0===t.useAnchor||t.useAnchor,this.constrainResolution_=void 0!==t.constrainResolution&&t.constrainResolution
const e=t.condition?t.condition:ft
this.condition_=t.onFocusOnly?ut(ct,e):e,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0
const t=this.getMap()
t&&t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(t){if(!this.condition_(t))return!0
if(t.type!==T.A.WHEEL)return!0
const e=t.map,n=t.originalEvent
let i
if(n.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==T.A.WHEEL&&(i=n.deltaY,D._p&&n.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(i/=D.cr),n.deltaMode===WheelEvent.DOM_DELTA_LINE&&(i*=40)),0===i)return!1
this.lastDelta_=i
const r=Date.now()
void 0===this.startTime_&&(this.startTime_=r),(!this.mode_||r-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(i)<4?"trackpad":"wheel")
const o=e.getView()
if("trackpad"===this.mode_&&!o.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),o.adjustZoom(-i/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=r,!1
this.totalDelta_+=i
const s=Math.max(this.timeout_-(r-this.startTime_),0)
return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,e),s),!1}handleWheelZoom_(t){const e=t.getView()
e.getAnimating()&&e.cancelAnimations()
let n=-(0,Nt.qE)(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),rt(e,n,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}},Ft=class extends lt{constructor(t){const e=t=t||{}
e.stopDown||(e.stopDown=l.W8),super(e),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==t.threshold?t.threshold:.3,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(t){let e=0
const n=this.targetPointers[0],i=this.targetPointers[1],r=Math.atan2(i.clientY-n.clientY,i.clientX-n.clientX)
if(void 0!==this.lastAngle_){const t=r-this.lastAngle_
this.rotationDelta_+=t,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=t}this.lastAngle_=r
const o=t.map,s=o.getView()
s.getConstraints().rotation!==xt.b8&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(at(this.targetPointers))),this.rotating_&&(o.render(),s.adjustRotationInternal(e,this.anchor_)))}handleUpEvent(t){return!(this.targetPointers.length<2&&(t.map.getView().endInteraction(this.duration_),1))}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map
return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}},kt=class extends lt{constructor(t){const e=t=t||{}
e.stopDown||(e.stopDown=l.W8),super(e),this.anchor_=null,this.duration_=void 0!==t.duration?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let e=1
const n=this.targetPointers[0],i=this.targetPointers[1],r=n.clientX-i.clientX,o=n.clientY-i.clientY,s=Math.sqrt(r*r+o*o)
void 0!==this.lastDistance_&&(e=this.lastDistance_/s),this.lastDistance_=s
const a=t.map,l=a.getView()
1!=e&&(this.lastScaleDelta_=e),this.anchor_=a.getCoordinateFromPixelInternal(a.getEventPixel(at(this.targetPointers))),a.render(),l.adjustResolutionInternal(e,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){const e=t.map.getView(),n=this.lastScaleDelta_>1?1:-1
return e.endInteraction(this.duration_,n),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map
return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}
var jt=n(72),zt=n(1673),Gt=n(7307)
function Bt(t){t instanceof p.A?t.setMapInternal(null):t instanceof I.A&&t.getLayers().forEach(Bt)}function qt(t,e){if(t instanceof p.A)t.setMapInternal(e)
else if(t instanceof I.A){const n=t.getLayers().getArray()
for(let t=0,i=n.length;t<i;++t)qt(n[t],e)}}class Ut extends i.A{constructor(t){super(),t=t||{},this.on,this.once,this.un
const e=function(t){let e=null
void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget)
const n={},i=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new I.A({layers:t.layers})
let o,s,a
return n[B]=i,n[U]=t.target,n[Z]=t.view instanceof Y.default?t.view:new Y.default,void 0!==t.controls&&(Array.isArray(t.controls)?o=new r.A(t.controls.slice()):((0,W.v)("function"==typeof t.controls.getArray,"Expected `controls` to be an array or an `ol/Collection.js`"),o=t.controls)),void 0!==t.interactions&&(Array.isArray(t.interactions)?s=new r.A(t.interactions.slice()):((0,W.v)("function"==typeof t.interactions.getArray,"Expected `interactions` to be an array or an `ol/Collection.js`"),s=t.interactions)),void 0!==t.overlays?Array.isArray(t.overlays)?a=new r.A(t.overlays.slice()):((0,W.v)("function"==typeof t.overlays.getArray,"Expected `overlays` to be an array or an `ol/Collection.js`"),a=t.overlays):a=new r.A,{controls:o,interactions:s,keyboardEventTarget:e,overlays:a,values:n}}(t)
this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=void 0!==t.maxTilesLoading?t.maxTilesLoading:16,this.pixelRatio_=void 0!==t.pixelRatio?t.pixelRatio:D.cr,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=(0,h.vt)(),this.pixelToCoordinateTransform_=(0,h.vt)(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=e.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver((()=>this.updateSize())),this.controls=e.controls||function(t){t=t||{}
const e=new r.A
return(void 0===t.zoom||t.zoom)&&e.push(new et(t.zoomOptions)),(void 0===t.rotate||t.rotate)&&e.push(new tt(t.rotateOptions)),(void 0===t.attribution||t.attribution)&&e.push(new J(t.attributionOptions)),e}(),this.interactions=e.interactions||function(t){t=t||{}
const e=new r.A,n=new Ot(-.005,.05,100)
return(void 0===t.altShiftDragRotate||t.altShiftDragRotate)&&e.push(new bt),(void 0===t.doubleClickZoom||t.doubleClickZoom)&&e.push(new st({delta:t.zoomDelta,duration:t.zoomDuration})),(void 0===t.dragPan||t.dragPan)&&e.push(new vt({onFocusOnly:t.onFocusOnly,kinetic:n})),(void 0===t.pinchRotate||t.pinchRotate)&&e.push(new Ft),(void 0===t.pinchZoom||t.pinchZoom)&&e.push(new kt({duration:t.zoomDuration})),(void 0===t.keyboard||t.keyboard)&&(e.push(new Lt),e.push(new Mt({delta:t.zoomDelta,duration:t.zoomDuration}))),(void 0===t.mouseWheelZoom||t.mouseWheelZoom)&&e.push(new Dt({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration})),(void 0===t.shiftDragZoom||t.shiftDragZoom)&&e.push(new It({duration:t.zoomDuration})),e}({onFocusOnly:!0}),this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new X.A(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(B,this.handleLayerGroupChanged_),this.addChangeListener(Z,this.handleViewChanged_),this.addChangeListener(q,this.handleSizeChanged_),this.addChangeListener(U,this.handleTargetChanged_),this.setProperties(e.values)
const n=this
!t.view||t.view instanceof Y.default||t.view.then((function(t){n.setView(new Y.default(t))})),this.controls.addEventListener(o.A.ADD,(t=>{t.element.setMap(this)})),this.controls.addEventListener(o.A.REMOVE,(t=>{t.element.setMap(null)})),this.interactions.addEventListener(o.A.ADD,(t=>{t.element.setMap(this)})),this.interactions.addEventListener(o.A.REMOVE,(t=>{t.element.setMap(null)})),this.overlays_.addEventListener(o.A.ADD,(t=>{this.addOverlayInternal_(t.element)})),this.overlays_.addEventListener(o.A.REMOVE,(t=>{const e=t.element.getId()
void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)})),this.controls.forEach((t=>{t.setMap(this)})),this.interactions.forEach((t=>{t.setMap(this)})),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){qt(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const e=t.getId()
void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,e,n){if(!this.frameState_||!this.renderer_)return
const i=this.getCoordinateFromPixelInternal(t),r=void 0!==(n=void 0!==n?n:{}).hitTolerance?n.hitTolerance:0,o=void 0!==n.layerFilter?n.layerFilter:l.rT,s=!1!==n.checkWrapped
return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,r,s,e,null,o,null)}getFeaturesAtPixel(t,e){const n=[]
return this.forEachFeatureAtPixel(t,(function(t){n.push(t)}),e),n}getAllLayers(){const t=[]
return function e(n){n.forEach((function(n){n instanceof I.A?e(n.getLayers()):t.push(n)}))}(this.getLayers()),t}hasFeatureAtPixel(t,e){if(!this.frameState_||!this.renderer_)return!1
const n=this.getCoordinateFromPixelInternal(t),i=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:l.rT,r=void 0!==e.hitTolerance?e.hitTolerance:0,o=!1!==e.checkWrapped
return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,r,o,i,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const e=this.viewport_.getBoundingClientRect(),n=this.getSize(),i=e.width/n[0],r=e.height/n[1],o="changedTouches"in t?t.changedTouches[0]:t
return[(o.clientX-e.left)/i,(o.clientY-e.top)/r]}getTarget(){return this.get(U)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(t){return(0,jt.te)(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const e=this.frameState_
return e?(0,h.Bb)(e.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const e=this.overlayIdIndex_[t.toString()]
return void 0!==e?e:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(B)}setLayers(t){const e=this.getLayerGroup()
if(t instanceof r.A)return void e.setLayers(t)
const n=e.getLayers()
n.clear(),n.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray()
for(let e=0,n=t.length;e<n;++e){const n=t[e]
if(!n.visible)continue
const i=n.layer.getRenderer()
if(i&&!i.ready)return!0
const r=n.layer.getSource()
if(r&&r.loading)return!0}return!1}getPixelFromCoordinate(t){const e=(0,jt.Ad)(t,this.getView().getProjection())
return this.getPixelFromCoordinateInternal(e)}getPixelFromCoordinateInternal(t){const e=this.frameState_
return e?(0,h.Bb)(e.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(q)}getView(){return this.get(Z)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement()
return t?t.ownerDocument:document}getTilePriority(t,e,n,i){return(0,X.z)(this.frameState_,t,e,n,i)}handleBrowserEvent(t,e){e=e||t.type
const n=new L(e,this,t)
this.handleMapBrowserEvent(n)}handleMapBrowserEvent(t){if(!this.frameState_)return
const e=t.originalEvent,n=e.type
if(n===O||n===T.A.WHEEL||n===T.A.KEYDOWN){const t=this.getOwnerDocument(),n=this.viewport_.getRootNode?this.viewport_.getRootNode():t,i=e.target
if(this.overlayContainerStopEvent_.contains(i)||!(n===t?t.documentElement:n).contains(i))return}if(t.frameState=this.frameState_,!1!==this.dispatchEvent(t)){const e=this.getInteractions().getArray().slice()
for(let n=e.length-1;n>=0;n--){const i=e[n]
if(i.getMap()===this&&i.getActive()&&this.getTargetElement()&&(!i.handleEvent(t)||t.propagationStopped))break}}}handlePostRender(){const t=this.frameState_,e=this.tileQueue_
if(!e.isEmpty()){let n=this.maxTilesLoading_,i=n
if(t){const e=t.viewHints
if(e[V.A.ANIMATING]||e[V.A.INTERACTING]){const e=Date.now()-t.time>8
n=e?0:8,i=e?0:2}}e.getTilesLoading()<n&&(e.reprioritize(),e.loadMoreTiles(n,i))}t&&this.renderer_&&!t.animate&&(!0===this.renderComplete_?(this.hasListener(x.A.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(x.A.RENDERCOMPLETE,t),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new R(G,this,t)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new R(z,this,t))))
const n=this.postRenderFunctions_
for(let i=0,r=n.length;i<r;++i)n[i](this,t)
n.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let t=0,e=this.targetChangeHandlerKeys_.length;t<e;++t)(0,w.JH)(this.targetChangeHandlerKeys_[t])
this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(T.A.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(T.A.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,(0,S.bf)(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_)
const t=this.targetElement_.getRootNode()
t instanceof ShadowRoot&&this.resizeObserver_.unobserve(t.host),this.setSize(void 0)}const t=this.getTarget(),e="string"==typeof t?document.getElementById(t):t
if(this.targetElement_=e,e){e.appendChild(this.viewport_),this.renderer_||(this.renderer_=new C(this)),this.mapBrowserEventHandler_=new k(this,this.moveTolerance_)
for(const e in M)this.mapBrowserEventHandler_.addEventListener(M[e],this.handleMapBrowserEvent.bind(this))
this.viewport_.addEventListener(T.A.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(T.A.WHEEL,this.boundHandleBrowserEvent_,!!D.FT&&{passive:!1})
const t=this.keyboardEventTarget_?this.keyboardEventTarget_:e
this.targetChangeHandlerKeys_=[(0,w.KT)(t,T.A.KEYDOWN,this.handleBrowserEvent,this),(0,w.KT)(t,T.A.KEYPRESS,this.handleBrowserEvent,this)]
const n=e.getRootNode()
n instanceof ShadowRoot&&this.resizeObserver_.observe(n.host),this.resizeObserver_.observe(e)}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0)
this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&((0,w.JH)(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&((0,w.JH)(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null)
const t=this.getView()
t&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=(0,w.KT)(t,y.A.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=(0,w.KT)(t,T.A.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(w.JH),this.layerGroupPropertyListenerKeys_=null)
const t=this.getLayerGroup()
t&&(this.handleLayerAdd_(new I.i("addlayer",t)),this.layerGroupPropertyListenerKeys_=[(0,w.KT)(t,y.A.PROPERTYCHANGE,this.render,this),(0,w.KT)(t,T.A.CHANGE,this.render,this),(0,w.KT)(t,"addlayer",this.handleLayerAdd_,this),(0,w.KT)(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const t=this.getLayerGroup().getLayerStatesArray()
for(let e=0,n=t.length;e<n;++e){const n=t[e].layer
n.hasRenderer()&&n.getRenderer().handleFontsChanged()}}render(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){Bt(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const e=this.getSize(),n=this.getView(),i=this.frameState_
let r=null
if(void 0!==e&&(0,zt.Ie)(e)&&n&&n.isDef()){const i=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),o=n.getState()
if(r={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:(0,c.Bg)(o.center,o.resolution,o.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:o,viewHints:i,wantedTiles:{},mapId:(0,u.v6)(this),renderTargets:{}},o.nextCenter&&o.nextResolution){const t=isNaN(o.nextRotation)?o.rotation:o.nextRotation
r.nextExtent=(0,c.Bg)(o.nextCenter,o.nextResolution,t,e)}}this.frameState_=r,this.renderer_.renderFrame(r),r&&(r.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,r.postRenderFunctions),i&&(!this.previousExtent_||!(0,c.Im)(this.previousExtent_)&&!(0,c.aI)(r.extent,this.previousExtent_))&&(this.dispatchEvent(new R("movestart",this,i)),this.previousExtent_=(0,c.aZ)(this.previousExtent_)),this.previousExtent_&&!r.viewHints[V.A.ANIMATING]&&!r.viewHints[V.A.INTERACTING]&&!(0,c.aI)(r.extent,this.previousExtent_)&&(this.dispatchEvent(new R("moveend",this,r)),(0,c.o8)(r.extent,this.previousExtent_))),this.dispatchEvent(new R(j,this,r)),this.renderComplete_=this.hasListener(z)||this.hasListener(G)||this.hasListener(x.A.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout((()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()}),0))}setLayerGroup(t){const e=this.getLayerGroup()
e&&this.handleLayerRemove_(new I.i("removelayer",e)),this.set(B,t)}setSize(t){this.set(q,t)}setTarget(t){this.set(U,t)}setView(t){if(!t||t instanceof Y.default)return void this.set(Z,t)
this.set(Z,new Y.default)
const e=this
t.then((function(t){e.setView(new Y.default(t))}))}updateSize(){const t=this.getTargetElement()
let e
if(t){const n=getComputedStyle(t),i=t.offsetWidth-parseFloat(n.borderLeftWidth)-parseFloat(n.paddingLeft)-parseFloat(n.paddingRight)-parseFloat(n.borderRightWidth),r=t.offsetHeight-parseFloat(n.borderTopWidth)-parseFloat(n.paddingTop)-parseFloat(n.paddingBottom)-parseFloat(n.borderBottomWidth)
isNaN(i)||isNaN(r)||(e=[i,r],!(0,zt.Ie)(e)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&(0,Gt.R8)("No map visible because the map container's width or height are 0."))}const n=this.getSize()
!e||n&&(0,K.aI)(e,n)||(this.setSize(e),this.updateViewportSize_(e))}updateViewportSize_(t){const e=this.getView()
e&&e.setViewportSize(t)}}const Zt=Ut},1051:(t,e,n)=>{"use strict"
n.d(e,{A:()=>h})
var i=n(406),r=n(7067),o=n(8197),s=n(1736),a=n(7931)
class l extends i.Ay{constructor(t,e,n){super(t),this.key=e,this.oldValue=n}}class u extends o.A{constructor(t){super(),this.on,this.once,this.un,(0,s.v6)(this),this.values_=null,void 0!==t&&this.setProperties(t)}get(t){let e
return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(t,e){let n
n=`change:${t}`,this.hasListener(n)&&this.dispatchEvent(new l(n,t,e)),n=r.A.PROPERTYCHANGE,this.hasListener(n)&&this.dispatchEvent(new l(n,t,e))}addChangeListener(t,e){this.addEventListener(`change:${t}`,e)}removeChangeListener(t,e){this.removeEventListener(`change:${t}`,e)}set(t,e,n){const i=this.values_||(this.values_={})
if(n)i[t]=e
else{const n=i[t]
i[t]=e,n!==e&&this.notify(t,n)}}setProperties(t,e){for(const n in t)this.set(n,t[n],e)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,e){if(this.values_&&t in this.values_){const n=this.values_[t]
delete this.values_[t],(0,a.p)(this.values_)&&(this.values_=null),e||this.notify(t,n)}}}const h=u},7067:(t,e,n)=>{"use strict"
n.d(e,{A:()=>i})
const i={PROPERTYCHANGE:"propertychange"}},8197:(t,e,n)=>{"use strict"
n.d(e,{A:()=>a})
var i=n(669),r=n(8638),o=n(4757)
class s extends i.A{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(r.A.CHANGE)}getRevision(){return this.revision_}onInternal(t,e){if(Array.isArray(t)){const n=t.length,i=new Array(n)
for(let r=0;r<n;++r)i[r]=(0,o.KT)(this,t[r],e)
return i}return(0,o.KT)(this,t,e)}onceInternal(t,e){let n
if(Array.isArray(t)){const i=t.length
n=new Array(i)
for(let r=0;r<i;++r)n[r]=(0,o.Jz)(this,t[r],e)}else n=(0,o.Jz)(this,t,e)
return e.ol_key=n,n}unInternal(t,e){const n=e.ol_key
if(n)!function(t){if(Array.isArray(t))for(let e=0,n=t.length;e<n;++e)(0,o.JH)(t[e])
else(0,o.JH)(t)}(n)
else if(Array.isArray(t))for(let i=0,r=t.length;i<r;++i)this.removeEventListener(t[i],e)
else this.removeEventListener(t,e)}}s.prototype.on,s.prototype.once,s.prototype.un
const a=s},7912:(t,e,n)=>{"use strict"
n.d(e,{A:()=>u})
var i=n(669),r=n(8638),o=n(699),s=n(1736),a=n(7849)
class l extends i.A{constructor(t,e,n){super(),n=n||{},this.tileCoord=t,this.state=e,this.interimTile=null,this.key="",this.transition_=void 0===n.transition?250:n.transition,this.transitionStarts_={},this.interpolate=!!n.interpolate}changed(){this.dispatchEvent(r.A.CHANGE)}release(){this.state===o.A.ERROR&&this.setState(o.A.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){let t=this.interimTile
if(!t)return this
do{if(t.getState()==o.A.LOADED)return this.transition_=0,t
t=t.interimTile}while(t)
return this}refreshInterimChain(){let t=this.interimTile
if(!t)return
let e=this
do{if(t.getState()==o.A.LOADED){t.interimTile=null
break}t.getState()==o.A.LOADING?e=t:t.getState()==o.A.IDLE?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==o.A.ERROR&&this.state>t)throw new Error("Tile load sequence violation")
this.state=t,this.changed()}load(){(0,s.b0)()}getAlpha(t,e){if(!this.transition_)return 1
let n=this.transitionStarts_[t]
if(n){if(-1===n)return 1}else n=e,this.transitionStarts_[t]=n
const i=e-n+1e3/60
return i>=this.transition_?1:(0,a.a6)(i/this.transition_)}inTransition(t){return!!this.transition_&&-1!==this.transitionStarts_[t]}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}}const u=l},1358:(t,e,n)=>{"use strict"
n.d(e,{A:()=>u,z:()=>h})
var i=n(8638),r=n(6249),o=n(7931)
const s=1/0,a=class{constructor(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,(0,o.I)(this.queuedElements_)}dequeue(){const t=this.elements_,e=this.priorities_,n=t[0]
1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0))
const i=this.keyFunction_(n)
return delete this.queuedElements_[i],n}enqueue(t){(0,r.v)(!(this.keyFunction_(t)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue")
const e=this.priorityFunction_(t)
return e!=s&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(t){return 2*t+1}getRightChildIndex_(t){return 2*t+2}getParentIndex_(t){return t-1>>1}heapify_(){let t
for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return 0===this.elements_.length}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const e=this.elements_,n=this.priorities_,i=e.length,r=e[t],o=n[t],s=t
for(;t<i>>1;){const r=this.getLeftChildIndex_(t),o=this.getRightChildIndex_(t),s=o<i&&n[o]<n[r]?o:r
e[t]=e[s],n[t]=n[s],t=s}e[t]=r,n[t]=o,this.siftDown_(s,t)}siftDown_(t,e){const n=this.elements_,i=this.priorities_,r=n[e],o=i[e]
for(;e>t;){const t=this.getParentIndex_(e)
if(!(i[t]>o))break
n[e]=n[t],i[e]=i[t],e=t}n[e]=r,i[e]=o}reprioritize(){const t=this.priorityFunction_,e=this.elements_,n=this.priorities_
let i=0
const r=e.length
let o,a,l
for(a=0;a<r;++a)o=e[a],l=t(o),l==s?delete this.queuedElements_[this.keyFunction_(o)]:(n[i]=l,e[i++]=o)
e.length=i,n.length=i,this.heapify_()}}
var l=n(699)
const u=class extends a{constructor(t,e){super((function(e){return t.apply(null,e)}),(function(t){return t[0].getKey()})),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=e,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const e=super.enqueue(t)
return e&&t[0].addEventListener(i.A.CHANGE,this.boundHandleTileChange_),e}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const e=t.target,n=e.getState()
if(n===l.A.LOADED||n===l.A.ERROR||n===l.A.EMPTY){n!==l.A.ERROR&&e.removeEventListener(i.A.CHANGE,this.boundHandleTileChange_)
const t=e.getKey()
t in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[t],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,e){let n,i,r,o=0
for(;this.tilesLoading_<t&&o<e&&this.getCount()>0;)i=this.dequeue()[0],r=i.getKey(),n=i.getState(),n!==l.A.IDLE||r in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[r]=!0,++this.tilesLoading_,++o,i.load())}}
function h(t,e,n,i,r){if(!t||!(n in t.wantedTiles))return s
if(!t.wantedTiles[n][e.getKey()])return s
const o=t.viewState.center,a=i[0]-o[0],l=i[1]-o[1]
return 65536*Math.log(r)+Math.sqrt(a*a+l*l)/r}},5959:(t,e,n)=>{"use strict"
n.d(e,{A:()=>o,N:()=>r})
class i{constructor(t,e,n,i){this.minX=t,this.maxX=e,this.minY=n,this.maxY=i}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}function r(t,e,n,r,o){return void 0!==o?(o.minX=t,o.maxX=e,o.minY=n,o.maxY=r,o):new i(t,e,n,r)}const o=i},699:(t,e,n)=>{"use strict"
n.d(e,{A:()=>i})
const i={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},5714:(t,e,n)=>{"use strict"
n.r(e),n.d(e,{createCenterConstraint:()=>C,createResolutionConstraint:()=>T,createRotationConstraint:()=>I,default:()=>R,isNoopAnimation:()=>P})
var i=n(1051),r=n(5548)
const o={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"}
var s=n(9506),a=n(72),l=n(419),u=n(8474),h=n(6249),c=n(5306)
function f(t,e,n){return function(i,r,o,s,a){if(!i)return
if(!r&&!e)return i
const l=e?0:o[0]*r,u=e?0:o[1]*r,h=a?a[0]:0,f=a?a[1]:0
let p=t[0]+l/2+h,d=t[2]-l/2+h,g=t[1]+u/2+f,_=t[3]-u/2+f
p>d&&(p=(d+p)/2,d=p),g>_&&(g=(_+g)/2,_=g)
let m=(0,c.qE)(i[0],p,d),y=(0,c.qE)(i[1],g,_)
if(s&&n&&r){const t=30*r
m+=-t*Math.log(1+Math.max(0,p-i[0])/t)+t*Math.log(1+Math.max(0,i[0]-d)/t),y+=-t*Math.log(1+Math.max(0,g-i[1])/t)+t*Math.log(1+Math.max(0,i[1]-_)/t)}return[m,y]}}function p(t){return t}var d=n(3236),g=n(7195)
function _(t,e,n,i){const r=(0,d.RG)(e)/n[0],o=(0,d.Oq)(e)/n[1]
return i?Math.min(t,Math.max(r,o)):Math.min(t,Math.min(r,o))}function m(t,e,n){let i=Math.min(t,e)
return i*=Math.log(1+50*Math.max(0,t/e-1))/50+1,n&&(i=Math.max(i,n),i/=Math.log(1+50*Math.max(0,n/t-1))/50+1),(0,c.qE)(i,n/2,2*e)}function y(t,e,n,i,r){return n=void 0===n||n,function(o,s,a,l){if(void 0!==o){const s=i?_(t,i,a,r):t
return n&&l?m(o,s,e):(0,c.qE)(o,e,s)}}}var v=n(3513),x=n(7849),b=n(5631)
const E=0
class w extends i.A{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=(0,a.Av)(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&(0,a.RJ)(),t.center&&(t.center=(0,a.Ad)(t.center,this.projection_)),t.extent&&(t.extent=(0,a.SD)(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const e=Object.assign({},t)
for(const a in o)delete e[a]
this.setProperties(e,!0)
const n=T(t)
this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=n.minZoom
const i=C(t),r=n.constraint,s=I(t)
this.constraints_={center:i,resolution:r,rotation:s},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let e=this.padding_
this.padding_=t
const n=this.getCenterInternal()
if(n){const i=t||[0,0,0,0]
e=e||[0,0,0,0]
const r=this.getResolution(),o=r/2*(i[3]-e[3]+e[1]-i[1]),s=r/2*(i[0]-e[0]+e[2]-i[2])
this.setCenterInternal([n[0]+o,n[1]-s])}}getUpdatedOptions_(t){const e=this.getProperties()
return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0)
const e=new Array(arguments.length)
for(let n=0;n<e.length;++n){let t=arguments[n]
t.center&&(t=Object.assign({},t),t.center=(0,a.Ad)(t.center,this.getProjection())),t.anchor&&(t=Object.assign({},t),t.anchor=(0,a.Ad)(t.anchor,this.getProjection())),e[n]=t}this.animateInternal.apply(this,e)}animateInternal(t){let e,n=arguments.length
n>1&&"function"==typeof arguments[n-1]&&(e=arguments[n-1],--n)
let i=0
for(;i<n&&!this.isDef();++i){const t=arguments[i]
t.center&&this.setCenterInternal(t.center),void 0!==t.zoom?this.setZoom(t.zoom):t.resolution&&this.setResolution(t.resolution),void 0!==t.rotation&&this.setRotation(t.rotation)}if(i===n)return void(e&&S(e,!0))
let o=Date.now(),s=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_
const u=[]
for(;i<n;++i){const t=arguments[i],n={start:o,complete:!1,anchor:t.anchor,duration:void 0!==t.duration?t.duration:1e3,easing:t.easing||x.T9,callback:e}
if(t.center&&(n.sourceCenter=s,n.targetCenter=t.center.slice(),s=n.targetCenter),void 0!==t.zoom?(n.sourceResolution=a,n.targetResolution=this.getResolutionForZoom(t.zoom),a=n.targetResolution):t.resolution&&(n.sourceResolution=a,n.targetResolution=t.resolution,a=n.targetResolution),void 0!==t.rotation){n.sourceRotation=l
const e=(0,c.xP)(t.rotation-l+Math.PI,2*Math.PI)-Math.PI
n.targetRotation=l+e,l=n.targetRotation}P(n)?n.complete=!0:o+=n.duration,u.push(n)}this.animations_.push(u),this.setHint(r.A.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[r.A.ANIMATING]>0}getInteracting(){return this.hints_[r.A.INTERACTING]>0}cancelAnimations(){let t
this.setHint(r.A.ANIMATING,-this.hints_[r.A.ANIMATING])
for(let e=0,n=this.animations_.length;e<n;++e){const n=this.animations_[e]
if(n[0].callback&&S(n[0].callback,!1),!t)for(let e=0,i=n.length;e<i;++e){const i=n[e]
if(!i.complete){t=i.anchor
break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return
const t=Date.now()
let e=!1
for(let n=this.animations_.length-1;n>=0;--n){const i=this.animations_[n]
let o=!0
for(let n=0,r=i.length;n<r;++n){const r=i[n]
if(r.complete)continue
const s=t-r.start
let a=r.duration>0?s/r.duration:1
a>=1?(r.complete=!0,a=1):o=!1
const l=r.easing(a)
if(r.sourceCenter){const t=r.sourceCenter[0],e=r.sourceCenter[1],n=r.targetCenter[0],i=r.targetCenter[1]
this.nextCenter_=r.targetCenter
const o=t+l*(n-t),s=e+l*(i-e)
this.targetCenter_=[o,s]}if(r.sourceResolution&&r.targetResolution){const t=1===l?r.targetResolution:r.sourceResolution+l*(r.targetResolution-r.sourceResolution)
if(r.anchor){const e=this.getViewportSize_(this.getRotation()),n=this.constraints_.resolution(t,0,e,!0)
this.targetCenter_=this.calculateCenterZoom(n,r.anchor)}this.nextResolution_=r.targetResolution,this.targetResolution_=t,this.applyTargetState_(!0)}if(void 0!==r.sourceRotation&&void 0!==r.targetRotation){const t=1===l?(0,c.xP)(r.targetRotation+Math.PI,2*Math.PI)-Math.PI:r.sourceRotation+l*(r.targetRotation-r.sourceRotation)
if(r.anchor){const e=this.constraints_.rotation(t,!0)
this.targetCenter_=this.calculateCenterRotate(e,r.anchor)}this.nextRotation_=r.targetRotation,this.targetRotation_=t}if(this.applyTargetState_(!0),e=!0,!r.complete)break}if(o){this.animations_[n]=null,this.setHint(r.A.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN
const t=i[0].callback
t&&S(t,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,e){let n
const i=this.getCenterInternal()
return void 0!==i&&(n=[i[0]-e[0],i[1]-e[1]],(0,u.e$)(n,t-this.getRotation()),(0,u.WQ)(n,e)),n}calculateCenterZoom(t,e){let n
const i=this.getCenterInternal(),r=this.getResolution()
return void 0!==i&&void 0!==r&&(n=[e[0]-t*(e[0]-i[0])/r,e[1]-t*(e[1]-i[1])/r]),n}getViewportSize_(t){const e=this.viewportSize_
if(t){const n=e[0],i=e[1]
return[Math.abs(n*Math.cos(t))+Math.abs(i*Math.sin(t)),Math.abs(n*Math.sin(t))+Math.abs(i*Math.cos(t))]}return e}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal()
return t?(0,a.te)(t,this.getProjection()):t}getCenterInternal(){return this.get(o.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){const e=this.calculateExtentInternal(t)
return(0,a.JR)(e,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_()
const e=this.getCenterInternal();(0,h.v)(e,"The view center is not defined")
const n=this.getResolution();(0,h.v)(void 0!==n,"The view resolution is not defined")
const i=this.getRotation()
return(0,h.v)(void 0!==i,"The view rotation is not defined"),(0,d.Bg)(e,n,i,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(o.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,e){return this.getResolutionForExtentInternal((0,a.SD)(t,this.getProjection()),e)}getResolutionForExtentInternal(t,e){e=e||this.getViewportSizeMinusPadding_()
const n=(0,d.RG)(t)/e[0],i=(0,d.Oq)(t)/e[1]
return Math.max(n,i)}getResolutionForValueFunction(t){t=t||2
const e=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,i=Math.log(e/n)/Math.log(t)
return function(n){return e/Math.pow(t,n*i)}}getRotation(){return this.get(o.ROTATION)}getValueForResolutionFunction(t){const e=Math.log(t||2),n=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,r=Math.log(n/i)/e
return function(t){return Math.log(n/t)/e/r}}getViewportSizeMinusPadding_(t){let e=this.getViewportSize_(t)
const n=this.padding_
return n&&(e=[e[0]-n[1]-n[3],e[1]-n[0]-n[2]]),e}getState(){const t=this.getProjection(),e=this.getResolution(),n=this.getRotation()
let i=this.getCenterInternal()
const r=this.padding_
if(r){const t=this.getViewportSizeMinusPadding_()
i=A(i,this.getViewportSize_(),[t[0]/2+r[3],t[1]/2+r[0]],e,n)}return{center:i.slice(0),projection:void 0!==t?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t
const e=this.getResolution()
return void 0!==e&&(t=this.getZoomForResolution(e)),t}getZoomForResolution(t){let e,n,i=this.minZoom_||0
if(this.resolutions_){const r=(0,g.FT)(this.resolutions_,t,1)
i=r,e=this.resolutions_[r],n=r==this.resolutions_.length-1?2:e/this.resolutions_[r+1]}else e=this.maxResolution_,n=this.zoomFactor_
return i+Math.log(e/t)/Math.log(n)}getResolutionForZoom(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0
const e=(0,c.qE)(Math.floor(t),0,this.resolutions_.length-2),n=this.resolutions_[e]/this.resolutions_[e+1]
return this.resolutions_[e]/Math.pow(n,(0,c.qE)(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,e){let n
if((0,h.v)(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,"Invalid extent or geometry provided as `geometry`"),Array.isArray(t)){(0,h.v)(!(0,d.Im)(t),"Cannot fit empty extent provided as `geometry`")
const e=(0,a.SD)(t,this.getProjection())
n=(0,b.VY)(e)}else if("Circle"===t.getType()){const e=(0,a.SD)(t.getExtent(),this.getProjection())
n=(0,b.VY)(e),n.rotate(this.getRotation(),(0,d.q1)(e))}else{const e=(0,a.Tf)()
n=e?t.clone().transform(e,this.getProjection()):t}this.fitInternal(n,e)}rotatedExtentForGeometry(t){const e=this.getRotation(),n=Math.cos(e),i=Math.sin(-e),r=t.getFlatCoordinates(),o=t.getStride()
let s=1/0,a=1/0,l=-1/0,u=-1/0
for(let h=0,c=r.length;h<c;h+=o){const t=r[h]*n-r[h+1]*i,e=r[h]*i+r[h+1]*n
s=Math.min(s,t),a=Math.min(a,e),l=Math.max(l,t),u=Math.max(u,e)}return[s,a,l,u]}fitInternal(t,e){let n=(e=e||{}).size
n||(n=this.getViewportSizeMinusPadding_())
const i=void 0!==e.padding?e.padding:[0,0,0,0],r=void 0!==e.nearest&&e.nearest
let o
o=void 0!==e.minResolution?e.minResolution:void 0!==e.maxZoom?this.getResolutionForZoom(e.maxZoom):0
const s=this.rotatedExtentForGeometry(t)
let a=this.getResolutionForExtentInternal(s,[n[0]-i[1]-i[3],n[1]-i[0]-i[2]])
a=isNaN(a)?o:Math.max(a,o),a=this.getConstrainedResolution(a,r?0:1)
const u=this.getRotation(),h=Math.sin(u),c=Math.cos(u),f=(0,d.q1)(s)
f[0]+=(i[1]-i[3])/2*a,f[1]+=(i[0]-i[2])/2*a
const p=f[0]*c-f[1]*h,g=f[1]*c+f[0]*h,_=this.getConstrainedCenter([p,g],a),m=e.callback?e.callback:l.tV
void 0!==e.duration?this.animateInternal({resolution:a,center:_,duration:e.duration,easing:e.easing},m):(this.targetResolution_=a,this.targetCenter_=_,this.applyTargetState_(!1,!0),S(m,!0))}centerOn(t,e,n){this.centerOnInternal((0,a.Ad)(t,this.getProjection()),e,n)}centerOnInternal(t,e,n){this.setCenterInternal(A(t,e,n,this.getResolution(),this.getRotation()))}calculateCenterShift(t,e,n,i){let r
const o=this.padding_
if(o&&t){const s=this.getViewportSizeMinusPadding_(-n),a=A(t,i,[s[0]/2+o[3],s[1]/2+o[0]],e,n)
r=[t[0]-a[0],t[1]-a[1]]}return r}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(t){const e=(0,a.te)(this.targetCenter_,this.getProjection())
this.setCenter([e[0]+t[0],e[1]+t[1]])}adjustCenterInternal(t){const e=this.targetCenter_
this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}adjustResolution(t,e){e=e&&(0,a.Ad)(e,this.getProjection()),this.adjustResolutionInternal(t,e)}adjustResolutionInternal(t,e){const n=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),r=this.constraints_.resolution(this.targetResolution_*t,0,i,n)
e&&(this.targetCenter_=this.calculateCenterZoom(r,e)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}adjustRotation(t,e){e&&(e=(0,a.Ad)(e,this.getProjection())),this.adjustRotationInternal(t,e)}adjustRotationInternal(t,e){const n=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+t,n)
e&&(this.targetCenter_=this.calculateCenterRotate(i,e)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t?(0,a.Ad)(t,this.getProjection()):t)}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,e){const n=this.getAnimating()||this.getInteracting()||e,i=this.constraints_.rotation(this.targetRotation_,n),r=this.getViewportSize_(i),s=this.constraints_.resolution(this.targetResolution_,0,r,n),a=this.constraints_.center(this.targetCenter_,s,r,n,this.calculateCenterShift(this.targetCenter_,s,i,r))
this.get(o.ROTATION)!==i&&this.set(o.ROTATION,i),this.get(o.RESOLUTION)!==s&&(this.set(o.RESOLUTION,s),this.set("zoom",this.getZoom(),!0)),a&&this.get(o.CENTER)&&(0,u.aI)(this.get(o.CENTER),a)||this.set(o.CENTER,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,e,n){t=void 0!==t?t:200
const i=e||0,r=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(r),s=this.constraints_.resolution(this.targetResolution_,i,o),a=this.constraints_.center(this.targetCenter_,s,o,!1,this.calculateCenterShift(this.targetCenter_,s,r,o))
if(0===t&&!this.cancelAnchor_)return this.targetResolution_=s,this.targetRotation_=r,this.targetCenter_=a,void this.applyTargetState_()
n=n||(0===t?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,this.getResolution()===s&&this.getRotation()===r&&this.getCenterInternal()&&(0,u.aI)(this.getCenterInternal(),a)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:a,resolution:s,duration:t,easing:x.vT,anchor:n}))}beginInteraction(){this.resolveConstraints(0),this.setHint(r.A.INTERACTING,1)}endInteraction(t,e,n){n=n&&(0,a.Ad)(n,this.getProjection()),this.endInteractionInternal(t,e,n)}endInteractionInternal(t,e,n){this.getInteracting()&&(this.setHint(r.A.INTERACTING,-1),this.resolveConstraints(t,e,n))}getConstrainedCenter(t,e){const n=this.getViewportSize_(this.getRotation())
return this.constraints_.center(t,e||this.getResolution(),n)}getConstrainedZoom(t,e){const n=this.getResolutionForZoom(t)
return this.getZoomForResolution(this.getConstrainedResolution(n,e))}getConstrainedResolution(t,e){e=e||0
const n=this.getViewportSize_(this.getRotation())
return this.constraints_.resolution(t,e,n)}}function S(t,e){setTimeout((function(){t(e)}),0)}function C(t){if(void 0!==t.extent){const e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint
return f(t.extent,t.constrainOnlyCenter,e)}const e=(0,a.Av)(t.projection,"EPSG:3857")
if(!0!==t.multiWorld&&e.isGlobal()){const t=e.getExtent().slice()
return t[0]=-1/0,t[2]=1/0,f(t,!1,!1)}return p}function T(t){let e,n,i,r=void 0!==t.minZoom?t.minZoom:E,o=void 0!==t.maxZoom?t.maxZoom:28
const l=void 0!==t.zoomFactor?t.zoomFactor:2,u=void 0!==t.multiWorld&&t.multiWorld,h=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,f=void 0!==t.showFullExtent&&t.showFullExtent,p=(0,a.Av)(t.projection,"EPSG:3857"),v=p.getExtent()
let x=t.constrainOnlyCenter,b=t.extent
if(u||b||!p.isGlobal()||(x=!1,b=v),void 0!==t.resolutions){const s=t.resolutions
n=s[r],i=void 0!==s[o]?s[o]:s[s.length-1],e=t.constrainResolution?function(t,e,n,i){return e=void 0===e||e,function(r,o,s,a){if(void 0!==r){const l=t[0],u=t[t.length-1],h=n?_(l,n,s,i):l
if(a)return e?m(r,h,u):(0,c.qE)(r,u,h)
const f=Math.min(h,r),p=Math.floor((0,g.FT)(t,f,o))
return t[p]>h&&p<t.length-1?t[p+1]:t[p]}}}(s,h,!x&&b,f):y(n,i,h,!x&&b,f)}else{const u=(v?Math.max((0,d.RG)(v),(0,d.Oq)(v)):360*a.Ig.degrees/p.getMetersPerUnit())/s.R/Math.pow(2,E),g=u/Math.pow(2,28-E)
n=t.maxResolution,void 0!==n?r=0:n=u/Math.pow(l,r),i=t.minResolution,void 0===i&&(i=void 0!==t.maxZoom?void 0!==t.maxResolution?n/Math.pow(l,o):u/Math.pow(l,o):g),o=r+Math.floor(Math.log(n/i)/Math.log(l)),i=n/Math.pow(l,o-r),e=t.constrainResolution?function(t,e,n,i,r,o){return i=void 0===i||i,n=void 0!==n?n:0,function(s,a,l,u){if(void 0!==s){const h=r?_(e,r,l,o):e
if(u)return i?m(s,h,n):(0,c.qE)(s,n,h)
const f=1e-9,p=Math.ceil(Math.log(e/h)/Math.log(t)-f),d=-a*(.5-f)+.5,g=Math.min(h,s),y=Math.floor(Math.log(e/g)/Math.log(t)+d),v=Math.max(p,y),x=e/Math.pow(t,v)
return(0,c.qE)(x,n,h)}}}(l,n,i,h,!x&&b,f):y(n,i,h,!x&&b,f)}return{constraint:e,maxResolution:n,minResolution:i,minZoom:r,zoomFactor:l}}function I(t){if(void 0===t.enableRotation||t.enableRotation){const e=t.constrainRotation
return void 0===e||!0===e?(0,v.cq)():!1===e?v.dv:"number"==typeof e?(0,v.a$)(e):v.dv}return v.b8}function P(t){return!(t.sourceCenter&&t.targetCenter&&!(0,u.aI)(t.sourceCenter,t.targetCenter))&&t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation}function A(t,e,n,i,r){const o=Math.cos(-r)
let s=Math.sin(-r),a=t[0]*o-t[1]*s,l=t[1]*o+t[0]*s
return a+=(e[0]/2-n[0])*i,l+=(n[1]-e[1]/2)*i,s=-s,[a*o-l*s,l*o+a*s]}const R=w},5548:(t,e,n)=>{"use strict"
n.d(e,{A:()=>i})
const i={ANIMATING:0,INTERACTING:1}},7195:(t,e,n)=>{"use strict"
function i(t,e,n){let i,o
n=n||r
let s=0,a=t.length,l=!1
for(;s<a;)i=s+(a-s>>1),o=+n(t[i],e),o<0?s=i+1:(a=i,l=!o)
return l?s:~s}function r(t,e){return t>e?1:t<e?-1:0}function o(t,e){return t<e?1:t>e?-1:0}function s(t,e,n){if(t[0]<=e)return 0
const i=t.length
if(e<=t[i-1])return i-1
if("function"==typeof n){for(let r=1;r<i;++r){const i=t[r]
if(i===e)return r
if(i<e)return n(e,t[r-1],i)>0?r-1:r}return i-1}if(n>0){for(let n=1;n<i;++n)if(t[n]<e)return n-1
return i-1}if(n<0){for(let n=1;n<i;++n)if(t[n]<=e)return n
return i-1}for(let r=1;r<i;++r){if(t[r]==e)return r
if(t[r]<e)return t[r-1]-e<e-t[r]?r-1:r}return i-1}function a(t,e,n){for(;e<n;){const i=t[e]
t[e]=t[n],t[n]=i,++e,--n}}function l(t,e){const n=Array.isArray(e)?e:[e],i=n.length
for(let r=0;r<i;r++)t[t.length]=n[r]}function u(t,e){const n=t.length
if(n!==e.length)return!1
for(let i=0;i<n;i++)if(t[i]!==e[i])return!1
return!0}function h(t,e,n){const i=e||r
return t.every((function(e,r){if(0===r)return!0
const o=i(t[r-1],e)
return!(o>0||n&&0===o)}))}n.d(e,{El:()=>i,FT:()=>s,V_:()=>r,WC:()=>h,X$:()=>l,aI:()=>u,gI:()=>a,rG:()=>o})},6249:(t,e,n)=>{"use strict"
function i(t,e){if(!t)throw new Error(e)}n.d(e,{v:()=>i})},659:(t,e,n)=>{"use strict"
n.d(e,{_j:()=>E,oJ:()=>d,sH:()=>b,$C:()=>C,cD:()=>x,S8:()=>w,eE:()=>v,dI:()=>S,fu:()=>y})
const i={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}
var r={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"],whitepoint:{2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}}}
r.max=r.whitepoint[2].D65,r.rgb=function(t,e){e=e||r.whitepoint[2].E
var n,i,o,s=t[0]/e[0],a=t[1]/e[1],l=t[2]/e[2]
return i=-.96924363628087*s+1.87596750150772*a+.041555057407175*l,o=.055630079696993*s+-.20397695888897*a+1.056971514242878*l,n=(n=3.240969941904521*s+-1.537383177570093*a+-.498610760293*l)>.0031308?1.055*Math.pow(n,1/2.4)-.055:n*=12.92,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:i*=12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o*=12.92,[255*(n=Math.min(Math.max(0,n),1)),255*(i=Math.min(Math.max(0,i),1)),255*(o=Math.min(Math.max(0,o),1))]},i.xyz=function(t,e){var n=t[0]/255,i=t[1]/255,o=t[2]/255,s=.21263900587151*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.71516867876775*(i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92)+.072192315360733*(o=o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92),a=.019330818715591*n+.11919477979462*i+.95053215224966*o
return[(.41239079926595*n+.35758433938387*i+.18048078840183*o)*(e=e||r.whitepoint[2].E)[0],s*e[1],a*e[2]]}
const o=r,s={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(t,e,n){var i,r,s,a,l,u,h,c,f
return s=t[0],a=t[1],l=t[2],0===s?[0,0,0]:(e=e||"D65",n=n||2,i=a/(13*s)+4*(h=o.whitepoint[n][e][0])/(h+15*(c=o.whitepoint[n][e][1])+3*(f=o.whitepoint[n][e][2]))||0,r=l/(13*s)+9*c/(h+15*c+3*f)||0,[9*(u=s>8?c*Math.pow((s+16)/116,3):c*s*.0011070564598794539)*i/(4*r)||0,u,u*(12-3*i-20*r)/(4*r)||0])}}
o.luv=function(t,e,n){var i,r,s,a,l,u,h,c,f,p,d
e=e||"D65",n=n||2,p=4*(h=o.whitepoint[n][e][0])/(h+15*(c=o.whitepoint[n][e][1])+3*(f=o.whitepoint[n][e][2])),d=9*c/(h+15*c+3*f),i=4*(a=t[0])/(a+15*(l=t[1])+3*(u=t[2]))||0,r=9*l/(a+15*l+3*u)||0
var g=l/c
return[s=g<=.008856451679035631?903.2962962962961*g:116*Math.pow(g,1/3)-16,13*s*(i-p),13*s*(r-d)]}
var a={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(t){var e,n=t[0],i=t[1]
return e=t[2]/360*2*Math.PI,[n,i*Math.cos(e),i*Math.sin(e)]},xyz:function(t){return s.xyz(a.luv(t))}}
const l=a
s.lchuv=function(t){var e=t[0],n=t[1],i=t[2],r=Math.sqrt(n*n+i*i),o=360*Math.atan2(i,n)/2/Math.PI
return o<0&&(o+=360),[e,r,o]},o.lchuv=function(t){return s.lchuv(o.luv(t))}
const u={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},h=function(t){var e,n,i=[],r=1
if("number"==typeof t)return{space:"rgb",values:[t>>>16,(65280&t)>>>8,255&t],alpha:1}
if("number"==typeof t)return{space:"rgb",values:[t>>>16,(65280&t)>>>8,255&t],alpha:1}
if(t=String(t).toLowerCase(),u[t])i=u[t].slice(),n="rgb"
else if("transparent"===t)r=0,n="rgb",i=[0,0,0]
else if("#"===t[0]){var o=t.slice(1),s=o.length
r=1,s<=4?(i=[parseInt(o[0]+o[0],16),parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16)],4===s&&(r=parseInt(o[3]+o[3],16)/255)):(i=[parseInt(o[0]+o[1],16),parseInt(o[2]+o[3],16),parseInt(o[4]+o[5],16)],8===s&&(r=parseInt(o[6]+o[7],16)/255)),i[0]||(i[0]=0),i[1]||(i[1]=0),i[2]||(i[2]=0),n="rgb"}else if(e=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(t)){var a=e[1],l="cmyk"===(n=a.replace(/a$/,""))?4:"gray"===n?1:3
i=e[2].trim().split(/\s*[,\/]\s*|\s+/),"color"===n&&(n=i.shift()),r=(i=i.map((function(t,e){if("%"===t[t.length-1])return t=parseFloat(t)/100,3===e?t:"rgb"===n?255*t:"h"===n[0]?100*t:"l"!==n[0]||e?"lab"===n?125*t:"lch"===n?e<2?150*t:360*t:"o"!==n[0]||e?"oklab"===n?.4*t:"oklch"===n?e<2?.4*t:360*t:t:t:100*t
if("h"===n[e]||2===e&&"h"===n[n.length-1]){if(void 0!==c[t])return c[t]
if(t.endsWith("deg"))return parseFloat(t)
if(t.endsWith("turn"))return 360*parseFloat(t)
if(t.endsWith("grad"))return 360*parseFloat(t)/400
if(t.endsWith("rad"))return 180*parseFloat(t)/Math.PI}return"none"===t?0:parseFloat(t)}))).length>l?i.pop():1}else/[0-9](?:\s|\/|,)/.test(t)&&(i=t.match(/([0-9]+)/g).map((function(t){return parseFloat(t)})),n=t.match(/([a-z])/gi)?.join("")?.toLowerCase()||"rgb")
return{space:n,values:i,alpha:r}}
var c={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}
const f={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(t){var e,n,i,r,o,s=t[0]/360,a=t[1]/100,l=t[2]/100,u=0
if(0===a)return[o=255*l,o,o]
for(e=2*l-(n=l<.5?l*(1+a):l+a-l*a),r=[0,0,0];u<3;)(i=s+1/3*-(u-1))<0?i++:i>1&&i--,o=6*i<1?e+6*(n-e)*i:2*i<1?n:3*i<2?e+(n-e)*(2/3-i)*6:e,r[u++]=255*o
return r}}
i.hsl=function(t){var e,n,i=t[0]/255,r=t[1]/255,o=t[2]/255,s=Math.min(i,r,o),a=Math.max(i,r,o),l=a-s
return a===s?e=0:i===a?e=(r-o)/l:r===a?e=2+(o-i)/l:o===a&&(e=4+(i-r)/l),(e=Math.min(60*e,360))<0&&(e+=360),n=(s+a)/2,[e,100*(a===s?0:n<=.5?l/(a+s):l/(2-a-s)),100*n]}
var p=n(5306)
function d(t){return"string"==typeof t?t:S(t)}const g=1024,_={}
let m=0
function y(t){if(4===t.length)return t
const e=t.slice()
return e[3]=1,e}function v(t){const e=o.lchuv(i.xyz(t))
return e[3]=t[3],e}function x(t){const e=o.rgb(l.xyz(t))
return e[3]=t[3],e}function b(t){if(_.hasOwnProperty(t))return _[t]
if(m>=g){let t=0
for(const e in _)3&t++||(delete _[e],--m)}const e=function(t){var e
Array.isArray(t)&&t.raw&&(t=String.raw(...arguments)),t instanceof Number&&(t=+t)
var n=h(t)
if(!n.space)return[]
const r="h"===n.space[0]?f.min:i.min,o="h"===n.space[0]?f.max:i.max
return(e=Array(3))[0]=Math.min(Math.max(n.values[0],r[0]),o[0]),e[1]=Math.min(Math.max(n.values[1],r[1]),o[1]),e[2]=Math.min(Math.max(n.values[2],r[2]),o[2]),"h"===n.space[0]&&(e=f.rgb(e)),e.push(Math.min(Math.max(n.alpha,0),1)),e}(t)
if(4!==e.length)throw new Error('Failed to parse "'+t+'" as color')
for(const n of e)if(isNaN(n))throw new Error('Failed to parse "'+t+'" as color')
return w(e),_[t]=e,++m,e}function E(t){return Array.isArray(t)?t:b(t)}function w(t){return t[0]=(0,p.qE)(t[0]+.5|0,0,255),t[1]=(0,p.qE)(t[1]+.5|0,0,255),t[2]=(0,p.qE)(t[2]+.5|0,0,255),t[3]=(0,p.qE)(t[3],0,1),t}function S(t){let e=t[0]
e!=(0|e)&&(e=e+.5|0)
let n=t[1]
n!=(0|n)&&(n=n+.5|0)
let i=t[2]
return i!=(0|i)&&(i=i+.5|0),"rgba("+e+","+n+","+i+","+(void 0===t[3]?1:Math.round(1e3*t[3])/1e3)+")"}function C(t){try{return b(t),!0}catch(t){return!1}}},7382:(t,e,n)=>{"use strict"
n.d(e,{F:()=>l})
var i=n(1410),r=n(8454),o=n(9398),s=n(8166),a=n(659)
function l(t){return t?Array.isArray(t)?(0,a.dI)(t):"object"==typeof t&&"src"in t?function(t){if(!t.offset||!t.size)return s.ue.getPattern(t.src,"anonymous",t.color)
const e=t.src+":"+t.offset,n=s.ue.getPattern(e,void 0,t.color)
if(n)return n
const a=s.ue.get(t.src,"anonymous",null)
if(a.getImageState()!==i.A.LOADED)return null
const l=(0,r.Y)(t.size[0],t.size[1])
return l.drawImage(a.getImage(1),t.offset[0],t.offset[1],t.size[0],t.size[1],0,0,t.size[0],t.size[1]),(0,o.J)(l.canvas,e,void 0,i.A.LOADED,t.color,!0),s.ue.getPattern(e,void 0,t.color)}(t):t:null}},7307:(t,e,n)=>{"use strict"
n.d(e,{R8:()=>o,z3:()=>s})
const i={info:1,warn:2,error:3,none:4}
let r=i.info
function o(...t){r>i.warn||console.warn(...t)}function s(...t){r>i.error||console.error(...t)}},8474:(t,e,n)=>{"use strict"
n.d(e,{Li:()=>c,WQ:()=>s,aI:()=>l,aP:()=>a,e$:()=>u,hs:()=>h})
var i=n(3236),r=n(5306),o=n(4549)
function s(t,e){return t[0]+=+e[0],t[1]+=+e[1],t}function a(t,e,n){const i=(0,r.xP)(e+180,360)-180,s=Math.abs(3600*i),a=n||0
let l=Math.floor(s/3600),u=Math.floor((s-3600*l)/60),h=(0,r.Mg)(s-3600*l-60*u,a)
h>=60&&(h=0,u+=1),u>=60&&(u=0,l+=1)
let c=l+""
return 0===u&&0===h||(c+=" "+(0,o.H)(u,2)+""),0!==h&&(c+=" "+(0,o.H)(h,2,a)+""),0!==i&&(c+=" "+t.charAt(i<0?1:0)),c}function l(t,e){let n=!0
for(let i=t.length-1;i>=0;--i)if(t[i]!=e[i]){n=!1
break}return n}function u(t,e){const n=Math.cos(e),i=Math.sin(e),r=t[0]*n-t[1]*i,o=t[1]*n+t[0]*i
return t[0]=r,t[1]=o,t}function h(t,e){return t[0]*=e,t[1]*=e,t}function c(t,e){if(e.canWrapX()){const n=(0,i.RG)(e.getExtent()),r=function(t,e,n){const r=e.getExtent()
let o=0
return e.canWrapX()&&(t[0]<r[0]||t[0]>r[2])&&(n=n||(0,i.RG)(r),o=Math.floor((t[0]-r[0])/n)),o}(t,e,n)
r&&(t[0]-=r*n)}return t}},8877:(t,e,n)=>{"use strict"
n.d(e,{$N:()=>o,K5:()=>u,Si:()=>i,XI:()=>r,nT:()=>s})
const i="ol-hidden",r="ol-unselectable",o="ol-control",s="ol-collapsed",a=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),l=["style","variant","weight","size","lineHeight","family"],u=function(t){const e=t.match(a)
if(!e)return null
const n={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"}
for(let i=0,r=l.length;i<r;++i){const t=e[i+1]
void 0!==t&&(n[l[i]]=t)}return n.families=n.family.split(/,\s?/),n}},8454:(t,e,n)=>{"use strict"
n.d(e,{WM:()=>c,Y:()=>r,Yg:()=>a,bf:()=>u,fo:()=>l,gS:()=>h,lr:()=>s})
var i=n(1622)
function r(t,e,n,r){let o
return o=n&&n.length?n.shift():i.Wl?new OffscreenCanvas(t||300,e||300):document.createElement("canvas"),t&&(o.width=t),e&&(o.height=e),o.getContext("2d",r)}let o
function s(){return o||(o=r(1,1)),o}function a(t){const e=t.canvas
e.width=1,e.height=1,t.clearRect(0,0,1,1)}function l(t,e){const n=e.parentNode
n&&n.replaceChild(t,e)}function u(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function h(t){for(;t.lastChild;)t.removeChild(t.lastChild)}function c(t,e){const n=t.childNodes
for(let i=0;;++i){const r=n[i],o=e[i]
if(!r&&!o)break
r!==o&&(r?o?t.insertBefore(o,r):(t.removeChild(r),--i):t.appendChild(o))}}},7849:(t,e,n)=>{"use strict"
function i(t){return Math.pow(t,3)}function r(t){return 1-i(1-t)}function o(t){return 3*t*t-2*t*t*t}function s(t){return t}n.d(e,{T9:()=>o,a6:()=>i,sn:()=>s,vT:()=>r})},4757:(t,e,n)=>{"use strict"
n.d(e,{JH:()=>s,Jz:()=>o,KT:()=>r})
var i=n(7931)
function r(t,e,n,i,r){if(i&&i!==t&&(n=n.bind(i)),r){const i=n
n=function(){t.removeEventListener(e,n),i.apply(this,arguments)}}const o={target:t,type:e,listener:n}
return t.addEventListener(e,n),o}function o(t,e,n,i){return r(t,e,n,i,!0)}function s(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),(0,i.I)(t))}},406:(t,e,n)=>{"use strict"
n.d(e,{Ay:()=>i})
const i=class{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}},8638:(t,e,n)=>{"use strict"
n.d(e,{A:()=>i})
const i={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"}},669:(t,e,n)=>{"use strict"
n.d(e,{A:()=>l})
var i=n(8646),r=n(406),o=n(419),s=n(7931)
class a extends i.A{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,e){if(!t||!e)return
const n=this.listeners_||(this.listeners_={}),i=n[t]||(n[t]=[])
i.includes(e)||i.push(e)}dispatchEvent(t){const e="string"==typeof t,n=e?t:t.type,i=this.listeners_&&this.listeners_[n]
if(!i)return
const s=e?new r.Ay(t):t
s.target||(s.target=this.eventTarget_||this)
const a=this.dispatching_||(this.dispatching_={}),l=this.pendingRemovals_||(this.pendingRemovals_={})
let u
n in a||(a[n]=0,l[n]=0),++a[n]
for(let r=0,o=i.length;r<o;++r)if(u="handleEvent"in i[r]?i[r].handleEvent(s):i[r].call(this,s),!1===u||s.propagationStopped){u=!1
break}if(0==--a[n]){let t=l[n]
for(delete l[n];t--;)this.removeEventListener(n,o.tV)
delete a[n]}return u}disposeInternal(){this.listeners_&&(0,s.I)(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return!!this.listeners_&&(t?t in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(t,e){if(!this.listeners_)return
const n=this.listeners_[t]
if(!n)return
const i=n.indexOf(e);-1!==i&&(this.pendingRemovals_&&t in this.pendingRemovals_?(n[i]=o.tV,++this.pendingRemovals_[t]):(n.splice(i,1),0===n.length&&delete this.listeners_[t]))}}const l=a},8548:(t,e,n)=>{"use strict"
n.d(e,{DG:()=>v,Fq:()=>c,SR:()=>x,T8:()=>a,Xj:()=>m,Ye:()=>R,ZD:()=>E,_D:()=>y,cT:()=>u,go:()=>g,ho:()=>_,j:()=>s,mE:()=>h,qg:()=>b,wl:()=>l})
var i=n(7195),r=n(659)
let o=0
const s=0,a=1<<o++,l=1<<o++,u=1<<o++,h=1<<o++,c=1<<o++,f=Math.pow(2,5)-1,p={[a]:"boolean",[l]:"number",[u]:"string",[h]:"color",[c]:"number[]"},d=Object.keys(p).map(Number).sort(i.V_)
function g(t){const e=[]
for(const i of d)(t&(n=i))===n&&e.push(p[i])
var n
return 0===e.length?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function _(t,e){return!!(t&e)}function m(t,e){return t===e}class y{constructor(t,e){this.type=t,this.value=e}}class v{constructor(t,e,...n){this.type=t,this.operator=e,this.args=n}}function x(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,style:{}}}function b(t,e,n){switch(typeof t){case"boolean":return new y(a,t)
case"number":return new y(l,t)
case"string":{let e=u
return(0,r.$C)(t)&&(e|=h),m(e&n,s)||(e&=n),new y(e,t)}}if(!Array.isArray(t))throw new Error("Expression must be an array or a primitive value")
if(0===t.length)throw new Error("Empty expression")
if("string"==typeof t[0])return function(t,e,n){const i=t[0],r=w[i]
if(!r)throw new Error(`Unknown operator: ${i}`)
return r(t,e,n)}(t,e,n)
for(const r of t)if("number"!=typeof r)throw new Error("Expected an array of numbers")
let i=c
return 3!==t.length&&4!==t.length||(i|=h),n&&(i&=n),new y(i,t)}const E={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string"},w={[E.Get]:A((([t,e])=>void 0!==e?function(t){switch(t){case"string":return u
case"color":return h
case"number":return l
case"boolean":return a
case"number[]":return c
default:throw new Error(`Unrecognized type hint: ${t}`)}}(e.value):f),C(1,2),(function(t,e){const n=b(t[1],e)
if(!(n instanceof y))throw new Error("Expected a literal argument for get operation")
if("string"!=typeof n.value)throw new Error("Expected a string argument for get operation")
return e.properties.add(n.value),3===t.length?[n,b(t[2],e)]:[n]})),[E.Var]:A((([t])=>t.type),C(1,1),(function(t,e,n,i){const r=t[1]
if("string"!=typeof r)throw new Error("Expected a string argument for var operation")
if(e.variables.add(r),!("variables"in e.style)||void 0===e.style.variables[r])return[new y(f,r)]
const o=b(e.style.variables[r],e)
if(o.value=r,i&&!_(i,o.type))throw new Error(`The variable ${r} has type ${g(o.type)} but the following type was expected: ${g(i)}`)
return[o]})),[E.Id]:A(l|u,S,(function(t,e){e.featureId=!0})),[E.Concat]:A(u,C(2,1/0),T(f)),[E.GeometryType]:A(u,S,(function(t,e){e.geometryType=!0})),[E.Resolution]:A(l,S),[E.Zoom]:A(l,S),[E.Time]:A(l,S),[E.Any]:A(a,C(2,1/0),T(a)),[E.All]:A(a,C(2,1/0),T(a)),[E.Not]:A(a,C(1,1),T(a)),[E.Equal]:A(a,C(2,2),T(f),I),[E.NotEqual]:A(a,C(2,2),T(f),I),[E.GreaterThan]:A(a,C(2,2),T(f),I),[E.GreaterThanOrEqualTo]:A(a,C(2,2),T(f),I),[E.LessThan]:A(a,C(2,2),T(f),I),[E.LessThanOrEqualTo]:A(a,C(2,2),T(f),I),[E.Multiply]:A((t=>{let e=l|h
for(let n=0;n<t.length;n++)e&=t[n].type
return e}),C(2,1/0),T(l|h),I),[E.Coalesce]:A((t=>{let e=f
for(let n=1;n<t.length;n+=2)e&=t[n].type
return e&=t[t.length-1].type,e}),C(2,1/0),T(f),I),[E.Divide]:A(l,C(2,2),T(l)),[E.Add]:A(l,C(2,1/0),T(l)),[E.Subtract]:A(l,C(2,2),T(l)),[E.Clamp]:A(l,C(3,3),T(l)),[E.Mod]:A(l,C(2,2),T(l)),[E.Pow]:A(l,C(2,2),T(l)),[E.Abs]:A(l,C(1,1),T(l)),[E.Floor]:A(l,C(1,1),T(l)),[E.Ceil]:A(l,C(1,1),T(l)),[E.Round]:A(l,C(1,1),T(l)),[E.Sin]:A(l,C(1,1),T(l)),[E.Cos]:A(l,C(1,1),T(l)),[E.Atan]:A(l,C(1,2),T(l)),[E.Sqrt]:A(l,C(1,1),T(l)),[E.Match]:A((t=>{let e=f
for(let n=2;n<t.length;n+=2)e&=t[n].type
return e&=t[t.length-1].type,e}),C(4,1/0),P,(function(t,e,n,i){const r=t.length-1
let o=b(t[1],e).type
const h=b(t[t.length-1],e)
let c=void 0!==i?i&h.type:h.type
const f=new Array(r-2)
for(let s=0;s<r-2;s+=2){const n=b(t[s+2],e),i=b(t[s+3],e)
o&=n.type,c&=i.type,f[s]=n,f[s+1]=i}const p=u|l|a
if(!_(p,o))throw new Error(`Expected an input of type ${g(p)} for the interpolate operation, got ${g(o)} instead`)
if(m(c,s))throw new Error("Could not find a common output type for the following match operation: "+JSON.stringify(t))
for(let s=0;s<r-2;s+=2){const n=b(t[s+2],e,o),i=b(t[s+3],e,c)
f[s]=n,f[s+1]=i}return[b(t[1],e,o),...f,b(t[t.length-1],e,c)]})),[E.Between]:A(a,C(3,3),T(l)),[E.Interpolate]:A((t=>{let e=h|l
for(let n=3;n<t.length;n+=2)e&=t[n].type
return e}),C(6,1/0),P,(function(t,e,n,i){const r=t[1]
let o
switch(r[0]){case"linear":o=1
break
case"exponential":if(o=r[1],"number"!=typeof o)throw new Error(`Expected a number base for exponential interpolation, got ${JSON.stringify(o)} instead`)
break
default:o=null}if(!o)throw new Error(`Invalid interpolation type: ${JSON.stringify(r)}`)
o=b(o,e)
let s=b(t[2],e)
if(!_(l,s.type))throw new Error(`Expected an input of type number for the interpolate operation, got ${g(s.type)} instead`)
s=b(t[2],e,l)
const a=new Array(t.length-3)
for(let u=0;u<a.length;u+=2){let n=b(t[u+3],e)
if(!_(l,n.type))throw new Error(`Expected all stop input values in the interpolate operation to be of type number, got ${g(n.type)} at position ${u+2} instead`)
let i=b(t[u+4],e)
if(!_(l|h,i.type))throw new Error(`Expected all stop output values in the interpolate operation to be a number or color, got ${g(i.type)} at position ${u+3} instead`)
n=b(t[u+3],e,l),i=b(t[u+4],e,l|h),a[u]=n,a[u+1]=i}return[o,s,...a]})),[E.Case]:A((t=>{let e=f
for(let n=1;n<t.length;n+=2)e&=t[n].type
return e&=t[t.length-1].type,e}),C(3,1/0),(function(t,e){const n=t[0],i=t.length-1
if(i%2==0)throw new Error(`An odd amount of arguments was expected for operation ${n}, got ${JSON.stringify(i)} instead`)}),(function(t,e,n,i){const r=b(t[t.length-1],e)
let o=void 0!==i?i&r.type:r.type
const l=new Array(t.length-1)
for(let s=0;s<l.length-1;s+=2){const n=b(t[s+1],e),i=b(t[s+2],e)
if(!_(a,n.type))throw new Error(`Expected all conditions in the case operation to be of type boolean, got ${g(n.type)} at position ${s} instead`)
o&=i.type,l[s]=n,l[s+1]=i}if(m(o,s))throw new Error("Could not find a common output type for the following case operation: "+JSON.stringify(t))
for(let s=0;s<l.length-1;s+=2)l[s+1]=b(t[s+2],e,o)
return l[l.length-1]=b(t[t.length-1],e,o),l})),[E.In]:A(a,C(2,2),(function(t,e){let n=t[2]
if(!Array.isArray(n))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.')
if("string"==typeof n[0]){if("literal"!==n[0])throw new Error('For the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions.')
if(!Array.isArray(n[1]))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.')
n=n[1]}let i=u|l
const r=new Array(n.length)
for(let o=0;o<r.length;o++){const t=b(n[o],e)
i&=t.type,r[o]=t}if(m(i,s))throw new Error("Could not find a common type for the following in operation: "+JSON.stringify(t))
return[b(t[1],e,i),...r]})),[E.Number]:A(l,C(1,1/0),T(f)),[E.String]:A(u,C(1,1/0),T(f)),[E.Array]:A((t=>3===t.length||4===t.length?c|h:c),C(1,1/0),T(l)),[E.Color]:A(h,C(1,4),T(l)),[E.Band]:A(l,C(1,3),T(l)),[E.Palette]:A(h,C(2,2),(function(t,e){const n=b(t[1],e,l)
if(n.type!==l)throw new Error(`The first argument of palette must be an number, got ${g(n.type)} instead`)
const i=t[2]
if(!Array.isArray(i))throw new Error("The second argument of palette must be an array")
const r=new Array(i.length)
for(let o=0;o<r.length;o++){const t=b(i[o],e,h)
if(!(t instanceof y))throw new Error(`The palette color at index ${o} must be a literal value`)
if(!_(t.type,h))throw new Error(`The palette color at index ${o} should be of type color, got ${g(t.type)} instead`)
r[o]=t}return[n,...r]})),[E.ToString]:A(u,C(1,1),T(a|l|u|h))}
function S(t,e){const n=t[0]
if(1!==t.length)throw new Error(`Expected no arguments for ${n} operation`)
return[]}function C(t,e){return function(n,i){const r=n[0],o=n.length-1
if(t===e){if(o!==t)throw new Error(`Expected ${t} argument${1===t?"":"s"} for ${r}, got ${o}`)}else if(o<t||o>e)throw new Error(`Expected ${e===1/0?`${t} or more`:`${t} to ${e}`} arguments for ${r}, got ${o}`)}}function T(t){return function(e,n){const i=e[0],r=e.length-1,o=new Array(r)
for(let s=0;s<r;++s){const r=b(e[s+1],n)
if(!_(t,r.type)){const e=g(t),n=g(r.type)
throw new Error(`Unexpected type for argument ${s} of ${i} operation, got ${e} but expected ${n}`)}r.type&=t,o[s]=r}return o}}function I(t,e,n){const i=t[0],r=t.length-1
let o=f
for(let s=0;s<n.length;++s)o&=n[s].type
if(o===s)throw new Error(`No common type could be found for arguments of ${i} operation`)
const a=new Array(r)
for(let s=0;s<r;++s)a[s]=b(t[s+1],e,o)
return a}function P(t,e){const n=t[0],i=t.length-1
if(i%2==1)throw new Error(`An even amount of arguments was expected for operation ${n}, got ${JSON.stringify(i)} instead`)}function A(t,...e){return function(n,i,r){const o=n[0]
let a=[]
for(let t=0;t<e.length;t++)a=e[t](n,i,a,r)||a
let l="function"==typeof t?t(a):t
if(void 0!==r){if(!_(l,r))throw new Error(`The following expression was expected to return ${g(r)}, but returns ${g(l)} instead: ${JSON.stringify(n)}`)
l&=r}if(l===s)throw new Error(`No matching type was found for the following expression: ${JSON.stringify(n)}`)
return new v(l,o,...a)}}function R(t){if(!t)return""
const e=t.getType()
switch(e){case"Point":case"LineString":case"Polygon":return e
case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5)
case"Circle":return"Polygon"
case"GeometryCollection":return R(t.getGeometries()[0])
default:return""}}},3236:(t,e,n)=>{"use strict"
n.d(e,{$C:()=>x,$u:()=>j,Af:()=>z,Bg:()=>A,HY:()=>F,Im:()=>k,Ld:()=>a,Li:()=>q,Mx:()=>G,N:()=>p,NW:()=>B,Oq:()=>L,Py:()=>O,QJ:()=>U,R:()=>C,R8:()=>b,RG:()=>D,Rj:()=>h,S5:()=>f,Tr:()=>r,UG:()=>S,Vy:()=>_,WU:()=>N,X$:()=>v,Ym:()=>l,Yw:()=>R,_N:()=>M,aI:()=>m,aZ:()=>d,bE:()=>y,dP:()=>g,k_:()=>T,ms:()=>u,o8:()=>s,q1:()=>I,qF:()=>P,r:()=>o,sB:()=>w,vz:()=>c})
var i=n(937)
function r(t){const e=[1/0,1/0,-1/0,-1/0]
for(let n=0,i=t.length;n<i;++n)x(e,t[n])
return e}function o(t,e,n){return n?(n[0]=t[0]-e,n[1]=t[1]-e,n[2]=t[2]+e,n[3]=t[3]+e,n):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function s(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function a(t,e,n){let i,r
return i=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0,r=n<t[1]?t[1]-n:t[3]<n?n-t[3]:0,i*i+r*r}function l(t,e){return h(t,e[0],e[1])}function u(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function h(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}function c(t,e){const n=t[0],r=t[1],o=t[2],s=t[3],a=e[0],l=e[1]
let u=i.A.UNKNOWN
return a<n?u|=i.A.LEFT:a>o&&(u|=i.A.RIGHT),l<r?u|=i.A.BELOW:l>s&&(u|=i.A.ABOVE),u===i.A.UNKNOWN&&(u=i.A.INTERSECTING),u}function f(){return[1/0,1/0,-1/0,-1/0]}function p(t,e,n,i,r){return r?(r[0]=t,r[1]=e,r[2]=n,r[3]=i,r):[t,e,n,i]}function d(t){return p(1/0,1/0,-1/0,-1/0,t)}function g(t,e){const n=t[0],i=t[1]
return p(n,i,n,i,e)}function _(t,e,n,i,r){return b(d(r),t,e,n,i)}function m(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function y(t,e,n){return Math.abs(t[0]-e[0])<n&&Math.abs(t[2]-e[2])<n&&Math.abs(t[1]-e[1])<n&&Math.abs(t[3]-e[3])<n}function v(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function x(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function b(t,e,n,i,r){for(;n<i;n+=r)E(t,e[n],e[n+1])
return t}function E(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function w(t,e){let n
return n=e(C(t)),n||(n=e(T(t)),n||(n=e(N(t)),n||(n=e(O(t)),n||!1)))}function S(t){let e=0
return k(t)||(e=D(t)*L(t)),e}function C(t){return[t[0],t[1]]}function T(t){return[t[2],t[1]]}function I(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function P(t,e){let n
if("bottom-left"===e)n=C(t)
else if("bottom-right"===e)n=T(t)
else if("top-left"===e)n=O(t)
else{if("top-right"!==e)throw new Error("Invalid corner")
n=N(t)}return n}function A(t,e,n,i,r){const[o,s,a,l,u,h,c,f]=R(t,e,n,i)
return p(Math.min(o,a,u,c),Math.min(s,l,h,f),Math.max(o,a,u,c),Math.max(s,l,h,f),r)}function R(t,e,n,i){const r=e*i[0]/2,o=e*i[1]/2,s=Math.cos(n),a=Math.sin(n),l=r*s,u=r*a,h=o*s,c=o*a,f=t[0],p=t[1]
return[f-l+c,p-u-h,f-l-c,p-u+h,f+l-c,p+u+h,f+l+c,p+u-h,f-l+c,p-u-h]}function L(t){return t[3]-t[1]}function M(t,e,n){const i=n||[1/0,1/0,-1/0,-1/0]
return F(t,e)?(t[0]>e[0]?i[0]=t[0]:i[0]=e[0],t[1]>e[1]?i[1]=t[1]:i[1]=e[1],t[2]<e[2]?i[2]=t[2]:i[2]=e[2],t[3]<e[3]?i[3]=t[3]:i[3]=e[3]):d(i),i}function O(t){return[t[0],t[3]]}function N(t){return[t[2],t[3]]}function D(t){return t[2]-t[0]}function F(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function k(t){return t[2]<t[0]||t[3]<t[1]}function j(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function z(t,e){const n=(t[2]-t[0])/2*(e-1),i=(t[3]-t[1])/2*(e-1)
t[0]-=n,t[2]+=n,t[1]-=i,t[3]+=i}function G(t,e,n){let r=!1
const o=c(t,e),s=c(t,n)
if(o===i.A.INTERSECTING||s===i.A.INTERSECTING)r=!0
else{const a=t[0],l=t[1],u=t[2],h=t[3],c=e[0],f=e[1],p=n[0],d=n[1],g=(d-f)/(p-c)
let _,m
s&i.A.ABOVE&&!(o&i.A.ABOVE)&&(_=p-(d-h)/g,r=_>=a&&_<=u),r||!(s&i.A.RIGHT)||o&i.A.RIGHT||(m=d-(p-u)*g,r=m>=l&&m<=h),r||!(s&i.A.BELOW)||o&i.A.BELOW||(_=p-(d-l)/g,r=_>=a&&_<=u),r||!(s&i.A.LEFT)||o&i.A.LEFT||(m=d-(p-a)*g,r=m>=l&&m<=h)}return r}function B(t,e,n,i){if(k(t))return d(n)
let r=[]
if(i>1){const e=t[2]-t[0],n=t[3]-t[1]
for(let o=0;o<i;++o)r.push(t[0]+e*o/i,t[1],t[2],t[1]+n*o/i,t[2]-e*o/i,t[3],t[0],t[3]-n*o/i)}else r=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]]
e(r,r,2)
const o=[],s=[]
for(let a=0,l=r.length;a<l;a+=2)o.push(r[a]),s.push(r[a+1])
return function(t,e,n){return p(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),n)}(o,s,n)}function q(t,e){const n=e.getExtent(),i=I(t)
if(e.canWrapX()&&(i[0]<n[0]||i[0]>=n[2])){const e=D(n),r=Math.floor((i[0]-n[0])/e)*e
t[0]-=r,t[2]-=r}return t}function U(t,e){if(e.canWrapX()){const n=e.getExtent()
if(!isFinite(t[0])||!isFinite(t[2]))return[[n[0],t[1],n[2],t[3]]]
q(t,e)
const i=D(n)
if(D(t)>i)return[[n[0],t[1],n[2],t[3]]]
if(t[0]<n[0])return[[t[0]+i,t[1],n[2],t[3]],[n[0],t[1],t[2],t[3]]]
if(t[2]>n[2])return[[t[0],t[1],n[2],t[3]],[n[0],t[1],t[2]-i,t[3]]]}return[t]}},937:(t,e,n)=>{"use strict"
n.d(e,{A:()=>i})
const i={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16}},6831:(t,e,n)=>{"use strict"
n.d(e,{m8:()=>o,nF:()=>s})
var i=n(419)
let r=!1
function o(t,e,n,i,o,s,a){const l=new XMLHttpRequest
l.open("GET","function"==typeof t?t(n,i,o):t,!0),"arraybuffer"==e.getType()&&(l.responseType="arraybuffer"),l.withCredentials=r,l.onload=function(t){if(!l.status||l.status>=200&&l.status<300){const t=e.getType()
let i
"json"==t?i=JSON.parse(l.responseText):"text"==t?i=l.responseText:"xml"==t?(i=l.responseXML,i||(i=(new DOMParser).parseFromString(l.responseText,"application/xml"))):"arraybuffer"==t&&(i=l.response),i?s(e.readFeatures(i,{extent:n,featureProjection:o}),e.readProjection(i)):a()}else a()},l.onerror=a,l.send()}function s(t,e){return function(n,r,s,a,l){const u=this
o(t,e,n,r,s,(function(t,e){u.addFeatures(t),void 0!==a&&a(t)}),l||i.tV)}}},2920:(t,e,n)=>{"use strict"
n.r(e),n.d(e,{default:()=>V})
var i=n(9656),r=n(9621),o=n(8225),s=n(4008),a=n(5631),l=n(9009),u=n(3236),h=n(2656),c=n(7195),f=n(812),p=n(5306)
class d extends l.Ay{constructor(t,e){super(),e&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendPoint(t){(0,c.X$)(this.flatCoordinates,t.getFlatCoordinates()),this.changed()}clone(){const t=new d(this.flatCoordinates.slice(),this.layout)
return t.applyProperties(this),t}closestPointXY(t,e,n,i){if(i<(0,u.Ld)(this.getExtent(),t,e))return i
const r=this.flatCoordinates,o=this.stride
for(let s=0,a=r.length;s<a;s+=o){const a=(0,p.hG)(t,e,r[s],r[s+1])
if(a<i){i=a
for(let t=0;t<o;++t)n[t]=r[s+t]
n.length=o}}return i}getCoordinates(){return(0,f.n2)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){const e=this.flatCoordinates.length/this.stride
return t<0||e<=t?null:new o.A(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){const t=this.flatCoordinates,e=this.layout,n=this.stride,i=[]
for(let r=0,s=t.length;r<s;r+=n){const s=new o.A(t.slice(r,r+n),e)
i.push(s)}return i}getType(){return"MultiPoint"}intersectsExtent(t){const e=this.flatCoordinates,n=this.stride
for(let i=0,r=e.length;i<r;i+=n){const n=e[i],r=e[i+1]
if((0,u.Rj)(t,n,r))return!0}return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,h.z2)(this.flatCoordinates,0,t,this.stride),this.changed()}}const g=d
var _=n(2408),m=n(5216),y=n(4900),v=n(601)
class x extends l.Ay{constructor(t,e,n){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(t[0]))this.setCoordinates(t,e)
else if(void 0!==e&&n)this.setFlatCoordinates(e,t),this.ends_=n
else{const e=t,n=[],i=[]
for(let t=0,o=e.length;t<o;++t){const r=e[t];(0,c.X$)(n,r.getFlatCoordinates()),i.push(n.length)}const r=0===e.length?this.getLayout():e[0].getLayout()
this.setFlatCoordinates(r,n),this.ends_=i}}appendLineString(t){(0,c.X$)(this.flatCoordinates,t.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new x(this.flatCoordinates.slice(),this.layout,this.ends_.slice())
return t.applyProperties(this),t}closestPointXY(t,e,n,i){return i<(0,u.Ld)(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,_.HX)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,_.oW)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,n,i))}getCoordinateAtM(t,e,n){return"XYM"!=this.layout&&"XYZM"!=this.layout||0===this.flatCoordinates.length?null:(e=void 0!==e&&e,n=void 0!==n&&n,(0,y.L8)(this.flatCoordinates,0,this.ends_,this.stride,t,e,n))}getCoordinates(){return(0,f.cD)(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t<0||this.ends_.length<=t?null:new s.A(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){const t=this.flatCoordinates,e=this.ends_,n=this.layout,i=[]
let r=0
for(let o=0,a=e.length;o<a;++o){const a=e[o],l=new s.A(t.slice(r,a),n)
i.push(l),r=a}return i}getFlatMidpoints(){const t=[],e=this.flatCoordinates
let n=0
const i=this.ends_,r=this.stride
for(let o=0,s=i.length;o<s;++o){const s=i[o],a=(0,y.SH)(e,n,s,r,.5);(0,c.X$)(t,a),n=s}return t}getSimplifiedGeometryInternal(t){const e=[],n=[]
return e.length=(0,m.AL)(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,n),new x(e,"XY",n)}getType(){return"MultiLineString"}intersectsExtent(t){return(0,v.fB)(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[])
const n=(0,h.KG)(this.flatCoordinates,0,t,this.stride,this.ends_)
this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()}}const b=x
var E=n(1129),w=n(3861),S=n(8066),C=n(9354),T=n(6554)
class I extends l.Ay{constructor(t,e,n){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!n&&!Array.isArray(t[0])){const i=t,r=[],o=[]
for(let t=0,e=i.length;t<e;++t){const e=i[t],n=r.length,s=e.getEnds()
for(let t=0,i=s.length;t<i;++t)s[t]+=n;(0,c.X$)(r,e.getFlatCoordinates()),o.push(s)}e=0===i.length?this.getLayout():i[0].getLayout(),t=r,n=o}void 0!==e&&n?(this.setFlatCoordinates(e,t),this.endss_=n):this.setCoordinates(t,e)}appendPolygon(t){let e
if(this.flatCoordinates){const n=this.flatCoordinates.length;(0,c.X$)(this.flatCoordinates,t.getFlatCoordinates()),e=t.getEnds().slice()
for(let t=0,i=e.length;t<i;++t)e[t]+=n}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push()
this.endss_.push(e),this.changed()}clone(){const t=this.endss_.length,e=new Array(t)
for(let i=0;i<t;++i)e[i]=this.endss_[i].slice()
const n=new I(this.flatCoordinates.slice(),this.layout,e)
return n.applyProperties(this),n}closestPointXY(t,e,n,i){return i<(0,u.Ld)(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,_.c)(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,_.te)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,n,i))}containsXY(t,e){return(0,T.Gd)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)}getArea(){return(0,S.Cs)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let e
return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),(0,w.NK)(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,(0,f.Dz)(e,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=(0,C.C)(this.flatCoordinates,0,this.endss_,this.stride)
this.flatInteriorPoints_=(0,E.p)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new g(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;(0,w.mb)(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=(0,w.NK)(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],n=[]
return e.length=(0,m.sx)(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,n),new I(e,"XY",n)}getPolygon(t){if(t<0||this.endss_.length<=t)return null
let e
if(0===t)e=0
else{const n=this.endss_[t-1]
e=n[n.length-1]}const n=this.endss_[t].slice(),i=n[n.length-1]
if(0!==e)for(let r=0,o=n.length;r<o;++r)n[r]-=e
return new a.Ay(this.flatCoordinates.slice(e,i),this.layout,n)}getPolygons(){const t=this.layout,e=this.flatCoordinates,n=this.endss_,i=[]
let r=0
for(let o=0,s=n.length;o<s;++o){const s=n[o].slice(),l=s[s.length-1]
if(0!==r)for(let t=0,e=s.length;t<e;++t)s[t]-=r
const u=new a.Ay(e.slice(r,l),t,s)
i.push(u),r=l}return i}getType(){return"MultiPolygon"}intersectsExtent(t){return(0,v.Wp)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[])
const n=(0,h.d6)(this.flatCoordinates,0,t,this.stride,this.endss_)
if(0===n.length)this.flatCoordinates.length=0
else{const t=n[n.length-1]
this.flatCoordinates.length=0===t.length?0:t[t.length-1]}this.changed()}}const P=I
var A=n(8638),R=n(4783),L=n(4757)
class M extends R.A{constructor(t){super(),this.geometries_=t,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(L.JH),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const t=this.geometries_
for(let e=0,n=t.length;e<n;++e)this.changeEventsKeys_.push((0,L.KT)(t[e],A.A.CHANGE,this.changed,this))}clone(){const t=new M(O(this.geometries_))
return t.applyProperties(this),t}closestPointXY(t,e,n,i){if(i<(0,u.Ld)(this.getExtent(),t,e))return i
const r=this.geometries_
for(let o=0,s=r.length;o<s;++o)i=r[o].closestPointXY(t,e,n,i)
return i}containsXY(t,e){const n=this.geometries_
for(let i=0,r=n.length;i<r;++i)if(n[i].containsXY(t,e))return!0
return!1}computeExtent(t){(0,u.aZ)(t)
const e=this.geometries_
for(let n=0,i=e.length;n<i;++n)(0,u.X$)(t,e[n].getExtent())
return t}getGeometries(){return O(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let t=[]
const e=this.geometries_
for(let n=0,i=e.length;n<i;++n)e[n].getType()===this.getType()?t=t.concat(e[n].getGeometriesArrayRecursive()):t.push(e[n])
return t}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this
const e=[],n=this.geometries_
let i=!1
for(let r=0,o=n.length;r<o;++r){const o=n[r],s=o.getSimplifiedGeometry(t)
e.push(s),s!==o&&(i=!0)}return i?new M(e):(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getType(){return"GeometryCollection"}intersectsExtent(t){const e=this.geometries_
for(let n=0,i=e.length;n<i;++n)if(e[n].intersectsExtent(t))return!0
return!1}isEmpty(){return 0===this.geometries_.length}rotate(t,e){const n=this.geometries_
for(let i=0,r=n.length;i<r;++i)n[i].rotate(t,e)
this.changed()}scale(t,e,n){n||(n=(0,u.q1)(this.getExtent()))
const i=this.geometries_
for(let r=0,o=i.length;r<o;++r)i[r].scale(t,e,n)
this.changed()}setGeometries(t){this.setGeometriesArray(O(t))}setGeometriesArray(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()}applyTransform(t){const e=this.geometries_
for(let n=0,i=e.length;n<i;++n)e[n].applyTransform(t)
this.changed()}translate(t,e){const n=this.geometries_
for(let i=0,r=n.length;i<r;++i)n[i].translate(t,e)
this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function O(t){return t.map((t=>t.clone()))}const N=M
var D=n(1736),F=n(72)
const k=class{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=i.A,this.supportedMediaTypes=null}getReadOptions(t,e){if(e){let n=e.dataProjection?(0,F.Jt)(e.dataProjection):this.readProjection(t)
e.extent&&n&&"tile-pixels"===n.getUnits()&&(n=(0,F.Jt)(n),n.setWorldExtent(e.extent)),e={dataProjection:n,featureProjection:e.featureProjection}}return this.adaptOptions(e)}adaptOptions(t){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},t)}getType(){return(0,D.b0)()}readFeature(t,e){return(0,D.b0)()}readFeatures(t,e){return(0,D.b0)()}readGeometry(t,e){return(0,D.b0)()}readProjection(t){return(0,D.b0)()}writeFeature(t,e){return(0,D.b0)()}writeFeatures(t,e){return(0,D.b0)()}writeGeometry(t,e){return(0,D.b0)()}}
function j(t,e,n){const i=n?(0,F.Jt)(n.featureProjection):null,r=n?(0,F.Jt)(n.dataProjection):null
let o=t
if(i&&r&&!(0,F.tI)(i,r)){e&&(o=t.clone())
const n=e?i:r,s=e?r:i
"tile-pixels"===n.getUnits()?o.transform(n,s):o.applyTransform((0,F.RG)(n,s))}if(e&&n&&void 0!==n.decimals){const e=Math.pow(10,n.decimals),i=function(t){for(let n=0,i=t.length;n<i;++n)t[n]=Math.round(t[n]*e)/e
return t}
o===t&&(o=t.clone()),o.applyTransform(i)}return o}const z={Point:o.A,LineString:s.A,Polygon:a.Ay,MultiPoint:g,MultiLineString:b,MultiPolygon:P}
function G(t,e){const n=t.geometry
if(!n)return[]
if(Array.isArray(n))return n.map((e=>G({...t,geometry:e}))).flat()
const i="MultiPolygon"===n.type?"Polygon":n.type
if("GeometryCollection"===i||"Circle"===i)throw new Error("Unsupported geometry type: "+i)
const o=n.layout.length
return j(new r.Ay(i,"Polygon"===i?function(t,e,n){return Array.isArray(e[0])?((0,w.mb)(t,0,e,n)||(t=t.slice(),(0,w.NK)(t,0,e,n)),t):((0,w.PA)(t,0,e,n)||(t=t.slice(),(0,w.ug)(t,0,e,n)),t)}(n.flatCoordinates,n.ends,o):n.flatCoordinates,n.ends?.flat(),o,t.properties||{},t.id).enableSimplifyTransformed(),!1,e)}function B(t,e){if(!t)return null
if(Array.isArray(t)){const n=t.map((t=>B(t,e)))
return new N(n)}return j(new(0,z[t.type])(t.flatCoordinates,t.layout,t.ends),!1,e)}function q(t){return"string"==typeof t?JSON.parse(t)||null:null!==t?t:null}const U=class extends k{constructor(){super()}getType(){return"json"}readFeature(t,e){return this.readFeatureFromObject(q(t),this.getReadOptions(t,e))}readFeatures(t,e){return this.readFeaturesFromObject(q(t),this.getReadOptions(t,e))}readFeatureFromObject(t,e){return(0,D.b0)()}readFeaturesFromObject(t,e){return(0,D.b0)()}readGeometry(t,e){return this.readGeometryFromObject(q(t),this.getReadOptions(t,e))}readGeometryFromObject(t,e){return(0,D.b0)()}readProjection(t){return this.readProjectionFromObject(q(t))}readProjectionFromObject(t){return(0,D.b0)()}writeFeature(t,e){return JSON.stringify(this.writeFeatureObject(t,e))}writeFeatureObject(t,e){return(0,D.b0)()}writeFeatures(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))}writeFeaturesObject(t,e){return(0,D.b0)()}writeGeometry(t,e){return JSON.stringify(this.writeGeometryObject(t,e))}writeGeometryObject(t,e){return(0,D.b0)()}}
var Z=n(7931)
function X(t,e){if(!t)return null
let n
switch(t.type){case"Point":n=function(t){const e=t.coordinates
return{type:"Point",flatCoordinates:e,layout:(0,l.p0)(e.length)}}(t)
break
case"LineString":n=function(t){const e=t.coordinates,n=e.flat()
return{type:"LineString",flatCoordinates:n,ends:[n.length],layout:(0,l.p0)(e[0]?.length||2)}}(t)
break
case"Polygon":n=function(t){const e=t.coordinates,n=[],i=e[0]?.[0]?.length
return{type:"Polygon",flatCoordinates:n,ends:(0,h.KG)(n,0,e,i),layout:(0,l.p0)(i)}}(t)
break
case"MultiPoint":n=function(t){const e=t.coordinates
return{type:"MultiPoint",flatCoordinates:e.flat(),layout:(0,l.p0)(e[0]?.length||2)}}(t)
break
case"MultiLineString":n=function(t){const e=t.coordinates,n=e[0]?.[0]?.length||2,i=[]
return{type:"MultiLineString",flatCoordinates:i,ends:(0,h.KG)(i,0,e,n),layout:(0,l.p0)(n)}}(t)
break
case"MultiPolygon":n=function(t){const e=t.coordinates,n=[],i=e[0]?.[0]?.[0].length||2
return{type:"MultiPolygon",flatCoordinates:n,ends:(0,h.d6)(n,0,e,i),layout:(0,l.p0)(i)}}(t)
break
case"GeometryCollection":n=function(t,e){return t.geometries.map((function(t){return X(t)}))}(t)
break
default:throw new Error("Unsupported GeoJSON type: "+t.type)}return n}function Y(t,e){const n=(t=j(t,!0,e)).getType()
let i
switch(n){case"Point":i=function(t,e){return{type:"Point",coordinates:t.getCoordinates()}}(t)
break
case"LineString":i=function(t,e){return{type:"LineString",coordinates:t.getCoordinates()}}(t)
break
case"Polygon":i=function(t,e){let n
return e&&(n=e.rightHanded),{type:"Polygon",coordinates:t.getCoordinates(n)}}(t,e)
break
case"MultiPoint":i=function(t,e){return{type:"MultiPoint",coordinates:t.getCoordinates()}}(t)
break
case"MultiLineString":i=function(t,e){return{type:"MultiLineString",coordinates:t.getCoordinates()}}(t)
break
case"MultiPolygon":i=function(t,e){let n
return e&&(n=e.rightHanded),{type:"MultiPolygon",coordinates:t.getCoordinates(n)}}(t,e)
break
case"GeometryCollection":i=function(t,e){return delete(e=Object.assign({},e)).featureProjection,{type:"GeometryCollection",geometries:t.getGeometriesArray().map((function(t){return Y(t,e)}))}}(t,e)
break
case"Circle":i={type:"GeometryCollection",geometries:[]}
break
default:throw new Error("Unsupported geometry type: "+n)}return i}const V=class extends U{constructor(t){t=t||{},super(),this.dataProjection=(0,F.Jt)(t.dataProjection?t.dataProjection:"EPSG:4326"),t.featureProjection&&(this.defaultFeatureProjection=(0,F.Jt)(t.featureProjection)),t.featureClass&&(this.featureClass=t.featureClass),this.geometryName_=t.geometryName,this.extractGeometryName_=t.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(t,e){let n=null
n="Feature"===t.type?t:{type:"Feature",geometry:t,properties:null}
const o=X(n.geometry)
if(this.featureClass===r.Ay)return G({geometry:o,id:n.id,properties:n.properties},e)
const s=new i.A
return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&n.geometry_name&&s.setGeometryName(n.geometry_name),s.setGeometry(B(o,e)),"id"in n&&s.setId(n.id),n.properties&&s.setProperties(n.properties,!0),s}readFeaturesFromObject(t,e){let n=null
if("FeatureCollection"===t.type){n=[]
const i=t.features
for(let t=0,r=i.length;t<r;++t){const r=this.readFeatureFromObject(i[t],e)
r&&n.push(r)}}else n=[this.readFeatureFromObject(t,e)]
return n.flat()}readGeometryFromObject(t,e){return function(t,e){return B(X(t),e)}(t,e)}readProjectionFromObject(t){const e=t.crs
let n
if(e)if("name"==e.type)n=(0,F.Jt)(e.properties.name)
else{if("EPSG"!==e.type)throw new Error("Unknown SRS type")
n=(0,F.Jt)("EPSG:"+e.properties.code)}else n=this.dataProjection
return n}writeFeatureObject(t,e){e=this.adaptOptions(e)
const n={type:"Feature",geometry:null,properties:null},i=t.getId()
if(void 0!==i&&(n.id=i),!t.hasProperties())return n
const r=t.getProperties(),o=t.getGeometry()
return o&&(n.geometry=Y(o,e),delete r[t.getGeometryName()]),(0,Z.p)(r)||(n.properties=r),n}writeFeaturesObject(t,e){e=this.adaptOptions(e)
const n=[]
for(let i=0,r=t.length;i<r;++i)n.push(this.writeFeatureObject(t[i],e))
return{type:"FeatureCollection",features:n}}writeGeometryObject(t,e){return Y(t,this.adaptOptions(e))}}},419:(t,e,n)=>{"use strict"
n.d(e,{B4:()=>a,W8:()=>o,hq:()=>l,rT:()=>r,tV:()=>s})
var i=n(7195)
function r(){return!0}function o(){return!1}function s(){}function a(t){let e,n,r,o=!1
return function(){const s=Array.prototype.slice.call(arguments)
return o&&this===r&&(0,i.aI)(s,n)||(o=!0,r=this,n=s,e=t.apply(this,arguments)),e}}function l(t){return function(){let e
try{e=t()}catch(t){return Promise.reject(t)}return e instanceof Promise?e:Promise.resolve(e)}()}},4783:(t,e,n)=>{"use strict"
n.d(e,{A:()=>f})
var i=n(1051),r=n(1736),o=n(2282),s=n(3236),a=n(72),l=n(419),u=n(2363)
const h=(0,o.vt)()
class c extends i.A{constructor(){super(),this.extent_=(0,s.S5)(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=(0,l.B4)(((t,e,n)=>{if(!n)return this.getSimplifiedGeometry(e)
const i=this.clone()
return i.applyTransform(n),i.getSimplifiedGeometry(e)}))}simplifyTransformed(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}clone(){return(0,r.b0)()}closestPointXY(t,e,n,i){return(0,r.b0)()}containsXY(t,e){const n=this.getClosestPoint([t,e])
return n[0]===t&&n[1]===e}getClosestPoint(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return(0,r.b0)()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&(0,s.aZ)(t),this.extentRevision_=this.getRevision()}return(0,s.$u)(this.extent_,t)}rotate(t,e){(0,r.b0)()}scale(t,e,n){(0,r.b0)()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return(0,r.b0)()}getType(){return(0,r.b0)()}applyTransform(t){(0,r.b0)()}intersectsExtent(t){return(0,r.b0)()}translate(t,e){(0,r.b0)()}transform(t,e){const n=(0,a.Jt)(t),i="tile-pixels"==n.getUnits()?function(t,i,r){const l=n.getExtent(),c=n.getWorldExtent(),f=(0,s.Oq)(c)/(0,s.Oq)(l)
return(0,o.Zz)(h,c[0],c[3],f,-f,0,0,0),(0,u.Rc)(t,0,t.length,r,h,i),(0,a.RG)(n,e)(t,i,r)}:(0,a.RG)(n,e)
return this.applyTransform(i),this}}const f=c},4008:(t,e,n)=>{"use strict"
n.d(e,{A:()=>g})
var i=n(9009),r=n(2408),o=n(3236),s=n(2656),a=n(5216),l=n(7195),u=n(6825),h=n(812),c=n(4900),f=n(601),p=n(6963)
class d extends i.Ay{constructor(t,e){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}appendCoordinate(t){(0,l.X$)(this.flatCoordinates,t),this.changed()}clone(){const t=new d(this.flatCoordinates.slice(),this.layout)
return t.applyProperties(this),t}closestPointXY(t,e,n,i){return i<(0,o.Ld)(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,r.MD)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,r.n)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,n,i))}forEachSegment(t){return(0,u.j)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,e){return"XYM"!=this.layout&&"XYZM"!=this.layout?null:(e=void 0!==e&&e,(0,c.gr)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e))}getCoordinates(){return(0,h.n2)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,e){return(0,c.SH)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)}getLength(){return(0,p.k)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){const e=[]
return e.length=(0,a.P4)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new d(e,"XY")}getType(){return"LineString"}intersectsExtent(t){return(0,f.gp)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,s.z2)(this.flatCoordinates,0,t,this.stride),this.changed()}}const g=d},8225:(t,e,n)=>{"use strict"
n.d(e,{A:()=>l})
var i=n(9009),r=n(3236),o=n(2656),s=n(5306)
class a extends i.Ay{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){const t=new a(this.flatCoordinates.slice(),this.layout)
return t.applyProperties(this),t}closestPointXY(t,e,n,i){const r=this.flatCoordinates,o=(0,s.hG)(t,e,r[0],r[1])
if(o<i){const t=this.stride
for(let e=0;e<t;++e)n[e]=r[e]
return n.length=t,o}return i}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(t){return(0,r.dP)(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return(0,r.Rj)(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,o._n)(this.flatCoordinates,0,t,this.stride),this.changed()}}const l=a},5631:(t,e,n)=>{"use strict"
n.d(e,{Ay:()=>v,VY:()=>x})
var i=n(9009),r=n(2408),o=n(3236),s=n(2656),a=n(5216),l=n(812),u=n(8066)
class h extends i.Ay{constructor(t,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}clone(){return new h(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,e,n,i){return i<(0,o.Ld)(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,r.MD)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,r.n)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,n,i))}getArea(){return(0,u.eN)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return(0,l.n2)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const e=[]
return e.length=(0,a.P4)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new h(e,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,s.z2)(this.flatCoordinates,0,t,this.stride),this.changed()}}const c=h
var f=n(8225),p=n(7195),d=n(1129),g=n(601),_=n(3861),m=n(6554)
class y extends i.Ay{constructor(t,e,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==e&&n?(this.setFlatCoordinates(e,t),this.ends_=n):this.setCoordinates(t,e)}appendLinearRing(t){this.flatCoordinates?(0,p.X$)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new y(this.flatCoordinates.slice(),this.layout,this.ends_.slice())
return t.applyProperties(this),t}closestPointXY(t,e,n,i){return i<(0,o.Ld)(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,r.HX)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,r.oW)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,n,i))}containsXY(t,e){return(0,m.zb)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}getArea(){return(0,u.PK)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let e
return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),(0,_.ug)(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,(0,l.cD)(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=(0,o.q1)(this.getExtent())
this.flatInteriorPoint_=(0,d.J)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new f.A(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new c(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,e=this.flatCoordinates,n=this.ends_,i=[]
let r=0
for(let o=0,s=n.length;o<s;++o){const s=n[o],a=new c(e.slice(r,s),t)
i.push(a),r=s}return i}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;(0,_.PA)(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=(0,_.ug)(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],n=[]
return e.length=(0,a.Hg)(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,n),new y(e,"XY",n)}getType(){return"Polygon"}intersectsExtent(t){return(0,g.HT)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[])
const n=(0,s.KG)(this.flatCoordinates,0,t,this.stride,this.ends_)
this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()}}const v=y
function x(t){if((0,o.Im)(t))throw new Error("Cannot create polygon from empty extent")
const e=t[0],n=t[1],i=t[2],r=t[3],s=[e,n,e,r,i,r,i,n,e,n]
return new y(s,"XY",[s.length])}},9009:(t,e,n)=>{"use strict"
n.d(e,{Ay:()=>c,p0:()=>l,v7:()=>h})
var i=n(4783),r=n(1736),o=n(3236),s=n(2363)
class a extends i.A{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(t){return(0,o.Vy)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return(0,r.b0)()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this
const e=this.getSimplifiedGeometryInternal(t)
return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=u(t),this.layout=t,this.flatCoordinates=e}setCoordinates(t,e){(0,r.b0)()}setLayout(t,e,n){let i
if(t)i=u(t)
else{for(let t=0;t<n;++t){if(0===e.length)return this.layout="XY",void(this.stride=2)
e=e[0]}i=e.length,t=l(i)}this.layout=t,this.stride=i}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(t,e){const n=this.getFlatCoordinates()
if(n){const i=this.getStride();(0,s.e$)(n,0,n.length,i,t,e,n),this.changed()}}scale(t,e,n){void 0===e&&(e=t),n||(n=(0,o.q1)(this.getExtent()))
const i=this.getFlatCoordinates()
if(i){const r=this.getStride();(0,s.hs)(i,0,i.length,r,t,e,n,i),this.changed()}}translate(t,e){const n=this.getFlatCoordinates()
if(n){const i=this.getStride();(0,s.Tl)(n,0,n.length,i,t,e,n),this.changed()}}}function l(t){let e
return 2==t?e="XY":3==t?e="XYZ":4==t&&(e="XYZM"),e}function u(t){let e
return"XY"==t?e=2:"XYZ"==t||"XYM"==t?e=3:"XYZM"==t&&(e=4),e}function h(t,e,n){const i=t.getFlatCoordinates()
if(!i)return null
const r=t.getStride()
return(0,s.Rc)(i,0,i.length,r,e,n)}const c=a},8066:(t,e,n)=>{"use strict"
function i(t,e,n,i){let r=0,o=t[n-i],s=t[n-i+1]
for(;e<n;e+=i){const n=t[e],i=t[e+1]
r+=s*n-o*i,o=n,s=i}return r/2}function r(t,e,n,r){let o=0
for(let s=0,a=n.length;s<a;++s){const a=n[s]
o+=i(t,e,a,r),e=a}return o}function o(t,e,n,i){let o=0
for(let s=0,a=n.length;s<a;++s){const a=n[s]
o+=r(t,e,a,i),e=a[a.length-1]}return o}n.d(e,{Cs:()=>o,PK:()=>r,eN:()=>i})},9354:(t,e,n)=>{"use strict"
n.d(e,{C:()=>r})
var i=n(3236)
function r(t,e,n,r){const o=[]
let s=(0,i.S5)()
for(let a=0,l=n.length;a<l;++a){const l=n[a]
s=(0,i.Vy)(t,e,l[0],r),o.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=l[l.length-1]}return o}},2408:(t,e,n)=>{"use strict"
n.d(e,{HX:()=>s,MD:()=>o,c:()=>a,n:()=>l,oW:()=>u,te:()=>h})
var i=n(5306)
function r(t,e,n,r,o,s,a){const l=t[e],u=t[e+1],h=t[n]-l,c=t[n+1]-u
let f
if(0===h&&0===c)f=e
else{const p=((o-l)*h+(s-u)*c)/(h*h+c*c)
if(p>1)f=n
else{if(p>0){for(let o=0;o<r;++o)a[o]=(0,i.Cc)(t[e+o],t[n+o],p)
return void(a.length=r)}f=e}}for(let i=0;i<r;++i)a[i]=t[f+i]
a.length=r}function o(t,e,n,r,o){let s=t[e],a=t[e+1]
for(e+=r;e<n;e+=r){const n=t[e],r=t[e+1],l=(0,i.hG)(s,a,n,r)
l>o&&(o=l),s=n,a=r}return o}function s(t,e,n,i,r){for(let s=0,a=n.length;s<a;++s){const a=n[s]
r=o(t,e,a,i,r),e=a}return r}function a(t,e,n,i,r){for(let o=0,a=n.length;o<a;++o){const a=n[o]
r=s(t,e,a,i,r),e=a[a.length-1]}return r}function l(t,e,n,o,s,a,l,u,h,c,f){if(e==n)return c
let p,d
if(0===s){if(d=(0,i.hG)(l,u,t[e],t[e+1]),d<c){for(p=0;p<o;++p)h[p]=t[e+p]
return h.length=o,d}return c}f=f||[NaN,NaN]
let g=e+o
for(;g<n;)if(r(t,g-o,g,o,l,u,f),d=(0,i.hG)(l,u,f[0],f[1]),d<c){for(c=d,p=0;p<o;++p)h[p]=f[p]
h.length=o,g+=o}else g+=o*Math.max((Math.sqrt(d)-Math.sqrt(c))/s|0,1)
if(a&&(r(t,n-o,e,o,l,u,f),d=(0,i.hG)(l,u,f[0],f[1]),d<c)){for(c=d,p=0;p<o;++p)h[p]=f[p]
h.length=o}return c}function u(t,e,n,i,r,o,s,a,u,h,c){c=c||[NaN,NaN]
for(let f=0,p=n.length;f<p;++f){const p=n[f]
h=l(t,e,p,i,r,o,s,a,u,h,c),e=p}return h}function h(t,e,n,i,r,o,s,a,l,h,c){c=c||[NaN,NaN]
for(let f=0,p=n.length;f<p;++f){const p=n[f]
h=u(t,e,p,i,r,o,s,a,l,h,c),e=p[p.length-1]}return h}},6554:(t,e,n)=>{"use strict"
n.d(e,{Gd:()=>a,a_:()=>o,t7:()=>r,zb:()=>s})
var i=n(3236)
function r(t,e,n,r,s){return!(0,i.sB)(s,(function(i){return!o(t,e,n,r,i[0],i[1])}))}function o(t,e,n,i,r,o){let s=0,a=t[n-i],l=t[n-i+1]
for(;e<n;e+=i){const n=t[e],i=t[e+1]
l<=o?i>o&&(n-a)*(o-l)-(r-a)*(i-l)>0&&s++:i<=o&&(n-a)*(o-l)-(r-a)*(i-l)<0&&s--,a=n,l=i}return 0!==s}function s(t,e,n,i,r,s){if(0===n.length)return!1
if(!o(t,e,n[0],i,r,s))return!1
for(let a=1,l=n.length;a<l;++a)if(o(t,n[a-1],n[a],i,r,s))return!1
return!0}function a(t,e,n,i,r,o){if(0===n.length)return!1
for(let a=0,l=n.length;a<l;++a){const l=n[a]
if(s(t,e,l,i,r,o))return!0
e=l[l.length-1]}return!1}},2656:(t,e,n)=>{"use strict"
function i(t,e,n,i){for(let r=0,o=n.length;r<o;++r)t[e++]=n[r]
return e}function r(t,e,n,i){for(let r=0,o=n.length;r<o;++r){const o=n[r]
for(let n=0;n<i;++n)t[e++]=o[n]}return e}function o(t,e,n,i,o){o=o||[]
let s=0
for(let a=0,l=n.length;a<l;++a){const l=r(t,e,n[a],i)
o[s++]=l,e=l}return o.length=s,o}function s(t,e,n,i,r){r=r||[]
let s=0
for(let a=0,l=n.length;a<l;++a){const l=o(t,e,n[a],i,r[s])
0===l.length&&(l[0]=e),r[s++]=l,e=l[l.length-1]}return r.length=s,r}n.d(e,{KG:()=>o,_n:()=>i,d6:()=>s,z2:()=>r})},812:(t,e,n)=>{"use strict"
function i(t,e,n,i,r){r=void 0!==r?r:[]
let o=0
for(let s=e;s<n;s+=i)r[o++]=t.slice(s,s+i)
return r.length=o,r}function r(t,e,n,r,o){o=void 0!==o?o:[]
let s=0
for(let a=0,l=n.length;a<l;++a){const l=n[a]
o[s++]=i(t,e,l,r,o[s]),e=l}return o.length=s,o}function o(t,e,n,i,o){o=void 0!==o?o:[]
let s=0
for(let a=0,l=n.length;a<l;++a){const l=n[a]
o[s++]=1===l.length&&l[0]===e?[]:r(t,e,l,i,o[s]),e=l[l.length-1]}return o.length=s,o}n.d(e,{Dz:()=>o,cD:()=>r,n2:()=>i})},1129:(t,e,n)=>{"use strict"
n.d(e,{J:()=>o,p:()=>s})
var i=n(7195),r=n(6554)
function o(t,e,n,o,s,a,l){let u,h,c,f,p,d,g
const _=s[a+1],m=[]
for(let i=0,r=n.length;i<r;++i){const r=n[i]
for(f=t[r-o],d=t[r-o+1],u=e;u<r;u+=o)p=t[u],g=t[u+1],(_<=d&&g<=_||d<=_&&_<=g)&&(c=(_-d)/(g-d)*(p-f)+f,m.push(c)),f=p,d=g}let y=NaN,v=-1/0
for(m.sort(i.V_),f=m[0],u=1,h=m.length;u<h;++u){p=m[u]
const i=Math.abs(p-f)
i>v&&(c=(f+p)/2,(0,r.zb)(t,e,n,o,c,_)&&(y=c,v=i)),f=p}return isNaN(y)&&(y=s[a]),l?(l.push(y,_,v),l):[y,_,v]}function s(t,e,n,i,r){let s=[]
for(let a=0,l=n.length;a<l;++a){const l=n[a]
s=o(t,e,l,i,r,2*a,s),e=l[l.length-1]}return s}},4900:(t,e,n)=>{"use strict"
n.d(e,{L8:()=>a,SH:()=>o,gr:()=>s})
var i=n(7195),r=n(5306)
function o(t,e,n,o,s,a,l){let u,h
const c=(n-e)/o
if(1===c)u=e
else if(2===c)u=e,h=s
else if(0!==c){let r=t[e],a=t[e+1],l=0
const c=[0]
for(let i=e+o;i<n;i+=o){const e=t[i],n=t[i+1]
l+=Math.sqrt((e-r)*(e-r)+(n-a)*(n-a)),c.push(l),r=e,a=n}const f=s*l,p=(0,i.El)(c,f)
p<0?(h=(f-c[-p-2])/(c[-p-1]-c[-p-2]),u=e+(-p-2)*o):u=e+p*o}l=l>1?l:2,a=a||new Array(l)
for(let i=0;i<l;++i)a[i]=void 0===u?NaN:void 0===h?t[u+i]:(0,r.Cc)(t[u+i],t[u+o+i],h)
return a}function s(t,e,n,i,o,s){if(n==e)return null
let a
if(o<t[e+i-1])return s?(a=t.slice(e,e+i),a[i-1]=o,a):null
if(t[n-1]<o)return s?(a=t.slice(n-i,n),a[i-1]=o,a):null
if(o==t[e+i-1])return t.slice(e,e+i)
let l=e/i,u=n/i
for(;l<u;){const e=l+u>>1
o<t[(e+1)*i-1]?u=e:l=e+1}const h=t[l*i-1]
if(o==h)return t.slice((l-1)*i,(l-1)*i+i)
const c=(o-h)/(t[(l+1)*i-1]-h)
a=[]
for(let f=0;f<i-1;++f)a.push((0,r.Cc)(t[(l-1)*i+f],t[l*i+f],c))
return a.push(o),a}function a(t,e,n,i,r,o,a){if(a)return s(t,e,n[n.length-1],i,r,o)
let l
if(r<t[i-1])return o?(l=t.slice(0,i),l[i-1]=r,l):null
if(t[t.length-1]<r)return o?(l=t.slice(t.length-i),l[i-1]=r,l):null
for(let u=0,h=n.length;u<h;++u){const o=n[u]
if(e!=o){if(r<t[e+i-1])return null
if(r<=t[o-1])return s(t,e,o,i,r,!1)
e=o}}return null}},601:(t,e,n)=>{"use strict"
n.d(e,{HT:()=>u,Wp:()=>h,fB:()=>a,gp:()=>s,sj:()=>l})
var i=n(3236),r=n(6825),o=n(6554)
function s(t,e,n,o,s){const a=(0,i.R8)((0,i.S5)(),t,e,n,o)
return!!(0,i.HY)(s,a)&&(!!(0,i.ms)(s,a)||a[0]>=s[0]&&a[2]<=s[2]||a[1]>=s[1]&&a[3]<=s[3]||(0,r.j)(t,e,n,o,(function(t,e){return(0,i.Mx)(s,t,e)})))}function a(t,e,n,i,r){for(let o=0,a=n.length;o<a;++o){if(s(t,e,n[o],i,r))return!0
e=n[o]}return!1}function l(t,e,n,i,r){return!!(s(t,e,n,i,r)||(0,o.a_)(t,e,n,i,r[0],r[1])||(0,o.a_)(t,e,n,i,r[0],r[3])||(0,o.a_)(t,e,n,i,r[2],r[1])||(0,o.a_)(t,e,n,i,r[2],r[3]))}function u(t,e,n,i,r){if(!l(t,e,n[0],i,r))return!1
if(1===n.length)return!0
for(let a=1,l=n.length;a<l;++a)if((0,o.t7)(t,n[a-1],n[a],i,r)&&!s(t,n[a-1],n[a],i,r))return!1
return!0}function h(t,e,n,i,r){for(let o=0,s=n.length;o<s;++o){const s=n[o]
if(u(t,e,s,i,r))return!0
e=s[s.length-1]}return!1}},6963:(t,e,n)=>{"use strict"
function i(t,e,n,i){let r=t[e],o=t[e+1],s=0
for(let a=e+i;a<n;a+=i){const e=t[a],n=t[a+1]
s+=Math.sqrt((e-r)*(e-r)+(n-o)*(n-o)),r=e,o=n}return s}n.d(e,{k:()=>i})},3861:(t,e,n)=>{"use strict"
function i(t,e,n,i){for(;e<n-i;){for(let r=0;r<i;++r){const o=t[e+r]
t[e+r]=t[n-i+r],t[n-i+r]=o}e+=i,n-=i}}function r(t,e,n,i){let r=0,o=t[n-i],s=t[n-i+1]
for(;e<n;e+=i){const n=t[e],i=t[e+1]
r+=(n-o)*(i+s),o=n,s=i}return 0===r?void 0:r>0}function o(t,e,n,i,o){o=void 0!==o&&o
for(let s=0,a=n.length;s<a;++s){const a=n[s],l=r(t,e,a,i)
if(0===s){if(o&&l||!o&&!l)return!1}else if(o&&!l||!o&&l)return!1
e=a}return!0}function s(t,e,n,i,r){for(let s=0,a=n.length;s<a;++s){const a=n[s]
if(!o(t,e,a,i,r))return!1
a.length&&(e=a[a.length-1])}return!0}function a(t,e,n,o,s){s=void 0!==s&&s
for(let a=0,l=n.length;a<l;++a){const l=n[a],u=r(t,e,l,o);(0===a?s&&u||!s&&!u:s&&!u||!s&&u)&&i(t,e,l,o),e=l}return e}function l(t,e,n,i,r){for(let o=0,s=n.length;o<s;++o)e=a(t,e,n[o],i,r)
return e}function u(t,e){const n=[]
let i,o=0,s=0
for(let a=0,l=e.length;a<l;++a){const l=e[a],u=r(t,o,l,2)
if(void 0===i&&(i=u),u===i)n.push(e.slice(s,a+1))
else{if(0===n.length)continue
n[n.length-1].push(e[s])}s=a+1,o=l}return n}n.d(e,{yJ:()=>u,PA:()=>o,mb:()=>s,ug:()=>a,NK:()=>l})},6825:(t,e,n)=>{"use strict"
function i(t,e,n,i,r){let o
for(e+=i;e<n;e+=i)if(o=r(t.slice(e-i,e),t.slice(e,e+i)),o)return o
return!1}n.d(e,{j:()=>i})},5216:(t,e,n)=>{"use strict"
n.d(e,{AL:()=>o,Hg:()=>l,P4:()=>r,n$:()=>s,sx:()=>u})
var i=n(5306)
function r(t,e,n,r,o,s,a){const l=(n-e)/r
if(l<3){for(;e<n;e+=r)s[a++]=t[e],s[a++]=t[e+1]
return a}const u=new Array(l)
u[0]=1,u[l-1]=1
const h=[e,n-r]
let c=0
for(;h.length>0;){const n=h.pop(),s=h.pop()
let a=0
const l=t[s],f=t[s+1],p=t[n],d=t[n+1]
for(let e=s+r;e<n;e+=r){const n=t[e],r=t[e+1],o=(0,i.Q1)(n,r,l,f,p,d)
o>a&&(c=e,a=o)}a>o&&(u[(c-e)/r]=1,s+r<c&&h.push(s,c),c+r<n&&h.push(c,n))}for(let i=0;i<l;++i)u[i]&&(s[a++]=t[e+i*r],s[a++]=t[e+i*r+1])
return a}function o(t,e,n,i,o,s,a,l){for(let u=0,h=n.length;u<h;++u){const h=n[u]
a=r(t,e,h,i,o,s,a),l.push(a),e=h}return a}function s(t,e){return e*Math.round(t/e)}function a(t,e,n,i,r,o,a){if(e==n)return a
let l,u,h=s(t[e],r),c=s(t[e+1],r)
e+=i,o[a++]=h,o[a++]=c
do{if(l=s(t[e],r),u=s(t[e+1],r),(e+=i)==n)return o[a++]=l,o[a++]=u,a}while(l==h&&u==c)
for(;e<n;){const n=s(t[e],r),f=s(t[e+1],r)
if(e+=i,n==l&&f==u)continue
const p=l-h,d=u-c,g=n-h,_=f-c
p*_==d*g&&(p<0&&g<p||p==g||p>0&&g>p)&&(d<0&&_<d||d==_||d>0&&_>d)?(l=n,u=f):(o[a++]=l,o[a++]=u,h=l,c=u,l=n,u=f)}return o[a++]=l,o[a++]=u,a}function l(t,e,n,i,r,o,s,l){for(let u=0,h=n.length;u<h;++u){const h=n[u]
s=a(t,e,h,i,r,o,s),l.push(s),e=h}return s}function u(t,e,n,i,r,o,s,a){for(let u=0,h=n.length;u<h;++u){const h=n[u],c=[]
s=l(t,e,h,i,r,o,s,c),a.push(c),e=h[h.length-1]}return s}},2363:(t,e,n)=>{"use strict"
function i(t,e,n,i,r,o){o=o||[]
let s=0
for(let a=e;a<n;a+=i){const e=t[a],n=t[a+1]
o[s++]=r[0]*e+r[2]*n+r[4],o[s++]=r[1]*e+r[3]*n+r[5]}return o&&o.length!=s&&(o.length=s),o}function r(t,e,n,i,r,o,s){s=s||[]
const a=Math.cos(r),l=Math.sin(r),u=o[0],h=o[1]
let c=0
for(let f=e;f<n;f+=i){const e=t[f]-u,n=t[f+1]-h
s[c++]=u+e*a-n*l,s[c++]=h+e*l+n*a
for(let r=f+2;r<f+i;++r)s[c++]=t[r]}return s&&s.length!=c&&(s.length=c),s}function o(t,e,n,i,r,o,s,a){a=a||[]
const l=s[0],u=s[1]
let h=0
for(let c=e;c<n;c+=i){const e=t[c]-l,n=t[c+1]-u
a[h++]=l+r*e,a[h++]=u+o*n
for(let r=c+2;r<c+i;++r)a[h++]=t[r]}return a&&a.length!=h&&(a.length=h),a}function s(t,e,n,i,r,o,s){s=s||[]
let a=0
for(let l=e;l<n;l+=i){s[a++]=t[l]+r,s[a++]=t[l+1]+o
for(let e=l+2;e<l+i;++e)s[a++]=t[e]}return s&&s.length!=a&&(s.length=a),s}n.d(e,{Rc:()=>i,Tl:()=>s,e$:()=>r,hs:()=>o})},1622:(t,e,n)=>{"use strict"
n.d(e,{DT:()=>h,FT:()=>f,Wl:()=>u,XM:()=>c,_p:()=>r,cr:()=>l,ew:()=>a,j:()=>s,oF:()=>o})
const i="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",r=i.includes("firefox"),o=i.includes("safari")&&!i.includes("chrom")&&(i.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(i)),s=i.includes("webkit")&&!i.includes("edge"),a=i.includes("macintosh"),l="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,u="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,h="undefined"!=typeof Image&&Image.prototype.decode,c="function"==typeof createImageBitmap,f=function(){let t=!1
try{const e=Object.defineProperty({},"passive",{get:function(){t=!0}})
window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch(t){}return t}()},2896:(t,e,n)=>{"use strict"
n.r(e),n.d(e,{Graticule:()=>Rt,Group:()=>Lt.A,Heatmap:()=>xn,Image:()=>bn.A,Layer:()=>En.A,Tile:()=>wn.A,Vector:()=>Ct,VectorImage:()=>Ln,VectorTile:()=>zn,WebGLPoints:()=>$n,WebGLTile:()=>ti})
var i=n(3844),r=n(8411),o=n(9656),s=n(8343),a=n(4008),l=n(8225),u=n(7110),h=n(5337),c=n(9769),f=n(6789)
const p={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},d=[p.FILL],g=[p.STROKE],_=[p.BEGIN_PATH],m=[p.CLOSE_PATH],y=p
var v=n(937)
const x=class{drawCustom(t,e,n,i,r){}drawGeometry(t){}setStyle(t){}drawCircle(t,e,n){}drawFeature(t,e,n){}drawGeometryCollection(t,e,n){}drawLineString(t,e,n){}drawMultiLineString(t,e,n){}drawMultiPoint(t,e,n){}drawMultiPolygon(t,e,n){}drawPoint(t,e,n){}drawPolygon(t,e,n){}drawText(t,e,n){}setFillStrokeStyle(t,e){}setImageStyle(t,e){}setTextStyle(t,e){}}
var b=n(7382),E=n(3236),w=n(223),S=n(7195),C=n(812)
const T=class extends x{constructor(t,e,n,i){super(),this.tolerance=t,this.maxExtent=e,this.pixelRatio=i,this.maxLineWidth=0,this.resolution=n,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const e=this.pixelRatio
return 1==e?t:t.map((function(t){return t*e}))}appendFlatPointCoordinates(t,e){const n=this.getBufferedMaxExtent(),i=this.tmpCoordinate_,r=this.coordinates
let o=r.length
for(let s=0,a=t.length;s<a;s+=e)i[0]=t[s],i[1]=t[s+1],(0,E.Ym)(n,i)&&(r[o++]=i[0],r[o++]=i[1])
return o}appendFlatLineCoordinates(t,e,n,i,r,o){const s=this.coordinates
let a=s.length
const l=this.getBufferedMaxExtent()
o&&(e+=i)
let u=t[e],h=t[e+1]
const c=this.tmpCoordinate_
let f,p,d,g=!0
for(f=e+i;f<n;f+=i)c[0]=t[f],c[1]=t[f+1],d=(0,E.vz)(l,c),d!==p?(g&&(s[a++]=u,s[a++]=h,g=!1),s[a++]=c[0],s[a++]=c[1]):d===v.A.INTERSECTING?(s[a++]=c[0],s[a++]=c[1],g=!1):g=!0,u=c[0],h=c[1],p=d
return(r&&g||f===e+i)&&(s[a++]=u,s[a++]=h),a}drawCustomCoordinates_(t,e,n,i,r){for(let o=0,s=n.length;o<s;++o){const s=n[o],a=this.appendFlatLineCoordinates(t,e,s,i,!1,!1)
r.push(a),e=s}return e}drawCustom(t,e,n,i,r){this.beginGeometry(t,e,r)
const o=t.getType(),s=t.getStride(),a=this.coordinates.length
let l,u,h,c,f
switch(o){case"MultiPolygon":l=t.getOrientedFlatCoordinates(),c=[]
const e=t.getEndss()
f=0
for(let t=0,n=e.length;t<n;++t){const n=[]
f=this.drawCustomCoordinates_(l,f,e[t],s,n),c.push(n)}this.instructions.push([y.CUSTOM,a,c,t,n,C.Dz,r]),this.hitDetectionInstructions.push([y.CUSTOM,a,c,t,i||n,C.Dz,r])
break
case"Polygon":case"MultiLineString":h=[],l="Polygon"==o?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),f=this.drawCustomCoordinates_(l,0,t.getEnds(),s,h),this.instructions.push([y.CUSTOM,a,h,t,n,C.cD,r]),this.hitDetectionInstructions.push([y.CUSTOM,a,h,t,i||n,C.cD,r])
break
case"LineString":case"Circle":l=t.getFlatCoordinates(),u=this.appendFlatLineCoordinates(l,0,l.length,s,!1,!1),this.instructions.push([y.CUSTOM,a,u,t,n,C.n2,r]),this.hitDetectionInstructions.push([y.CUSTOM,a,u,t,i||n,C.n2,r])
break
case"MultiPoint":l=t.getFlatCoordinates(),u=this.appendFlatPointCoordinates(l,s),u>a&&(this.instructions.push([y.CUSTOM,a,u,t,n,C.n2,r]),this.hitDetectionInstructions.push([y.CUSTOM,a,u,t,i||n,C.n2,r]))
break
case"Point":l=t.getFlatCoordinates(),this.coordinates.push(l[0],l[1]),u=this.coordinates.length,this.instructions.push([y.CUSTOM,a,u,t,n,void 0,r]),this.hitDetectionInstructions.push([y.CUSTOM,a,u,t,i||n,void 0,r])}this.endGeometry(e)}beginGeometry(t,e,n){this.beginGeometryInstruction1_=[y.BEGIN_GEOMETRY,e,0,t,n],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[y.BEGIN_GEOMETRY,e,0,t,n],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions
let e
t.reverse()
const n=t.length
let i,r,o=-1
for(e=0;e<n;++e)i=t[e],r=i[0],r==y.END_GEOMETRY?o=e:r==y.BEGIN_GEOMETRY&&(i[2]=e,(0,S.gI)(this.hitDetectionInstructions,o,e),o=-1)}setFillStrokeStyle(t,e){const n=this.state
if(t){const e=t.getColor()
n.fillPatternScale=e&&"object"==typeof e&&"src"in e?this.pixelRatio:1,n.fillStyle=(0,b.F)(e||w.qY)}else n.fillStyle=void 0
if(e){const t=e.getColor()
n.strokeStyle=(0,b.F)(t||w.NT)
const i=e.getLineCap()
n.lineCap=void 0!==i?i:w._m
const r=e.getLineDash()
n.lineDash=r?r.slice():w.Oq
const o=e.getLineDashOffset()
n.lineDashOffset=o||w.vk
const s=e.getLineJoin()
n.lineJoin=void 0!==s?s:w._K
const a=e.getWidth()
n.lineWidth=void 0!==a?a:w.aq
const l=e.getMiterLimit()
n.miterLimit=void 0!==l?l:w.eL,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0}createFill(t){const e=t.fillStyle,n=[y.SET_FILL_STYLE,e]
return"string"!=typeof e&&n.push(t.fillPatternScale),n}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[y.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,e){const n=t.fillStyle
"string"==typeof n&&t.currentFillStyle==n||(void 0!==n&&this.instructions.push(e.call(this,t)),t.currentFillStyle=n)}updateStrokeStyle(t,e){const n=t.strokeStyle,i=t.lineCap,r=t.lineDash,o=t.lineDashOffset,s=t.lineJoin,a=t.lineWidth,l=t.miterLimit;(t.currentStrokeStyle!=n||t.currentLineCap!=i||r!=t.currentLineDash&&!(0,S.aI)(t.currentLineDash,r)||t.currentLineDashOffset!=o||t.currentLineJoin!=s||t.currentLineWidth!=a||t.currentMiterLimit!=l)&&(void 0!==n&&e.call(this,t),t.currentStrokeStyle=n,t.currentLineCap=i,t.currentLineDash=r,t.currentLineDashOffset=o,t.currentLineJoin=s,t.currentLineWidth=a,t.currentMiterLimit=l)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null
const e=[y.END_GEOMETRY,t]
this.instructions.push(e),this.hitDetectionInstructions.push(e)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=(0,E.o8)(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;(0,E.r)(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}
var I=n(5216)
const P=class extends T{constructor(t,e,n,i){super(t,e,n,i)}drawFlatCoordinatess_(t,e,n,i){const r=this.state,o=void 0!==r.fillStyle,s=void 0!==r.strokeStyle,a=n.length
this.instructions.push(_),this.hitDetectionInstructions.push(_)
for(let l=0;l<a;++l){const r=n[l],o=this.coordinates.length,a=this.appendFlatLineCoordinates(t,e,r,i,!0,!s),u=[y.MOVE_TO_LINE_TO,o,a]
this.instructions.push(u),this.hitDetectionInstructions.push(u),s&&(this.instructions.push(m),this.hitDetectionInstructions.push(m)),e=r}return o&&(this.instructions.push(d),this.hitDetectionInstructions.push(d)),s&&(this.instructions.push(g),this.hitDetectionInstructions.push(g)),e}drawCircle(t,e,n){const i=this.state,r=i.fillStyle,o=i.strokeStyle
if(void 0===r&&void 0===o)return
this.setFillStrokeStyles_(),this.beginGeometry(t,e,n),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([y.SET_FILL_STYLE,w.qY]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([y.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,w.Oq,w.vk])
const s=t.getFlatCoordinates(),a=t.getStride(),l=this.coordinates.length
this.appendFlatLineCoordinates(s,0,s.length,a,!1,!1)
const u=[y.CIRCLE,l]
this.instructions.push(_,u),this.hitDetectionInstructions.push(_,u),void 0!==i.fillStyle&&(this.instructions.push(d),this.hitDetectionInstructions.push(d)),void 0!==i.strokeStyle&&(this.instructions.push(g),this.hitDetectionInstructions.push(g)),this.endGeometry(e)}drawPolygon(t,e,n){const i=this.state,r=i.fillStyle,o=i.strokeStyle
if(void 0===r&&void 0===o)return
this.setFillStrokeStyles_(),this.beginGeometry(t,e,n),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([y.SET_FILL_STYLE,w.qY]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([y.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,w.Oq,w.vk])
const s=t.getEnds(),a=t.getOrientedFlatCoordinates(),l=t.getStride()
this.drawFlatCoordinatess_(a,0,s,l),this.endGeometry(e)}drawMultiPolygon(t,e,n){const i=this.state,r=i.fillStyle,o=i.strokeStyle
if(void 0===r&&void 0===o)return
this.setFillStrokeStyles_(),this.beginGeometry(t,e,n),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([y.SET_FILL_STYLE,w.qY]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([y.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,w.Oq,w.vk])
const s=t.getEndss(),a=t.getOrientedFlatCoordinates(),l=t.getStride()
let u=0
for(let h=0,c=s.length;h<c;++h)u=this.drawFlatCoordinatess_(a,u,s[h],l)
this.endGeometry(e)}finish(){this.reverseHitDetectionInstructions(),this.state=null
const t=this.tolerance
if(0!==t){const e=this.coordinates
for(let n=0,i=e.length;n<i;++n)e[n]=(0,I.n$)(e[n],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state
void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)}}
var A=n(1736),R=n(5306)
function L(t,e,n,i,r){const o=[]
let s=n,a=0,l=e.slice(n,2)
for(;a<t&&s+r<i;){const[n,i]=l.slice(-2),u=e[s+r],h=e[s+r+1],c=Math.sqrt((u-n)*(u-n)+(h-i)*(h-i))
if(a+=c,a>=t){const e=(t-a+c)/c,f=(0,R.Cc)(n,u,e),p=(0,R.Cc)(i,h,e)
l.push(f,p),o.push(l),l=[f,p],a==t&&(s+=r),a=0}else if(a<t)l.push(e[s+r],e[s+r+1]),s+=r
else{const t=c-a,e=(0,R.Cc)(n,u,t/c),f=(0,R.Cc)(i,h,t/c)
l.push(e,f),o.push(l),l=[e,f],a=0,s+=r}}return a>0&&o.push(l),o}function M(t,e,n,i,r){let o,s,a,l,u,h,c,f,p,d,g=n,_=n,m=0,y=0,v=n
for(s=n;s<i;s+=r){const n=e[s],i=e[s+1]
void 0!==u&&(p=n-u,d=i-h,l=Math.sqrt(p*p+d*d),void 0!==c&&(y+=a,o=Math.acos((c*p+f*d)/(a*l)),o>t&&(y>m&&(m=y,g=v,_=s),y=0,v=s-r)),a=l,c=p,f=d),u=n,h=i}return y+=l,y>m?[v,s]:[g,_]}const O={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},N={Circle:P,Default:T,Image:class extends T{constructor(t,e,n,i){super(t,e,n,i),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,e,n){if(!this.image_||this.maxExtent&&!(0,E.Ym)(this.maxExtent,t.getFlatCoordinates()))return
this.beginGeometry(t,e,n)
const i=t.getFlatCoordinates(),r=t.getStride(),o=this.coordinates.length,s=this.appendFlatPointCoordinates(i,r)
this.instructions.push([y.DRAW_IMAGE,o,s,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([y.DRAW_IMAGE,o,s,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}drawMultiPoint(t,e,n){if(!this.image_)return
this.beginGeometry(t,e,n)
const i=t.getFlatCoordinates(),r=[]
for(let a=0,l=i.length;a<l;a+=t.getStride())this.maxExtent&&!(0,E.Ym)(this.maxExtent,i.slice(a,a+2))||r.push(i[a],i[a+1])
const o=this.coordinates.length,s=this.appendFlatPointCoordinates(r,2)
this.instructions.push([y.DRAW_IMAGE,o,s,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([y.DRAW_IMAGE,o,s,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,e){const n=t.getAnchor(),i=t.getSize(),r=t.getOrigin()
this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=n[0],this.anchorY_=n[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=i[1],this.opacity_=t.getOpacity(),this.originX_=r[0],this.originY_=r[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=i[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}},LineString:class extends T{constructor(t,e,n,i){super(t,e,n,i)}drawFlatCoordinates_(t,e,n,i){const r=this.coordinates.length,o=this.appendFlatLineCoordinates(t,e,n,i,!1,!1),s=[y.MOVE_TO_LINE_TO,r,o]
return this.instructions.push(s),this.hitDetectionInstructions.push(s),n}drawLineString(t,e,n){const i=this.state,r=i.strokeStyle,o=i.lineWidth
if(void 0===r||void 0===o)return
this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e,n),this.hitDetectionInstructions.push([y.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,w.Oq,w.vk],_)
const s=t.getFlatCoordinates(),a=t.getStride()
this.drawFlatCoordinates_(s,0,s.length,a),this.hitDetectionInstructions.push(g),this.endGeometry(e)}drawMultiLineString(t,e,n){const i=this.state,r=i.strokeStyle,o=i.lineWidth
if(void 0===r||void 0===o)return
this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e,n),this.hitDetectionInstructions.push([y.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,w.Oq,w.vk],_)
const s=t.getEnds(),a=t.getFlatCoordinates(),l=t.getStride()
let u=0
for(let h=0,c=s.length;h<c;++h)u=this.drawFlatCoordinates_(a,u,s[h],l)
this.hitDetectionInstructions.push(g),this.endGeometry(e)}finish(){const t=this.state
return null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(g),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(g),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(_)}},Polygon:P,Text:class extends T{constructor(t,e,n,i){super(t,e,n,i),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[w.qY]={fillStyle:w.qY},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const t=super.finish()
return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e,n){const i=this.textFillState_,r=this.textStrokeState_,o=this.textState_
if(""===this.text_||!o||!i&&!r)return
const s=this.coordinates
let a=s.length
const l=t.getType()
let u=null,h=t.getStride()
if("line"!==o.placement||"LineString"!=l&&"MultiLineString"!=l&&"Polygon"!=l&&"MultiPolygon"!=l){let i=o.overflow?null:[]
switch(l){case"Point":case"MultiPoint":u=t.getFlatCoordinates()
break
case"LineString":u=t.getFlatMidpoint()
break
case"Circle":u=t.getCenter()
break
case"MultiLineString":u=t.getFlatMidpoints(),h=2
break
case"Polygon":u=t.getFlatInteriorPoint(),o.overflow||i.push(u[2]/this.resolution),h=3
break
case"MultiPolygon":const e=t.getFlatInteriorPoints()
u=[]
for(let t=0,n=e.length;t<n;t+=3)o.overflow||i.push(e[t+2]/this.resolution),u.push(e[t],e[t+1])
if(0===u.length)return
h=2}const r=this.appendFlatPointCoordinates(u,h)
if(r===a)return
if(i&&(r-a)/2!=u.length/h){let t=a/2
i=i.filter(((e,n)=>{const i=s[2*(t+n)]===u[n*h]&&s[2*(t+n)+1]===u[n*h+1]
return i||--t,i}))}this.saveTextStates_(),(o.backgroundFill||o.backgroundStroke)&&(this.setFillStrokeStyle(o.backgroundFill,o.backgroundStroke),o.backgroundFill&&this.updateFillStyle(this.state,this.createFill),o.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e,n)
let c=o.padding
if(c!=w.Tq&&(o.scale[0]<0||o.scale[1]<0)){let t=o.padding[0],e=o.padding[1],n=o.padding[2],i=o.padding[3]
o.scale[0]<0&&(e=-e,i=-i),o.scale[1]<0&&(t=-t,n=-n),c=[t,e,n,i]}const f=this.pixelRatio
this.instructions.push([y.DRAW_IMAGE,a,r,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,c==w.Tq?w.Tq:c.map((function(t){return t*f})),!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,i])
const p=1/f,d=this.state.fillStyle
o.backgroundFill&&(this.state.fillStyle=w.qY,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([y.DRAW_IMAGE,a,r,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[p,p],NaN,this.declutterMode_,this.declutterImageWithText_,c,!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?w.qY:this.fillKey_,this.textOffsetX_,this.textOffsetY_,i]),o.backgroundFill&&(this.state.fillStyle=d,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(e)}else{if(!(0,E.HY)(this.maxExtent,t.getExtent()))return
let i
if(u=t.getFlatCoordinates(),"LineString"==l)i=[u.length]
else if("MultiLineString"==l)i=t.getEnds()
else if("Polygon"==l)i=t.getEnds().slice(0,1)
else if("MultiPolygon"==l){const e=t.getEndss()
i=[]
for(let t=0,n=e.length;t<n;++t)i.push(e[t][0])}this.beginGeometry(t,e,n)
const r=o.repeat,c=r?void 0:o.textAlign
let f=0
for(let t=0,e=i.length;t<e;++t){let e
e=r?L(r*this.resolution,u,f,i[t],h):[u.slice(f,i[t])]
for(let n=0,r=e.length;n<r;++n){const r=e[n]
let l=0,u=r.length
if(null==c){const t=M(o.maxAngle,r,0,r.length,2)
l=t[0],u=t[1]}for(let t=l;t<u;t+=h)s.push(r[t],r[t+1])
const p=s.length
f=i[t],this.drawChars_(a,p),a=p}}this.endGeometry(e)}}saveTextStates_(){const t=this.textStrokeState_,e=this.textState_,n=this.textFillState_,i=this.strokeKey_
t&&(i in this.strokeStates||(this.strokeStates[i]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}))
const r=this.textKey_
r in this.textStates||(this.textStates[r]={font:e.font,textAlign:e.textAlign||w.MY,justify:e.justify,textBaseline:e.textBaseline||w.M8,scale:e.scale})
const o=this.fillKey_
n&&(o in this.fillStates||(this.fillStates[o]={fillStyle:n.fillStyle}))}drawChars_(t,e){const n=this.textStrokeState_,i=this.textState_,r=this.strokeKey_,o=this.textKey_,s=this.fillKey_
this.saveTextStates_()
const a=this.pixelRatio,l=O[i.textBaseline],u=this.textOffsetY_*a,h=this.text_,c=n?n.lineWidth*Math.abs(i.scale[0])/2:0
this.instructions.push([y.DRAW_CHARS,t,e,l,i.overflow,s,i.maxAngle,a,u,r,c*a,h,o,1,this.declutterMode_]),this.hitDetectionInstructions.push([y.DRAW_CHARS,t,e,l,i.overflow,s?w.qY:s,i.maxAngle,a,u,r,c*a,h,o,1/a,this.declutterMode_])}setTextStyle(t,e){let n,i,r
if(t){const e=t.getFill()
e?(i=this.textFillState_,i||(i={},this.textFillState_=i),i.fillStyle=(0,b.F)(e.getColor()||w.qY)):(i=null,this.textFillState_=i)
const o=t.getStroke()
if(o){r=this.textStrokeState_,r||(r={},this.textStrokeState_=r)
const t=o.getLineDash(),e=o.getLineDashOffset(),n=o.getWidth(),i=o.getMiterLimit()
r.lineCap=o.getLineCap()||w._m,r.lineDash=t?t.slice():w.Oq,r.lineDashOffset=void 0===e?w.vk:e,r.lineJoin=o.getLineJoin()||w._K,r.lineWidth=void 0===n?w.aq:n,r.miterLimit=void 0===i?w.eL:i,r.strokeStyle=(0,b.F)(o.getColor()||w.NT)}else r=null,this.textStrokeState_=r
n=this.textState_
const s=t.getFont()||w.ZV;(0,w.fZ)(s)
const a=t.getScaleArray()
n.overflow=t.getOverflow(),n.font=s,n.maxAngle=t.getMaxAngle(),n.placement=t.getPlacement(),n.textAlign=t.getTextAlign(),n.repeat=t.getRepeat(),n.justify=t.getJustify(),n.textBaseline=t.getTextBaseline()||w.M8,n.backgroundFill=t.getBackgroundFill(),n.backgroundStroke=t.getBackgroundStroke(),n.padding=t.getPadding()||w.Tq,n.scale=void 0===a?[1,1]:a
const l=t.getOffsetX(),u=t.getOffsetY(),h=t.getRotateWithView(),c=t.getRotation()
this.text_=t.getText()||"",this.textOffsetX_=void 0===l?0:l,this.textOffsetY_=void 0===u?0:u,this.textRotateWithView_=void 0!==h&&h,this.textRotation_=void 0===c?0:c,this.strokeKey_=r?("string"==typeof r.strokeStyle?r.strokeStyle:(0,A.v6)(r.strokeStyle))+r.lineCap+r.lineDashOffset+"|"+r.lineWidth+r.lineJoin+r.miterLimit+"["+r.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?")+(n.repeat||"?")+(n.justify||"?")+(n.textBaseline||"?"),this.fillKey_=i&&i.fillStyle?"string"==typeof i.fillStyle?i.fillStyle:"|"+(0,A.v6)(i.fillStyle):""}else this.text_=""
this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}},D=class{constructor(t,e,n,i){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=i,this.resolution_=n,this.buildersByZIndex_={}}finish(){const t={}
for(const e in this.buildersByZIndex_){t[e]=t[e]||{}
const n=this.buildersByZIndex_[e]
for(const i in n){const r=n[i].finish()
t[e][i]=r}}return t}getBuilder(t,e){const n=void 0!==t?t.toString():"0"
let i=this.buildersByZIndex_[n]
void 0===i&&(i={},this.buildersByZIndex_[n]=i)
let r=i[e]
return void 0===r&&(r=new(0,N[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[e]=r),r}}
var F=n(1500),k=n(6733),j=n(2282),z=n(2363)
function G(t,e,n,i,r,o,s,a,l,u,h,c){let f=t[e],p=t[e+1],d=0,g=0,_=0,m=0
function y(){d=f,g=p,f=t[e+=i],p=t[e+1],m+=_,_=Math.sqrt((f-d)*(f-d)+(p-g)*(p-g))}do{y()}while(e<n-i&&m+_<o)
let v=0===_?0:(o-m)/_
const x=(0,R.Cc)(d,f,v),b=(0,R.Cc)(g,p,v),E=e-i,w=m,S=o+a*l(u,r,h)
for(;e<n-i&&m+_<S;)y()
v=0===_?0:(S-m)/_
const C=(0,R.Cc)(d,f,v),T=(0,R.Cc)(g,p,v)
let I
if(c){const t=[x,b,C,T];(0,z.e$)(t,0,4,2,c,t,t),I=t[0]>t[2]}else I=x>C
const P=Math.PI,A=[],L=E+i===e
let M
if(_=0,m=w,f=t[e=E],p=t[e+1],L){y(),M=Math.atan2(p-g,f-d),I&&(M+=M>0?-P:P)
const t=(C+x)/2,e=(T+b)/2
return A[0]=[t,e,(S-o)/2,M,r],A}for(let O=0,N=(r=r.replace(/\n/g," ")).length;O<N;){y()
let t=Math.atan2(p-g,f-d)
if(I&&(t+=t>0?-P:P),void 0!==M){let e=t-M
if(e+=e>P?-2*P:e<-P?2*P:0,Math.abs(e)>s)return null}M=t
const c=O
let x=0
for(;O<N;++O){const t=a*l(u,r[I?N-O-1:O],h)
if(e+i<n&&m+_<o+x+t/2)break
x+=t}if(O===c)continue
const b=I?r.substring(N-c,N-O):r.substring(c,O)
v=0===_?0:(o+x/2-m)/_
const E=(0,R.Cc)(d,f,v),w=(0,R.Cc)(g,p,v)
A.push([E,w,x/2,t,b]),o+=x}return A}var B=n(6963)
const q=(0,E.S5)(),U=[],Z=[],X=[],Y=[]
function V(t){return t[3].declutterBox}const W=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]")
function H(t,e){return"start"===e?e=W.test(t)?"right":"left":"end"===e&&(e=W.test(t)?"left":"right"),O[e]}function $(t,e,n){return n>0&&t.push("\n",""),t.push(e,""),t}const K=class{constructor(t,e,n,i,r){this.overlaps=n,this.pixelRatio=e,this.resolution=t,this.alignAndScaleFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=(0,j.vt)(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=r?new k.A:null}getZIndexContext(){return this.zIndexContext_}createLabel(t,e,n,i){const r=t+e+n+i
if(this.labels_[r])return this.labels_[r]
const o=i?this.strokeStates[i]:null,s=n?this.fillStates[n]:null,a=this.textStates[e],l=this.pixelRatio,u=[a.scale[0]*l,a.scale[1]*l],h=Array.isArray(t),c=a.justify?O[a.justify]:H(Array.isArray(t)?t[0]:t,a.textAlign||w.MY),f=i&&o.lineWidth?o.lineWidth:0,p=h?t:t.split("\n").reduce($,[]),{width:d,height:g,widths:_,heights:m,lineWidths:y}=(0,w.jT)(a,p),v=d+f,x=[],b=(v+2)*u[0],E=(g+f)*u[1],S={width:b<0?Math.floor(b):Math.ceil(b),height:E<0?Math.floor(E):Math.ceil(E),contextInstructions:x}
1==u[0]&&1==u[1]||x.push("scale",u),i&&(x.push("strokeStyle",o.strokeStyle),x.push("lineWidth",f),x.push("lineCap",o.lineCap),x.push("lineJoin",o.lineJoin),x.push("miterLimit",o.miterLimit),x.push("setLineDash",[o.lineDash]),x.push("lineDashOffset",o.lineDashOffset)),n&&x.push("fillStyle",s.fillStyle),x.push("textBaseline","middle"),x.push("textAlign","center")
const C=.5-c
let T=c*v+C*f
const I=[],P=[]
let A,R=0,L=0,M=0,N=0
for(let w=0,O=p.length;w<O;w+=2){const t=p[w]
if("\n"===t){L+=R,R=0,T=c*v+C*f,++N
continue}const e=p[w+1]||a.font
e!==A&&(i&&I.push("font",e),n&&P.push("font",e),A=e),R=Math.max(R,m[M])
const r=[t,T+C*_[M]+c*(_[M]-y[N]),.5*(f+R)+L]
T+=_[M],i&&I.push("strokeText",r),n&&P.push("fillText",r),++M}return Array.prototype.push.apply(x,I),Array.prototype.push.apply(x,P),this.labels_[r]=S,S}replayTextBackground_(t,e,n,i,r,o,s){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,n),t.lineTo.apply(t,i),t.lineTo.apply(t,r),t.lineTo.apply(t,e),o&&(this.alignAndScaleFill_=o[2],this.fill_(t)),s&&(this.setStrokeStyle_(t,s),t.stroke())}calculateImageOrLabelDimensions_(t,e,n,i,r,o,s,a,l,u,h,c,f,p,d,g){let _=n-(s*=c[0]),m=i-(a*=c[1])
const y=r+l>t?t-l:r,v=o+u>e?e-u:o,x=p[3]+y*c[0]+p[1],b=p[0]+v*c[1]+p[2],w=_-p[3],S=m-p[0]
let C
return(d||0!==h)&&(U[0]=w,Y[0]=w,U[1]=S,Z[1]=S,Z[0]=w+x,X[0]=Z[0],X[1]=S+b,Y[1]=X[1]),0!==h?(C=(0,j.Zz)((0,j.vt)(),n,i,1,1,h,-n,-i),(0,j.Bb)(C,U),(0,j.Bb)(C,Z),(0,j.Bb)(C,X),(0,j.Bb)(C,Y),(0,E.N)(Math.min(U[0],Z[0],X[0],Y[0]),Math.min(U[1],Z[1],X[1],Y[1]),Math.max(U[0],Z[0],X[0],Y[0]),Math.max(U[1],Z[1],X[1],Y[1]),q)):(0,E.N)(Math.min(w,w+x),Math.min(S,S+b),Math.max(w,w+x),Math.max(S,S+b),q),f&&(_=Math.round(_),m=Math.round(m)),{drawImageX:_,drawImageY:m,drawImageW:y,drawImageH:v,originX:l,originY:u,declutterBox:{minX:q[0],minY:q[1],maxX:q[2],maxY:q[3],value:g},canvasTransform:C,scale:c}}replayImageOrLabel_(t,e,n,i,r,o,s){const a=!(!o&&!s),l=i.declutterBox,u=s?s[2]*i.scale[0]/2:0
return l.minX-u<=e[0]&&l.maxX+u>=0&&l.minY-u<=e[1]&&l.maxY+u>=0&&(a&&this.replayTextBackground_(t,U,Z,X,Y,o,s),(0,w.Jw)(t,i.canvasTransform,r,n,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0}fill_(t){const e=this.alignAndScaleFill_
if(e){const n=(0,j.Bb)(this.renderedTransform_,[0,0]),i=512*this.pixelRatio
t.save(),t.translate(n[0]%i,n[1]%i),1!==e&&t.scale(e,e),t.rotate(this.viewRotation_)}t.fill(),e&&t.restore()}setStrokeStyle_(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.lineDashOffset=e[7],t.setLineDash(e[6])}drawLabelWithPointPlacement_(t,e,n,i){const r=this.textStates[e],o=this.createLabel(t,e,i,n),s=this.strokeStates[n],a=this.pixelRatio,l=H(Array.isArray(t)?t[0]:t,r.textAlign||w.MY),u=O[r.textBaseline||w.M8],h=s&&s.lineWidth?s.lineWidth:0
return{label:o,anchorX:l*(o.width/a-2*r.scale[0])+2*(.5-l)*h,anchorY:u*o.height/a+2*(.5-u)*h}}execute_(t,e,n,i,r,o,s,a){const l=this.zIndexContext_
let u
this.pixelCoordinates_&&(0,S.aI)(n,this.renderedTransform_)?u=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),u=(0,z.Rc)(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),(0,j.k3)(this.renderedTransform_,n))
let h=0
const c=i.length
let f,p,d,g,_,m,v,x,b,C,T,I,P,A=0,R=0,L=0,M=null,O=null
const N=this.coordinateCache_,D=this.viewRotation_,F=Math.round(1e12*Math.atan2(-n[1],n[0]))/1e12,k={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:D},q=this.instructions!=i||this.overlaps?0:200
let U,Z,X,Y
for(;h<c;){const n=i[h]
switch(n[0]){case y.BEGIN_GEOMETRY:U=n[1],Y=n[3],U.getGeometry()?void 0===s||(0,E.HY)(s,Y.getExtent())?++h:h=n[2]+1:h=n[2],l&&(l.zIndex=n[4])
break
case y.BEGIN_PATH:R>q&&(this.fill_(t),R=0),L>q&&(t.stroke(),L=0),R||L||(t.beginPath(),_=NaN,m=NaN),++h
break
case y.CIRCLE:A=n[1]
const i=u[A],c=u[A+1],S=u[A+2]-i,j=u[A+3]-c,z=Math.sqrt(S*S+j*j)
t.moveTo(i+z,c),t.arc(i,c,z,0,2*Math.PI,!0),++h
break
case y.CLOSE_PATH:t.closePath(),++h
break
case y.CUSTOM:A=n[1],f=n[2]
const W=n[3],$=n[4],K=n[5]
k.geometry=W,k.feature=U,h in N||(N[h]=[])
const J=N[h]
K?K(u,A,f,2,J):(J[0]=u[A],J[1]=u[A+1],J.length=2),l&&(l.zIndex=n[6]),$(J,k),++h
break
case y.DRAW_IMAGE:A=n[1],f=n[2],b=n[3],p=n[4],d=n[5]
let Q=n[6]
const tt=n[7],et=n[8],nt=n[9],it=n[10]
let rt=n[11]
const ot=n[12]
let st=n[13]
g=n[14]||"declutter"
const at=n[15]
if(!b&&n.length>=20){C=n[19],T=n[20],I=n[21],P=n[22]
const t=this.drawLabelWithPointPlacement_(C,T,I,P)
b=t.label,n[3]=b
const e=n[23]
p=(t.anchorX-e)*this.pixelRatio,n[4]=p
const i=n[24]
d=(t.anchorY-i)*this.pixelRatio,n[5]=d,Q=b.height,n[6]=Q,st=b.width,n[13]=st}let lt,ut,ht,ct
n.length>25&&(lt=n[25]),n.length>17?(ut=n[16],ht=n[17],ct=n[18]):(ut=w.Tq,ht=!1,ct=!1),it&&F?rt+=D:it||F||(rt-=D)
let ft=0
for(;A<f;A+=2){if(lt&&lt[ft++]<st/this.pixelRatio)continue
const n=this.calculateImageOrLabelDimensions_(b.width,b.height,u[A],u[A+1],st,Q,p,d,et,nt,rt,ot,r,ut,ht||ct,U),i=[t,e,b,n,tt,ht?M:null,ct?O:null]
if(a){let t,e,r,o,s
if(at){const n=f-A
if(!at[n]){at[n]={args:i,declutterMode:g}
continue}const o=at[n]
t=o.args,e=o.declutterMode,delete at[n],r=V(t)}if(!t||"declutter"===e&&a.collides(r)||(o=!0),"declutter"===g&&a.collides(n.declutterBox)||(s=!0),"declutter"===e&&"declutter"===g){const t=o&&s
o=t,s=t}o&&("none"!==e&&a.insert(r),this.replayImageOrLabel_.apply(this,t)),s&&("none"!==g&&a.insert(n.declutterBox),this.replayImageOrLabel_.apply(this,i))}else this.replayImageOrLabel_.apply(this,i)}++h
break
case y.DRAW_CHARS:const pt=n[1],dt=n[2],gt=n[3],_t=n[4]
P=n[5]
const mt=n[6],yt=n[7],vt=n[8]
I=n[9]
const xt=n[10]
C=n[11],T=n[12]
const bt=[n[13],n[13]]
g=n[14]||"declutter"
const Et=this.textStates[T],wt=Et.font,St=[Et.scale[0]*yt,Et.scale[1]*yt]
let Ct
wt in this.widths_?Ct=this.widths_[wt]:(Ct={},this.widths_[wt]=Ct)
const Tt=(0,B.k)(u,pt,dt,2),It=Math.abs(St[0])*(0,w.TA)(wt,C,Ct)
if(_t||It<=Tt){const n=G(u,pt,dt,2,C,(Tt-It)*H(C,this.textStates[T].textAlign),mt,Math.abs(St[0]),w.TA,wt,Ct,F?0:this.viewRotation_)
t:if(n){const i=[]
let r,o,s,l,u
if(I)for(r=0,o=n.length;r<o;++r){u=n[r],s=u[4],l=this.createLabel(s,T,"",I),p=u[2]+(St[0]<0?-xt:xt),d=gt*l.height+2*(.5-gt)*xt*St[1]/St[0]-vt
const o=this.calculateImageOrLabelDimensions_(l.width,l.height,u[0],u[1],l.width,l.height,p,d,0,0,u[3],bt,!1,w.Tq,!1,U)
if(a&&"declutter"===g&&a.collides(o.declutterBox))break t
i.push([t,e,l,o,1,null,null])}if(P)for(r=0,o=n.length;r<o;++r){u=n[r],s=u[4],l=this.createLabel(s,T,P,""),p=u[2],d=gt*l.height-vt
const o=this.calculateImageOrLabelDimensions_(l.width,l.height,u[0],u[1],l.width,l.height,p,d,0,0,u[3],bt,!1,w.Tq,!1,U)
if(a&&"declutter"===g&&a.collides(o.declutterBox))break t
i.push([t,e,l,o,1,null,null])}a&&"none"!==g&&a.load(i.map(V))
for(let t=0,e=i.length;t<e;++t)this.replayImageOrLabel_.apply(this,i[t])}}++h
break
case y.END_GEOMETRY:if(void 0!==o){U=n[1]
const t=o(U,Y)
if(t)return t}++h
break
case y.FILL:q?R++:this.fill_(t),++h
break
case y.MOVE_TO_LINE_TO:for(A=n[1],f=n[2],Z=u[A],X=u[A+1],v=Z+.5|0,x=X+.5|0,v===_&&x===m||(t.moveTo(Z,X),_=v,m=x),A+=2;A<f;A+=2)Z=u[A],X=u[A+1],v=Z+.5|0,x=X+.5|0,A!=f-2&&v===_&&x===m||(t.lineTo(Z,X),_=v,m=x);++h
break
case y.SET_FILL_STYLE:M=n,this.alignAndScaleFill_=n[2],R&&(this.fill_(t),R=0,L&&(t.stroke(),L=0)),t.fillStyle=n[1],++h
break
case y.SET_STROKE_STYLE:O=n,L&&(t.stroke(),L=0),this.setStrokeStyle_(t,n),++h
break
case y.STROKE:q?L++:t.stroke(),++h
break
default:++h}}R&&this.fill_(t),L&&t.stroke()}execute(t,e,n,i,r,o){this.viewRotation_=i,this.execute_(t,e,n,this.instructions,r,void 0,void 0,o)}executeHitDetection(t,e,n,i,r){return this.viewRotation_=n,this.execute_(t,[t.canvas.width,t.canvas.height],e,this.hitDetectionInstructions,!0,i,r)}}
var J=n(8454),Q=n(7931)
const tt=["Polygon","Circle","LineString","Image","Text","Default"],et=["Image","Text"],nt=tt.filter((t=>!et.includes(t))),it={},rt=class{constructor(t,e,n,i,r,o,s){this.maxExtent_=t,this.overlaps_=i,this.pixelRatio_=n,this.resolution_=e,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=(0,j.vt)(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(r,s)}clip(t,e){const n=this.getClipCoords(e)
t.beginPath(),t.moveTo(n[0],n[1]),t.lineTo(n[2],n[3]),t.lineTo(n[4],n[5]),t.lineTo(n[6],n[7]),t.clip()}createExecutors_(t,e){for(const n in t){let i=this.executorsByZIndex_[n]
void 0===i&&(i={},this.executorsByZIndex_[n]=i)
const r=t[n]
for(const t in r){const n=r[t]
i[t]=new K(this.resolution_,this.pixelRatio_,this.overlaps_,n,e)}}}hasExecutors(t){for(const e in this.executorsByZIndex_){const n=this.executorsByZIndex_[e]
for(let e=0,i=t.length;e<i;++e)if(t[e]in n)return!0}return!1}forEachFeatureAtCoordinate(t,e,n,i,r,o){const s=2*(i=Math.round(i))+1,a=(0,j.Zz)(this.hitDetectionTransform_,i+.5,i+.5,1/e,-1/e,-n,-t[0],-t[1]),l=!this.hitDetectionContext_
l&&(this.hitDetectionContext_=(0,J.Y)(s,s,void 0,{willReadFrequently:!0}))
const u=this.hitDetectionContext_
let h
u.canvas.width!==s||u.canvas.height!==s?(u.canvas.width=s,u.canvas.height=s):l||u.clearRect(0,0,s,s),void 0!==this.renderBuffer_&&(h=(0,E.S5)(),(0,E.$C)(h,t),(0,E.r)(h,e*(this.renderBuffer_+i),h))
const c=function(t){if(void 0!==it[t])return it[t]
const e=2*t+1,n=t*t,i=new Array(n+1)
for(let o=0;o<=t;++o)for(let r=0;r<=t;++r){const s=o*o+r*r
if(s>n)break
let a=i[s]
a||(a=[],i[s]=a),a.push(4*((t+o)*e+(t+r))+3),o>0&&a.push(4*((t-o)*e+(t+r))+3),r>0&&(a.push(4*((t+o)*e+(t-r))+3),o>0&&a.push(4*((t-o)*e+(t-r))+3))}const r=[]
for(let o=0,s=i.length;o<s;++o)i[o]&&r.push(...i[o])
return it[t]=r,r}(i)
let f
function p(t,e){const n=u.getImageData(0,0,s,s).data
for(let a=0,l=c.length;a<l;a++)if(n[c[a]]>0){if(!o||"Image"!==f&&"Text"!==f||o.includes(t)){const n=(c[a]-3)/4,o=i-n%s,l=i-(n/s|0),u=r(t,e,o*o+l*l)
if(u)return u}u.clearRect(0,0,s,s)
break}}const d=Object.keys(this.executorsByZIndex_).map(Number)
let g,_,m,y,v
for(d.sort(S.V_),g=d.length-1;g>=0;--g){const t=d[g].toString()
for(m=this.executorsByZIndex_[t],_=tt.length-1;_>=0;--_)if(f=tt[_],y=m[f],void 0!==y&&(v=y.executeHitDetection(u,a,n,p,h),v))return v}}getClipCoords(t){const e=this.maxExtent_
if(!e)return null
const n=e[0],i=e[1],r=e[2],o=e[3],s=[n,i,n,o,r,o,r,i]
return(0,z.Rc)(s,0,8,2,t,s),s}isEmpty(){return(0,Q.p)(this.executorsByZIndex_)}execute(t,e,n,i,r,o,s){const a=Object.keys(this.executorsByZIndex_).map(Number)
let l,u,h,c,f,p
for(a.sort(S.V_),o=o||tt,s&&a.reverse(),l=0,u=a.length;l<u;++l){const u=a[l].toString()
for(f=this.executorsByZIndex_[u],h=0,c=o.length;h<c;++h){const u=o[h]
if(p=f[u],void 0!==p){const o=null===s?void 0:p.getZIndexContext(),h=o?o.getContext():t,c=this.maxExtent_&&"Image"!==u&&"Text"!==u
if(c&&(h.save(),this.clip(h,n)),p.execute(h,e,n,i,r,s),c&&h.restore(),o){o.offset()
const t=a[l]
this.deferredZIndexContexts_[t]||(this.deferredZIndexContexts_[t]=[]),this.deferredZIndexContexts_[t].push(o)}}}}this.renderedContext_=t}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const t=this.deferredZIndexContexts_,e=Object.keys(t).map(Number).sort(S.V_)
for(let n=0,i=e.length;n<i;++n)t[e[n]].forEach((t=>{t.draw(this.renderedContext_),t.clear()}))}}
var ot=n(5548),st=n(9009)
const at=class extends x{constructor(t,e,n,i,r,o,s){super(),this.context_=t,this.pixelRatio_=e,this.extent_=n,this.transform_=i,this.transformRotation_=i?(0,R.Mg)(Math.atan2(i[1],i[0]),10):0,this.viewRotation_=r,this.squaredTolerance_=o,this.userTransform_=s,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=(0,j.vt)()}drawImages_(t,e,n,i){if(!this.image_)return
const r=(0,z.Rc)(t,e,n,i,this.transform_,this.pixelCoordinates_),o=this.context_,s=this.tmpLocalTransform_,a=o.globalAlpha
1!=this.imageOpacity_&&(o.globalAlpha=a*this.imageOpacity_)
let l=this.imageRotation_
0===this.transformRotation_&&(l-=this.viewRotation_),this.imageRotateWithView_&&(l+=this.viewRotation_)
for(let u=0,h=r.length;u<h;u+=2){const t=r[u]-this.imageAnchorX_,e=r[u+1]-this.imageAnchorY_
if(0!==l||1!=this.imageScale_[0]||1!=this.imageScale_[1]){const n=t+this.imageAnchorX_,i=e+this.imageAnchorY_;(0,j.Zz)(s,n,i,1,1,l,-n,-i),o.save(),o.transform.apply(o,s),o.translate(n,i),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.restore()}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,t,e,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(o.globalAlpha=a)}drawText_(t,e,n,i){if(!this.textState_||""===this.text_)return
this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_)
const r=(0,z.Rc)(t,e,n,i,this.transform_,this.pixelCoordinates_),o=this.context_
let s=this.textRotation_
for(0===this.transformRotation_&&(s-=this.viewRotation_),this.textRotateWithView_&&(s+=this.viewRotation_);e<n;e+=i){const t=r[e]+this.textOffsetX_,n=r[e+1]+this.textOffsetY_
0!==s||1!=this.textScale_[0]||1!=this.textScale_[1]?(o.save(),o.translate(t-this.textOffsetX_,n-this.textOffsetY_),o.rotate(s),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.restore()):(this.textStrokeState_&&o.strokeText(this.text_,t,n),this.textFillState_&&o.fillText(this.text_,t,n))}}moveToLineTo_(t,e,n,i,r){const o=this.context_,s=(0,z.Rc)(t,e,n,i,this.transform_,this.pixelCoordinates_)
o.moveTo(s[0],s[1])
let a=s.length
r&&(a-=2)
for(let l=2;l<a;l+=2)o.lineTo(s[l],s[l+1])
return r&&o.closePath(),n}drawRings_(t,e,n,i){for(let r=0,o=n.length;r<o;++r)e=this.moveToLineTo_(t,e,n[r],i,!0)
return e}drawCircle(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,E.HY)(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_)
const e=(0,st.v7)(t,this.transform_,this.pixelCoordinates_),n=e[2]-e[0],i=e[3]-e[1],r=Math.sqrt(n*n+i*i),o=this.context_
o.beginPath(),o.arc(e[0],e[1],r,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t)
break
case"LineString":this.drawLineString(t)
break
case"Polygon":this.drawPolygon(t)
break
case"MultiPoint":this.drawMultiPoint(t)
break
case"MultiLineString":this.drawMultiLineString(t)
break
case"MultiPolygon":this.drawMultiPolygon(t)
break
case"GeometryCollection":this.drawGeometryCollection(t)
break
case"Circle":this.drawCircle(t)}}drawFeature(t,e){const n=e.getGeometryFunction()(t)
n&&(this.setStyle(e),this.drawGeometry(n))}drawGeometryCollection(t){const e=t.getGeometriesArray()
for(let n=0,i=e.length;n<i;++n)this.drawGeometry(e[n])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_))
const e=t.getFlatCoordinates(),n=t.getStride()
this.image_&&this.drawImages_(e,0,e.length,n),""!==this.text_&&this.drawText_(e,0,e.length,n)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_))
const e=t.getFlatCoordinates(),n=t.getStride()
this.image_&&this.drawImages_(e,0,e.length,n),""!==this.text_&&this.drawText_(e,0,e.length,n)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,E.HY)(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_)
const e=this.context_,n=t.getFlatCoordinates()
e.beginPath(),this.moveToLineTo_(n,0,n.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){const e=t.getFlatMidpoint()
this.drawText_(e,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_))
const e=t.getExtent()
if((0,E.HY)(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_)
const e=this.context_,n=t.getFlatCoordinates()
let i=0
const r=t.getEnds(),o=t.getStride()
e.beginPath()
for(let t=0,s=r.length;t<s;++t)i=this.moveToLineTo_(n,i,r[t],o,!1)
e.stroke()}if(""!==this.text_){const e=t.getFlatMidpoints()
this.drawText_(e,0,e.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,E.HY)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_)
const e=this.context_
e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){const e=t.getFlatInteriorPoint()
this.drawText_(e,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,E.HY)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_)
const e=this.context_,n=t.getOrientedFlatCoordinates()
let i=0
const r=t.getEndss(),o=t.getStride()
e.beginPath()
for(let t=0,s=r.length;t<s;++t){const e=r[t]
i=this.drawRings_(n,i,e,o)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){const e=t.getFlatInteriorPoints()
this.drawText_(e,0,e.length,2)}}}setContextFillState_(t){const e=this.context_,n=this.contextFillState_
n?n.fillStyle!=t.fillStyle&&(n.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const e=this.context_,n=this.contextStrokeState_
n?(n.lineCap!=t.lineCap&&(n.lineCap=t.lineCap,e.lineCap=t.lineCap),(0,S.aI)(n.lineDash,t.lineDash)||e.setLineDash(n.lineDash=t.lineDash),n.lineDashOffset!=t.lineDashOffset&&(n.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),n.lineJoin!=t.lineJoin&&(n.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),n.lineWidth!=t.lineWidth&&(n.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),n.miterLimit!=t.miterLimit&&(n.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),n.strokeStyle!=t.strokeStyle&&(n.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const e=this.context_,n=this.contextTextState_,i=t.textAlign?t.textAlign:w.MY
n?(n.font!=t.font&&(n.font=t.font,e.font=t.font),n.textAlign!=i&&(n.textAlign=i,e.textAlign=i),n.textBaseline!=t.textBaseline&&(n.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=i,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:i,textBaseline:t.textBaseline})}setFillStrokeStyle(t,e){if(t){const e=t.getColor()
this.fillState_={fillStyle:(0,b.F)(e||w.qY)}}else this.fillState_=null
if(e){const t=e.getColor(),n=e.getLineCap(),i=e.getLineDash(),r=e.getLineDashOffset(),o=e.getLineJoin(),s=e.getWidth(),a=e.getMiterLimit(),l=i||w.Oq
this.strokeState_={lineCap:void 0!==n?n:w._m,lineDash:1===this.pixelRatio_?l:l.map((t=>t*this.pixelRatio_)),lineDashOffset:(r||w.vk)*this.pixelRatio_,lineJoin:void 0!==o?o:w._K,lineWidth:(void 0!==s?s:w.aq)*this.pixelRatio_,miterLimit:void 0!==a?a:w.eL,strokeStyle:(0,b.F)(t||w.NT)}}else this.strokeState_=null}setImageStyle(t){let e
if(!t||!(e=t.getSize()))return void(this.image_=null)
const n=t.getPixelRatio(this.pixelRatio_),i=t.getAnchor(),r=t.getOrigin()
this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*n,this.imageAnchorY_=i[1]*n,this.imageHeight_=e[1]*n,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=r[0],this.imageOriginY_=r[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation()
const o=t.getScaleArray()
this.imageScale_=[o[0]*this.pixelRatio_/n,o[1]*this.pixelRatio_/n],this.imageWidth_=e[0]*n}setTextStyle(t){if(t){const e=t.getFill()
if(e){const t=e.getColor()
this.textFillState_={fillStyle:(0,b.F)(t||w.qY)}}else this.textFillState_=null
const n=t.getStroke()
if(n){const t=n.getColor(),e=n.getLineCap(),i=n.getLineDash(),r=n.getLineDashOffset(),o=n.getLineJoin(),s=n.getWidth(),a=n.getMiterLimit()
this.textStrokeState_={lineCap:void 0!==e?e:w._m,lineDash:i||w.Oq,lineDashOffset:r||w.vk,lineJoin:void 0!==o?o:w._K,lineWidth:void 0!==s?s:w.aq,miterLimit:void 0!==a?a:w.eL,strokeStyle:(0,b.F)(t||w.NT)}}else this.textStrokeState_=null
const i=t.getFont(),r=t.getOffsetX(),o=t.getOffsetY(),s=t.getRotateWithView(),a=t.getRotation(),l=t.getScaleArray(),u=t.getText(),h=t.getTextAlign(),c=t.getTextBaseline()
this.textState_={font:void 0!==i?i:w.ZV,textAlign:void 0!==h?h:w.MY,textBaseline:void 0!==c?c:w.M8},this.text_=void 0!==u?Array.isArray(u)?u.reduce(((t,e,n)=>t+(n%2?" ":e)),""):u:"",this.textOffsetX_=void 0!==r?this.pixelRatio_*r:0,this.textOffsetY_=void 0!==o?this.pixelRatio_*o:0,this.textRotateWithView_=void 0!==s&&s,this.textRotation_=void 0!==a?a:0,this.textScale_=[this.pixelRatio_*l[0],this.pixelRatio_*l[1]]}else this.text_=""}}
var lt=n(2375),ut=n(72)
const ht=.5
function ct(t,e,n,i,r,o,s,a,l){const u=l?(0,ut.JR)(r,l):r,h=t[0]*ht,c=t[1]*ht,f=(0,J.Y)(h,c)
f.imageSmoothingEnabled=!1
const p=f.canvas,d=new at(f,ht,r,null,s,a,l?(0,ut.FO)((0,ut.Tf)(),l):null),g=n.length,_=Math.floor(16777215/g),m={}
for(let v=1;v<=g;++v){const t=n[v-1],e=t.getStyleFunction()||i
if(!e)continue
let r=e(t,o)
if(!r)continue
Array.isArray(r)||(r=[r])
const s=(v*_).toString(16).padStart(7,"#00000")
for(let n=0,i=r.length;n<i;++n){const e=r[n],i=e.getGeometryFunction()(t)
if(!i||!(0,E.HY)(u,i.getExtent()))continue
const o=e.clone(),a=o.getFill()
a&&a.setColor(s)
const l=o.getStroke()
l&&(l.setColor(s),l.setLineDash(null)),o.setText(void 0)
const h=e.getImage()
if(h){const t=h.getImageSize()
if(!t)continue
const e=(0,J.Y)(t[0],t[1],void 0,{alpha:!1}),n=e.canvas
e.fillStyle=s,e.fillRect(0,0,n.width,n.height),o.setImage(new lt.A({img:n,anchor:h.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:h.getOrigin(),opacity:1,size:h.getSize(),scale:h.getScale(),rotation:h.getRotation(),rotateWithView:h.getRotateWithView()}))}const c=o.getZIndex()||0
let f=m[c]
f||(f={},m[c]=f,f.Polygon=[],f.Circle=[],f.LineString=[],f.Point=[])
const p=i.getType()
if("GeometryCollection"===p){const t=i.getGeometriesArrayRecursive()
for(let e=0,n=t.length;e<n;++e){const n=t[e]
f[n.getType().replace("Multi","")].push(n,o)}}else f[p.replace("Multi","")].push(i,o)}}const y=Object.keys(m).map(Number).sort(S.V_)
for(let v=0,x=y.length;v<x;++v){const t=m[y[v]]
for(const n in t){const i=t[n]
for(let t=0,n=i.length;t<n;t+=2){d.setStyle(i[t+1])
for(let n=0,r=e.length;n<r;++n)d.setTransform(e[n]),d.drawGeometry(i[t])}}}return f.getImageData(0,0,p.width,p.height)}function ft(t,e,n){const i=[]
if(n){const r=Math.floor(Math.round(t[0])*ht),o=Math.floor(Math.round(t[1])*ht),s=4*((0,R.qE)(r,0,n.width-1)+(0,R.qE)(o,0,n.height-1)*n.width),a=n.data[s],l=n.data[s+1],u=n.data[s+2]+256*(l+256*a),h=Math.floor(16777215/e.length)
u&&u%h==0&&i.push(e[u/h-1])}return i}var pt=n(1410)
const dt=.5,gt={Point:function(t,e,n,i,r,o){const s=n.getImage(),a=n.getText(),l=a&&a.getText(),u=o&&s&&l?{}:void 0
if(s){if(s.getImageState()!=pt.A.LOADED)return
const o=t.getBuilder(n.getZIndex(),"Image")
o.setImageStyle(s,u),o.drawPoint(e,i,r)}if(l){const o=t.getBuilder(n.getZIndex(),"Text")
o.setTextStyle(a,u),o.drawText(e,i,r)}},LineString:function(t,e,n,i,r){const o=n.getStroke()
if(o){const s=t.getBuilder(n.getZIndex(),"LineString")
s.setFillStrokeStyle(null,o),s.drawLineString(e,i,r)}const s=n.getText()
if(s&&s.getText()){const o=t.getBuilder(n.getZIndex(),"Text")
o.setTextStyle(s),o.drawText(e,i,r)}},Polygon:function(t,e,n,i,r){const o=n.getFill(),s=n.getStroke()
if(o||s){const a=t.getBuilder(n.getZIndex(),"Polygon")
a.setFillStrokeStyle(o,s),a.drawPolygon(e,i,r)}const a=n.getText()
if(a&&a.getText()){const o=t.getBuilder(n.getZIndex(),"Text")
o.setTextStyle(a),o.drawText(e,i,r)}},MultiPoint:function(t,e,n,i,r,o){const s=n.getImage(),a=s&&0!==s.getOpacity(),l=n.getText(),u=l&&l.getText(),h=o&&a&&u?{}:void 0
if(a){if(s.getImageState()!=pt.A.LOADED)return
const o=t.getBuilder(n.getZIndex(),"Image")
o.setImageStyle(s,h),o.drawMultiPoint(e,i,r)}if(u){const o=t.getBuilder(n.getZIndex(),"Text")
o.setTextStyle(l,h),o.drawText(e,i,r)}},MultiLineString:function(t,e,n,i,r){const o=n.getStroke()
if(o){const s=t.getBuilder(n.getZIndex(),"LineString")
s.setFillStrokeStyle(null,o),s.drawMultiLineString(e,i,r)}const s=n.getText()
if(s&&s.getText()){const o=t.getBuilder(n.getZIndex(),"Text")
o.setTextStyle(s),o.drawText(e,i,r)}},MultiPolygon:function(t,e,n,i,r){const o=n.getFill(),s=n.getStroke()
if(s||o){const a=t.getBuilder(n.getZIndex(),"Polygon")
a.setFillStrokeStyle(o,s),a.drawMultiPolygon(e,i,r)}const a=n.getText()
if(a&&a.getText()){const o=t.getBuilder(n.getZIndex(),"Text")
o.setTextStyle(a),o.drawText(e,i,r)}},GeometryCollection:function(t,e,n,i,r,o){const s=e.getGeometriesArray()
let a,l
for(a=0,l=s.length;a<l;++a)(0,gt[s[a].getType()])(t,s[a],n,i,r,o)},Circle:function(t,e,n,i,r){const o=n.getFill(),s=n.getStroke()
if(o||s){const a=t.getBuilder(n.getZIndex(),"Circle")
a.setFillStrokeStyle(o,s),a.drawCircle(e,i,r)}const a=n.getText()
if(a&&a.getText()){const r=t.getBuilder(n.getZIndex(),"Text")
r.setTextStyle(a),r.drawText(e,i)}}}
function _t(t,e){return parseInt((0,A.v6)(t),10)-parseInt((0,A.v6)(e),10)}function mt(t,e){const n=yt(t,e)
return n*n}function yt(t,e){return dt*t/e}function vt(t,e,n,i,r,o,s,a){const l=[],u=n.getImage()
if(u){let t=!0
const e=u.getImageState()
e==pt.A.LOADED||e==pt.A.ERROR?t=!1:e==pt.A.IDLE&&u.load(),t&&l.push(u.ready())}const h=n.getFill()
h&&h.loading()&&l.push(h.ready())
const c=l.length>0
return c&&Promise.all(l).then((()=>r(null))),function(t,e,n,i,r,o,s){const a=n.getGeometryFunction()(e)
if(!a)return
const l=a.simplifyTransformed(i,r)
n.getRenderer()?xt(t,l,n,e,s):(0,gt[l.getType()])(t,l,n,e,s,o)}(t,e,n,i,o,s,a),c}function xt(t,e,n,i,r){if("GeometryCollection"!=e.getType())t.getBuilder(n.getZIndex(),"Default").drawCustom(e,i,n.getRenderer(),n.getHitDetectionRenderer(),r)
else{const o=e.getGeometries()
for(let e=0,s=o.length;e<s;++e)xt(t,o[e],n,i,r)}}var bt=n(8474)
class Et extends F.A{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=(0,E.S5)(),this.wrappedRenderedExtent_=(0,E.S5)(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(t,e,n){const i=e.extent,r=e.viewState,o=r.center,s=r.resolution,a=r.projection,l=r.rotation,u=a.getExtent(),h=this.getLayer().getSource(),c=this.getLayer().getDeclutter(),f=e.pixelRatio,p=e.viewHints,d=!(p[ot.A.ANIMATING]||p[ot.A.INTERACTING]),g=this.context,_=Math.round((0,E.RG)(i)/s*f),m=Math.round((0,E.Oq)(i)/s*f),y=h.getWrapX()&&a.canWrapX(),v=y?(0,E.RG)(u):null,x=y?Math.ceil((i[2]-u[2])/v)+1:1
let b=y?Math.floor((i[0]-u[0])/v):0
do{const i=this.getRenderTransform(o,s,l,f,_,m,b*v)
t.execute(g,[g.canvas.width,g.canvas.height],i,l,d,void 0===n?tt:n?et:nt,n?c&&e.declutter[c]:void 0)}while(++b<x)}setDrawContext_(){1!==this.opacity_&&(this.targetContext_=this.context,this.context=(0,J.Y)(this.context.canvas.width,this.context.canvas.height,F.B))}resetDrawContext_(){if(1!==this.opacity_){const t=this.targetContext_.globalAlpha
this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=t,(0,J.Yg)(this.context),F.B.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(t){this.replayGroup_&&this.getLayer().getDeclutter()&&this.renderWorlds(this.replayGroup_,t,!0)}renderDeferredInternal(t){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.resetDrawContext_())}renderFrame(t,e){const n=t.pixelRatio,i=t.layerStatesArray[t.layerIndex]
this.opacity_=i.opacity
const o=t.extent,s=t.viewState.resolution,a=Math.round((0,E.RG)(o)/s*n),l=Math.round((0,E.Oq)(o)/s*n);(0,j.Zz)(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/n,1/n,0,-a/2,-l/2),(0,j.T9)(this.inversePixelTransform,this.pixelTransform)
const u=(0,j.dI)(this.pixelTransform)
this.useContainer(e,u,this.getBackground(t))
const h=this.context,c=h.canvas,f=this.replayGroup_
let p=f&&!f.isEmpty()
if(!p&&!this.getLayer().hasListener(r.A.PRERENDER)&&!this.getLayer().hasListener(r.A.POSTRENDER))return null
c.width!=a||c.height!=l?(c.width=a,c.height=l,c.style.transform!==u&&(c.style.transform=u)):this.containerReused||h.clearRect(0,0,a,l),this.setDrawContext_(),this.preRender(h,t)
const d=t.viewState,g=d.projection
let _=!1
if(p&&i.extent&&this.clipping){const e=(0,ut.SD)(i.extent,g)
p=(0,E.HY)(e,t.extent),_=p&&!(0,E.ms)(e,t.extent),_&&this.clipUnrotated(h,t,e)}return p&&this.renderWorlds(f,t,!this.getLayer().getDeclutter()&&void 0),_&&h.restore(),this.postRender(h,t),this.renderedRotation_!==d.rotation&&(this.renderedRotation_=d.rotation,this.hitDetectionImageData_=null),t.declutter||this.resetDrawContext_(),this.container}getFeatures(t){return new Promise((e=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const t=[this.context.canvas.width,this.context.canvas.height];(0,j.Bb)(this.pixelTransform,t)
const e=this.renderedCenter_,n=this.renderedResolution_,i=this.renderedRotation_,r=this.renderedProjection_,o=this.wrappedRenderedExtent_,s=this.getLayer(),a=[],l=t[0]*ht,u=t[1]*ht
a.push(this.getRenderTransform(e,n,i,ht,l,u,0).slice())
const h=s.getSource(),c=r.getExtent()
if(h.getWrapX()&&r.canWrapX()&&!(0,E.ms)(c,o)){let t=o[0]
const r=(0,E.RG)(c)
let s,h=0
for(;t<c[0];)--h,s=r*h,a.push(this.getRenderTransform(e,n,i,ht,l,u,s).slice()),t+=r
for(h=0,t=o[2];t>c[2];)++h,s=r*h,a.push(this.getRenderTransform(e,n,i,ht,l,u,s).slice()),t-=r}const f=(0,ut.Tf)()
this.hitDetectionImageData_=ct(t,a,this.renderedFeatures_,s.getStyleFunction(),o,n,i,mt(n,this.renderedPixelRatio_),f?r:null)}e(ft(t,this.renderedFeatures_,this.hitDetectionImageData_))}))}forEachFeatureAtCoordinate(t,e,n,i,r){if(!this.replayGroup_)return
const o=e.viewState.resolution,s=e.viewState.rotation,a=this.getLayer(),l={},u=function(t,e,n){const o=(0,A.v6)(t),s=l[o]
if(s){if(!0!==s&&n<s.distanceSq){if(0===n)return l[o]=!0,r.splice(r.lastIndexOf(s),1),i(t,a,e)
s.geometry=e,s.distanceSq=n}}else{if(0===n)return l[o]=!0,i(t,a,e)
r.push(l[o]={feature:t,layer:a,geometry:e,distanceSq:n,callback:i})}}
let h
const c=[this.replayGroup_],f=this.getLayer().getDeclutter()
return c.some((i=>h=i.forEachFeatureAtCoordinate(t,o,s,n,u,f&&e.declutter[f]?e.declutter[f].all().map((t=>t.value)):null))),h}handleFontsChanged(){const t=this.getLayer()
t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const e=this.getLayer(),n=e.getSource()
if(!n)return!1
const i=t.viewHints[ot.A.ANIMATING],r=t.viewHints[ot.A.INTERACTING],o=e.getUpdateWhileAnimating(),s=e.getUpdateWhileInteracting()
if(this.ready&&!o&&i||!s&&r)return this.animatingOrInteracting_=!0,!0
this.animatingOrInteracting_=!1
const a=t.extent,l=t.viewState,u=l.projection,h=l.resolution,c=t.pixelRatio,f=e.getRevision(),p=e.getRenderBuffer()
let d=e.getRenderOrder()
void 0===d&&(d=_t)
const g=l.center.slice(),_=(0,E.r)(a,p*h),m=_.slice(),y=[_.slice()],v=u.getExtent()
if(n.getWrapX()&&u.canWrapX()&&!(0,E.ms)(v,t.extent)){const t=(0,E.RG)(v),e=Math.max((0,E.RG)(_)/2,t)
_[0]=v[0]-e,_[2]=v[2]+e,(0,bt.Li)(g,u)
const n=(0,E.Li)(y[0],u)
n[0]<v[0]&&n[2]<v[2]?y.push([n[0]+t,n[1],n[2]+t,n[3]]):n[0]>v[0]&&n[2]>v[2]&&y.push([n[0]-t,n[1],n[2]-t,n[3]])}if(this.ready&&this.renderedResolution_==h&&this.renderedRevision_==f&&this.renderedRenderOrder_==d&&(0,E.ms)(this.wrappedRenderedExtent_,_))return(0,S.aI)(this.renderedExtent_,m)||(this.hitDetectionImageData_=null,this.renderedExtent_=m),this.renderedCenter_=g,this.replayGroupChanged=!1,!0
this.replayGroup_=null
const x=new D(yt(h,c),_,h,c),b=(0,ut.Tf)()
let w
if(b){for(let t=0,e=y.length;t<e;++t){const e=y[t],i=(0,ut.JR)(e,u)
n.loadFeatures(i,(0,ut.vN)(h,u),b)}w=(0,ut.FO)(b,u)}else for(let E=0,S=y.length;E<S;++E)n.loadFeatures(y[E],h,u)
const C=mt(h,c)
let T=!0
const I=(t,n)=>{let i
const r=t.getStyleFunction()||e.getStyleFunction()
if(r&&(i=r(t,h)),i){const e=this.renderFeature(t,C,i,x,w,this.getLayer().getDeclutter(),n)
T=T&&!e}},P=(0,ut.JR)(_,u),A=n.getFeaturesInExtent(P)
d&&A.sort(d)
for(let E=0,S=A.length;E<S;++E)I(A[E],E)
this.renderedFeatures_=A,this.ready=T
const R=x.finish(),L=new rt(_,h,c,n.getOverlaps(),R,e.getRenderBuffer(),!!t.declutter)
return this.renderedResolution_=h,this.renderedRevision_=f,this.renderedRenderOrder_=d,this.renderedExtent_=m,this.wrappedRenderedExtent_=_,this.renderedCenter_=g,this.renderedProjection_=u,this.renderedPixelRatio_=c,this.replayGroup_=L,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,e,n,i,r,o,s){if(!n)return!1
let a=!1
if(Array.isArray(n))for(let l=0,u=n.length;l<u;++l)a=vt(i,t,n[l],e,this.boundHandleStyleImageChange_,r,o,s)||a
else a=vt(i,t,n,e,this.boundHandleStyleImageChange_,r,o,s)
return a}}const wt=Et
class St extends f.A{constructor(t){super(t)}createRenderer(){return new wt(this)}}const Ct=St
var Tt=n(9481)
function It(t,e,n){const i=[]
let r=t(0),o=t(1),s=e(r),a=e(o)
const l=[o,r],u=[a,s],h=[1,0],c={}
let f,p,d,g,_,m,y=1e5
for(;--y>0&&h.length>0;)d=h.pop(),r=l.pop(),s=u.pop(),m=d.toString(),m in c||(i.push(s[0],s[1]),c[m]=!0),g=h.pop(),o=l.pop(),a=u.pop(),_=(d+g)/2,f=t(_),p=e(f),(0,R.Q1)(p[0],p[1],s[0],s[1],a[0],a[1])<n?(i.push(a[0],a[1]),m=g.toString(),c[m]=!0):(h.push(g,_,_,d),u.push(a,p,p,s),l.push(o,f,f,r))
return i}const Pt=new u.A({color:"rgba(0,0,0,0.2)"}),At=[90,45,30,20,10,5,2,1,.5,20/60,10/60,5/60,2/60,1/60,30/3600,20/3600,10/3600,5/3600,2/3600,1/3600],Rt=class extends Ct{constructor(t){t=t||{}
const e=Object.assign({updateWhileAnimating:!0,updateWhileInteracting:!0,renderBuffer:0},t)
delete e.maxLines,delete e.strokeStyle,delete e.targetSize,delete e.showLabels,delete e.lonLabelFormatter,delete e.latLabelFormatter,delete e.lonLabelPosition,delete e.latLabelPosition,delete e.lonLabelStyle,delete e.latLabelStyle,delete e.intervals,super(e),this.projection_=null,this.maxLat_=1/0,this.maxLon_=1/0,this.minLat_=-1/0,this.minLon_=-1/0,this.maxX_=1/0,this.maxY_=1/0,this.minX_=-1/0,this.minY_=-1/0,this.targetSize_=void 0!==t.targetSize?t.targetSize:100,this.maxLines_=void 0!==t.maxLines?t.maxLines:100,this.meridians_=[],this.parallels_=[],this.strokeStyle_=void 0!==t.strokeStyle?t.strokeStyle:Pt,this.fromLonLatTransform_=void 0,this.toLonLatTransform_=void 0,this.projectionCenterLonLat_=null,this.bottomLeft_=null,this.bottomRight_=null,this.topLeft_=null,this.topRight_=null,this.meridiansLabels_=null,this.parallelsLabels_=null,t.showLabels&&(this.lonLabelFormatter_=null==t.lonLabelFormatter?bt.aP.bind(this,"EW"):t.lonLabelFormatter,this.latLabelFormatter_=null==t.latLabelFormatter?bt.aP.bind(this,"NS"):t.latLabelFormatter,this.lonLabelPosition_=null==t.lonLabelPosition?0:t.lonLabelPosition,this.latLabelPosition_=null==t.latLabelPosition?1:t.latLabelPosition,this.lonLabelStyleBase_=new h.Ay({text:void 0!==t.lonLabelStyle?t.lonLabelStyle.clone():new c.A({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new s.A({color:"rgba(0,0,0,1)"}),stroke:new u.A({color:"rgba(255,255,255,1)",width:3})})}),this.lonLabelStyle_=t=>{const e=t.get("graticule_label")
return this.lonLabelStyleBase_.getText().setText(e),this.lonLabelStyleBase_},this.latLabelStyleBase_=new h.Ay({text:void 0!==t.latLabelStyle?t.latLabelStyle.clone():new c.A({font:"12px Calibri,sans-serif",textAlign:"right",fill:new s.A({color:"rgba(0,0,0,1)"}),stroke:new u.A({color:"rgba(255,255,255,1)",width:3})})}),this.latLabelStyle_=t=>{const e=t.get("graticule_label")
return this.latLabelStyleBase_.getText().setText(e),this.latLabelStyleBase_},this.meridiansLabels_=[],this.parallelsLabels_=[],this.addEventListener(r.A.POSTRENDER,this.drawLabels_.bind(this))),this.intervals_=void 0!==t.intervals?t.intervals:At,this.setSource(new Tt.A({loader:this.loaderFunction.bind(this),strategy:this.strategyFunction.bind(this),features:new i.A,overlaps:!1,useSpatialIndex:!1,wrapX:t.wrapX})),this.featurePool_=[],this.lineStyle_=new h.Ay({stroke:this.strokeStyle_}),this.loadedExtent_=null,this.renderedExtent_=null,this.renderedResolution_=null,this.setRenderOrder(null)}strategyFunction(t,e){let n=t.slice()
return this.projection_&&this.getSource().getWrapX()&&(0,E.Li)(n,this.projection_),this.loadedExtent_&&((0,E.bE)(this.loadedExtent_,n,e)?n=this.loadedExtent_.slice():this.getSource().removeLoadedExtent(this.loadedExtent_)),[n]}loaderFunction(t,e,n){this.loadedExtent_=t
const i=this.getSource(),r=this.getExtent()||[-1/0,-1/0,1/0,1/0],s=(0,E._N)(r,t)
if(this.renderedExtent_&&(0,E.aI)(this.renderedExtent_,s)&&this.renderedResolution_===e)return
if(this.renderedExtent_=s,this.renderedResolution_=e,(0,E.Im)(s))return
const a=(0,E.q1)(s),l=e*e/4;(!this.projection_||!(0,ut.tI)(this.projection_,n))&&this.updateProjectionInfo_(n),this.createGraticule_(s,a,e,l)
let u,h=this.meridians_.length+this.parallels_.length
for(this.meridiansLabels_&&(h+=this.meridians_.length),this.parallelsLabels_&&(h+=this.parallels_.length);h>this.featurePool_.length;)u=new o.A,this.featurePool_.push(u)
const c=i.getFeaturesCollection()
c.clear()
let f,p,d=0
for(f=0,p=this.meridians_.length;f<p;++f)u=this.featurePool_[d++],u.setGeometry(this.meridians_[f]),u.setStyle(this.lineStyle_),c.push(u)
for(f=0,p=this.parallels_.length;f<p;++f)u=this.featurePool_[d++],u.setGeometry(this.parallels_[f]),u.setStyle(this.lineStyle_),c.push(u)}addMeridian_(t,e,n,i,r,o){const s=this.getMeridian_(t,e,n,i,o)
if((0,E.HY)(s.getExtent(),r)){if(this.meridiansLabels_){const e=this.lonLabelFormatter_(t)
o in this.meridiansLabels_?this.meridiansLabels_[o].text=e:this.meridiansLabels_[o]={geom:new l.A([]),text:e}}this.meridians_[o++]=s}return o}addParallel_(t,e,n,i,r,o){const s=this.getParallel_(t,e,n,i,o)
if((0,E.HY)(s.getExtent(),r)){if(this.parallelsLabels_){const e=this.latLabelFormatter_(t)
o in this.parallelsLabels_?this.parallelsLabels_[o].text=e:this.parallelsLabels_[o]={geom:new l.A([]),text:e}}this.parallels_[o++]=s}return o}drawLabels_(t){const e=t.frameState.viewState.rotation,n=t.frameState.viewState.resolution,i=t.frameState.size,r=t.frameState.extent,o=(0,E.q1)(r)
let s=r
if(e){const t=i[0]*n,e=i[1]*n
s=[o[0]-t/2,o[1]-e/2,o[0]+t/2,o[1]+e/2]}let a=0,l=0,u=this.latLabelPosition_<.5
const h=this.projection_.getExtent(),c=(0,E.RG)(h)
this.getSource().getWrapX()&&this.projection_.canWrapX()&&!(0,E.ms)(h,r)&&(a=Math.floor((r[0]-h[0])/c),l=Math.ceil((r[2]-h[2])/c),u=u!==Math.abs(e)>Math.PI/2)
const f=function(t){if(!(t.context instanceof CanvasRenderingContext2D))throw new Error("Only works for render events from Canvas 2D layers")
const e=t.inversePixelTransform[0],n=t.inversePixelTransform[1],i=Math.sqrt(e*e+n*n),r=t.frameState,o=(0,j.lw)(t.inversePixelTransform.slice(),r.coordinateToPixelTransform),s=mt(r.viewState.resolution,i)
let a
const l=(0,ut.Tf)()
return l&&(a=(0,ut.FO)(l,r.viewState.projection)),new at(t.context,i,r.extent,o,r.viewState.rotation,s,a)}(t)
for(let p=a;p<=l;++p){let t,n,i,h,d=this.meridians_.length+this.parallels_.length
if(this.meridiansLabels_)for(n=0,i=this.meridiansLabels_.length;n<i;++n){const i=this.meridians_[n]
if(e||0!==p){const t=i.clone()
t.translate(p*c,0),t.rotate(-e,o),h=this.getMeridianPoint_(t,s,n),h.rotate(e,o)}else h=this.getMeridianPoint_(i,r,n)
t=this.featurePool_[d++],t.setGeometry(h),t.set("graticule_label",this.meridiansLabels_[n].text),f.drawFeature(t,this.lonLabelStyle_(t))}if(this.parallelsLabels_&&(p===a&&u||p===l&&!u))for(n=0,i=this.parallels_.length;n<i;++n){const i=this.parallels_[n]
if(e||0!==p){const t=i.clone()
t.translate(p*c,0),t.rotate(-e,o),h=this.getParallelPoint_(t,s,n),h.rotate(e,o)}else h=this.getParallelPoint_(i,r,n)
t=this.featurePool_[d++],t.setGeometry(h),t.set("graticule_label",this.parallelsLabels_[n].text),f.drawFeature(t,this.latLabelStyle_(t))}}}createGraticule_(t,e,n,i){const r=this.getInterval_(n)
if(-1==r)return this.meridians_.length=0,this.parallels_.length=0,this.meridiansLabels_&&(this.meridiansLabels_.length=0),void(this.parallelsLabels_&&(this.parallelsLabels_.length=0))
let o=!1
const s=this.projection_.getExtent(),a=(0,E.RG)(s)
this.getSource().getWrapX()&&this.projection_.canWrapX()&&!(0,E.ms)(s,t)&&((0,E.RG)(t)>=a?(t[0]=s[0],t[2]=s[2]):o=!0)
const l=[(0,R.qE)(e[0],this.minX_,this.maxX_),(0,R.qE)(e[1],this.minY_,this.maxY_)],u=this.toLonLatTransform_(l)
isNaN(u[1])&&(u[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_)
let h=(0,R.qE)(u[0],this.minLon_,this.maxLon_),c=(0,R.qE)(u[1],this.minLat_,this.maxLat_)
const f=this.maxLines_
let p,d,g,_,m=t
o||(m=[(0,R.qE)(t[0],this.minX_,this.maxX_),(0,R.qE)(t[1],this.minY_,this.maxY_),(0,R.qE)(t[2],this.minX_,this.maxX_),(0,R.qE)(t[3],this.minY_,this.maxY_)])
const y=(0,E.NW)(m,this.toLonLatTransform_,void 0,8)
let v=y[3],x=y[2],b=y[1],w=y[0]
if(o||((0,E.Ym)(m,this.bottomLeft_)&&(w=this.minLon_,b=this.minLat_),(0,E.Ym)(m,this.bottomRight_)&&(x=this.maxLon_,b=this.minLat_),(0,E.Ym)(m,this.topLeft_)&&(w=this.minLon_,v=this.maxLat_),(0,E.Ym)(m,this.topRight_)&&(x=this.maxLon_,v=this.maxLat_),v=(0,R.qE)(v,c,this.maxLat_),x=(0,R.qE)(x,h,this.maxLon_),b=(0,R.qE)(b,this.minLat_,c),w=(0,R.qE)(w,this.minLon_,h)),h=Math.floor(h/r)*r,_=(0,R.qE)(h,this.minLon_,this.maxLon_),d=this.addMeridian_(_,b,v,i,t,0),p=0,o)for(;(_-=r)>=w&&p++<f;)d=this.addMeridian_(_,b,v,i,t,d)
else for(;_!=this.minLon_&&p++<f;)_=Math.max(_-r,this.minLon_),d=this.addMeridian_(_,b,v,i,t,d)
if(_=(0,R.qE)(h,this.minLon_,this.maxLon_),p=0,o)for(;(_+=r)<=x&&p++<f;)d=this.addMeridian_(_,b,v,i,t,d)
else for(;_!=this.maxLon_&&p++<f;)_=Math.min(_+r,this.maxLon_),d=this.addMeridian_(_,b,v,i,t,d)
for(this.meridians_.length=d,this.meridiansLabels_&&(this.meridiansLabels_.length=d),c=Math.floor(c/r)*r,g=(0,R.qE)(c,this.minLat_,this.maxLat_),d=this.addParallel_(g,w,x,i,t,0),p=0;g!=this.minLat_&&p++<f;)g=Math.max(g-r,this.minLat_),d=this.addParallel_(g,w,x,i,t,d)
for(g=(0,R.qE)(c,this.minLat_,this.maxLat_),p=0;g!=this.maxLat_&&p++<f;)g=Math.min(g+r,this.maxLat_),d=this.addParallel_(g,w,x,i,t,d)
this.parallels_.length=d,this.parallelsLabels_&&(this.parallelsLabels_.length=d)}getInterval_(t){const e=this.projectionCenterLonLat_[0],n=this.projectionCenterLonLat_[1]
let i=-1
const r=Math.pow(this.targetSize_*t,2),o=[],s=[]
for(let a=0,l=this.intervals_.length;a<l;++a){const t=(0,R.qE)(this.intervals_[a]/2,0,90),l=(0,R.qE)(n,-90+t,90-t)
if(o[0]=e-t,o[1]=l-t,s[0]=e+t,s[1]=l+t,this.fromLonLatTransform_(o,o),this.fromLonLatTransform_(s,s),Math.pow(s[0]-o[0],2)+Math.pow(s[1]-o[1],2)<=r)break
i=this.intervals_[a]}return i}getMeridian_(t,e,n,i,r){const o=function(t,e,n,i,r){const o=(0,ut.Jt)("EPSG:4326")
return It((function(i){return[t,e+(n-e)*i]}),(0,ut.RG)(o,i),r)}(t,e,n,this.projection_,i)
let s=this.meridians_[r]
return s?(s.setFlatCoordinates("XY",o),s.changed()):(s=new a.A(o,"XY"),this.meridians_[r]=s),s}getMeridianPoint_(t,e,n){const i=t.getFlatCoordinates()
let r=1,o=i.length-1
i[r]>i[o]&&(r=o,o=1)
const s=Math.max(e[1],i[r]),a=Math.min(e[3],i[o]),l=(0,R.qE)(e[1]+Math.abs(e[1]-e[3])*this.lonLabelPosition_,s,a),u=[i[r-1]+(i[o-1]-i[r-1])*(l-i[r])/(i[o]-i[r]),l],h=this.meridiansLabels_[n].geom
return h.setCoordinates(u),h}getMeridians(){return this.meridians_}getParallel_(t,e,n,i,r){const o=function(t,e,n,i,r){const o=(0,ut.Jt)("EPSG:4326")
return It((function(i){return[e+(n-e)*i,t]}),(0,ut.RG)(o,i),r)}(t,e,n,this.projection_,i)
let s=this.parallels_[r]
return s?(s.setFlatCoordinates("XY",o),s.changed()):s=new a.A(o,"XY"),s}getParallelPoint_(t,e,n){const i=t.getFlatCoordinates()
let r=0,o=i.length-2
i[r]>i[o]&&(r=o,o=0)
const s=Math.max(e[0],i[r]),a=Math.min(e[2],i[o]),l=(0,R.qE)(e[0]+Math.abs(e[0]-e[2])*this.latLabelPosition_,s,a),u=[l,i[r+1]+(i[o+1]-i[r+1])*(l-i[r])/(i[o]-i[r])],h=this.parallelsLabels_[n].geom
return h.setCoordinates(u),h}getParallels(){return this.parallels_}updateProjectionInfo_(t){const e=(0,ut.Jt)("EPSG:4326"),n=t.getWorldExtent()
this.maxLat_=n[3],this.maxLon_=n[2],this.minLat_=n[1],this.minLon_=n[0]
const i=(0,ut.RG)(t,e)
if(this.minLon_<this.maxLon_)this.toLonLatTransform_=i
else{const t=this.minLon_+this.maxLon_/2
this.maxLon_+=360,this.toLonLatTransform_=function(e,n,r){const o=i(e,n,r=r||2)
for(let i=0,s=o.length;i<s;i+=r)o[i]<t&&(o[i]+=360)
return o}}this.fromLonLatTransform_=(0,ut.RG)(e,t)
const r=(0,E.NW)([this.minLon_,this.minLat_,this.maxLon_,this.maxLat_],this.fromLonLatTransform_,void 0,8)
this.minX_=r[0],this.maxX_=r[2],this.minY_=r[1],this.maxY_=r[3],this.bottomLeft_=this.fromLonLatTransform_([this.minLon_,this.minLat_]),this.bottomRight_=this.fromLonLatTransform_([this.maxLon_,this.minLat_]),this.topLeft_=this.fromLonLatTransform_([this.minLon_,this.maxLat_]),this.topRight_=this.fromLonLatTransform_([this.maxLon_,this.maxLat_]),this.projectionCenterLonLat_=this.toLonLatTransform_((0,E.q1)(t.getExtent())),isNaN(this.projectionCenterLonLat_[1])&&(this.projectionCenterLonLat_[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_),this.projection_=t}}
var Lt=n(1971),Mt=n(8027),Ot=n(1622)
const Nt=34962,Dt=34963,Ft=["experimental-webgl","webgl","webkit-3d","moz-webgl"]
function kt(t,e){e=Object.assign({preserveDrawingBuffer:!0,antialias:!Ot.oF},e)
const n=Ft.length
for(let i=0;i<n;++i)try{const n=t.getContext(Ft[i],e)
if(n)return n}catch(t){}return null}var jt=n(6249)
function zt(t){switch(t){case Nt:return Float32Array
case Dt:return Uint32Array
default:return Float32Array}}const Gt=class{constructor(t,e){this.array_=null,this.type_=t,(0,jt.v)(t===Nt||t===Dt,"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`"),this.usage_=void 0!==e?e:35044}ofSize(t){return this.array_=new(zt(this.type_))(t),this}fromArray(t){return this.array_=zt(this.type_).from(t),this}fromArrayBuffer(t){return this.array_=new(zt(this.type_))(t),this}getType(){return this.type_}getArray(){return this.array_}getUsage(){return this.usage_}getSize(){return this.array_?this.array_.length:0}}
var Bt=n(7439),qt=n(5097),Ut=n(7683)
const Zt="webglcontextlost",Xt="webglcontextrestored"
var Yt=n(8646)
const Vt=class{constructor(t){this.gl_=t.webGlContext
const e=this.gl_
this.scaleRatio_=t.scaleRatio||1,this.renderTargetTexture_=e.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=e.createFramebuffer(),this.depthBuffer_=e.createRenderbuffer()
const n=e.createShader(e.VERTEX_SHADER)
e.shaderSource(n,t.vertexShader||"\n  precision mediump float;\n  \n  attribute vec2 a_position;\n  varying vec2 v_texCoord;\n  varying vec2 v_screenCoord;\n  \n  uniform vec2 u_screenSize;\n   \n  void main() {\n    v_texCoord = a_position * 0.5 + 0.5;\n    v_screenCoord = v_texCoord * u_screenSize;\n    gl_Position = vec4(a_position, 0.0, 1.0);\n  }\n"),e.compileShader(n)
const i=e.createShader(e.FRAGMENT_SHADER)
e.shaderSource(i,t.fragmentShader||"\n  precision mediump float;\n   \n  uniform sampler2D u_image;\n  uniform float u_opacity;\n   \n  varying vec2 v_texCoord;\n   \n  void main() {\n    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;\n  }\n"),e.compileShader(i),this.renderTargetProgram_=e.createProgram(),e.attachShader(this.renderTargetProgram_,n),e.attachShader(this.renderTargetProgram_,i),e.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),e.STATIC_DRAW),this.renderTargetAttribLocation_=e.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],t.uniforms&&Object.keys(t.uniforms).forEach((n=>{this.uniforms_.push({value:t.uniforms[n],location:e.getUniformLocation(this.renderTargetProgram_,n)})}))}getGL(){return this.gl_}init(t){const e=this.getGL(),n=[e.drawingBufferWidth*this.scaleRatio_,e.drawingBufferHeight*this.scaleRatio_]
if(e.bindFramebuffer(e.FRAMEBUFFER,this.getFrameBuffer()),e.bindRenderbuffer(e.RENDERBUFFER,this.getDepthBuffer()),e.viewport(0,0,n[0],n[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==n[0]||this.renderTargetTextureSize_[1]!==n[1]){this.renderTargetTextureSize_=n
const t=0,i=e.RGBA,r=0,o=e.RGBA,s=e.UNSIGNED_BYTE,a=null
e.bindTexture(e.TEXTURE_2D,this.renderTargetTexture_),e.texImage2D(e.TEXTURE_2D,t,i,n[0],n[1],r,o,s,a),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.renderTargetTexture_,0),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,n[0],n[1]),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,this.depthBuffer_)}}apply(t,e,n,i){const r=this.getGL(),o=t.size
if(r.bindFramebuffer(r.FRAMEBUFFER,e?e.getFrameBuffer():null),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,this.renderTargetTexture_),!e){const e=(0,A.v6)(r.canvas)
if(!t.renderTargets[e]){const n=r.getContextAttributes()
n&&n.preserveDrawingBuffer&&(r.clearColor(0,0,0,0),r.clearDepth(1),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT)),t.renderTargets[e]=!0}}r.disable(r.DEPTH_TEST),r.enable(r.BLEND),r.blendFunc(r.ONE,r.ONE_MINUS_SRC_ALPHA),r.viewport(0,0,r.drawingBufferWidth,r.drawingBufferHeight),r.bindBuffer(r.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),r.useProgram(this.renderTargetProgram_),r.enableVertexAttribArray(this.renderTargetAttribLocation_),r.vertexAttribPointer(this.renderTargetAttribLocation_,2,r.FLOAT,!1,0,0),r.uniform2f(this.renderTargetUniformLocation_,o[0],o[1]),r.uniform1i(this.renderTargetTextureLocation_,0)
const s=t.layerStatesArray[t.layerIndex].opacity
r.uniform1f(this.renderTargetOpacityLocation_,s),this.applyUniforms(t),n&&n(r,t),r.drawArrays(r.TRIANGLES,0,6),i&&i(r,t)}getFrameBuffer(){return this.frameBuffer_}getDepthBuffer(){return this.depthBuffer_}applyUniforms(t){const e=this.getGL()
let n,i=1
this.uniforms_.forEach((function(r){if(n="function"==typeof r.value?r.value(t):r.value,n instanceof HTMLCanvasElement||n instanceof ImageData)r.texture||(r.texture=e.createTexture()),e.activeTexture(e[`TEXTURE${i}`]),e.bindTexture(e.TEXTURE_2D,r.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),n instanceof ImageData?e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,n.width,n.height,0,e.UNSIGNED_BYTE,new Uint8Array(n.data)):e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n),e.uniform1i(r.location,i++)
else if(Array.isArray(n))switch(n.length){case 2:return void e.uniform2f(r.location,n[0],n[1])
case 3:return void e.uniform3f(r.location,n[0],n[1],n[2])
case 4:return void e.uniform4f(r.location,n[0],n[1],n[2],n[3])
default:return}else"number"==typeof n&&e.uniform1f(r.location,n)}))}}
function Wt(t,e){return t[0]=e[0],t[1]=e[1],t[4]=e[2],t[5]=e[3],t[12]=e[4],t[13]=e[5],t}const Ht="u_pixelRatio",$t=5126,Kt={}
function Jt(t){return"shared/"+t}let Qt=0
class te extends Yt.A{constructor(t){super(),t=t||{},this.boundHandleWebGLContextLost_=this.handleWebGLContextLost.bind(this),this.boundHandleWebGLContextRestored_=this.handleWebGLContextRestored.bind(this),this.canvasCacheKey_=t.canvasCacheKey?Jt(t.canvasCacheKey):function(){const t="unique/"+Qt
return Qt+=1,t}(),this.gl_=function(t){let e=Kt[t]
if(!e){const n=document.createElement("canvas")
n.width=1,n.height=1,n.style.position="absolute",n.style.left="0",e={users:0,context:kt(n)},Kt[t]=e}return e.users+=1,e.context}(this.canvasCacheKey_),this.bufferCache_={},this.extensionCache_={},this.currentProgram_=null,this.needsToBeRecreated_=!1
const e=this.gl_.canvas
e.addEventListener(Zt,this.boundHandleWebGLContextLost_),e.addEventListener(Xt,this.boundHandleWebGLContextRestored_),this.offsetRotateMatrix_=(0,j.vt)(),this.offsetScaleMatrix_=(0,j.vt)(),this.tmpMat4_=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.uniformLocationsByProgram_={},this.attribLocationsByProgram_={},this.uniforms_=[],t.uniforms&&this.setUniforms(t.uniforms),this.postProcessPasses_=t.postProcesses?t.postProcesses.map((t=>new Vt({webGlContext:this.gl_,scaleRatio:t.scaleRatio,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms}))):[new Vt({webGlContext:this.gl_})],this.shaderCompileErrors_=null,this.startTime_=Date.now()}setUniforms(t){this.uniforms_=[],this.addUniforms(t)}addUniforms(t){for(const e in t)this.uniforms_.push({name:e,value:t[e]})}canvasCacheKeyMatches(t){return this.canvasCacheKey_===Jt(t)}getExtension(t){if(t in this.extensionCache_)return this.extensionCache_[t]
const e=this.gl_.getExtension(t)
return this.extensionCache_[t]=e,e}bindBuffer(t){const e=this.gl_,n=(0,A.v6)(t)
let i=this.bufferCache_[n]
i||(i={buffer:t,webGlBuffer:e.createBuffer()},this.bufferCache_[n]=i),e.bindBuffer(t.getType(),i.webGlBuffer)}flushBufferData(t){const e=this.gl_
this.bindBuffer(t),e.bufferData(t.getType(),t.getArray(),t.getUsage())}deleteBuffer(t){const e=this.gl_,n=(0,A.v6)(t),i=this.bufferCache_[n]
i&&!e.isContextLost()&&e.deleteBuffer(i.webGlBuffer),delete this.bufferCache_[n]}disposeInternal(){const t=this.gl_.canvas
t.removeEventListener(Zt,this.boundHandleWebGLContextLost_),t.removeEventListener(Xt,this.boundHandleWebGLContextRestored_),function(t){const e=Kt[t]
if(!e)return
if(e.users-=1,e.users>0)return
const n=e.context,i=n.getExtension("WEBGL_lose_context")
i&&i.loseContext()
const r=n.canvas
r.width=1,r.height=1,delete Kt[t]}(this.canvasCacheKey_),delete this.gl_}prepareDraw(t,e,n){const i=this.gl_,r=this.getCanvas(),o=t.size,s=t.pixelRatio
r.width===o[0]*s&&r.height===o[1]*s||(r.width=o[0]*s,r.height=o[1]*s,r.style.width=o[0]+"px",r.style.height=o[1]+"px")
for(let a=this.postProcessPasses_.length-1;a>=0;a--)this.postProcessPasses_[a].init(t)
i.bindTexture(i.TEXTURE_2D,null),i.clearColor(0,0,0,0),i.depthRange(0,1),i.clearDepth(1),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),i.enable(i.BLEND),i.blendFunc(i.ONE,e?i.ZERO:i.ONE_MINUS_SRC_ALPHA),n?(i.enable(i.DEPTH_TEST),i.depthFunc(i.LEQUAL)):i.disable(i.DEPTH_TEST)}bindTexture(t,e,n){const i=this.gl_
i.activeTexture(i.TEXTURE0+e),i.bindTexture(i.TEXTURE_2D,t),i.uniform1i(this.getUniformLocation(n),e)}prepareDrawToRenderTarget(t,e,n,i){const r=this.gl_,o=e.getSize()
r.bindFramebuffer(r.FRAMEBUFFER,e.getFramebuffer()),r.bindRenderbuffer(r.RENDERBUFFER,e.getDepthbuffer()),r.viewport(0,0,o[0],o[1]),r.bindTexture(r.TEXTURE_2D,e.getTexture()),r.clearColor(0,0,0,0),r.depthRange(0,1),r.clearDepth(1),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT),r.enable(r.BLEND),r.blendFunc(r.ONE,n?r.ZERO:r.ONE_MINUS_SRC_ALPHA),i?(r.enable(r.DEPTH_TEST),r.depthFunc(r.LEQUAL)):r.disable(r.DEPTH_TEST)}drawElements(t,e){const n=this.gl_
this.getExtension("OES_element_index_uint")
const i=n.UNSIGNED_INT,r=e-t,o=4*t
n.drawElements(n.TRIANGLES,r,i,o)}finalizeDraw(t,e,n){for(let i=0,r=this.postProcessPasses_.length;i<r;i++)i===r-1?this.postProcessPasses_[i].apply(t,null,e,n):this.postProcessPasses_[i].apply(t,this.postProcessPasses_[i+1])}getCanvas(){return this.gl_.canvas}getGL(){return this.gl_}applyFrameState(t){const e=t.size,n=t.viewState.rotation,i=t.pixelRatio
this.setUniformFloatValue("u_time",.001*(Date.now()-this.startTime_)),this.setUniformFloatValue("u_zoom",t.viewState.zoom),this.setUniformFloatValue("u_resolution",t.viewState.resolution),this.setUniformFloatValue(Ht,i),this.setUniformFloatVec2("u_viewportSizePx",[e[0],e[1]]),this.setUniformFloatValue("u_rotation",n)}applyHitDetectionUniform(t){const e=this.getUniformLocation("u_hitDetection")
this.getGL().uniform1i(e,t?1:0),t&&this.setUniformFloatValue(Ht,.5)}applyUniforms(t){const e=this.gl_
let n,i=0
this.uniforms_.forEach((r=>{if(n="function"==typeof r.value?r.value(t):r.value,n instanceof HTMLCanvasElement||n instanceof HTMLImageElement||n instanceof ImageData||n instanceof WebGLTexture){n instanceof WebGLTexture&&!r.texture?(r.prevValue=void 0,r.texture=n):r.texture||(r.prevValue=void 0,r.texture=e.createTexture()),this.bindTexture(r.texture,i,r.name),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)
const t=!(n instanceof HTMLImageElement)||n.complete
n instanceof WebGLTexture||!t||r.prevValue===n||(r.prevValue=n,e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)),i++}else if(Array.isArray(n)&&6===n.length)this.setUniformMatrixValue(r.name,Wt(this.tmpMat4_,n))
else if(Array.isArray(n)&&n.length<=4)switch(n.length){case 2:return void e.uniform2f(this.getUniformLocation(r.name),n[0],n[1])
case 3:return void e.uniform3f(this.getUniformLocation(r.name),n[0],n[1],n[2])
case 4:return void e.uniform4f(this.getUniformLocation(r.name),n[0],n[1],n[2],n[3])
default:return}else"number"==typeof n&&e.uniform1f(this.getUniformLocation(r.name),n)}))}useProgram(t,e){this.gl_.useProgram(t),this.currentProgram_=t,this.applyFrameState(e),this.applyUniforms(e)}compileShader(t,e){const n=this.gl_,i=n.createShader(e)
return n.shaderSource(i,t),n.compileShader(i),i}getProgram(t,e){const n=this.gl_,i=this.compileShader(t,n.FRAGMENT_SHADER),r=this.compileShader(e,n.VERTEX_SHADER),o=n.createProgram()
if(n.attachShader(o,i),n.attachShader(o,r),n.linkProgram(o),!n.getShaderParameter(i,n.COMPILE_STATUS)){const t=`Fragment shader compilation failed: ${n.getShaderInfoLog(i)}`
throw new Error(t)}if(n.deleteShader(i),!n.getShaderParameter(r,n.COMPILE_STATUS)){const t=`Vertex shader compilation failed: ${n.getShaderInfoLog(r)}`
throw new Error(t)}if(n.deleteShader(r),!n.getProgramParameter(o,n.LINK_STATUS)){const t=`GL program linking failed: ${n.getProgramInfoLog(o)}`
throw new Error(t)}return o}getUniformLocation(t){const e=(0,A.v6)(this.currentProgram_)
return void 0===this.uniformLocationsByProgram_[e]&&(this.uniformLocationsByProgram_[e]={}),void 0===this.uniformLocationsByProgram_[e][t]&&(this.uniformLocationsByProgram_[e][t]=this.gl_.getUniformLocation(this.currentProgram_,t)),this.uniformLocationsByProgram_[e][t]}getAttributeLocation(t){const e=(0,A.v6)(this.currentProgram_)
return void 0===this.attribLocationsByProgram_[e]&&(this.attribLocationsByProgram_[e]={}),void 0===this.attribLocationsByProgram_[e][t]&&(this.attribLocationsByProgram_[e][t]=this.gl_.getAttribLocation(this.currentProgram_,t)),this.attribLocationsByProgram_[e][t]}makeProjectionTransform(t,e){const n=t.size,i=t.viewState.rotation,r=t.viewState.resolution,o=t.viewState.center
return(0,j.Zz)(e,0,0,2/(r*n[0]),2/(r*n[1]),-i,-o[0],-o[1]),e}setUniformFloatValue(t,e){this.gl_.uniform1f(this.getUniformLocation(t),e)}setUniformFloatVec2(t,e){this.gl_.uniform2fv(this.getUniformLocation(t),e)}setUniformFloatVec4(t,e){this.gl_.uniform4fv(this.getUniformLocation(t),e)}setUniformMatrixValue(t,e){this.gl_.uniformMatrix4fv(this.getUniformLocation(t),!1,e)}enableAttributeArray_(t,e,n,i,r){const o=this.getAttributeLocation(t)
o<0||(this.gl_.enableVertexAttribArray(o),this.gl_.vertexAttribPointer(o,e,n,!1,i,r))}enableAttributes(t){const e=function(t){let e=0
for(let n=0;n<t.length;n++){const i=t[n]
e+=i.size*ee(i.type)}return e}(t)
let n=0
for(let i=0;i<t.length;i++){const r=t[i]
this.enableAttributeArray_(r.name,r.size,r.type||5126,e,n),n+=r.size*ee(r.type)}}handleWebGLContextLost(t){(0,Q.I)(this.bufferCache_),this.currentProgram_=null,t.preventDefault()}handleWebGLContextRestored(){this.needsToBeRecreated_=!0}needsToBeRecreated(){return this.needsToBeRecreated_}createTexture(t,e,n){const i=this.gl_
n=n||i.createTexture()
const r=i.RGBA,o=i.RGBA,s=i.UNSIGNED_BYTE
return i.bindTexture(i.TEXTURE_2D,n),e?i.texImage2D(i.TEXTURE_2D,0,r,o,s,e):i.texImage2D(i.TEXTURE_2D,0,r,t[0],t[1],0,o,s,null),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),n}}function ee(t){switch(t){case 5121:return Uint8Array.BYTES_PER_ELEMENT
case 5123:return Uint16Array.BYTES_PER_ELEMENT
case 5125:return Uint32Array.BYTES_PER_ELEMENT
default:return Float32Array.BYTES_PER_ELEMENT}}const ne=te
class ie extends qt.A{constructor(t,e){super(t),e=e||{},this.inversePixelTransform_=(0,j.vt)(),this.pixelContext_=null,this.postProcesses_=e.postProcesses,this.uniforms_=e.uniforms,this.helper,t.addChangeListener(Bt.A.MAP,this.removeHelper.bind(this)),this.dispatchPreComposeEvent=this.dispatchPreComposeEvent.bind(this),this.dispatchPostComposeEvent=this.dispatchPostComposeEvent.bind(this)}dispatchPreComposeEvent(t,e){const n=this.getLayer()
if(n.hasListener(r.A.PRECOMPOSE)){const i=new Ut.A(r.A.PRECOMPOSE,void 0,e,t)
n.dispatchEvent(i)}}dispatchPostComposeEvent(t,e){const n=this.getLayer()
if(n.hasListener(r.A.POSTCOMPOSE)){const i=new Ut.A(r.A.POSTCOMPOSE,void 0,e,t)
n.dispatchEvent(i)}}reset(t){this.uniforms_=t.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)}removeHelper(){this.helper&&(this.helper.dispose(),delete this.helper)}prepareFrame(t){if(this.getLayer().getRenderSource()){let e,n=!0,i=-1
for(let o=0,s=t.layerStatesArray.length;o<s;o++){const r=t.layerStatesArray[o].layer,s=r.getRenderer()
if(!(s instanceof ie)){n=!0
continue}const a=r.getClassName()
if((n||a!==e)&&(i+=1,n=!1),e=a,s===this)break}const r="map/"+t.mapId+"/group/"+i
this.helper&&this.helper.canvasCacheKeyMatches(r)&&!this.helper.needsToBeRecreated()||(this.removeHelper(),this.helper=new ne({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:r}),e&&(this.helper.getCanvas().className=e),this.afterHelperCreated())}return this.prepareFrameInternal(t)}afterHelperCreated(){}prepareFrameInternal(t){return!0}disposeInternal(){this.removeHelper(),super.disposeInternal()}dispatchRenderEvent_(t,e,n){const i=this.getLayer()
if(i.hasListener(t)){(0,j.Zz)(this.inversePixelTransform_,0,0,n.pixelRatio,-n.pixelRatio,0,0,-n.size[1])
const r=new Ut.A(t,this.inversePixelTransform_,n,e)
i.dispatchEvent(r)}}preRender(t,e){this.dispatchRenderEvent_(r.A.PRERENDER,t,e)}postRender(t,e){this.dispatchRenderEvent_(r.A.POSTRENDER,t,e)}}const re=ie,oe=new Uint8Array(4),se=class{constructor(t,e){this.helper_=t
const n=t.getGL()
this.texture_=n.createTexture(),this.framebuffer_=n.createFramebuffer(),this.depthbuffer_=n.createRenderbuffer(),this.size_=e||[1,1],this.data_=new Uint8Array(0),this.dataCacheDirty_=!0,this.updateSize_()}setSize(t){(0,S.aI)(t,this.size_)||(this.size_[0]=t[0],this.size_[1]=t[1],this.updateSize_())}getSize(){return this.size_}clearCachedData(){this.dataCacheDirty_=!0}readAll(){if(this.dataCacheDirty_){const t=this.size_,e=this.helper_.getGL()
e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer_),e.readPixels(0,0,t[0],t[1],e.RGBA,e.UNSIGNED_BYTE,this.data_),this.dataCacheDirty_=!1}return this.data_}readPixel(t,e){if(t<0||e<0||t>this.size_[0]||e>=this.size_[1])return oe[0]=0,oe[1]=0,oe[2]=0,oe[3]=0,oe
this.readAll()
const n=Math.floor(t)+(this.size_[1]-Math.floor(e)-1)*this.size_[0]
return oe[0]=this.data_[4*n],oe[1]=this.data_[4*n+1],oe[2]=this.data_[4*n+2],oe[3]=this.data_[4*n+3],oe}getTexture(){return this.texture_}getFramebuffer(){return this.framebuffer_}getDepthbuffer(){return this.depthbuffer_}updateSize_(){const t=this.size_,e=this.helper_.getGL()
this.texture_=this.helper_.createTexture(t,null,this.texture_),e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer_),e.viewport(0,0,t[0],t[1]),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture_,0),e.bindRenderbuffer(e.RENDERBUFFER,this.depthbuffer_),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,t[0],t[1]),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,this.depthbuffer_),this.data_=new Uint8Array(t[0]*t[1]*4)}},ae="GENERATE_POINT_BUFFERS"
function le(t,e){const n=256,i=255
return(e=e||[])[0]=Math.floor(t/n/n/n)/i,e[1]=Math.floor(t/n/n)%n/i,e[2]=Math.floor(t/n)%n/i,e[3]=t%n/i,e}n(8992)
var ue=n(4757)
const he=class extends re{constructor(t,e){const n=e.uniforms||{},i=(0,j.vt)()
n.u_projectionMatrix=i,super(t,{uniforms:n,postProcesses:e.postProcesses}),this.sourceRevision_=-1,this.verticesBuffer_=new Gt(Nt,35048),this.indicesBuffer_=new Gt(Dt,35048),this.vertexShader_=e.vertexShader,this.fragmentShader_=e.fragmentShader,this.program_,this.hitDetectionEnabled_=e.hitDetectionEnabled??!0
const r=e.attributes?e.attributes.map((function(t){return{name:"a_prop_"+t.name,size:1,type:$t}})):[]
this.attributes=[{name:"a_position",size:2,type:$t},{name:"a_index",size:1,type:$t}],this.hitDetectionEnabled_&&(this.attributes.push({name:"a_prop_hitColor",size:4,type:$t}),this.attributes.push({name:"a_featureUid",size:1,type:$t})),this.attributes.push(...r),this.customAttributes=e.attributes?e.attributes:[],this.previousExtent_=(0,E.S5)(),this.currentTransform_=i,this.renderTransform_=(0,j.vt)(),this.invertRenderTransform_=(0,j.vt)(),this.renderInstructions_=new Float32Array(0),this.hitRenderTarget_,this.lastSentId=0,this.worker_=function(){const t='const e="GENERATE_POLYGON_BUFFERS",t="GENERATE_POINT_BUFFERS",n="GENERATE_LINE_STRING_BUFFERS";function r(e,t){const n=t[0],r=t[1];return t[0]=e[0]*n+e[2]*r+e[4],t[1]=e[1]*n+e[3]*r+e[5],t}function x(e,t){const n=(r=t)[0]*r[3]-r[1]*r[2];var r;!function(e,t){if(!e)throw new Error(t)}(0!==n,"Transformation matrix cannot be inverted");const x=t[0],i=t[1],u=t[2],o=t[3],f=t[4],s=t[5];return e[0]=o/n,e[1]=-i/n,e[2]=-u/n,e[3]=x/n,e[4]=(u*s-o*f)/n,e[5]=-(x*s-i*f)/n,e}function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}new Array(6);var u={exports:{}};function o(e,t,n){n=n||2;var r,x,i,u,o,s,l,v=t&&t.length,h=v?t[0]*n:e.length,c=f(e,0,h,n,!0),g=[];if(!c||c.next===c.prev)return g;if(v&&(c=function(e,t,n,r){var x,i,u,o=[];for(x=0,i=t.length;x<i;x++)(u=f(e,t[x]*r,x<i-1?t[x+1]*r:e.length,r,!1))===u.next&&(u.steiner=!0),o.push(d(u));for(o.sort(p),x=0;x<o.length;x++)n=y(o[x],n);return n}(e,t,c,n)),e.length>80*n){r=i=e[0],x=u=e[1];for(var b=n;b<h;b+=n)(o=e[b])<r&&(r=o),(s=e[b+1])<x&&(x=s),o>i&&(i=o),s>u&&(u=s);l=0!==(l=Math.max(i-r,u-x))?32767/l:0}return a(c,g,n,r,x,l,0),g}function f(e,t,n,r,x){var i,u;if(x===O(e,t,n,r)>0)for(i=t;i<n;i+=r)u=P(i,e[i],e[i+1],u);else for(i=n-r;i>=t;i-=r)u=P(i,e[i],e[i+1],u);return u&&m(u,u.next)&&(B(u),u=u.next),u}function s(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!m(r,r.next)&&0!==w(r.prev,r,r.next))r=r.next;else{if(B(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function a(e,t,n,r,x,i,u){if(e){!u&&i&&function(e,t,n,r){var x=e;do{0===x.z&&(x.z=b(x.x,x.y,t,n,r)),x.prevZ=x.prev,x.nextZ=x.next,x=x.next}while(x!==e);x.prevZ.nextZ=null,x.prevZ=null,function(e){var t,n,r,x,i,u,o,f,s=1;do{for(n=e,e=null,i=null,u=0;n;){for(u++,r=n,o=0,t=0;t<s&&(o++,r=r.nextZ);t++);for(f=s;o>0||f>0&&r;)0!==o&&(0===f||!r||n.z<=r.z)?(x=n,n=n.nextZ,o--):(x=r,r=r.nextZ,f--),i?i.nextZ=x:e=x,x.prevZ=i,i=x;n=r}i.nextZ=null,s*=2}while(u>1)}(x)}(e,r,x,i);for(var o,f,p=e;e.prev!==e.next;)if(o=e.prev,f=e.next,i?v(e,r,x,i):l(e))t.push(o.i/n|0),t.push(e.i/n|0),t.push(f.i/n|0),B(e),e=f.next,p=f.next;else if((e=f)===p){u?1===u?a(e=h(s(e),t,n),t,n,r,x,i,2):2===u&&c(e,t,n,r,x,i):a(s(e),t,n,r,x,i,1);break}}}function l(e){var t=e.prev,n=e,r=e.next;if(w(t,n,r)>=0)return!1;for(var x=t.x,i=n.x,u=r.x,o=t.y,f=n.y,s=r.y,a=x<i?x<u?x:u:i<u?i:u,l=o<f?o<s?o:s:f<s?f:s,v=x>i?x>u?x:u:i>u?i:u,h=o>f?o>s?o:s:f>s?f:s,c=r.next;c!==t;){if(c.x>=a&&c.x<=v&&c.y>=l&&c.y<=h&&M(x,o,i,f,u,s,c.x,c.y)&&w(c.prev,c,c.next)>=0)return!1;c=c.next}return!0}function v(e,t,n,r){var x=e.prev,i=e,u=e.next;if(w(x,i,u)>=0)return!1;for(var o=x.x,f=i.x,s=u.x,a=x.y,l=i.y,v=u.y,h=o<f?o<s?o:s:f<s?f:s,c=a<l?a<v?a:v:l<v?l:v,p=o>f?o>s?o:s:f>s?f:s,y=a>l?a>v?a:v:l>v?l:v,g=b(h,c,t,n,r),d=b(p,y,t,n,r),Z=e.prevZ,m=e.nextZ;Z&&Z.z>=g&&m&&m.z<=d;){if(Z.x>=h&&Z.x<=p&&Z.y>=c&&Z.y<=y&&Z!==x&&Z!==u&&M(o,a,f,l,s,v,Z.x,Z.y)&&w(Z.prev,Z,Z.next)>=0)return!1;if(Z=Z.prevZ,m.x>=h&&m.x<=p&&m.y>=c&&m.y<=y&&m!==x&&m!==u&&M(o,a,f,l,s,v,m.x,m.y)&&w(m.prev,m,m.next)>=0)return!1;m=m.nextZ}for(;Z&&Z.z>=g;){if(Z.x>=h&&Z.x<=p&&Z.y>=c&&Z.y<=y&&Z!==x&&Z!==u&&M(o,a,f,l,s,v,Z.x,Z.y)&&w(Z.prev,Z,Z.next)>=0)return!1;Z=Z.prevZ}for(;m&&m.z<=d;){if(m.x>=h&&m.x<=p&&m.y>=c&&m.y<=y&&m!==x&&m!==u&&M(o,a,f,l,s,v,m.x,m.y)&&w(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function h(e,t,n){var r=e;do{var x=r.prev,i=r.next.next;!m(x,i)&&A(x,r,r.next,i)&&z(x,i)&&z(i,x)&&(t.push(x.i/n|0),t.push(r.i/n|0),t.push(i.i/n|0),B(r),B(r.next),r=e=i),r=r.next}while(r!==e);return s(r)}function c(e,t,n,r,x,i){var u=e;do{for(var o=u.next.next;o!==u.prev;){if(u.i!==o.i&&Z(u,o)){var f=F(u,o);return u=s(u,u.next),f=s(f,f.next),a(u,t,n,r,x,i,0),void a(f,t,n,r,x,i,0)}o=o.next}u=u.next}while(u!==e)}function p(e,t){return e.x-t.x}function y(e,t){var n=function(e,t){var n,r=t,x=e.x,i=e.y,u=-1/0;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var o=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(o<=x&&o>u&&(u=o,n=r.x<r.next.x?r:r.next,o===x))return n}r=r.next}while(r!==t);if(!n)return null;var f,s=n,a=n.x,l=n.y,v=1/0;r=n;do{x>=r.x&&r.x>=a&&x!==r.x&&M(i<l?x:u,i,a,l,i<l?u:x,i,r.x,r.y)&&(f=Math.abs(i-r.y)/(x-r.x),z(r,e)&&(f<v||f===v&&(r.x>n.x||r.x===n.x&&g(n,r)))&&(n=r,v=f)),r=r.next}while(r!==s);return n}(e,t);if(!n)return t;var r=F(n,e);return s(r,r.next),s(n,n.next)}function g(e,t){return w(e.prev,e,t.prev)<0&&w(t.next,e,e.next)<0}function b(e,t,n,r,x){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*x|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*x|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function d(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function M(e,t,n,r,x,i,u,o){return(x-u)*(t-o)>=(e-u)*(i-o)&&(e-u)*(r-o)>=(n-u)*(t-o)&&(n-u)*(i-o)>=(x-u)*(r-o)}function Z(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&A(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(z(e,t)&&z(t,e)&&function(e,t){var n=e,r=!1,x=(e.x+t.x)/2,i=(e.y+t.y)/2;do{n.y>i!=n.next.y>i&&n.next.y!==n.y&&x<(n.next.x-n.x)*(i-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(w(e.prev,e,t.prev)||w(e,t.prev,t))||m(e,t)&&w(e.prev,e,e.next)>0&&w(t.prev,t,t.next)>0)}function w(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function m(e,t){return e.x===t.x&&e.y===t.y}function A(e,t,n,r){var x=I(w(e,t,n)),i=I(w(e,t,r)),u=I(w(n,r,e)),o=I(w(n,r,t));return x!==i&&u!==o||(!(0!==x||!E(e,n,t))||(!(0!==i||!E(e,r,t))||(!(0!==u||!E(n,e,r))||!(0!==o||!E(n,t,r)))))}function E(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function I(e){return e>0?1:e<0?-1:0}function z(e,t){return w(e.prev,e,e.next)<0?w(e,t,e.next)>=0&&w(e,e.prev,t)>=0:w(e,t,e.prev)<0||w(e,e.next,t)<0}function F(e,t){var n=new _(e.i,e.x,e.y),r=new _(t.i,t.x,t.y),x=e.next,i=t.prev;return e.next=t,t.prev=e,n.next=x,x.prev=n,r.next=n,n.prev=r,i.next=r,r.prev=i,r}function P(e,t,n,r){var x=new _(e,t,n);return r?(x.next=r.next,x.prev=r,r.next.prev=x,r.next=x):(x.prev=x,x.next=x),x}function B(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function _(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function O(e,t,n,r){for(var x=0,i=t,u=n-r;i<n;i+=r)x+=(e[u]-e[i])*(e[i+1]+e[u+1]),u=i;return x}u.exports=o,u.exports.default=o,o.deviation=function(e,t,n,r){var x=t&&t.length,i=x?t[0]*n:e.length,u=Math.abs(O(e,0,i,n));if(x)for(var o=0,f=t.length;o<f;o++){var s=t[o]*n,a=o<f-1?t[o+1]*n:e.length;u-=Math.abs(O(e,s,a,n))}var l=0;for(o=0;o<r.length;o+=3){var v=r[o]*n,h=r[o+1]*n,c=r[o+2]*n;l+=Math.abs((e[v]-e[c])*(e[h+1]-e[v+1])-(e[v]-e[h])*(e[c+1]-e[v+1]))}return 0===u&&0===l?0:Math.abs((l-u)/u)},o.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,x=0;x<e.length;x++){for(var i=0;i<e[x].length;i++)for(var u=0;u<t;u++)n.vertices.push(e[x][i][u]);x>0&&(r+=e[x-1].length,n.holes.push(r))}return n};var N=i(u.exports);const R=[],S={vertexPosition:0,indexPosition:0};function T(e,t,n,r,x){e[t+0]=n,e[t+1]=r,e[t+2]=x}function U(e,t,n,r,x,i){const u=3+x,o=e[t+0],f=e[t+1],s=R;s.length=x;for(let n=0;n<s.length;n++)s[n]=e[t+2+n];let a=i?i.vertexPosition:0,l=i?i.indexPosition:0;const v=a/u;return T(n,a,o,f,0),s.length&&n.set(s,a+3),a+=u,T(n,a,o,f,1),s.length&&n.set(s,a+3),a+=u,T(n,a,o,f,2),s.length&&n.set(s,a+3),a+=u,T(n,a,o,f,3),s.length&&n.set(s,a+3),a+=u,r[l++]=v,r[l++]=v+1,r[l++]=v+3,r[l++]=v+1,r[l++]=v+2,r[l++]=v+3,S.vertexPosition=a,S.indexPosition=l,S}function k(e,t,n,x,i,u,o,f,s,a,l){const v=8+f.length,h=u.length/v,c=[e[t+0],e[t+1]],p=[e[n],e[n+1]],y=r(s,[...c]),g=r(s,[...p]);function b(e,t,n){const r=Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])),x=[(t[0]-e[0])/r,(t[1]-e[1])/r],i=[-x[1],x[0]],u=Math.sqrt((n[0]-e[0])*(n[0]-e[0])+(n[1]-e[1])*(n[1]-e[1])),o=[(n[0]-e[0])/u,(n[1]-e[1])/u],f=0===r||0===u?0:Math.acos((s=o[0]*x[0]+o[1]*x[1],a=-1,l=1,Math.min(Math.max(s,a),l)));var s,a,l;return o[0]*i[0]+o[1]*i[1]>0?f:2*Math.PI-f}let d=-1,M=-1,Z=l;const w=null!==i;if(null!==x){d=b(y,g,r(s,[...[e[x],e[x+1]]])),Math.cos(d)<=.985&&(Z+=Math.tan((d-Math.PI)/2))}if(w){M=b(g,y,r(s,[...[e[i],e[i+1]]])),Math.cos(M)<=.985&&(Z+=Math.tan((Math.PI-M)/2))}function m(e,t){return 0===t?1e4*e:Math.sign(t)*(1e4*e+Math.abs(t))}return u.push(c[0],c[1],p[0],p[1],d,M,a,m(0,l)),u.push(...f),u.push(c[0],c[1],p[0],p[1],d,M,a,m(1,l)),u.push(...f),u.push(c[0],c[1],p[0],p[1],d,M,a,m(2,l)),u.push(...f),u.push(c[0],c[1],p[0],p[1],d,M,a,m(3,l)),u.push(...f),o.push(h,h+1,h+2,h+1,h+3,h+2),{length:a+Math.sqrt((g[0]-y[0])*(g[0]-y[0])+(g[1]-y[1])*(g[1]-y[1])),angle:Z}}function G(e,t,n,r,x){const i=2+x;let u=t;const o=e.slice(u,u+x);u+=x;const f=e[u++];let s=0;const a=new Array(f-1);for(let t=0;t<f;t++)s+=e[u++],t<f-1&&(a[t]=s);const l=e.slice(u,u+2*s),v=N(l,a,2);for(let e=0;e<v.length;e++)r.push(v[e]+n.length/i);for(let e=0;e<l.length;e+=2)n.push(l[e],l[e+1],...o);return u+2*s}const j=self;j.onmessage=r=>{const i=r.data;switch(i.type){case t:{const e=3,t=2,n=i.customAttributesSize,r=t+n,x=new Float32Array(i.renderInstructions),u=x.length/r,o=4*u*(n+e),f=new Uint32Array(6*u),s=new Float32Array(o);let a;for(let e=0;e<x.length;e+=r)a=U(x,e,s,f,n,a);const l=Object.assign({vertexBuffer:s.buffer,indexBuffer:f.buffer,renderInstructions:x.buffer},i);j.postMessage(l,[s.buffer,f.buffer,x.buffer]);break}case n:{const e=[],t=[],n=i.customAttributesSize,r=2,u=new Float32Array(i.renderInstructions);let o=0;const f=[1,0,0,1,0,0];let s,a;for(x(f,i.renderInstructionsTransform);o<u.length;){a=Array.from(u.slice(o,o+n)),o+=n,s=u[o++];const x=o,i=o+(s-1)*r,l=u[x]===u[i]&&u[x+1]===u[i+1];let v=0,h=0;for(let n=0;n<s-1;n++){let c=null;n>0?c=o+(n-1)*r:l&&(c=i-r);let p=null;n<s-2?p=o+(n+2)*r:l&&(p=x+r);const y=k(u,o+n*r,o+(n+1)*r,c,p,e,t,a,f,v,h);v=y.length,h=y.angle}o+=s*r}const l=Uint32Array.from(t),v=Float32Array.from(e),h=Object.assign({vertexBuffer:v.buffer,indexBuffer:l.buffer,renderInstructions:u.buffer},i);j.postMessage(h,[v.buffer,l.buffer,u.buffer]);break}case e:{const e=[],t=[],n=i.customAttributesSize,r=new Float32Array(i.renderInstructions);let x=0;for(;x<r.length;)x=G(r,x,e,t,n);const u=Uint32Array.from(t),o=Float32Array.from(e),f=Object.assign({vertexBuffer:o.buffer,indexBuffer:u.buffer,renderInstructions:r.buffer},i);j.postMessage(f,[o.buffer,u.buffer,r.buffer]);break}}};'
return new Worker("undefined"==typeof Blob?"data:application/javascript;base64,"+Buffer.from(t,"binary").toString("base64"):URL.createObjectURL(new Blob([t],{type:"application/javascript"})))}(),this.worker_.addEventListener("message",(t=>{const e=t.data
if(e.type===ae){const n=e.projectionTransform
this.verticesBuffer_.fromArrayBuffer(e.vertexBuffer),this.helper.flushBufferData(this.verticesBuffer_),this.indicesBuffer_.fromArrayBuffer(e.indexBuffer),this.helper.flushBufferData(this.indicesBuffer_),this.renderTransform_=n,(0,j.T9)(this.invertRenderTransform_,this.renderTransform_),this.renderInstructions_=new Float32Array(t.data.renderInstructions),e.id===this.lastSentId&&(this.ready=!0),this.getLayer().changed()}})),this.featureCache_={},this.featureCount_=0
const o=this.getLayer().getSource()
this.sourceListenKeys_=[(0,ue.KT)(o,Mt.A.ADDFEATURE,this.handleSourceFeatureAdded_,this),(0,ue.KT)(o,Mt.A.CHANGEFEATURE,this.handleSourceFeatureChanged_,this),(0,ue.KT)(o,Mt.A.REMOVEFEATURE,this.handleSourceFeatureDelete_,this),(0,ue.KT)(o,Mt.A.CLEAR,this.handleSourceFeatureClear_,this)],o.forEachFeature((t=>{this.featureCache_[(0,A.v6)(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()},this.featureCount_++}))}afterHelperCreated(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.hitDetectionEnabled_&&(this.hitRenderTarget_=new se(this.helper))}handleSourceFeatureAdded_(t){const e=t.feature
this.featureCache_[(0,A.v6)(e)]={feature:e,properties:e.getProperties(),geometry:e.getGeometry()},this.featureCount_++}handleSourceFeatureChanged_(t){const e=t.feature
this.featureCache_[(0,A.v6)(e)]={feature:e,properties:e.getProperties(),geometry:e.getGeometry()}}handleSourceFeatureDelete_(t){const e=t.feature
delete this.featureCache_[(0,A.v6)(e)],this.featureCount_--}handleSourceFeatureClear_(){this.featureCache_={},this.featureCount_=0}renderFrame(t){const e=this.helper.getGL()
this.preRender(e,t)
const[n,i,r]=function(t,e){const n=t.viewState.projection,i=e.getSource().getWrapX()&&n.canWrapX(),r=n.getExtent(),o=t.extent,s=i?(0,E.RG)(r):null,a=i?Math.ceil((o[2]-r[2])/s)+1:1
return[i?Math.floor((o[0]-r[0])/s):0,a,s]}(t,this.getLayer())
return this.renderWorlds(t,!1,n,i,r),this.helper.finalizeDraw(t,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent),this.hitDetectionEnabled_&&(this.renderWorlds(t,!0,n,i,r),this.hitRenderTarget_.clearCachedData()),this.postRender(e,t),this.helper.getCanvas()}prepareFrameInternal(t){const e=this.getLayer(),n=e.getSource(),i=t.viewState,r=!t.viewHints[ot.A.ANIMATING]&&!t.viewHints[ot.A.INTERACTING],o=!(0,E.aI)(this.previousExtent_,t.extent),s=this.sourceRevision_<n.getRevision()
if(s&&(this.sourceRevision_=n.getRevision()),r&&(o||s)){const r=i.projection,o=i.resolution,s=e instanceof f.A?e.getRenderBuffer():0,a=(0,E.r)(t.extent,s*o)
n.loadFeatures(a,o,r),this.rebuildBuffers_(t),this.previousExtent_=t.extent.slice()}return this.helper.useProgram(this.program_,t),this.helper.prepareDraw(t),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes),!0}rebuildBuffers_(t){const e=(0,j.vt)()
this.helper.makeProjectionTransform(t,e)
const n=(0,ut.Tf)(),i=(this.hitDetectionEnabled_?7:2)+this.customAttributes.length,r=i*this.featureCount_
let o,s
this.renderInstructions_&&this.renderInstructions_.length===r||(this.renderInstructions_=new Float32Array(r))
const a=[],l=[]
let u=-1
for(const c in this.featureCache_)if(o=this.featureCache_[c],s=o.geometry,s&&"Point"===s.getType()){if(n){const e=(0,ut.Ad)(s.getFlatCoordinates(),t.viewState.projection)
a[0]=e[0],a[1]=e[1]}else a[0]=s.getFlatCoordinates()[0],a[1]=s.getFlatCoordinates()[1]
if((0,j.Bb)(e,a),this.renderInstructions_[++u]=a[0],this.renderInstructions_[++u]=a[1],this.hitDetectionEnabled_){const t=le(u+5,l)
this.renderInstructions_[++u]=t[0],this.renderInstructions_[++u]=t[1],this.renderInstructions_[++u]=t[2],this.renderInstructions_[++u]=t[3],this.renderInstructions_[++u]=Number(c)}for(let t=0;t<this.customAttributes.length;t++){const e=this.customAttributes[t].callback(o.feature,o.properties)
this.renderInstructions_[++u]=e}}const h={id:++this.lastSentId,type:ae,renderInstructions:this.renderInstructions_.buffer,customAttributesSize:i-2}
h.projectionTransform=e,this.ready=!1,this.worker_.postMessage(h,[this.renderInstructions_.buffer]),this.renderInstructions_=null}forEachFeatureAtCoordinate(t,e,n,i,r){if((0,jt.v)(this.hitDetectionEnabled_,"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has been disabled using the `disableHitDetection: true` option."),!this.renderInstructions_||!this.hitDetectionEnabled_)return
const o=(0,j.Bb)(e.coordinateToPixelTransform,t.slice()),s=this.hitRenderTarget_.readPixel(o[0]/2,o[1]/2),a=function(t){let e=0
const n=256,i=255
return e+=Math.round(t[0]*n*n*n*i),e+=Math.round(t[1]*n*n*i),e+=Math.round(t[2]*n*i),e+=Math.round(t[3]*i),e}([s[0]/255,s[1]/255,s[2]/255,s[3]/255]),l=this.renderInstructions_[a],u=Math.floor(l).toString(),h=this.getLayer().getSource().getFeatureByUid(u)
return h?i(h,this.getLayer(),null):void 0}renderWorlds(t,e,n,i,r){let o=n
this.helper.useProgram(this.program_,t),e&&(this.hitRenderTarget_.setSize([Math.floor(t.size[0]/2),Math.floor(t.size[1]/2)]),this.helper.prepareDrawToRenderTarget(t,this.hitRenderTarget_,!0)),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes)
do{this.helper.makeProjectionTransform(t,this.currentTransform_),(0,j.Tl)(this.currentTransform_,o*r,0),(0,j.lw)(this.currentTransform_,this.invertRenderTransform_),this.helper.applyUniforms(t),this.helper.applyHitDetectionUniform(e)
const n=this.indicesBuffer_.getSize()
this.helper.drawElements(0,n)}while(++o<i)}disposeInternal(){this.worker_.terminate(),this.layer_=null,this.sourceListenKeys_.forEach((function(t){(0,ue.JH)(t)})),this.sourceListenKeys_=null,super.disposeInternal()}renderDeclutter(){}},ce=class{constructor(t,e){this.name=t,this.data=e,this.texture_=null}getTexture(t){if(!this.texture_){const e=t.createTexture()
t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.data.length/4,1,0,t.RGBA,t.UNSIGNED_BYTE,this.data),this.texture_=e}return this.texture_}}
var fe=n(8548),pe=n(5733),de=n(7893),ge=n(699),_e=n(669),me=n(8638),ye=n(519)
class ve extends _e.A{constructor(t){super(),this.tile,this.handleTileChange_=this.handleTileChange_.bind(this),this.gutter_=t.gutter||0,this.helper_=t.helper,this.loaded=!1,this.ready=!1}setTile(t){if(t!==this.tile)if(this.tile&&this.tile.removeEventListener(me.A.CHANGE,this.handleTileChange_),this.tile=t,this.loaded=t.getState()===ge.A.LOADED,this.loaded)this.uploadTile()
else{if(t instanceof ye.A){const e=t.getImage()
e instanceof Image&&!e.crossOrigin&&(e.crossOrigin="anonymous")}t.addEventListener(me.A.CHANGE,this.handleTileChange_)}}uploadTile(){(0,A.b0)()}setReady(){this.ready=!0,this.dispatchEvent(me.A.CHANGE)}handleTileChange_(){this.tile.getState()===ge.A.LOADED&&(this.loaded=!0,this.uploadTile())}disposeInternal(){this.tile.removeEventListener(me.A.CHANGE,this.handleTileChange_)}}const xe=ve
var be=n(2272),Ee=n(1673)
function we(t,e,n){const i=n?t.LINEAR:t.NEAREST
t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,i)}function Se(t,e,n,i,r,o){const s=t.getGL()
let a,l
n instanceof Float32Array?(a=s.FLOAT,t.getExtension("OES_texture_float"),l=null!==t.getExtension("OES_texture_float_linear")):(a=s.UNSIGNED_BYTE,l=!0),we(s,e,o&&l)
const u=n.byteLength/i[1]
let h,c=1
switch(u%8==0?c=8:u%4==0?c=4:u%2==0&&(c=2),r){case 1:h=s.LUMINANCE
break
case 2:h=s.LUMINANCE_ALPHA
break
case 3:h=s.RGB
break
case 4:h=s.RGBA
break
default:throw new Error(`Unsupported number of bands: ${r}`)}const f=s.getParameter(s.UNPACK_ALIGNMENT)
s.pixelStorei(s.UNPACK_ALIGNMENT,c),s.texImage2D(s.TEXTURE_2D,0,h,i[0],i[1],0,h,a,n),s.pixelStorei(s.UNPACK_ALIGNMENT,f)}let Ce=null
const Te=class extends xe{constructor(t){super(t),this.textures=[],this.renderSize_=(0,Ee.xq)(t.grid.getTileSize(t.tile.tileCoord[0])),this.bandCount=NaN
const e=new Gt(Nt,35044)
e.fromArray([0,1,1,1,1,0,0,0]),this.helper_.flushBufferData(e),this.coords=e,this.setTile(t.tile)}uploadTile(){const t=this.helper_,e=t.getGL(),n=this.tile
let i
this.textures.length=0,i=n instanceof ye.A||n instanceof de.A?n.getImage():n.getData()
const r=(0,be.xo)(i)
if(r){const t=e.createTexture()
return this.textures.push(t),this.bandCount=4,function(t,e,n,i){we(t,e,i),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)}(e,t,r,n.interpolate),void this.setReady()}i=(0,be.bL)(i)
const o=n.getSize(),s=[o[0]+2*this.gutter_,o[1]+2*this.gutter_],a=i instanceof Float32Array,l=s[0]*s[1],u=a?Float32Array:Uint8Array,h=u.BYTES_PER_ELEMENT,c=i.byteLength/s[1]
this.bandCount=Math.floor(c/h/s[0])
const f=Math.ceil(this.bandCount/4)
if(1===f){const r=e.createTexture()
return this.textures.push(r),Se(t,r,i,s,this.bandCount,n.interpolate),void this.setReady()}const p=new Array(f)
for(let m=0;m<f;++m){const t=e.createTexture()
this.textures.push(t)
const n=m<f-1?4:(this.bandCount-1)%4+1
p[m]=new u(l*n)}let d=0,g=0
const _=s[0]*this.bandCount
for(let m=0;m<s[1];++m){for(let t=0;t<_;++t){const e=i[g+t],n=Math.floor(d/this.bandCount),r=t%this.bandCount,o=p[Math.floor(r/4)]
o[n*(o.length/l)+r%4]=e,++d}g+=c/h}for(let m=0;m<f;++m){const e=this.textures[m],i=p[m]
Se(t,e,i,s,i.length/l,n.interpolate)}this.setReady()}disposeInternal(){const t=this.helper_.getGL()
this.helper_.deleteBuffer(this.coords)
for(let e=0;e<this.textures.length;++e)t.deleteTexture(this.textures[e])
this.tile.removeEventListener(me.A.CHANGE,this.handleTileChange_)}getImagePixelData_(t,e,n){const i=this.gutter_,r=this.renderSize_[0],o=this.renderSize_[1]
Ce||(Ce=(0,J.Y)(1,1,void 0,{willReadFrequently:!0})),Ce.clearRect(0,0,1,1)
const s=t.width-2*i,a=t.height-2*i,l=i+Math.floor(s*(e/r)),u=i+Math.floor(a*(n/o))
let h
try{Ce.drawImage(t,l,u,1,1,0,0,1,1),h=Ce.getImageData(0,0,1,1).data}catch(t){return Ce=null,null}return h}getArrayPixelData_(t,e,n,i){const r=this.gutter_,o=this.renderSize_[0],s=this.renderSize_[1],a=e[0],l=e[1],u=a+2*r,h=l+2*r,c=r+Math.floor(a*(n/o)),f=r+Math.floor(l*(i/s))
if(t instanceof DataView){const e=t.byteLength/(u*h),n=e*(f*u+c),i=t.buffer.slice(n,n+e)
return new DataView(i)}const p=this.bandCount*(f*u+c)
return t.slice(p,p+this.bandCount)}getPixelData(t,e){if(!this.loaded)return null
if(this.tile instanceof be.Ay){const n=this.tile.getData(),i=(0,be.bL)(n)
if(i){const n=this.tile.getSize()
return this.getArrayPixelData_(i,n,t,e)}return this.getImagePixelData_((0,be.xo)(n),t,e)}return this.getImagePixelData_(this.tile.getImage(),t,e)}}
var Ie=n(6838),Pe=n(5959),Ae=n(2695)
const Re={}
function Le(t){return 1/(t+2)}function Me(t,e){return t.tileIds.has((0,A.v6)(e))}function Oe(t,e,n){const i=t.representationsByZ
n in i||(i[n]=new Set),i[n].add(e),t.tileIds.add((0,A.v6)(e.tile))}function Ne(t,e){const n=t.layerStatesArray[t.layerIndex]
n.extent&&(e=(0,E._N)(e,(0,ut.SD)(n.extent,t.viewState.projection)))
const i=n.layer.getRenderSource()
if(!i.getWrapX()){const n=i.getTileGridForProjection(t.viewState.projection).getExtent()
n&&(e=(0,E._N)(e,n))}return e}function De(t,e){return`${t.getKey()},${(0,Ae.i7)(e)}`}const Fe=class extends re{constructor(t,e){super(t,{uniforms:e.uniforms,postProcesses:e.postProcesses}),this.renderComplete=!1,this.tileTransform_=(0,j.vt)(),this.tempMat4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.tempTileRange_=new Pe.A(0,0,0,0),this.tempTileCoord_=(0,Ae.N)(0,0,0),this.tempSize_=[0,0]
const n=void 0!==e.cacheSize?e.cacheSize:512
this.tileRepresentationCache=new Ie.A(n),this.frameState=null,this.projection_=void 0}reset(t){super.reset({uniforms:t.uniforms})}isDrawableTile_(t){const e=this.getLayer(),n=t.getState(),i=e.getUseInterimTilesOnError()
return n==ge.A.LOADED||n==ge.A.EMPTY||n==ge.A.ERROR&&!i}prepareFrameInternal(t){this.projection_?t.viewState.projection!==this.projection_&&(this.clearCache(),this.projection_=t.viewState.projection):this.projection_=t.viewState.projection
const e=this.getLayer().getRenderSource()
return!!e&&!(0,E.Im)(Ne(t,t.extent))&&"ready"===e.getState()}createTileRepresentation(t){return(0,A.b0)()}enqueueTiles(t,e,n,i,r){const o=t.viewState,s=this.getLayer(),a=s.getRenderSource(),l=a.getTileGridForProjection(o.projection),u=a.getGutterForProjection(o.projection),h=(0,A.v6)(a)
h in t.wantedTiles||(t.wantedTiles[h]={})
const c=t.wantedTiles[h],f=this.tileRepresentationCache,p=s.getMapInternal(),d=Math.max(n-r,l.getMinZoom(),l.getZForResolution(Math.min(s.getMaxResolution(),p?p.getView().getResolutionForZoom(Math.max(s.getMinZoom(),0)):l.getResolution(0)),a.zDirection))
for(let g=n;g>=d;--g){const n=l.getTileRangeForExtentAndZ(e,g,this.tempTileRange_),r=l.getResolution(g)
for(let e=n.minX;e<=n.maxX;++e)for(let s=n.minY;s<=n.maxY;++s){const n=(0,Ae.N)(g,e,s,this.tempTileCoord_),p=De(a,n)
let d,_
if(f.containsKey(p)&&(d=f.get(p),_=d.tile),d&&d.tile.key===a.getKey()||(_=a.getTile(g,e,s,t.pixelRatio,o.projection)),Me(i,_))continue
if(d)if(this.isDrawableTile_(_))d.setTile(_)
else{const t=_.getInterimTile()
d.setTile(t)}else d=this.createTileRepresentation({tile:_,grid:l,helper:this.helper,gutter:u}),f.set(p,d)
Oe(i,d,g)
const m=_.getKey()
c[m]=!0,_.getState()===ge.A.IDLE&&(t.tileQueue.isKeyQueued(m)||t.tileQueue.enqueue([_,h,l.getTileCoordCenter(n),r]))}}}beforeTilesRender(t,e){this.helper.prepareDraw(this.frameState,!e,!0)}beforeTilesMaskRender(t){return!1}renderTile(t,e,n,i,r,o,s,a,l,u,h){}renderTileMask(t,e,n,i){}drawTile_(t,e,n,i,r,o,s){if(!e.ready)return
const a=e.tile.tileCoord,l=(0,Ae.i7)(a),u=l in o?o[l]:1,h=s.getResolution(n),c=(0,Ee.xq)(s.getTileSize(n),this.tempSize_),f=s.getOrigin(n),p=s.getTileCoordExtent(a),d=u<1?-1:Le(n)
u<1&&(t.animate=!0)
const g=t.viewState,_=g.center[0],m=g.center[1],y=c[0]+2*i,v=c[1]+2*i,x=y/v,b=(_-f[0])/(c[0]*h),E=(f[1]-m)/(c[1]*h),w=g.resolution/h,S=a[1],C=a[2];(0,j.cL)(this.tileTransform_),(0,j.hs)(this.tileTransform_,2/(t.size[0]*w/y),-2/(t.size[1]*w/y)),(0,j.e$)(this.tileTransform_,g.rotation),(0,j.hs)(this.tileTransform_,1,1/x),(0,j.Tl)(this.tileTransform_,(c[0]*(S-b)-i)/y,(c[1]*(C-E)-i)/v),this.renderTile(e,this.tileTransform_,t,r,h,c,f,p,d,i,u)}renderFrame(t){this.frameState=t,this.renderComplete=!0
const e=this.helper.getGL()
this.preRender(e,t)
const n=t.viewState,i=this.getLayer(),r=i.getRenderSource(),o=r.getTileGridForProjection(n.projection),s=r.getGutterForProjection(n.projection),a=Ne(t,t.extent),l=o.getZForResolution(n.resolution,r.zDirection),u={tileIds:new Set,representationsByZ:{}},h=i.getPreload()
if(t.nextExtent){const e=o.getZForResolution(n.nextResolution,r.zDirection),i=Ne(t,t.nextExtent)
this.enqueueTiles(t,i,e,u,h)}this.enqueueTiles(t,a,l,u,0),h>0&&setTimeout((()=>{this.enqueueTiles(t,a,l-1,u,h-1)}),0)
const c={},f=(0,A.v6)(this),p=t.time
let d=!1
for(const v of u.representationsByZ[l]){const t=v.tile
if((t instanceof de.A||t instanceof pe.A)&&t.getState()===ge.A.EMPTY)continue
const e=t.tileCoord
if(v.ready){const n=t.getAlpha(f,p)
if(1===n){t.endTransition(f)
continue}d=!0,c[(0,Ae.i7)(e)]=n}if(this.renderComplete=!1,this.findAltTiles_(o,e,l+1,u))continue
const n=o.getMinZoom()
for(let i=l-1;i>=n&&!this.findAltTiles_(o,e,i,u);--i);}const g=u.representationsByZ,_=Object.keys(g).map(Number).sort(S.rG)
if(this.beforeTilesMaskRender(t))for(let v=0,x=_.length;v<x;++v){const t=_[v]
for(const e of g[t]){const n=e.tile.tileCoord
if((0,Ae.i7)(n)in c)continue
const i=o.getTileCoordExtent(n)
this.renderTileMask(e,t,i,Le(t))}}this.beforeTilesRender(t,d)
for(let v=0,x=_.length;v<x;++v){const e=_[v]
for(const n of g[e]){const i=n.tile.tileCoord;(0,Ae.i7)(i)in c||this.drawTile_(t,n,e,s,a,c,o)}}for(const v of g[l]){const e=v.tile.tileCoord;(0,Ae.i7)(e)in c&&this.drawTile_(t,v,l,s,a,c,o)}this.helper.finalizeDraw(t,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent)
const m=this.helper.getCanvas(),y=this.tileRepresentationCache
for(;y.canExpireCache();)y.pop().dispose()
return t.postRenderFunctions.push((function(t,e){r.updateCacheSize(.1,e.viewState.projection),r.expireCache(e.viewState.projection,Re)})),this.postRender(e,t),m}findAltTiles_(t,e,n,i){const r=t.getTileRangeForTileCoordAndZ(e,n,this.tempTileRange_)
if(!r)return!1
let o=!0
const s=this.tileRepresentationCache,a=this.getLayer().getRenderSource()
for(let l=r.minX;l<=r.maxX;++l)for(let t=r.minY;t<=r.maxY;++t){const e=De(a,[n,l,t])
let r=!1
if(s.containsKey(e)){const t=s.get(e)
t.ready&&!Me(i,t.tile)&&(Oe(i,t,n),r=!0)}r||(o=!1)}return o}clearCache(){const t=this.tileRepresentationCache
t.forEach((t=>t.dispose())),t.clear()}removeHelper(){this.helper&&this.clearCache(),super.removeHelper()}disposeInternal(){super.disposeInternal(),delete this.frameState}},ke="u_tileTransform",je="u_transitionAlpha",ze="u_depth",Ge="u_renderExtent",Be="u_resolution",qe="u_zoom",Ue="u_tileTextures",Ze="u_texturePixelWidth",Xe="u_texturePixelHeight",Ye="u_textureResolution",Ve="u_textureOriginX",We="u_textureOriginY",He="a_textureCoord",$e=[{name:He,size:2,type:$t}],Ke=class extends Fe{constructor(t,e){super(t,e),this.program_,this.vertexShader_=e.vertexShader,this.fragmentShader_=e.fragmentShader,this.indices_=new Gt(Dt,35044),this.indices_.fromArray([0,1,3,1,2,3]),this.paletteTextures_=e.paletteTextures||[]}reset(t){super.reset(t),this.vertexShader_=t.vertexShader,this.fragmentShader_=t.fragmentShader,this.paletteTextures_=t.paletteTextures||[],this.helper&&(this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_))}afterHelperCreated(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.helper.flushBufferData(this.indices_)}createTileRepresentation(t){return new Te(t)}beforeTilesRender(t,e){super.beforeTilesRender(t,e),this.helper.useProgram(this.program_,t)}renderTile(t,e,n,i,r,o,s,a,l,u,h){const c=this.helper.getGL()
this.helper.bindBuffer(t.coords),this.helper.bindBuffer(this.indices_),this.helper.enableAttributes($e)
let f=0
for(;f<t.textures.length;){const e=`${Ue}[${f}]`
this.helper.bindTexture(t.textures[f],f,e),++f}for(let x=0;x<this.paletteTextures_.length;++x){const t=this.paletteTextures_[x],e=t.getTexture(c)
this.helper.bindTexture(e,f,t.name),++f}const p=n.viewState,d=o[0]+2*u,g=o[1]+2*u,_=t.tile.tileCoord,m=_[1],y=_[2]
this.helper.setUniformMatrixValue(ke,Wt(this.tempMat4,e)),this.helper.setUniformFloatValue(je,h),this.helper.setUniformFloatValue(ze,l)
let v=i
u>0&&(v=a,(0,E._N)(v,i,v)),this.helper.setUniformFloatVec4(Ge,v),this.helper.setUniformFloatValue(Be,p.resolution),this.helper.setUniformFloatValue(qe,p.zoom),this.helper.setUniformFloatValue(Ze,d),this.helper.setUniformFloatValue(Xe,g),this.helper.setUniformFloatValue(Ye,r),this.helper.setUniformFloatValue(Ve,s[0]+m*o[0]*r-u*r),this.helper.setUniformFloatValue(We,s[1]-y*o[1]*r+u*r),this.helper.drawElements(0,this.indices_.getSize())}getData(t){if(!this.helper.getGL())return null
const e=this.frameState
if(!e)return null
const n=this.getLayer(),i=(0,j.Bb)(e.pixelToCoordinateTransform,t.slice()),r=e.viewState,o=n.getExtent()
if(o&&!(0,E.Ym)((0,ut.SD)(o,r.projection),i))return null
const s=n.getSources((0,E.Tr)([i]),r.resolution)
let a,l,u
for(a=s.length-1;a>=0;--a)if(l=s[a],"ready"===l.getState()){if(u=l.getTileGridForProjection(r.projection),l.getWrapX())break
const t=u.getExtent()
if(!t||(0,E.Ym)(t,i))break}if(a<0)return null
const h=this.tileRepresentationCache
for(let c=u.getZForResolution(r.resolution);c>=u.getMinZoom();--c){const t=u.getTileCoordForCoordAndZ(i,c),e=De(l,t)
if(!h.containsKey(e))continue
const n=h.get(e),r=n.tile
if((r instanceof de.A||r instanceof pe.A)&&r.getState()===ge.A.EMPTY)return null
if(!n.loaded)continue
const o=u.getOrigin(c),s=(0,Ee.xq)(u.getTileSize(c)),a=u.getResolution(c),f=(i[0]-o[0])/a-t[1]*s[0],p=(o[1]-i[1])/a-t[2]*s[1]
return n.getPixelData(f,p)}return null}disposeInternal(){const t=this.helper
t&&(t.getGL().deleteProgram(this.program_),delete this.program_,t.deleteBuffer(this.indices_)),super.disposeInternal(),delete this.indices_}}
var Je=n(659)
function Qe(t){const e=t.toString()
return e.includes(".")?e:e+".0"}function tn(t){if(t.length<2||t.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.")
return`vec${t.length}(${t.map(Qe).join(", ")})`}function en(t){const e=(0,Je._j)(t),n=e.length>3?e[3]:1
return tn([e[0]/255*n,e[1]/255*n,e[2]/255*n,n])}const nn={}
let rn=0
function on(t){return t in nn||(nn[t]=rn++),nn[t]}function sn(t){return Qe(on(t))}function an(t){return"u_var_"+t}const ln="getBandValue",un="u_paletteTextures"
function hn(t){return(e,n,i)=>{const r=n.args.length,o=new Array(r)
for(let t=0;t<r;++t)o[t]=fn(n.args[t],i,e)
return t(o,e)}}const cn={[fe.ZD.Get]:(t,e)=>{const n=e.args[0].value
return n in t.properties||(t.properties[n]={name:n,type:e.type}),(t.inFragmentShader?"v_prop_":"a_prop_")+n},[fe.ZD.GeometryType]:(t,e,n)=>{const i="geometryType"
return i in t.properties||(t.properties[i]={name:i,type:fe.cT,evaluator:t=>(0,fe.Ye)(t.getGeometry())}),(t.inFragmentShader?"v_prop_":"a_prop_")+i},[fe.ZD.Var]:(t,e)=>{const n=e.args[0].value
return n in t.variables||(t.variables[n]={name:n,type:e.type}),an(n)},[fe.ZD.Resolution]:()=>"u_resolution",[fe.ZD.Zoom]:()=>"u_zoom",[fe.ZD.Time]:()=>"u_time",[fe.ZD.Any]:hn((t=>`(${t.join(" || ")})`)),[fe.ZD.All]:hn((t=>`(${t.join(" && ")})`)),[fe.ZD.Not]:hn((([t])=>`(!${t})`)),[fe.ZD.Equal]:hn((([t,e])=>`(${t} == ${e})`)),[fe.ZD.NotEqual]:hn((([t,e])=>`(${t} != ${e})`)),[fe.ZD.GreaterThan]:hn((([t,e])=>`(${t} > ${e})`)),[fe.ZD.GreaterThanOrEqualTo]:hn((([t,e])=>`(${t} >= ${e})`)),[fe.ZD.LessThan]:hn((([t,e])=>`(${t} < ${e})`)),[fe.ZD.LessThanOrEqualTo]:hn((([t,e])=>`(${t} <= ${e})`)),[fe.ZD.Multiply]:hn((t=>`(${t.join(" * ")})`)),[fe.ZD.Divide]:hn((([t,e])=>`(${t} / ${e})`)),[fe.ZD.Add]:hn((t=>`(${t.join(" + ")})`)),[fe.ZD.Subtract]:hn((([t,e])=>`(${t} - ${e})`)),[fe.ZD.Clamp]:hn((([t,e,n])=>`clamp(${t}, ${e}, ${n})`)),[fe.ZD.Mod]:hn((([t,e])=>`mod(${t}, ${e})`)),[fe.ZD.Pow]:hn((([t,e])=>`pow(${t}, ${e})`)),[fe.ZD.Abs]:hn((([t])=>`abs(${t})`)),[fe.ZD.Floor]:hn((([t])=>`floor(${t})`)),[fe.ZD.Ceil]:hn((([t])=>`ceil(${t})`)),[fe.ZD.Round]:hn((([t])=>`floor(${t} + 0.5)`)),[fe.ZD.Sin]:hn((([t])=>`sin(${t})`)),[fe.ZD.Cos]:hn((([t])=>`cos(${t})`)),[fe.ZD.Atan]:hn((([t,e])=>void 0!==e?`atan(${t}, ${e})`:`atan(${t})`)),[fe.ZD.Sqrt]:hn((([t])=>`sqrt(${t})`)),[fe.ZD.Match]:hn((t=>{const e=t[0],n=t[t.length-1]
let i=null
for(let r=t.length-3;r>=1;r-=2)i=`(${e} == ${t[r]} ? ${t[r+1]} : ${i||n})`
return i})),[fe.ZD.Between]:hn((([t,e,n])=>`(${t} >= ${e} && ${t} <= ${n})`)),[fe.ZD.Interpolate]:hn((([t,e,...n])=>{let i=""
for(let r=0;r<n.length-2;r+=2){const o=n[r],s=i||n[r+1],a=n[r+2],l=n[r+3]
let u
u=t===Qe(1)?`(${e} - ${o}) / (${a} - ${o})`:`(pow(${t}, (${e} - ${o})) - 1.0) / (pow(${t}, (${a} - ${o})) - 1.0)`,i=`mix(${s}, ${l}, clamp(${u}, 0.0, 1.0))`}return i})),[fe.ZD.Case]:hn((t=>{const e=t[t.length-1]
let n=null
for(let i=t.length-3;i>=0;i-=2)n=`(${t[i]} ? ${t[i+1]} : ${n||e})`
return n})),[fe.ZD.In]:hn((([t,...e],n)=>{const i=function(t,e){return`operator_in_${Object.keys(e.functions).length}`}(0,n),r=[]
for(let o=0;o<e.length;o+=1)r.push(`  if (inputValue == ${e[o]}) { return true; }`)
return n.functions[i]=`bool ${i}(float inputValue) {\n${r.join("\n")}\n  return false;\n}`,`${i}(${t})`})),[fe.ZD.Array]:hn((t=>`vec${t.length}(${t.join(", ")})`)),[fe.ZD.Color]:hn((t=>{if(1===t.length)return`vec4(vec3(${t[0]} / 255.0), 1.0)`
if(2===t.length)return`(${t[1]} * vec4(vec3(${t[0]} / 255.0), 1.0))`
const e=t.slice(0,3).map((t=>`${t} / 255.0`))
return 3===t.length?`vec4(${e.join(", ")}, 1.0)`:`(${t[3]} * vec4(${e.join(", ")}, 1.0))`})),[fe.ZD.Band]:hn((([t,e,n],i)=>{if(!(ln in i.functions)){let t=""
const e=i.bandCount||1
for(let n=0;n<e;n++){const i=Math.floor(n/4)
let r=n%4
n===e-1&&1===r&&(r=3),t+=`  if (band == ${n+1}.0) {\n    return texture2D(${Ue}[${i}], v_textureCoord + vec2(dx, dy))[${r}];\n  }\n`}i.functions[ln]=`float getBandValue(float band, float xOffset, float yOffset) {\n  float dx = xOffset / ${Ze};\n  float dy = yOffset / ${Xe};\n${t}\n}`}return`${ln}(${t}, ${e??"0.0"}, ${n??"0.0"})`})),[fe.ZD.Palette]:(t,e)=>{const[n,...i]=e.args,r=i.length,o=new Uint8Array(4*r)
for(let l=0;l<i.length;l++){const t=i[l].value,e=(0,Je._j)(t),n=4*l
o[n]=e[0],o[n+1]=e[1],o[n+2]=e[2],o[n+3]=255*e[3]}t.paletteTextures||(t.paletteTextures=[])
const s=`${un}[${t.paletteTextures.length}]`,a=new ce(s,o)
return t.paletteTextures.push(a),`texture2D(${s}, vec2((${fn(n,fe.wl,t)} + 0.5) / ${r}.0, 0.5))`}}
function fn(t,e,n){if(t instanceof fe.DG){const i=cn[t.operator]
if(void 0===i)throw new Error(`No compiler defined for this operator: ${JSON.stringify(t.operator)}`)
return i(n,t,e)}if((t.type&fe.wl)>0)return Qe(t.value)
if((t.type&fe.T8)>0)return t.value.toString()
if((t.type&fe.cT)>0)return sn(t.value.toString())
if((t.type&fe.mE)>0)return en(t.value)
if((t.type&fe.Fq)>0)return tn(t.value)
throw new Error(`Unexpected expression ${t.value} (expected type ${(0,fe.go)(e)})`)}const pn="#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_screenToWorldMatrix;\nuniform vec2 u_viewportSizePx;\nuniform float u_pixelRatio;\nuniform float u_globalAlpha;\nuniform float u_time;\nuniform float u_zoom;\nuniform float u_resolution;\nuniform float u_rotation;\nuniform vec4 u_renderExtent;\nuniform vec2 u_patternOrigin;\nuniform float u_depth;\nuniform mediump int u_hitDetection;\n\nconst float PI = 3.141592653589793238;\nconst float TWO_PI = 2.0 * PI;\n\n// this used to produce an alpha-premultiplied color from a texture\nvec4 samplePremultiplied(sampler2D sampler, vec2 texCoord) {\n  vec4 color = texture2D(sampler, texCoord);\n  return vec4(color.rgb * color.a, color.a);\n}\n"
class dn{constructor(){this.uniforms_=[],this.attributes_=[],this.varyings_=[],this.hasSymbol_=!1,this.symbolSizeExpression_=`vec2(${Qe(5)} + ${Qe(.625)})`,this.symbolRotationExpression_="0.0",this.symbolOffsetExpression_="vec2(0.0)",this.symbolColorExpression_=en("rgba(255,255,255,0.4)"),this.texCoordExpression_="vec4(0.0, 0.0, 1.0, 1.0)",this.discardExpression_="false",this.symbolRotateWithView_=!1,this.hasStroke_=!1,this.strokeWidthExpression_=Qe(1.25),this.strokeColorExpression_=en("#3399CC"),this.strokeOffsetExpression_="0.",this.strokeCapExpression_=sn("round"),this.strokeJoinExpression_=sn("round"),this.strokeMiterLimitExpression_="10.",this.strokeDistanceFieldExpression_="-1000.",this.hasFill_=!1,this.fillColorExpression_=en("rgba(255,255,255,0.4)"),this.vertexShaderFunctions_=[],this.fragmentShaderFunctions_=[]}addUniform(t){return this.uniforms_.push(t),this}addAttribute(t){return this.attributes_.push(t),this}addVarying(t,e,n){return this.varyings_.push({name:t,type:e,expression:n}),this}setSymbolSizeExpression(t){return this.hasSymbol_=!0,this.symbolSizeExpression_=t,this}getSymbolSizeExpression(){return this.symbolSizeExpression_}setSymbolRotationExpression(t){return this.symbolRotationExpression_=t,this}setSymbolOffsetExpression(t){return this.symbolOffsetExpression_=t,this}getSymbolOffsetExpression(){return this.symbolOffsetExpression_}setSymbolColorExpression(t){return this.hasSymbol_=!0,this.symbolColorExpression_=t,this}getSymbolColorExpression(){return this.symbolColorExpression_}setTextureCoordinateExpression(t){return this.texCoordExpression_=t,this}setFragmentDiscardExpression(t){return this.discardExpression_=t,this}getFragmentDiscardExpression(){return this.discardExpression_}setSymbolRotateWithView(t){return this.symbolRotateWithView_=t,this}setStrokeWidthExpression(t){return this.hasStroke_=!0,this.strokeWidthExpression_=t,this}setStrokeColorExpression(t){return this.hasStroke_=!0,this.strokeColorExpression_=t,this}getStrokeColorExpression(){return this.strokeColorExpression_}setStrokeOffsetExpression(t){return this.strokeOffsetExpression_=t,this}setStrokeCapExpression(t){return this.strokeCapExpression_=t,this}setStrokeJoinExpression(t){return this.strokeJoinExpression_=t,this}setStrokeMiterLimitExpression(t){return this.strokeMiterLimitExpression_=t,this}setStrokeDistanceFieldExpression(t){return this.strokeDistanceFieldExpression_=t,this}setFillColorExpression(t){return this.hasFill_=!0,this.fillColorExpression_=t,this}getFillColorExpression(){return this.fillColorExpression_}addVertexShaderFunction(t){this.vertexShaderFunctions_.includes(t)||this.vertexShaderFunctions_.push(t)}addFragmentShaderFunction(t){this.fragmentShaderFunctions_.includes(t)||this.fragmentShaderFunctions_.push(t)}getSymbolVertexShader(){return this.hasSymbol_?`${pn}\n${this.uniforms_.map((function(t){return"uniform "+t+";"})).join("\n")}\nattribute vec2 a_position;\nattribute float a_index;\nattribute vec4 a_prop_hitColor;\n${this.attributes_.map((function(t){return"attribute "+t+";"})).join("\n")}\nvarying vec2 v_texCoord;\nvarying vec2 v_quadCoord;\nvarying vec4 v_prop_hitColor;\nvarying vec2 v_centerPx;\nvarying float v_angle;\nvarying vec2 v_quadSizePx;\n${this.varyings_.map((function(t){return"varying "+t.type+" "+t.name+";"})).join("\n")}\n${this.vertexShaderFunctions_.join("\n")}\nvec2 pxToScreen(vec2 coordPx) {\n  vec2 scaled = coordPx / u_viewportSizePx / 0.5;\n  return scaled;\n}\n\nvec2 screenToPx(vec2 coordScreen) {\n  return (coordScreen * 0.5 + 0.5) * u_viewportSizePx;\n}\n\nvoid main(void) {\n  v_quadSizePx = ${this.symbolSizeExpression_};\n  vec2 halfSizePx = v_quadSizePx * 0.5;\n  vec2 centerOffsetPx = ${this.symbolOffsetExpression_};\n  vec2 offsetPx = centerOffsetPx;\n  if (a_index == 0.0) {\n    offsetPx -= halfSizePx;\n  } else if (a_index == 1.0) {\n    offsetPx += halfSizePx * vec2(1., -1.);\n  } else if (a_index == 2.0) {\n    offsetPx += halfSizePx;\n  } else {\n    offsetPx += halfSizePx * vec2(-1., 1.);\n  }\n  float angle = ${this.symbolRotationExpression_};\n  ${this.symbolRotateWithView_?"angle += u_rotation;":""}\n  float c = cos(-angle);\n  float s = sin(-angle);\n  offsetPx = vec2(c * offsetPx.x - s * offsetPx.y, s * offsetPx.x + c * offsetPx.y);\n  vec4 center = u_projectionMatrix * vec4(a_position, 0.0, 1.0);\n  gl_Position = center + vec4(pxToScreen(offsetPx), u_depth, 0.);\n  vec4 texCoord = ${this.texCoordExpression_};\n  float u = a_index == 0.0 || a_index == 3.0 ? texCoord.s : texCoord.p;\n  float v = a_index == 2.0 || a_index == 3.0 ? texCoord.t : texCoord.q;\n  v_texCoord = vec2(u, v);\n  v_prop_hitColor = a_prop_hitColor;\n  v_angle = angle;\n  c = cos(-v_angle);\n  s = sin(-v_angle);\n  centerOffsetPx = vec2(c * centerOffsetPx.x - s * centerOffsetPx.y, s * centerOffsetPx.x + c * centerOffsetPx.y); \n  v_centerPx = screenToPx(center.xy) + centerOffsetPx;\n${this.varyings_.map((function(t){return"  "+t.name+" = "+t.expression+";"})).join("\n")}\n}`:null}getSymbolFragmentShader(){return this.hasSymbol_?`${pn}\n${this.uniforms_.map((function(t){return"uniform "+t+";"})).join("\n")}\nvarying vec2 v_texCoord;\nvarying vec4 v_prop_hitColor;\nvarying vec2 v_centerPx;\nvarying float v_angle;\nvarying vec2 v_quadSizePx;\n${this.varyings_.map((function(t){return"varying "+t.type+" "+t.name+";"})).join("\n")}\n${this.fragmentShaderFunctions_.join("\n")}\n\nvoid main(void) {\n  if (${this.discardExpression_}) { discard; }\n  vec2 coordsPx = gl_FragCoord.xy / u_pixelRatio - v_centerPx; // relative to center\n  float c = cos(v_angle);\n  float s = sin(v_angle);\n  coordsPx = vec2(c * coordsPx.x - s * coordsPx.y, s * coordsPx.x + c * coordsPx.y);\n  gl_FragColor = ${this.symbolColorExpression_};\n  if (u_hitDetection > 0) {\n    if (gl_FragColor.a < 0.05) { discard; };\n    gl_FragColor = v_prop_hitColor;\n  }\n}`:null}getStrokeVertexShader(){return this.hasStroke_?`${pn}\n${this.uniforms_.map((function(t){return"uniform "+t+";"})).join("\n")}\nattribute vec2 a_position;\nattribute float a_index;\nattribute vec2 a_segmentStart;\nattribute vec2 a_segmentEnd;\nattribute float a_parameters;\nattribute float a_distance;\nattribute vec2 a_joinAngles;\nattribute vec4 a_prop_hitColor;\n${this.attributes_.map((function(t){return"attribute "+t+";"})).join("\n")}\nvarying vec2 v_segmentStart;\nvarying vec2 v_segmentEnd;\nvarying float v_angleStart;\nvarying float v_angleEnd;\nvarying float v_width;\nvarying vec4 v_prop_hitColor;\nvarying float v_distanceOffsetPx;\n${this.varyings_.map((function(t){return"varying "+t.type+" "+t.name+";"})).join("\n")}\n${this.vertexShaderFunctions_.join("\n")}\nvec2 worldToPx(vec2 worldPos) {\n  vec4 screenPos = u_projectionMatrix * vec4(worldPos, 0.0, 1.0);\n  return (0.5 * screenPos.xy + 0.5) * u_viewportSizePx;\n}\n\nvec4 pxToScreen(vec2 pxPos) {\n  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;\n  return vec4(screenPos, u_depth, 1.0);\n}\n\nbool isCap(float joinAngle) {\n  return joinAngle < -0.1;\n}\n\nvec2 getJoinOffsetDirection(vec2 normalPx, float joinAngle) {\n  float halfAngle = joinAngle / 2.0;\n  float c = cos(halfAngle);\n  float s = sin(halfAngle);\n  vec2 angleBisectorNormal = vec2(s * normalPx.x + c * normalPx.y, -c * normalPx.x + s * normalPx.y);\n  float length = 1.0 / s;\n  return angleBisectorNormal * length;\n}\n\nvec2 getOffsetPoint(vec2 point, vec2 normal, float joinAngle, float offsetPx) {\n  // if on a cap or the join angle is too high, offset the line along the segment normal\n  if (cos(joinAngle) > 0.998 || isCap(joinAngle)) {\n    return point - normal * offsetPx;\n  }\n  // offset is applied along the inverted normal (positive offset goes "right" relative to line direction)\n  return point - getJoinOffsetDirection(normal, joinAngle) * offsetPx;\n}\n\nvoid main(void) {\n  v_angleStart = a_joinAngles.x;\n  v_angleEnd = a_joinAngles.y;\n  float vertexNumber = floor(abs(a_parameters) / 10000. + 0.5);\n  // we're reading the fractional part while keeping the sign (so -4.12 gives -0.12, 3.45 gives 0.45)\n  float angleTangentSum = fract(abs(a_parameters) / 10000.) * 10000. * sign(a_parameters);\n\n  float lineWidth = ${this.strokeWidthExpression_};\n  float lineOffsetPx = ${this.strokeOffsetExpression_};\n\n  // compute segment start/end in px with offset\n  vec2 segmentStartPx = worldToPx(a_segmentStart);\n  vec2 segmentEndPx = worldToPx(a_segmentEnd);\n  vec2 tangentPx = normalize(segmentEndPx - segmentStartPx);\n  vec2 normalPx = vec2(-tangentPx.y, tangentPx.x);\n  segmentStartPx = getOffsetPoint(segmentStartPx, normalPx, v_angleStart, lineOffsetPx),\n  segmentEndPx = getOffsetPoint(segmentEndPx, normalPx, v_angleEnd, lineOffsetPx);\n  \n  // compute current vertex position\n  float normalDir = vertexNumber < 0.5 || (vertexNumber > 1.5 && vertexNumber < 2.5) ? 1.0 : -1.0;\n  float tangentDir = vertexNumber < 1.5 ? 1.0 : -1.0;\n  float angle = vertexNumber < 1.5 ? v_angleStart : v_angleEnd;\n  vec2 joinDirection;\n  vec2 positionPx = vertexNumber < 1.5 ? segmentStartPx : segmentEndPx;\n  // if angle is too high, do not make a proper join\n  if (cos(angle) > 0.985 || isCap(angle)) {\n    joinDirection = normalPx * normalDir - tangentPx * tangentDir;\n  } else {\n    joinDirection = getJoinOffsetDirection(normalPx * normalDir, angle);\n  }\n  positionPx = positionPx + joinDirection * (lineWidth * 0.5 + 1.); // adding 1 pixel for antialiasing\n  gl_Position = pxToScreen(positionPx);\n\n  v_segmentStart = segmentStartPx;\n  v_segmentEnd = segmentEndPx;\n  v_width = lineWidth;\n  v_prop_hitColor = a_prop_hitColor;\n  v_distanceOffsetPx = a_distance / u_resolution - (lineOffsetPx * angleTangentSum);\n${this.varyings_.map((function(t){return"  "+t.name+" = "+t.expression+";"})).join("\n")}\n}`:null}getStrokeFragmentShader(){return this.hasStroke_?`${pn}\n${this.uniforms_.map((function(t){return"uniform "+t+";"})).join("\n")}\nvarying vec2 v_segmentStart;\nvarying vec2 v_segmentEnd;\nvarying float v_angleStart;\nvarying float v_angleEnd;\nvarying float v_width;\nvarying vec4 v_prop_hitColor;\nvarying float v_distanceOffsetPx;\n${this.varyings_.map((function(t){return"varying "+t.type+" "+t.name+";"})).join("\n")}\n${this.fragmentShaderFunctions_.join("\n")}\n\nvec2 pxToWorld(vec2 pxPos) {\n  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;\n  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;\n}\n\nbool isCap(float joinAngle) {\n  return joinAngle < -0.1;\n}\n\nfloat segmentDistanceField(vec2 point, vec2 start, vec2 end, float width) {\n  vec2 tangent = normalize(end - start);\n  vec2 normal = vec2(-tangent.y, tangent.x);\n  vec2 startToPoint = point - start;\n  return abs(dot(startToPoint, normal)) - width * 0.5;\n}\n\nfloat buttCapDistanceField(vec2 point, vec2 start, vec2 end) {\n  vec2 startToPoint = point - start;\n  vec2 tangent = normalize(end - start);\n  return dot(startToPoint, -tangent);\n}\n\nfloat squareCapDistanceField(vec2 point, vec2 start, vec2 end, float width) {\n  return buttCapDistanceField(point, start, end) - width * 0.5;\n}\n\nfloat roundCapDistanceField(vec2 point, vec2 start, vec2 end, float width) {\n  float onSegment = max(0., 1000. * dot(point - start, end - start)); // this is very high when inside the segment\n  return length(point - start) - width * 0.5 - onSegment;\n}\n\nfloat roundJoinDistanceField(vec2 point, vec2 start, vec2 end, float width) {\n  return roundCapDistanceField(point, start, end, width);\n}\n\nfloat bevelJoinField(vec2 point, vec2 start, vec2 end, float width, float joinAngle) {\n  vec2 startToPoint = point - start;\n  vec2 tangent = normalize(end - start);\n  float c = cos(joinAngle * 0.5);\n  float s = sin(joinAngle * 0.5);\n  float direction = -sign(sin(joinAngle));\n  vec2 bisector = vec2(c * tangent.x - s * tangent.y, s * tangent.x + c * tangent.y);\n  float radius = width * 0.5 * s;\n  return dot(startToPoint, bisector * direction) - radius;\n}\n\nfloat miterJoinDistanceField(vec2 point, vec2 start, vec2 end, float width, float joinAngle) {\n  if (cos(joinAngle) > 0.985) { // avoid risking a division by zero\n    return bevelJoinField(point, start, end, width, joinAngle);\n  }\n  float miterLength = 1. / sin(joinAngle * 0.5);\n  float miterLimit = ${this.strokeMiterLimitExpression_};\n  if (miterLength > miterLimit) {\n    return bevelJoinField(point, start, end, width, joinAngle);\n  }\n  return -1000.;\n}\n\nfloat capDistanceField(vec2 point, vec2 start, vec2 end, float width, float capType) {\n   if (capType == ${sn("butt")}) {\n    return buttCapDistanceField(point, start, end);\n  } else if (capType == ${sn("square")}) {\n    return squareCapDistanceField(point, start, end, width);\n  }\n  return roundCapDistanceField(point, start, end, width);\n}\n\nfloat joinDistanceField(vec2 point, vec2 start, vec2 end, float width, float joinAngle, float joinType) {\n  if (joinType == ${sn("bevel")}) {\n    return bevelJoinField(point, start, end, width, joinAngle);\n  } else if (joinType == ${sn("miter")}) {\n    return miterJoinDistanceField(point, start, end, width, joinAngle);\n  }\n  return roundJoinDistanceField(point, start, end, width);\n}\n\nfloat computeSegmentPointDistance(vec2 point, vec2 start, vec2 end, float width, float joinAngle, float capType, float joinType) {\n  if (isCap(joinAngle)) {\n    return capDistanceField(point, start, end, width, capType);\n  }\n  return joinDistanceField(point, start, end, width, joinAngle, joinType);\n}\n\nvoid main(void) {\n  vec2 currentPoint = gl_FragCoord.xy / u_pixelRatio;\n  #ifdef GL_FRAGMENT_PRECISION_HIGH\n  vec2 worldPos = pxToWorld(currentPoint);\n  if (\n    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (\n      worldPos[0] < u_renderExtent[0] ||\n      worldPos[1] < u_renderExtent[1] ||\n      worldPos[0] > u_renderExtent[2] ||\n      worldPos[1] > u_renderExtent[3]\n    )\n  ) {\n    discard;\n  }\n  #endif\n  if (${this.discardExpression_}) { discard; }\n\n  float segmentLength = length(v_segmentEnd - v_segmentStart);\n  vec2 segmentTangent = (v_segmentEnd - v_segmentStart) / segmentLength;\n  vec2 segmentNormal = vec2(-segmentTangent.y, segmentTangent.x);\n  vec2 startToPoint = currentPoint - v_segmentStart;\n  float currentLengthPx = max(0., min(dot(segmentTangent, startToPoint), segmentLength)) + v_distanceOffsetPx; \n  float currentRadiusPx = abs(dot(segmentNormal, startToPoint));\n  float currentRadiusRatio = dot(segmentNormal, startToPoint) * 2. / v_width;\n  vec4 color = ${this.strokeColorExpression_} * u_globalAlpha;\n  float capType = ${this.strokeCapExpression_};\n  float joinType = ${this.strokeJoinExpression_};\n  float segmentStartDistance = computeSegmentPointDistance(currentPoint, v_segmentStart, v_segmentEnd, v_width, v_angleStart, capType, joinType);\n  float segmentEndDistance = computeSegmentPointDistance(currentPoint, v_segmentEnd, v_segmentStart, v_width, v_angleEnd, capType, joinType);\n  float distance = max(\n    segmentDistanceField(currentPoint, v_segmentStart, v_segmentEnd, v_width),\n    max(segmentStartDistance, segmentEndDistance)\n  );\n  distance = max(distance, ${this.strokeDistanceFieldExpression_});\n  gl_FragColor = color * smoothstep(0.5, -0.5, distance);\n  if (u_hitDetection > 0) {\n    if (gl_FragColor.a < 0.1) { discard; };\n    gl_FragColor = v_prop_hitColor;\n  }\n}`:null}getFillVertexShader(){return this.hasFill_?`${pn}\n${this.uniforms_.map((function(t){return"uniform "+t+";"})).join("\n")}\nattribute vec2 a_position;\nattribute vec4 a_prop_hitColor;\n${this.attributes_.map((function(t){return"attribute "+t+";"})).join("\n")}\nvarying vec4 v_prop_hitColor;\n${this.varyings_.map((function(t){return"varying "+t.type+" "+t.name+";"})).join("\n")}\n${this.vertexShaderFunctions_.join("\n")}\nvoid main(void) {\n  gl_Position = u_projectionMatrix * vec4(a_position, u_depth, 1.0);\n  v_prop_hitColor = a_prop_hitColor;\n${this.varyings_.map((function(t){return"  "+t.name+" = "+t.expression+";"})).join("\n")}\n}`:null}getFillFragmentShader(){return this.hasFill_?`${pn}\n${this.uniforms_.map((function(t){return"uniform "+t+";"})).join("\n")}\nvarying vec4 v_prop_hitColor;\n${this.varyings_.map((function(t){return"varying "+t.type+" "+t.name+";"})).join("\n")}\n${this.fragmentShaderFunctions_.join("\n")}\nvec2 pxToWorld(vec2 pxPos) {\n  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;\n  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;\n}\n\nvec2 worldToPx(vec2 worldPos) {\n  vec4 screenPos = u_projectionMatrix * vec4(worldPos, 0.0, 1.0);\n  return (0.5 * screenPos.xy + 0.5) * u_viewportSizePx;\n}\n\nvoid main(void) {\n  vec2 pxPos = gl_FragCoord.xy / u_pixelRatio;\n  vec2 pxOrigin = worldToPx(u_patternOrigin);\n  #ifdef GL_FRAGMENT_PRECISION_HIGH\n  vec2 worldPos = pxToWorld(pxPos);\n  if (\n    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (\n      worldPos[0] < u_renderExtent[0] ||\n      worldPos[1] < u_renderExtent[1] ||\n      worldPos[0] > u_renderExtent[2] ||\n      worldPos[1] > u_renderExtent[3]\n    )\n  ) {\n    discard;\n  }\n  #endif\n  if (${this.discardExpression_}) { discard; }\n  gl_FragColor = ${this.fillColorExpression_} * u_globalAlpha;\n  if (u_hitDetection > 0) {\n    if (gl_FragColor.a < 0.1) { discard; };\n    gl_FragColor = v_prop_hitColor;\n  }\n}`:null}}const gn="blur",_n="gradient",mn="radius",yn=["#00f","#0ff","#0f0","#ff0","#f00"]
class vn extends f.A{constructor(t){t=t||{}
const e=Object.assign({},t)
delete e.gradient,delete e.radius,delete e.blur,delete e.weight,super(e),this.gradient_=null,this.addChangeListener(_n,this.handleGradientChanged_),this.setGradient(t.gradient?t.gradient:yn),this.setBlur(void 0!==t.blur?t.blur:15),this.setRadius(void 0!==t.radius?t.radius:8)
const n=t.weight?t.weight:"weight"
this.weightFunction_="string"==typeof n?function(t){return t.get(n)}:n,this.setRenderOrder(null)}getBlur(){return this.get(gn)}getGradient(){return this.get(_n)}getRadius(){return this.get(mn)}handleGradientChanged_(){this.gradient_=function(t){const e=(0,J.Y)(1,256),n=e.createLinearGradient(0,0,1,256),i=1/(t.length-1)
for(let r=0,o=t.length;r<o;++r)n.addColorStop(r*i,t[r])
return e.fillStyle=n,e.fillRect(0,0,1,256),e.canvas}(this.getGradient())}setBlur(t){this.set(gn,t)}setGradient(t){this.set(_n,t)}setRadius(t){this.set(mn,t)}createRenderer(){const t=(new dn).addAttribute("float a_prop_weight").addVarying("v_prop_weight","float","a_prop_weight").addUniform("float u_size").addUniform("float u_blurSlope").setSymbolSizeExpression("vec2(u_size)").setSymbolColorExpression("vec4(smoothstep(0., 1., (1. - length(coordsPx * 2. / v_quadSizePx)) * u_blurSlope) * v_prop_weight)")
return new he(this,{className:this.getClassName(),attributes:[{name:"weight",callback:t=>{const e=this.weightFunction_(t)
return void 0!==e?(0,R.qE)(e,0,1):1}}],uniforms:{u_size:()=>2*(this.get(mn)+this.get(gn)),u_blurSlope:()=>this.get(mn)/Math.max(1,this.get(gn))},hitDetectionEnabled:!0,vertexShader:t.getSymbolVertexShader(),fragmentShader:t.getSymbolFragmentShader(),postProcesses:[{fragmentShader:"\n            precision mediump float;\n\n            uniform sampler2D u_image;\n            uniform sampler2D u_gradientTexture;\n            uniform float u_opacity;\n\n            varying vec2 v_texCoord;\n\n            void main() {\n              vec4 color = texture2D(u_image, v_texCoord);\n              gl_FragColor.a = color.a * u_opacity;\n              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;\n              gl_FragColor.rgb *= gl_FragColor.a;\n            }",uniforms:{u_gradientTexture:()=>this.gradient_,u_opacity:()=>this.getOpacity()}}]})}renderDeclutter(){}}const xn=vn
var bn=n(9343),En=n(1257),wn=n(3498),Sn=n(8247),Cn=n(4943),Tn=n(7179),In=n(1270)
class Pn extends Sn.A{constructor(t){super(t),this.vectorRenderer_=new wt(t),this.layerImageRatio_=t.getImageRatio(),this.coordinateToVectorPixelTransform_=(0,j.vt)(),this.renderedPixelToCoordinateTransform_=null}disposeInternal(){this.vectorRenderer_.dispose(),super.disposeInternal()}getFeatures(t){if(!this.vectorRenderer_)return Promise.resolve([])
const e=(0,j.Bb)(this.coordinateToVectorPixelTransform_,(0,j.Bb)(this.renderedPixelToCoordinateTransform_,t.slice()))
return this.vectorRenderer_.getFeatures(e)}handleFontsChanged(){this.vectorRenderer_.handleFontsChanged()}prepareFrame(t){const e=t.pixelRatio,n=t.viewState,i=n.resolution,r=t.viewHints,o=this.vectorRenderer_
let s=t.extent
1!==this.layerImageRatio_&&(s=s.slice(0),(0,E.Af)(s,this.layerImageRatio_))
const a=(0,E.RG)(s)/i,l=(0,E.Oq)(s)/i
if(!r[ot.A.ANIMATING]&&!r[ot.A.INTERACTING]&&!(0,E.Im)(s)){o.useContainer(null,null)
const r=o.context,u=t.layerStatesArray[t.layerIndex],h=Object.assign({},u,{opacity:1}),c=Object.assign({},t,{extent:s,size:[a,l],viewState:Object.assign({},t.viewState,{rotation:0}),layerStatesArray:[h],layerIndex:0,declutter:null}),f=this.getLayer().getDeclutter()
f&&(c.declutter={[f]:new Tn(9)})
let p=!0
const d=new Cn.A(s,i,e,r.canvas,(function(t){o.prepareFrame(c)&&o.replayGroupChanged&&(o.clipping=!1,o.renderFrame(c,null)&&(o.renderDeclutter(c),o.renderDeferred(c),p=!1),t())}))
d.addEventListener(me.A.CHANGE,(()=>{if(d.getState()!==pt.A.LOADED)return
this.image_=p?null:d
const t=d.getPixelRatio(),i=(0,In.m)(d.getResolution())*e/t
this.renderedResolution=i,this.coordinateToVectorPixelTransform_=(0,j.Zz)(this.coordinateToVectorPixelTransform_,a/2,l/2,1/i,-1/i,0,-n.center[0],-n.center[1])})),d.load()}return this.image_&&(this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice()),!!this.image_}preRender(){}postRender(){}renderDeclutter(){}forEachFeatureAtCoordinate(t,e,n,i,r){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(t,e,n,i,r):super.forEachFeatureAtCoordinate(t,e,n,i,r)}}const An=Pn
class Rn extends f.A{constructor(t){t=t||{}
const e=Object.assign({},t)
delete e.imageRatio,super(e),this.imageRatio_=void 0!==t.imageRatio?t.imageRatio:1}getImageRatio(){return this.imageRatio_}createRenderer(){return new An(this)}}const Ln=Rn
var Mn=n(6104)
const On={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},Nn={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]}
class Dn extends Mn.A{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=(0,j.vt)(),this.tileClipContexts_=null}prepareTile(t,e,n){let i
const r=t.getState()
return r!==ge.A.LOADED&&r!==ge.A.ERROR||(this.updateExecutorGroup_(t,e,n),this.tileImageNeedsRender_(t)&&(i=!0)),i}getTile(t,e,n,i){const r=i.pixelRatio,o=i.viewState,s=o.resolution,a=o.projection,l=this.getLayer(),u=l.getSource().getTile(t,e,n,r,a),h=i.viewHints,c=!(h[ot.A.ANIMATING]||h[ot.A.INTERACTING])
return!c&&u.wantedResolution||(u.wantedResolution=s),this.prepareTile(u,r,a)&&(c||Date.now()-i.time<8)&&"vector"!==l.getRenderMode()&&this.renderTileImage_(u,i),super.getTile(t,e,n,i)}isDrawableTile(t){const e=this.getLayer()
return super.isDrawableTile(t)&&("vector"===e.getRenderMode()?(0,A.v6)(e)in t.executorGroups:t.hasContext(e))}getTileImage(t){return t.getImage(this.getLayer())}prepareFrame(t){const e=this.getLayer().getRevision()
return this.renderedLayerRevision_!==e&&(this.renderedLayerRevision_=e,this.renderedTiles.length=0),super.prepareFrame(t)}updateExecutorGroup_(t,e,n){const i=this.getLayer(),r=i.getRevision(),o=i.getRenderOrder()||null,s=t.wantedResolution,a=t.getReplayState(i)
if(!a.dirty&&a.renderedResolution===s&&a.renderedRevision==r&&a.renderedRenderOrder==o)return
const l=i.getSource(),u=!!i.getDeclutter(),h=l.getTileGrid(),c=l.getTileGridForProjection(n).getTileCoordExtent(t.wrappedTileCoord),f=l.getSourceTiles(e,n,t),p=(0,A.v6)(i)
delete t.hitDetectionImageData[p],t.executorGroups[p]=[],a.dirty=!1
for(let d=0,g=f.length;d<g;++d){const n=f[d]
if(n.getState()!=ge.A.LOADED)continue
const r=n.tileCoord,g=h.getTileCoordExtent(r),_=(0,E._N)(c,g),m=(0,E.r)(_,i.getRenderBuffer()*s,this.tmpExtent),y=(0,E.aI)(g,_)?null:m,v=new D(0,_,s,e),x=mt(s,e),b=function(t,e){let n
const r=t.getStyleFunction()||i.getStyleFunction()
if(r&&(n=r(t,s)),n){const i=this.renderFeature(t,x,n,v,u,e)
a.dirty=a.dirty||i}},w=n.getFeatures()
o&&o!==a.renderedRenderOrder&&w.sort(o)
for(let t=0,e=w.length;t<e;++t){const e=w[t]
y&&!(0,E.HY)(y,e.getGeometry().getExtent())||b.call(this,e,t)}const S=v.finish(),C="vector"!==i.getRenderMode()&&u&&1===f.length?null:_,T=new rt(C,s,e,l.getOverlaps(),S,i.getRenderBuffer(),!!this.frameState?.declutter)
t.executorGroups[p].push(T)}a.renderedRevision=r,a.renderedRenderOrder=o,a.renderedResolution=s}forEachFeatureAtCoordinate(t,e,n,i,r){const o=e.viewState.resolution,s=e.viewState.rotation
n=null==n?0:n
const a=this.getLayer(),l=a.getSource().getTileGridForProjection(e.viewState.projection),u=(0,E.Tr)([t]);(0,E.r)(u,o*n,u)
const h={},c=function(t,e,n){let o=t.getId()
void 0===o&&(o=(0,A.v6)(t))
const s=h[o]
if(s){if(!0!==s&&n<s.distanceSq){if(0===n)return h[o]=!0,r.splice(r.lastIndexOf(s),1),i(t,a,e)
s.geometry=e,s.distanceSq=n}}else{if(0===n)return h[o]=!0,i(t,a,e)
r.push(h[o]={feature:t,layer:a,geometry:e,distanceSq:n,callback:i})}},f=this.renderedTiles
let p
for(let d=0,g=f.length;!p&&d<g;++d){const i=f[d],r=l.getTileCoordExtent(i.wrappedTileCoord)
if(!(0,E.HY)(r,u))continue
const h=(0,A.v6)(a),g=[i.executorGroups[h]],_=a.getDeclutter()
g.some((i=>{const r=_?e.declutter[_].all().map((t=>t.value)):null
for(let e=0,a=i.length;e<a;++e){const a=i[e]
if(p=a.forEachFeatureAtCoordinate(t,o,s,n,c,r),p)return!0}}))}return p}getFeatures(t){return new Promise(((e,n)=>{const i=this.getLayer(),r=(0,A.v6)(i),o=i.getSource(),s=this.renderedProjection,a=s.getExtent(),l=this.renderedResolution,u=o.getTileGridForProjection(s),h=(0,j.Bb)(this.renderedPixelToCoordinateTransform_,t.slice()),c=u.getTileCoordForCoordAndResolution(h,l)
let f
for(let t=0,y=this.renderedTiles.length;t<y;++t)if(c.toString()===this.renderedTiles[t].tileCoord.toString()){if(f=this.renderedTiles[t],f.getState()===ge.A.LOADED){const t=u.getTileCoordExtent(f.tileCoord)
o.getWrapX()&&s.canWrapX()&&!(0,E.ms)(a,t)&&(0,bt.Li)(h,s)
break}f=void 0}if(!f||f.loadingSourceTiles>0)return void e([])
const p=u.getTileCoordExtent(f.wrappedTileCoord),d=(0,E.Py)(p),g=[(h[0]-d[0])/l,(d[1]-h[1])/l],_=f.getSourceTiles().reduce((function(t,e){return t.concat(e.getFeatures())}),[])
let m=f.hitDetectionImageData[r]
if(!m){const t=(0,Ee.xq)(u.getTileSize(u.getZForResolution(l,o.zDirection))),e=this.renderedRotation_
m=ct(t,[this.getRenderTransform(u.getTileCoordCenter(f.wrappedTileCoord),l,0,ht,t[0]*ht,t[1]*ht,0)],_,i.getStyleFunction(),u.getTileCoordExtent(f.wrappedTileCoord),f.getReplayState(i).renderedResolution,e),f.hitDetectionImageData[r]=m}e(ft(g,_,m))}))}handleFontsChanged(){const t=this.getLayer()
t.getVisible()&&void 0!==this.renderedLayerRevision_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}renderDeclutter(t,e){const n=this.context,i=n.globalAlpha
n.globalAlpha=e.opacity
const r=t.viewHints,o=!(r[ot.A.ANIMATING]||r[ot.A.INTERACTING]),s=this.renderedTiles
for(let a=0,l=s.length;a<l;++a){const e=s[a],n=e.executorGroups[(0,A.v6)(this.getLayer())],i=this.getLayer().getDeclutter()
if(n)for(let r=n.length-1;r>=0;--r)n[r].execute(this.context,[this.context.canvas.width,this.context.canvas.height],this.getTileRenderTransform(e,t),t.viewState.rotation,o,et,i?t.declutter[i]:void 0)}n.globalAlpha=i}renderDeferredInternal(t){const e=this.renderedTiles.reduce(((t,e,n)=>(e.executorGroups[(0,A.v6)(this.getLayer())].forEach((e=>t.push({executorGroup:e,index:n}))),t)),[]),n=e.map((({executorGroup:t})=>t.getDeferredZIndexContexts()))
n.map((t=>Object.keys(t))).flat().sort(S.V_).map(Number).forEach((t=>{n.forEach(((n,i)=>{n[t]&&n[t].forEach((t=>{const{executorGroup:n,index:r}=e[i],o=n.getRenderedContext(),s=o.globalAlpha
o.globalAlpha=this.renderedOpacity_
const a=this.tileClipContexts_[r]
a&&a.draw(o),t.draw(o),a&&o.restore(),o.globalAlpha=s,t.clear()}))}))}))}getTileRenderTransform(t,e){const n=e.pixelRatio,i=e.viewState,r=i.center,o=i.resolution,s=i.rotation,a=e.size,l=Math.round(a[0]*n),u=Math.round(a[1]*n),h=this.getLayer().getSource().getTileGridForProjection(e.viewState.projection),c=t.tileCoord,f=h.getTileCoordExtent(t.wrappedTileCoord),p=h.getTileCoordExtent(c,this.tmpExtent)[0]-f[0]
return(0,j.lw)((0,j.hs)(this.inversePixelTransform.slice(),1/n,1/n),this.getRenderTransform(r,o,s,n,l,u,p))}postRender(t,e){const n=e.viewHints,i=!(n[ot.A.ANIMATING]||n[ot.A.INTERACTING])
this.renderedPixelToCoordinateTransform_=e.pixelToCoordinateTransform.slice(),this.renderedRotation_=e.viewState.rotation,this.renderedOpacity_=e.layerStatesArray[e.layerIndex].opacity
const r=this.getLayer(),o=r.getRenderMode(),s=t.globalAlpha
t.globalAlpha=this.renderedOpacity_
const a=r.getDeclutter(),l=a?Nn[o].filter((t=>!et.includes(t))):Nn[o],u=e.viewState,h=u.rotation,c=r.getSource(),f=c.getTileGridForProjection(u.projection).getZForResolution(u.resolution,c.zDirection),p=this.renderedTiles,d=[],g=[],_=[]
let m=!0
for(let y=p.length-1;y>=0;--y){const n=p[y]
m=m&&!n.getReplayState(r).dirty
const o=n.executorGroups[(0,A.v6)(r)].filter((t=>t.hasExecutors(l)))
if(0===o.length)continue
const s=this.getTileRenderTransform(n,e),u=n.tileCoord[0]
let c=!1
const v=o[0].getClipCoords(s)
let x,b=t
if(v){a&&(x=new k.A,b=x.getContext())
for(let t=0,e=d.length;t<e;++t)if(f!==u&&u<g[t]){const e=d[t];(0,E.HY)([v[0],v[3],v[4],v[7]],[e[0],e[3],e[4],e[7]])&&(c||(b.save(),c=!0),b.beginPath(),b.moveTo(v[0],v[1]),b.lineTo(v[2],v[3]),b.lineTo(v[4],v[5]),b.lineTo(v[6],v[7]),b.moveTo(e[6],e[7]),b.lineTo(e[4],e[5]),b.lineTo(e[2],e[3]),b.lineTo(e[0],e[1]),b.clip())}d.push(v),g.push(u)}for(let e=0,r=o.length;e<r;++e)o[e].execute(t,[t.canvas.width,t.canvas.height],s,h,i,l)
c&&(b===t?b.restore():_[y]=x)}t.globalAlpha=s,this.ready=m,this.tileClipContexts_=_,super.postRender(t,e)}renderFeature(t,e,n,i,r,o){if(!n)return!1
let s=!1
if(Array.isArray(n))for(let a=0,l=n.length;a<l;++a)s=vt(i,t,n[a],e,this.boundHandleStyleImageChange_,void 0,r,o)||s
else s=vt(i,t,n,e,this.boundHandleStyleImageChange_,void 0,r,o)
return s}tileImageNeedsRender_(t){const e=this.getLayer()
if("vector"===e.getRenderMode())return!1
const n=t.getReplayState(e),i=e.getRevision(),r=t.wantedResolution
return n.renderedTileResolution!==r||n.renderedTileRevision!==i}renderTileImage_(t,e){const n=this.getLayer(),i=t.getReplayState(n),r=n.getRevision(),o=t.executorGroups[(0,A.v6)(n)]
i.renderedTileRevision=r
const s=t.wrappedTileCoord,a=s[0],l=n.getSource()
let u=e.pixelRatio
const h=e.viewState.projection,c=l.getTileGridForProjection(h),f=c.getResolution(t.tileCoord[0]),p=e.pixelRatio/t.wantedResolution*f,d=c.getResolution(a),g=t.getContext(n)
u=Math.round(Math.max(u,p/u))
const _=l.getTilePixelSize(a,u,h)
g.canvas.width=_[0],g.canvas.height=_[1]
const m=u/p
if(1!==m){const t=(0,j.cL)(this.tmpTransform_);(0,j.hs)(t,m,m),g.setTransform.apply(g,t)}const y=c.getTileCoordExtent(s,this.tmpExtent),v=p/d,x=(0,j.cL)(this.tmpTransform_);(0,j.hs)(x,v,-v),(0,j.Tl)(x,-y[0],-y[3])
for(let b=0,E=o.length;b<E;++b)o[b].execute(g,[g.canvas.width*m,g.canvas.height*m],x,0,!0,On[n.getRenderMode()],null)
i.renderedTileResolution=t.wantedResolution}}const Fn=Dn
var kn=n(3035)
class jn extends f.A{constructor(t){t=t||{}
const e=Object.assign({},t)
delete e.preload,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un
const n=t.renderMode||"hybrid";(0,jt.v)("hybrid"==n||"vector"==n,"`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=n,this.setPreload(t.preload?t.preload:0),this.setUseInterimTilesOnError(void 0===t.useInterimTilesOnError||t.useInterimTilesOnError),this.getBackground,this.setBackground}createRenderer(){return new Fn(this)}getFeatures(t){return super.getFeatures(t)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(kn.A.PRELOAD)}getUseInterimTilesOnError(){return this.get(kn.A.USE_INTERIM_TILES_ON_ERROR)}setPreload(t){this.set(kn.A.PRELOAD,t)}setUseInterimTilesOnError(t){this.set(kn.A.USE_INTERIM_TILES_ON_ERROR,t)}}const zn=jn
function Gn(t,e,n){const i=(0,fe.SR)()
return i.style=t.style,function(t,e,n,i){const r=(0,fe.qg)(t,n,e)
if((0,fe.Xj)(r.type,fe.j))throw new Error("No matching type was found")
if(!(0,fe.ho)(e,r.type)){const t=(0,fe.go)(e),n=(0,fe.go)(r.type)
throw new Error(`Expected expression to be of type ${t}, got ${n}`)}return fn(r,e,i)}(e,n,i,t)}function Bn(t){const e=(0,Je._j)(t)
return[256*e[0]+e[1],256*e[2]+Math.round(255*e[3])]}function qn(t){return t===fe.mE?2:t===fe.Fq?4:1}function Un(t){const e=qn(t)
return e>1?`vec${e}`:"float"}function Zn(t){return(JSON.stringify(t).split("").reduce(((t,e)=>(t<<5)-t+e.charCodeAt(0)),0)>>>0).toString()}function Xn(t,e,n,i){if(`${i}radius`in t&&"icon-"!==i){let r=Gn(n,t[`${i}radius`],fe.wl);`${i}radius2`in t&&(r=`max(${r}, ${Gn(n,t[`${i}radius2`],fe.wl)})`),`${i}stroke-width`in t&&(r=`(${r} + ${Gn(n,t[`${i}stroke-width`],fe.wl)} * 0.5)`),e.setSymbolSizeExpression(`vec2(${r} * 2. + 0.5)`)}if(`${i}scale`in t){const r=Gn(n,t[`${i}scale`],fe.wl|fe.Fq)
e.setSymbolSizeExpression(`${e.getSymbolSizeExpression()} * ${r}`)}`${i}displacement`in t&&e.setSymbolOffsetExpression(Gn(n,t[`${i}displacement`],fe.Fq)),`${i}rotation`in t&&e.setSymbolRotationExpression(Gn(n,t[`${i}rotation`],fe.wl)),`${i}rotate-with-view`in t&&e.setSymbolRotateWithView(!!t[`${i}rotate-with-view`])}function Yn(t,e,n,i,r){let o="vec4(0.)"
null!==e&&(o=e),null!==n&&null!==i&&(o=`mix(${n}, ${o}, smoothstep(-${i} + 0.63, -${i} - 0.58, ${t}))`)
let s=`${o} * (1.0 - smoothstep(-0.63, 0.58, ${t}))`
return null!==r&&(s=`${s} * ${r}`),s}function Vn(t,e,n,i,r){const o=new Image
let s
return o.crossOrigin=void 0===t[`${i}cross-origin`]?"anonymous":t[`${i}cross-origin`],o.src=t[`${i}src`],o.complete&&o.width&&o.height?s=tn([o.width,o.height]):(n[`u_texture${r}_size`]=()=>o.complete?[o.width,o.height]:[0,0],e.addUniform(`vec2 u_texture${r}_size`),s=`u_texture${r}_size`),n[`u_texture${r}`]=o,e.addUniform(`sampler2D u_texture${r}`),s}function Wn(t,e,n,i,r){let o=Gn(n,t[`${e}offset`],fe.Fq)
if(`${e}offset-origin`in t)switch(t[`${e}offset-origin`]){case"top-right":o=`vec2(${i}.x, 0.) + ${r} * vec2(-1., 0.) + ${o} * vec2(-1., 1.)`
break
case"bottom-left":o=`vec2(0., ${i}.y) + ${r} * vec2(0., -1.) + ${o} * vec2(1., -1.)`
break
case"bottom-right":o=`${i} - ${r} - ${o}`}return o}class Hn extends En.A{constructor(t){super(Object.assign({},t)),this.parseResult_=function(t){const e={inFragmentShader:!1,properties:{},variables:{},functions:{},style:t},n={inFragmentShader:!0,variables:e.variables,properties:{},functions:{},style:t},i=new dn,r={}
if("icon-src"in t?function(t,e,n,i,r){let o="vec4(1.0)"
"icon-color"in t&&(o=Gn(r,t["icon-color"],fe.mE)),"icon-opacity"in t&&(o=`${o} * ${Gn(r,t["icon-opacity"],fe.wl)}`)
const s=Zn(t["icon-src"]),a=Vn(t,e,n,"icon-",s)
if(e.setSymbolColorExpression(`${o} * samplePremultiplied(u_texture${s}, v_texCoord)`).setSymbolSizeExpression(a),"icon-width"in t&&"icon-height"in t&&e.setSymbolSizeExpression(`vec2(${Gn(i,t["icon-width"],fe.wl)}, ${Gn(i,t["icon-height"],fe.wl)})`),"icon-offset"in t&&"icon-size"in t){const n=Gn(i,t["icon-size"],fe.Fq),r=e.getSymbolSizeExpression()
e.setSymbolSizeExpression(n)
const o=Wn(t,"icon-",i,"v_quadSizePx",n)
e.setTextureCoordinateExpression(`(vec4((${o}).xyxy) + vec4(0., 0., ${n})) / (${r}).xyxy`)}if(Xn(t,e,i,"icon-"),"icon-anchor"in t){const n=Gn(i,t["icon-anchor"],fe.Fq)
let r,o="1.0"
"icon-scale"in t&&(o=Gn(i,t["icon-scale"],fe.wl|fe.Fq)),r="pixels"===t["icon-anchor-x-units"]&&"pixels"===t["icon-anchor-y-units"]?`${n} * ${o}`:"pixels"===t["icon-anchor-x-units"]?`${n} * vec2(vec2(${o}).x, v_quadSizePx.y)`:"pixels"===t["icon-anchor-y-units"]?`${n} * vec2(v_quadSizePx.x, vec2(${o}).x)`:`${n} * v_quadSizePx`
let s=`v_quadSizePx * vec2(0.5, -0.5) + ${r} * vec2(-1., 1.)`
if("icon-anchor-origin"in t)switch(t["icon-anchor-origin"]){case"top-right":s=`v_quadSizePx * -0.5 + ${r}`
break
case"bottom-left":s=`v_quadSizePx * 0.5 - ${r}`
break
case"bottom-right":s=`v_quadSizePx * vec2(-0.5, 0.5) + ${r} * vec2(1., -1.)`}e.setSymbolOffsetExpression(`${e.getSymbolOffsetExpression()} + ${s}`)}}(t,i,r,e,n):"shape-points"in t?function(t,e,n,i,r){r.functions.round="float round(float v) {\n  return sign(v) * floor(abs(v) + 0.5);\n}",r.functions.starDistanceField="float starDistanceField(vec2 point, float numPoints, float radius, float radius2, float angle) {\n  float startAngle = -PI * 0.5 + angle; // tip starts upwards and rotates clockwise with angle\n  float c = cos(startAngle);\n  float s = sin(startAngle);\n  vec2 pointRotated = vec2(c * point.x - s * point.y, s * point.x + c * point.y);\n  float alpha = TWO_PI / numPoints; // the angle of one sector\n  float beta = atan(pointRotated.y, pointRotated.x);\n  float gamma = round(beta / alpha) * alpha; // angle in sector\n  c = cos(-gamma);\n  s = sin(-gamma);\n  vec2 inSector = vec2(c * pointRotated.x - s * pointRotated.y, abs(s * pointRotated.x + c * pointRotated.y));\n  vec2 tipToPoint = inSector + vec2(-radius, 0.);\n  vec2 edgeNormal = vec2(radius2 * sin(alpha * 0.5), -radius2 * cos(alpha * 0.5) + radius);\n  return dot(normalize(edgeNormal), tipToPoint);\n}",r.functions.regularDistanceField="float regularDistanceField(vec2 point, float numPoints, float radius, float angle) {\n  float startAngle = -PI * 0.5 + angle; // tip starts upwards and rotates clockwise with angle\n  float c = cos(startAngle);\n  float s = sin(startAngle);\n  vec2 pointRotated = vec2(c * point.x - s * point.y, s * point.x + c * point.y);\n  float alpha = TWO_PI / numPoints; // the angle of one sector\n  float radiusIn = radius * cos(PI / numPoints);\n  float beta = atan(pointRotated.y, pointRotated.x);\n  float gamma = round((beta - alpha * 0.5) / alpha) * alpha + alpha * 0.5; // angle in sector from mid\n  c = cos(-gamma);\n  s = sin(-gamma);\n  vec2 inSector = vec2(c * pointRotated.x - s * pointRotated.y, abs(s * pointRotated.x + c * pointRotated.y));\n  return inSector.x - radiusIn;\n}",Xn(t,e,i,"shape-")
let o=null
"shape-opacity"in t&&(o=Gn(r,t["shape-opacity"],fe.wl))
let s="coordsPx"
"shape-scale"in t&&(s=`coordsPx / ${Gn(r,t["shape-scale"],fe.wl|fe.Fq)}`)
let a=null
"shape-fill-color"in t&&(a=Gn(r,t["shape-fill-color"],fe.mE))
let l=null
"shape-stroke-color"in t&&(l=Gn(r,t["shape-stroke-color"],fe.mE))
let u=null
"shape-stroke-width"in t&&(u=Gn(r,t["shape-stroke-width"],fe.wl))
const h=Gn(r,t["shape-points"],fe.wl)
let c,f="0."
"shape-angle"in t&&(f=Gn(r,t["shape-angle"],fe.wl))
let p=Gn(r,t["shape-radius"],fe.wl)
if(null!==u&&(p=`${p} + ${u} * 0.5`),"shape-radius2"in t){let e=Gn(r,t["shape-radius2"],fe.wl)
null!==u&&(e=`${e} + ${u} * 0.5`),c=`starDistanceField(${s}, ${h}, ${p}, ${e}, ${f})`}else c=`regularDistanceField(${s}, ${h}, ${p}, ${f})`
const d=Yn(c,a,l,u,o)
e.setSymbolColorExpression(d)}(t,i,0,e,n):"circle-radius"in t&&function(t,e,n,i,r){r.functions.circleDistanceField="float circleDistanceField(vec2 point, float radius) {\n  return length(point) - radius;\n}",Xn(t,e,i,"circle-")
let o=null
"circle-opacity"in t&&(o=Gn(r,t["circle-opacity"],fe.wl))
let s="coordsPx"
"circle-scale"in t&&(s=`coordsPx / ${Gn(r,t["circle-scale"],fe.wl|fe.Fq)}`)
let a=null
"circle-fill-color"in t&&(a=Gn(r,t["circle-fill-color"],fe.mE))
let l=null
"circle-stroke-color"in t&&(l=Gn(r,t["circle-stroke-color"],fe.mE))
let u=Gn(r,t["circle-radius"],fe.wl),h=null
"circle-stroke-width"in t&&(h=Gn(r,t["circle-stroke-width"],fe.wl),u=`(${u} + ${h} * 0.5)`)
const c=Yn(`circleDistanceField(${s}, ${u})`,a,l,h,o)
e.setSymbolColorExpression(c)}(t,i,0,e,n),function(t,e,n,i,r){if("stroke-color"in t&&e.setStrokeColorExpression(Gn(r,t["stroke-color"],fe.mE)),"stroke-pattern-src"in t){const i=Zn(t["stroke-pattern-src"]),o=Vn(t,e,n,"stroke-pattern-",i)
let s=o,a="vec2(0.)"
"stroke-pattern-offset"in t&&"stroke-pattern-size"in t&&(s=Gn(r,t["stroke-pattern-size"],fe.Fq),a=Wn(t,"stroke-pattern-",r,o,s))
let l="0."
"stroke-pattern-spacing"in t&&(l=Gn(r,t["stroke-pattern-spacing"],fe.wl)),r.functions.sampleStrokePattern="vec4 sampleStrokePattern(sampler2D texture, vec2 textureSize, vec2 textureOffset, vec2 sampleSize, float spacingPx, float currentLengthPx, float currentRadiusRatio, float lineWidth) {\n  float currentLengthScaled = currentLengthPx * sampleSize.y / lineWidth;\n  float spacingScaled = spacingPx * sampleSize.y / lineWidth;\n  float uCoordPx = mod(currentLengthScaled, (sampleSize.x + spacingScaled));\n  // make sure that we're not sampling too close to the borders to avoid interpolation with outside pixels\n  uCoordPx = clamp(uCoordPx, 0.5, sampleSize.x - 0.5);\n  float vCoordPx = (-currentRadiusRatio * 0.5 + 0.5) * sampleSize.y;\n  vec2 texCoord = (vec2(uCoordPx, vCoordPx) + textureOffset) / textureSize;\n  return samplePremultiplied(texture, texCoord);\n}"
const u=`u_texture${i}`
let h="1."
"stroke-color"in t&&(h=e.getStrokeColorExpression()),e.setStrokeColorExpression(`${h} * sampleStrokePattern(${u}, ${o}, ${a}, ${s}, ${l}, currentLengthPx, currentRadiusRatio, v_width)`)}if("stroke-width"in t&&e.setStrokeWidthExpression(Gn(i,t["stroke-width"],fe.wl)),"stroke-offset"in t&&e.setStrokeOffsetExpression(Gn(i,t["stroke-offset"],fe.wl)),"stroke-line-cap"in t&&e.setStrokeCapExpression(Gn(i,t["stroke-line-cap"],fe.cT)),"stroke-line-join"in t&&e.setStrokeJoinExpression(Gn(i,t["stroke-line-join"],fe.cT)),"stroke-miter-limit"in t&&e.setStrokeMiterLimitExpression(Gn(i,t["stroke-miter-limit"],fe.wl)),"stroke-line-dash"in t){r.functions.getSingleDashDistance=`float getSingleDashDistance(float distance, float radius, float dashOffset, float dashLength, float dashLengthTotal, float capType) {\n  float localDistance = mod(distance, dashLengthTotal);\n  float distanceSegment = abs(localDistance - dashOffset - dashLength * 0.5) - dashLength * 0.5;\n  distanceSegment = min(distanceSegment, dashLengthTotal - localDistance);\n  if (capType == ${sn("square")}) {\n    distanceSegment -= v_width * 0.5;\n  } else if (capType == ${sn("round")}) {\n    distanceSegment = min(distanceSegment, sqrt(distanceSegment * distanceSegment + radius * radius) - v_width * 0.5);\n  }\n  return distanceSegment;\n}`
let n=t["stroke-line-dash"].map((t=>Gn(r,t,fe.wl)))
n.length%2==1&&(n=[...n,...n])
let o="0."
"stroke-line-dash-offset"in t&&(o=Gn(i,t["stroke-line-dash-offset"],fe.wl))
const s=`dashDistanceField_${Zn(t["stroke-line-dash"])}`,a=n.map(((t,e)=>`float dashLength${e} = ${t};`)),l=n.map(((t,e)=>`dashLength${e}`)).join(" + ")
let u="0.",h=`getSingleDashDistance(distance, radius, ${u}, dashLength0, totalDashLength, capType)`
for(let t=2;t<n.length;t+=2)u=`${u} + dashLength${t-2} + dashLength${t-1}`,h=`min(${h}, getSingleDashDistance(distance, radius, ${u}, dashLength${t}, totalDashLength, capType))`
r.functions[s]=`float ${s}(float distance, float radius, float capType) {\n  ${a.join("\n  ")}\n  float totalDashLength = ${l};\n  return ${h};\n}`,e.setStrokeDistanceFieldExpression(`${s}(currentLengthPx + ${o}, currentRadiusPx, capType)`)}}(t,i,r,e,n),function(t,e,n,i,r){if("fill-color"in t&&e.setFillColorExpression(Gn(r,t["fill-color"],fe.mE)),"fill-pattern-src"in t){const i=Zn(t["fill-pattern-src"]),o=Vn(t,e,n,"fill-pattern-",i)
let s=o,a="vec2(0.)"
"fill-pattern-offset"in t&&"fill-pattern-size"in t&&(s=Gn(r,t["fill-pattern-size"],fe.Fq),a=Wn(t,"fill-pattern-",r,o,s)),r.functions.sampleFillPattern="vec4 sampleFillPattern(sampler2D texture, vec2 textureSize, vec2 textureOffset, vec2 sampleSize, vec2 pxOrigin, vec2 pxPosition) {\n  float scaleRatio = pow(2., mod(u_zoom + 0.5, 1.) - 0.5);\n  vec2 pxRelativePos = pxPosition - pxOrigin;\n  // rotate the relative position from origin by the current view rotation\n  pxRelativePos = vec2(pxRelativePos.x * cos(u_rotation) - pxRelativePos.y * sin(u_rotation), pxRelativePos.x * sin(u_rotation) + pxRelativePos.y * cos(u_rotation));\n  // sample position is computed according to the sample offset & size\n  vec2 samplePos = mod(pxRelativePos / scaleRatio, sampleSize);\n  // also make sure that we're not sampling too close to the borders to avoid interpolation with outside pixels\n  samplePos = clamp(samplePos, vec2(0.5), sampleSize - vec2(0.5));\n  samplePos.y = sampleSize.y - samplePos.y; // invert y axis so that images appear upright\n  return samplePremultiplied(texture, (samplePos + textureOffset) / textureSize);\n}"
const l=`u_texture${i}`
let u="1."
"fill-color"in t&&(u=e.getFillColorExpression()),e.setFillColorExpression(`${u} * sampleFillPattern(${l}, ${o}, ${a}, ${s}, pxOrigin, pxPos)`)}}(t,i,r,0,n),t.filter){const e=Gn(n,t.filter,fe.T8)
i.setFragmentDiscardExpression(`!${e}`)}Object.keys(n.variables).forEach((function(e){const o=n.variables[e],s=an(o.name)
let a
i.addUniform(`${Un(o.type)} ${s}`),a=o.type===fe.cT?()=>on(t.variables[o.name]):o.type===fe.mE?()=>Bn([...(0,Je._j)(t.variables[o.name]||"#eee")]):o.type===fe.T8?()=>t.variables[o.name]?1:0:()=>t.variables[o.name],r[s]=a})),Object.keys(n.properties).forEach((function(t){const r=n.properties[t]
e.properties[t]||(e.properties[t]=r)
let o=Un(r.type),s=`a_prop_${r.name}`
r.type===fe.mE&&(o="vec4",s=`unpackColor(${s})`,i.addVertexShaderFunction("vec4 unpackColor(vec2 packedColor) {\n  return fract(packedColor[1] / 256.0) * vec4(\n    fract(floor(packedColor[0] / 256.0) / 256.0),\n    fract(packedColor[0] / 256.0),\n    fract(floor(packedColor[1] / 256.0) / 256.0),\n    1.0\n  );\n}")),i.addVarying(`v_prop_${r.name}`,o,s)})),Object.keys(e.properties).forEach((function(t){const n=e.properties[t]
i.addAttribute(`${Un(n.type)} a_prop_${n.name}`)}))
const o=Object.keys(e.properties).map((function(t){const n=e.properties[t]
let i
return i=n.evaluator?n.evaluator:n.type===fe.cT?t=>on(t.get(n.name)):n.type===fe.mE?t=>Bn([...(0,Je._j)(t.get(n.name)||"#eee")]):n.type===fe.T8?t=>t.get(n.name)?1:0:t=>t.get(n.name),{name:n.name,size:qn(n.type),callback:i}}))
for(const s in e.functions)i.addVertexShaderFunction(e.functions[s])
for(const s in n.functions)i.addFragmentShaderFunction(n.functions[s])
return{builder:i,attributes:o.reduce(((t,e)=>({...t,[e.name]:{callback:e.callback,size:e.size}})),{}),uniforms:r}}(t.style),this.styleVariables_=t.style.variables||{},this.hitDetectionDisabled_=!!t.disableHitDetection}createRenderer(){const t=Object.keys(this.parseResult_.attributes).map((t=>({name:t,...this.parseResult_.attributes[t]})))
return new he(this,{vertexShader:this.parseResult_.builder.getSymbolVertexShader(),fragmentShader:this.parseResult_.builder.getSymbolFragmentShader(),hitDetectionEnabled:!this.hitDetectionDisabled_,uniforms:this.parseResult_.uniforms,attributes:t})}updateStyleVariables(t){Object.assign(this.styleVariables_,t),this.changed()}}const $n=Hn
var Kn=n(9043)
function Jn(t,e){const n=`\n    attribute vec2 ${He};\n    uniform mat4 ${ke};\n    uniform float ${Ze};\n    uniform float ${Xe};\n    uniform float ${Ye};\n    uniform float ${Ve};\n    uniform float ${We};\n    uniform float ${ze};\n\n    varying vec2 v_textureCoord;\n    varying vec2 v_mapCoord;\n\n    void main() {\n      v_textureCoord = ${He};\n      v_mapCoord = vec2(\n        ${Ve} + ${Ye} * ${Ze} * v_textureCoord[0],\n        ${We} - ${Ye} * ${Xe} * v_textureCoord[1]\n      );\n      gl_Position = ${ke} * vec4(${He}, ${ze}, 1.0);\n    }\n  `,i={inFragmentShader:!1,variables:{},properties:{},functions:{},bandCount:0,style:{},inFragmentShader:!0,bandCount:e,style:t},r=[]
if(void 0!==t.color){const e=Gn(i,t.color,fe.mE)
r.push(`color = ${e};`)}if(void 0!==t.contrast){const e=Gn(i,t.contrast,fe.wl)
r.push(`color.rgb = clamp((${e} + 1.0) * color.rgb - (${e} / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(void 0!==t.exposure){const e=Gn(i,t.exposure,fe.wl)
r.push(`color.rgb = clamp((${e} + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(void 0!==t.saturation){const e=Gn(i,t.saturation,fe.wl)
r.push(`\n      float saturation = ${e} + 1.0;\n      float sr = (1.0 - saturation) * 0.2126;\n      float sg = (1.0 - saturation) * 0.7152;\n      float sb = (1.0 - saturation) * 0.0722;\n      mat3 saturationMatrix = mat3(\n        sr + saturation, sr, sr,\n        sg, sg + saturation, sg,\n        sb, sb, sb + saturation\n      );\n      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));\n    `)}if(void 0!==t.gamma){const e=Gn(i,t.gamma,fe.wl)
r.push(`color.rgb = pow(color.rgb, vec3(1.0 / ${e}));`)}if(void 0!==t.brightness){const e=Gn(i,t.brightness,fe.wl)
r.push(`color.rgb = clamp(color.rgb + ${e}, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}const o={},s=Object.keys(i.variables).length
if(s>1&&!t.variables)throw new Error(`Missing variables in style (expected ${i.variables})`)
for(let h=0;h<s;++h){const e=i.variables[Object.keys(i.variables)[h]]
if(!(e.name in t.variables))throw new Error(`Missing '${e.name}' in style variables`)
o[an(e.name)]=function(){let n=t.variables[e.name]
return"string"==typeof n&&(n=on(n)),void 0!==n?n:-9999999}}const a=Object.keys(o).map((function(t){return`uniform float ${t};`})),l=Math.ceil(e/4)
a.push(`uniform sampler2D ${Ue}[${l}];`),i.paletteTextures&&a.push(`uniform sampler2D ${un}[${i.paletteTextures.length}];`)
const u=Object.keys(i.functions).map((function(t){return i.functions[t]}))
return{vertexShader:n,fragmentShader:`\n    #ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n    #else\n    precision mediump float;\n    #endif\n\n    varying vec2 v_textureCoord;\n    varying vec2 v_mapCoord;\n    uniform vec4 ${Ge};\n    uniform float ${je};\n    uniform float ${Ze};\n    uniform float ${Xe};\n    uniform float ${Be};\n    uniform float ${qe};\n\n    ${a.join("\n")}\n\n    ${u.join("\n")}\n\n    void main() {\n      if (\n        v_mapCoord[0] < ${Ge}[0] ||\n        v_mapCoord[1] < ${Ge}[1] ||\n        v_mapCoord[0] > ${Ge}[2] ||\n        v_mapCoord[1] > ${Ge}[3]\n      ) {\n        discard;\n      }\n\n      vec4 color = texture2D(${Ue}[0],  v_textureCoord);\n\n      ${r.join("\n")}\n\n      gl_FragColor = color;\n      gl_FragColor.rgb *= gl_FragColor.a;\n      gl_FragColor *= ${je};\n    }`,uniforms:o,paletteTextures:i.paletteTextures}}class Qn extends Kn.A{constructor(t){const e=(t=t?Object.assign({},t):{}).style||{}
delete t.style
const n=t.cacheSize
delete t.cacheSize,super(t),this.sources_=t.sources,this.renderedSource_=null,this.renderedResolution_=NaN,this.style_=e,this.cacheSize_=n,this.styleVariables_=this.style_.variables||{},this.addChangeListener(Bt.A.SOURCE,this.handleSourceUpdate_)}getSources(t,e){const n=this.getSource()
return this.sources_?"function"==typeof this.sources_?this.sources_(t,e):this.sources_:n?[n]:[]}getRenderSource(){return this.renderedSource_||this.getSource()}getSourceState(){const t=this.getRenderSource()
return t?t.getState():"undefined"}handleSourceUpdate_(){this.hasRenderer()&&this.getRenderer().clearCache(),this.getSource()&&this.setStyle(this.style_)}getSourceBandCount_(){const t=Number.MAX_SAFE_INTEGER,e=this.getSources([-t,-t,t,t],t)
return e&&e.length&&"bandCount"in e[0]?e[0].bandCount:4}createRenderer(){const t=Jn(this.style_,this.getSourceBandCount_())
return new Ke(this,{vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms,cacheSize:this.cacheSize_,paletteTextures:t.paletteTextures})}renderSources(t,e){const n=this.getRenderer()
let i
for(let r=0,o=e.length;r<o;++r)this.renderedSource_=e[r],n.prepareFrame(t)&&(i=n.renderFrame(t))
return i}render(t,e){this.rendered=!0
const n=t.viewState,i=this.getSources(t.extent,n.resolution)
let r=!0
for(let s=0,a=i.length;s<a;++s){const t=i[s],e=t.getState()
if("loading"==e){const e=()=>{"ready"==t.getState()&&(t.removeEventListener("change",e),this.changed())}
t.addEventListener("change",e)}r=r&&"ready"==e}const o=this.renderSources(t,i)
if(this.getRenderer().renderComplete&&r)return this.renderedResolution_=n.resolution,o
if(this.renderedResolution_>.5*n.resolution){const e=this.getSources(t.extent,this.renderedResolution_).filter((t=>!i.includes(t)))
if(e.length>0)return this.renderSources(t,e)}return o}setStyle(t){this.styleVariables_=t.variables||{},this.style_=t
const e=Jn(this.style_,this.getSourceBandCount_())
this.getRenderer().reset({vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms,paletteTextures:e.paletteTextures}),this.changed()}updateStyleVariables(t){Object.assign(this.styleVariables_,t),this.changed()}}Qn.prototype.dispose
const ti=Qn},9855:(t,e,n)=>{"use strict"
n.d(e,{A:()=>u})
var i=n(1051),r=n(7439),o=n(1736),s=n(6249),a=n(5306)
class l extends i.A{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background
const e=Object.assign({},t)
"object"==typeof t.properties&&(delete e.properties,Object.assign(e,t.properties)),e[r.A.OPACITY]=void 0!==t.opacity?t.opacity:1,(0,s.v)("number"==typeof e[r.A.OPACITY],"Layer opacity must be a number"),e[r.A.VISIBLE]=void 0===t.visible||t.visible,e[r.A.Z_INDEX]=t.zIndex,e[r.A.MAX_RESOLUTION]=void 0!==t.maxResolution?t.maxResolution:1/0,e[r.A.MIN_RESOLUTION]=void 0!==t.minResolution?t.minResolution:0,e[r.A.MIN_ZOOM]=void 0!==t.minZoom?t.minZoom:-1/0,e[r.A.MAX_ZOOM]=void 0!==t.maxZoom?t.maxZoom:1/0,this.className_=void 0!==e.className?e.className:"ol-layer",delete e.className,this.setProperties(e),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const e=this.state_||{layer:this,managed:void 0===t||t},n=this.getZIndex()
return e.opacity=(0,a.qE)(Math.round(100*this.getOpacity())/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==n||e.managed?n:1/0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}getLayersArray(t){return(0,o.b0)()}getLayerStatesArray(t){return(0,o.b0)()}getExtent(){return this.get(r.A.EXTENT)}getMaxResolution(){return this.get(r.A.MAX_RESOLUTION)}getMinResolution(){return this.get(r.A.MIN_RESOLUTION)}getMinZoom(){return this.get(r.A.MIN_ZOOM)}getMaxZoom(){return this.get(r.A.MAX_ZOOM)}getOpacity(){return this.get(r.A.OPACITY)}getSourceState(){return(0,o.b0)()}getVisible(){return this.get(r.A.VISIBLE)}getZIndex(){return this.get(r.A.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(r.A.EXTENT,t)}setMaxResolution(t){this.set(r.A.MAX_RESOLUTION,t)}setMinResolution(t){this.set(r.A.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(r.A.MAX_ZOOM,t)}setMinZoom(t){this.set(r.A.MIN_ZOOM,t)}setOpacity(t){(0,s.v)("number"==typeof t,"Layer opacity must be a number"),this.set(r.A.OPACITY,t)}setVisible(t){this.set(r.A.VISIBLE,t)}setZIndex(t){this.set(r.A.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const u=l},9043:(t,e,n)=>{"use strict"
n.d(e,{A:()=>s})
var i=n(1257),r=n(3035)
class o extends i.A{constructor(t){t=t||{}
const e=Object.assign({},t)
delete e.preload,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un,this.setPreload(void 0!==t.preload?t.preload:0),this.setUseInterimTilesOnError(void 0===t.useInterimTilesOnError||t.useInterimTilesOnError)}getPreload(){return this.get(r.A.PRELOAD)}setPreload(t){this.set(r.A.PRELOAD,t)}getUseInterimTilesOnError(){return this.get(r.A.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(t){this.set(r.A.USE_INTERIM_TILES_ON_ERROR,t)}getData(t){return super.getData(t)}}const s=o},6789:(t,e,n)=>{"use strict"
n.d(e,{A:()=>X})
var i=n(1257),r=n(7179),o=n(5337),s=n(6602),a=n(8343),l=n(2375),u=n(3247),h=n(7110),c=n(9769),f=n(8548),p=n(659)
function d(t,e,n){const i=(0,f.qg)(t,n)
if(!(0,f.ho)(e,i.type)){const t=(0,f.go)(e),n=(0,f.go)(i.type)
throw new Error(`Expected expression to be of type ${t}, got ${n}`)}return g(i,n)}function g(t,e){if(t instanceof f._D){if(t.type===f.mE&&"string"==typeof t.value){const e=(0,p.sH)(t.value)
return function(){return e}}return function(){return t.value}}const n=t.operator
switch(n){case f.ZD.Number:case f.ZD.String:case f.ZD.Coalesce:return function(t,e){const n=t.operator,i=t.args.length,r=new Array(i)
for(let o=0;o<i;++o)r[o]=g(t.args[o],e)
switch(n){case f.ZD.Coalesce:return t=>{for(let e=0;e<i;++e){const n=r[e](t)
if(null!=n)return n}throw new Error("Expected one of the values to be non-null")}
case f.ZD.Number:case f.ZD.String:return t=>{for(let e=0;e<i;++e){const i=r[e](t)
if(typeof i===n)return i}throw new Error(`Expected one of the values to be a ${n}`)}
default:throw new Error(`Unsupported assertion operator ${n}`)}}(t,e)
case f.ZD.Get:case f.ZD.Var:return function(t,e){const n=t.args[0].value
switch(t.operator){case f.ZD.Get:return t=>t.properties[n]
case f.ZD.Var:return t=>t.variables[n]
default:throw new Error(`Unsupported accessor operator ${t.operator}`)}}(t)
case f.ZD.Id:return t=>t.featureId
case f.ZD.GeometryType:return t=>t.geometryType
case f.ZD.Concat:{const n=t.args.map((t=>g(t,e)))
return t=>"".concat(...n.map((e=>e(t).toString())))}case f.ZD.Resolution:return t=>t.resolution
case f.ZD.Any:case f.ZD.All:case f.ZD.Between:case f.ZD.In:case f.ZD.Not:return function(t,e){const n=t.operator,i=t.args.length,r=new Array(i)
for(let o=0;o<i;++o)r[o]=g(t.args[o],e)
switch(n){case f.ZD.Any:return t=>{for(let e=0;e<i;++e)if(r[e](t))return!0
return!1}
case f.ZD.All:return t=>{for(let e=0;e<i;++e)if(!r[e](t))return!1
return!0}
case f.ZD.Between:return t=>{const e=r[0](t),n=r[1](t),i=r[2](t)
return e>=n&&e<=i}
case f.ZD.In:return t=>{const e=r[0](t)
for(let n=1;n<i;++n)if(e===r[n](t))return!0
return!1}
case f.ZD.Not:return t=>!r[0](t)
default:throw new Error(`Unsupported logical operator ${n}`)}}(t,e)
case f.ZD.Equal:case f.ZD.NotEqual:case f.ZD.LessThan:case f.ZD.LessThanOrEqualTo:case f.ZD.GreaterThan:case f.ZD.GreaterThanOrEqualTo:return function(t,e){const n=t.operator,i=g(t.args[0],e),r=g(t.args[1],e)
switch(n){case f.ZD.Equal:return t=>i(t)===r(t)
case f.ZD.NotEqual:return t=>i(t)!==r(t)
case f.ZD.LessThan:return t=>i(t)<r(t)
case f.ZD.LessThanOrEqualTo:return t=>i(t)<=r(t)
case f.ZD.GreaterThan:return t=>i(t)>r(t)
case f.ZD.GreaterThanOrEqualTo:return t=>i(t)>=r(t)
default:throw new Error(`Unsupported comparison operator ${n}`)}}(t,e)
case f.ZD.Multiply:case f.ZD.Divide:case f.ZD.Add:case f.ZD.Subtract:case f.ZD.Clamp:case f.ZD.Mod:case f.ZD.Pow:case f.ZD.Abs:case f.ZD.Floor:case f.ZD.Ceil:case f.ZD.Round:case f.ZD.Sin:case f.ZD.Cos:case f.ZD.Atan:case f.ZD.Sqrt:return function(t,e){const n=t.operator,i=t.args.length,r=new Array(i)
for(let o=0;o<i;++o)r[o]=g(t.args[o],e)
switch(n){case f.ZD.Multiply:return t=>{let e=1
for(let n=0;n<i;++n)e*=r[n](t)
return e}
case f.ZD.Divide:return t=>r[0](t)/r[1](t)
case f.ZD.Add:return t=>{let e=0
for(let n=0;n<i;++n)e+=r[n](t)
return e}
case f.ZD.Subtract:return t=>r[0](t)-r[1](t)
case f.ZD.Clamp:return t=>{const e=r[0](t),n=r[1](t)
if(e<n)return n
const i=r[2](t)
return e>i?i:e}
case f.ZD.Mod:return t=>r[0](t)%r[1](t)
case f.ZD.Pow:return t=>Math.pow(r[0](t),r[1](t))
case f.ZD.Abs:return t=>Math.abs(r[0](t))
case f.ZD.Floor:return t=>Math.floor(r[0](t))
case f.ZD.Ceil:return t=>Math.ceil(r[0](t))
case f.ZD.Round:return t=>Math.round(r[0](t))
case f.ZD.Sin:return t=>Math.sin(r[0](t))
case f.ZD.Cos:return t=>Math.cos(r[0](t))
case f.ZD.Atan:return 2===i?t=>Math.atan2(r[0](t),r[1](t)):t=>Math.atan(r[0](t))
case f.ZD.Sqrt:return t=>Math.sqrt(r[0](t))
default:throw new Error(`Unsupported numeric operator ${n}`)}}(t,e)
case f.ZD.Case:return function(t,e){const n=t.args.length,i=new Array(n)
for(let r=0;r<n;++r)i[r]=g(t.args[r],e)
return t=>{for(let e=0;e<n-1;e+=2)if(i[e](t))return i[e+1](t)
return i[n-1](t)}}(t,e)
case f.ZD.Match:return function(t,e){const n=t.args.length,i=new Array(n)
for(let r=0;r<n;++r)i[r]=g(t.args[r],e)
return t=>{const e=i[0](t)
for(let r=1;r<n;r+=2)if(e===i[r](t))return i[r+1](t)
return i[n-1](t)}}(t,e)
case f.ZD.Interpolate:return function(t,e){const n=t.args.length,i=new Array(n)
for(let r=0;r<n;++r)i[r]=g(t.args[r],e)
return t=>{const e=i[0](t),r=i[1](t)
let o,s
for(let a=2;a<n;a+=2){const n=i[a](t)
let l=i[a+1](t)
const u=Array.isArray(l)
if(u&&(l=(0,p.fu)(l)),n>=r)return 2===a?l:u?m(e,r,o,s,n,l):_(e,r,o,s,n,l)
o=n,s=l}return s}}(t,e)
case f.ZD.ToString:return function(t,e){const n=t.operator,i=t.args.length,r=new Array(i)
for(let o=0;o<i;++o)r[o]=g(t.args[o],e)
if(n===f.ZD.ToString)return e=>{const n=r[0](e)
return t.args[0].type===f.mE?(0,p.dI)(n):n.toString()}
throw new Error(`Unsupported convert operator ${n}`)}(t,e)
default:throw new Error(`Unsupported operator ${n}`)}}function _(t,e,n,i,r,o){const s=r-n
if(0===s)return i
const a=e-n
return i+(1===t?a/s:(Math.pow(t,a)-1)/(Math.pow(t,s)-1))*(o-i)}function m(t,e,n,i,r,o){if(0==r-n)return i
const s=(0,p.eE)(i),a=(0,p.eE)(o)
let l=a[2]-s[2]
l>180?l-=360:l<-180&&(l+=360)
const u=[_(t,e,n,s[0],r,a[0]),_(t,e,n,s[1],r,a[1]),s[2]+_(t,e,n,0,r,l),_(t,e,n,i[3],r,o[3])]
return(0,p.S8)((0,p.cD)(u))}var y=n(7931),v=n(1673)
function x(t){return!0}function b(t){const e=(0,f.SR)(),n=t.length,i=new Array(n)
for(let s=0;s<n;++s)i[s]=E(t[s],e)
const r={variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""},o=new Array(n)
return function(t,s){if(r.properties=t.getPropertiesInternal(),r.resolution=s,e.featureId){const e=t.getId()
r.featureId=void 0!==e?e:null}let a=0
for(let e=0;e<n;++e){const t=i[e](r)
t&&(o[a]=t,a+=1)}return o.length=a,o}}function E(t,e){const n=w(t,"",e),i=S(t,"",e),r=function(t,e){const n="text-",i=T(t,n+"value",e)
if(!i)return null
const r=w(t,n,e),o=w(t,n+"background-",e),s=S(t,n,e),a=S(t,n+"background-",e),l=T(t,n+"font",e),u=C(t,n+"max-angle",e),h=C(t,n+"offset-x",e),f=C(t,n+"offset-y",e),p=I(t,n+"overflow",e),d=T(t,n+"placement",e),g=C(t,n+"repeat",e),_=M(t,n+"scale",e),m=I(t,n+"rotate-with-view",e),y=C(t,n+"rotation",e),v=T(t,n+"align",e),x=T(t,n+"justify",e),b=T(t,n+"baseline",e),E=A(t,n+"padding",e),P=k(t,n+"declutter-mode"),R=new c.A({declutterMode:P})
return function(t){if(R.setText(i(t)),r&&R.setFill(r(t)),o&&R.setBackgroundFill(o(t)),s&&R.setStroke(s(t)),a&&R.setBackgroundStroke(a(t)),l&&R.setFont(l(t)),u&&R.setMaxAngle(u(t)),h&&R.setOffsetX(h(t)),f&&R.setOffsetY(f(t)),p&&R.setOverflow(p(t)),d){const e=d(t)
if("point"!==e&&"line"!==e)throw new Error("Expected point or line for text-placement")
R.setPlacement(e)}if(g&&R.setRepeat(g(t)),_&&R.setScale(_(t)),m&&R.setRotateWithView(m(t)),y&&R.setRotation(y(t)),v){const e=v(t)
if("left"!==e&&"center"!==e&&"right"!==e&&"end"!==e&&"start"!==e)throw new Error("Expected left, right, center, start, or end for text-align")
R.setTextAlign(e)}if(x){const e=x(t)
if("left"!==e&&"right"!==e&&"center"!==e)throw new Error("Expected left, right, or center for text-justify")
R.setJustify(e)}if(b){const e=b(t)
if("bottom"!==e&&"top"!==e&&"middle"!==e&&"alphabetic"!==e&&"hanging"!==e)throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline")
R.setTextBaseline(e)}return E&&R.setPadding(E(t)),R}}(t,e),a=function(t,e){return"icon-src"in t?function(t,e){const n="icon-",i=n+"src",r=z(t[i],i),o=R(t,n+"anchor",e),s=M(t,n+"scale",e),a=C(t,n+"opacity",e),u=R(t,n+"displacement",e),h=C(t,n+"rotation",e),c=I(t,n+"rotate-with-view",e),f=D(t,n+"anchor-origin"),p=F(t,n+"anchor-x-units"),d=F(t,n+"anchor-y-units"),g=function(t,e){const n=t[e]
if(void 0!==n)return B(n,e)}(t,n+"color"),_=function(t,e){const n=t[e]
if(void 0!==n){if("string"!=typeof n)throw new Error(`Expected a string for ${e}`)
return n}}(t,n+"cross-origin"),m=function(t,e){const n=t[e]
if(void 0!==n)return j(n,e)}(t,n+"offset"),y=D(t,n+"offset-origin"),v=O(t,n+"width"),x=O(t,n+"height"),b=N(t,n+"size"),E=k(t,n+"declutter-mode"),w=new l.A({src:r,anchorOrigin:f,anchorXUnits:p,anchorYUnits:d,color:g,crossOrigin:_,offset:m,offsetOrigin:y,height:x,width:v,size:b,declutterMode:E})
return function(t){return a&&w.setOpacity(a(t)),u&&w.setDisplacement(u(t)),h&&w.setRotation(h(t)),c&&w.setRotateWithView(c(t)),s&&w.setScale(s(t)),o&&w.setAnchor(o(t)),w}}(t,e):"shape-points"in t?function(t,e){const n="shape-",i=n+"points",r=n+"radius",o=G(t[i],i),s=G(t[r],r),a=w(t,n,e),l=S(t,n,e),h=M(t,n+"scale",e),c=R(t,n+"displacement",e),f=C(t,n+"rotation",e),p=I(t,n+"rotate-with-view",e),d=O(t,n+"radius2"),g=O(t,n+"angle"),_=k(t,n+"declutter-mode"),m=new u.A({points:o,radius:s,radius2:d,angle:g,declutterMode:_})
return function(t){return a&&m.setFill(a(t)),l&&m.setStroke(l(t)),c&&m.setDisplacement(c(t)),f&&m.setRotation(f(t)),p&&m.setRotateWithView(p(t)),h&&m.setScale(h(t)),m}}(t,e):"circle-radius"in t?function(t,e){const n="circle-",i=w(t,n,e),r=S(t,n,e),o=C(t,n+"radius",e),a=M(t,n+"scale",e),l=R(t,n+"displacement",e),u=C(t,n+"rotation",e),h=I(t,n+"rotate-with-view",e),c=k(t,n+"declutter-mode"),f=new s.A({radius:5,declutterMode:c})
return function(t){return o&&f.setRadius(o(t)),i&&f.setFill(i(t)),r&&f.setStroke(r(t)),l&&f.setDisplacement(l(t)),u&&f.setRotation(u(t)),h&&f.setRotateWithView(h(t)),a&&f.setScale(a(t)),f}}(t,e):null}(t,e),h=C(t,"z-index",e)
if(!(n||i||r||a||(0,y.p)(t)))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(t))
const f=new o.Ay
return function(t){let e=!0
if(n){const i=n(t)
i&&(e=!1),f.setFill(i)}if(i){const n=i(t)
n&&(e=!1),f.setStroke(n)}if(r){const n=r(t)
n&&(e=!1),f.setText(n)}if(a){const n=a(t)
n&&(e=!1),f.setImage(n)}return h&&f.setZIndex(h(t)),e?null:f}}function w(t,e,n){let i
if(i=e+"fill-pattern-src"in t?function(t,e,n){const i=T(t,e+"pattern-src",n),r=L(t,e+"pattern-offset",n),o=L(t,e+"pattern-size",n),s=P(t,e+"color",n)
return function(t){return{src:i(t),offset:r&&r(t),size:o&&o(t),color:s&&s(t)}}}(t,e+"fill-",n):P(t,e+"fill-color",n),!i)return null
const r=new a.A
return function(t){const e=i(t)
return"none"===e?null:(r.setColor(e),r)}}function S(t,e,n){const i=C(t,e+"stroke-width",n),r=P(t,e+"stroke-color",n)
if(!i&&!r)return null
const o=T(t,e+"stroke-line-cap",n),s=T(t,e+"stroke-line-join",n),a=A(t,e+"stroke-line-dash",n),l=C(t,e+"stroke-line-dash-offset",n),u=C(t,e+"stroke-miter-limit",n),c=new h.A
return function(t){if(r){const e=r(t)
if("none"===e)return null
c.setColor(e)}if(i&&c.setWidth(i(t)),o){const e=o(t)
if("butt"!==e&&"round"!==e&&"square"!==e)throw new Error("Expected butt, round, or square line cap")
c.setLineCap(e)}if(s){const e=s(t)
if("bevel"!==e&&"round"!==e&&"miter"!==e)throw new Error("Expected bevel, round, or miter line join")
c.setLineJoin(e)}return a&&c.setLineDash(a(t)),l&&c.setLineDashOffset(l(t)),u&&c.setMiterLimit(u(t)),c}}function C(t,e,n){if(!(e in t))return
const i=d(t[e],f.wl,n)
return function(t){return G(i(t),e)}}function T(t,e,n){if(!(e in t))return null
const i=d(t[e],f.cT,n)
return function(t){return z(i(t),e)}}function I(t,e,n){if(!(e in t))return null
const i=d(t[e],f.T8,n)
return function(t){const n=i(t)
if("boolean"!=typeof n)throw new Error(`Expected a boolean for ${e}`)
return n}}function P(t,e,n){if(!(e in t))return null
const i=d(t[e],f.mE|f.cT,n)
return function(t){return B(i(t),e)}}function A(t,e,n){if(!(e in t))return null
const i=d(t[e],f.Fq,n)
return function(t){return j(i(t),e)}}function R(t,e,n){if(!(e in t))return null
const i=d(t[e],f.Fq,n)
return function(t){const n=j(i(t),e)
if(2!==n.length)throw new Error(`Expected two numbers for ${e}`)
return n}}function L(t,e,n){if(!(e in t))return null
const i=d(t[e],f.Fq,n)
return function(t){return q(i(t),e)}}function M(t,e,n){if(!(e in t))return null
const i=d(t[e],f.Fq|f.wl,n)
return function(t){return"number"==typeof(n=i(t))?n:q(n,e)
var n}}function O(t,e){const n=t[e]
if(void 0!==n){if("number"!=typeof n)throw new Error(`Expected a number for ${e}`)
return n}}function N(t,e){const n=t[e]
if(void 0!==n){if("number"==typeof n)return(0,v.xq)(n)
if(!Array.isArray(n))throw new Error(`Expected a number or size array for ${e}`)
if(2!==n.length||"number"!=typeof n[0]||"number"!=typeof n[1])throw new Error(`Expected a number or size array for ${e}`)
return n}}function D(t,e){const n=t[e]
if(void 0!==n){if("bottom-left"!==n&&"bottom-right"!==n&&"top-left"!==n&&"top-right"!==n)throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`)
return n}}function F(t,e){const n=t[e]
if(void 0!==n){if("pixels"!==n&&"fraction"!==n)throw new Error(`Expected pixels or fraction for ${e}`)
return n}}function k(t,e){const n=t[e]
if(void 0!==n){if("string"!=typeof n)throw new Error(`Expected a string for ${e}`)
if("declutter"!==n&&"obstacle"!==n&&"none"!==n)throw new Error(`Expected declutter, obstacle, or none for ${e}`)
return n}}function j(t,e){if(!Array.isArray(t))throw new Error(`Expected an array for ${e}`)
const n=t.length
for(let i=0;i<n;++i)if("number"!=typeof t[i])throw new Error(`Expected an array of numbers for ${e}`)
return t}function z(t,e){if("string"!=typeof t)throw new Error(`Expected a string for ${e}`)
return t}function G(t,e){if("number"!=typeof t)throw new Error(`Expected a number for ${e}`)
return t}function B(t,e){if("string"==typeof t)return t
const n=j(t,e),i=n.length
if(i<3||i>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`)
return n}function q(t,e){const n=j(t,e)
if(2!==n.length)throw new Error(`Expected an array of two numbers for ${e}`)
return n}const U="renderOrder"
class Z extends i.A{constructor(t){t=t||{}
const e=Object.assign({},t)
delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,super(e),this.declutter_=t.declutter?String(t.declutter):void 0,this.renderBuffer_=void 0!==t.renderBuffer?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=void 0!==t.updateWhileAnimating&&t.updateWhileAnimating,this.updateWhileInteracting_=void 0!==t.updateWhileInteracting&&t.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(U)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t,e){const n=this.getDeclutter()
n in t.declutter==0&&(t.declutter[n]=new r(9)),this.getRenderer().renderDeclutter(t,e)}setRenderOrder(t){this.set(U,t)}setStyle(t){this.style_=function(t){if(void 0===t)return o.d1
if(!t)return null
if("function"==typeof t)return t
if(t instanceof o.Ay)return t
if(!Array.isArray(t))return b([t])
if(0===t.length)return[]
const e=t.length,n=t[0]
if(n instanceof o.Ay){const n=new Array(e)
for(let i=0;i<e;++i){const e=t[i]
if(!(e instanceof o.Ay))throw new Error("Expected a list of style instances")
n[i]=e}return n}if("style"in n){const n=new Array(e)
for(let i=0;i<e;++i){const e=t[i]
if(!("style"in e))throw new Error("Expected a list of rules with a style property")
n[i]=e}return function(t){const e=(0,f.SR)(),n=function(t,e){const n=t.length,i=new Array(n)
for(let r=0;r<n;++r){const n=t[r],o="filter"in n?d(n.filter,f.T8,e):x
let s
if(Array.isArray(n.style)){const t=n.style.length
s=new Array(t)
for(let i=0;i<t;++i)s[i]=E(n.style[i],e)}else s=[E(n.style,e)]
i[r]={filter:o,styles:s}}return function(e){const r=[]
let o=!1
for(let s=0;s<n;++s)if((0,i[s].filter)(e)&&(!t[s].else||!o)){o=!0
for(const t of i[s].styles){const n=t(e)
n&&r.push(n)}}return r}}(t,e),i={variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}
return function(t,r){if(i.properties=t.getPropertiesInternal(),i.resolution=r,e.featureId){const e=t.getId()
i.featureId=void 0!==e?e:null}return e.geometryType&&(i.geometryType=(0,f.Ye)(t.getGeometry())),n(i)}}(n)}return b(t)}(t),this.styleFunction_=null===t?void 0:(0,o.mC)(this.style_),this.changed()}}const X=Z},1971:(t,e,n)=>{"use strict"
n.d(e,{A:()=>m,i:()=>d})
var i=n(9855),r=n(3844),o=n(1678),s=n(406),a=n(8638),l=n(7067),u=n(6249),h=n(7931),c=n(3236),f=n(1736),p=n(4757)
class d extends s.Ay{constructor(t,e){super(t),this.layer=e}}const g="layers"
class _ extends i.A{constructor(t){t=t||{}
const e=Object.assign({},t)
delete e.layers
let n=t.layers
super(e),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(g,this.handleLayersChanged_),n?Array.isArray(n)?n=new r.A(n.slice(),{unique:!0}):(0,u.v)("function"==typeof n.getArray,"Expected `layers` to be an array or a `Collection`"):n=new r.A(void 0,{unique:!0}),this.setLayers(n)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(p.JH),this.layersListenerKeys_.length=0
const t=this.getLayers()
this.layersListenerKeys_.push((0,p.KT)(t,o.A.ADD,this.handleLayersAdd_,this),(0,p.KT)(t,o.A.REMOVE,this.handleLayersRemove_,this))
for(const n in this.listenerKeys_)this.listenerKeys_[n].forEach(p.JH);(0,h.I)(this.listenerKeys_)
const e=t.getArray()
for(let n=0,i=e.length;n<i;n++){const t=e[n]
this.registerLayerListeners_(t),this.dispatchEvent(new d("addlayer",t))}this.changed()}registerLayerListeners_(t){const e=[(0,p.KT)(t,l.A.PROPERTYCHANGE,this.handleLayerChange_,this),(0,p.KT)(t,a.A.CHANGE,this.handleLayerChange_,this)]
t instanceof _&&e.push((0,p.KT)(t,"addlayer",this.handleLayerGroupAdd_,this),(0,p.KT)(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[(0,f.v6)(t)]=e}handleLayerGroupAdd_(t){this.dispatchEvent(new d("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new d("removelayer",t.layer))}handleLayersAdd_(t){const e=t.element
this.registerLayerListeners_(e),this.dispatchEvent(new d("addlayer",e)),this.changed()}handleLayersRemove_(t){const e=t.element,n=(0,f.v6)(e)
this.listenerKeys_[n].forEach(p.JH),delete this.listenerKeys_[n],this.dispatchEvent(new d("removelayer",e)),this.changed()}getLayers(){return this.get(g)}setLayers(t){const e=this.getLayers()
if(e){const t=e.getArray()
for(let e=0,n=t.length;e<n;++e)this.dispatchEvent(new d("removelayer",t[e]))}this.set(g,t)}getLayersArray(t){return t=void 0!==t?t:[],this.getLayers().forEach((function(e){e.getLayersArray(t)})),t}getLayerStatesArray(t){const e=void 0!==t?t:[],n=e.length
this.getLayers().forEach((function(t){t.getLayerStatesArray(e)}))
const i=this.getLayerState()
let r=i.zIndex
t||void 0!==i.zIndex||(r=0)
for(let o=n,s=e.length;o<s;o++){const t=e[o]
t.opacity*=i.opacity,t.visible=t.visible&&i.visible,t.maxResolution=Math.min(t.maxResolution,i.maxResolution),t.minResolution=Math.max(t.minResolution,i.minResolution),t.minZoom=Math.max(t.minZoom,i.minZoom),t.maxZoom=Math.min(t.maxZoom,i.maxZoom),void 0!==i.extent&&(void 0!==t.extent?t.extent=(0,c._N)(t.extent,i.extent):t.extent=i.extent),void 0===t.zIndex&&(t.zIndex=r)}return e}getSourceState(){return"ready"}}const m=_},9343:(t,e,n)=>{"use strict"
n.d(e,{A:()=>a})
var i=n(1257)
class r extends i.A{constructor(t){super(t=t||{})}}const o=r
var s=n(8247)
const a=class extends o{constructor(t){super(t)}createRenderer(){return new s.A(this)}getData(t){return super.getData(t)}}},1257:(t,e,n)=>{"use strict"
n.d(e,{A:()=>p,l:()=>f})
var i=n(9855),r=n(8638),o=n(7439),s=n(8411),a=n(5714),l=n(6249),u=n(3236),h=n(4757)
class c extends i.A{constructor(t){const e=Object.assign({},t)
delete e.source,super(e),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(o.A.SOURCE,this.handleSourcePropertyChange_)
const n=t.source?t.source:null
this.setSource(n)}getLayersArray(t){return(t=t||[]).push(this),t}getLayerStatesArray(t){return(t=t||[]).push(this.getLayerState()),t}getSource(){return this.get(o.A.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource()
return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),this.sourceReady_||"ready"!==this.getSource().getState()||(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&((0,h.JH)(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1
const t=this.getSource()
t&&(this.sourceChangeKey_=(0,h.KT)(t,r.A.CHANGE,this.handleSourceChange_,this),"ready"===t.getState()&&(this.sourceReady_=!0,setTimeout((()=>{this.dispatchEvent("sourceready")}),0))),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return this.renderer_&&this.rendered?this.renderer_.getData(t):null}isVisible(t){let e
const n=this.getMapInternal()
let i
!t&&n&&(t=n.getView()),e=t instanceof a.default?{viewState:t.getState(),extent:t.calculateExtent()}:t,!e.layerStatesArray&&n&&(e.layerStatesArray=n.getLayerGroup().getLayerStatesArray()),i=e.layerStatesArray?e.layerStatesArray.find((t=>t.layer===this)):this.getLayerState()
const r=this.getExtent()
return f(i,e.viewState)&&(!r||(0,u.HY)(r,e.extent))}getAttributions(t){if(!this.isVisible(t))return[]
let e
const n=this.getSource()
if(n&&(e=n.getAttributions()),!e)return[]
let i=e(t instanceof a.default?t.getViewStateAndExtent():t)
return Array.isArray(i)||(i=[i]),i}render(t,e){const n=this.getRenderer()
return n.prepareFrame(t)?(this.rendered=!0,n.renderFrame(t,e)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(t,e){}renderDeferred(t){const e=this.getRenderer()
e&&e.renderDeferred(t)}setMapInternal(t){t||this.unrender(),this.set(o.A.MAP,t)}getMapInternal(){return this.get(o.A.MAP)}setMap(t){this.mapPrecomposeKey_&&((0,h.JH)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&((0,h.JH)(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=(0,h.KT)(t,s.A.PRECOMPOSE,(function(t){const e=t.frameState.layerStatesArray,n=this.getLayerState(!1);(0,l.v)(!e.some((function(t){return t.layer===n.layer})),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),e.push(n)}),this),this.mapRenderKey_=(0,h.KT)(this,r.A.CHANGE,t.render,t),this.changed())}setSource(t){this.set(o.A.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function f(t,e){if(!t.visible)return!1
const n=e.resolution
if(n<t.minResolution||n>=t.maxResolution)return!1
const i=e.zoom
return i>t.minZoom&&i<=t.maxZoom}const p=c},7439:(t,e,n)=>{"use strict"
n.d(e,{A:()=>i})
const i={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"}},3498:(t,e,n)=>{"use strict"
n.d(e,{A:()=>s})
var i=n(9043),r=n(6104)
class o extends i.A{constructor(t){super(t)}createRenderer(){return new r.A(this)}}const s=o},3035:(t,e,n)=>{"use strict"
n.d(e,{A:()=>i})
const i={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"}},5306:(t,e,n)=>{"use strict"
function i(t,e,n){return Math.min(Math.max(t,e),n)}function r(t,e,n,i,r,s){const a=r-n,l=s-i
if(0!==a||0!==l){const o=((t-n)*a+(e-i)*l)/(a*a+l*l)
o>1?(n=r,i=s):o>0&&(n+=a*o,i+=l*o)}return o(t,e,n,i)}function o(t,e,n,i){const r=n-t,o=i-e
return r*r+o*o}function s(t){const e=t.length
for(let i=0;i<e;i++){let n=i,r=Math.abs(t[i][i])
for(let s=i+1;s<e;s++){const e=Math.abs(t[s][i])
e>r&&(r=e,n=s)}if(0===r)return null
const o=t[n]
t[n]=t[i],t[i]=o
for(let s=i+1;s<e;s++){const n=-t[s][i]/t[i][i]
for(let r=i;r<e+1;r++)i==r?t[s][r]=0:t[s][r]+=n*t[i][r]}}const n=new Array(e)
for(let i=e-1;i>=0;i--){n[i]=t[i][e]/t[i][i]
for(let r=i-1;r>=0;r--)t[r][e]-=t[r][i]*n[i]}return n}function a(t){return t*Math.PI/180}function l(t,e){const n=t%e
return n*e<0?n+e:n}function u(t,e,n){return t+n*(e-t)}function h(t,e){const n=Math.pow(10,e)
return Math.round(t*n)/n}function c(t,e){return Math.round(h(t,e))}function f(t,e){return Math.floor(h(t,e))}function p(t,e){return Math.ceil(h(t,e))}n.d(e,{Cc:()=>u,KU:()=>s,LI:()=>c,Mg:()=>h,Q1:()=>r,RI:()=>f,eh:()=>a,hG:()=>o,mk:()=>p,qE:()=>i,xP:()=>l})},7931:(t,e,n)=>{"use strict"
function i(t){for(const e in t)delete t[e]}function r(t){let e
for(e in t)return!1
return!e}n.d(e,{I:()=>i,p:()=>r})},72:(t,e,n)=>{"use strict"
n.d(e,{Ig:()=>i.I,MF:()=>r,Av:()=>O,RJ:()=>T,tI:()=>D,Ad:()=>U,SD:()=>X,Jt:()=>R,hO:()=>L,RG:()=>k,FO:()=>F,Tf:()=>B,WP:()=>N,te:()=>q,JR:()=>Z,vN:()=>Y,pd:()=>j})
var i=n(3311)
const r=class{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||i.I[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}},o=6378137,s=Math.PI*o,a=[-s,-s,s,s],l=[-180,-85,180,85],u=o*Math.log(Math.tan(Math.PI/2))
class h extends r{constructor(t){super({code:t,units:"m",extent:a,global:!0,worldExtent:l,getPointResolution:function(t,e){return t/Math.cosh(e[1]/o)}})}}const c=[new h("EPSG:3857"),new h("EPSG:102100"),new h("EPSG:102113"),new h("EPSG:900913"),new h("http://www.opengis.net/def/crs/EPSG/0/3857"),new h("http://www.opengis.net/gml/srs/epsg.xml#3857")],f=[-180,-90,180,90],p=6378137*Math.PI/180
class d extends r{constructor(t,e){super({code:t,units:"degrees",extent:f,axisOrientation:e,global:!0,metersPerUnit:p,worldExtent:f})}}const g=[new d("CRS:84"),new d("EPSG:4326","neu"),new d("urn:ogc:def:crs:OGC:1.3:CRS84"),new d("urn:ogc:def:crs:OGC:2:84"),new d("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new d("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new d("http://www.opengis.net/def/crs/EPSG/0/4326","neu")]
let _={},m={}
function y(t,e,n){const i=t.getCode(),r=e.getCode()
i in m||(m[i]={}),m[i][r]=n}var v=n(3236),x=n(5306),b=n(8474)
const E=6371008.8
function w(t,e,n){n=n||E
const i=(0,x.eh)(t[1]),r=(0,x.eh)(e[1]),o=(r-i)/2,s=(0,x.eh)(e[0]-t[0])/2,a=Math.sin(o)*Math.sin(o)+Math.sin(s)*Math.sin(s)*Math.cos(i)*Math.cos(r)
return 2*n*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}var S=n(7307)
let C=!0
function T(t){C=!(void 0===t||t)}function I(t,e){if(void 0!==e)for(let n=0,i=t.length;n<i;++n)e[n]=t[n]
else e=t.slice()
return e}function P(t,e){if(void 0!==e&&t!==e){for(let n=0,i=t.length;n<i;++n)e[n]=t[n]
t=e}return t}function A(t){!function(t,e){_[t]=e}(t.getCode(),t),y(t,t,I)}function R(t){return"string"==typeof t?_[e=t]||_[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null:t||null
var e}function L(t,e,n,r){let o
const s=(t=R(t)).getPointResolutionFunc()
if(s){if(o=s(e,n),r&&r!==t.getUnits()){const e=t.getMetersPerUnit()
e&&(o=o*e/i.I[r])}}else{const s=t.getUnits()
if("degrees"==s&&!r||"degrees"==r)o=e
else{const a=F(t,R("EPSG:4326"))
if(a===P&&"degrees"!==s)o=e*t.getMetersPerUnit()
else{let t=[n[0]-e/2,n[1],n[0]+e/2,n[1],n[0],n[1]-e/2,n[0],n[1]+e/2]
t=a(t,t,2),o=(w(t.slice(0,2),t.slice(2,4))+w(t.slice(4,6),t.slice(6,8)))/2}const l=r?i.I[r]:t.getMetersPerUnit()
void 0!==l&&(o/=l)}}return o}function M(t){!function(t){t.forEach(A)}(t),t.forEach((function(e){t.forEach((function(t){e!==t&&y(e,t,I)}))}))}function O(t,e){return t?"string"==typeof t?R(t):t:R(e)}function N(t,e){const n=j(t,void 0!==e?e:"EPSG:3857","EPSG:4326"),i=n[0]
return(i<-180||i>180)&&(n[0]=(0,x.xP)(i+180,360)-180),n}function D(t,e){if(t===e)return!0
const n=t.getUnits()===e.getUnits()
return(t.getCode()===e.getCode()||F(t,e)===I)&&n}function F(t,e){let n=function(t,e){let n
return t in m&&e in m[t]&&(n=m[t][e]),n}(t.getCode(),e.getCode())
return n||(n=P),n}function k(t,e){return F(R(t),R(e))}function j(t,e,n){return k(e,n)(t,void 0,t.length)}function z(t,e,n,i){const r=k(e,n)
return(0,v.NW)(t,r,void 0,i)}let G=null
function B(){return G}function q(t,e){return G?j(t,e,G):t}function U(t,e){return G?j(t,G,e):(C&&!(0,b.aI)(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(C=!1,(0,S.R8)("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t)}function Z(t,e){return G?z(t,e,G):t}function X(t,e){return G?z(t,G,e):t}function Y(t,e){if(!G)return t
const n=R(e).getMetersPerUnit(),i=G.getMetersPerUnit()
return n&&i?t*n/i:t}var V,W,H
M(c),M(g),V=c,W=function(t,e,n){const i=t.length
n=n>1?n:2,void 0===e&&(e=n>2?t.slice():new Array(i))
for(let r=0;r<i;r+=n){e[r]=s*t[r]/180
let n=o*Math.log(Math.tan(Math.PI*(+t[r+1]+90)/360))
n>u?n=u:n<-u&&(n=-u),e[r+1]=n}return e},H=function(t,e,n){const i=t.length
n=n>1?n:2,void 0===e&&(e=n>2?t.slice():new Array(i))
for(let r=0;r<i;r+=n)e[r]=180*t[r]/s,e[r+1]=360*Math.atan(Math.exp(t[r+1]/o))/Math.PI-90
return e},g.forEach((function(t){V.forEach((function(e){y(t,e,W),y(e,t,H)}))}))},3311:(t,e,n)=>{"use strict"
n.d(e,{I:()=>o,q:()=>r})
const i={9001:"m",9002:"ft",9003:"us-ft",9101:"radians",9102:"degrees"}
function r(t){return i[t]}const o={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937}},7683:(t,e,n)=>{"use strict"
n.d(e,{A:()=>o})
var i=n(406)
class r extends i.Ay{constructor(t,e,n,i){super(t),this.inversePixelTransform=e,this.frameState=n,this.context=i}}const o=r},8411:(t,e,n)=>{"use strict"
n.d(e,{A:()=>i})
const i={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"}},9621:(t,e,n)=>{"use strict"
n.d(e,{Ay:()=>_})
var i=n(2282),r=n(3236),o=n(5216),s=n(7195),a=n(1129),l=n(72),u=n(3861),h=n(4900),c=n(9354),f=n(419),p=n(2363)
const d=(0,i.vt)()
class g{constructor(t,e,n,i,r,o){this.styleFunction,this.extent_,this.id_=o,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=n||null,this.properties_=r,this.squaredTolerance_,this.stride_=i,this.simplifiedGeometry_}get(t){return this.properties_[t]}getExtent(){return this.extent_||(this.extent_="Point"===this.type_?(0,r.dP)(this.flatCoordinates_):(0,r.Vy)(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const t=(0,r.q1)(this.getExtent())
this.flatInteriorPoints_=(0,a.J)(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const t=(0,u.yJ)(this.flatCoordinates_,this.ends_),e=(0,c.C)(this.flatCoordinates_,0,t,2)
this.flatInteriorPoints_=(0,a.p)(this.flatCoordinates_,0,t,2,e)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=(0,h.SH)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[]
const t=this.flatCoordinates_
let e=0
const n=this.ends_
for(let i=0,r=n.length;i<r;++i){const r=n[i],o=(0,h.SH)(t,e,r,2,.5);(0,s.X$)(this.flatMidpoints_,o),e=r}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(t){return this}simplifyTransformed(t,e){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(t){const e=(t=(0,l.Jt)(t)).getExtent(),n=t.getWorldExtent()
if(e&&n){const t=(0,r.Oq)(n)/(0,r.Oq)(e);(0,i.Zz)(d,n[0],n[3],t,-t,0,0,0),(0,p.Rc)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,d,this.flatCoordinates_)}}applyTransform(t){t(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new g(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=(0,f.B4)(((t,e)=>{if(t===this.squaredTolerance_)return this.simplifiedGeometry_
this.simplifiedGeometry_=this.clone(),e&&this.simplifiedGeometry_.applyTransform(e)
const n=this.simplifiedGeometry_.getFlatCoordinates()
let i
switch(this.type_){case"LineString":n.length=(0,o.P4)(n,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,t,n,0),i=[n.length]
break
case"MultiLineString":i=[],n.length=(0,o.AL)(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,t,n,0,i)
break
case"Polygon":i=[],n.length=(0,o.Hg)(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(t),n,0,i)}return i&&(this.simplifiedGeometry_=new g(this.type_,n,i,2,this.properties_,this.id_)),this.squaredTolerance_=t,this.simplifiedGeometry_})),this}}g.prototype.getFlatCoordinates=g.prototype.getOrientedFlatCoordinates
const _=g},223:(t,e,n)=>{"use strict"
n.d(e,{Jw:()=>R,M8:()=>m,MY:()=>_,NT:()=>g,Oq:()=>c,TA:()=>P,Tq:()=>y,ZV:()=>l,_K:()=>p,_m:()=>h,aq:()=>v,eL:()=>d,fZ:()=>S,jT:()=>A,qY:()=>u,vk:()=>f,yY:()=>x})
var i=n(1051),r=n(1622),o=n(7931),s=n(8454),a=n(8877)
const l="10px sans-serif",u="#000",h="round",c=[],f=0,p="round",d=10,g="#000",_="center",m="middle",y=[0,0,0,0],v=1,x=new i.A
let b,E=null
const w={},S=function(){const t="32px ",e=["monospace","serif"],n=e.length,i="wmytzilWMYTZIL@#/&?$%10"
let r,s
function l(r,o,a){let l=!0
for(let u=0;u<n;++u){const n=e[u]
if(s=I(r+" "+o+" "+t+n,i),a!=n){const e=I(r+" "+o+" "+t+a+","+n,i)
l=l&&e!=s}}return!!l}function u(){let t=!0
const e=x.getKeys()
for(let n=0,i=e.length;n<i;++n){const i=e[n]
x.get(i)<100&&(l.apply(this,i.split("\n"))?((0,o.I)(w),E=null,b=void 0,x.set(i,100)):(x.set(i,x.get(i)+1,!0),t=!1))}t&&(clearInterval(r),r=void 0)}return function(t){const e=(0,a.K5)(t)
if(!e)return
const n=e.families
for(let i=0,o=n.length;i<o;++i){const t=n[i],o=e.style+"\n"+e.weight+"\n"+t
void 0===x.get(o)&&(x.set(o,100,!0),l(e.style,e.weight,t)||(x.set(o,0,!0),void 0===r&&(r=setInterval(u,32))))}}}(),C=function(){let t
return function(e){let n=w[e]
if(null==n){if(r.Wl){const t=(0,a.K5)(e),i=T(e,"g")
n=(isNaN(Number(t.lineHeight))?1.2:Number(t.lineHeight))*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else t||(t=document.createElement("div"),t.innerHTML="M",t.style.minHeight="0",t.style.maxHeight="none",t.style.height="auto",t.style.padding="0",t.style.border="none",t.style.position="absolute",t.style.display="block",t.style.left="-99999px"),t.style.font=e,document.body.appendChild(t),n=t.offsetHeight,document.body.removeChild(t)
w[e]=n}return n}}()
function T(t,e){return E||(E=(0,s.Y)(1,1)),t!=b&&(E.font=t,b=E.font),E.measureText(e)}function I(t,e){return T(t,e).width}function P(t,e,n){if(e in n)return n[e]
const i=e.split("\n").reduce(((e,n)=>Math.max(e,I(t,n))),0)
return n[e]=i,i}function A(t,e){const n=[],i=[],r=[]
let o=0,s=0,a=0,l=0
for(let u=0,h=e.length;u<=h;u+=2){const c=e[u]
if("\n"===c||u===h){o=Math.max(o,s),r.push(s),s=0,a+=l
continue}const f=e[u+1]||t.font,p=I(f,c)
n.push(p),s+=p
const d=C(f)
i.push(d),l=Math.max(l,d)}return{width:o,height:a,widths:n,heights:i,lineWidths:r}}function R(t,e,n,i,r,o,s,a,l,u,h){t.save(),1!==n&&(void 0===t.globalAlpha?t.globalAlpha=t=>t.globalAlpha*=n:t.globalAlpha*=n),e&&t.transform.apply(t,e),i.contextInstructions?(t.translate(l,u),t.scale(h[0],h[1]),function(t,e){const n=t.contextInstructions
for(let i=0,r=n.length;i<r;i+=2)Array.isArray(n[i+1])?e[n[i]].apply(e,n[i+1]):e[n[i]]=n[i+1]}(i,t)):h[0]<0||h[1]<0?(t.translate(l,u),t.scale(h[0],h[1]),t.drawImage(i,r,o,s,a,0,0,s,a)):t.drawImage(i,r,o,s,a,l,u,s*h[0],a*h[1]),t.restore()}},6733:(t,e,n)=>{"use strict"
n.d(e,{A:()=>r})
var i=n(8454)
const r=class{constructor(){var t,e,n,r
t=this,n=(...t)=>(this.instructions_[this.zIndex+this.offset_].push(t),this),(e="symbol"==typeof(r=function(t,e){if("object"!=typeof t||!t)return t
var n=t[Symbol.toPrimitive]
if(void 0!==n){var i=n.call(t,"string")
if("object"!=typeof i)return i
throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e="pushMethodArgs_"))?r:r+"")in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(CanvasRenderingContext2D.prototype,{get:(t,e)=>{if("function"==typeof(0,i.lr)()[e])return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(e),this.pushMethodArgs_},set:(t,e,n)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(e,n),!0)})}getContext(){return this.context_}draw(t){this.instructions_.forEach((e=>{for(let n=0,i=e.length;n<i;n+=2){const i=e[n],r=e[n+1]
if("function"==typeof t[i])t[i](...r)
else{if("function"==typeof r){t[i]=r(t)
continue}t[i]=r}}}))}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}},5097:(t,e,n)=>{"use strict"
n.d(e,{A:()=>l})
var i=n(8638),r=n(1410),o=n(8197),s=n(1736)
class a extends o.A{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.declutterExecutorGroup=null}getFeatures(t){return(0,s.b0)()}getData(t){return null}prepareFrame(t){return(0,s.b0)()}renderFrame(t,e){return(0,s.b0)()}loadedTileCallback(t,e,n){t[e]||(t[e]={}),t[e][n.tileCoord.toString()]=n}createLoadedTileFinder(t,e,n){return(i,r)=>{const o=this.loadedTileCallback.bind(this,n,i)
return t.forEachLoadedTile(e,i,r,o)}}forEachFeatureAtCoordinate(t,e,n,i,r){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){const e=t.target
e.getState()!==r.A.LOADED&&e.getState()!==r.A.ERROR||this.renderIfReadyAndVisible()}loadImage(t){let e=t.getState()
return e!=r.A.LOADED&&e!=r.A.ERROR&&t.addEventListener(i.A.CHANGE,this.boundHandleImageChange_),e==r.A.IDLE&&(t.load(),e=t.getState()),e==r.A.LOADED}renderIfReadyAndVisible(){const t=this.getLayer()
t&&t.getVisible()&&"ready"===t.getSourceState()&&t.changed()}renderDeferred(t){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const l=a},8247:(t,e,n)=>{"use strict"
n.d(e,{A:()=>h})
var i=n(1500),r=n(1410),o=n(5548),s=n(2282),a=n(3236),l=n(72)
class u extends i.A{constructor(t){super(t),this.image_=null}getImage(){return this.image_?this.image_.getImage():null}prepareFrame(t){const e=t.layerStatesArray[t.layerIndex],n=t.pixelRatio,i=t.viewState,s=i.resolution,u=this.getLayer().getSource(),h=t.viewHints
let c=t.extent
if(void 0!==e.extent&&(c=(0,a._N)(c,(0,l.SD)(e.extent,i.projection))),!h[o.A.ANIMATING]&&!h[o.A.INTERACTING]&&!(0,a.Im)(c))if(u){const t=i.projection,e=u.getImage(c,s,n,t)
e&&(this.loadImage(e)?this.image_=e:e.getState()===r.A.EMPTY&&(this.image_=null))}else this.image_=null
return!!this.image_}getData(t){const e=this.frameState
if(!e)return null
const n=this.getLayer(),i=(0,s.Bb)(e.pixelToCoordinateTransform,t.slice()),r=n.getExtent()
if(r&&!(0,a.Ym)(r,i))return null
const o=this.image_.getExtent(),l=this.image_.getImage(),u=(0,a.RG)(o),h=Math.floor(l.width*((i[0]-o[0])/u))
if(h<0||h>=l.width)return null
const c=(0,a.Oq)(o),f=Math.floor(l.height*((o[3]-i[1])/c))
return f<0||f>=l.height?null:this.getImageData(l,h,f)}renderFrame(t,e){const n=this.image_,i=n.getExtent(),r=n.getResolution(),[o,u]=Array.isArray(r)?r:[r,r],h=n.getPixelRatio(),c=t.layerStatesArray[t.layerIndex],f=t.pixelRatio,p=t.viewState,d=p.center,g=p.resolution,_=f*o/(g*h),m=f*u/(g*h),y=t.extent,v=p.resolution,x=p.rotation,b=Math.round((0,a.RG)(y)/v*f),E=Math.round((0,a.Oq)(y)/v*f);(0,s.Zz)(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/f,1/f,x,-b/2,-E/2),(0,s.T9)(this.inversePixelTransform,this.pixelTransform)
const w=(0,s.dI)(this.pixelTransform)
this.useContainer(e,w,this.getBackground(t))
const S=this.getRenderContext(t),C=this.context.canvas
C.width!=b||C.height!=E?(C.width=b,C.height=E):this.containerReused||S.clearRect(0,0,b,E)
let T=!1,I=!0
if(c.extent){const e=(0,l.SD)(c.extent,p.projection)
I=(0,a.HY)(e,t.extent),T=I&&!(0,a.ms)(e,t.extent),T&&this.clipUnrotated(S,t,e)}const P=n.getImage(),A=(0,s.Zz)(this.tempTransform,b/2,E/2,_,m,0,h*(i[0]-d[0])/o,h*(d[1]-i[3])/u)
this.renderedResolution=u*f/h
const R=P.width*A[0],L=P.height*A[3]
if(this.getLayer().getSource().getInterpolate()||(S.imageSmoothingEnabled=!1),this.preRender(S,t),I&&R>=.5&&L>=.5){const t=A[4],e=A[5],n=c.opacity
1!==n&&(S.save(),S.globalAlpha=n),S.drawImage(P,0,0,+P.width,+P.height,t,e,R,L),1!==n&&S.restore()}return this.postRender(this.context,t),T&&S.restore(),S.imageSmoothingEnabled=!0,w!==C.style.transform&&(C.style.transform=w),this.container}}const h=u},1500:(t,e,n)=>{"use strict"
n.d(e,{A:()=>g,B:()=>f})
var i=n(5097),r=n(7683),o=n(8411),s=n(6733),a=n(2282),l=n(659),u=n(8454),h=n(7195),c=n(3236)
const f=[]
let p=null
class d extends i.A{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=(0,a.vt)(),this.pixelTransform=(0,a.vt)(),this.inversePixelTransform=(0,a.vt)(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(t,e,n){let i
p||(p=(0,u.Y)(1,1,void 0,{willReadFrequently:!0})),p.clearRect(0,0,1,1)
try{p.drawImage(t,e,n,1,1,0,0,1,1),i=p.getImageData(0,0,1,1).data}catch(t){return p=null,null}return i}getBackground(t){let e=this.getLayer().getBackground()
return"function"==typeof e&&(e=e(t.viewState.resolution)),e||void 0}useContainer(t,e,n){const i=this.getLayer().getClassName()
let r,o
if(t&&t.className===i&&(!n||t&&t.style.backgroundColor&&(0,h.aI)((0,l._j)(t.style.backgroundColor),(0,l._j)(n)))){const e=t.firstElementChild
e instanceof HTMLCanvasElement&&(o=e.getContext("2d"))}if(o&&o.canvas.style.transform===e?(this.container=t,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){r=document.createElement("div"),r.className=i
let t=r.style
t.position="absolute",t.width="100%",t.height="100%",o=(0,u.Y)()
const e=o.canvas
r.appendChild(e),t=e.style,t.position="absolute",t.left="0",t.transformOrigin="top left",this.container=r,this.context=o}this.containerReused||!n||this.container.style.backgroundColor||(this.container.style.backgroundColor=n)}clipUnrotated(t,e,n){const i=(0,c.Py)(n),r=(0,c.WU)(n),o=(0,c.k_)(n),s=(0,c.R)(n);(0,a.Bb)(e.coordinateToPixelTransform,i),(0,a.Bb)(e.coordinateToPixelTransform,r),(0,a.Bb)(e.coordinateToPixelTransform,o),(0,a.Bb)(e.coordinateToPixelTransform,s)
const l=this.inversePixelTransform;(0,a.Bb)(l,i),(0,a.Bb)(l,r),(0,a.Bb)(l,o),(0,a.Bb)(l,s),t.save(),t.beginPath(),t.moveTo(Math.round(i[0]),Math.round(i[1])),t.lineTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.clip()}dispatchRenderEvent_(t,e,n){const i=this.getLayer()
if(i.hasListener(t)){const o=new r.A(t,this.inversePixelTransform,n,e)
i.dispatchEvent(o)}}preRender(t,e){this.frameState=e,e.declutter||this.dispatchRenderEvent_(o.A.PRERENDER,t,e)}postRender(t,e){e.declutter||this.dispatchRenderEvent_(o.A.POSTRENDER,t,e)}renderDeferredInternal(t){}getRenderContext(t){return t.declutter&&!this.deferredContext_&&(this.deferredContext_=new s.A),t.declutter?this.deferredContext_.getContext():this.context}renderDeferred(t){t.declutter&&(this.dispatchRenderEvent_(o.A.PRERENDER,this.context,t),t.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(t),this.dispatchRenderEvent_(o.A.POSTRENDER,this.context,t))}getRenderTransform(t,e,n,i,r,o,s){const l=r/2,u=o/2,h=i/e,c=-h,f=-t[0]+s,p=-t[1]
return(0,a.Zz)(this.tempTransform,l,u,h,c,-n,f,p)}disposeInternal(){delete this.frameState,super.disposeInternal()}}const g=d},6104:(t,e,n)=>{"use strict"
n.d(e,{A:()=>g})
var i=n(1500),r=n(519),o=n(7893),s=n(5959),a=n(699),l=n(2282),u=n(7195),h=n(3236),c=n(72),f=n(1736),p=n(1673)
class d extends i.A{constructor(t){super(t),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=(0,h.S5)(),this.tmpTileRange_=new s.A(0,0,0,0)}isDrawableTile(t){const e=this.getLayer(),n=t.getState(),i=e.getUseInterimTilesOnError()
return n==a.A.LOADED||n==a.A.EMPTY||n==a.A.ERROR&&!i}getTile(t,e,n,i){const r=i.pixelRatio,o=i.viewState.projection,s=this.getLayer()
let l=s.getSource().getTile(t,e,n,r,o)
return l.getState()==a.A.ERROR&&s.getUseInterimTilesOnError()&&s.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(l)||(l=l.getInterimTile()),l}getData(t){const e=this.frameState
if(!e)return null
const n=this.getLayer(),i=(0,l.Bb)(e.pixelToCoordinateTransform,t.slice()),s=n.getExtent()
if(s&&!(0,h.Ym)(s,i))return null
const u=e.pixelRatio,c=e.viewState.projection,f=e.viewState,d=n.getRenderSource(),g=d.getTileGridForProjection(f.projection),_=d.getTilePixelRatio(e.pixelRatio)
for(let l=g.getZForResolution(f.resolution);l>=g.getMinZoom();--l){const t=g.getTileCoordForCoordAndZ(i,l),e=d.getTile(l,t[1],t[2],u,c)
if(!(e instanceof r.A||e instanceof o.A)||e instanceof o.A&&e.getState()===a.A.EMPTY)return null
if(e.getState()!==a.A.LOADED)continue
const n=g.getOrigin(l),s=(0,p.xq)(g.getTileSize(l)),h=g.getResolution(l),m=Math.floor(_*((i[0]-n[0])/h-t[1]*s[0])),y=Math.floor(_*((n[1]-i[1])/h-t[2]*s[1])),v=Math.round(_*d.getGutterForProjection(f.projection))
return this.getImageData(e.getImage(),m+v,y+v)}return null}loadedTileCallback(t,e,n){return!!this.isDrawableTile(n)&&super.loadedTileCallback(t,e,n)}prepareFrame(t){return!!this.getLayer().getSource()}renderFrame(t,e){const n=t.layerStatesArray[t.layerIndex],i=t.viewState,r=i.projection,o=i.resolution,s=i.center,p=i.rotation,d=t.pixelRatio,g=this.getLayer(),_=g.getSource(),m=_.getRevision(),y=_.getTileGridForProjection(r),v=y.getZForResolution(o,_.zDirection),x=y.getResolution(v)
let b=t.extent
const E=t.viewState.resolution,w=_.getTilePixelRatio(d),S=Math.round((0,h.RG)(b)/E*d),C=Math.round((0,h.Oq)(b)/E*d),T=n.extent&&(0,c.SD)(n.extent,r)
T&&(b=(0,h._N)(b,(0,c.SD)(n.extent,r)))
const I=x*S/2/w,P=x*C/2/w,A=[s[0]-I,s[1]-P,s[0]+I,s[1]+P],R=y.getTileRangeForExtentAndZ(b,v),L={}
L[v]={}
const M=this.createLoadedTileFinder(_,r,L),O=this.tmpExtent,N=this.tmpTileRange_
this.newTiles_=!1
const D=p?(0,h.Yw)(i.center,E,p,t.size):void 0
for(let l=R.minX;l<=R.maxX;++l)for(let e=R.minY;e<=R.maxY;++e){if(p&&!y.tileCoordIntersectsViewport([v,l,e],D))continue
const i=this.getTile(v,l,e,t)
if(this.isDrawableTile(i)){const e=(0,f.v6)(this)
if(i.getState()==a.A.LOADED){L[v][i.tileCoord.toString()]=i
let t=i.inTransition(e)
t&&1!==n.opacity&&(i.endTransition(e),t=!1),this.newTiles_||!t&&this.renderedTiles.includes(i)||(this.newTiles_=!0)}if(1===i.getAlpha(e,t.time))continue}const r=y.getTileCoordChildTileRange(i.tileCoord,N,O)
let o=!1
r&&(o=M(v+1,r)),o||y.forEachTileCoordParentTileRange(i.tileCoord,M,N,O)}const F=x/o*d/w;(0,l.Zz)(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/d,1/d,p,-S/2,-C/2)
const k=(0,l.dI)(this.pixelTransform)
this.useContainer(e,k,this.getBackground(t))
const j=this.getRenderContext(t),z=this.context.canvas;(0,l.T9)(this.inversePixelTransform,this.pixelTransform),(0,l.Zz)(this.tempTransform,S/2,C/2,F,F,0,-S/2,-C/2),z.width!=S||z.height!=C?(z.width=S,z.height=C):this.containerReused||j.clearRect(0,0,S,C),T&&this.clipUnrotated(j,t,T),_.getInterpolate()||(j.imageSmoothingEnabled=!1),this.preRender(j,t),this.renderedTiles.length=0
let G,B,q,U=Object.keys(L).map(Number)
U.sort(u.V_),1!==n.opacity||this.containerReused&&!_.getOpaque(t.viewState.projection)?(G=[],B=[]):U=U.reverse()
for(let a=U.length-1;a>=0;--a){const e=U[a],n=_.getTilePixelSize(e,d,r),i=y.getResolution(e)/x,o=n[0]*i*F,s=n[1]*i*F,u=y.getTileCoordForCoordAndZ((0,h.Py)(A),e),c=y.getTileCoordExtent(u),p=(0,l.Bb)(this.tempTransform,[w*(c[0]-A[0])/x,w*(A[3]-c[3])/x]),g=w*_.getGutterForProjection(r),m=L[e]
for(const r in m){const n=m[r],i=n.tileCoord,a=u[1]-i[1],l=Math.round(p[0]-(a-1)*o),c=u[2]-i[2],d=Math.round(p[1]-(c-1)*s),y=Math.round(p[0]-a*o),x=Math.round(p[1]-c*s),b=l-y,E=d-x,w=v===e,S=w&&1!==n.getAlpha((0,f.v6)(this),t.time)
let C=!1
if(!S)if(G){q=[y,x,y+b,x,y+b,x+E,y,x+E]
for(let t=0,n=G.length;t<n;++t)if(v!==e&&e<B[t]){const e=G[t];(0,h.HY)([y,x,y+b,x+E],[e[0],e[3],e[4],e[7]])&&(C||(j.save(),C=!0),j.beginPath(),j.moveTo(q[0],q[1]),j.lineTo(q[2],q[3]),j.lineTo(q[4],q[5]),j.lineTo(q[6],q[7]),j.moveTo(e[6],e[7]),j.lineTo(e[4],e[5]),j.lineTo(e[2],e[3]),j.lineTo(e[0],e[1]),j.clip())}G.push(q),B.push(e)}else j.clearRect(y,x,b,E)
this.drawTileImage(n,t,y,x,b,E,g,w),G&&!S?(C&&j.restore(),this.renderedTiles.unshift(n)):this.renderedTiles.push(n),this.updateUsedTiles(t.usedTiles,_,n)}}return this.renderedRevision=m,this.renderedResolution=x,this.extentChanged=!this.renderedExtent_||!(0,h.aI)(this.renderedExtent_,A),this.renderedExtent_=A,this.renderedPixelRatio=d,this.renderedProjection=r,this.manageTilePyramid(t,_,y,d,r,b,v,g.getPreload()),this.scheduleExpireCache(t,_),this.postRender(this.context,t),n.extent&&j.restore(),j.imageSmoothingEnabled=!0,k!==z.style.transform&&(z.style.transform=k),this.container}drawTileImage(t,e,n,i,r,o,s,a){const l=this.getTileImage(t)
if(!l)return
const u=this.getRenderContext(e),h=(0,f.v6)(this),c=e.layerStatesArray[e.layerIndex],p=c.opacity*(a?t.getAlpha(h,e.time):1),d=p!==u.globalAlpha
d&&(u.save(),u.globalAlpha=p),u.drawImage(l,s,s,l.width-2*s,l.height-2*s,n,i,r,o),d&&u.restore(),p!==c.opacity?e.animate=!0:a&&t.endTransition(h)}getImage(){const t=this.context
return t?t.canvas:null}getTileImage(t){return t.getImage()}scheduleExpireCache(t,e){if(e.canExpireCache()){const n=function(t,e,n){const i=(0,f.v6)(t)
i in n.usedTiles&&t.expireCache(n.viewState.projection,n.usedTiles[i])}.bind(null,e)
t.postRenderFunctions.push(n)}}updateUsedTiles(t,e,n){const i=(0,f.v6)(e)
i in t||(t[i]={}),t[i][n.getKey()]=!0}manageTilePyramid(t,e,n,i,r,o,s,l,u){const c=(0,f.v6)(e)
c in t.wantedTiles||(t.wantedTiles[c]={})
const p=t.wantedTiles[c],d=t.tileQueue,g=n.getMinZoom(),_=t.viewState.rotation,m=_?(0,h.Yw)(t.viewState.center,t.viewState.resolution,_,t.size):void 0
let y,v,x,b,E,w,S=0
for(w=g;w<=s;++w)for(v=n.getTileRangeForExtentAndZ(o,w,v),x=n.getResolution(w),b=v.minX;b<=v.maxX;++b)for(E=v.minY;E<=v.maxY;++E)_&&!n.tileCoordIntersectsViewport([w,b,E],m)||(s-w<=l?(++S,y=e.getTile(w,b,E,i,r),y.getState()==a.A.IDLE&&(p[y.getKey()]=!0,d.isKeyQueued(y.getKey())||d.enqueue([y,c,n.getTileCoordCenter(y.tileCoord),x])),void 0!==u&&u(y)):e.useTile(w,b,E,r))
e.updateCacheSize(S,r)}}const g=d},6582:(t,e,n)=>{"use strict"
n.d(e,{BV:()=>l,KQ:()=>c,XX:()=>p,aY:()=>f})
var i=n(3236),r=n(8454),o=n(72),s=n(5306)
let a
const l=[]
function u(t,e,n,i,r){t.beginPath(),t.moveTo(0,0),t.lineTo(e,n),t.lineTo(i,r),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,i)+1,Math.max(n,r)),t.restore()}function h(t,e){return Math.abs(t[4*e]-210)>2||Math.abs(t[4*e+3]-191.25)>2}function c(t,e,n,r){const s=(0,o.pd)(n,e,t)
let a=(0,o.hO)(e,r,n)
const l=e.getMetersPerUnit()
void 0!==l&&(a*=l)
const u=t.getMetersPerUnit()
void 0!==u&&(a/=u)
const h=t.getExtent()
if(!h||(0,i.Ym)(h,s)){const e=(0,o.hO)(t,a,s)/a
isFinite(e)&&e>0&&(a/=e)}return a}function f(t,e,n,r){const o=(0,i.q1)(n)
let s=c(t,e,o,r)
return(!isFinite(s)||s<=0)&&(0,i.sB)(n,(function(n){return s=c(t,e,n,r),isFinite(s)&&s>0})),s}function p(t,e,n,o,c,f,p,d,g,_,m,y,v,x){const b=(0,r.Y)(Math.round(n*t),Math.round(n*e),l)
if(y||(b.imageSmoothingEnabled=!1),0===g.length)return b.canvas
function E(t){return Math.round(t*n)/n}b.scale(n,n),b.globalCompositeOperation="lighter"
const w=(0,i.S5)()
let S
g.forEach((function(t,e,n){(0,i.X$)(w,t.extent)}))
const C=n/o,T=(y?1:1+Math.pow(2,-24))/C
if(!v||1!==g.length||0!==_){if(S=(0,r.Y)(Math.round((0,i.RG)(w)*C),Math.round((0,i.Oq)(w)*C),l),y||(S.imageSmoothingEnabled=!1),c&&x){const t=(c[0]-w[0])*C,e=-(c[3]-w[3])*C,n=(0,i.RG)(c)*C,r=(0,i.Oq)(c)*C
S.rect(t,e,n,r),S.clip()}g.forEach((function(t,e,n){const r=(t.extent[0]-w[0])*C,o=-(t.extent[3]-w[3])*C,s=(0,i.RG)(t.extent)*C,a=(0,i.Oq)(t.extent)*C
t.image.width>0&&t.image.height>0&&S.drawImage(t.image,_,_,t.image.width-2*_,t.image.height-2*_,y?r:Math.round(r),y?o:Math.round(o),y?s:Math.round(r+s)-Math.round(r),y?a:Math.round(o+a)-Math.round(o))}))}const I=(0,i.Py)(p)
return d.getTriangles().forEach((function(t,e,n){const o=t.source,c=t.target
let p=o[0][0],d=o[0][1],_=o[1][0],m=o[1][1],v=o[2][0],x=o[2][1]
const C=E((c[0][0]-I[0])/f),P=E(-(c[0][1]-I[1])/f),A=E((c[1][0]-I[0])/f),R=E(-(c[1][1]-I[1])/f),L=E((c[2][0]-I[0])/f),M=E(-(c[2][1]-I[1])/f),O=p,N=d
p=0,d=0,_-=O,m-=N,v-=O,x-=N
const D=[[_,m,0,0,A-C],[v,x,0,0,L-C],[0,0,_,m,R-P],[0,0,v,x,M-P]],F=(0,s.KU)(D)
if(!F)return
if(b.save(),b.beginPath(),function(){if(void 0===a){const t=(0,r.Y)(6,6,l)
t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",u(t,4,5,4,0),u(t,4,5,0,5)
const e=t.getImageData(0,0,3,3).data
a=h(e,0)||h(e,4)||h(e,8),(0,r.Yg)(t),l.push(t.canvas)}return a}()||!y){b.moveTo(A,R)
const t=4,e=C-A,n=P-R
for(let i=0;i<t;i++)b.lineTo(A+E((i+1)*e/t),R+E(i*n/(t-1))),i!=t-1&&b.lineTo(A+E((i+1)*e/t),R+E((i+1)*n/(t-1)))
b.lineTo(L,M)}else b.moveTo(A,R),b.lineTo(C,P),b.lineTo(L,M)
let k
if(b.clip(),b.transform(F[0],F[2],F[1],F[3],C,P),b.translate(w[0]-O,w[3]-N),S)k=S.canvas,b.scale(T,-T)
else{const t=g[0],e=t.extent
k=t.image,b.scale((0,i.RG)(e)/k.width,-(0,i.Oq)(e)/k.height)}b.drawImage(k,0,0),b.restore()})),S&&((0,r.Yg)(S),l.push(S.canvas)),m&&(b.save(),b.globalCompositeOperation="source-over",b.strokeStyle="black",b.lineWidth=1,d.getTriangles().forEach((function(t,e,n){const i=t.target,r=(i[0][0]-I[0])/f,o=-(i[0][1]-I[1])/f,s=(i[1][0]-I[0])/f,a=-(i[1][1]-I[1])/f,l=(i[2][0]-I[0])/f,u=-(i[2][1]-I[1])/f
b.beginPath(),b.moveTo(s,a),b.lineTo(r,o),b.lineTo(l,u),b.closePath(),b.stroke()})),b.restore()),b.canvas}},5733:(t,e,n)=>{"use strict"
n.d(e,{A:()=>d})
var i=n(7028),r=n(2272),o=n(8638),s=n(699),a=n(7486),l=n(6582),u=n(5306),h=n(8454),c=n(3236),f=n(4757)
class p extends r.Ay{constructor(t){super({tileCoord:t.tileCoord,loader:()=>Promise.resolve(new Uint8Array(4)),interpolate:t.interpolate,transition:t.transition}),this.pixelRatio_=t.pixelRatio,this.gutter_=t.gutter,this.reprojData_=null,this.reprojError_=null,this.reprojSize_=void 0,this.sourceTileGrid_=t.sourceTileGrid,this.targetTileGrid_=t.targetTileGrid,this.wrappedTileCoord_=t.wrappedTileCoord||t.tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0
const e=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),n=this.targetTileGrid_.getExtent()
let r=this.sourceTileGrid_.getExtent()
const o=n?(0,c._N)(e,n):e
if(0===(0,c.UG)(o))return void(this.state=s.A.EMPTY)
const h=t.sourceProj,f=h.getExtent()
f&&(r=r?(0,c._N)(r,f):f)
const p=this.targetTileGrid_.getResolution(this.wrappedTileCoord_[0]),d=t.targetProj,g=(0,l.aY)(h,d,o,p)
if(!isFinite(g)||g<=0)return void(this.state=s.A.EMPTY)
const _=void 0!==t.errorThreshold?t.errorThreshold:i.l
if(this.triangulation_=new a.A(h,d,o,r,g*_,p),0===this.triangulation_.getTriangles().length)return void(this.state=s.A.EMPTY)
this.sourceZ_=this.sourceTileGrid_.getZForResolution(g)
let m=this.triangulation_.calculateSourceExtent()
if(r&&(h.canWrapX()?(m[1]=(0,u.qE)(m[1],r[1],r[3]),m[3]=(0,u.qE)(m[3],r[1],r[3])):m=(0,c._N)(m,r)),(0,c.UG)(m)){const e=this.sourceTileGrid_.getTileRangeForExtentAndZ(m,this.sourceZ_),n=t.getTileFunction
for(let t=e.minX;t<=e.maxX;t++)for(let i=e.minY;i<=e.maxY;i++){const e=n(this.sourceZ_,t,i,this.pixelRatio_)
e&&this.sourceTiles_.push(e)}0===this.sourceTiles_.length&&(this.state=s.A.EMPTY)}else this.state=s.A.EMPTY}getSize(){return this.reprojSize_}getData(){return this.reprojData_}getError(){return this.reprojError_}reproject_(){const t=[]
if(this.sourceTiles_.forEach((e=>{if(!e||e.getState()!==s.A.LOADED)return
const n=e.getSize(),i=this.gutter_
let o
o=(0,r.bL)(e.getData())||(0,r.$r)((0,r.xo)(e.getData()))
const a=[n[0]+2*i,n[1]+2*i],l=o instanceof Float32Array,u=a[0]*a[1],h=l?Float32Array:Uint8Array,c=new h(o.buffer),f=h.BYTES_PER_ELEMENT,p=f*c.length/u,d=c.byteLength/a[1],g=Math.floor(d/f/a[0]),_=u*g
let m=c
if(c.length!==_){m=new h(_)
let t=0,e=0
const n=a[0]*g
for(let i=0;i<a[1];++i){for(let i=0;i<n;++i)m[t++]=c[e+i]
e+=d/f}}t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),data:new Uint8Array(m.buffer),dataType:h,bytesPerPixel:p,pixelSize:a})})),this.sourceTiles_.length=0,0===t.length)this.state=s.A.ERROR
else{const e=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(e),i="number"==typeof n?n:n[0],r="number"==typeof n?n:n[1],o=this.targetTileGrid_.getResolution(e),a=this.sourceTileGrid_.getResolution(this.sourceZ_),u=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_)
let c,f
const p=t[0].bytesPerPixel
for(let s=Math.ceil(p/3)-1;s>=0;--s){const e=[]
for(let i=0,r=t.length;i<r;++i){const n=t[i],r=n.data,o=n.pixelSize,a=o[0],u=o[1],c=(0,h.Y)(a,u,l.BV),f=c.createImageData(a,u),d=f.data
let g=3*s
for(let t=0,e=d.length;t<e;t+=4)d[t]=r[g],d[t+1]=r[g+1],d[t+2]=r[g+2],d[t+3]=255,g+=p
c.putImageData(f,0,0),e.push({extent:n.extent,image:c.canvas})}const n=(0,l.XX)(i,r,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,u,this.triangulation_,e,this.gutter_,!1,!1,!1,!0)
for(let t=0,i=e.length;t<i;++t){const n=e[t].image.getContext("2d");(0,h.Yg)(n),l.BV.push(n.canvas)}const d=n.getContext("2d"),g=d.getImageData(0,0,n.width,n.height);(0,h.Yg)(d),l.BV.push(n),c||(f=new Uint8Array(p*g.width*g.height),c=new t[0].dataType(f.buffer))
const _=g.data
let m=3*s
for(let t=0,i=_.length;t<i;t+=4)255===_[t+3]?(f[m]=_[t],f[m+1]=_[t+1],f[m+2]=_[t+2]):(f[m]=0,f[m+1]=0,f[m+2]=0),m+=p}this.reprojData_=c,this.reprojSize_=[Math.round(i*this.pixelRatio_),Math.round(r*this.pixelRatio_)],this.state=s.A.LOADED}this.changed()}load(){if(this.state!==s.A.IDLE&&this.state!==s.A.ERROR)return
this.state=s.A.LOADING,this.changed()
let t=0
this.sourcesListenerKeys_=[],this.sourceTiles_.forEach((e=>{const n=e.getState()
if(n!==s.A.IDLE&&n!==s.A.LOADING)return
t++
const i=(0,f.KT)(e,o.A.CHANGE,(function(){const n=e.getState()
n!=s.A.LOADED&&n!=s.A.ERROR&&n!=s.A.EMPTY||((0,f.JH)(i),t--,0===t&&(this.unlistenSources_(),this.reproject_()))}),this)
this.sourcesListenerKeys_.push(i)})),0===t?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach((function(t){t.getState()==s.A.IDLE&&t.load()}))}unlistenSources_(){this.sourcesListenerKeys_.forEach(f.JH),this.sourcesListenerKeys_=null}}const d=p},7893:(t,e,n)=>{"use strict"
n.d(e,{A:()=>d})
var i=n(7028),r=n(8638),o=n(7912),s=n(699),a=n(7486),l=n(6582),u=n(5306),h=n(3236),c=n(4757),f=n(8454)
class p extends o.A{constructor(t,e,n,r,o,c,f,p,d,g,_,m){super(o,s.A.IDLE,m),this.renderEdges_=void 0!==_&&_,this.pixelRatio_=f,this.gutter_=p,this.canvas_=null,this.sourceTileGrid_=e,this.targetTileGrid_=r,this.wrappedTileCoord_=c||o,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0
const y=r.getTileCoordExtent(this.wrappedTileCoord_),v=this.targetTileGrid_.getExtent()
let x=this.sourceTileGrid_.getExtent()
const b=v?(0,h._N)(y,v):y
if(0===(0,h.UG)(b))return void(this.state=s.A.EMPTY)
const E=t.getExtent()
E&&(x=x?(0,h._N)(x,E):E)
const w=r.getResolution(this.wrappedTileCoord_[0]),S=(0,l.aY)(t,n,b,w)
if(!isFinite(S)||S<=0)return void(this.state=s.A.EMPTY)
const C=void 0!==g?g:i.l
if(this.triangulation_=new a.A(t,n,b,x,S*C,w),0===this.triangulation_.getTriangles().length)return void(this.state=s.A.EMPTY)
this.sourceZ_=e.getZForResolution(S)
let T=this.triangulation_.calculateSourceExtent()
if(x&&(t.canWrapX()?(T[1]=(0,u.qE)(T[1],x[1],x[3]),T[3]=(0,u.qE)(T[3],x[1],x[3])):T=(0,h._N)(T,x)),(0,h.UG)(T)){const t=e.getTileRangeForExtentAndZ(T,this.sourceZ_)
for(let e=t.minX;e<=t.maxX;e++)for(let n=t.minY;n<=t.maxY;n++){const t=d(this.sourceZ_,e,n,f)
t&&this.sourceTiles_.push(t)}0===this.sourceTiles_.length&&(this.state=s.A.EMPTY)}else this.state=s.A.EMPTY}getImage(){return this.canvas_}reproject_(){const t=[]
if(this.sourceTiles_.forEach((e=>{e&&e.getState()==s.A.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})})),this.sourceTiles_.length=0,0===t.length)this.state=s.A.ERROR
else{const e=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(e),i="number"==typeof n?n:n[0],r="number"==typeof n?n:n[1],o=this.targetTileGrid_.getResolution(e),a=this.sourceTileGrid_.getResolution(this.sourceZ_),u=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_)
this.canvas_=(0,l.XX)(i,r,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,u,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=s.A.LOADED}this.changed()}load(){if(this.state==s.A.IDLE){this.state=s.A.LOADING,this.changed()
let t=0
this.sourcesListenerKeys_=[],this.sourceTiles_.forEach((e=>{const n=e.getState()
if(n==s.A.IDLE||n==s.A.LOADING){t++
const n=(0,c.KT)(e,r.A.CHANGE,(function(i){const r=e.getState()
r!=s.A.LOADED&&r!=s.A.ERROR&&r!=s.A.EMPTY||((0,c.JH)(n),t--,0===t&&(this.unlistenSources_(),this.reproject_()))}),this)
this.sourcesListenerKeys_.push(n)}})),0===t?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach((function(t,e,n){t.getState()==s.A.IDLE&&t.load()}))}}unlistenSources_(){this.sourcesListenerKeys_.forEach(c.JH),this.sourcesListenerKeys_=null}release(){this.canvas_&&((0,f.Yg)(this.canvas_.getContext("2d")),l.BV.push(this.canvas_),this.canvas_=null),super.release()}}const d=p},7486:(t,e,n)=>{"use strict"
n.d(e,{A:()=>s})
var i=n(3236),r=n(72),o=n(5306)
const s=class{constructor(t,e,n,o,s,a){this.sourceProj_=t,this.targetProj_=e
let l={}
const u=(0,r.RG)(this.targetProj_,this.sourceProj_)
this.transformInv_=function(t){const e=t[0]+"/"+t[1]
return l[e]||(l[e]=u(t)),l[e]},this.maxSourceExtent_=o,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!o&&!!this.sourceProj_.getExtent()&&(0,i.RG)(o)>=(0,i.RG)(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?(0,i.RG)(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?(0,i.RG)(this.targetProj_.getExtent()):null
const h=(0,i.Py)(n),c=(0,i.WU)(n),f=(0,i.k_)(n),p=(0,i.R)(n),d=this.transformInv_(h),g=this.transformInv_(c),_=this.transformInv_(f),m=this.transformInv_(p),y=10+(a?Math.max(0,Math.ceil(Math.log2((0,i.UG)(n)/(a*a*256*256)))):0)
if(this.addQuad_(h,c,f,p,d,g,_,m,y),this.wrapsXInSource_){let t=1/0
this.triangles_.forEach((function(e,n,i){t=Math.min(t,e.source[0][0],e.source[1][0],e.source[2][0])})),this.triangles_.forEach((e=>{if(Math.max(e.source[0][0],e.source[1][0],e.source[2][0])-t>this.sourceWorldWidth_/2){const n=[[e.source[0][0],e.source[0][1]],[e.source[1][0],e.source[1][1]],[e.source[2][0],e.source[2][1]]]
n[0][0]-t>this.sourceWorldWidth_/2&&(n[0][0]-=this.sourceWorldWidth_),n[1][0]-t>this.sourceWorldWidth_/2&&(n[1][0]-=this.sourceWorldWidth_),n[2][0]-t>this.sourceWorldWidth_/2&&(n[2][0]-=this.sourceWorldWidth_)
const i=Math.min(n[0][0],n[1][0],n[2][0])
Math.max(n[0][0],n[1][0],n[2][0])-i<this.sourceWorldWidth_/2&&(e.source=n)}}))}l={}}addTriangle_(t,e,n,i,r,o){this.triangles_.push({source:[i,r,o],target:[t,e,n]})}addQuad_(t,e,n,r,s,a,l,u,h){const c=(0,i.Tr)([s,a,l,u]),f=this.sourceWorldWidth_?(0,i.RG)(c)/this.sourceWorldWidth_:null,p=this.sourceWorldWidth_,d=this.sourceProj_.canWrapX()&&f>.5&&f<1
let g=!1
if(h>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const o=(0,i.Tr)([t,e,n,r])
g=(0,i.RG)(o)/this.targetWorldWidth_>.25||g}!d&&this.sourceProj_.isGlobal()&&f&&(g=f>.25||g)}if(!g&&this.maxSourceExtent_&&isFinite(c[0])&&isFinite(c[1])&&isFinite(c[2])&&isFinite(c[3])&&!(0,i.HY)(c,this.maxSourceExtent_))return
let _=0
if(!(g||isFinite(s[0])&&isFinite(s[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(l[0])&&isFinite(l[1])&&isFinite(u[0])&&isFinite(u[1])))if(h>0)g=!0
else if(_=(isFinite(s[0])&&isFinite(s[1])?0:8)+(isFinite(a[0])&&isFinite(a[1])?0:4)+(isFinite(l[0])&&isFinite(l[1])?0:2)+(isFinite(u[0])&&isFinite(u[1])?0:1),1!=_&&2!=_&&4!=_&&8!=_)return
if(h>0){if(!g){const e=[(t[0]+n[0])/2,(t[1]+n[1])/2],i=this.transformInv_(e)
let r
r=d?((0,o.xP)(s[0],p)+(0,o.xP)(l[0],p))/2-(0,o.xP)(i[0],p):(s[0]+l[0])/2-i[0]
const a=(s[1]+l[1])/2-i[1]
g=r*r+a*a>this.errorThresholdSquared_}if(g){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){const i=[(e[0]+n[0])/2,(e[1]+n[1])/2],o=this.transformInv_(i),c=[(r[0]+t[0])/2,(r[1]+t[1])/2],f=this.transformInv_(c)
this.addQuad_(t,e,i,c,s,a,o,f,h-1),this.addQuad_(c,i,n,r,f,o,l,u,h-1)}else{const i=[(t[0]+e[0])/2,(t[1]+e[1])/2],o=this.transformInv_(i),c=[(n[0]+r[0])/2,(n[1]+r[1])/2],f=this.transformInv_(c)
this.addQuad_(t,i,c,r,s,o,f,u,h-1),this.addQuad_(i,e,n,c,o,a,l,f,h-1)}return}}if(d){if(!this.canWrapXInSource_)return
this.wrapsXInSource_=!0}11&_||this.addTriangle_(t,n,r,s,l,u),14&_||this.addTriangle_(t,n,e,s,l,a),_&&(13&_||this.addTriangle_(e,r,t,a,u,s),7&_||this.addTriangle_(e,r,n,a,u,l))}calculateSourceExtent(){const t=(0,i.S5)()
return this.triangles_.forEach((function(e,n,r){const o=e.source;(0,i.$C)(t,o[0]),(0,i.$C)(t,o[1]),(0,i.$C)(t,o[2])})),t}getTriangles(){return this.triangles_}}},7028:(t,e,n)=>{"use strict"
n.d(e,{l:()=>i})
const i=.5},1270:(t,e,n)=>{"use strict"
function i(t){return Array.isArray(t)?Math.min(...t):t}n.d(e,{m:()=>i})},3513:(t,e,n)=>{"use strict"
n.d(e,{a$:()=>s,b8:()=>r,cq:()=>a,dv:()=>o})
var i=n(5306)
function r(t){if(void 0!==t)return 0}function o(t){if(void 0!==t)return t}function s(t){const e=2*Math.PI/t
return function(t,n){return n?t:void 0!==t?t=Math.floor(t/e+.5)*e:void 0}}function a(t){const e=void 0===t?(0,i.eh)(5):t
return function(t,n){return n||void 0===t?t:Math.abs(t)<=e?0:t}}},1673:(t,e,n)=>{"use strict"
function i(t){return t[0]>0&&t[1]>0}function r(t,e,n){return void 0===n&&(n=[0,0]),n[0]=t[0]*e+.5|0,n[1]=t[1]*e+.5|0,n}function o(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}n.d(e,{Ie:()=>i,hs:()=>r,xq:()=>o})},8833:(t,e,n)=>{"use strict"
n.r(e),n.d(e,{BingMaps:()=>Z,CartoDB:()=>Y,Cluster:()=>J,DataTile:()=>nt,GeoTIFF:()=>Cn,Google:()=>In,IIIF:()=>kn,Image:()=>Jn,ImageArcGISRest:()=>ni,ImageCanvas:()=>ri,ImageMapGuide:()=>si,ImageStatic:()=>li,ImageWMS:()=>_i,OGCMapTile:()=>Ti,OGCVectorTile:()=>ki,OSM:()=>zi,Raster:()=>er,Source:()=>_.A,StadiaMaps:()=>rr,Tile:()=>N,TileArcGISRest:()=>or,TileDebug:()=>sr,TileImage:()=>U,TileJSON:()=>ar,TileWMS:()=>lr,UTFGrid:()=>hr,UrlTile:()=>B,Vector:()=>H.A,VectorTile:()=>Di,WMTS:()=>cr,XYZ:()=>X,Zoomify:()=>Rn,createArcGISRestLoader:()=>ei,createMapGuideLoader:()=>oi,createStaticLoader:()=>ai,createWMSLoader:()=>gi,sourcesFromTileGrid:()=>fr})
var i=n(6838),r=n(3236),o=n(8638),s=n(519),a=n(7893),l=n(2695)
class u extends i.A{clear(){for(;this.getCount()>0;)this.pop().release()
super.clear()}expireCache(t){for(;this.canExpireCache()&&!(this.peekLast().getKey()in t);)this.pop().release()}pruneExceptNewestZ(){if(0===this.getCount())return
const t=this.peekFirstKey(),e=(0,l.K)(t)[0]
this.forEach((t=>{t.tileCoord[0]!==e&&(this.remove((0,l.i7)(t.tileCoord)),t.release())}))}}const h=u
var c=n(699)
const f="tileloadstart",p="tileloadend",d="tileloaderror"
var g=n(406),_=n(4749),m=n(1736),y=n(6249),v=n(72),x=n(5959),b=n(9506),E=n(5306),w=n(601),S=n(7195),C=n(1673)
const T=[0,0,0],I=class{constructor(t){let e
if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,(0,y.v)((0,S.WC)(this.resolutions_,((t,e)=>e-t),!0),"`resolutions` must be sorted in descending order"),!t.origins)for(let i=0,r=this.resolutions_.length-1;i<r;++i)if(e){if(this.resolutions_[i]/this.resolutions_[i+1]!==e){e=void 0
break}}else e=this.resolutions_[i]/this.resolutions_[i+1]
this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,(0,y.v)(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"))
const n=t.extent
void 0===n||this.origin_||this.origins_||(this.origin_=(0,r.Py)(n)),(0,y.v)(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,(0,y.v)(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:b.R,(0,y.v)(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=void 0!==n?n:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map(((t,e)=>{const i=new x.A(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1))
if(n){const t=this.getTileRangeForExtentAndZ(n,e)
i.minX=Math.max(t.minX,i.minX),i.maxX=Math.min(t.maxX,i.maxX),i.minY=Math.max(t.minY,i.minY),i.maxY=Math.min(t.maxY,i.maxY)}return i})):n&&this.calculateTileRanges_(n)}forEachTileCoord(t,e,n){const i=this.getTileRangeForExtentAndZ(t,e)
for(let r=i.minX,o=i.maxX;r<=o;++r)for(let t=i.minY,s=i.maxY;t<=s;++t)n([e,r,t])}forEachTileCoordParentTileRange(t,e,n,i){let r,o,s,a=null,l=t[0]-1
for(2===this.zoomFactor_?(o=t[1],s=t[2]):a=this.getTileCoordExtent(t,i);l>=this.minZoom;){if(void 0!==o&&void 0!==s?(o=Math.floor(o/2),s=Math.floor(s/2),r=(0,x.N)(o,o,s,s,n)):r=this.getTileRangeForExtentAndZ(a,l,n),e(l,r))return!0;--l}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,e,n){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){const n=2*t[1],i=2*t[2]
return(0,x.N)(n,n+1,i,i+1,e)}const i=this.getTileCoordExtent(t,n||this.tmpExtent_)
return this.getTileRangeForExtentAndZ(i,t[0]+1,e)}return null}getTileRangeForTileCoordAndZ(t,e,n){if(e>this.maxZoom||e<this.minZoom)return null
const i=t[0],r=t[1],o=t[2]
if(e===i)return(0,x.N)(r,o,r,o,n)
if(this.zoomFactor_){const t=Math.pow(this.zoomFactor_,e-i),s=Math.floor(r*t),a=Math.floor(o*t)
if(e<i)return(0,x.N)(s,s,a,a,n)
const l=Math.floor(t*(r+1))-1,u=Math.floor(t*(o+1))-1
return(0,x.N)(s,l,a,u,n)}const s=this.getTileCoordExtent(t,this.tmpExtent_)
return this.getTileRangeForExtentAndZ(s,e,n)}getTileRangeForExtentAndZ(t,e,n){this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,T)
const i=T[1],r=T[2]
this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,T)
const o=T[1],s=T[2]
return(0,x.N)(i,o,r,s,n)}getTileCoordCenter(t){const e=this.getOrigin(t[0]),n=this.getResolution(t[0]),i=(0,C.xq)(this.getTileSize(t[0]),this.tmpSize_)
return[e[0]+(t[1]+.5)*i[0]*n,e[1]-(t[2]+.5)*i[1]*n]}getTileCoordExtent(t,e){const n=this.getOrigin(t[0]),i=this.getResolution(t[0]),o=(0,C.xq)(this.getTileSize(t[0]),this.tmpSize_),s=n[0]+t[1]*o[0]*i,a=n[1]-(t[2]+1)*o[1]*i,l=s+o[0]*i,u=a+o[1]*i
return(0,r.N)(s,a,l,u,e)}getTileCoordForCoordAndResolution(t,e,n){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,n)}getTileCoordForXYAndResolution_(t,e,n,i,r){const o=this.getZForResolution(n),s=n/this.getResolution(o),a=this.getOrigin(o),u=(0,C.xq)(this.getTileSize(o),this.tmpSize_)
let h=s*(t-a[0])/n/u[0],c=s*(a[1]-e)/n/u[1]
return i?(h=(0,E.mk)(h,5)-1,c=(0,E.mk)(c,5)-1):(h=(0,E.RI)(h,5),c=(0,E.RI)(c,5)),(0,l.N)(o,h,c,r)}getTileCoordForXYAndZ_(t,e,n,i,r){const o=this.getOrigin(n),s=this.getResolution(n),a=(0,C.xq)(this.getTileSize(n),this.tmpSize_)
let u=(t-o[0])/s/a[0],h=(o[1]-e)/s/a[1]
return i?(u=(0,E.mk)(u,5)-1,h=(0,E.mk)(h,5)-1):(u=(0,E.RI)(u,5),h=(0,E.RI)(h,5)),(0,l.N)(n,u,h,r)}getTileCoordForCoordAndZ(t,e,n){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,n)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,e){const n=(0,S.FT)(this.resolutions_,t,e||0)
return(0,E.qE)(n,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,e){return(0,w.sj)(e,0,e.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){const e=this.resolutions_.length,n=new Array(e)
for(let i=this.minZoom;i<e;++i)n[i]=this.getTileRangeForExtentAndZ(t,i)
this.fullTileRanges_=n}}
function P(t){let e=t.getDefaultTileGrid()
return e||(e=function(t,e,n,i){return function(t,e,n,i){i=void 0!==i?i:"top-left"
const o=R(t,void 0,n)
return new I({extent:t,origin:(0,r.qF)(t,i),resolutions:o,tileSize:n})}(L(t),0,void 0,void 0)}(t),t.setDefaultTileGrid(e)),e}function A(t){const e=t||{},n=e.extent||(0,v.Jt)("EPSG:3857").getExtent(),i={extent:n,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:R(n,e.maxZoom,e.tileSize,e.maxResolution)}
return new I(i)}function R(t,e,n,i){e=void 0!==e?e:b.L,n=(0,C.xq)(void 0!==n?n:b.R)
const o=(0,r.Oq)(t),s=(0,r.RG)(t)
i=i>0?i:Math.max(s/n[0],o/n[1])
const a=e+1,l=new Array(a)
for(let r=0;r<a;++r)l[r]=i/Math.pow(2,r)
return l}function L(t){let e=(t=(0,v.Jt)(t)).getExtent()
if(!e){const n=180*v.Ig.degrees/t.getMetersPerUnit()
e=(0,r.N)(-n,-n,n,n)}return e}class M extends _.A{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.opaque_=void 0!==t.opaque&&t.opaque,this.tilePixelRatio_=void 0!==t.tilePixelRatio?t.tilePixelRatio:1,this.tileGrid=void 0!==t.tileGrid?t.tileGrid:null,this.tileGrid&&(0,C.xq)(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),[256,256]),this.tileCache=new h(t.cacheSize||0),this.tmpSize=[0,0],this.key_=t.key||"",this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(t,e){const n=this.getTileCacheForProjection(t)
n&&n.expireCache(e)}forEachLoadedTile(t,e,n,i){const r=this.getTileCacheForProjection(t)
if(!r)return!1
let o,s,a,u=!0
for(let h=n.minX;h<=n.maxX;++h)for(let t=n.minY;t<=n.maxY;++t)s=(0,l.dp)(e,h,t),a=!1,r.containsKey(s)&&(o=r.get(s),a=o.getState()===c.A.LOADED,a&&(a=!1!==i(o))),a||(u=!1)
return u}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getOpaque(t){return this.opaque_}getResolutions(t){const e=t?this.getTileGridForProjection(t):this.tileGrid
return e?e.getResolutions():null}getTile(t,e,n,i,r){return(0,m.b0)()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:P(t)}getTileCacheForProjection(t){const e=this.getProjection()
return(0,y.v)(null===e||(0,v.tI)(e,t),"A VectorTile source can only be rendered if it has a projection compatible with the view projection."),this.tileCache}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,e,n){const i=this.getTileGridForProjection(n),r=this.getTilePixelRatio(e),o=(0,C.xq)(i.getTileSize(t),this.tmpSize)
return 1==r?o:(0,C.hs)(o,r,this.tmpSize)}getTileCoordForTileUrlFunction(t,e){e=void 0!==e?e:this.getProjection()
const n=this.getTileGridForProjection(e)
return this.getWrapX()&&e.isGlobal()&&(t=function(t,e,n){const i=e[0],o=t.getTileCoordCenter(e),s=L(n)
if(!(0,r.Ym)(s,o)){const e=(0,r.RG)(s),n=Math.ceil((s[0]-o[0])/e)
return o[0]+=e*n,t.getTileCoordForCoordAndZ(o,i)}return e}(n,t,e)),(0,l.N5)(t,n)?t:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(t,e){const n=this.getTileCacheForProjection(e)
t>n.highWaterMark&&(n.highWaterMark=t)}useTile(t,e,n,i){}}class O extends g.Ay{constructor(t,e){super(t),this.tile=e}}const N=M
function D(t,e){const n=/\{z\}/g,i=/\{x\}/g,r=/\{y\}/g,o=/\{-y\}/g
return function(s,a,l){if(s)return t.replace(n,s[0].toString()).replace(i,s[1].toString()).replace(r,s[2].toString()).replace(o,(function(){const t=s[0],n=e.getFullTileRange(t)
if(!n)throw new Error("The {-y} placeholder requires a tile grid with extent")
return(n.getHeight()-s[2]-1).toString()}))}}function F(t,e){const n=t.length,i=new Array(n)
for(let r=0;r<n;++r)i[r]=D(t[r],e)
return k(i)}function k(t){return 1===t.length?t[0]:function(e,n,i){if(!e)return
const r=(0,l.tW)(e),o=(0,E.xP)(r,t.length)
return t[o](e,n,i)}}function j(t,e,n){}function z(t){const e=[]
let n=/\{([a-z])-([a-z])\}/.exec(t)
if(n){const i=n[1].charCodeAt(0),r=n[2].charCodeAt(0)
let o
for(o=i;o<=r;++o)e.push(t.replace(n[0],String.fromCharCode(o)))
return e}if(n=/\{(\d+)-(\d+)\}/.exec(t),n){const i=parseInt(n[2],10)
for(let r=parseInt(n[1],10);r<=i;r++)e.push(t.replace(n[0],r.toString()))
return e}return e.push(t),e}class G extends N{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===G.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){const e=t.target,n=(0,m.v6)(e),i=e.getState()
let r
i==c.A.LOADING?(this.tileLoadingKeys_[n]=!0,r=f):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],r=i==c.A.ERROR?d:i==c.A.LOADED?p:void 0),null!=r&&this.dispatchEvent(new O(r,e))}setTileLoadFunction(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()}setUrl(t){const e=z(t)
this.urls=e,this.setUrls(e)}setUrls(t){this.urls=t
const e=t.join("\n")
this.generateTileUrlFunction_?this.setTileUrlFunction(F(t,this.tileGrid),e):this.setKey(e)}tileUrlFunction(t,e,n){}useTile(t,e,n){const i=(0,l.dp)(t,e,n)
this.tileCache.containsKey(i)&&this.tileCache.get(i)}}const B=G
function q(t,e){t.getImage().src=e}const U=class extends B{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:q,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:void 0===t.interpolate||t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=void 0!==t.crossOrigin?t.crossOrigin:null,this.tileClass=void 0!==t.tileClass?t.tileClass:s.A,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0
for(const t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0
return!1}expireCache(t,e){const n=this.getTileCacheForProjection(t)
this.tileCache.expireCache(this.tileCache==n?e:{})
for(const i in this.tileCacheForProjection){const t=this.tileCacheForProjection[i]
t.expireCache(t==n?e:{})}}getGutterForProjection(t){return this.getProjection()&&t&&!(0,v.tI)(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey()
return this.getInterpolate()||(t+=":disable-interpolation"),t}getOpaque(t){return!(this.getProjection()&&t&&!(0,v.tI)(this.getProjection(),t))&&super.getOpaque(t)}getTileGridForProjection(t){const e=this.getProjection()
if(this.tileGrid&&(!e||(0,v.tI)(e,t)))return this.tileGrid
const n=(0,m.v6)(t)
return n in this.tileGridForProjection||(this.tileGridForProjection[n]=P(t)),this.tileGridForProjection[n]}getTileCacheForProjection(t){const e=this.getProjection()
if(!e||(0,v.tI)(e,t))return this.tileCache
const n=(0,m.v6)(t)
return n in this.tileCacheForProjection||(this.tileCacheForProjection[n]=new h(this.tileCache.highWaterMark)),this.tileCacheForProjection[n]}createTile_(t,e,n,i,r,s){const a=[t,e,n],l=this.getTileCoordForTileUrlFunction(a,r),u=l?this.tileUrlFunction(l,i,r):void 0,h=new this.tileClass(a,void 0!==u?c.A.IDLE:c.A.EMPTY,void 0!==u?u:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions)
return h.key=s,h.addEventListener(o.A.CHANGE,this.handleTileChange.bind(this)),h}getTile(t,e,n,i,r){const o=this.getProjection()
if(!o||!r||(0,v.tI)(o,r))return this.getTileInternal(t,e,n,i,o||r)
const s=this.getTileCacheForProjection(r),u=[t,e,n]
let h
const c=(0,l.i7)(u)
s.containsKey(c)&&(h=s.get(c))
const f=this.getKey()
if(h&&h.key==f)return h
const p=this.getTileGridForProjection(o),d=this.getTileGridForProjection(r),g=this.getTileCoordForTileUrlFunction(u,r),_=new a.A(o,p,r,d,u,g,this.getTilePixelRatio(i),this.getGutter(),((t,e,n,i)=>this.getTileInternal(t,e,n,i,o)),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions)
return _.key=f,h?(_.interimTile=h,_.refreshInterimChain(),s.replace(c,_)):s.set(c,_),_}getTileInternal(t,e,n,i,r){let o=null
const s=(0,l.dp)(t,e,n),a=this.getKey()
if(this.tileCache.containsKey(s)){if(o=this.tileCache.get(s),o.key!=a){const l=o
o=this.createTile_(t,e,n,i,r,a),l.getState()==c.A.IDLE?o.interimTile=l.interimTile:o.interimTile=l,o.refreshInterimChain(),this.tileCache.replace(s,o)}}else o=this.createTile_(t,e,n,i,r,a),this.tileCache.set(s,o)
return o}setRenderReprojectionEdges(t){if(this.renderReprojectionEdges_!=t){this.renderReprojectionEdges_=t
for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear()
this.changed()}}setTileGridForProjection(t,e){const n=(0,v.Jt)(t)
if(n){const t=(0,m.v6)(n)
t in this.tileGridForProjection||(this.tileGridForProjection[t]=e)}}clear(){super.clear()
for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear()}},Z=class extends U{constructor(t){const e=void 0!==t.hidpi&&t.hidpi
super({cacheSize:t.cacheSize,crossOrigin:"anonymous",interpolate:t.interpolate,opaque:!0,projection:(0,v.Jt)("EPSG:3857"),reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:"loading",tileLoadFunction:t.tileLoadFunction,tilePixelRatio:e?2:1,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:t.zDirection}),this.hidpi_=e,this.culture_=void 0!==t.culture?t.culture:"en-us",this.maxZoom_=void 0!==t.maxZoom?t.maxZoom:-1,this.apiKey_=t.key,this.imagerySet_=t.imagerySet,this.placeholderTiles_=t.placeholderTiles
const n="https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.imagerySet_+"?uriScheme=https&include=ImageryProviders&key="+this.apiKey_+"&c="+this.culture_
fetch(n).then((t=>t.json())).then((t=>this.handleImageryMetadataResponse(t)))}getApiKey(){return this.apiKey_}getImagerySet(){return this.imagerySet_}handleImageryMetadataResponse(t){if(200!=t.statusCode||"OK"!=t.statusDescription||"ValidCredentials"!=t.authenticationResultCode||1!=t.resourceSets.length||1!=t.resourceSets[0].resources.length)return void this.setState("error")
const e=t.resourceSets[0].resources[0],n=-1==this.maxZoom_?e.zoomMax:this.maxZoom_,i=L(this.getProjection()),o=this.hidpi_?2:1,s=e.imageWidth==e.imageHeight?e.imageWidth/o:[e.imageWidth/o,e.imageHeight/o],a=A({extent:i,minZoom:e.zoomMin,maxZoom:n,tileSize:s})
this.tileGrid=a
const u=this.culture_,h=this.hidpi_,c=this.placeholderTiles_
if(this.tileUrlFunction=k(e.imageUrlSubdomains.map((function(t){const n=[0,0,0],i=e.imageUrl.replace("{subdomain}",t).replace("{culture}",u)
return function(t,e,r){if(!t)return;(0,l.N)(t[0],t[1],t[2],n)
const o=new URL(i.replace("{quadkey}",function(t){const e=t[0],n=new Array(e)
let i,r,o=1<<e-1
for(i=0;i<e;++i)r=48,t[1]&o&&(r+=1),t[2]&o&&(r+=2),n[i]=String.fromCharCode(r),o>>=1
return n.join("")}(n))),s=o.searchParams
return h&&(s.set("dpi","d1"),s.set("device","mobile")),!0===c?s.delete("n"):!1===c&&s.set("n","z"),o.toString()}}))),e.imageryProviders){const t=(0,v.FO)((0,v.Jt)("EPSG:4326"),this.getProjection())
this.setAttributions((n=>{const i=[],o=n.viewState,s=this.getTileGrid(),a=s.getZForResolution(o.resolution,this.zDirection),l=s.getTileCoordForCoordAndZ(o.center,a)[0]
return e.imageryProviders.map((function(e){let o=!1
const s=e.coverageAreas
for(let i=0,a=s.length;i<a;++i){const e=s[i]
if(l>=e.zoomMin&&l<=e.zoomMax){const i=e.bbox,s=[i[1],i[0],i[3],i[2]],a=(0,r.NW)(s,t)
if((0,r.HY)(a,n.extent)){o=!0
break}}}o&&i.push(e.attribution)})),i.push('<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html" target="_blank">Terms of Use</a>'),i}))}this.setState("ready")}},X=class extends U{constructor(t){const e=void 0!==(t=t||{}).projection?t.projection:"EPSG:3857",n=void 0!==t.tileGrid?t.tileGrid:A({extent:L(e),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize})
super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:t.opaque,projection:e,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=void 0!==t.gutter?t.gutter:0}getGutter(){return this.gutter_}},Y=class extends X{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,maxZoom:void 0!==t.maxZoom?t.maxZoom:18,minZoom:t.minZoom,projection:t.projection,transition:t.transition,wrapX:t.wrapX,zDirection:t.zDirection}),this.account_=t.account,this.mapId_=t.map||"",this.config_=t.config||{},this.templateCache_={},this.initializeMap_()}getConfig(){return this.config_}updateConfig(t){Object.assign(this.config_,t),this.initializeMap_()}setConfig(t){this.config_=t||{},this.initializeMap_()}initializeMap_(){const t=JSON.stringify(this.config_)
if(this.templateCache_[t])return void this.applyTemplate_(this.templateCache_[t])
let e="https://"+this.account_+".carto.com/api/v1/map"
this.mapId_&&(e+="/named/"+this.mapId_)
const n=new XMLHttpRequest
n.addEventListener("load",this.handleInitResponse_.bind(this,t)),n.addEventListener("error",this.handleInitError_.bind(this)),n.open("POST",e),n.setRequestHeader("Content-type","application/json"),n.send(JSON.stringify(this.config_))}handleInitResponse_(t,e){const n=e.target
if(!n.status||n.status>=200&&n.status<300){let e
try{e=JSON.parse(n.responseText)}catch(t){return void this.setState("error")}this.applyTemplate_(e),this.templateCache_[t]=e,this.setState("ready")}else this.setState("error")}handleInitError_(t){this.setState("error")}applyTemplate_(t){const e="https://"+t.cdn_url.https+"/"+this.account_+"/api/v1/map/"+t.layergroupid+"/{z}/{x}/{y}.png"
this.setUrl(e)}}
var V=n(9656),W=n(8225),H=n(9481),$=n(8474)
class K extends H.A{constructor(t){super({attributions:t.attributions,wrapX:t.wrapX}),this.resolution=void 0,this.distance=void 0!==t.distance?t.distance:20,this.minDistance=t.minDistance||0,this.interpolationRatio=0,this.features=[],this.geometryFunction=t.geometryFunction||function(t){const e=t.getGeometry()
return(0,y.v)(!e||"Point"===e.getType(),"The default `geometryFunction` can only handle `Point` or null geometries"),e},this.createCustomCluster_=t.createCluster,this.source=null,this.boundRefresh_=this.refresh.bind(this),this.updateDistance(this.distance,this.minDistance),this.setSource(t.source||null)}clear(t){this.features.length=0,super.clear(t)}getDistance(){return this.distance}getSource(){return this.source}loadFeatures(t,e,n){this.source.loadFeatures(t,e,n),e!==this.resolution&&(this.resolution=e,this.refresh())}setDistance(t){this.updateDistance(t,this.minDistance)}setMinDistance(t){this.updateDistance(this.distance,t)}getMinDistance(){return this.minDistance}setSource(t){this.source&&this.source.removeEventListener(o.A.CHANGE,this.boundRefresh_),this.source=t,t&&t.addEventListener(o.A.CHANGE,this.boundRefresh_),this.refresh()}refresh(){this.clear(),this.cluster(),this.addFeatures(this.features)}updateDistance(t,e){const n=0===t?0:Math.min(e,t)/t,i=t!==this.distance||this.interpolationRatio!==n
this.distance=t,this.minDistance=e,this.interpolationRatio=n,i&&this.refresh()}cluster(){if(void 0===this.resolution||!this.source)return
const t=(0,r.S5)(),e=this.distance*this.resolution,n=this.source.getFeatures(),i={}
for(let o=0,s=n.length;o<s;o++){const s=n[o]
if(!((0,m.v6)(s)in i)){const n=this.geometryFunction(s)
if(n){const o=n.getCoordinates();(0,r.dP)(o,t),(0,r.r)(t,e,t)
const s=this.source.getFeaturesInExtent(t).filter((function(t){const e=(0,m.v6)(t)
return!(e in i)&&(i[e]=!0,!0)}))
this.features.push(this.createCluster(s,t))}}}}createCluster(t,e){const n=[0,0]
for(let r=t.length-1;r>=0;--r){const e=this.geometryFunction(t[r])
e?(0,$.WQ)(n,e.getCoordinates()):t.splice(r,1)}(0,$.hs)(n,1/t.length)
const i=(0,r.q1)(e),o=this.interpolationRatio,s=new W.A([n[0]*(1-o)+i[0]*o,n[1]*(1-o)+i[1]*o])
return this.createCustomCluster_?this.createCustomCluster_(s,t):new V.A({geometry:s,features:t})}}const J=K
var Q=n(2272),tt=n(5733),et=n(419)
const nt=class extends N{constructor(t){const e=void 0===t.projection?"EPSG:3857":t.projection
let n=t.tileGrid
void 0===n&&e&&(n=A({extent:L(e),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize})),super({cacheSize:.1,attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:e,tileGrid:n,opaque:t.opaque,state:t.state,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate}),this.gutter_=void 0!==t.gutter?t.gutter:0,this.tileSize_=t.tileSize?(0,C.xq)(t.tileSize):null,this.tileSizes_=null,this.tileLoadingKeys_={},this.loader_=t.loader,this.handleTileChange_=this.handleTileChange_.bind(this),this.bandCount=void 0===t.bandCount?4:t.bandCount,this.tileGridForProjection_={},this.tileCacheForProjection_={}}setTileSizes(t){this.tileSizes_=t}getTileSize(t){if(this.tileSizes_)return this.tileSizes_[t]
if(this.tileSize_)return this.tileSize_
const e=this.getTileGrid()
return e?(0,C.xq)(e.getTileSize(t)):[256,256]}getGutterForProjection(t){const e=this.getProjection()
return!e||(0,v.tI)(e,t)?this.gutter_:0}setLoader(t){this.loader_=t}getReprojTile_(t,e,n,i,r){const o=this.getTileCacheForProjection(i),s=(0,l.dp)(t,e,n)
if(o.containsKey(s)){const t=o.get(s)
if(t&&t.key==this.getKey())return t}const a=this.getTileGrid(),u=Math.max.apply(null,a.getResolutions().map(((t,e)=>{const n=(0,C.xq)(a.getTileSize(e)),i=this.getTileSize(e)
return Math.max(i[0]/n[0],i[1]/n[1])}))),h=this.getTileGridForProjection(r),c=this.getTileGridForProjection(i),f=[t,e,n],p=this.getTileCoordForTileUrlFunction(f,i),d=Object.assign({sourceProj:r,sourceTileGrid:h,targetProj:i,targetTileGrid:c,tileCoord:f,wrappedTileCoord:p,pixelRatio:u,gutter:this.getGutterForProjection(r),getTileFunction:(t,e,n,i)=>this.getTile(t,e,n,i,r)},this.tileOptions),g=new tt.A(d)
return g.key=this.getKey(),g}getTile(t,e,n,i,r){const s=this.getProjection()
if(s&&r&&!(0,v.tI)(s,r))return this.getReprojTile_(t,e,n,r,s)
const a=this.getTileSize(t),u=(0,l.dp)(t,e,n)
if(this.tileCache.containsKey(u))return this.tileCache.get(u)
const h=this.loader_,c=Object.assign({tileCoord:[t,e,n],loader:function(){return(0,et.hq)((function(){return h(t,e,n)}))},size:a},this.tileOptions),f=new Q.Ay(c)
return f.key=this.getKey(),f.addEventListener(o.A.CHANGE,this.handleTileChange_),this.tileCache.set(u,f),f}handleTileChange_(t){const e=t.target,n=(0,m.v6)(e),i=e.getState()
let r
i==c.A.LOADING?(this.tileLoadingKeys_[n]=!0,r=f):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],r=i==c.A.ERROR?d:i==c.A.LOADED?p:void 0),r&&this.dispatchEvent(new O(r,e))}getTileGridForProjection(t){const e=this.getProjection()
if(this.tileGrid&&(!e||(0,v.tI)(e,t)))return this.tileGrid
const n=(0,m.v6)(t)
return n in this.tileGridForProjection_||(this.tileGridForProjection_[n]=P(t)),this.tileGridForProjection_[n]}setTileGridForProjection(t,e){const n=(0,v.Jt)(t)
if(n){const t=(0,m.v6)(n)
t in this.tileGridForProjection_||(this.tileGridForProjection_[t]=e)}}getTileCacheForProjection(t){const e=this.getProjection()
if(!e||(0,v.tI)(e,t))return this.tileCache
const n=(0,m.v6)(t)
return n in this.tileCacheForProjection_||(this.tileCacheForProjection_[n]=new h(.1)),this.tileCacheForProjection_[n]}expireCache(t,e){const n=this.getTileCacheForProjection(t)
this.tileCache.expireCache(this.tileCache==n?e:{})
for(const i in this.tileCacheForProjection_){const t=this.tileCacheForProjection_[i]
t.expireCache(t==n?e:{})}}clear(){super.clear()
for(const t in this.tileCacheForProjection_)this.tileCacheForProjection_[t].clear()}}
var it=n(7242)
const rt=new Map
function ot(t,e){Array.isArray(t)||(t=[t]),t.forEach((t=>rt.set(t,e)))}async function st(t){const e=rt.get(t.Compression)
if(!e)throw new Error(`Unknown compression method identifier: ${t.Compression}`)
return new(await e())(t)}ot([void 0,1],(()=>n.e(205).then(n.bind(n,9205)).then((t=>t.default)))),ot(5,(()=>n.e(816).then(n.bind(n,1816)).then((t=>t.default)))),ot(6,(()=>{throw new Error("old style JPEG compression is not supported.")})),ot(7,(()=>n.e(517).then(n.bind(n,5517)).then((t=>t.default)))),ot([8,32946],(()=>Promise.all([n.e(75),n.e(188)]).then(n.bind(n,1188)).then((t=>t.default)))),ot(32773,(()=>n.e(570).then(n.bind(n,3570)).then((t=>t.default)))),ot(34887,(()=>Promise.all([n.e(75),n.e(916)]).then(n.bind(n,2916)).then((async t=>(await t.zstd.init(),t))).then((t=>t.default)))),ot(50001,(()=>n.e(388).then(n.bind(n,388)).then((t=>t.default))))
const at="undefined"!=typeof navigator&&navigator.hardwareConcurrency||2,lt=class{constructor(t=at,e){this.workers=null,this._awaitingDecoder=null,this.size=t,this.messageId=0,t&&(this._awaitingDecoder=e?Promise.resolve(e):new Promise((t=>{n.e(161).then(n.bind(n,2161)).then((e=>{t(e.create)}))})),this._awaitingDecoder.then((e=>{this._awaitingDecoder=null,this.workers=[]
for(let n=0;n<t;n++)this.workers.push({worker:e(),idle:!0})})))}async decode(t,e){return this._awaitingDecoder&&await this._awaitingDecoder,0===this.size?st(t).then((n=>n.decode(t,e))):new Promise((n=>{const i=this.workers.find((t=>t.idle))||this.workers[Math.floor(Math.random()*this.size)]
i.idle=!1
const r=this.messageId++,o=t=>{t.data.id===r&&(i.idle=!0,n(t.data.decoded),i.worker.removeEventListener("message",o))}
i.worker.addEventListener("message",o),i.worker.postMessage({fileDirectory:t,buffer:e,id:r},[e])}))}destroy(){this.workers&&(this.workers.forEach((t=>{t.worker.terminate()})),this.workers=null)}}
function ut(t){return(e,...n)=>ct(t,e,n)}function ht(t,e){return ut(gt(t,e).get)}const{apply:ct,construct:ft,defineProperty:pt,get:dt,getOwnPropertyDescriptor:gt,getPrototypeOf:_t,has:mt,ownKeys:yt,set:vt,setPrototypeOf:xt}=Reflect,{EPSILON:bt,MAX_SAFE_INTEGER:Et,isFinite:wt,isNaN:St}=Number,{iterator:Ct,species:Tt,toStringTag:It,for:Pt}=Symbol,At=Object,{create:Rt,defineProperty:Lt,freeze:Mt,is:Ot}=At,Nt=At.prototype,Dt=(Nt.__lookupGetter__&&ut(Nt.__lookupGetter__),At.hasOwn||ut(Nt.hasOwnProperty),Array),Ft=(Dt.isArray,Dt.prototype),kt=(ut(Ft.join),ut(Ft.push),ut(Ft.toLocaleString),Ft[Ct]),jt=ut(kt),{abs:zt,trunc:Gt}=Math,Bt=ArrayBuffer,qt=(Bt.isView,Bt.prototype),Ut=(ut(qt.slice),ht(qt,"byteLength"),"undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:null),Zt=(Ut&&ht(Ut.prototype,"byteLength"),_t(Uint8Array)),Xt=(Zt.from,Zt.prototype),Yt=(Xt[Ct],ut(Xt.keys),ut(Xt.values),ut(Xt.entries),ut(Xt.set),ut(Xt.reverse),ut(Xt.fill),ut(Xt.copyWithin),ut(Xt.sort),ut(Xt.slice),ut(Xt.subarray),ht(Xt,"buffer"),ht(Xt,"byteOffset"),ht(Xt,"length"),ht(Xt,It),Uint8Array),Vt=Uint16Array,Wt=Uint32Array,Ht=Float32Array,$t=_t([][Ct]()),Kt=ut($t.next),Jt=ut(function*(){}().next),Qt=_t($t),te=DataView.prototype,ee=ut(te.getUint16),ne=(ut(te.setUint16),TypeError,WeakSet.prototype),ie=(ut(ne.add),ut(ne.has),WeakMap),re=ie.prototype,oe=ut(re.get),se=(ut(re.has),ut(re.set)),ae=new ie,le=Rt(null,{next:{value:function(){const t=oe(ae,this)
return Kt(t)}},[Ct]:{value:function(){return this}}}),ue=new ie,he=Rt(Qt,{next:{value:function(){const t=oe(ue,this)
return Jt(t)},writable:!0,configurable:!0}})
for(const pr of yt($t))"next"!==pr&&Lt(he,pr,gt($t,pr))
const ce=new Bt(4),fe=new Ht(ce),pe=new Wt(ce),de=new Vt(512),ge=new Yt(512)
for(let pr=0;pr<256;++pr){const t=pr-127
t<-27?(de[pr]=0,de[256|pr]=32768,ge[pr]=24,ge[256|pr]=24):t<-14?(de[pr]=1024>>-t-14,de[256|pr]=1024>>-t-14|32768,ge[pr]=-t-1,ge[256|pr]=-t-1):t<=15?(de[pr]=t+15<<10,de[256|pr]=t+15<<10|32768,ge[pr]=13,ge[256|pr]=13):t<128?(de[pr]=31744,de[256|pr]=64512,ge[pr]=24,ge[256|pr]=24):(de[pr]=31744,de[256|pr]=64512,ge[pr]=13,ge[256|pr]=13)}const _e=new Wt(2048)
for(let pr=1;pr<1024;++pr){let t=pr<<13,e=0
for(;!(8388608&t);)t<<=1,e-=8388608
t&=-8388609,e+=947912704,_e[pr]=t|e}for(let pr=1024;pr<2048;++pr)_e[pr]=939524096+(pr-1024<<13)
const me=new Wt(64)
for(let pr=1;pr<31;++pr)me[pr]=pr<<23
me[31]=1199570944,me[32]=2147483648
for(let pr=33;pr<63;++pr)me[pr]=2147483648+(pr-32<<23)
me[63]=3347054592
const ye=new Vt(64)
for(let pr=1;pr<64;++pr)32!==pr&&(ye[pr]=1024)
function ve(t,e,...n){return function(t){const e=t>>10
return pe[0]=_e[ye[e]+(1023&t)]+me[e],fe[0]}(ee(t,e,...function(t){if(t[Ct]===kt&&$t.next===Kt)return t
const e=Rt(le)
return se(ae,e,jt(t)),e}(n)))}var xe=n(5633),be=n(3197)
function Ee(t,e,n,i=1){return new(Object.getPrototypeOf(t).constructor)(e*n*i)}function we(t,e,n){return(1-n)*t+n*e}function Se(t,e,n){let i=0
for(let r=e;r<n;++r)i+=t[r]
return i}function Ce(t,e,n){switch(t){case 1:if(e<=8)return new Uint8Array(n)
if(e<=16)return new Uint16Array(n)
if(e<=32)return new Uint32Array(n)
break
case 2:if(8===e)return new Int8Array(n)
if(16===e)return new Int16Array(n)
if(32===e)return new Int32Array(n)
break
case 3:switch(e){case 16:case 32:return new Float32Array(n)
case 64:return new Float64Array(n)}}throw Error("Unsupported data format/bitsPerSample")}const Te=class{constructor(t,e,n,i,r,o){this.fileDirectory=t,this.geoKeys=e,this.dataView=n,this.littleEndian=i,this.tiles=r?{}:null,this.isTiled=!t.StripOffsets
const s=t.PlanarConfiguration
if(this.planarConfiguration=void 0===s?1:s,1!==this.planarConfiguration&&2!==this.planarConfiguration)throw new Error("Invalid planar configuration.")
this.source=o}getFileDirectory(){return this.fileDirectory}getGeoKeys(){return this.geoKeys}getWidth(){return this.fileDirectory.ImageWidth}getHeight(){return this.fileDirectory.ImageLength}getSamplesPerPixel(){return void 0!==this.fileDirectory.SamplesPerPixel?this.fileDirectory.SamplesPerPixel:1}getTileWidth(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}getTileHeight(){return this.isTiled?this.fileDirectory.TileLength:void 0!==this.fileDirectory.RowsPerStrip?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}getBlockWidth(){return this.getTileWidth()}getBlockHeight(t){return this.isTiled||(t+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-t*this.getTileHeight()}getBytesPerPixel(){let t=0
for(let e=0;e<this.fileDirectory.BitsPerSample.length;++e)t+=this.getSampleByteSize(e)
return t}getSampleByteSize(t){if(t>=this.fileDirectory.BitsPerSample.length)throw new RangeError(`Sample index ${t} is out of range.`)
return Math.ceil(this.fileDirectory.BitsPerSample[t]/8)}getReaderForSample(t){const e=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1,n=this.fileDirectory.BitsPerSample[t]
switch(e){case 1:if(n<=8)return DataView.prototype.getUint8
if(n<=16)return DataView.prototype.getUint16
if(n<=32)return DataView.prototype.getUint32
break
case 2:if(n<=8)return DataView.prototype.getInt8
if(n<=16)return DataView.prototype.getInt16
if(n<=32)return DataView.prototype.getInt32
break
case 3:switch(n){case 16:return function(t,e){return ve(this,t,e)}
case 32:return DataView.prototype.getFloat32
case 64:return DataView.prototype.getFloat64}}throw Error("Unsupported data format/bitsPerSample")}getSampleFormat(t=0){return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1}getBitsPerSample(t=0){return this.fileDirectory.BitsPerSample[t]}getArrayForSample(t,e){return Ce(this.getSampleFormat(t),this.getBitsPerSample(t),e)}async getTileOrStrip(t,e,n,i,r){const o=Math.ceil(this.getWidth()/this.getTileWidth()),s=Math.ceil(this.getHeight()/this.getTileHeight())
let a
const{tiles:l}=this
let u,h
1===this.planarConfiguration?a=e*o+t:2===this.planarConfiguration&&(a=n*o*s+e*o+t),this.isTiled?(u=this.fileDirectory.TileOffsets[a],h=this.fileDirectory.TileByteCounts[a]):(u=this.fileDirectory.StripOffsets[a],h=this.fileDirectory.StripByteCounts[a])
const c=(await this.source.fetch([{offset:u,length:h}],r))[0]
let f
return null!==l&&l[a]?f=l[a]:(f=(async()=>{let t=await i.decode(this.fileDirectory,c)
const n=this.getSampleFormat(),r=this.getBitsPerSample()
return function(t,e){return(1!==t&&2!==t||!(e<=32)||e%8!=0)&&(3!==t||16!==e&&32!==e&&64!==e)}(n,r)&&(t=function(t,e,n,i,r,o,s){const a=new DataView(t),l=2===n?1:i,u=Ce(e,r,2===n?s*o:s*o*i),h=parseInt("1".repeat(r),2)
if(1===e){let t
t=1===n?i*r:r
let e=o*t
7&e&&(e=e+7&-8)
for(let n=0;n<s;++n){const t=n*e
for(let e=0;e<o;++e){const i=t+e*l*r
for(let t=0;t<l;++t){const s=i+t*r,c=(n*o+e)*l+t,f=Math.floor(s/8),p=s%8
if(p+r<=8)u[c]=a.getUint8(f)>>8-r-p&h
else if(p+r<=16)u[c]=a.getUint16(f)>>16-r-p&h
else if(p+r<=24){const t=a.getUint16(f)<<8|a.getUint8(f+2)
u[c]=t>>24-r-p&h}else u[c]=a.getUint32(f)>>32-r-p&h}}}}return u.buffer}(t,n,this.planarConfiguration,this.getSamplesPerPixel(),r,this.getTileWidth(),this.getBlockHeight(e))),t})(),null!==l&&(l[a]=f)),{x:t,y:e,sample:n,data:await f}}async _readRaster(t,e,n,i,r,o,s,a,l){const u=this.getTileWidth(),h=this.getTileHeight(),c=this.getWidth(),f=this.getHeight(),p=Math.max(Math.floor(t[0]/u),0),d=Math.min(Math.ceil(t[2]/u),Math.ceil(c/u)),g=Math.max(Math.floor(t[1]/h),0),_=Math.min(Math.ceil(t[3]/h),Math.ceil(f/h)),m=t[2]-t[0]
let y=this.getBytesPerPixel()
const v=[],x=[]
for(let w=0;w<e.length;++w)1===this.planarConfiguration?v.push(Se(this.fileDirectory.BitsPerSample,0,e[w])/8):v.push(0),x.push(this.getReaderForSample(e[w]))
const b=[],{littleEndian:E}=this
for(let w=g;w<_;++w)for(let o=p;o<d;++o){let s
1===this.planarConfiguration&&(s=this.getTileOrStrip(o,w,0,r,l))
for(let a=0;a<e.length;++a){const p=a,d=e[a]
2===this.planarConfiguration&&(y=this.getSampleByteSize(d),s=this.getTileOrStrip(o,w,d,r,l))
const g=s.then((r=>{const o=r.data,s=new DataView(o),a=this.getBlockHeight(r.y),l=r.y*h,d=r.x*u,g=l+a,_=(r.x+1)*u,b=x[p],w=Math.min(a,a-(g-t[3]),f-l),S=Math.min(u,u-(_-t[2]),c-d)
for(let h=Math.max(0,t[1]-l);h<w;++h)for(let r=Math.max(0,t[0]-d);r<S;++r){const o=(h*u+r)*y,a=b.call(s,o+v[p],E)
let c
i?(c=(h+l-t[1])*m*e.length+(r+d-t[0])*e.length+p,n[c]=a):(c=(h+l-t[1])*m+r+d-t[0],n[p][c]=a)}}))
b.push(g)}}if(await Promise.all(b),o&&t[2]-t[0]!==o||s&&t[3]-t[1]!==s){let r
return r=i?function(t,e,n,i,r,o,s="nearest"){switch(s.toLowerCase()){case"nearest":return function(t,e,n,i,r,o){const s=e/i,a=n/r,l=Ee(t,i,r,o)
for(let u=0;u<r;++u){const r=Math.min(Math.round(a*u),n-1)
for(let n=0;n<i;++n){const a=Math.min(Math.round(s*n),e-1)
for(let s=0;s<o;++s){const h=t[r*e*o+a*o+s]
l[u*i*o+n*o+s]=h}}}return l}(t,e,n,i,r,o)
case"bilinear":case"linear":return function(t,e,n,i,r,o){const s=e/i,a=n/r,l=Ee(t,i,r,o)
for(let u=0;u<r;++u){const r=a*u,h=Math.floor(r),c=Math.min(Math.ceil(r),n-1)
for(let n=0;n<i;++n){const a=s*n,f=a%1,p=Math.floor(a),d=Math.min(Math.ceil(a),e-1)
for(let s=0;s<o;++s){const a=t[h*e*o+p*o+s],g=t[h*e*o+d*o+s],_=t[c*e*o+p*o+s],m=t[c*e*o+d*o+s],y=we(we(a,g,f),we(_,m,f),r%1)
l[u*i*o+n*o+s]=y}}}return l}(t,e,n,i,r,o)
default:throw new Error(`Unsupported resampling method: '${s}'`)}}(n,t[2]-t[0],t[3]-t[1],o,s,e.length,a):function(t,e,n,i,r,o="nearest"){switch(o.toLowerCase()){case"nearest":return function(t,e,n,i,r){const o=e/i,s=n/r
return t.map((t=>{const a=Ee(t,i,r)
for(let l=0;l<r;++l){const r=Math.min(Math.round(s*l),n-1)
for(let n=0;n<i;++n){const s=Math.min(Math.round(o*n),e-1),u=t[r*e+s]
a[l*i+n]=u}}return a}))}(t,e,n,i,r)
case"bilinear":case"linear":return function(t,e,n,i,r){const o=e/i,s=n/r
return t.map((t=>{const a=Ee(t,i,r)
for(let l=0;l<r;++l){const r=s*l,u=Math.floor(r),h=Math.min(Math.ceil(r),n-1)
for(let n=0;n<i;++n){const s=o*n,c=s%1,f=Math.floor(s),p=Math.min(Math.ceil(s),e-1),d=t[u*e+f],g=t[u*e+p],_=t[h*e+f],m=t[h*e+p],y=we(we(d,g,c),we(_,m,c),r%1)
a[l*i+n]=y}}return a}))}(t,e,n,i,r)
default:throw new Error(`Unsupported resampling method: '${o}'`)}}(n,t[2]-t[0],t[3]-t[1],o,s,a),r.width=o,r.height=s,r}return n.width=o||t[2]-t[0],n.height=s||t[3]-t[1],n}async readRasters({window:t,samples:e=[],interleave:n,pool:i=null,width:r,height:o,resampleMethod:s,fillValue:a,signal:l}={}){const u=t||[0,0,this.getWidth(),this.getHeight()]
if(u[0]>u[2]||u[1]>u[3])throw new Error("Invalid subsets")
const h=(u[2]-u[0])*(u[3]-u[1]),c=this.getSamplesPerPixel()
if(e&&e.length){for(let d=0;d<e.length;++d)if(e[d]>=c)return Promise.reject(new RangeError(`Invalid sample index '${e[d]}'.`))}else for(let d=0;d<c;++d)e.push(d)
let f
if(n)f=Ce(this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,Math.max.apply(null,this.fileDirectory.BitsPerSample),h*e.length),a&&f.fill(a)
else{f=[]
for(let t=0;t<e.length;++t){const n=this.getArrayForSample(e[t],h)
Array.isArray(a)&&t<a.length?n.fill(a[t]):a&&!Array.isArray(a)&&n.fill(a),f.push(n)}}const p=i||await st(this.fileDirectory)
return await this._readRaster(u,e,f,n,p,r,o,s,l)}async readRGB({window:t,interleave:e=!0,pool:n=null,width:i,height:r,resampleMethod:o,enableAlpha:s=!1,signal:a}={}){const l=t||[0,0,this.getWidth(),this.getHeight()]
if(l[0]>l[2]||l[1]>l[3])throw new Error("Invalid subsets")
const u=this.fileDirectory.PhotometricInterpretation
if(u===it.ub.RGB){let l=[0,1,2]
if(this.fileDirectory.ExtraSamples!==it.AC.Unspecified&&s){l=[]
for(let t=0;t<this.fileDirectory.BitsPerSample.length;t+=1)l.push(t)}return this.readRasters({window:t,interleave:e,samples:l,pool:n,width:i,height:r,resampleMethod:o,signal:a})}let h
switch(u){case it.ub.WhiteIsZero:case it.ub.BlackIsZero:case it.ub.Palette:h=[0]
break
case it.ub.CMYK:h=[0,1,2,3]
break
case it.ub.YCbCr:case it.ub.CIELab:h=[0,1,2]
break
default:throw new Error("Invalid or unsupported photometric interpretation.")}const c={window:l,interleave:!0,samples:h,pool:n,width:i,height:r,resampleMethod:o,signal:a},{fileDirectory:f}=this,p=await this.readRasters(c),d=2**this.fileDirectory.BitsPerSample[0]
let g
switch(u){case it.ub.WhiteIsZero:g=function(t,e){const{width:n,height:i}=t,r=new Uint8Array(n*i*3)
let o
for(let s=0,a=0;s<t.length;++s,a+=3)o=256-t[s]/e*256,r[a]=o,r[a+1]=o,r[a+2]=o
return r}(p,d)
break
case it.ub.BlackIsZero:g=function(t,e){const{width:n,height:i}=t,r=new Uint8Array(n*i*3)
let o
for(let s=0,a=0;s<t.length;++s,a+=3)o=t[s]/e*256,r[a]=o,r[a+1]=o,r[a+2]=o
return r}(p,d)
break
case it.ub.Palette:g=function(t,e){const{width:n,height:i}=t,r=new Uint8Array(n*i*3),o=e.length/3,s=e.length/3*2
for(let a=0,l=0;a<t.length;++a,l+=3){const n=t[a]
r[l]=e[n]/65536*256,r[l+1]=e[n+o]/65536*256,r[l+2]=e[n+s]/65536*256}return r}(p,f.ColorMap)
break
case it.ub.CMYK:g=function(t){const{width:e,height:n}=t,i=new Uint8Array(e*n*3)
for(let r=0,o=0;r<t.length;r+=4,o+=3){const e=t[r],n=t[r+1],s=t[r+2],a=t[r+3]
i[o]=(255-e)/256*255*((255-a)/256),i[o+1]=(255-n)/256*255*((255-a)/256),i[o+2]=(255-s)/256*255*((255-a)/256)}return i}(p)
break
case it.ub.YCbCr:g=function(t){const{width:e,height:n}=t,i=new Uint8ClampedArray(e*n*3)
for(let r=0,o=0;r<t.length;r+=3,o+=3){const e=t[r],n=t[r+1],s=t[r+2]
i[o]=e+1.402*(s-128),i[o+1]=e-.34414*(n-128)-.71414*(s-128),i[o+2]=e+1.772*(n-128)}return i}(p)
break
case it.ub.CIELab:g=function(t){const{width:e,height:n}=t,i=new Uint8Array(e*n*3)
for(let r=0,o=0;r<t.length;r+=3,o+=3){let e,n,s,a=(t[r+0]+16)/116,l=(t[r+1]<<24>>24)/500+a,u=a-(t[r+2]<<24>>24)/200
l=.95047*(l*l*l>.008856?l*l*l:(l-16/116)/7.787),a=1*(a*a*a>.008856?a*a*a:(a-16/116)/7.787),u=1.08883*(u*u*u>.008856?u*u*u:(u-16/116)/7.787),e=3.2406*l+-1.5372*a+-.4986*u,n=-.9689*l+1.8758*a+.0415*u,s=.0557*l+-.204*a+1.057*u,e=e>.0031308?1.055*e**(1/2.4)-.055:12.92*e,n=n>.0031308?1.055*n**(1/2.4)-.055:12.92*n,s=s>.0031308?1.055*s**(1/2.4)-.055:12.92*s,i[o]=255*Math.max(0,Math.min(1,e)),i[o+1]=255*Math.max(0,Math.min(1,n)),i[o+2]=255*Math.max(0,Math.min(1,s))}return i}(p)
break
default:throw new Error("Unsupported photometric interpretation.")}if(!e){const t=new Uint8Array(g.length/3),e=new Uint8Array(g.length/3),n=new Uint8Array(g.length/3)
for(let i=0,r=0;i<g.length;i+=3,++r)t[r]=g[i],e[r]=g[i+1],n[r]=g[i+2]
g=[t,e,n]}return g.width=p.width,g.height=p.height,g}getTiePoints(){if(!this.fileDirectory.ModelTiepoint)return[]
const t=[]
for(let e=0;e<this.fileDirectory.ModelTiepoint.length;e+=6)t.push({i:this.fileDirectory.ModelTiepoint[e],j:this.fileDirectory.ModelTiepoint[e+1],k:this.fileDirectory.ModelTiepoint[e+2],x:this.fileDirectory.ModelTiepoint[e+3],y:this.fileDirectory.ModelTiepoint[e+4],z:this.fileDirectory.ModelTiepoint[e+5]})
return t}getGDALMetadata(t=null){const e={}
if(!this.fileDirectory.GDAL_METADATA)return null
const n=this.fileDirectory.GDAL_METADATA
let i=be(n,"Item")
i=null===t?i.filter((t=>void 0===xe(t,"sample"))):i.filter((e=>Number(xe(e,"sample"))===t))
for(let r=0;r<i.length;++r){const t=i[r]
e[xe(t,"name")]=t.inner}return e}getGDALNoData(){if(!this.fileDirectory.GDAL_NODATA)return null
const t=this.fileDirectory.GDAL_NODATA
return Number(t.substring(0,t.length-1))}getOrigin(){const t=this.fileDirectory.ModelTiepoint,e=this.fileDirectory.ModelTransformation
if(t&&6===t.length)return[t[3],t[4],t[5]]
if(e)return[e[3],e[7],e[11]]
throw new Error("The image does not have an affine transformation.")}getResolution(t=null){const e=this.fileDirectory.ModelPixelScale,n=this.fileDirectory.ModelTransformation
if(e)return[e[0],-e[1],e[2]]
if(n)return 0===n[1]&&0===n[4]?[n[0],-n[5],n[10]]:[Math.sqrt(n[0]*n[0]+n[4]*n[4]),-Math.sqrt(n[1]*n[1]+n[5]*n[5]),n[10]]
if(t){const[e,n,i]=t.getResolution()
return[e*t.getWidth()/this.getWidth(),n*t.getHeight()/this.getHeight(),i*t.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}pixelIsArea(){return 1===this.geoKeys.GTRasterTypeGeoKey}getBoundingBox(t=!1){const e=this.getHeight(),n=this.getWidth()
if(this.fileDirectory.ModelTransformation&&!t){const[t,i,r,o,s,a,l,u]=this.fileDirectory.ModelTransformation,h=[[0,0],[0,e],[n,0],[n,e]].map((([e,n])=>[o+t*e+i*n,u+s*e+a*n])),c=h.map((t=>t[0])),f=h.map((t=>t[1]))
return[Math.min(...c),Math.min(...f),Math.max(...c),Math.max(...f)]}{const t=this.getOrigin(),i=this.getResolution(),r=t[0],o=t[1],s=r+i[0]*n,a=o+i[1]*e
return[Math.min(r,s),Math.min(o,a),Math.max(r,s),Math.max(o,a)]}}}
class Ie{constructor(t){this._dataView=new DataView(t)}get buffer(){return this._dataView.buffer}getUint64(t,e){const n=this.getUint32(t,e),i=this.getUint32(t+4,e)
let r
if(e){if(r=n+2**32*i,!Number.isSafeInteger(r))throw new Error(`${r} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`)
return r}if(r=2**32*n+i,!Number.isSafeInteger(r))throw new Error(`${r} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`)
return r}getInt64(t,e){let n=0
const i=(128&this._dataView.getUint8(t+(e?7:0)))>0
let r=!0
for(let o=0;o<8;o++){let s=this._dataView.getUint8(t+(e?o:7-o))
i&&(r?0!==s&&(s=255&~(s-1),r=!1):s=255&~s),n+=s*256**o}return i&&(n=-n),n}getUint8(t,e){return this._dataView.getUint8(t,e)}getInt8(t,e){return this._dataView.getInt8(t,e)}getUint16(t,e){return this._dataView.getUint16(t,e)}getInt16(t,e){return this._dataView.getInt16(t,e)}getUint32(t,e){return this._dataView.getUint32(t,e)}getInt32(t,e){return this._dataView.getInt32(t,e)}getFloat16(t,e){return ve(this._dataView,t,e)}getFloat32(t,e){return this._dataView.getFloat32(t,e)}getFloat64(t,e){return this._dataView.getFloat64(t,e)}}class Pe{constructor(t,e,n,i){this._dataView=new DataView(t),this._sliceOffset=e,this._littleEndian=n,this._bigTiff=i}get sliceOffset(){return this._sliceOffset}get sliceTop(){return this._sliceOffset+this.buffer.byteLength}get littleEndian(){return this._littleEndian}get bigTiff(){return this._bigTiff}get buffer(){return this._dataView.buffer}covers(t,e){return this.sliceOffset<=t&&this.sliceTop>=t+e}readUint8(t){return this._dataView.getUint8(t-this._sliceOffset,this._littleEndian)}readInt8(t){return this._dataView.getInt8(t-this._sliceOffset,this._littleEndian)}readUint16(t){return this._dataView.getUint16(t-this._sliceOffset,this._littleEndian)}readInt16(t){return this._dataView.getInt16(t-this._sliceOffset,this._littleEndian)}readUint32(t){return this._dataView.getUint32(t-this._sliceOffset,this._littleEndian)}readInt32(t){return this._dataView.getInt32(t-this._sliceOffset,this._littleEndian)}readFloat32(t){return this._dataView.getFloat32(t-this._sliceOffset,this._littleEndian)}readFloat64(t){return this._dataView.getFloat64(t-this._sliceOffset,this._littleEndian)}readUint64(t){const e=this.readUint32(t),n=this.readUint32(t+4)
let i
if(this._littleEndian){if(i=e+2**32*n,!Number.isSafeInteger(i))throw new Error(`${i} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`)
return i}if(i=2**32*e+n,!Number.isSafeInteger(i))throw new Error(`${i} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`)
return i}readInt64(t){let e=0
const n=(128&this._dataView.getUint8(t+(this._littleEndian?7:0)))>0
let i=!0
for(let r=0;r<8;r++){let o=this._dataView.getUint8(t+(this._littleEndian?r:7-r))
n&&(i?0!==o&&(o=255&~(o-1),i=!1):o=255&~o),e+=o*256**r}return n&&(e=-e),e}readOffset(t){return this._bigTiff?this.readUint64(t):this.readUint32(t)}}function Ae(t){if(void 0!==Object.fromEntries)return Object.fromEntries(t)
const e={}
for(const[n,i]of t)e[n.toLowerCase()]=i
return e}function Re(t){return Ae(t.split("\r\n").map((t=>{const e=t.split(":").map((t=>t.trim()))
return e[0]=e[0].toLowerCase(),e})))}function Le(t){let e,n,i
return t&&([,e,n,i]=t.match(/bytes (\d+)-(\d+)\/(\d+)/),e=parseInt(e,10),n=parseInt(n,10),i=parseInt(i,10)),{start:e,end:n,total:i}}class Me{async fetch(t,e=void 0){return Promise.all(t.map((t=>this.fetchSlice(t,e))))}async fetchSlice(t){throw new Error(`fetching of slice ${t} not possible, not implemented`)}get fileSize(){return null}async close(){}}class Oe extends Map{constructor(t={}){if(super(),!(t.maxSize&&t.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0")
if("number"==typeof t.maxAge&&0===t.maxAge)throw new TypeError("`maxAge` must be a number greater than 0")
this.maxSize=t.maxSize,this.maxAge=t.maxAge||Number.POSITIVE_INFINITY,this.onEviction=t.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(t){if("function"==typeof this.onEviction)for(const[e,n]of t)this.onEviction(e,n.value)}_deleteIfExpired(t,e){return"number"==typeof e.expiry&&e.expiry<=Date.now()&&("function"==typeof this.onEviction&&this.onEviction(t,e.value),this.delete(t))}_getOrDeleteIfExpired(t,e){if(!1===this._deleteIfExpired(t,e))return e.value}_getItemValue(t,e){return e.expiry?this._getOrDeleteIfExpired(t,e):e.value}_peek(t,e){const n=e.get(t)
return this._getItemValue(t,n)}_set(t,e){this.cache.set(t,e),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(t,e){this.oldCache.delete(t),this._set(t,e)}*_entriesAscending(){for(const t of this.oldCache){const[e,n]=t
this.cache.has(e)||!1===this._deleteIfExpired(e,n)&&(yield t)}for(const t of this.cache){const[e,n]=t
!1===this._deleteIfExpired(e,n)&&(yield t)}}get(t){if(this.cache.has(t)){const e=this.cache.get(t)
return this._getItemValue(t,e)}if(this.oldCache.has(t)){const e=this.oldCache.get(t)
if(!1===this._deleteIfExpired(t,e))return this._moveToRecent(t,e),e.value}}set(t,e,{maxAge:n=this.maxAge}={}){const i="number"==typeof n&&n!==Number.POSITIVE_INFINITY?Date.now()+n:void 0
return this.cache.has(t)?this.cache.set(t,{value:e,expiry:i}):this._set(t,{value:e,expiry:i}),this}has(t){return this.cache.has(t)?!this._deleteIfExpired(t,this.cache.get(t)):!!this.oldCache.has(t)&&!this._deleteIfExpired(t,this.oldCache.get(t))}peek(t){return this.cache.has(t)?this._peek(t,this.cache):this.oldCache.has(t)?this._peek(t,this.oldCache):void 0}delete(t){const e=this.cache.delete(t)
return e&&this._size--,this.oldCache.delete(t)||e}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(t){if(!(t&&t>0))throw new TypeError("`maxSize` must be a number greater than 0")
const e=[...this._entriesAscending()],n=e.length-t
n<0?(this.cache=new Map(e),this.oldCache=new Map,this._size=e.length):(n>0&&this._emitEvictions(e.slice(0,n)),this.oldCache=new Map(e.slice(n)),this.cache=new Map,this._size=0),this.maxSize=t}*keys(){for(const[t]of this)yield t}*values(){for(const[,t]of this)yield t}*[Symbol.iterator](){for(const t of this.cache){const[e,n]=t
!1===this._deleteIfExpired(e,n)&&(yield[e,n.value])}for(const t of this.oldCache){const[e,n]=t
this.cache.has(e)||!1===this._deleteIfExpired(e,n)&&(yield[e,n.value])}}*entriesDescending(){let t=[...this.cache]
for(let e=t.length-1;e>=0;--e){const n=t[e],[i,r]=n
!1===this._deleteIfExpired(i,r)&&(yield[i,r.value])}t=[...this.oldCache]
for(let e=t.length-1;e>=0;--e){const n=t[e],[i,r]=n
this.cache.has(i)||!1===this._deleteIfExpired(i,r)&&(yield[i,r.value])}}*entriesAscending(){for(const[t,e]of this._entriesAscending())yield[t,e.value]}get size(){if(!this._size)return this.oldCache.size
let t=0
for(const e of this.oldCache.keys())this.cache.has(e)||t++
return Math.min(this._size+t,this.maxSize)}entries(){return this.entriesAscending()}forEach(t,e=this){for(const[n,i]of this.entriesAscending())t.call(e,i,n,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}class Ne extends Error{constructor(t){super(t),Error.captureStackTrace&&Error.captureStackTrace(this,Ne),this.name="AbortError"}}class De extends Error{constructor(t,e){super(e),this.errors=t,this.message=e,this.name="AggregateError"}}const Fe=De
class ke{constructor(t,e,n=null){this.offset=t,this.length=e,this.data=n}get top(){return this.offset+this.length}}class je{constructor(t,e,n){this.offset=t,this.length=e,this.blockIds=n}}class ze extends Me{constructor(t,{blockSize:e=65536,cacheSize:n=100}={}){super(),this.source=t,this.blockSize=e,this.blockCache=new Oe({maxSize:n,onEviction:(t,e)=>{this.evictedBlocks.set(t,e)}}),this.evictedBlocks=new Map,this.blockRequests=new Map,this.blockIdsToFetch=new Set,this.abortedBlockIds=new Set}get fileSize(){return this.source.fileSize}async fetch(t,e){const n=[],i=[],r=[]
this.evictedBlocks.clear()
for(const{offset:c,length:f}of t){let t=c+f
const{fileSize:e}=this
null!==e&&(t=Math.min(t,e))
for(let o=Math.floor(c/this.blockSize)*this.blockSize;o<t;o+=this.blockSize){const t=Math.floor(o/this.blockSize)
this.blockCache.has(t)||this.blockRequests.has(t)||(this.blockIdsToFetch.add(t),i.push(t)),this.blockRequests.has(t)&&n.push(this.blockRequests.get(t)),r.push(t)}}await async function(t){return new Promise((t=>setTimeout(t,void 0)))}(),this.fetchBlocks(e)
const o=[]
for(const c of i)this.blockRequests.has(c)&&o.push(this.blockRequests.get(c))
await Promise.allSettled(n),await Promise.allSettled(o)
const s=[],a=r.filter((t=>this.abortedBlockIds.has(t)||!this.blockCache.has(t)))
if(a.forEach((t=>this.blockIdsToFetch.add(t))),a.length>0&&e&&!e.aborted){this.fetchBlocks(null)
for(const t of a){const e=this.blockRequests.get(t)
if(!e)throw new Error(`Block ${t} is not in the block requests`)
s.push(e)}await Promise.allSettled(s)}if(e&&e.aborted)throw new Ne("Request was aborted")
const l=r.map((t=>this.blockCache.get(t)||this.evictedBlocks.get(t))),u=l.filter((t=>!t))
if(u.length)throw new Fe(u,"Request failed")
const h=new Map(function(t,e){const n=Array.isArray(t)?t:Array.from(t),i=Array.isArray(e)?e:Array.from(e)
return n.map(((t,e)=>[t,i[e]]))}(r,l))
return this.readSliceData(t,h)}fetchBlocks(t){if(this.blockIdsToFetch.size>0){const e=this.groupBlocks(this.blockIdsToFetch),n=this.source.fetch(e,t)
for(let i=0;i<e.length;++i){const r=e[i]
for(const e of r.blockIds)this.blockRequests.set(e,(async()=>{try{const t=(await n)[i],r=e*this.blockSize,o=r-t.offset,s=Math.min(o+this.blockSize,t.data.byteLength),a=t.data.slice(o,s),l=new ke(r,a.byteLength,a,e)
this.blockCache.set(e,l),this.abortedBlockIds.delete(e)}catch(n){if("AbortError"!==n.name)throw n
n.signal=t,this.blockCache.delete(e),this.abortedBlockIds.add(e)}finally{this.blockRequests.delete(e)}})())}this.blockIdsToFetch.clear()}}groupBlocks(t){const e=Array.from(t).sort(((t,e)=>t-e))
if(0===e.length)return[]
let n=[],i=null
const r=[]
for(const o of e)null===i||i+1===o?(n.push(o),i=o):(r.push(new je(n[0]*this.blockSize,n.length*this.blockSize,n)),n=[o],i=o)
return r.push(new je(n[0]*this.blockSize,n.length*this.blockSize,n)),r}readSliceData(t,e){return t.map((t=>{let n=t.offset+t.length
null!==this.fileSize&&(n=Math.min(this.fileSize,n))
const i=Math.floor(t.offset/this.blockSize),r=Math.floor(n/this.blockSize),o=new ArrayBuffer(t.length),s=new Uint8Array(o)
for(let a=i;a<=r;++a){const i=e.get(a),r=i.offset-t.offset
let o,l=0,u=0
r<0?l=-r:r>0&&(u=r),o=i.top-n<0?i.length-l:n-i.offset-l
const h=new Uint8Array(i.data,l,o)
s.set(h,u)}return o}))}}class Ge{get ok(){return this.status>=200&&this.status<=299}get status(){throw new Error("not implemented")}getHeader(t){throw new Error("not implemented")}async getData(){throw new Error("not implemented")}}class Be{constructor(t){this.url=t}async request({headers:t,signal:e}={}){throw new Error("request is not implemented")}}class qe extends Ge{constructor(t){super(),this.response=t}get status(){return this.response.status}getHeader(t){return this.response.headers.get(t)}async getData(){return this.response.arrayBuffer?await this.response.arrayBuffer():(await this.response.buffer()).buffer}}class Ue extends Be{constructor(t,e){super(t),this.credentials=e}async request({headers:t,signal:e}={}){const n=await fetch(this.url,{headers:t,credentials:this.credentials,signal:e})
return new qe(n)}}class Ze extends Ge{constructor(t,e){super(),this.xhr=t,this.data=e}get status(){return this.xhr.status}getHeader(t){return this.xhr.getResponseHeader(t)}async getData(){return this.data}}class Xe extends Be{constructRequest(t,e){return new Promise(((n,i)=>{const r=new XMLHttpRequest
r.open("GET",this.url),r.responseType="arraybuffer"
for(const[e,o]of Object.entries(t))r.setRequestHeader(e,o)
r.onload=()=>{const t=r.response
n(new Ze(r,t))},r.onerror=i,r.onabort=()=>i(new Ne("Request aborted")),r.send(),e&&(e.aborted&&r.abort(),e.addEventListener("abort",(()=>r.abort())))}))}async request({headers:t,signal:e}={}){return await this.constructRequest(t,e)}}var Ye=n(6397),Ve=n(8012),We=n(6408)
class He extends Ge{constructor(t,e){super(),this.response=t,this.dataPromise=e}get status(){return this.response.statusCode}getHeader(t){return this.response.headers[t]}async getData(){return await this.dataPromise}}class $e extends Be{constructor(t){super(t),this.parsedUrl=We.parse(this.url),this.httpApi="http:"===this.parsedUrl.protocol?Ye:Ve}constructRequest(t,e){return new Promise(((n,i)=>{const r=this.httpApi.get({...this.parsedUrl,headers:t},(t=>{const e=new Promise((e=>{const n=[]
t.on("data",(t=>{n.push(t)})),t.on("end",(()=>{const t=Buffer.concat(n).buffer
e(t)})),t.on("error",i)}))
n(new He(t,e))}))
r.on("error",i),e&&(e.aborted&&r.destroy(new Ne("Request aborted")),e.addEventListener("abort",(()=>r.destroy(new Ne("Request aborted")))))}))}async request({headers:t,signal:e}={}){return await this.constructRequest(t,e)}}class Ke extends Me{constructor(t,e,n,i){super(),this.client=t,this.headers=e,this.maxRanges=n,this.allowFullFile=i,this._fileSize=null}async fetch(t,e){return this.maxRanges>=t.length?this.fetchSlices(t,e):(this.maxRanges>0&&t.length,Promise.all(t.map((t=>this.fetchSlice(t,e)))))}async fetchSlices(t,e){const n=await this.client.request({headers:{...this.headers,Range:`bytes=${t.map((({offset:t,length:e})=>`${t}-${t+e}`)).join(",")}`},signal:e})
if(n.ok){if(206===n.status){const{type:i,params:r}=function(t){const[e,...n]=t.split(";").map((t=>t.trim()))
return{type:e,params:Ae(n.map((t=>t.split("="))))}}(n.getHeader("content-type"))
if("multipart/byteranges"===i){const t=function(t,e){let n=null
const i=new TextDecoder("ascii"),r=[],o=`--${e}`,s=`${o}--`
for(let a=0;a<10;++a)i.decode(new Uint8Array(t,a,o.length))===o&&(n=a)
if(null===n)throw new Error("Could not find initial boundary")
for(;n<t.byteLength;){const e=i.decode(new Uint8Array(t,n,Math.min(o.length+1024,t.byteLength-n)))
if(0===e.length||e.startsWith(s))break
if(!e.startsWith(o))throw new Error("Part does not start with boundary")
const a=e.substr(o.length+2)
if(0===a.length)break
const l=a.indexOf("\r\n\r\n"),u=Re(a.substr(0,l)),{start:h,end:c,total:f}=Le(u["content-range"]),p=n+o.length+l+4,d=parseInt(c,10)+1-parseInt(h,10)
r.push({headers:u,data:t.slice(p,p+d),offset:h,length:d,fileSize:f}),n=p+d+4}return r}(await n.getData(),r.boundary)
return this._fileSize=t[0].fileSize||null,t}const o=await n.getData(),{start:s,end:a,total:l}=Le(n.getHeader("content-range"))
this._fileSize=l||null
const u=[{data:o,offset:s,length:a-s}]
if(t.length>1){const n=await Promise.all(t.slice(1).map((t=>this.fetchSlice(t,e))))
return u.concat(n)}return u}{if(!this.allowFullFile)throw new Error("Server responded with full file")
const t=await n.getData()
return this._fileSize=t.byteLength,[{data:t,offset:0,length:t.byteLength}]}}throw new Error("Error fetching data.")}async fetchSlice(t,e){const{offset:n,length:i}=t,r=await this.client.request({headers:{...this.headers,Range:`bytes=${n}-${n+i}`},signal:e})
if(r.ok){if(206===r.status){const t=await r.getData(),{total:e}=Le(r.getHeader("content-range"))
return this._fileSize=e||null,{data:t,offset:n,length:i}}{if(!this.allowFullFile)throw new Error("Server responded with full file")
const t=await r.getData()
return this._fileSize=t.byteLength,{data:t,offset:0,length:t.byteLength}}}throw new Error("Error fetching data.")}get fileSize(){return this._fileSize}}function Je(t,{blockSize:e,cacheSize:n}){return null===e?t:new ze(t,{blockSize:e,cacheSize:n})}function Qe(t,{forceXHR:e=!1,...n}={}){return"function"!=typeof fetch||e?"undefined"!=typeof XMLHttpRequest?function(t,{headers:e={},maxRanges:n=0,allowFullFile:i=!1,...r}={}){const o=new Xe(t)
return Je(new Ke(o,e,n,i),r)}(t,n):function(t,{headers:e={},maxRanges:n=0,allowFullFile:i=!1,...r}={}){const o=new $e(t)
return Je(new Ke(o,e,n,i),r)}(t,n):function(t,{headers:e={},credentials:n,maxRanges:i=0,allowFullFile:r=!1,...o}={}){const s=new Ue(t,n)
return Je(new Ke(s,e,i,r),o)}(t,n)}class tn extends Me{constructor(t){super(),this.file=t}async fetchSlice(t,e){return new Promise(((n,i)=>{const r=this.file.slice(t.offset,t.offset+t.length),o=new FileReader
o.onload=t=>n(t.target.result),o.onerror=i,o.onabort=i,o.readAsArrayBuffer(r),e&&e.addEventListener("abort",(()=>o.abort()))}))}}function en(t){switch(t){case it.s$.BYTE:case it.s$.ASCII:case it.s$.SBYTE:case it.s$.UNDEFINED:return 1
case it.s$.SHORT:case it.s$.SSHORT:return 2
case it.s$.LONG:case it.s$.SLONG:case it.s$.FLOAT:case it.s$.IFD:return 4
case it.s$.RATIONAL:case it.s$.SRATIONAL:case it.s$.DOUBLE:case it.s$.LONG8:case it.s$.SLONG8:case it.s$.IFD8:return 8
default:throw new RangeError(`Invalid field type: ${t}`)}}function nn(t,e,n,i){let r=null,o=null
const s=en(e)
switch(e){case it.s$.BYTE:case it.s$.ASCII:case it.s$.UNDEFINED:r=new Uint8Array(n),o=t.readUint8
break
case it.s$.SBYTE:r=new Int8Array(n),o=t.readInt8
break
case it.s$.SHORT:r=new Uint16Array(n),o=t.readUint16
break
case it.s$.SSHORT:r=new Int16Array(n),o=t.readInt16
break
case it.s$.LONG:case it.s$.IFD:r=new Uint32Array(n),o=t.readUint32
break
case it.s$.SLONG:r=new Int32Array(n),o=t.readInt32
break
case it.s$.LONG8:case it.s$.IFD8:r=new Array(n),o=t.readUint64
break
case it.s$.SLONG8:r=new Array(n),o=t.readInt64
break
case it.s$.RATIONAL:r=new Uint32Array(2*n),o=t.readUint32
break
case it.s$.SRATIONAL:r=new Int32Array(2*n),o=t.readInt32
break
case it.s$.FLOAT:r=new Float32Array(n),o=t.readFloat32
break
case it.s$.DOUBLE:r=new Float64Array(n),o=t.readFloat64
break
default:throw new RangeError(`Invalid field type: ${e}`)}if(e!==it.s$.RATIONAL&&e!==it.s$.SRATIONAL)for(let a=0;a<n;++a)r[a]=o.call(t,i+a*s)
else for(let a=0;a<n;a+=2)r[a]=o.call(t,i+a*s),r[a+1]=o.call(t,i+(a*s+4))
return e===it.s$.ASCII?new TextDecoder("utf-8").decode(r):r}class rn{constructor(t,e,n){this.fileDirectory=t,this.geoKeyDirectory=e,this.nextIFDByteOffset=n}}class on extends Error{constructor(t){super(`No image at index ${t}`),this.index=t}}class sn{async readRasters(t={}){const{window:e,width:n,height:i}=t
let{resX:r,resY:o,bbox:s}=t
const a=await this.getImage()
let l=a
const u=await this.getImageCount(),h=a.getBoundingBox()
if(e&&s)throw new Error('Both "bbox" and "window" passed.')
if(n||i){if(e){const[t,n]=a.getOrigin(),[i,r]=a.getResolution()
s=[t+e[0]*i,n+e[1]*r,t+e[2]*i,n+e[3]*r]}const t=s||h
if(n){if(r)throw new Error("Both width and resX passed")
r=(t[2]-t[0])/n}if(i){if(o)throw new Error("Both width and resY passed")
o=(t[3]-t[1])/i}}if(r||o){const t=[]
for(let e=0;e<u;++e){const n=await this.getImage(e),{SubfileType:i,NewSubfileType:r}=n.fileDirectory;(0===e||2===i||1&r)&&t.push(n)}t.sort(((t,e)=>t.getWidth()-e.getWidth()))
for(let e=0;e<t.length;++e){const n=t[e],i=(h[2]-h[0])/n.getWidth(),s=(h[3]-h[1])/n.getHeight()
if(l=n,r&&r>i||o&&o>s)break}}let c=e
if(s){const[t,e]=a.getOrigin(),[n,i]=l.getResolution(a)
c=[Math.round((s[0]-t)/n),Math.round((s[1]-e)/i),Math.round((s[2]-t)/n),Math.round((s[3]-e)/i)],c=[Math.min(c[0],c[2]),Math.min(c[1],c[3]),Math.max(c[0],c[2]),Math.max(c[1],c[3])]}return l.readRasters({...t,window:c})}}class an extends sn{constructor(t,e,n,i,r={}){super(),this.source=t,this.littleEndian=e,this.bigTiff=n,this.firstIFDOffset=i,this.cache=r.cache||!1,this.ifdRequests=[],this.ghostValues=null}async getSlice(t,e){const n=this.bigTiff?4048:1024
return new Pe((await this.source.fetch([{offset:t,length:void 0!==e?e:n}]))[0],t,this.littleEndian,this.bigTiff)}async parseFileDirectoryAt(t){const e=this.bigTiff?20:12,n=this.bigTiff?8:2
let i=await this.getSlice(t)
const r=this.bigTiff?i.readUint64(t):i.readUint16(t),o=r*e+(this.bigTiff?16:6)
i.covers(t,o)||(i=await this.getSlice(t,o))
const s={}
let a=t+(this.bigTiff?8:2)
for(let h=0;h<r;a+=e,++h){const t=i.readUint16(a),e=i.readUint16(a+2),n=this.bigTiff?i.readUint64(a+4):i.readUint32(a+4)
let r,o
const l=en(e),u=a+(this.bigTiff?12:8)
if(l*n<=(this.bigTiff?8:4))r=nn(i,e,n,u)
else{const t=i.readOffset(u),o=en(e)*n
r=i.covers(t,o)?nn(i,e,n,t):nn(await this.getSlice(t,o),e,n,t)}o=1===n&&-1===it.NZ.indexOf(t)&&e!==it.s$.RATIONAL&&e!==it.s$.SRATIONAL?r[0]:r,s[it.$[t]]=o}const l=function(t){const e=t.GeoKeyDirectory
if(!e)return null
const n={}
for(let i=4;i<=4*e[3];i+=4){const r=it.Hm[e[i]],o=e[i+1]?it.$[e[i+1]]:null,s=e[i+2],a=e[i+3]
let l=null
if(o){if(l=t[o],null==l)throw new Error(`Could not get value of geoKey '${r}'.`)
"string"==typeof l?l=l.substring(a,a+s-1):l.subarray&&(l=l.subarray(a,a+s),1===s&&(l=l[0]))}else l=a
n[r]=l}return n}(s),u=i.readOffset(t+n+e*r)
return new rn(s,l,u)}async requestIFD(t){if(this.ifdRequests[t])return this.ifdRequests[t]
if(0===t)return this.ifdRequests[t]=this.parseFileDirectoryAt(this.firstIFDOffset),this.ifdRequests[t]
if(!this.ifdRequests[t-1])try{this.ifdRequests[t-1]=this.requestIFD(t-1)}catch(e){if(e instanceof on)throw new on(t)
throw e}return this.ifdRequests[t]=(async()=>{const e=await this.ifdRequests[t-1]
if(0===e.nextIFDByteOffset)throw new on(t)
return this.parseFileDirectoryAt(e.nextIFDByteOffset)})(),this.ifdRequests[t]}async getImage(t=0){const e=await this.requestIFD(t)
return new Te(e.fileDirectory,e.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source)}async getImageCount(){let t=0,e=!0
for(;e;)try{await this.requestIFD(t),++t}catch(t){if(!(t instanceof on))throw t
e=!1}return t}async getGhostValues(){const t=this.bigTiff?16:8
if(this.ghostValues)return this.ghostValues
let e=await this.getSlice(t,130)
if("GDAL_STRUCTURAL_METADATA_SIZE="===nn(e,it.s$.ASCII,30,t)){const n=nn(e,it.s$.ASCII,130,t).split("\n")[0],i=Number(n.split("=")[1].split(" ")[0])+n.length
i>130&&(e=await this.getSlice(t,i))
const r=nn(e,it.s$.ASCII,i,t)
this.ghostValues={},r.split("\n").filter((t=>t.length>0)).map((t=>t.split("="))).forEach((([t,e])=>{this.ghostValues[t]=e}))}return this.ghostValues}static async fromSource(t,e,n){const i=(await t.fetch([{offset:0,length:1024}],n))[0],r=new Ie(i),o=r.getUint16(0,0)
let s
if(18761===o)s=!0
else{if(19789!==o)throw new TypeError("Invalid byte order value.")
s=!1}const a=r.getUint16(2,s)
let l
if(42===a)l=!1
else{if(43!==a)throw new TypeError("Invalid magic number.")
if(l=!0,8!==r.getUint16(4,s))throw new Error("Unsupported offset byte-size.")}const u=l?r.getUint64(8,s):r.getUint32(4,s)
return new an(t,s,l,u,e)}close(){return"function"==typeof this.source.close&&this.source.close()}}class ln extends sn{constructor(t,e){super(),this.mainFile=t,this.overviewFiles=e,this.imageFiles=[t].concat(e),this.fileDirectoriesPerFile=null,this.fileDirectoriesPerFileParsing=null,this.imageCount=null}async parseFileDirectoriesPerFile(){const t=[this.mainFile.parseFileDirectoryAt(this.mainFile.firstIFDOffset)].concat(this.overviewFiles.map((t=>t.parseFileDirectoryAt(t.firstIFDOffset))))
return this.fileDirectoriesPerFile=await Promise.all(t),this.fileDirectoriesPerFile}async getImage(t=0){await this.getImageCount(),await this.parseFileDirectoriesPerFile()
let e=0,n=0
for(let i=0;i<this.imageFiles.length;i++){const r=this.imageFiles[i]
for(let o=0;o<this.imageCounts[i];o++){if(t===e){const t=await r.requestIFD(n)
return new Te(t.fileDirectory,t.geoKeyDirectory,r.dataView,r.littleEndian,r.cache,r.source)}e++,n++}n=0}throw new RangeError("Invalid image index")}async getImageCount(){if(null!==this.imageCount)return this.imageCount
const t=[this.mainFile.getImageCount()].concat(this.overviewFiles.map((t=>t.getImageCount())))
return this.imageCounts=await Promise.all(t),this.imageCount=this.imageCounts.reduce(((t,e)=>t+e),0),this.imageCount}}var un=n(7307),hn=n(3311)
function cn(t,e){if(!t)return!1
if(!0===t)return!0
if(3!==e.getSamplesPerPixel())return!1
const n=e.fileDirectory.PhotometricInterpretation,i=it.ub
return n===i.CMYK||n===i.YCbCr||n===i.CIELab||n===i.ICCLab}const fn="STATISTICS_MAXIMUM",pn="STATISTICS_MINIMUM"
let dn
function gn(t){try{return t.getBoundingBox()}catch(e){return[0,0,t.getWidth(),t.getHeight()]}}function _n(t){try{return t.getOrigin().slice(0,2)}catch(e){return[0,t.getHeight()]}}function mn(t,e){try{return t.getResolution(e)}catch(n){return[e.getWidth()/t.getWidth(),e.getHeight()/t.getHeight()]}}function yn(t){const e=t.geoKeys
if(!e)return null
if(e.ProjectedCSTypeGeoKey&&32767!==e.ProjectedCSTypeGeoKey){const t="EPSG:"+e.ProjectedCSTypeGeoKey
let n=(0,v.Jt)(t)
if(!n){const i=(0,hn.q)(e.ProjLinearUnitsGeoKey)
i&&(n=new v.MF({code:t,units:i}))}return n}if(e.GeographicTypeGeoKey&&32767!==e.GeographicTypeGeoKey){const t="EPSG:"+e.GeographicTypeGeoKey
let n=(0,v.Jt)(t)
if(!n){const i=(0,hn.q)(e.GeogAngularUnitsGeoKey)
i&&(n=new v.MF({code:t,units:i}))}return n}return null}function vn(t){return t.getImageCount().then((function(e){const n=new Array(e)
for(let i=0;i<e;++i)n[i]=t.getImage(i)
return Promise.all(n)}))}function xn(t,e){let n
return n=t.blob?async function(t,e){return an.fromSource(new tn(t),void 0)}(t.blob):t.overviews?async function(t,e=[],n={},i){const r=await an.fromSource(Qe(t,n),i),o=await Promise.all(e.map((t=>an.fromSource(Qe(t,n)))))
return new ln(r,o)}(t.url,t.overviews,e):async function(t,e={},n){return an.fromSource(Qe(t,e),n)}(t.url,e),n.then(vn)}function bn(t,e,n,i,r){if(Array.isArray(t)){const o=t.length
if(!Array.isArray(e)||o!=e.length){const t=new Error(i)
throw r(t),t}for(let s=0;s<o;++s)bn(t[s],e[s],n,i,r)}else if(Math.abs(t-e)>n*t)throw new Error(i)}function En(t){return t instanceof Int8Array?-128:t instanceof Int16Array?-32768:t instanceof Int32Array?-2147483648:t instanceof Float32Array?12e-39:0}function wn(t){return t instanceof Int8Array?127:t instanceof Uint8Array||t instanceof Uint8ClampedArray?255:t instanceof Int16Array?32767:t instanceof Uint16Array?65535:t instanceof Int32Array?2147483647:t instanceof Uint32Array?4294967295:t instanceof Float32Array?34e37:255}class Sn extends nt{constructor(t){super({state:"loading",tileGrid:null,projection:t.projection||null,opaque:t.opaque,transition:t.transition,interpolate:!1!==t.interpolate,wrapX:t.wrapX}),this.sourceInfo_=t.sources
const e=this.sourceInfo_.length
this.sourceOptions_=t.sourceOptions,this.sourceImagery_=new Array(e),this.sourceMasks_=new Array(e),this.resolutionFactors_=new Array(e),this.samplesPerPixel_,this.nodataValues_,this.metadata_,this.normalize_=!1!==t.normalize,this.addAlpha_=!1,this.error_=null,this.convertToRGB_=t.convertToRGB||!1,this.setKey(this.sourceInfo_.map((t=>t.url)).join(","))
const n=this,i=new Array(e)
for(let r=0;r<e;++r)i[r]=xn(this.sourceInfo_[r],this.sourceOptions_)
Promise.all(i).then((function(t){n.configure_(t)})).catch((function(t){(0,un.z3)(t),n.error_=t,n.setState("error")}))}getError(){return this.error_}determineProjection(t){const e=t[0]
for(let n=e.length-1;n>=0;--n){const t=yn(e[n])
if(t){this.projection=t
break}}}configure_(t){let e,n,i,o,s
const a=new Array(t.length),l=new Array(t.length),u=new Array(t.length)
let h=0
const c=t.length
for(let d=0;d<c;++d){const c=[],f=[]
t[d].forEach((t=>{4&~(t.fileDirectory.NewSubfileType||0)?c.push(t):f.push(t)}))
const p=c.length
if(f.length>0&&f.length!==p)throw new Error(`Expected one mask per image found ${f.length} masks and ${p} images`)
let g,_
const m=new Array(p),y=new Array(p),v=new Array(p)
l[d]=new Array(p),u[d]=new Array(p)
for(let t=0;t<p;++t){const e=c[t],n=e.getGDALNoData()
u[d][t]=e.getGDALMetadata(0),l[d][t]=n
const i=this.sourceInfo_[d].bands
a[d]=i?i.length:e.getSamplesPerPixel()
const r=p-(t+1)
g||(g=gn(e)),_||(_=_n(e))
const o=mn(e,c[0])
v[r]=o[0]
const s=[e.getTileWidth(),e.getTileHeight()]
s[0]!==s[1]&&s[1]<256&&(s[0]=256,s[1]=256),m[r]=s
const h=o[0]/Math.abs(o[1])
y[r]=[s[0],s[1]/h]}if(e?(0,r._N)(e,g,e):e=g,n?bn(n,_,0,`Origin mismatch for source ${d}, got [${_}] but expected [${n}]`,this.viewRejector):n=_,s){s.length-h>v.length&&(h=s.length-v.length)
const t=s[s.length-1]/v[v.length-1]
this.resolutionFactors_[d]=t
const e=v.map((e=>e*t)),n=`Resolution mismatch for source ${d}, got [${e}] but expected [${s}]`
bn(s.slice(h,s.length),e,.02,n,this.viewRejector)}else s=v,this.resolutionFactors_[d]=1
i?bn(i.slice(h,i.length),y,.01,`Tile size mismatch for source ${d}`,this.viewRejector):i=y,o?bn(o.slice(h,o.length),m,0,`Tile size mismatch for source ${d}`,this.viewRejector):o=m,this.sourceImagery_[d]=c.reverse(),this.sourceMasks_[d]=f.reverse()}for(let r=0,d=this.sourceImagery_.length;r<d;++r){const t=this.sourceImagery_[r]
for(;t.length<s.length;)t.unshift(void 0)}this.getProjection()||this.determineProjection(t),this.samplesPerPixel_=a,this.nodataValues_=l,this.metadata_=u
t:for(let r=0;r<c;++r){if(void 0!==this.sourceInfo_[r].nodata){this.addAlpha_=!0
break}if(this.sourceMasks_[r].length){this.addAlpha_=!0
break}const t=l[r],e=this.sourceInfo_[r].bands
if(e){for(let n=0;n<e.length;++n)if(null!==t[e[n]-1]){this.addAlpha_=!0
break t}}else for(let n=0;n<t.length;++n)if(null!==t[n]){this.addAlpha_=!0
break t}}let f=this.addAlpha_?1:0
for(let r=0;r<c;++r)f+=a[r]
this.bandCount=f
const p=new I({extent:e,minZoom:h,origin:n,resolutions:s,tileSizes:i})
this.tileGrid=p,this.setTileSizes(o),this.setLoader(this.loadTile_.bind(this)),this.setState("ready"),2===s.length?s=[s[0],s[1],s[1]/2]:1===s.length&&(s=[2*s[0],s[0],s[0]/2]),this.viewResolver({showFullExtent:!0,projection:this.projection,resolutions:s,center:(0,v.te)((0,r.q1)(e),this.projection),extent:(0,v.JR)(e,this.projection),zoom:1})}loadTile_(t,e,n){const i=this.getTileSize(t),r=this.sourceImagery_.length,o=new Array(2*r),s=this.nodataValues_,a=this.sourceInfo_,l=(dn||(dn=new lt),dn)
for(let u=0;u<r;++u){const h=a[u],c=this.resolutionFactors_[u],f=[Math.round(e*(i[0]*c)),Math.round(n*(i[1]*c)),Math.round((e+1)*(i[0]*c)),Math.round((n+1)*(i[1]*c))],p=this.sourceImagery_[u][t]
let d,g
h.bands&&(d=h.bands.map((function(t){return t-1}))),g="nodata"in h&&null!==h.nodata?h.nodata:d?d.map((function(t){return s[u][t]})):s[u]
const _={window:f,width:i[0],height:i[1],samples:d,fillValue:g,pool:l,interleave:!1}
cn(this.convertToRGB_,p)?o[u]=p.readRGB(_):o[u]=p.readRasters(_)
const m=r+u,y=this.sourceMasks_[u][t]
o[m]=y?y.readRasters({window:f,width:i[0],height:i[1],samples:[0],pool:l,interleave:!1}):Promise.resolve(null)}return Promise.all(o).then(this.composeTile_.bind(this,i)).catch((function(t){throw(0,un.z3)(t),t}))}composeTile_(t,e){const n=this.metadata_,i=this.sourceInfo_,r=this.sourceImagery_.length,o=this.bandCount,s=this.samplesPerPixel_,a=this.nodataValues_,l=this.normalize_,u=this.addAlpha_,h=t[0]*t[1],c=h*o
let f
f=l?new Uint8Array(c):new Float32Array(c)
let p=0
for(let d=0;d<h;++d){let t=u
for(let o=0;o<r;++o){const h=i[o]
let c,g,_=h.min,m=h.max
if(l){const t=n[o][0]
void 0===_&&(_=t&&pn in t?parseFloat(t[pn]):En(e[o][0])),void 0===m&&(m=t&&fn in t?parseFloat(t[fn]):wn(e[o][0])),c=255/(m-_),g=-_*c}for(let n=0;n<s[o];++n){const i=e[o][n][d]
let r
if(r=l?(0,E.qE)(c*i+g,0,255):i,u){let e=h.nodata
if(void 0===e){let t
t=h.bands?h.bands[n]-1:n,e=a[o][t]}const s=isNaN(e);(!s&&i!==e||s&&!isNaN(i))&&(t=!1,f[p]=r)}else f[p]=r
p++}if(!t){const n=e[r+o]
n&&!n[0][d]&&(t=!0)}}u&&(t||(f[p]=255),p++)}return f}}Sn.prototype.getView
const Cn=Sn
var Tn=n(5548)
const In=class extends U{constructor(t){const e=!!t.highDpi,n=!(!0===t.overlay)
super({attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:"anonymous",interpolate:t.interpolate,opaque:n,projection:"EPSG:3857",reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:"loading",tileLoadFunction:t.tileLoadFunction,tilePixelRatio:e?2:1,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:t.zDirection}),this.apiKey_=t.key,this.error_=null
const i={mapType:t.mapType||"roadmap",language:t.language||"en-US",region:t.region||"US"}
t.imageFormat&&(i.imageFormat=t.imageFormat),t.scale&&(i.scale=t.scale),e&&(i.highDpi=!0),t.layerTypes&&(i.layerTypes=t.layerTypes),t.styles&&(i.styles=t.styles),!0===t.overlay&&(i.overlay=!0),this.sessionTokenRequest_=i,this.sessionTokenValue_,this.sessionRefreshId_,this.previousViewportAttribution_,this.previousViewportExtent_,this.createSession_()}getError(){return this.error_}fetchSessionToken(t,e){return fetch(t,e)}async createSession_(){const t="https://tile.googleapis.com/v1/createSession?key="+this.apiKey_,e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.sessionTokenRequest_)},n=await this.fetchSessionToken(t,e)
if(!n.ok){try{const t=await n.json()
this.error_=new Error(t.error.message)}catch{this.error_=new Error("Error fetching session token")}return void this.setState("error")}const i=await n.json(),r=this.getTilePixelRatio(1),o=[i.tileWidth/r,i.tileHeight/r]
this.tileGrid=A({extent:L(this.getProjection()),maxZoom:22,tileSize:o})
const s=i.session
this.sessionTokenValue_=s
const a=this.apiKey_
this.tileUrlFunction=function(t,e,n){return`https://tile.googleapis.com/v1/2dtiles/${t[0]}/${t[1]}/${t[2]}?session=${s}&key=${a}`}
const l=1e3*parseInt(i.expiry,10),u=Math.max(l-Date.now()-6e4,1)
this.sessionRefreshId_=setTimeout((()=>this.createSession_()),u),this.setAttributions(this.fetchAttributions_.bind(this)),this.setState("ready")}async fetchAttributions_(t){if(t.viewHints[Tn.A.ANIMATING]||t.viewHints[Tn.A.INTERACTING]||t.animate)return this.previousViewportAttribution_
const[e,n]=(0,v.WP)((0,r.R)(t.extent),t.viewState.projection),[i,o]=(0,v.WP)((0,r.WU)(t.extent),t.viewState.projection),s=`zoom=${this.getTileGrid().getZForResolution(t.viewState.resolution,this.zDirection)}&north=${o}&south=${n}&east=${i}&west=${e}`
if(this.previousViewportExtent_==s)return this.previousViewportAttribution_
this.previousViewportExtent_=s
const a=`https://tile.googleapis.com/tile/v1/viewport?session=${this.sessionTokenValue_}&key=${this.apiKey_}&${s}`
return this.previousViewportAttribution_=await fetch(a).then((t=>t.json())).then((t=>t.copyright)),this.previousViewportAttribution_}disposeInternal(){clearTimeout(this.sessionRefreshId_),super.disposeInternal()}}
var Pn=n(8454)
class An extends s.A{constructor(t,e,n,i,r,o,s){super(e,n,i,r,o,s),this.zoomifyImage_=null,this.tileSize_=t}getImage(){if(this.zoomifyImage_)return this.zoomifyImage_
const t=super.getImage()
if(this.state==c.A.LOADED){const e=this.tileSize_
if(t.width==e[0]&&t.height==e[1])return this.zoomifyImage_=t,t
const n=(0,Pn.Y)(e[0],e[1])
return n.drawImage(t,0,0),this.zoomifyImage_=n.canvas,n.canvas}return t}}const Rn=class extends U{constructor(t){const e=t.size,n=void 0!==t.tierSizeCalculation?t.tierSizeCalculation:"default",i=t.tilePixelRatio||1,o=e[0],s=e[1],a=[],l=t.tileSize||b.R
let u=l*i
switch(n){case"default":for(;o>u||s>u;)a.push([Math.ceil(o/u),Math.ceil(s/u)]),u+=u
break
case"truncated":let t=o,e=s
for(;t>u||e>u;)a.push([Math.ceil(t/u),Math.ceil(e/u)]),t>>=1,e>>=1
break
default:throw new Error("Unknown `tierSizeCalculation` configured")}a.push([1,1]),a.reverse()
const h=[i],c=[0]
for(let r=1,x=a.length;r<x;r++)h.push(i<<r),c.push(a[r-1][0]*a[r-1][1]+c[r-1])
h.reverse()
const f=new I({tileSize:l,extent:t.extent||[0,-s,o,0],resolutions:h})
let p=t.url
!p||p.includes("{TileGroup}")||p.includes("{tileIndex}")||(p+="{TileGroup}/{z}-{x}-{y}.jpg")
const d=z(p)
let g=l*i
const _=k(d.map((function(t){return function(e,n,i){if(!e)return
const r=e[0],o=e[1],s=e[2],l=o+s*a[r][0],u={z:r,x:o,y:s,tileIndex:l,TileGroup:"TileGroup"+((l+c[r])/g|0)}
return t.replace(/\{(\w+?)\}/g,(function(t,e){return u[e]}))}}))),m=An.bind(null,(0,C.xq)(l*i))
super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,tilePixelRatio:i,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:m,tileGrid:f,tileUrlFunction:_,transition:t.transition}),this.zDirection=t.zDirection
const y=_(f.getTileCoordForCoordAndResolution((0,r.q1)(f.getExtent()),h[h.length-1]),1,null),v=new Image
v.addEventListener("error",(()=>{g=l,this.changed()})),v.src=y}},Ln="version1",Mn="version2",On="version3",Nn={}
Nn[Ln]={level0:{supports:[],formats:[],qualities:["native"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["native"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["native","color","grey","bitonal"]}},Nn[Mn]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByDistortedWh","sizeByWh"],formats:["jpg","png"],qualities:["default","bitonal"]}},Nn[On]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","regionSquare","sizeByW","sizeByH","sizeByWh"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionSquare","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["default"]}},Nn.none={none:{supports:[],formats:[],qualities:[]}}
const Dn={}
function Fn(t){return t.toLocaleString("en",{maximumFractionDigits:10})}Dn[Ln]=function(t){let e=t.getComplianceLevelSupportedFeatures()
return void 0===e&&(e=Nn[Ln].level0),{url:void 0===t.imageInfo["@id"]?void 0:t.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),supports:e.supports,formats:[...e.formats,void 0===t.imageInfo.formats?[]:t.imageInfo.formats],qualities:[...e.qualities,void 0===t.imageInfo.qualities?[]:t.imageInfo.qualities],resolutions:t.imageInfo.scale_factors,tileSize:void 0!==t.imageInfo.tile_width?void 0!==t.imageInfo.tile_height?[t.imageInfo.tile_width,t.imageInfo.tile_height]:[t.imageInfo.tile_width,t.imageInfo.tile_width]:null!=t.imageInfo.tile_height?[t.imageInfo.tile_height,t.imageInfo.tile_height]:void 0}},Dn[Mn]=function(t){const e=t.getComplianceLevelSupportedFeatures(),n=Array.isArray(t.imageInfo.profile)&&t.imageInfo.profile.length>1,i=n&&t.imageInfo.profile[1].supports?t.imageInfo.profile[1].supports:[],r=n&&t.imageInfo.profile[1].formats?t.imageInfo.profile[1].formats:[],o=n&&t.imageInfo.profile[1].qualities?t.imageInfo.profile[1].qualities:[]
return{url:t.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),sizes:void 0===t.imageInfo.sizes?void 0:t.imageInfo.sizes.map((function(t){return[t.width,t.height]})),tileSize:void 0===t.imageInfo.tiles?void 0:[t.imageInfo.tiles.map((function(t){return t.width}))[0],t.imageInfo.tiles.map((function(t){return void 0===t.height?t.width:t.height}))[0]],resolutions:void 0===t.imageInfo.tiles?void 0:t.imageInfo.tiles.map((function(t){return t.scaleFactors}))[0],supports:[...e.supports,...i],formats:[...e.formats,...r],qualities:[...e.qualities,...o]}},Dn[On]=function(t){const e=t.getComplianceLevelSupportedFeatures(),n=void 0===t.imageInfo.extraFormats?e.formats:[...e.formats,...t.imageInfo.extraFormats],i=void 0!==t.imageInfo.preferredFormats&&Array.isArray(t.imageInfo.preferredFormats)&&t.imageInfo.preferredFormats.length>0?t.imageInfo.preferredFormats.filter((function(t){return["jpg","png","gif"].includes(t)})).reduce((function(t,e){return void 0===t&&n.includes(e)?e:t}),void 0):void 0
return{url:t.imageInfo.id,sizes:void 0===t.imageInfo.sizes?void 0:t.imageInfo.sizes.map((function(t){return[t.width,t.height]})),tileSize:void 0===t.imageInfo.tiles?void 0:[t.imageInfo.tiles.map((function(t){return t.width}))[0],t.imageInfo.tiles.map((function(t){return t.height}))[0]],resolutions:void 0===t.imageInfo.tiles?void 0:t.imageInfo.tiles.map((function(t){return t.scaleFactors}))[0],supports:void 0===t.imageInfo.extraFeatures?e.supports:[...e.supports,...t.imageInfo.extraFeatures],formats:n,qualities:void 0===t.imageInfo.extraQualities?e.qualities:[...e.qualities,...t.imageInfo.extraQualities],preferredFormat:i}}
const kn=class extends U{constructor(t){const e=t||{}
let n=e.url||""
n+=n.lastIndexOf("/")===n.length-1||""===n?"":"/"
const i=e.version||Mn,o=e.sizes||[],s=e.size;(0,y.v)(null!=s&&Array.isArray(s)&&2==s.length&&!isNaN(s[0])&&s[0]>0&&!isNaN(s[1])&&s[1]>0,"Missing or invalid `size`")
const a=s[0],l=s[1],u=e.tileSize,h=e.tilePixelRatio||1,c=e.format||"jpg",f=e.quality||(e.version==Ln?"native":"default")
let p=e.resolutions||[]
const d=e.supports||[],g=e.extent||[0,-l,a,0],_=null!=o&&Array.isArray(o)&&o.length>0,m=void 0!==u&&("number"==typeof u&&Number.isInteger(u)&&u>0||Array.isArray(u)&&u.length>0),v=null!=d&&Array.isArray(d)&&(d.includes("regionByPx")||d.includes("regionByPct"))&&(d.includes("sizeByWh")||d.includes("sizeByH")||d.includes("sizeByW")||d.includes("sizeByPct"))
let x,E,w
if(p.sort((function(t,e){return e-t})),m||v)if(null!=u&&("number"==typeof u&&Number.isInteger(u)&&u>0?(x=u,E=u):Array.isArray(u)&&u.length>0&&((1==u.length||null==u[1]&&Number.isInteger(u[0]))&&(x=u[0],E=u[0]),2==u.length&&(Number.isInteger(u[0])&&Number.isInteger(u[1])?(x=u[0],E=u[1]):null==u[0]&&Number.isInteger(u[1])&&(x=u[1],E=u[1])))),void 0!==x&&void 0!==E||(x=b.R,E=b.R),0==p.length){w=Math.max(Math.ceil(Math.log(a/x)/Math.LN2),Math.ceil(Math.log(l/E)/Math.LN2))
for(let t=w;t>=0;t--)p.push(Math.pow(2,t))}else{const t=Math.max(...p)
w=Math.round(Math.log(t)/Math.LN2)}else if(x=a,E=l,p=[],_){o.sort((function(t,e){return t[0]-e[0]})),w=-1
const t=[]
for(let e=0;e<o.length;e++){const n=a/o[e][0]
p.length>0&&p[p.length-1]==n?t.push(e):(p.push(n),w++)}if(t.length>0)for(let e=0;e<t.length;e++)o.splice(t[e]-e,1)}else p.push(1),o.push([a,l]),w=0
const S=new I({tileSize:[x,E],extent:g,origin:(0,r.Py)(g),resolutions:p}),T=An.bind(null,(0,C.xq)(u||256).map((function(t){return t*h})))
super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:e.state,tileClass:T,tileGrid:S,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:function(t,e,r){let s,u
const h=t[0]
if(h>w)return
const g=t[1],y=t[2],b=p[h]
if(!(void 0===g||void 0===y||void 0===b||g<0||Math.ceil(a/b/x)<=g||y<0||Math.ceil(l/b/E)<=y)){if(v||m){const t=g*x*b,e=y*E*b
let n=x*b,r=E*b,o=x,h=E
t+n>a&&(n=a-t),e+r>l&&(r=l-e),t+x*b>a&&(o=Math.floor((a-t+b-1)/b)),e+E*b>l&&(h=Math.floor((l-e+b-1)/b)),0==t&&n==a&&0==e&&r==l?s="full":!v||d.includes("regionByPx")?s=t+","+e+","+n+","+r:d.includes("regionByPct")&&(s="pct:"+Fn(t/a*100)+","+Fn(e/l*100)+","+Fn(n/a*100)+","+Fn(r/l*100)),i!=On||v&&!d.includes("sizeByWh")?!v||d.includes("sizeByW")?u=o+",":d.includes("sizeByH")?u=","+h:d.includes("sizeByWh")?u=o+","+h:d.includes("sizeByPct")&&(u="pct:"+Fn(100/b)):u=o+","+h}else if(s="full",_){const t=o[h][0],e=o[h][1]
u=i==On?t==a&&e==l?"max":t+","+e:t==a?"full":t+","}else u=i==On?"max":"full"
return n+s+"/"+u+"/0/"+f+"."+c}},transition:e.transition}),this.zDirection=e.zDirection}}
var jn=n(1410),zn=n(5643),Gn=n(7028),Bn=n(7486),qn=n(6582),Un=n(1270),Zn=n(4757)
class Xn extends zn.Ay{constructor(t,e,n,i,o,s,a){let l=t.getExtent()
l&&t.canWrapX()&&(l=l.slice(),l[0]=-1/0,l[2]=1/0)
let u=e.getExtent()
u&&e.canWrapX()&&(u=u.slice(),u[0]=-1/0,u[2]=1/0)
const h=u?(0,r._N)(n,u):n,c=(0,r.q1)(h),f=(0,qn.KQ)(t,e,c,i),p=Gn.l,d=new Bn.A(t,e,h,l,f*p,i),g=d.calculateSourceExtent(),_=(0,r.Im)(g)?null:s(g,f,o),m=_?jn.A.IDLE:jn.A.EMPTY,y=_?_.getPixelRatio():1
super(n,i,y,m),this.targetProj_=e,this.maxSourceExtent_=l,this.triangulation_=d,this.targetResolution_=i,this.targetExtent_=n,this.sourceImage_=_,this.sourcePixelRatio_=y,this.interpolate_=a,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==jn.A.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const t=this.sourceImage_.getState()
if(t==jn.A.LOADED){const t=(0,r.RG)(this.targetExtent_)/this.targetResolution_,e=(0,r.Oq)(this.targetExtent_)/this.targetResolution_
this.canvas_=(0,qn.XX)(t,e,this.sourcePixelRatio_,(0,Un.m)(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=t,this.changed()}load(){if(this.state==jn.A.IDLE){this.state=jn.A.LOADING,this.changed()
const t=this.sourceImage_.getState()
t==jn.A.LOADED||t==jn.A.ERROR?this.reproject_():(this.sourceListenerKey_=(0,Zn.KT)(this.sourceImage_,o.A.CHANGE,(function(t){const e=this.sourceImage_.getState()
e!=jn.A.LOADED&&e!=jn.A.ERROR||(this.unlistenSource_(),this.reproject_())}),this),this.sourceImage_.load())}}unlistenSource_(){(0,Zn.JH)(this.sourceListenerKey_),this.sourceListenerKey_=null}}const Yn=Xn,Vn=4
class Wn extends g.Ay{constructor(t,e){super(t),this.image=e}}class Hn extends _.A{constructor(t){super({attributions:t.attributions,projection:t.projection,state:t.state,interpolate:void 0===t.interpolate||t.interpolate}),this.on,this.once,this.un,this.loader=t.loader||null,this.resolutions_=void 0!==t.resolutions?t.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=!!t.loader&&0===t.loader.length,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(t){this.resolutions_=t}findNearestResolution(t){const e=this.getResolutions()
return e&&(t=e[(0,S.FT)(e,t,0)]),t}getImage(t,e,n,i){const o=this.getProjection()
if(!o||!i||(0,v.tI)(o,i))return o&&(i=o),this.getImageInternal(t,e,n,i)
if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&(0,v.tI)(this.reprojectedImage_.getProjection(),i)&&this.reprojectedImage_.getResolution()==e&&(0,r.aI)(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_
this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new Yn(o,i,t,e,n,((t,e,n)=>this.getImageInternal(t,e,n,o)),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(t,e,n,i){if(this.loader){const s=Kn(t,e,n,1),a=this.findNearestResolution(e)
if(this.image&&(this.static_||this.wantedProjection_===i&&(this.wantedExtent_&&(0,r.ms)(this.wantedExtent_,s)||(0,r.ms)(this.image.getExtent(),s))&&(this.wantedResolution_&&(0,Un.m)(this.wantedResolution_)===a||(0,Un.m)(this.image.getResolution())===a)))return this.image
this.wantedProjection_=i,this.wantedExtent_=s,this.wantedResolution_=a,this.image=new zn.Ay(s,a,n,this.loader),this.image.addEventListener(o.A.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(t){const e=t.target
let n
switch(e.getState()){case jn.A.LOADING:this.loading=!0,n="imageloadstart"
break
case jn.A.LOADED:this.loading=!1,n="imageloadend"
break
case jn.A.ERROR:this.loading=!1,n="imageloaderror"
break
default:return}this.hasListener(n)&&this.dispatchEvent(new Wn(n,e))}}function $n(t,e){t.getImage().src=e}function Kn(t,e,n,i){const o=e/n,s=(0,r.q1)(t),a=(0,E.mk)((0,r.RG)(t)/o,Vn),l=(0,E.mk)((0,r.Oq)(t)/o,Vn),u=a+2*(0,E.mk)((i-1)*a/2,Vn),h=l+2*(0,E.mk)((i-1)*l/2,Vn)
return(0,r.Bg)(s,o,0,[u,h])}const Jn=Hn
function Qn(t,e){const n=[]
Object.keys(e).forEach((function(t){null!==e[t]&&void 0!==e[t]&&n.push(t+"="+encodeURIComponent(e[t]))}))
const i=n.join("&")
return t=t.replace(/[?&]$/,""),(t+=t.includes("?")?"&":"?")+i}function ti(t,e,n,i,o,s){const a=o.getCode().split(/:(?=\d+$)/).pop(),l=n/i,u=[(0,E.LI)((0,r.RG)(e)/l,Vn),(0,E.LI)((0,r.Oq)(e)/l,Vn)]
return s.SIZE=u[0]+","+u[1],s.BBOX=e.join(","),s.BBOXSR=a,s.IMAGESR=a,s.DPI=Math.round(s.DPI?s.DPI*i:90*i),Qn(t.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage"),s)}function ei(t){const e=t.load?t.load:zn.D4,n=(0,v.Jt)(t.projection||"EPSG:3857")
return function(i,o,s){s=t.hidpi?s:1
const a={F:"image",FORMAT:"PNG32",TRANSPARENT:!0}
Object.assign(a,t.params),i=Kn(i,o,s,t.ratio)
const l=ti(t.url,i,o,s,n,a),u=new Image
return null!==t.crossOrigin&&(u.crossOrigin=t.crossOrigin),e(u,l).then((t=>{const e=(0,r.RG)(i)/t.width*s
return{image:t,extent:i,resolution:e,pixelRatio:s}}))}}const ni=class extends Jn{constructor(t){super({attributions:(t=t||{}).attributions,interpolate:t.interpolate,projection:t.projection,resolutions:t.resolutions}),this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null,this.hidpi_=void 0===t.hidpi||t.hidpi,this.url_=t.url,this.imageLoadFunction_=void 0!==t.imageLoadFunction?t.imageLoadFunction:$n,this.params_=Object.assign({},t.params),this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=void 0!==t.ratio?t.ratio:1.5,this.loaderProjection_=null}getParams(){return this.params_}getImageInternal(t,e,n,i){return void 0===this.url_?null:(this.loader&&this.loaderProjection_===i||(this.loaderProjection_=i,this.loader=ei({crossOrigin:this.crossOrigin_,params:this.params_,projection:i,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(t,e)=>(this.image.setImage(t),this.imageLoadFunction_(this.image,e),(0,zn.D4)(t))})),super.getImageInternal(t,e,n,i))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(t){this.imageLoadFunction_=t,this.changed()}setUrl(t){t!=this.url_&&(this.url_=t,this.loader=null,this.changed())}updateParams(t){Object.assign(this.params_,t),this.changed()}changed(){this.image=null,super.changed()}}
var ii=n(4943)
const ri=class extends Jn{constructor(t){super({attributions:(t=t||{}).attributions,interpolate:t.interpolate,projection:t.projection,resolutions:t.resolutions,state:t.state}),this.canvasFunction_=t.canvasFunction,this.canvas_=null,this.renderedRevision_=0,this.ratio_=void 0!==t.ratio?t.ratio:1.5}getImageInternal(t,e,n,i){e=this.findNearestResolution(e)
let o=this.canvas_
if(o&&this.renderedRevision_==this.getRevision()&&o.getResolution()==e&&o.getPixelRatio()==n&&(0,r.ms)(o.getExtent(),t))return o
t=t.slice(),(0,r.Af)(t,this.ratio_)
const s=[(0,r.RG)(t)/e*n,(0,r.Oq)(t)/e*n],a=this.canvasFunction_.call(this,t,e,n,s,i)
return a&&(o=new ii.A(t,e,n,a)),this.canvas_=o,this.renderedRevision_=this.getRevision(),o}}
function oi(t){const e=t.load||zn.D4
return function(n,i,o){const s=new Image
null!==t.crossOrigin&&(s.crossOrigin=t.crossOrigin),n=Kn(n,i,o,t.ratio)
const a=(0,r.RG)(n)/i,l=(0,r.Oq)(n)/i,u=[a*o,l*o],h=function(t,e,n,i,o,s,a){const l=function(t,e,n,i){const o=(0,r.RG)(t),s=(0,r.Oq)(t),a=e[0],l=e[1],u=.0254/i
return l*o>a*s?o*n/(a*u):s*n/(l*u)}(n,i,s,a),u=(0,r.q1)(n),h={OPERATION:o?"GETDYNAMICMAPOVERLAYIMAGE":"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol/source/ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:a,SETDISPLAYWIDTH:Math.round(i[0]),SETDISPLAYHEIGHT:Math.round(i[1]),SETVIEWSCALE:l,SETVIEWCENTERX:u[0],SETVIEWCENTERY:u[1]}
return Object.assign(h,e),Qn(t,h)}(t.url,t.params,n,u,t.useOverlay,t.metersPerUnit||1,t.displayDpi||96)
return e(s,h).then((t=>({image:t,extent:n,pixelRatio:o})))}}const si=class extends Jn{constructor(t){super({interpolate:t.interpolate,projection:t.projection,resolutions:t.resolutions}),this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null,this.displayDpi_=void 0!==t.displayDpi?t.displayDpi:96,this.params_=Object.assign({},t.params),this.url_=t.url,this.imageLoadFunction_=void 0!==t.imageLoadFunction?t.imageLoadFunction:$n,this.hidpi_=void 0===t.hidpi||t.hidpi,this.metersPerUnit_=void 0!==t.metersPerUnit?t.metersPerUnit:1,this.ratio_=void 0!==t.ratio?t.ratio:1,this.useOverlay_=void 0!==t.useOverlay&&t.useOverlay,this.renderedRevision_=0,this.loaderProjection_=null}getParams(){return this.params_}getImageInternal(t,e,n,i){return void 0===this.url_?null:(this.loader&&this.loaderProjection_===i||(this.loaderProjection_=i,this.loader=oi({crossOrigin:this.crossOrigin_,params:this.params_,hidpi:this.hidpi_,metersPerUnit:this.metersPerUnit_,url:this.url_,useOverlay:this.useOverlay_,ratio:this.ratio_,load:(t,e)=>(this.image.setImage(t),this.imageLoadFunction_(this.image,e),(0,zn.D4)(t))})),super.getImageInternal(t,e,n,i))}getImageLoadFunction(){return this.imageLoadFunction_}updateParams(t){Object.assign(this.params_,t),this.changed()}setImageLoadFunction(t){this.imageLoadFunction_=t,this.changed()}changed(){this.image=null,super.changed()}}
function ai(t){const e=t.load||zn.D4,n=t.imageExtent,i=new Image
return null!==t.crossOrigin&&(i.crossOrigin=t.crossOrigin),()=>e(i,t.url).then((t=>{const e=(0,r.RG)(n)/t.width,i=(0,r.Oq)(n)/t.height
return{image:t,extent:n,resolution:e!==i?[e,i]:i,pixelRatio:1}}))}const li=class extends Jn{constructor(t){const e=void 0!==t.crossOrigin?t.crossOrigin:null,n=void 0!==t.imageLoadFunction?t.imageLoadFunction:$n
super({attributions:t.attributions,interpolate:t.interpolate,projection:(0,v.Jt)(t.projection)}),this.url_=t.url,this.imageExtent_=t.imageExtent,this.image=null,this.image=new zn.Ay(this.imageExtent_,void 0,1,ai({url:t.url,imageExtent:t.imageExtent,crossOrigin:e,load:(t,e)=>(this.image.setImage(t),n(this.image,e),(0,zn.D4)(t))})),this.image.addEventListener(o.A.CHANGE,this.handleImageChange.bind(this))}getImageExtent(){return this.imageExtent_}getImageInternal(t,e,n,i){return(0,r.HY)(t,this.image.getExtent())?this.image:null}getUrl(){return this.url_}}
var ui=n(4549)
const hi="1.3.0",ci=[101,101]
function fi(t,e,n,i,r){r.WIDTH=n[0],r.HEIGHT=n[1]
const o=i.getAxisOrientation()
let s
const a=(0,ui.Z)(r.VERSION,"1.3")>=0
return r[a?"CRS":"SRS"]=i.getCode(),s=a&&"ne"==o.substr(0,2)?[e[1],e[0],e[3],e[2]]:e,r.BBOX=s.join(","),Qn(t,r)}function pi(t,e,n,i,o,s,a){s=Object.assign({REQUEST:"GetMap"},s)
const l=e/n,u=[(0,E.LI)((0,r.RG)(t)/l,Vn),(0,E.LI)((0,r.Oq)(t)/l,Vn)]
if(1!=n)switch(a){case"geoserver":const t=90*n+.5|0
"FORMAT_OPTIONS"in s?s.FORMAT_OPTIONS+=";dpi:"+t:s.FORMAT_OPTIONS="dpi:"+t
break
case"mapserver":s.MAP_RESOLUTION=90*n
break
case"carmentaserver":case"qgis":s.DPI=90*n
break
default:throw new Error("Unknown `serverType` configured")}return fi(o,t,u,i,s)}function di(t,e){return Object.assign({REQUEST:e,SERVICE:"WMS",VERSION:hi,FORMAT:"image/png",STYLES:"",TRANSPARENT:!0},t)}function gi(t){const e=void 0===t.hidpi||t.hidpi,n=(0,v.Jt)(t.projection||"EPSG:3857"),i=t.ratio||1.5,r=t.load||zn.D4
return(o,s,a)=>{o=Kn(o,s,a,i),1==a||e&&void 0!==t.serverType||(a=1)
const l=pi(o,s,a,n,t.url,di(t.params,"GetMap"),t.serverType),u=new Image
return null!==t.crossOrigin&&(u.crossOrigin=t.crossOrigin),r(u,l).then((t=>({image:t,extent:o,pixelRatio:a})))}}const _i=class extends Jn{constructor(t){super({attributions:(t=t||{}).attributions,interpolate:t.interpolate,projection:t.projection,resolutions:t.resolutions}),this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null,this.url_=t.url,this.imageLoadFunction_=void 0!==t.imageLoadFunction?t.imageLoadFunction:$n,this.params_=Object.assign({},t.params),this.serverType_=t.serverType,this.hidpi_=void 0===t.hidpi||t.hidpi,this.renderedRevision_=0,this.ratio_=void 0!==t.ratio?t.ratio:1.5,this.loaderProjection_=null}getFeatureInfoUrl(t,e,n,i){const o=(0,v.Jt)(n),s=this.getProjection()
return s&&s!==o&&(e=(0,qn.KQ)(s,o,t,e),t=(0,v.pd)(t,o,s)),function(t,e,n){if(void 0===t.url)return
const i=(0,v.Jt)(t.projection||"EPSG:3857"),o=(0,r.Bg)(e,n,0,ci),s={QUERY_LAYERS:t.params.LAYERS,INFO_FORMAT:"application/json"}
Object.assign(s,di(t.params,"GetFeatureInfo"),t.params)
const a=(0,E.RI)((e[0]-o[0])/n,Vn),l=(0,E.RI)((o[3]-e[1])/n,Vn),u=(0,ui.Z)(s.VERSION,"1.3")>=0
return s[u?"I":"X"]=a,s[u?"J":"Y"]=l,fi(t.url,o,ci,i,s)}({url:this.url_,params:{...this.params_,...i},projection:s||o},t,e)}getLegendUrl(t,e){return function(t,e){if(void 0===t.url)return
const n={SERVICE:"WMS",VERSION:hi,REQUEST:"GetLegendGraphic",FORMAT:"image/png"}
if(void 0===t.params||void 0===t.params.LAYER){const e=t.params.LAYERS
if(Array.isArray(e)&&1!==e.length)return
n.LAYER=e}if(void 0!==e){const i=(0,v.Jt)(t.projection||"EPSG:3857").getMetersPerUnit()||1,r=28e-5
n.SCALE=e*i/r}return Object.assign(n,t.params),Qn(t.url,n)}({url:this.url_,params:{...this.params_,...e}},t)}getParams(){return this.params_}getImageInternal(t,e,n,i){return void 0===this.url_?null:(this.loader&&this.loaderProjection_===i||(this.loaderProjection_=i,this.loader=gi({crossOrigin:this.crossOrigin_,params:this.params_,projection:i,serverType:this.serverType_,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(t,e)=>(this.image.setImage(t),this.imageLoadFunction_(this.image,e),(0,zn.D4)(t))})),super.getImageInternal(t,e,n,i))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(t){this.imageLoadFunction_=t,this.changed()}setUrl(t){t!=this.url_&&(this.url_=t,this.loader=null,this.changed())}updateParams(t){Object.assign(this.params_,t),this.changed()}changed(){this.image=null,super.changed()}}
function mi(t,e,n,i){const r=document.createElement("script"),o="olc_"+(0,m.v6)(e)
function s(){delete window[o],r.parentNode.removeChild(r)}r.async=!0,r.src=t+(t.includes("?")?"&":"?")+(i||"callback")+"="+o
const a=setTimeout((function(){s(),n&&n()}),1e4)
window[o]=function(t){clearTimeout(a),s(),e(t)},document.head.appendChild(r)}class yi extends Error{constructor(t){super("Unexpected response status: "+t.status),this.name="ResponseError",this.response=t}}class vi extends Error{constructor(t){super("Failed to issue request"),this.name="ClientError",this.client=t}}function xi(t){return new Promise((function(e,n){const i=new XMLHttpRequest
i.addEventListener("load",(function(t){const i=t.target
if(!i.status||i.status>=200&&i.status<300){let r
try{r=JSON.parse(i.responseText)}catch(t){const e="Error parsing response text as JSON: "+t.message
return void n(new Error(e))}e(r)}else n(new yi(i))})),i.addEventListener("error",(function(t){n(new vi(t.target))})),i.open("GET",t),i.setRequestHeader("Accept","application/json"),i.send()}))}function bi(t,e){return e.includes("://")?e:new URL(e,t).href}const Ei={"image/png":!0,"image/jpeg":!0,"image/gif":!0,"image/webp":!0},wi={"application/vnd.mapbox-vector-tile":!0,"application/geo+json":!0}
function Si(t,e,n,i){let o=t.projection
if(!o&&(o=(0,v.Jt)(e.crs),!o))throw new Error(`Unsupported CRS: ${e.crs}`)
const s=e.orderedAxes,a="en"!==(s?s.slice(0,2).map((t=>t.replace(/E|X|Lon/i,"e").replace(/N|Y|Lat/i,"n"))).join(""):o.getAxisOrientation().substr(0,2)),l=e.tileMatrices,u={}
for(let r=0;r<l.length;++r){const t=l[r]
u[t.id]=t}const h={},c=[]
if(i)for(let r=0;r<i.length;++r){const t=i[r],e=t.tileMatrix
c.push(e),h[e]=t}else for(let r=0;r<l.length;++r){const t=l[r].id
c.push(t)}const f=c.length,p=new Array(f),d=new Array(f),g=new Array(f),_=new Array(f),m=[-1/0,-1/0,1/0,1/0]
for(let v=0;v<f;++v){const t=c[v],e=u[t],n=e.pointOfOrigin
p[v]=a?[n[1],n[0]]:n,d[v]=e.cellSize,g[v]=[e.matrixWidth,e.matrixHeight],_[v]=[e.tileWidth,e.tileHeight]
const i=h[t]
if(i){const t=e.cellSize*e.tileWidth,n=p[v][0]+i.minTileCol*t,o=p[v][0]+(i.maxTileCol+1)*t,s=e.cellSize*e.tileHeight
let a,l
"bottomLeft"===e.cornerOfOrigin?(a=p[v][1]+i.minTileRow*s,l=p[v][1]+(i.maxTileRow+1)*s):(a=p[v][1]-(i.maxTileRow+1)*s,l=p[v][1]-i.minTileRow*s),(0,r._N)(m,[n,a,o,l],m)}}const y=new I({origins:p,resolutions:d,sizes:g,tileSizes:_,extent:i?m:void 0}),x=t.context,b=t.url
return{grid:y,urlTemplate:n,urlFunction:function(t,e,r){if(!t)return
const o=c[t[0]],s=u[o],a="bottomLeft"===s.cornerOfOrigin,l={tileMatrix:o,tileCol:t[1],tileRow:a?-t[2]-1:t[2]}
if(i){const t=h[s.id]
if(l.tileCol<t.minTileCol||l.tileCol>t.maxTileCol||l.tileRow<t.minTileRow||l.tileRow>t.maxTileRow)return}Object.assign(l,x)
const f=n.replace(/\{(\w+?)\}/g,(function(t,e){return l[e]}))
return bi(b,f)}}}function Ci(t){return xi(t.url).then((function(e){return function(t,e){const n=e.tileMatrixSetLimits
let i
if("map"===e.dataType)i=function(t,e){let n,i
for(let r=0;r<t.length;++r){const o=t[r]
if("item"===o.rel){if(o.type===e){n=o.href
break}(Ei[o.type]||!i&&o.type.startsWith("image/"))&&(i=o.href)}}if(!n){if(!i)throw new Error('Could not find "item" link')
n=i}return n}(e.links,t.mediaType)
else{if("vector"!==e.dataType)throw new Error('Expected tileset data type to be "map" or "vector"')
i=function(t,e,n){let i,r
const o={}
for(let s=0;s<t.length;++s){const n=t[s]
if(o[n.type]=n.href,"item"===n.rel){if(n.type===e){i=n.href
break}wi[n.type]&&(r=n.href)}}if(!i&&n)for(let s=0;s<n.length;++s){const t=n[s]
if(o[t]){i=o[t]
break}}if(!i){if(!r)throw new Error('Could not find "item" link')
i=r}return i}(e.links,t.mediaType,t.supportedMediaTypes)}if(e.tileMatrixSet)return Si(t,e.tileMatrixSet,i,n)
const r=e.links.find((t=>"http://www.opengis.net/def/rel/ogc/1.0/tiling-scheme"===t.rel))
if(!r)throw new Error("Expected http://www.opengis.net/def/rel/ogc/1.0/tiling-scheme link or tileMatrixSet")
const o=r.href
return xi(bi(t.url,o)).then((function(e){return Si(t,e,i,n)}))}(t,e)}))}const Ti=class extends U{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:"loading",tileLoadFunction:t.tileLoadFunction,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition}),Ci({url:t.url,projection:this.getProjection(),mediaType:t.mediaType,context:t.context||null}).then(this.handleTileSetInfo_.bind(this)).catch(this.handleError_.bind(this))}handleTileSetInfo_(t){this.tileGrid=t.grid,this.setTileUrlFunction(t.urlFunction,t.urlTemplate),this.setState("ready")}handleError_(t){(0,un.z3)(t),this.setState("error")}}
var Ii=n(7912)
class Pi extends Ii.A{constructor(t,e,n,i,r,o){super(t,e,o),this.extent=null,this.format_=i,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=r,this.url_=n,this.key=n}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==c.A.IDLE&&(this.setState(c.A.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(t,e){this.setFeatures(t)}onError(){this.setState(c.A.ERROR)}setFeatures(t){this.features_=t,this.setState(c.A.LOADED)}setLoader(t){this.loader_=t}}const Ai=Pi,Ri=[]
class Li extends Ii.A{constructor(t,e,n,i){super(t,e,{transition:0}),this.context_={},this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=i.bind(void 0,this),this.wrappedTileCoord=n}getContext(t){const e=(0,m.v6)(t)
return e in this.context_||(this.context_[e]=(0,Pn.Y)(1,1,Ri)),this.context_[e]}hasContext(t){return(0,m.v6)(t)in this.context_}getImage(t){return this.hasContext(t)?this.getContext(t).canvas:null}getReplayState(t){const e=(0,m.v6)(t)
return e in this.replayState_||(this.replayState_[e]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[e]}load(){this.getSourceTiles()}release(){for(const t in this.context_){const e=this.context_[t];(0,Pn.Yg)(e),Ri.push(e.canvas),delete this.context_[t]}super.release()}}const Mi=Li
var Oi=n(7931),Ni=n(6831)
const Di=class extends B{constructor(t){const e=t.projection||"EPSG:3857",n=t.extent||L(e),i=t.tileGrid||A({extent:n,maxResolution:t.maxResolution,maxZoom:void 0!==t.maxZoom?t.maxZoom:22,minZoom:t.minZoom,tileSize:t.tileSize||512})
super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,interpolate:!0,opaque:!1,projection:e,state:t.state,tileGrid:i,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:Fi,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:void 0===t.zDirection?1:t.zDirection}),this.format_=t.format?t.format:null,this.sourceTileCache=new h(this.tileCache.highWaterMark),this.overlaps_=null==t.overlaps||t.overlaps,this.tileClass=t.tileClass?t.tileClass:Ai,this.tileGrids_={}}getFeaturesInExtent(t){const e=[],n=this.tileCache
if(0===n.getCount())return e
const i=(0,l.K)(n.peekFirstKey())[0],o=this.tileGrid
return n.forEach((function(n){if(n.tileCoord[0]!==i||n.getState()!==c.A.LOADED)return
const s=n.getSourceTiles()
for(let i=0,a=s.length;i<a;++i){const n=s[i],a=n.tileCoord
if((0,r.HY)(t,o.getTileCoordExtent(a))){const i=n.getFeatures()
if(i)for(let n=0,o=i.length;n<o;++n){const o=i[n],s=o.getGeometry();(0,r.HY)(t,s.getExtent())&&e.push(o)}}}})),e}getOverlaps(){return this.overlaps_}clear(){this.tileCache.clear(),this.sourceTileCache.clear()}expireCache(t,e){const n=this.getTileCacheForProjection(t),i=Object.keys(e).reduce(((t,e)=>{const i=(0,l.gr)(e),r=n.peek(i)
if(r){const e=r.sourceTiles
for(let n=0,i=e.length;n<i;++n)t[e[n].getKey()]=!0}return t}),{})
super.expireCache(t,e),this.sourceTileCache.expireCache(i)}getSourceTiles(t,e,n){if(n.getState()===c.A.IDLE){n.setState(c.A.LOADING)
const i=n.wrappedTileCoord,s=this.getTileGridForProjection(e),a=s.getTileCoordExtent(i),l=i[0],u=s.getResolution(l);(0,r.r)(a,-u,a)
const h=this.tileGrid,f=h.getExtent()
f&&(0,r._N)(a,f,a)
const p=h.getZForResolution(u,this.zDirection)
h.forEachTileCoord(a,p,(i=>{const r=this.tileUrlFunction(i,t,e),s=this.sourceTileCache.containsKey(r)?this.sourceTileCache.get(r):new this.tileClass(i,r?c.A.IDLE:c.A.EMPTY,r,this.format_,this.tileLoadFunction)
n.sourceTiles.push(s)
const a=s.getState()
if(a<c.A.LOADED){const t=e=>{this.handleTileChange(e)
const i=s.getState()
if(i===c.A.LOADED||i===c.A.ERROR){const e=s.getKey()
e in n.errorTileKeys?s.getState()===c.A.LOADED&&delete n.errorTileKeys[e]:n.loadingSourceTiles--,i===c.A.ERROR?n.errorTileKeys[e]=!0:s.removeEventListener(o.A.CHANGE,t),0===n.loadingSourceTiles&&n.setState((0,Oi.p)(n.errorTileKeys)?c.A.LOADED:c.A.ERROR)}}
s.addEventListener(o.A.CHANGE,t),n.loadingSourceTiles++}a===c.A.IDLE&&(s.extent=h.getTileCoordExtent(i),s.projection=e,s.resolution=h.getResolution(i[0]),this.sourceTileCache.set(r,s),s.load())})),n.loadingSourceTiles||n.setState(n.sourceTiles.some((t=>t.getState()===c.A.ERROR))?c.A.ERROR:c.A.LOADED)}return n.sourceTiles}getTile(t,e,n,i,o){const s=(0,l.dp)(t,e,n),a=this.getKey()
let u
if(this.tileCache.containsKey(s)&&(u=this.tileCache.get(s),u.key===a))return u
const h=[t,e,n]
let f=this.getTileCoordForTileUrlFunction(h,o)
const p=this.getTileGrid().getExtent(),d=this.getTileGridForProjection(o)
if(f&&p){const e=d.getTileCoordExtent(f);(0,r.r)(e,-d.getResolution(t),e),(0,r.HY)(p,e)||(f=null)}let g=!0
if(null!==f){const e=this.tileGrid,n=d.getResolution(t),s=e.getZForResolution(n,1),a=d.getTileCoordExtent(f);(0,r.r)(a,-n,a),e.forEachTileCoord(a,s,(t=>{g=g&&!this.tileUrlFunction(t,i,o)}))}const _=new Mi(h,g?c.A.EMPTY:c.A.IDLE,f,this.getSourceTiles.bind(this,i,o))
return _.key=a,u?(_.interimTile=u,_.refreshInterimChain(),this.tileCache.replace(s,_)):this.tileCache.set(s,_),_}getTileGridForProjection(t){const e=t.getCode()
let n=this.tileGrids_[e]
if(!n){const t=this.tileGrid,i=t.getResolutions().slice(),r=i.map((function(e,n){return t.getOrigin(n)})),o=i.map((function(e,n){return t.getTileSize(n)})),s=b.L+1
for(let e=i.length;e<s;++e)i.push(i[e-1]/2),r.push(r[e-1]),o.push(o[e-1])
n=new I({extent:t.getExtent(),origins:r,resolutions:i,tileSizes:o}),this.tileGrids_[e]=n}return n}getTilePixelRatio(t){return t}getTilePixelSize(t,e,n){const i=this.getTileGridForProjection(n),r=(0,C.xq)(i.getTileSize(t),this.tmpSize)
return[Math.round(r[0]*e),Math.round(r[1]*e)]}updateCacheSize(t,e){super.updateCacheSize(2*t,e),this.sourceTileCache.highWaterMark=this.getTileCacheForProjection(e).highWaterMark}}
function Fi(t,e){t.setLoader((function(n,i,r){(0,Ni.m8)(e,t.getFormat(),n,i,r,t.onLoad.bind(t),t.onError.bind(t))}))}const ki=class extends Di{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,format:t.format,overlaps:t.overlaps,projection:t.projection,tileClass:t.tileClass,transition:t.transition,wrapX:t.wrapX,zDirection:t.zDirection,state:"loading"}),Ci({url:t.url,projection:this.getProjection(),mediaType:t.mediaType,supportedMediaTypes:t.format.supportedMediaTypes,context:t.context||null}).then(this.handleTileSetInfo_.bind(this)).catch(this.handleError_.bind(this))}handleTileSetInfo_(t){this.tileGrid=t.grid,this.setTileUrlFunction(t.urlFunction,t.urlTemplate),this.setState("ready")}handleError_(t){(0,un.z3)(t),this.setState("error")}},ji='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.',zi=class extends X{constructor(t){let e
e=void 0!==(t=t||{}).attributions?t.attributions:[ji]
const n=void 0!==t.crossOrigin?t.crossOrigin:"anonymous",i=void 0!==t.url?t.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png"
super({attributions:e,attributionsCollapsible:!1,cacheSize:t.cacheSize,crossOrigin:n,interpolate:t.interpolate,maxZoom:void 0!==t.maxZoom?t.maxZoom:19,opaque:void 0===t.opaque||t.opaque,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:i,wrapX:t.wrapX,zDirection:t.zDirection})}}
var Gi=n(8646),Bi=n(9343),qi=n(3498),Ui=n(1358),Zi=n(2282)
let Xi,Yi=!0
try{new ImageData(10,10)}catch(t){Yi=!1}function Vi(t){let e=!0
try{new ImageData(10,10)}catch(t){e=!1}function n(t,n,i){return e?new ImageData(t,n,i):{data:t,width:n,height:i}}return function(e){const i=e.buffers,r=e.meta,o=e.imageOps,s=e.width,a=e.height,l=i.length,u=i[0].byteLength
if(o){const e=new Array(l)
for(let t=0;t<l;++t)e[t]=n(new Uint8ClampedArray(i[t]),s,a)
return t(e,r).data.buffer}const h=new Uint8ClampedArray(u),c=new Array(l),f=new Array(l)
for(let t=0;t<l;++t)c[t]=new Uint8ClampedArray(i[t]),f[t]=[0,0,0,0]
for(let n=0;n<u;n+=4){for(let t=0;t<l;++t){const e=c[t]
f[t][0]=e[n],f[t][1]=e[n+1],f[t][2]=e[n+2],f[t][3]=e[n+3]}const e=t(f,r)
h[n]=e[0],h[n+1]=e[1],h[n+2]=e[2],h[n+3]=e[3]}return h.buffer}}function Wi(t,e){const n=Object.keys(t.lib||{}).map((function(e){return"const "+e+" = "+t.lib[e].toString()+";"})).concat(["const __minion__ = ("+Vi.toString()+")(",t.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),i=new Worker("undefined"==typeof Blob?"data:text/javascript;base64,"+Buffer.from(n.join("\n"),"binary").toString("base64"):URL.createObjectURL(new Blob(n,{type:"text/javascript"})))
return i.addEventListener("message",e),i}class Hi extends Gi.A{constructor(t){let e
super(),this._imageOps=!!t.imageOps,e=0===t.threads?0:this._imageOps?1:t.threads||1
const n=new Array(e)
if(e)for(let i=0;i<e;++i)n[i]=Wi(t,this._onWorkerMessage.bind(this,i))
else n[0]=function(t,e){const n=Vi(t.operation)
let i=!1
return{postMessage:function(t){setTimeout((function(){i||e({data:{buffer:n(t),meta:t.meta}})}),0)},terminate:function(){i=!0}}}(t,this._onWorkerMessage.bind(this,0))
this._workers=n,this._queue=[],this._maxQueueLength=t.queue||1/0,this._running=0,this._dataLookup={},this._job=null}process(t,e,n){this._enqueue({inputs:t,meta:e,callback:n}),this._dispatch()}_enqueue(t){for(this._queue.push(t);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)}_dispatch(){if(this._running||0===this._queue.length)return
const t=this._queue.shift()
this._job=t
const e=t.inputs[0].width,n=t.inputs[0].height,i=t.inputs.map((function(t){return t.data.buffer})),r=this._workers.length
if(this._running=r,1===r)return void this._workers[0].postMessage({buffers:i,meta:t.meta,imageOps:this._imageOps,width:e,height:n},i)
const o=t.inputs[0].data.length,s=4*Math.ceil(o/4/r)
for(let a=0;a<r;++a){const r=a*s,o=[]
for(let t=0,e=i.length;t<e;++t)o.push(i[t].slice(r,r+s))
this._workers[a].postMessage({buffers:o,meta:t.meta,imageOps:this._imageOps,width:e,height:n},o)}}_onWorkerMessage(t,e){this.disposed||(this._dataLookup[t]=e.data,--this._running,0===this._running&&this._resolveJob())}_resolveJob(){const t=this._job,e=this._workers.length
let n,i
if(1===e)n=new Uint8ClampedArray(this._dataLookup[0].buffer),i=this._dataLookup[0].meta
else{const r=t.inputs[0].data.length
n=new Uint8ClampedArray(r),i=new Array(e)
const o=4*Math.ceil(r/4/e)
for(let t=0;t<e;++t){const e=this._dataLookup[t].buffer,r=t*o
n.set(new Uint8ClampedArray(e),r),i[t]=this._dataLookup[t].meta}}this._job=null,this._dataLookup={},t.callback(null,function(t,e,n){if(Yi)return new ImageData(t,e,n)
Xi||(Xi=document.createElement("canvas").getContext("2d"))
const i=Xi.createImageData(e,n)
return i.data.set(t),i}(n,t.inputs[0].width,t.inputs[0].height),i),this._dispatch()}disposeInternal(){for(let t=0;t<this._workers.length;++t)this._workers[t].terminate()
this._workers.length=0}}class $i extends g.Ay{constructor(t,e,n){super(t),this.extent=e.extent,this.resolution=e.viewState.resolution/e.pixelRatio,this.data=n}}class Ki extends Jn{constructor(t){super({projection:null}),this.on,this.once,this.un,this.processor_=null,this.operationType_=void 0!==t.operationType?t.operationType:"pixel",this.threads_=void 0!==t.threads?t.threads:1,this.layers_=function(t){const e=t.length,n=new Array(e)
for(let i=0;i<e;++i)n[i]=tr(t[i])
return n}(t.sources)
const e=this.changed.bind(this)
for(let i=0,r=this.layers_.length;i<r;++i)this.layers_[i].addEventListener(o.A.CHANGE,e)
var n
this.useResolutions_=null!==t.resolutions,this.tileQueue_=new Ui.A((function(){return 1}),this.processSources_.bind(this)),this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,coordinateToPixelTransform:(0,Zi.vt)(),declutter:null,extent:null,index:0,layerIndex:0,layerStatesArray:(n=this.layers_,n.map((function(t){return t.getLayerState()}))),pixelRatio:1,pixelToCoordinateTransform:(0,Zi.vt)(),postRenderFunctions:[],size:[0,0],tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:(0,m.v6)(this),renderTargets:{}},this.setAttributions((function(e){const n=[]
for(let i=0,r=t.sources.length;i<r;++i){const r=t.sources[i],o=r instanceof _.A?r:r.getSource()
if(!o)continue
const s=o.getAttributions()
if("function"==typeof s){const t=s(e)
n.push.apply(n,t)}}return 0!==n.length?n:null})),void 0!==t.operation&&this.setOperation(t.operation,t.lib)}setOperation(t,e){this.processor_&&this.processor_.dispose(),this.processor_=new Hi({operation:t,imageOps:"image"===this.operationType_,queue:1,lib:e,threads:this.threads_}),this.changed()}updateFrameState_(t,e,n){const i=Object.assign({},this.frameState_)
i.viewState=Object.assign({},i.viewState)
const o=(0,r.q1)(t)
i.size[0]=Math.ceil((0,r.RG)(t)/e),i.size[1]=Math.ceil((0,r.Oq)(t)/e),i.extent=[o[0]-i.size[0]*e/2,o[1]-i.size[1]*e/2,o[0]+i.size[0]*e/2,o[1]+i.size[1]*e/2],i.time=Date.now()
const s=i.viewState
return s.center=o,s.projection=n,s.resolution=e,i}allSourcesReady_(){let t,e=!0
for(let n=0,i=this.layers_.length;n<i;++n)if(t=this.layers_[n].getSource(),!t||"ready"!==t.getState()){e=!1
break}return e}getImage(t,e,n,i){if(!this.allSourcesReady_())return null
this.tileQueue_.loadMoreTiles(16,16),e=this.findNearestResolution(e)
const o=this.updateFrameState_(t,e,i)
if(this.requestedFrameState_=o,this.renderedImageCanvas_){const t=this.renderedImageCanvas_.getResolution(),n=this.renderedImageCanvas_.getExtent()
e===t&&(0,r.aI)(o.extent,n)||(this.renderedImageCanvas_=null)}return this.renderedImageCanvas_&&this.getRevision()===this.renderedRevision_||this.processSources_(),o.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}processSources_(){const t=this.requestedFrameState_,e=this.layers_.length,n=new Array(e)
for(let r=0;r<e;++r){t.layerIndex=r,t.renderTargets={}
const e=Qi(this.layers_[r],t)
if(!e)return
n[r]=e}const i={}
this.dispatchEvent(new $i("beforeoperations",t,i)),this.processor_.process(n,i,this.onWorkerComplete_.bind(this,t))}onWorkerComplete_(t,e,n,i){if(e||!n)return
const o=t.extent,s=t.viewState.resolution
if(s!==this.requestedFrameState_.viewState.resolution||!(0,r.aI)(o,this.requestedFrameState_.extent))return
let a
if(this.renderedImageCanvas_)a=this.renderedImageCanvas_.getImage().getContext("2d")
else{const t=Math.round((0,r.RG)(o)/s),e=Math.round((0,r.Oq)(o)/s)
a=(0,Pn.Y)(t,e),this.renderedImageCanvas_=new ii.A(o,s,1,a.canvas)}a.putImageData(n,0,0),t.animate?requestAnimationFrame(this.changed.bind(this)):this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new $i("afteroperations",t,i))}getResolutions(t){if(!this.useResolutions_)return null
let e=super.getResolutions()
if(!e)for(let n=0,i=this.layers_.length;n<i&&(e=this.layers_[n].getSource().getResolutions(t),!e);++n);return e}disposeInternal(){this.processor_&&this.processor_.dispose(),super.disposeInternal()}}Ki.prototype.dispose
let Ji=null
function Qi(t,e){const n=t.getRenderer()
if(!n)throw new Error("Unsupported layer type: "+t)
if(!n.prepareFrame(e))return null
const i=e.size[0],r=e.size[1]
if(0===i||0===r)return null
const o=n.renderFrame(e,null)
let s
if(o instanceof HTMLCanvasElement)s=o
else{if(o&&(s=o.firstElementChild),!(s instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+s)
if(s.width===i&&s.height===r)return s.getContext("2d").getImageData(0,0,i,r)}if(Ji){const t=Ji.canvas
t.width!==i||t.height!==r?Ji=(0,Pn.Y)(i,r,void 0,{willReadFrequently:!0}):Ji.clearRect(0,0,i,r)}else Ji=(0,Pn.Y)(i,r,void 0,{willReadFrequently:!0})
return Ji.drawImage(s,0,0,i,r),Ji.getImageData(0,0,i,r)}function tr(t){let e
return t instanceof _.A?t instanceof N?e=new qi.A({source:t}):t instanceof Jn&&(e=new Bi.A({source:t})):e=t,e}const er=Ki,nr={stamen_terrain:{extension:"png",opaque:!0},stamen_terrain_background:{extension:"png",opaque:!0},stamen_terrain_labels:{extension:"png",opaque:!1},stamen_terrain_lines:{extension:"png",opaque:!1},stamen_toner_background:{extension:"png",opaque:!0},stamen_toner:{extension:"png",opaque:!0},stamen_toner_labels:{extension:"png",opaque:!1},stamen_toner_lines:{extension:"png",opaque:!1},stamen_toner_lite:{extension:"png",opaque:!0},stamen_watercolor:{extension:"jpg",opaque:!0},alidade_smooth:{extension:"png",opaque:!0},alidade_smooth_dark:{extension:"png",opaque:!0},alidade_satellite:{extension:"png",opaque:!0},outdoors:{extension:"png",opaque:!0},osm_bright:{extension:"png",opaque:!0}},ir={stamen_terrain:{minZoom:0,maxZoom:18,retina:!0},stamen_toner:{minZoom:0,maxZoom:20,retina:!0},stamen_watercolor:{minZoom:1,maxZoom:18,retina:!1}},rr=class extends X{constructor(t){const e=t.layer.indexOf("-"),n=-1==e?t.layer:t.layer.slice(0,e),i=ir[n]||{minZoom:0,maxZoom:20,retina:!0},r=nr[t.layer],o=t.apiKey?"?api_key="+t.apiKey:"",s=i.retina&&t.retina?"@2x":"",a=void 0!==t.url?t.url:"https://tiles.stadiamaps.com/tiles/"+t.layer+"/{z}/{x}/{y}"+s+"."+r.extension+o,l=['&copy; <a href="https://www.stadiamaps.com/" target="_blank">Stadia Maps</a>','&copy; <a href="https://openmaptiles.org/" target="_blank">OpenMapTiles</a>',ji]
t.layer.startsWith("stamen_")&&l.splice(1,0,'&copy; <a href="https://stamen.com/" target="_blank">Stamen Design</a>'),super({attributions:l,cacheSize:t.cacheSize,crossOrigin:"anonymous",interpolate:t.interpolate,maxZoom:void 0!==t.maxZoom?t.maxZoom:i.maxZoom,minZoom:void 0!==t.minZoom?t.minZoom:i.minZoom,opaque:r.opaque,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:a,tilePixelRatio:s?2:1,wrapX:t.wrapX,zDirection:t.zDirection})}},or=class extends U{constructor(t){super({attributions:(t=t||{}).attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:t.zDirection}),this.params_=Object.assign({},t.params),this.hidpi_=void 0===t.hidpi||t.hidpi,this.tmpExtent_=(0,r.S5)(),this.setKey(this.getKeyForParams_())}getKeyForParams_(){let t=0
const e=[]
for(const n in this.params_)e[t++]=n+"-"+this.params_[n]
return e.join("/")}getParams(){return this.params_}getRequestUrl_(t,e,n,i,r,o){const s=this.urls
if(!s)return
let a
return a=1==s.length?s[0]:s[(0,E.xP)((0,l.tW)(t),s.length)],ti(a,n,(this.tileGrid||this.getTileGridForProjection(r)).getResolution(t[0]),i,r,o)}getTilePixelRatio(t){return this.hidpi_?t:1}updateParams(t){Object.assign(this.params_,t),this.setKey(this.getKeyForParams_())}tileUrlFunction(t,e,n){let i=this.getTileGrid()
if(i||(i=this.getTileGridForProjection(n)),i.getResolutions().length<=t[0])return
1==e||this.hidpi_||(e=1)
const r=i.getTileCoordExtent(t,this.tmpExtent_)
let o=(0,C.xq)(i.getTileSize(t[0]),this.tmpSize)
1!=e&&(o=(0,C.hs)(o,e,this.tmpSize))
const s={F:"image",FORMAT:"PNG32",TRANSPARENT:!0}
return Object.assign(s,this.params_),this.getRequestUrl_(t,o,r,e,n,s)}},sr=class extends X{constructor(t){super({opaque:!1,projection:(t=t||{}).projection,tileGrid:t.tileGrid,wrapX:void 0===t.wrapX||t.wrapX,zDirection:t.zDirection,url:t.template||"z:{z} x:{x} y:{y}",tileLoadFunction:(t,e)=>{const n=t.getTileCoord()[0],i=(0,C.xq)(this.tileGrid.getTileSize(n)),r=(0,Pn.Y)(i[0],i[1])
r.strokeStyle="grey",r.strokeRect(.5,.5,i[0]+.5,i[1]+.5),r.fillStyle="grey",r.strokeStyle="white",r.textAlign="center",r.textBaseline="middle",r.font="24px sans-serif",r.lineWidth=4,r.strokeText(e,i[0]/2,i[1]/2,i[0]),r.fillText(e,i[0]/2,i[1]/2,i[0]),t.setImage(r.canvas)}})}},ar=class extends U{constructor(t){if(super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:(0,v.Jt)("EPSG:3857"),reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:"loading",tileLoadFunction:t.tileLoadFunction,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:t.zDirection}),this.tileJSON_=null,this.tileSize_=t.tileSize,t.url)if(t.jsonp)mi(t.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this))
else{const e=new XMLHttpRequest
e.addEventListener("load",this.onXHRLoad_.bind(this)),e.addEventListener("error",this.onXHRError_.bind(this)),e.open("GET",t.url),e.send()}else{if(!t.tileJSON)throw new Error("Either `url` or `tileJSON` options must be provided")
this.handleTileJSONResponse(t.tileJSON)}}onXHRLoad_(t){const e=t.target
if(!e.status||e.status>=200&&e.status<300){let n
try{n=JSON.parse(e.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(n)}else this.handleTileJSONError()}onXHRError_(t){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(t){const e=(0,v.Jt)("EPSG:4326"),n=this.getProjection()
let i
if(void 0!==t.bounds){const o=(0,v.FO)(e,n)
i=(0,r.NW)(t.bounds,o)}const o=L(n),s=t.minzoom||0,a=A({extent:o,maxZoom:t.maxzoom||22,minZoom:s,tileSize:this.tileSize_})
if(this.tileGrid=a,this.tileUrlFunction=F(t.tiles,a),t.attribution&&!this.getAttributions()){const e=void 0!==i?i:o
this.setAttributions((function(n){return(0,r.HY)(e,n.extent)?[t.attribution]:null}))}this.tileJSON_=t,this.setState("ready")}handleTileJSONError(){this.setState("error")}},lr=class extends U{constructor(t){t=t||{}
const e=Object.assign({},t.params),n=!("TRANSPARENT"in e)||e.TRANSPARENT
super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:!n,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:t.zDirection}),this.gutter_=void 0!==t.gutter?t.gutter:0,this.params_=e,this.v13_=!0,this.serverType_=t.serverType,this.hidpi_=void 0===t.hidpi||t.hidpi,this.tmpExtent_=(0,r.S5)(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(t,e,n,i){const o=(0,v.Jt)(n),s=this.getProjection()||o
let a=this.getTileGrid()
a||(a=this.getTileGridForProjection(s))
const l=(0,v.pd)(t,o,s),u=(0,qn.KQ)(s,o,t,e),h=a.getZForResolution(u,this.zDirection),c=a.getResolution(h),f=a.getTileCoordForCoordAndZ(l,h)
if(a.getResolutions().length<=f[0])return
let p=a.getTileCoordExtent(f,this.tmpExtent_)
const d=this.gutter_
0!==d&&(p=(0,r.r)(p,c*d,p))
const g={QUERY_LAYERS:this.params_.LAYERS}
Object.assign(g,di(this.params_,"GetFeatureInfo"),i)
const _=Math.floor((l[0]-p[0])/c),m=Math.floor((p[3]-l[1])/c)
return g[this.v13_?"I":"X"]=_,g[this.v13_?"J":"Y"]=m,this.getRequestUrl_(f,p,1,s||o,g)}getLegendUrl(t,e){if(void 0===this.urls[0])return
const n={SERVICE:"WMS",VERSION:hi,REQUEST:"GetLegendGraphic",FORMAT:"image/png"}
if(void 0===e||void 0===e.LAYER){const t=this.params_.LAYERS
if(Array.isArray(t)&&1!==t.length)return
n.LAYER=t}if(void 0!==t){const e=this.getProjection()?this.getProjection().getMetersPerUnit():1,i=28e-5
n.SCALE=t*e/i}return Object.assign(n,e),Qn(this.urls[0],n)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(t,e,n,i,r){const o=this.urls
if(!o)return
let s
return s=1==o.length?o[0]:o[(0,E.xP)((0,l.tW)(t),o.length)],pi(e,(this.tileGrid||this.getTileGridForProjection(i)).getResolution(t[0]),n,i,s,r,this.serverType_)}getTilePixelRatio(t){return this.hidpi_&&void 0!==this.serverType_?t:1}getKeyForParams_(){let t=0
const e=[]
for(const n in this.params_)e[t++]=n+"-"+this.params_[n]
return e.join("/")}updateParams(t){Object.assign(this.params_,t),this.updateV13_(),this.setKey(this.getKeyForParams_())}updateV13_(){const t=this.params_.VERSION||hi
this.v13_=(0,ui.Z)(t,"1.3")>=0}tileUrlFunction(t,e,n){let i=this.getTileGrid()
if(i||(i=this.getTileGridForProjection(n)),i.getResolutions().length<=t[0])return
1==e||this.hidpi_&&void 0!==this.serverType_||(e=1)
const o=i.getResolution(t[0])
let s=i.getTileCoordExtent(t,this.tmpExtent_)
const a=this.gutter_
0!==a&&(s=(0,r.r)(s,o*a,s))
const l=Object.assign({},di(this.params_,"GetMap"))
return this.getRequestUrl_(t,s,e,n,l)}}
class ur extends Ii.A{constructor(t,e,n,i,r,o){super(t,e),this.src_=n,this.extent_=i,this.preemptive_=r,this.grid_=null,this.keys_=null,this.data_=null,this.jsonp_=o}getImage(){return null}getData(t){if(!this.grid_||!this.keys_)return null
const e=(t[0]-this.extent_[0])/(this.extent_[2]-this.extent_[0]),n=(t[1]-this.extent_[1])/(this.extent_[3]-this.extent_[1]),i=this.grid_[Math.floor((1-n)*this.grid_.length)]
if("string"!=typeof i)return null
let r=i.charCodeAt(Math.floor(e*i.length))
r>=93&&r--,r>=35&&r--,r-=32
let o=null
if(r in this.keys_){const t=this.keys_[r]
o=this.data_&&t in this.data_?this.data_[t]:t}return o}forDataAtCoordinate(t,e,n){this.state==c.A.EMPTY&&!0===n?(this.state=c.A.IDLE,(0,Zn.Jz)(this,o.A.CHANGE,(function(n){e(this.getData(t))}),this),this.loadInternal_()):!0===n?setTimeout((()=>{e(this.getData(t))}),0):e(this.getData(t))}getKey(){return this.src_}handleError_(){this.state=c.A.ERROR,this.changed()}handleLoad_(t){this.grid_=t.grid,this.keys_=t.keys,this.data_=t.data,this.state=c.A.LOADED,this.changed()}loadInternal_(){if(this.state==c.A.IDLE)if(this.state=c.A.LOADING,this.jsonp_)mi(this.src_,this.handleLoad_.bind(this),this.handleError_.bind(this))
else{const t=new XMLHttpRequest
t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",this.src_),t.send()}}onXHRLoad_(t){const e=t.target
if(!e.status||e.status>=200&&e.status<300){let n
try{n=JSON.parse(e.responseText)}catch(t){return void this.handleError_()}this.handleLoad_(n)}else this.handleError_()}onXHRError_(t){this.handleError_()}load(){this.preemptive_?this.loadInternal_():this.setState(c.A.EMPTY)}}const hr=class extends N{constructor(t){if(super({projection:(0,v.Jt)("EPSG:3857"),state:"loading",wrapX:void 0===t.wrapX||t.wrapX,zDirection:t.zDirection}),this.preemptive_=void 0===t.preemptive||t.preemptive,this.tileUrlFunction_=j,this.template_=void 0,this.jsonp_=t.jsonp||!1,t.url)if(this.jsonp_)mi(t.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this))
else{const e=new XMLHttpRequest
e.addEventListener("load",this.onXHRLoad_.bind(this)),e.addEventListener("error",this.onXHRError_.bind(this)),e.open("GET",t.url),e.send()}else{if(!t.tileJSON)throw new Error("Either `url` or `tileJSON` options must be provided")
this.handleTileJSONResponse(t.tileJSON)}}onXHRLoad_(t){const e=t.target
if(!e.status||e.status>=200&&e.status<300){let n
try{n=JSON.parse(e.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(n)}else this.handleTileJSONError()}onXHRError_(t){this.handleTileJSONError()}getTemplate(){return this.template_}forDataAtCoordinateAndResolution(t,e,n,i){if(this.tileGrid){const r=this.tileGrid.getZForResolution(e,this.zDirection),o=this.tileGrid.getTileCoordForCoordAndZ(t,r)
this.getTile(o[0],o[1],o[2],1,this.getProjection()).forDataAtCoordinate(t,n,i)}else!0===i?setTimeout((function(){n(null)}),0):n(null)}handleTileJSONError(){this.setState("error")}handleTileJSONResponse(t){const e=(0,v.Jt)("EPSG:4326"),n=this.getProjection()
let i
if(void 0!==t.bounds){const o=(0,v.FO)(e,n)
i=(0,r.NW)(t.bounds,o)}const o=L(n),s=t.minzoom||0,a=A({extent:o,maxZoom:t.maxzoom||22,minZoom:s})
this.tileGrid=a,this.template_=t.template
const l=t.grids
if(l){if(this.tileUrlFunction_=F(l,a),t.attribution){const e=void 0!==i?i:o
this.setAttributions((function(n){return(0,r.HY)(e,n.extent)?[t.attribution]:null}))}this.setState("ready")}else this.setState("error")}getTile(t,e,n,i,r){const o=(0,l.dp)(t,e,n)
if(this.tileCache.containsKey(o))return this.tileCache.get(o)
const s=[t,e,n],a=this.getTileCoordForTileUrlFunction(s,r),u=this.tileUrlFunction_(a,i,r),h=new ur(s,void 0!==u?c.A.IDLE:c.A.EMPTY,void 0!==u?u:"",this.tileGrid.getTileCoordExtent(s),this.preemptive_,this.jsonp_)
return this.tileCache.set(o,h),h}useTile(t,e,n){const i=(0,l.dp)(t,e,n)
this.tileCache.containsKey(i)&&this.tileCache.get(i)}},cr=class extends U{constructor(t){const e=void 0!==t.requestEncoding?t.requestEncoding:"KVP",n=t.tileGrid
let i=t.urls
void 0===i&&void 0!==t.url&&(i=z(t.url)),super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:n,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,urls:i,wrapX:void 0!==t.wrapX&&t.wrapX,transition:t.transition,zDirection:t.zDirection}),this.version_=void 0!==t.version?t.version:"1.0.0",this.format_=void 0!==t.format?t.format:"image/jpeg",this.dimensions_=void 0!==t.dimensions?t.dimensions:{},this.layer_=t.layer,this.matrixSet_=t.matrixSet,this.style_=t.style,this.requestEncoding_=e,this.setKey(this.getKeyForDimensions_()),i&&i.length>0&&(this.tileUrlFunction=k(i.map(this.createFromWMTSTemplate.bind(this))))}setUrls(t){this.urls=t
const e=t.join("\n")
this.setTileUrlFunction(k(t.map(this.createFromWMTSTemplate.bind(this))),e)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){const t=this.urls?this.urls.slice(0):[]
for(const e in this.dimensions_)t.push(e+"-"+this.dimensions_[e])
return t.join("/")}updateDimensions(t){Object.assign(this.dimensions_,t),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(t){const e=this.requestEncoding_,n={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_}
"KVP"==e&&Object.assign(n,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),t="KVP"==e?Qn(t,n):t.replace(/\{(\w+?)\}/g,(function(t,e){return e.toLowerCase()in n?n[e.toLowerCase()]:t}))
const i=this.tileGrid,r=this.dimensions_
return function(n,o,s){if(!n)return
const a={TileMatrix:i.getMatrixId(n[0]),TileCol:n[1],TileRow:n[2]}
Object.assign(a,r)
let l=t
return l="KVP"==e?Qn(l,a):l.replace(/\{(\w+?)\}/g,(function(t,e){return a[e]})),l}}}
function fr(t,e){const n=new i.A(32),o=t.getExtent()
return function(i,s){n.expireCache(),o&&(i=(0,r._N)(o,i))
const a=t.getZForResolution(s),l=[]
return t.forEachTileCoord(i,a,(t=>{const i=t.toString()
if(!n.containsKey(i)){const r=e(t)
n.set(i,r)}l.push(n.get(i))})),l}}},4749:(t,e,n)=>{"use strict"
n.d(e,{A:()=>a})
var i=n(1051),r=n(72)
class o extends i.A{constructor(t){super(),this.projection=(0,r.Jt)(t.projection),this.attributions_=s(t.attributions),this.attributionsCollapsible_=void 0===t.attributionsCollapsible||t.attributionsCollapsible,this.loading=!1,this.state_=void 0!==t.state?t.state:"ready",this.wrapX_=void 0!==t.wrapX&&t.wrapX,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null
const e=this
this.viewPromise_=new Promise((function(t,n){e.viewResolver=t,e.viewRejector=n}))}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=s(t),this.changed()}setState(t){this.state_=t,this.changed()}}function s(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}const a=o},9481:(t,e,n)=>{"use strict"
n.d(e,{A:()=>S})
var i=n(3844),r=n(1678),o=n(406),s=n(8638),a=n(7067),l=n(7179),u=n(3236),h=n(1736),c=n(7931)
const f=class{constructor(t){this.rbush_=new l(t),this.items_={}}insert(t,e){const n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e}
this.rbush_.insert(n),this.items_[(0,h.v6)(e)]=n}load(t,e){const n=new Array(e.length)
for(let i=0,r=e.length;i<r;i++){const r=t[i],o=e[i],s={minX:r[0],minY:r[1],maxX:r[2],maxY:r[3],value:o}
n[i]=s,this.items_[(0,h.v6)(o)]=s}this.rbush_.load(n)}remove(t){const e=(0,h.v6)(t),n=this.items_[e]
return delete this.items_[e],null!==this.rbush_.remove(n)}update(t,e){const n=this.items_[(0,h.v6)(e)],i=[n.minX,n.minY,n.maxX,n.maxY];(0,u.aI)(i,t)||(this.remove(e),this.insert(t,e))}getAll(){return this.rbush_.all().map((function(t){return t.value}))}getInExtent(t){const e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]}
return this.rbush_.search(e).map((function(t){return t.value}))}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,e){return this.forEach_(this.getInExtent(t),e)}forEach_(t,e){let n
for(let i=0,r=t.length;i<r;i++)if(n=e(t[i]),n)return n
return n}isEmpty(){return(0,c.p)(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const e=this.rbush_.toJSON()
return(0,u.N)(e.minX,e.minY,e.maxX,e.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all())
for(const e in t.items_)this.items_[e]=t.items_[e]}}
var p=n(9621),d=n(4749),g=n(8027),_=n(419)
function m(t,e){return[[-1/0,-1/0,1/0,1/0]]}n(72)
var y=n(6249),v=n(7195),x=n(4757),b=n(6831)
class E extends o.Ay{constructor(t,e,n){super(t),this.feature=e,this.features=n}}class w extends d.A{constructor(t){super({attributions:(t=t||{}).attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===t.wrapX||t.wrapX}),this.on,this.once,this.un,this.loader_=_.tV,this.format_=t.format,this.overlaps_=void 0===t.overlaps||t.overlaps,this.url_=t.url,void 0!==t.loader?this.loader_=t.loader:void 0!==this.url_&&((0,y.v)(this.format_,"`format` must be set when `url` is set"),this.loader_=(0,b.nF)(this.url_,this.format_)),this.strategy_=void 0!==t.strategy?t.strategy:m
const e=void 0===t.useSpatialIndex||t.useSpatialIndex
let n,r
this.featuresRtree_=e?new f:null,this.loadedExtentsRtree_=new f,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(t.features)?r=t.features:t.features&&(n=t.features,r=n.getArray()),e||void 0!==n||(n=new i.A(r)),void 0!==r&&this.addFeaturesInternal(r),void 0!==n&&this.bindFeaturesCollection_(n)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){const e=(0,h.v6)(t)
if(!this.addToIndex_(e,t))return void(this.featuresCollection_&&this.featuresCollection_.remove(t))
this.setupChangeEvents_(e,t)
const n=t.getGeometry()
if(n){const e=n.getExtent()
this.featuresRtree_&&this.featuresRtree_.insert(e,t)}else this.nullGeometryFeatures_[e]=t
this.dispatchEvent(new E(g.A.ADDFEATURE,t))}setupChangeEvents_(t,e){e instanceof p.Ay||(this.featureChangeKeys_[t]=[(0,x.KT)(e,s.A.CHANGE,this.handleFeatureChange_,this),(0,x.KT)(e,a.A.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(t,e){let n=!0
if(void 0!==e.getId()){const t=String(e.getId())
if(t in this.idIndex_)if(e instanceof p.Ay){const i=this.idIndex_[t]
i instanceof p.Ay?Array.isArray(i)?i.push(e):this.idIndex_[t]=[i,e]:n=!1}else n=!1
else this.idIndex_[t]=e}return n&&((0,y.v)(!(t in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[t]=e),n}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){const e=[],n=[],i=[]
for(let r=0,o=t.length;r<o;r++){const e=t[r],i=(0,h.v6)(e)
this.addToIndex_(i,e)&&n.push(e)}for(let r=0,o=n.length;r<o;r++){const t=n[r],o=(0,h.v6)(t)
this.setupChangeEvents_(o,t)
const s=t.getGeometry()
if(s){const n=s.getExtent()
e.push(n),i.push(t)}else this.nullGeometryFeatures_[o]=t}if(this.featuresRtree_&&this.featuresRtree_.load(e,i),this.hasListener(g.A.ADDFEATURE))for(let r=0,o=n.length;r<o;r++)this.dispatchEvent(new E(g.A.ADDFEATURE,n[r]))}bindFeaturesCollection_(t){let e=!1
this.addEventListener(g.A.ADDFEATURE,(function(n){e||(e=!0,t.push(n.feature),e=!1)})),this.addEventListener(g.A.REMOVEFEATURE,(function(n){e||(e=!0,t.remove(n.feature),e=!1)})),t.addEventListener(r.A.ADD,(t=>{e||(e=!0,this.addFeature(t.element),e=!1)})),t.addEventListener(r.A.REMOVE,(t=>{e||(e=!0,this.removeFeature(t.element),e=!1)})),this.featuresCollection_=t}clear(t){if(t){for(const t in this.featureChangeKeys_)this.featureChangeKeys_[t].forEach(x.JH)
this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const t=t=>{this.removeFeatureInternal(t)}
this.featuresRtree_.forEach(t)
for(const e in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[e])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={}
const e=new E(g.A.CLEAR)
this.dispatchEvent(e),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t)
this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,e){const n=[t[0],t[1],t[0],t[1]]
return this.forEachFeatureInExtent(n,(function(n){const i=n.getGeometry()
if(i instanceof p.Ay||i.intersectsCoordinate(t))return e(n)}))}forEachFeatureInExtent(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e)
this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureIntersectingExtent(t,e){return this.forEachFeatureInExtent(t,(function(n){const i=n.getGeometry()
if(i instanceof p.Ay||i.intersectsExtent(t)){const t=e(n)
if(t)return t}}))}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t
return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),(0,c.p)(this.nullGeometryFeatures_)||(0,v.X$)(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){const e=[]
return this.forEachFeatureAtCoordinateDirect(t,(function(t){e.push(t)})),e}getFeaturesInExtent(t,e){if(this.featuresRtree_){if(!(e&&e.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t)
const n=(0,u.QJ)(t,e)
return[].concat(...n.map((t=>this.featuresRtree_.getInExtent(t))))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,e){const n=t[0],i=t[1]
let r=null
const o=[NaN,NaN]
let s=1/0
const a=[-1/0,-1/0,1/0,1/0]
return e=e||_.rT,this.featuresRtree_.forEachInExtent(a,(function(t){if(e(t)){const e=t.getGeometry(),l=s
if(s=e instanceof p.Ay?0:e.closestPointXY(n,i,o,s),s<l){r=t
const e=Math.sqrt(s)
a[0]=n-e,a[1]=i-e,a[2]=n+e,a[3]=i+e}}})),r}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){const e=this.idIndex_[t.toString()]
return void 0!==e?e:null}getFeatureByUid(t){const e=this.uidIndex_[t]
return void 0!==e?e:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const e=t.target,n=(0,h.v6)(e),i=e.getGeometry()
if(i){const t=i.getExtent()
n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(t,e)):this.featuresRtree_&&this.featuresRtree_.update(t,e)}else n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[n]=e)
const r=e.getId()
if(void 0!==r){const t=r.toString()
this.idIndex_[t]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[t]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[n]=e
this.changed(),this.dispatchEvent(new E(g.A.CHANGEFEATURE,e))}hasFeature(t){const e=t.getId()
return void 0!==e?e in this.idIndex_:(0,h.v6)(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&(0,c.p)(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}loadFeatures(t,e,n){const i=this.loadedExtentsRtree_,r=this.strategy_(t,e,n)
for(let o=0,s=r.length;o<s;++o){const t=r[o]
i.forEachInExtent(t,(function(e){return(0,u.ms)(e.extent,t)}))||(++this.loadingExtentsCount_,this.dispatchEvent(new E(g.A.FEATURESLOADSTART)),this.loader_.call(this,t,e,n,(t=>{--this.loadingExtentsCount_,this.dispatchEvent(new E(g.A.FEATURESLOADEND,void 0,t))}),(()=>{--this.loadingExtentsCount_,this.dispatchEvent(new E(g.A.FEATURESLOADERROR))})),i.insert(t,{extent:t.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){const e=this.loadedExtentsRtree_
let n
e.forEachInExtent(t,(function(e){if((0,u.aI)(e.extent,t))return n=e,!0})),n&&e.remove(n)}removeFeatures(t){const e=[]
for(let n=0,i=t.length;n<i;++n){const i=t[n],r=this.removeFeatureInternal(i)
r&&e.push(r)}e.length>0&&this.changed()}removeFeature(t){t&&this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){const e=(0,h.v6)(t)
e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t)
const n=this.featureChangeKeys_[e]
if(!n)return
n.forEach(x.JH),delete this.featureChangeKeys_[e]
const i=t.getId()
return void 0!==i&&delete this.idIndex_[i.toString()],delete this.uidIndex_[e],this.hasListener(g.A.REMOVEFEATURE)&&this.dispatchEvent(new E(g.A.REMOVEFEATURE,t)),t}removeFromIdIndex_(t){let e=!1
for(const n in this.idIndex_){const i=this.idIndex_[n]
if(t instanceof p.Ay&&Array.isArray(i)&&i.includes(t))i.splice(i.indexOf(t),1)
else if(this.idIndex_[n]===t){delete this.idIndex_[n],e=!0
break}}return e}setLoader(t){this.loader_=t}setUrl(t){(0,y.v)(this.format_,"`format` must be set when `url` is set"),this.url_=t,this.setLoader((0,b.nF)(t,this.format_))}}const S=w},8027:(t,e,n)=>{"use strict"
n.d(e,{A:()=>i})
const i={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"}},4549:(t,e,n)=>{"use strict"
function i(t,e,n){const i=void 0!==n?t.toFixed(n):""+t
let r=i.indexOf(".")
return r=-1===r?i.length:r,r>e?i:new Array(1+e-r).join("0")+i}function r(t,e){const n=(""+t).split("."),i=(""+e).split(".")
for(let r=0;r<Math.max(n.length,i.length);r++){const t=parseInt(n[r]||"0",10),e=parseInt(i[r]||"0",10)
if(t>e)return 1
if(e>t)return-1}return 0}n.d(e,{H:()=>i,Z:()=>r})},6838:(t,e,n)=>{"use strict"
n.d(e,{A:()=>r})
var i=n(6249)
const r=class{constructor(t){this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let e=this.oldest_
for(;e;)t(e.value_,e.key_,this),e=e.newer}get(t,e){const n=this.entries_[t]
return(0,i.v)(void 0!==n,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_}remove(t){const e=this.entries_[t]
return(0,i.v)(void 0!==e,"Tried to get a value for a key that does not exist in the cache"),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_}getCount(){return this.count_}getKeys(){const t=new Array(this.count_)
let e,n=0
for(e=this.newest_;e;e=e.older)t[n++]=e.key_
return t}getValues(){const t=new Array(this.count_)
let e,n=0
for(e=this.newest_;e;e=e.older)t[n++]=e.value_
return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){return this.entries_[t]?.value_}pop(){const t=this.oldest_
return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,e){this.get(t),this.entries_[t].value_=e}set(t,e){(0,i.v)(!(t in this.entries_),"Tried to set a value for a key that is used already")
const n={key_:t,newer:null,older:this.newest_,value_:e}
this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[t]=n,++this.count_}setSize(t){this.highWaterMark=t}}},5151:(t,e,n)=>{"use strict"
n.r(e),n.d(e,{Circle:()=>i.A,Fill:()=>r.A,Icon:()=>o.A,IconImage:()=>s.A,Image:()=>a.A,RegularShape:()=>l.A,Stroke:()=>u.A,Style:()=>h.Ay,Text:()=>c.A})
var i=n(6602),r=n(8343),o=n(2375),s=n(9398),a=n(2933),l=n(3247),u=n(7110),h=n(5337),c=n(9769)},6602:(t,e,n)=>{"use strict"
n.d(e,{A:()=>o})
var i=n(3247)
class r extends i.A{constructor(t){super({points:1/0,fill:(t=t||{radius:5}).fill,radius:t.radius,stroke:t.stroke,scale:void 0!==t.scale?t.scale:1,rotation:void 0!==t.rotation?t.rotation:0,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),e=new r({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})
return e.setOpacity(this.getOpacity()),e}setRadius(t){this.radius_=t,this.render()}}const o=r},8343:(t,e,n)=>{"use strict"
n.d(e,{A:()=>s})
var i=n(1410),r=n(9398)
class o{constructor(t){t=t||{},this.patternImage_=null,this.color_=null,void 0!==t.color&&this.setColor(t.color)}clone(){const t=this.getColor()
return new o({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){if(null!==t&&"object"==typeof t&&"src"in t){const e=(0,r.J)(null,t.src,"anonymous",void 0,t.offset?null:t.color?t.color:null,!(t.offset&&t.size))
e.ready().then((()=>{this.patternImage_=null})),e.getImageState()===i.A.IDLE&&e.load(),e.getImageState()===i.A.LOADING&&(this.patternImage_=e)}this.color_=t}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}const s=o},2375:(t,e,n)=>{"use strict"
n.d(e,{A:()=>f})
var i=n(8638),r=n(1410),o=n(2933),s=n(659),a=n(6249),l=n(9398),u=n(1736)
function h(t,e,n,i){return void 0!==n&&void 0!==i?[n/t,i/e]:void 0!==n?n/t:void 0!==i?i/e:1}class c extends o.A{constructor(t){const e=void 0!==(t=t||{}).opacity?t.opacity:1,n=void 0!==t.rotation?t.rotation:0,i=void 0!==t.scale?t.scale:1,o=void 0!==t.rotateWithView&&t.rotateWithView
super({opacity:e,rotation:n,scale:i,displacement:void 0!==t.displacement?t.displacement:[0,0],rotateWithView:o,declutterMode:t.declutterMode}),this.anchor_=void 0!==t.anchor?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==t.anchorOrigin?t.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==t.anchorXUnits?t.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==t.anchorYUnits?t.anchorYUnits:"fraction",this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null
const c=void 0!==t.img?t.img:null
let f,p=t.src
if((0,a.v)(!(void 0!==p&&c),"`image` and `src` cannot be provided at the same time"),void 0!==p&&0!==p.length||!c||(p=c.src||(0,u.v6)(c)),(0,a.v)(void 0!==p&&p.length>0,"A defined and non-empty `src` or `image` must be provided"),(0,a.v)(!((void 0!==t.width||void 0!==t.height)&&void 0!==t.scale),"`width` or `height` cannot be provided together with `scale`"),void 0!==t.src?f=r.A.IDLE:void 0!==c&&(f=c instanceof HTMLImageElement?c.complete?c.src?r.A.LOADED:r.A.IDLE:r.A.LOADING:r.A.LOADED),this.color_=void 0!==t.color?(0,s._j)(t.color):null,this.iconImage_=(0,l.J)(c,p,this.crossOrigin_,f,this.color_),this.offset_=void 0!==t.offset?t.offset:[0,0],this.offsetOrigin_=void 0!==t.offsetOrigin?t.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==t.size?t.size:null,void 0!==t.width||void 0!==t.height){let e,n
if(t.size)[e,n]=t.size
else{const i=this.getImage(1)
if(i.width&&i.height)e=i.width,n=i.height
else if(i instanceof HTMLImageElement){this.initialOptions_=t
const e=()=>{if(this.unlistenImageChange(e),!this.initialOptions_)return
const n=this.iconImage_.getSize()
this.setScale(h(n[0],n[1],t.width,t.height))}
return void this.listenImageChange(e)}}void 0!==e&&this.setScale(h(e,n,t.width,t.height))}}clone(){let t,e,n
return this.initialOptions_?(e=this.initialOptions_.width,n=this.initialOptions_.height):(t=this.getScale(),t=Array.isArray(t)?t.slice():t),new c({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:e,height:n,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_
if(!t){t=this.anchor_
const e=this.getSize()
if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!e)return null
t=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(t[0]*=e[0]),"fraction"==this.anchorYUnits_&&(t[1]*=e[1])}if("top-left"!=this.anchorOrigin_){if(!e)return null
t===this.anchor_&&(t=this.anchor_.slice()),"top-right"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[0]=-t[0]+e[0]),"bottom-left"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[1]=-t[1]+e[1])}this.normalizedAnchor_=t}const e=this.getDisplacement(),n=this.getScaleArray()
return[t[0]-e[0]/n[0],t[1]+e[1]/n[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_
let t=this.offset_
if("top-left"!=this.offsetOrigin_){const e=this.getSize(),n=this.iconImage_.getSize()
if(!e||!n)return null
t=t.slice(),"top-right"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[0]=n[0]-e[0]-t[0]),"bottom-left"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[1]=n[1]-e[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const t=this.getScaleArray()
return this.size_?this.size_[0]*t[0]:this.iconImage_.getImageState()==r.A.LOADED?this.iconImage_.getSize()[0]*t[0]:void 0}getHeight(){const t=this.getScaleArray()
return this.size_?this.size_[1]*t[1]:this.iconImage_.getImageState()==r.A.LOADED?this.iconImage_.getSize()[1]*t[1]:void 0}setScale(t){delete this.initialOptions_,super.setScale(t)}listenImageChange(t){this.iconImage_.addEventListener(i.A.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(i.A.CHANGE,t)}ready(){return this.iconImage_.ready()}}const f=c},9398:(t,e,n)=>{"use strict"
n.d(e,{A:()=>p,J:()=>f})
var i=n(669),r=n(8638),o=n(1410),s=n(659),a=n(8454),l=n(5643),u=n(8166)
let h=null
class c extends i.A{constructor(t,e,n,i,r){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=n,this.canvas_={},this.color_=r,this.imageState_=void 0===i?o.A.IDLE:i,this.size_=t&&t.width&&t.height?[t.width,t.height]:null,this.src_=e,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&this.imageState_===o.A.LOADED){h||(h=(0,a.Y)(1,1,void 0,{willReadFrequently:!0})),h.drawImage(this.image_,0,0)
try{h.getImageData(0,0,1,1),this.tainted_=!1}catch(t){h=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent(r.A.CHANGE)}handleImageError_(){this.imageState_=o.A.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=o.A.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],e=this.size_[1],n=(0,a.Y)(t,e)
n.fillRect(0,0,t,e),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_
return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===o.A.IDLE){this.image_||this.initializeImage_(),this.imageState_=o.A.LOADING
try{void 0!==this.src_&&(this.image_.src=this.src_)}catch(t){this.handleImageError_()}this.image_ instanceof HTMLImageElement&&(0,l.RA)(this.image_,this.src_).then((t=>{this.image_=t,this.handleImageLoad_()})).catch(this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==o.A.LOADED)return
const e=this.image_,n=document.createElement("canvas")
n.width=Math.ceil(e.width*t),n.height=Math.ceil(e.height*t)
const i=n.getContext("2d")
i.scale(t,t),i.drawImage(e,0,0),i.globalCompositeOperation="multiply",i.fillStyle=(0,s.oJ)(this.color_),i.fillRect(0,0,n.width/t,n.height/t),i.globalCompositeOperation="destination-in",i.drawImage(e,0,0),this.canvas_[t]=n}ready(){return this.ready_||(this.ready_=new Promise((t=>{this.imageState_===o.A.LOADED||this.imageState_===o.A.ERROR?t():this.addEventListener(r.A.CHANGE,(function e(){this.imageState_!==o.A.LOADED&&this.imageState_!==o.A.ERROR||(this.removeEventListener(r.A.CHANGE,e),t())}))}))),this.ready_}}function f(t,e,n,i,r,o){let s=void 0===e?void 0:u.ue.get(e,n,r)
return s||(s=new c(t,t instanceof HTMLImageElement?t.src||void 0:e,n,i,r),u.ue.set(e,n,r,s,o)),o&&s&&!u.ue.getPattern(e,n,r)&&u.ue.set(e,n,r,s,o),s}const p=c},8166:(t,e,n)=>{"use strict"
n.d(e,{ue:()=>a})
var i=n(1410),r=n(659),o=n(8454)
function s(t,e,n){return e+":"+t+":"+(n?(0,r._j)(n):"null")}const a=new class{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0
for(const e in this.cache_){const n=this.cache_[e]
3&t++||n.hasListener()||(delete this.cache_[e],delete this.patternCache_[e],--this.cacheSize_)}}}get(t,e,n){const i=s(t,e,n)
return i in this.cache_?this.cache_[i]:null}getPattern(t,e,n){const i=s(t,e,n)
return i in this.patternCache_?this.patternCache_[i]:null}set(t,e,n,r,a){const l=s(t,e,n),u=l in this.cache_
this.cache_[l]=r,a&&(r.getImageState()===i.A.IDLE&&r.load(),r.getImageState()===i.A.LOADING?r.ready().then((()=>{this.patternCache_[l]=(0,o.lr)().createPattern(r.getImage(1),"repeat")})):this.patternCache_[l]=(0,o.lr)().createPattern(r.getImage(1),"repeat")),u||++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}}},2933:(t,e,n)=>{"use strict"
n.d(e,{A:()=>s})
var i=n(1736),r=n(1673)
class o{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=(0,r.xq)(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale()
return new o({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return(0,i.b0)()}getImage(t){return(0,i.b0)()}getHitDetectionImage(){return(0,i.b0)()}getPixelRatio(t){return 1}getImageState(){return(0,i.b0)()}getImageSize(){return(0,i.b0)()}getOrigin(){return(0,i.b0)()}getSize(){return(0,i.b0)()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=(0,r.xq)(t)}listenImageChange(t){(0,i.b0)()}load(){(0,i.b0)()}unlistenImageChange(t){(0,i.b0)()}ready(){return Promise.resolve()}}const s=o},3247:(t,e,n)=>{"use strict"
n.d(e,{A:()=>h})
var i=n(1410),r=n(2933),o=n(659),s=n(7382),a=n(8454),l=n(223)
class u extends r.A{constructor(t){super({opacity:1,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,rotation:void 0!==t.rotation?t.rotation:0,scale:void 0!==t.scale?t.scale:1,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode}),this.canvases_,this.hitDetectionCanvas_=null,this.fill_=void 0!==t.fill?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius_=t.radius,this.radius2_=t.radius2,this.angle_=void 0!==t.angle?t.angle:0,this.stroke_=void 0!==t.stroke?t.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?i.A.LOADING:i.A.LOADED,this.imageState_===i.A.LOADING&&this.ready().then((()=>this.imageState_=i.A.LOADED)),this.render()}clone(){const t=this.getScale(),e=new u({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})
return e.setOpacity(this.getOpacity()),e}getAnchor(){const t=this.size_,e=this.getDisplacement(),n=this.getScaleArray()
return[t[0]/2-e[0]/n[0],t[1]/2+e[1]/n[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(t){let e=this.canvases_[t]
if(!e){const n=this.renderOptions_,i=(0,a.Y)(n.size*t,n.size*t)
this.draw_(n,i,t),e=i.canvas,this.canvases_[t]=e}return e}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,e,n){if(0===e||this.points_===1/0||"bevel"!==t&&"miter"!==t)return e
let i=this.radius_,r=void 0===this.radius2_?i:this.radius2_
if(i<r){const t=i
i=r,r=t}const o=void 0===this.radius2_?this.points_:2*this.points_,s=2*Math.PI/o,a=r*Math.sin(s),l=i-Math.sqrt(r*r-a*a),u=Math.sqrt(a*a+l*l),h=u/a
if("miter"===t&&h<=n)return h*e
const c=e/2/h,f=e/2*(l/u),p=Math.sqrt((i+c)*(i+c)+f*f)-i
if(void 0===this.radius2_||"bevel"===t)return 2*p
const d=i*Math.sin(s),g=r-Math.sqrt(i*i-d*d),_=Math.sqrt(d*d+g*g)/d
if(_<=n){const t=_*e/2-r-i
return 2*Math.max(p,t)}return 2*p}createRenderOptions(){let t,e=l._m,n=l._K,i=0,r=null,o=0,a=0
this.stroke_&&(t=(0,s.F)(this.stroke_.getColor()??l.NT),a=this.stroke_.getWidth()??l.aq,r=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset()??0,n=this.stroke_.getLineJoin()??l._K,e=this.stroke_.getLineCap()??l._m,i=this.stroke_.getMiterLimit()??l.eL)
const u=this.calculateLineJoinSize_(n,a,i),h=Math.max(this.radius_,this.radius2_||0)
return{strokeStyle:t,strokeWidth:a,size:Math.ceil(2*h+u),lineCap:e,lineDash:r,lineDashOffset:o,lineJoin:n,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions()
const t=this.renderOptions_.size
this.canvases_={},this.hitDetectionCanvas_=null,this.size_=[t,t]}draw_(t,e,n){if(e.scale(n,n),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){let t=this.fill_.getColor()
null===t&&(t=l.qY),e.fillStyle=(0,s.F)(t),e.fill()}t.strokeStyle&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}createHitDetectionCanvas_(t){let e
if(this.fill_){let n=this.fill_.getColor(),i=0
"string"==typeof n&&(n=(0,o._j)(n)),null===n?i=1:Array.isArray(n)&&(i=4===n.length?n[3]:1),0===i&&(e=(0,a.Y)(t.size,t.size),this.drawHitDetectionCanvas_(t,e))}return e?e.canvas:this.getImage(1)}createPath_(t){let e=this.points_
const n=this.radius_
if(e===1/0)t.arc(0,0,n,0,2*Math.PI)
else{const i=void 0===this.radius2_?n:this.radius2_
void 0!==this.radius2_&&(e*=2)
const r=this.angle_-Math.PI/2,o=2*Math.PI/e
for(let s=0;s<e;s++){const e=r+s*o,a=s%2==0?n:i
t.lineTo(a*Math.cos(e),a*Math.sin(e))}t.closePath()}}drawHitDetectionCanvas_(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=l.qY,e.fill(),t.strokeStyle&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}const h=u},7110:(t,e,n)=>{"use strict"
n.d(e,{A:()=>r})
class i{constructor(t){t=t||{},this.color_=void 0!==t.color?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=void 0!==t.lineDash?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor()
return new i({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}const r=i},5337:(t,e,n)=>{"use strict"
n.d(e,{Ay:()=>f,d1:()=>h,mC:()=>l})
var i=n(6602),r=n(8343),o=n(7110),s=n(6249)
class a{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=c,void 0!==t.geometry&&this.setGeometry(t.geometry),this.fill_=void 0!==t.fill?t.fill:null,this.image_=void 0!==t.image?t.image:null,this.renderer_=void 0!==t.renderer?t.renderer:null,this.hitDetectionRenderer_=void 0!==t.hitDetectionRenderer?t.hitDetectionRenderer:null,this.stroke_=void 0!==t.stroke?t.stroke:null,this.text_=void 0!==t.text?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry()
return t&&"object"==typeof t&&(t=t.clone()),new a({geometry:t??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=c,this.geometry_=t}setZIndex(t){this.zIndex_=t}}function l(t){let e
if("function"==typeof t)e=t
else{let n
Array.isArray(t)?n=t:((0,s.v)("function"==typeof t.getZIndex,"Expected an `Style` or an array of `Style`"),n=[t]),e=function(){return n}}return e}let u=null
function h(t,e){if(!u){const t=new r.A({color:"rgba(255,255,255,0.4)"}),e=new o.A({color:"#3399CC",width:1.25})
u=[new a({image:new i.A({fill:t,stroke:e,radius:5}),fill:t,stroke:e})]}return u}function c(t){return t.getGeometry()}const f=a},9769:(t,e,n)=>{"use strict"
n.d(e,{A:()=>s})
var i=n(8343),r=n(1673)
class o{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.scaleArray_=(0,r.xq)(void 0!==t.scale?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.repeat_=t.repeat,this.textBaseline_=t.textBaseline,this.fill_=void 0!==t.fill?t.fill:new i.A({color:"#333"}),this.maxAngle_=void 0!==t.maxAngle?t.maxAngle:Math.PI/4,this.placement_=void 0!==t.placement?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=void 0!==t.stroke?t.stroke:null,this.offsetX_=void 0!==t.offsetX?t.offsetX:0,this.offsetY_=void 0!==t.offsetY?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=void 0===t.padding?null:t.padding,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale()
return new o({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRepeat(t){this.repeat_=t}setRotateWithView(t){this.rotateWithView_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=(0,r.xq)(void 0!==t?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}}const s=o},2695:(t,e,n)=>{"use strict"
function i(t,e,n,i){return void 0!==i?(i[0]=t,i[1]=e,i[2]=n,i):[t,e,n]}function r(t,e,n){return t+"/"+e+"/"+n}function o(t){return r(t[0],t[1],t[2])}function s(t){const[e,n,i]=t.substring(t.lastIndexOf("/")+1,t.length).split(",").map(Number)
return r(e,n,i)}function a(t){return t.split("/").map(Number)}function l(t){return(t[1]<<t[0])+t[2]}function u(t,e){const n=t[0],i=t[1],r=t[2]
if(e.getMinZoom()>n||n>e.getMaxZoom())return!1
const o=e.getFullTileRange(n)
return!o||o.containsXY(i,r)}n.d(e,{K:()=>a,N:()=>i,N5:()=>u,dp:()=>r,gr:()=>s,i7:()=>o,tW:()=>l})},9506:(t,e,n)=>{"use strict"
n.d(e,{L:()=>i,R:()=>r})
const i=42,r=256},2282:(t,e,n)=>{"use strict"
n.d(e,{Bb:()=>h,T9:()=>g,Tl:()=>p,Zz:()=>d,cL:()=>s,dI:()=>m,e$:()=>c,hs:()=>f,k3:()=>u,lw:()=>a,vt:()=>o})
var i=n(6249)
const r=new Array(6)
function o(){return[1,0,0,1,0,0]}function s(t){return l(t,1,0,0,1,0,0)}function a(t,e){const n=t[0],i=t[1],r=t[2],o=t[3],s=t[4],a=t[5],l=e[0],u=e[1],h=e[2],c=e[3],f=e[4],p=e[5]
return t[0]=n*l+r*u,t[1]=i*l+o*u,t[2]=n*h+r*c,t[3]=i*h+o*c,t[4]=n*f+r*p+s,t[5]=i*f+o*p+a,t}function l(t,e,n,i,r,o,s){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t[4]=o,t[5]=s,t}function u(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function h(t,e){const n=e[0],i=e[1]
return e[0]=t[0]*n+t[2]*i+t[4],e[1]=t[1]*n+t[3]*i+t[5],e}function c(t,e){const n=Math.cos(e),i=Math.sin(e)
return a(t,l(r,n,i,-i,n,0,0))}function f(t,e,n){return a(t,l(r,e,0,0,n,0,0))}function p(t,e,n){return a(t,l(r,1,0,0,1,e,n))}function d(t,e,n,i,r,o,s,a){const l=Math.sin(o),u=Math.cos(o)
return t[0]=i*u,t[1]=r*l,t[2]=-i*l,t[3]=r*u,t[4]=s*i*u-a*i*l+e,t[5]=s*r*l+a*r*u+n,t}function g(t,e){const n=(r=e)[0]*r[3]-r[1]*r[2]
var r;(0,i.v)(0!==n,"Transformation matrix cannot be inverted")
const o=e[0],s=e[1],a=e[2],l=e[3],u=e[4],h=e[5]
return t[0]=l/n,t[1]=-s/n,t[2]=-a/n,t[3]=o/n,t[4]=(a*h-l*u)/n,t[5]=-(o*h-s*u)/n,t}const _=[1e6,1e6,1e6,1e6,2,2]
function m(t){return"matrix("+t.map(((t,e)=>Math.round(t*_[e])/_[e])).join(", ")+")"}},1736:(t,e,n)=>{"use strict"
function i(){throw new Error("Unimplemented abstract method.")}n.d(e,{b0:()=>i,v6:()=>o})
let r=0
function o(t){return t.ol_uid||(t.ol_uid=String(++r))}}}])
